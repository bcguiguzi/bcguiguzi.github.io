<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python简单程序爬取酷我音乐歌曲信息 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python简单程序爬取酷我音乐歌曲信息" />
<meta property="og:description" content="程序自动过滤掉《歌手(artist)》部分字符串长度大于6字节的数据，使后期的表格更美观
而导致筛选后没有30条数据
程序--down_music--方法中： header部分得自己加上去
在酷我音乐中按12打开点击network，Ctrl&#43;R刷新一下随便打开一个文件查看
Cookie： csrfHost: Referer: User-Agent: 如需要有30条数据，需要删除第39行条件判断： &#39;&#39;&#39; 歌曲连接： http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key=%E6%9D%8E%E8%8D%A3%E6%B5%A9&amp;pn=1&amp;rn=30&amp;httpsStatus=1&amp;reqId=189d5b41-238d-11ed-acf4-4f6bf15618b2 &#39;&#39;&#39; import requests import prettytable as pt # 制表 import time class Kuwo_music: def __init__(self, urls): self.urls = urls def get_html(self, url): header = { &#34;Cookie&#34;: &#34;自己加 &#34;, &#34;csrf&#34;: &#34;自己加&#34;, &#34;Host&#34;: &#34;www.kuwo.cn&#34;, &#34;Referer&#34;: &#34;http://www.kuwo.cn/search/list?key=%E6%9D%8E%E8%8D%A3%E6%B5%A9&#34;, &#34;User-Agent&#34;: &#34;自己加&#34; } return requests.get(url, headers=header) def down_music(self): json_data = self.get_html(self.urls).json() json_list = json_data[&#39;data&#39;][&#39;list&#39;] tb = pt.PrettyTable() tb.field_names = [&#34;序号&#34;, &#34;歌手&#34;, &#34;歌曲&#34;, &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/755d00f63f67775e99d57ba9f460d270/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-25T10:51:17+08:00" />
<meta property="article:modified_time" content="2022-08-25T10:51:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python简单程序爬取酷我音乐歌曲信息</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong><span style="color:#333333;">程序自动过滤掉《歌手(artist)》部分字符串长度大于6字节的数据，使后期的表格更美观</span></strong></p> 
<p><strong><span style="color:#333333;"><a class="link-info" href="https://img-blog.csdnimg.cn/da86f50b025743af8adafe0e77cf2baa.jpeg" rel="nofollow" title="而导致筛选后没有30条数据">而导致筛选后没有30条数据</a></span></strong></p> 
<p><strong><span style="color:#333333;">程序--down_music--方法中：  </span></strong><strong><span style="color:#333333;">header部分得自己加上去</span></strong></p> 
<p><strong><span style="color:#333333;">在酷我音乐中按12打开点击network，Ctrl+R刷新一下随便打开一个文件查看</span></strong></p> 
<pre><span style="background-color:#cccccc;">Cookie：</span>
<span style="background-color:#cccccc;">csrfHost:</span>
<span style="background-color:#cccccc;">Referer:</span>
<span style="background-color:#cccccc;">User-Agent:
</span>
<strong>如需要有30条数据，需要删除第39行条件判断：
</strong>
</pre> 
<p></p> 
<pre><code class="language-python">'''
歌曲连接：
http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key=%E6%9D%8E%E8%8D%A3%E6%B5%A9&amp;pn=1&amp;rn=30&amp;httpsStatus=1&amp;reqId=189d5b41-238d-11ed-acf4-4f6bf15618b2
'''

import requests
import prettytable as pt  # 制表
import time


class Kuwo_music:
    def __init__(self, urls):
        self.urls = urls

    def get_html(self, url):
        header = {

            "Cookie": "自己加 ",
            "csrf": "自己加",
            "Host": "www.kuwo.cn",
            "Referer": "http://www.kuwo.cn/search/list?key=%E6%9D%8E%E8%8D%A3%E6%B5%A9",
            "User-Agent": "自己加"

        }
        return requests.get(url, headers=header)

    def down_music(self):
        json_data = self.get_html(self.urls).json()
        json_list = json_data['data']['list']
        tb = pt.PrettyTable()
        tb.field_names = ["序号", "歌手", "歌曲", "歌曲id", "发行时间"]
        count = 0
       
        for data in json_list:
            artist = data["artist"]
            name = data["name"]
            musicrid = data["musicrid"]
            releaseDate = data["releaseDate"]
            if len(artist) &lt;= 6:
                tb.add_row([count, artist, name, musicrid, releaseDate])
            else:
                continue
            count += 1
        print(tb)


if __name__ == '__main__':
    print("程序仅爬取歌曲信息，没有下载功能".center(70, '*'))
    pages = int(input("输入爬取歌曲页数（一页30首歌）："))
    name = input("歌手名字:")
    for page in range(1, pages + 1):
        urls = f"http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key={name}&amp;pn={page}&amp;rn=30&amp;httpsStatus=1" \
               "&amp;reqId=189d5b41-238d-11ed-acf4-4f6bf15618b2 "
        wo = Kuwo_music(urls)
        wo.down_music()
        time.sleep(0.5)
    input('Press&lt;Enter')
</code></pre> 
<pre>运行查看结果：</pre> 
<p style="text-align:center;"><img alt="" class="left" height="300" src="https://images2.imgbox.com/49/03/5Nu4F98z_o.jpg" width="500"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c11c4b65d429c1ff79f4fb2f1b947c8e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">尝试编写一个加密程序，加密方法将明文的字母变成其后的第4个字母，**字母表首尾相连。非字母符号** 不加密。 例如输入“China“, 输出密文“Glmre“, 输入 “ab123“, 输出 “ef1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8e73cf068f59c3d0cb3541ebe1c6ba0e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux ubuntu 1804 版 安装过程图解说明--详细</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu11.10（32位）编译android常见错误（30种常见的） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu11.10（32位）编译android常见错误（30种常见的）" />
<meta property="og:description" content="开始正式编译，在源码目录下make即可。
make
我完全不知道跑了个啥，只知道超级卡。完成后产生的out文件夹有3.9G。
镜像生成在out/target/product/generic下：android源码编译后得到system.img,ramdisk.img,userdata.img映像文件。其中， ramdisk.img是emulator的文件系统，system.img包括了主要的包、库等文件，userdata.img包括了一些用户数据，emulator加载这3个映像文件后，会把 system和 userdata分别加载到 ramdisk文件系统中的system和 userdata目录下。
当然编译是件很痛苦的事情：
错误1：
************************************************************
You are attempting to build on a 32-bit system.
Only 64-bit build environments are supported beyond froyo/2.2.
************************************************************
解决：
需要进行如下修改即可，将
./external/clearsilver/cgi/Android.mk
./external/clearsilver/java-jni/Android.mk
./external/clearsilver/util/Android.mk
./external/clearsilver/cs/Android.mk
四个文件中的
LOCAL_CFLAGS &#43;= -m64
LOCAL_LDFLAGS &#43;= -m64
注释掉，或者将“64”换成“32”
LOCAL_CFLAGS &#43;= -m32
LOCAL_LDFLAGS &#43;= -m32
然后，将./build/core/main.mk 中的
ifneq (64,$(findstring 64,$(build_arch)))
改为：
ifneq (i686,$(findstring i686,$(build_arch)))
错误2：
host C&#43;&#43;: libutils &lt;= frameworks/base/libs/utils/RefBase.cpp
frameworks/base/libs/utils/RefBase.cpp: In member function ‘void android::RefBase::weakref_type::trackMe(bool, bool)’:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5ec971e2632b3ac743317c04bde446b5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-06-28T17:13:43+08:00" />
<meta property="article:modified_time" content="2012-06-28T17:13:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu11.10（32位）编译android常见错误（30种常见的）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:18px; color:#330099">开始正式编译，在源码目录下make即可。</span></p> 
<p><span style="font-size:18px; color:#330099">make</span></p> 
<p><span style="font-size:18px; color:#330099">我完全不知道跑了个啥，只知道超级卡。完成后产生的out文件夹有3.9G。</span></p> 
<p><span style="font-size:18px; color:#330099">镜像生成在out/target/product/generic下：android源码编译后得到system.img,ramdisk.img,userdata.img映像文件。其中， ramdisk.img是emulator的文件系统，system.img包括了主要的包、库等文件，userdata.img包括了一些用户数据，emulator加载这3个映像文件后，会把 system和 userdata分别加载到 ramdisk文件系统中的system和 userdata目录下。</span></p> 
<p><span style="font-size:18px; color:#330099">当然编译是件很痛苦的事情：</span></p> 
<p><span style="font-size:18px; color:#FF0000">错误</span><span style="font-size:18px; color:#FF0000">1</span><span style="font-size:18px; color:#FF0000">：</span></p> 
<p><span style="font-size:18px; color:#330099">************************************************************</span></p> 
<p><span style="font-size:18px; color:#FF0000">You are attempting to build on a 32-bit system.</span></p> 
<p><span style="font-size:18px; color:#FF0000">Only 64-bit build environments are supported beyond froyo/2.2.</span></p> 
<p><span style="font-size:18px; color:#330099">************************************************************</span></p> 
<p><span style="font-size:18px; color:#330099">解决：</span></p> 
<p><span style="font-size:18px; color:#330099">需要进行如下修改即可，将</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>./external/clearsilver/cgi/Android.mk</strong></span></p> 
<p><span style="font-size:18px; color:#330099"><strong>./external/clearsilver/java-jni/Android.mk</strong></span></p> 
<p><span style="font-size:18px; color:#330099"><strong>./external/clearsilver/util/Android.mk</strong></span></p> 
<p><span style="font-size:18px; color:#330099"><strong>./external/clearsilver/cs/Android.mk</strong></span></p> 
<p><span style="font-size:18px; color:#330099">四个文件中的</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_CFLAGS += -m64</strong></span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_LDFLAGS += -m64</strong></span></p> 
<p><span style="font-size:18px; color:#330099">注释掉，或者将“64”换成“32”</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_CFLAGS += -m32</strong></span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_LDFLAGS += -m32</strong></span></p> 
<p><span style="font-size:18px; color:#330099">然后，将./build/core/main.mk 中的</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>ifneq (64,$(findstring 64,$(build_arch)))</strong></span></p> 
<p><span style="font-size:18px; color:#330099">改为：</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>ifneq (i686,$(findstring i686,$(build_arch)))</strong></span></p> 
<p><span style="font-size:18px; color:#FF0000">错误</span><span style="font-size:18px; color:#FF0000">2</span><span style="font-size:18px; color:#FF0000">：</span></p> 
<p><span style="font-size:18px; color:#330099">host C++: libutils &lt;= frameworks/base/libs/utils/RefBase.cpp</span></p> 
<p><span style="font-size:18px; color:#330099">frameworks/base/libs/utils/RefBase.cpp: In member function ‘void android::RefBase::weakref_type::trackMe(bool, bool)’:</span></p> 
<p><span style="font-size:18px; color:#330099">frameworks/base/libs/utils/RefBase.cpp:483:67: error: passing ‘const android::RefBase::weakref_impl’ as ‘this’ argument of ‘void android::RefBase::weakref_impl::trackMe(bool, bool)’ discards qualifiers [-fpermissive]</span></p> 
<p><span style="font-size:18px; color:#FF0000">make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libutils_intermediates/RefBase.o] 错误 1</span></p> 
<p><span style="font-size:18px; color:#330099">解决：</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>gedit frameworks/base/libs/utils/Android.mk</strong></span></p> 
<p><span style="font-size:18px; color:#330099">Change the line:</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_CFLAGS += -DLIBUTILS_NATIVE=1 $(TOOL_CFLAGS)</strong></span></p> 
<p><span style="font-size:18px; color:#330099">To:</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_CFLAGS += -DLIBUTILS_NATIVE=1 $(TOOL_CFLAGS) –fpermissive</strong></span></p> 
<p><span style="font-size:18px; color:#FF0000"><a name="OLE_LINK4"></a><a name="OLE_LINK3"></a></span><span style="font-size:18px; color:#FF0000">错误</span><span style="font-size:18px; color:#FF0000">3</span><span style="font-size:18px; color:#FF0000">：</span></p> 
<p><span style="font-size:18px; color:#330099"> </span></p> 
<p><span style="font-size:18px; color:#330099">host Executable: aapt (out/host/linux-x86/obj/EXECUTABLES/aapt_intermediates/aapt)</span></p> 
<p><span style="font-size:18px; color:#330099">out/host/linux-x86/obj/STATIC_LIBRARIES/libcutils_intermediates/libcutils.a(threads.o): In function `thread_store_get':</span></p> 
<p><span style="font-size:18px; color:#330099">/home/leno/works/android_dev/bin/system/core/libcutils/threads.c:27: undefined reference to `pthread_getspecific'</span></p> 
<p><span style="font-size:18px; color:#330099">out/host/linux-x86/obj/STATIC_LIBRARIES/libcutils_intermediates/libcutils.a(threads.o): In function `thread_store_set':</span></p> 
<p><span style="font-size:18px; color:#330099">/home/leno/works/android_dev/bin/system/core/libcutils/threads.c:36: undefined reference to `pthread_key_create'</span></p> 
<p><span style="font-size:18px; color:#330099">/home/leno/works/android_dev/bin/system/core/libcutils/threads.c:44: undefined reference to `pthread_setspecific'</span></p> 
<p><span style="font-size:18px; color:#330099">collect2: ld returned 1 exit status</span></p> 
<p><span style="font-size:18px; color:#FF0000">make: *** [out/host/linux-x86/obj/EXECUTABLES/aapt_intermediates/aapt] 错误 1</span></p> 
<p><span style="font-size:18px; color:#330099">解决：</span></p> 
<p><span style="font-size:18px; color:#330099">打开 frameworks/base/tools/aapt/Android.mk</span></p> 
<p><span style="font-size:18px; color:#330099">然后打开文件<a name="OLE_LINK2"></a><a name="OLE_LINK1"></a>Android.mk，编辑下面一行：</span></p> 
<p><span style="font-size:18px; color:#330099">ifeq ($(HOST_OS),linux)</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>#LOCAL_LDLIBS += -lrt </strong>　　　　　　把这行注释掉，改为下面一行。</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_LDLIBS += -lrt -lpthread</strong></span></p> 
<p><span style="font-size:18px; color:#330099">endif</span></p> 
<p><span style="font-size:18px; color:#FF0000">错误</span><span style="font-size:18px; color:#FF0000">4</span><span style="font-size:18px; color:#FF0000">：</span></p> 
<p><span style="font-size:18px; color:#330099">target Dex: core</span></p> 
<p><span style="font-size:18px; color:#330099">#</span></p> 
<p><span style="font-size:18px; color:#330099"># An unexpected error has been detected by HotSpot Virtual Machine:</span></p> 
<p><span style="font-size:18px; color:#330099">#</span></p> 
<p><span style="font-size:18px; color:#330099">#  SIGSEGV (0xb) at pc=0x4003d848, pid=7668, tid=2889534320</span></p> 
<p><span style="font-size:18px; color:#330099">#</span></p> 
<p><span style="font-size:18px; color:#330099"># Java VM: Java HotSpot(TM) Client VM (1.5.0_22-b03 mixed mode)</span></p> 
<p><span style="font-size:18px; color:#330099"># Problematic frame:</span></p> 
<p><span style="font-size:18px; color:#330099"># C  [libpthread.so.0+0xa848]  pthread_cond_timedwait+0x168</span></p> 
<p><span style="font-size:18px; color:#330099">#</span></p> 
<p><span style="font-size:18px; color:#330099"># An error report file with more information is saved as hs_err_pid7668.log</span></p> 
<p><span style="font-size:18px; color:#330099">#</span></p> 
<p><span style="font-size:18px; color:#330099"># If you would like to submit a bug report, please visit:</span></p> 
<p><span style="font-size:18px; color:#330099">#   http://java.sun.com/webapps/bugreport/crash.jsp</span></p> 
<p><span style="font-size:18px; color:#FF0000">#</span></p> 
<p><span style="font-size:18px; color:#FF0000">make: *** [out/target/common/obj/JAVA_LIBRARIES/core_intermediates/classes.dex] 已放弃 (core dumped)</span></p> 
<p><span style="font-size:18px; color:#330099">解决：</span></p> 
<p><span style="font-size:18px; color:#330099">虚拟机给的内存512太小，给个1G试试。然后在本机里打开任务管理器，找到虚拟机进程，优先级设置为实时。给他最多东西。</span></p> 
<p><span style="font-size:18px; color:#FF0000">错误</span><span style="font-size:18px; color:#330099"> 5</span><span style="font-size:18px; color:#330099">：</span></p> 
<p><span style="font-size:18px; color:#330099">out/host/linux-x86/obj/STATIC_LIBRARIES/libcutils_intermediates/libcutils.a(threads.o): In function `thread_store_get':</span></p> 
<p><span style="font-size:18px; color:#330099">/home/leno/works/android_dev/bin/system/core/libcutils/threads.c:27: undefined reference to `pthread_getspecific'</span></p> 
<p><span style="font-size:18px; color:#330099">out/host/linux-x86/obj/STATIC_LIBRARIES/libcutils_intermediates/libcutils.a(threads.o): In function `thread_store_set':</span></p> 
<p><span style="font-size:18px; color:#330099">/home/leno/works/android_dev/bin/system/core/libcutils/threads.c:36: undefined reference to `pthread_key_create'</span></p> 
<p><span style="font-size:18px; color:#330099">/home/leno/works/android_dev/bin/system/core/libcutils/threads.c:44: undefined reference to `pthread_setspecific'</span></p> 
<p><span style="font-size:18px; color:#330099">collect2: ld returned 1 exit status</span></p> 
<p><span style="font-size:18px; color:#FF0000">make: *** [out/host/linux-x86/obj/EXECUTABLES/localize_intermediates/localize] 错误 1</span></p> 
<p><span style="font-size:18px; color:#330099">解决：类似问题3</span></p> 
<p><span style="font-size:18px; color:#330099">修改./framework/base/tools/localize/Android.mk文件</span></p> 
<p><span style="font-size:18px; color:#330099">ifeq ($(HOST_OS),linux)</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>#LOCAL_LDLIBS += -lrt </strong>　　　　　　把这行注释掉，改为下面一行。</span></p> 
<p><span style="font-size:18px; color:#330099"><strong>LOCAL_LDLIBS += -lrt -lpthread</strong></span></p> 
<p><span style="font-size:18px; color:#330099">endif</span></p> 
<p><span style="font-size:18px; color:#330099"><br> </span></p> 
<p><span style="font-size:18px; color:#330099"><span class="link_report"></span></span></p> 
<div id="article_content" class="article_content"> 
 <p><span style="font-size:18px; color:#FF0000">错误6：</span><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099">注意：external/protobuf/java/src/main/java/com/google/protobuf/GeneratedMessageLite.java 使用了未经检查或不安全的操作。</span></p> 
 <span style="font-size:18px; color:#330099">注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。<br> 注意：external/protobuf/java/src/main/java/com/google/protobuf/micro/CodedInputStreamMicro.java 使用了未经检查或不安全的操作。<br> 注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。<br> Generated: (out/target/product/generic/android-info.txt)<br> host C: acp &lt;= build/tools/acp/acp.c<br> host C++: libhost &lt;= build/libs/host/pseudolocalize.cpp<br> host C: libhost &lt;= build/libs/host/CopyFile.c<br> &lt;命令行&gt;:0:0: 警告： “_FORTIFY_SOURCE”重定义 [默认启用]<br> &lt;built-in&gt;:0:0: 附注： 这是先前定义的位置<br> &lt;命令行&gt;:0:0: 警告： “_FORTIFY_SOURCE”重定义 [默认启用]<br> &lt;built-in&gt;:0:0: 附注： 这是先前定义的位置<br> In file included from build/libs/host/CopyFile.c:11:0:<br> build/libs/host/include/host/CopyFile.h:5:22: 致命错误： sys/stat.h：没有那个文件或目录<br> 编译中断。<br> In file included from /usr/include/stdlib.h:25:0,<br>                  from build/tools/acp/acp.c:11:<br> /usr/include/features.h:323:26: 致命错误： bits/predefs.h：没有那个文件或目录<br> 编译中断。<br> <span style="color:#FF0000">make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libhost_intermediates/CopyFile.o] 错误 1<br> make: *** 正在等待未完成的任务....<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp.o] 错误 1</span><br> &lt;命令行&gt;:0:0: 警告： “_FORTIFY_SOURCE”重定义 [默认启用]<br> &lt;built-in&gt;:0:0: 附注： 这是先前定义的位置<br> In file included from /usr/include/c++/4.6/x86_64-linux-gnu/32/bits/os_defines.h:40:0,<br>                  from /usr/include/c++/4.6/x86_64-linux-gnu/32/bits/c++config.h:392,<br>                  from /usr/include/c++/4.6/string:40,<br>                  from build/libs/host/include/host/pseudolocalize.h:4,<br>                  from build/libs/host/pseudolocalize.cpp:1:<br> /usr/include/features.h:323:26: 致命错误： bits/predefs.h：没有那个文件或目录<br> 编译中断。<br> </span> 
 <p><span style="font-size:18px; color:#FF0000">make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libhost_intermediates/pseudolocalize.o] 错误 1</span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">注意：某些输入文件使用或覆盖了已过时的 API。<br> 注意：要了解详细信息，请使用 -Xlint:deprecation 重新编译。<br> 注意：某些输入文件使用了未经检查或不安全的操作。<br> </span> 
 <p><span style="font-size:18px; color:#330099">注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。</span></p> 
 <p><span style="font-size:18px; color:#330099"><span style="background-color:rgb(255,255,255)">解决方法：</span></span><span style="font-size:18px; color:#330099">sudo apt-get install libc6-dev-i386</span></p> 
 <p style="color:rgb(255,0,0)"><span style="font-size:18px; color:#330099">http://www.blogjava.net/ZircoN/archive/2011/11/13/363452.html</span></p> 
 <p><span style="font-size:18px; color:#FF0000">错误7：</span><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">frameworks/base/libs/utils/RefBase.cpp: 在成员函数‘void android::RefBase::weakref_type::trackMe(bool, bool)’中:<br> frameworks/base/libs/utils/RefBase.cpp:483:67: 错误： 将‘const android::RefBase::weakref_impl’作为‘void android::RefBase::weakref_impl::trackMe(bool, bool)’的‘this’实参时丢弃了类型限定 [-fpermissive]<br> <span style="color:#FF0000">make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libutils_intermediates/RefBase.o] 错误 1</span><br> make: *** 正在等待未完成的任务....<br> frameworks/base/libs/utils/ResourceTypes.cpp: 在成员函数‘void android::ResTable::print(bool) const’中:<br> frameworks/base/libs/utils/ResourceTypes.cpp:4369:84: 警告： 将一个整数转换为大小不同的指针 [-Wint-to-pointer-cast]<br> </span> 
 <p><span style="font-size:18px; color:#330099">frameworks/base/libs/utils/ResourceTypes.cpp:4375:43: 警告： 将一个整数转换为大小不同的指针 [-Wint-to-pointer-cast]</span></p> 
 <span style="font-size:18px; color:#330099">参考网上的解决方法：</span> 
 <p><span style="font-size:18px; color:#330099">$ gedit frameworks</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">base</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">libs</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">utils</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">Android.mk</span></p> 
 <p><span style="font-size:18px; color:#330099">将下面一行</span></p> 
 <div style="background-color:#eeeeee; font-size:13px; border:1px solid #CCCCCC; padding-right:5px; padding-bottom:4px; padding-left:4px; padding-top:4px; width:98%; word-break:break-all"> 
  <p><span style="font-size:18px; color:#330099">LOCAL_CFLAGS </span><span style="font-size:18px; color:#330099">+=</span><span style="font-size:18px; color:#330099"> </span><span style="font-size:18px; color:#330099">-</span><span style="font-size:18px; color:#330099">DLIBUTILS_NATIVE</span><span style="font-size:18px; color:#330099">=</span><span style="font-size:18px; color:#330099">1</span><span style="font-size:18px; color:#330099"> $(TOOL_CFLAGS)</span></p> 
 </div> 
 <p><span style="font-size:18px; color:#330099">改成<br> </span></p> 
 <div style="background-color:#eeeeee; font-size:13px; border:1px solid #CCCCCC; padding-right:5px; padding-bottom:4px; padding-left:4px; padding-top:4px; width:98%; word-break:break-all"> 
  <p><span style="font-size:18px; color:#330099">LOCAL_CFLAGS </span><span style="font-size:18px; color:#330099">+=</span><span style="font-size:18px; color:#330099"> </span><span style="font-size:18px; color:#330099">-</span><span style="font-size:18px; color:#330099">DLIBUTILS_NATIVE</span><span style="font-size:18px; color:#330099">=</span><span style="font-size:18px; color:#330099">1</span><span style="font-size:18px; color:#330099"> $(TOOL_CFLAGS) –fpermissive</span></p> 
 </div> 
 <p><span style="font-size:18px; color:#330099">http://www.blogjava.net/ZircoN/archive/2011/11/13/363452.html</span></p> 
 <p style="background-color:rgb(255,255,255)"><span style="font-size:18px; color:#330099">问题并没有解决，反而又出现了新的错误：</span></p> 
 <span style="font-size:18px; color:#330099">host C++: libutils &lt;= frameworks/base/libs/utils/Asset.cpp<br> g++: –fpermissive：没有那个文件或目录<br> 注意：某些输入文件使用或覆盖了已过时的 API。<br> 注意：要了解详细信息，请使用 -Xlint:deprecation 重新编译。<br> 注意：某些输入文件使用了未经检查或不安全的操作。<br> 注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。<br> <span style="color:#FF0000">make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libutils_intermediates/Asset.o] 错误 1<br> make: *** 正在删除文件“out/host/linux-x86/obj/STATIC_LIBRARIES/libutils_intermediates/Asset.o”<br> </span></span> 
 <p><span style="font-size:18px; color:#FF0000">make: *** 正在等待未完成的任务....</span></p> 
 <p><span style="font-size:18px; color:#330099"><span style="background-color:rgb(255,0,0)">这个错误主要是gcc版本过高引起的：最终解决办法是：</span><br> </span></p> 
 <span style="font-size:18px; color:#330099">（</span> 
 <span style="font-size:18px; color:#330099">11.10的gcc版本过高</span> 
 <p style="color:rgb(255,0,0)"><span style="font-size:18px; color:#330099">http://hi.baidu.com/designhouse/blog/item/fec5cdbf8d6a231618d81fc1.html）</span></p> 
 <p><span style="font-size:18px; color:#330099">ubuntu 11.10的gcc版本是4.6.1，版本太高，编译android时出错，要把gcc版本改为4.4.3。</span></p> 
 <div> 
  <p><span style="font-size:18px; color:#330099">通过gcc -v命令可以发现gcc库在/usr/lib/gcc/i686-linux-gnu目录下，该目录下有当前系统支持的各种版本gcc库 。在安装gcc 4.4前该目录下是没有4.4目录的，安装gcc 4.4后该目录下就会多出4.4这个目录，且该4.4目录下有各种相应库文件。</span></p> 
  <p><span style="font-size:18px; color:#330099">ubuntu 32bit系统下安装gcc 4.4的最好方法是仅用以下两条命令，不需要其它命令，否则编译时可能会出错。</span></p> 
  <p><span style="font-size:18px; color:#330099">sudo apt-get install gcc-4.4</span></p> 
  <p><span style="font-size:18px; color:#330099">sudo apt-get install g++-4.4</span></p> 
  <p><span style="font-size:18px; color:#330099"><br> </span></p> 
  <div> 
   <span style="font-size:18px; color:#330099"><br> </span> 
  </div> 
  <div> 
   <span style="font-size:18px; color:#330099">装完后在/usr/bin目录下</span> 
  </div> 
 </div> 
 <p><span style="font-size:18px; color:#330099">$ ls -l gcc*</span></p> 
 <p><span style="font-size:18px; color:#330099">lrwxrwxrwx 1 root root      7 2011-10-29 09:11 gcc -&gt; gcc-4.6</span></p> 
 <p><span style="font-size:18px; color:#330099">-rwxr-xr-x 1 root root 224544 2011-10-06 05:47 gcc-4.4</span></p> 
 <p><span style="font-size:18px; color:#330099">-rwxr-xr-x 1 root root 302104 2011-09-17 05:43 gcc-4.6</span></p> 
 <div> 
  <span style="font-size:18px; color:#330099">发现gcc 链接到gcc-4.6,  需要将它改为链接到gcc-4.4 :</span> 
 </div> 
 <p><span style="font-size:18px; color:#330099">sudo mv gcc gcc.bak</span></p> 
 <p><span style="font-size:18px; color:#330099">sudo ln -s gcc-4.4 gcc</span></p> 
 <p><span style="font-size:18px; color:#330099">$ls -l g++*</span></p> 
 <p><span style="font-size:18px; color:#330099">sudo -s</span></p> 
 <p><span style="font-size:18px; color:#330099">mv g++-4.4 g++</span></p> 
 <p><span style="font-size:18px; color:#330099">g++ -v<br> </span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#FF0000">错误8：</span><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">g++: g++: selected multilib '32' not installed<br> selected multilib '32' not installed<br> <span style="color:#FF0000">make: *** [out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl] 错误 1<br> make: *** 正在等待未完成的任务....<br> make: *** [out/host/linux-x86/obj/lib/libESR_Portable.so] 错误 1</span><br> <br> </span> 
 <p><span style="font-size:18px; color:#330099">解决方法：</span></p> 
 <p><span style="font-size:18px; color:#330099">输入：sudo apt-get install gcc-multilib</span></p> 
 <p><span style="font-size:18px; color:#330099">sudo apt-get install g++-multilib后出现新问题：</span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">g++: g++: host SharedLib: libfst (out/host/linux-x86/obj/lib/libfst.so)<br> g++: selected multilib '32' not installedselected multilib '32' not installed<br> <br> selected multilib '32' not installed<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl] 错误 1<br> make: *** 正在等待未完成的任务....<br> make: *** [out/host/linux-x86/obj/lib/libESR_Portable.so] 错误 1<br> </span> 
 <p><span style="font-size:18px; color:#330099">make: *** [out/host/linux-x86/obj/lib/libfst.so] 错误 1</span></p> 
 <p><span style="font-size:18px; color:#330099">解决方法<br> </span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099"> sudo apt-get install libc6-dev ia32-libs lib32ncurses5-dev x11proto-core-dev libx11-dev lib32readline-gplv2-dev lib32z-dev libgl1-mesa-dev mingw32 tofrodos python-markdown libxml2-utils</span></p> 
 <p><span style="font-size:18px; color:#330099">sudo apt-get install g++-4.4-multilib</span></p> 
 <p><span style="font-size:18px; color:#FF0000">错误9：</span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099"><br> Could not load 'clearsilver-jni'<br> java.library.path = out/host/linux-x86/lib<br> Could not load 'clearsilver-jni'<br> java.library.path = out/host/linux-x86/lib<br> <span style="color:#FF0000">make: *** [out/target/common/docs/api-stubs-timestamp] 错误 45<br> make: *** 正在等待未完成的任务....<br> make: *** [out/target/common/docs/doc-comment-check-timestamp] 错误 45</span><br> <br> </span> 
 <p><span style="font-size:18px; color:#330099">解决方法：</span></p> 
 <p><span style="font-size:18px; color:#330099">这是由于clearsilver 在编译时如果检测到使用Java JDK 6，就使用64位编译。要避开此错误，需要修改下面四个文件：<br> <br> * external/clearsilver/cgi/Android.mk<br> * external/clearsilver/java-jni/Android.mk<br> * external/clearsilver/util/Android.mk<br> * external/clearsilver/cs/Android.mk<br> <br> 把这四个Makefile中的下列语句注掉即可：<br> <br> # This forces a 64-bit build for Java6<br> # Comment by Easwy<br> # LOCAL_CFLAGS += -m64<br> # LOCAL_LDFLAGS += -m64 <br> <br> 然后在external/clearsilver目录中执行一下make clean，然后回到项目根目录，继续make即可。<br> <br> 当编译完成时，生成的image文件放在out/target/product/generic目录中。<br> <br> <br> gedit /root/.bashrc<br> export PATH=/root/android/mydroid/out/host/linux-x86/bin:$PATH<br> export ANDROID_PRODUCT_OUT=/root/android/mydroid/out/target/product/generic<br> export ANDROID_SWT=/root/android/mydroid/out/host/linux-x86/framework <br> <br> 在源码目录下的out/target/product/generic/目录下运行<br> emulator -image system.img -data userdata.img -ramdisk ramdisk.img 命令</span></p> 
 <p><span style="font-size:18px; color:#FF0000">错误10：</span></p> 
 <p><span style="font-size:18px; color:#330099"> emulator<br> </span></p> 
 <p><span style="font-size:18px; color:#330099">NAND: could not write file system.img, File exists</span></p> 
 <p><br> </p> 
 <p><span style="font-size:18px; color:#330099"><span style="color:#FFFF33"><span style="background-color:rgb(204,0,0)">另外：还有：</span></span><br> </span></p> 
 <p></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>1、权限不够遇到多次<br> /bin/bash: prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-gcc: 权限不够 <br> /bin/bash: prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-gcc: 权限不够 <br> /bin/bash: build/core/find-jdk-tools-jar.sh: 权限不够 <br> /bin/bash: build/tools/findleaves.py: 权限不够 <br> /bin/bash: build/tools/findleaves.py: 权限不够 <br> Checking API: checkapi-last <br> /bin/bash: out/host/linux-x86/bin/apicheck: 权限不够</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong><span style="font-size:16px"><span style="color:#0000ff"><span style="background-color:#888888"><span style="background-color:#c0c0c0">解决：<br> chmod a+x prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-gcc<br> 对所有没有权限的文件增加可执行权限</span></span></span></span></strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong><span style="font-size:16px"><span style="background-color:#888888"></span></span></strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong><span style="font-size:18px">2.make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp.o] 错误 1<br> 在32位下编译，直接make就可以了<br> 在64位下编译，会出一些错误，需要额外安装一些包： <br>      A， 没有gnu/stubs-32.h文件：<br>       /usr/include/gnu/stubs.h:7:27: error: gnu/stubs-32.h: 没有该文件或目录<br>       make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp.o] 错误 1<br> <span style="background-color:#c0c0c0">解决方法：<br> 确定你的系统是x86_64 GNU/Linux<br>        </span><a href="mailto:root@mm-desktop:/home/mm/android" rel="nofollow"><span style="background-color:#c0c0c0">root@mm-desktop:/home/mm/android</span></a><span style="background-color:#c0c0c0"># uname -a<br>        Linux mm-desktop 2.6.27-9-generic #1 SMP Thu Nov 20 22:15:32 UTC 2008 x86_64 GNU/Linux<br> 安装libc6-dev-i386 <br>      sudo apt-get install libc6-dev-i386 </span></span></strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>     B。找不到-lstdc++<br>      /usr/bin/ld: cannot find -lstdc++<br> <span style="background-color:#c0c0c0">解决方法：<br> 安装 g++-multilib，lib32z1-dev 和 lib32ncurses5-dev<br>       apt-get install g++-4.2-multilib  lib32z1-dev lib32ncurses5-dev</span></strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong><br> 3.make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp] 错误 1<br> 安装 g++-4.5-multilib<br>  $ sudo aptitude install git-core gnupg flex bison gperf libsdl-dev libesd0-dev libwxgtk2.6-dev build-essential zip curl libncurses5-dev zlib1g-dev<br> sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev ia32-libs x11proto-core-dev libx11-dev lib32readline5-dev lib32z-dev java-common unixodbc</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"> </span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"> 4.arm-eabi-gcc: error trying to exec 'cc1': execvp: No such file or directory</span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099">同事编kernel的时候总是会报下面的错误～～最后发现是交叉编译工具的权限问题，chmod -R 777 * 就可以了<br> arm-eabi-gcc: error trying to exec 'cc1': execvp: No such file or directory<br> 总结一下：<br> 1、确认CROSS－COMPILE的目录在PATH里面<br> 2、确认cc1是存在的<br> 3、确认交叉编译工具的权限</span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"> </span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"> </span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"> </span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>摘录：</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误处理<br>       在Ubuntu10.10（64位）编译Android2.3源码时，遇到各种各样的问题。不是缺这个，就是少那个。现把这些问题和解决方法罗列出来，供大家参考。</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> /usr/include/gnu/stubs.h:7:27: error: gnu/stubs-32.h: No such file or directory<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp.o] 错误 1</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> 　　sudo apt-get install libc6-dev-i386</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp] error 1</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> 　　sudo apt-get install g++-multilib</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> external/clearsilver/cgi/cgi.c:22: fatal error: zlib.h: No such file or directory<br> compilation terminated.<br> make: *** [out/host/linux-x86/obj/SHARED_LIBRARIES/libneo_cgi_intermediates/cgi.o] Error 1</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> sudo apt-get install zlib1g-dev</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> /usr/bin/ld: cannot find -lz<br> collect2: ld returned 1 exit status<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/aapt_intermediates/aapt] Error 1</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> sudo apt-get install lib32z1-dev</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> bison -d  -o out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl_language_y.cpp frameworks/base/tools/aidl/aidl_language_y.y<br> /bin/bash: bison: command not found<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl_language_y.cpp] Error 127</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> sudo apt-get install bison</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> Lex: aidl &lt;= frameworks/base/tools/aidl/aidl_language_l.l<br> /bin/bash: flex: command not found<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl_language_l.cpp] Error 127</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> sudo apt-get install flex</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> /usr/bin/ld: cannot find -lncurses<br> collect2: ld returned 1 exit status<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/adb_intermediates/adb] Error 1</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> sudo apt-get install lib32ncurses5-dev</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> prebuilt/linux-x86/sdl/include/SDL/SDL_syswm.h:55: fatal error: X11/Xlib.h: No such file or directory<br> compilation terminated.<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/emulator_intermediates/android/main-common.o] Error 1</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> sudo apt-get install libx11-dev</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> sh: gperf: not found<br> calling gperf failed: 32512 at ./makeprop.pl line 96.<br> make: *** [out/target/product/generic/obj/STATIC_LIBRARIES/libwebcore_intermediates/WebCore/css/CSSPropertyNames.h] Error 25<br> make: *** Deleting file `out/target/product/generic/obj/STATIC_LIBRARIES/libwebcore_intermediates/WebCore/css/CSSPropertyNames.h'</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br> sudo apt-get install gperf</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>错误：<br> build/core/java.mk:9: *** bin: Target java module does not define any source or resource files. Stop.</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>解决：<br>       删除源码根目录下的bin文件夹，这个文件夹是导入eclipse时创建的。</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>cannot find -lXXX<br>           所有编译过程中遇到的类似这样的错误，都是缺少libXXX这样的库，解决方法就是： <br> 首先：利用命令：apt-cache search XXX 进行库搜索 <br> 然后：找那些libXXX-dev这样的库进行安装，命令就是：sudo apt-get install libXXX-dev <br> 最后：继续执行make <br> </strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>生成固件</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>1.在源码根目录下执行一下:<br> . build/envsetup.sh</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>2.通过所有编译（make）或模块编译（mmm）</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>   需要使用超级用户进行编译，要不会出现一下权限问题</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>3.通过 export -p 查看HOME 的路径是否正确，否则修改 HOME 锁指向的路径为home/用户 中，直接 export HOME="/home/用户"<br> 4.在“/home/用户”目录下新建文件夹 firmware<br> 5.在Android 源码根目录下 执行./mkimage.sh</strong></span></p> 
 <p style="text-align:left"><span style="font-size:18px; color:#330099"><strong>修改./mkimage.sh 中的路径指向 “/home/用户”目录下的文件夹 firmware</strong></span></p> 
 <p><span style="font-size:18px; color:#330099"><strong>固件在firmware中生成</strong></span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099">错误1：</span><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099">注意：external/protobuf/java/src/main/java/com/google/protobuf/GeneratedMessageLite.java 使用了未经检查或不安全的操作。</span></p> 
 <span style="font-size:18px; color:#330099">注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。<br> 注意：external/protobuf/java/src/main/java/com/google/protobuf/micro/CodedInputStreamMicro.java 使用了未经检查或不安全的操作。<br> 注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。<br> Generated: (out/target/product/generic/android-info.txt)<br> host C: acp &lt;= build/tools/acp/acp.c<br> host C++: libhost &lt;= build/libs/host/pseudolocalize.cpp<br> host C: libhost &lt;= build/libs/host/CopyFile.c<br> &lt;命令行&gt;:0:0: 警告： “_FORTIFY_SOURCE”重定义 [默认启用]<br> &lt;built-in&gt;:0:0: 附注： 这是先前定义的位置<br> &lt;命令行&gt;:0:0: 警告： “_FORTIFY_SOURCE”重定义 [默认启用]<br> &lt;built-in&gt;:0:0: 附注： 这是先前定义的位置<br> In file included from build/libs/host/CopyFile.c:11:0:<br> build/libs/host/include/host/CopyFile.h:5:22: 致命错误： sys/stat.h：没有那个文件或目录<br> 编译中断。<br> In file included from /usr/include/stdlib.h:25:0,<br>                  from build/tools/acp/acp.c:11:<br> /usr/include/features.h:323:26: 致命错误： bits/predefs.h：没有那个文件或目录<br> 编译中断。<br> make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libhost_intermediates/CopyFile.o] 错误 1<br> make: *** 正在等待未完成的任务....<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp.o] 错误 1<br> &lt;命令行&gt;:0:0: 警告： “_FORTIFY_SOURCE”重定义 [默认启用]<br> &lt;built-in&gt;:0:0: 附注： 这是先前定义的位置<br> In file included from /usr/include/c++/4.6/x86_64-linux-gnu/32/bits/os_defines.h:40:0,<br>                  from /usr/include/c++/4.6/x86_64-linux-gnu/32/bits/c++config.h:392,<br>                  from /usr/include/c++/4.6/string:40,<br>                  from build/libs/host/include/host/pseudolocalize.h:4,<br>                  from build/libs/host/pseudolocalize.cpp:1:<br> /usr/include/features.h:323:26: 致命错误： bits/predefs.h：没有那个文件或目录<br> 编译中断。<br> </span> 
 <p><span style="font-size:18px; color:#330099">make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libhost_intermediates/pseudolocalize.o] 错误 1</span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">注意：某些输入文件使用或覆盖了已过时的 API。<br> 注意：要了解详细信息，请使用 -Xlint:deprecation 重新编译。<br> 注意：某些输入文件使用了未经检查或不安全的操作。<br> </span> 
 <p><span style="font-size:18px; color:#330099">注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。</span></p> 
 <p><span style="font-size:18px; color:#330099"><span style="background-color:rgb(255,255,255)">解决方法：</span></span><span style="font-size:18px; color:#330099">sudo apt-get install libc6-dev-i386</span></p> 
 <p style="color:rgb(255,0,0)"><span style="font-size:18px; color:#330099">http://www.blogjava.net/ZircoN/archive/2011/11/13/363452.html</span></p> 
 <p><span style="font-size:18px; color:#330099">错误2：</span><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">frameworks/base/libs/utils/RefBase.cpp: 在成员函数‘void android::RefBase::weakref_type::trackMe(bool, bool)’中:<br> frameworks/base/libs/utils/RefBase.cpp:483:67: 错误： 将‘const android::RefBase::weakref_impl’作为‘void android::RefBase::weakref_impl::trackMe(bool, bool)’的‘this’实参时丢弃了类型限定 [-fpermissive]<br> make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libutils_intermediates/RefBase.o] 错误 1<br> make: *** 正在等待未完成的任务....<br> frameworks/base/libs/utils/ResourceTypes.cpp: 在成员函数‘void android::ResTable::print(bool) const’中:<br> frameworks/base/libs/utils/ResourceTypes.cpp:4369:84: 警告： 将一个整数转换为大小不同的指针 [-Wint-to-pointer-cast]<br> </span> 
 <p><span style="font-size:18px; color:#330099">frameworks/base/libs/utils/ResourceTypes.cpp:4375:43: 警告： 将一个整数转换为大小不同的指针 [-Wint-to-pointer-cast]</span></p> 
 <span style="font-size:18px; color:#330099">参考网上的解决方法：</span> 
 <p><span style="font-size:18px; color:#330099">$ gedit frameworks</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">base</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">libs</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">utils</span><span style="font-size:18px; color:#330099">/</span><span style="font-size:18px; color:#330099">Android.mk</span></p> 
 <p><span style="font-size:18px; color:#330099">将下面一行</span></p> 
 <div style="border-bottom:#cccccc 1px solid; border-left:#cccccc 1px solid; padding-bottom:4px; background-color:#eeeeee; padding-left:4px; width:98%; padding-right:5px; font-size:13px; word-break:break-all; border-top:#cccccc 1px solid; border-right:#cccccc 1px solid; padding-top:4px"> 
  <p><span style="font-size:18px; color:#330099">LOCAL_CFLAGS </span><span style="font-size:18px; color:#330099">+=</span><span style="font-size:18px; color:#330099"> </span><span style="font-size:18px; color:#330099">-</span><span style="font-size:18px; color:#330099">DLIBUTILS_NATIVE</span><span style="font-size:18px; color:#330099">=</span><span style="font-size:18px; color:#330099">1</span><span style="font-size:18px; color:#330099"> $(TOOL_CFLAGS)</span></p> 
 </div> 
 <p><span style="font-size:18px; color:#330099">改成<br> </span></p> 
 <div style="border-bottom:#cccccc 1px solid; border-left:#cccccc 1px solid; padding-bottom:4px; background-color:#eeeeee; padding-left:4px; width:98%; padding-right:5px; font-size:13px; word-break:break-all; border-top:#cccccc 1px solid; border-right:#cccccc 1px solid; padding-top:4px"> 
  <p><span style="font-size:18px; color:#330099">LOCAL_CFLAGS </span><span style="font-size:18px; color:#330099">+=</span><span style="font-size:18px; color:#330099"> </span><span style="font-size:18px; color:#330099">-</span><span style="font-size:18px; color:#330099">DLIBUTILS_NATIVE</span><span style="font-size:18px; color:#330099">=</span><span style="font-size:18px; color:#330099">1</span><span style="font-size:18px; color:#330099"> $(TOOL_CFLAGS) –fpermissive</span></p> 
 </div> 
 <p><span style="font-size:18px; color:#330099">http://www.blogjava.net/ZircoN/archive/2011/11/13/363452.html</span></p> 
 <p style="background-color:rgb(255,255,255)"><span style="font-size:18px; color:#330099">问题并没有解决，反而又出现了新的错误：</span></p> 
 <span style="font-size:18px; color:#330099">host C++: libutils &lt;= frameworks/base/libs/utils/Asset.cpp<br> g++: –fpermissive：没有那个文件或目录<br> 注意：某些输入文件使用或覆盖了已过时的 API。<br> 注意：要了解详细信息，请使用 -Xlint:deprecation 重新编译。<br> 注意：某些输入文件使用了未经检查或不安全的操作。<br> 注意：要了解详细信息，请使用 -Xlint:unchecked 重新编译。<br> make: *** [out/host/linux-x86/obj/STATIC_LIBRARIES/libutils_intermediates/Asset.o] 错误 1<br> make: *** 正在删除文件“out/host/linux-x86/obj/STATIC_LIBRARIES/libutils_intermediates/Asset.o”<br> </span> 
 <p><span style="font-size:18px; color:#330099">make: *** 正在等待未完成的任务....</span></p> 
 <p><span style="font-size:18px; color:#330099"><span style="background-color:rgb(255,0,0)">这个错误主要是gcc版本过高引起的：最终解决办法是：</span><br> </span></p> 
 <span style="font-size:18px; color:#330099">（</span> 
 <span style="font-size:18px; color:#330099">11.10的gcc版本过高</span> 
 <p style="color:rgb(255,0,0)"><span style="font-size:18px; color:#330099">http://hi.baidu.com/designhouse/blog/item/fec5cdbf8d6a231618d81fc1.html）</span></p> 
 <p><span style="font-size:18px; color:#330099">ubuntu 11.10的gcc版本是4.6.1，版本太高，编译android时出错，要把gcc版本改为4.4.3。</span></p> 
 <div> 
  <p><span style="font-size:18px; color:#330099">通过gcc -v命令可以发现gcc库在/usr/lib/gcc/i686-linux-gnu目录下，该目录下有当前系统支持的各种版本gcc库 。在安装gcc 4.4前该目录下是没有4.4目录的，安装gcc 4.4后该目录下就会多出4.4这个目录，且该4.4目录下有各种相应库文件。</span></p> 
  <p><span style="font-size:18px; color:#330099">ubuntu 32bit系统下安装gcc 4.4的最好方法是仅用以下两条命令，不需要其它命令，否则编译时可能会出错。</span></p> 
  <p><span style="font-size:18px; color:#330099">sudo apt-get install gcc-4.4</span></p> 
  <p><span style="font-size:18px; color:#330099">sudo apt-get install g++-4.4</span></p> 
  <p><span style="font-size:18px; color:#330099"><br> </span></p> 
  <div> 
   <span style="font-size:18px; color:#330099"><br> </span> 
  </div> 
  <div> 
   <span style="font-size:18px; color:#330099">装完后在/usr/bin目录下</span> 
  </div> 
 </div> 
 <p><span style="font-size:18px; color:#330099">$ ls -l gcc*</span></p> 
 <p><span style="font-size:18px; color:#330099">lrwxrwxrwx 1 root root      7 2011-10-29 09:11 gcc -&gt; gcc-4.6</span></p> 
 <p><span style="font-size:18px; color:#330099">-rwxr-xr-x 1 root root 224544 2011-10-06 05:47 gcc-4.4</span></p> 
 <p><span style="font-size:18px; color:#330099">-rwxr-xr-x 1 root root 302104 2011-09-17 05:43 gcc-4.6</span></p> 
 <div> 
  <span style="font-size:18px; color:#330099">发现gcc 链接到gcc-4.6,  需要将它改为链接到gcc-4.4 :</span> 
 </div> 
 <p><span style="font-size:18px; color:#330099">sudo mv gcc gcc.bak</span></p> 
 <p><span style="font-size:18px; color:#330099">sudo ln -s gcc-4.4 gcc</span></p> 
 <p><span style="font-size:18px; color:#330099">错误3：</span><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">g++: g++: selected multilib '32' not installed<br> selected multilib '32' not installed<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl] 错误 1<br> make: *** 正在等待未完成的任务....<br> make: *** [out/host/linux-x86/obj/lib/libESR_Portable.so] 错误 1<br> <br> </span> 
 <p><span style="font-size:18px; color:#330099">解决方法：</span></p> 
 <p><span style="font-size:18px; color:#330099">输入：sudo apt-get install gcc-multilib</span></p> 
 <p><span style="font-size:18px; color:#330099">sudo apt-get install g++-multilib后出现新问题：</span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099">g++: g++: host SharedLib: libfst (out/host/linux-x86/obj/lib/libfst.so)<br> g++: selected multilib '32' not installedselected multilib '32' not installed<br> <br> selected multilib '32' not installed<br> make: *** [out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl] 错误 1<br> make: *** 正在等待未完成的任务....<br> make: *** [out/host/linux-x86/obj/lib/libESR_Portable.so] 错误 1<br> </span> 
 <p><span style="font-size:18px; color:#330099">make: *** [out/host/linux-x86/obj/lib/libfst.so] 错误 1</span></p> 
 <p><span style="font-size:18px; color:#330099">解决方法<br> </span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099"> sudo apt-get install libc6-dev ia32-libs lib32ncurses5-dev x11proto-core-dev libx11-dev lib32readline-gplv2-dev lib32z-dev libgl1-mesa-dev mingw32 tofrodos python-markdown libxml2-utils</span></p> 
 <p><span style="font-size:18px; color:#330099">sudo apt-get install g++-4.4-multilib</span></p> 
 <p><span style="font-size:18px; color:#330099">错误4：</span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <span style="font-size:18px; color:#330099"><br> Could not load 'clearsilver-jni'<br> java.library.path = out/host/linux-x86/lib<br> Could not load 'clearsilver-jni'<br> java.library.path = out/host/linux-x86/lib<br> make: *** [out/target/common/docs/api-stubs-timestamp] 错误 45<br> make: *** 正在等待未完成的任务....<br> make: *** [out/target/common/docs/doc-comment-check-timestamp] 错误 45<br> <br> </span> 
 <p><span style="font-size:18px; color:#330099">解决方法：</span></p> 
 <p><span style="font-size:18px; color:#330099">这是由于clearsilver 在编译时如果检测到使用Java JDK 6，就使用64位编译。要避开此错误，需要修改下面四个文件：<br> <br> * external/clearsilver/cgi/Android.mk<br> * external/clearsilver/java-jni/Android.mk<br> * external/clearsilver/util/Android.mk<br> * external/clearsilver/cs/Android.mk<br> <br> 把这四个Makefile中的下列语句注掉即可：<br> <br> # This forces a 64-bit build for Java6<br> # Comment by Easwy<br> # LOCAL_CFLAGS += -m64<br> # LOCAL_LDFLAGS += -m64 <br> <br> 然后在external/clearsilver目录中执行一下make clean，然后回到项目根目录，继续make即可。<br> <br> 当编译完成时，生成的image文件放在out/target/product/generic目录中。<br> <br> <br> gedit /root/.bashrc<br> export PATH=/root/android/mydroid/out/host/linux-x86/bin:$PATH<br> export ANDROID_PRODUCT_OUT=/root/android/mydroid/out/target/product/generic<br> export ANDROID_SWT=/root/android/mydroid/out/host/linux-x86/framework <br> <br> 在源码目录下的out/target/product/generic/目录下运行<br> emulator -image system.img -data userdata.img -ramdisk ramdisk.img 命令</span></p> 
 <p><span style="font-size:18px; color:#330099">错误5：</span></p> 
 <p><span style="font-size:18px; color:#330099"> emulator<br> </span></p> 
 <span style="font-size:18px; color:#330099">NAND: could not write file system.img, File exists<br> </span> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-weight:normal"></span></span></p> 
 <h2 class="cjk" align="center"><span style="font-size:18px; color:#330099">编译</span><span style="font-family:DejaVu Sans,sans-serif; font-size:18px; color:#330099">Android</span><span style="font-size:18px; color:#330099">源代码</span></h2> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-weight:normal">请按照“获取</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Android</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">源代码”一节中的内容安装所需的相关包，否则在编译源代码的时候会报很多的错。为了方便起见，现将所有需要安装的包罗列如下，其中有些包是可选的，但最好都装上，同时，在安装之前，最好先更新一下：</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">$ sudo aptitude update</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">$ sudo aptitude upgrade</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><strong>Ubuntu Linux</strong></span><span style="font-size:18px; color:#330099"><strong>（</strong></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><strong>32</strong></span><span style="font-size:18px; color:#330099"><strong>位</strong></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><strong>x86</strong></span><span style="font-size:18px; color:#330099"><strong>）</strong></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style="font-weight:normal">$ sudo aptitude install git-core gnupg flex bison gperf libsdl-dev libesd0-dev libwxgtk2.6-dev build-essential zip curl libncurses5-dev zlib1g-dev make gcc g++ libc6</span><span style=""><span style="font-weight:normal">‐</span></span><span style="font-weight:normal">dev patch texinfo ncurses</span><span style=""><span style="font-weight:normal">‐</span></span><span style="font-weight:normal">dev python2.6 valgrind lib32readline5-dev</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style="font-weight:normal">$ sudo apt</span><span style=""><span style="font-weight:normal">itude</span></span><span style="font-weight:normal"> install sun</span><span style=""><span style="font-weight:normal">‐</span></span><span style="font-weight:normal">java6</span><span style=""><span style="font-weight:normal">‐</span></span><span style="font-weight:normal">jdk</span></span></span></p> 
 <p style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><strong>Ubuntu Linux</strong></span><span style="font-size:18px; color:#330099"><strong>（</strong></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><strong>64</strong></span><span style="font-size:18px; color:#330099"><strong>位</strong></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><strong>x86</strong></span><span style="font-size:18px; color:#330099"><strong>）</strong></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">$ sudo apt-get install git-core gnupg flex bison gperf libsdl-dev libesd0-dev libwxgtk2.6-dev build-essential zip curl libncurses5-dev zlib1g-dev make gcc g++ libc6-dev patch texinfo ncurses-dev python2.6 valgrind gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev ia32-libs x11proto-core-dev libx11-dev lib32readline5-dev lib32z-dev</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">$ sudo ln -s /usr/lib32/libX11.so.6 /usr/lib32/libX11.so</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style="font-weight:normal"></span><span style="font-weight:normal">$ sudo apt</span><span style=""><span style="font-weight:normal">itude</span></span><span style="font-weight:normal"> install sun</span><span style=""><span style="font-weight:normal">‐</span></span><span style="font-weight:normal">java6</span><span style=""><span style="font-weight:normal">‐</span></span><span style="font-weight:normal">jdk</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">基本上安装上面罗列的包，编译时就不会有太大的问题，下面列举本人（</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">64</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">位机子，</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Ubuntu10.04</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">系统）在编译时出现的一些错误，以及在出现错误时，相关的解决包。虽然</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">google</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">已将这些必需包在</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">android</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">文档中进行说明了，但在此声明这些问题的解决还是参考网址：</span><span style="font-family:DejaVu Serif,serif"><span style="color:#000080"><span lang="zxx"><u><a href="http://code.google.com/p/android/issues/detail?id=1005" rel="nofollow"><span style="font-weight:normal">http://code.google.com/p/android/issues/detail?id=1005</span></a></u></span></span><span style="font-weight:normal"></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span><span style="font-weight:normal">/usr/include/gnu/stubs.h:7:27: error: gnu/stubs-32.h: No such file or directory make: *** [out/host/linux-x86/obj/EXECUTABLES/acp_intermediates/acp.o] Error 1</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">解决包：</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">$ sudo aptitude install libc6-dev-i386</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">/usr/bin/ld: cannot find -lstdc++</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">collect2: ld returned 1 exit status</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">make: *** [out/host/linux-x86/obj/EXECUTABLES/aidl_intermediates/aidl] Error 1</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span><span style="font-weight:normal">dpkg-query -l &amp;&gt; packages.txt</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">（该工具可用来查询</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">dpkg</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">数据库）</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">解决包：</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">$ sudo aptitude install g++-multilib</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">/usr/bin/ld: cannot find -lncurses</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">collect2: ld returned 1 exit status</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">make: *** [out/host/linux-x86/obj/EXECUTABLES/adb_intermediates/adb] Error 1</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">make: *** Waiting for unfinished jobs....</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">解决包：</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">$ sudo aptitude search lib32ncurses5-dev</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">/usr/bin/ld: cannot find -lz</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">collect2: ld returned 1 exit status</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">make: *** [out/host/linux-x86/obj/EXECUTABLES/zipalign_intermediates/zipalign] Error 1</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">make: *** Waiting for unfinished jobs....</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">解决包：</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">$ sudo aptitude install lib32z-dev</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-weight:normal">同时，网友</span><span style="font-family:DejaVu Serif,serif"><span style="color:#000080"><span lang="zxx"><u><a href="http://code.google.com/u/kees.jongenburger/" rel="nofollow"><span style="font-weight:normal">kees.jongenburger</span></a></u></span></span></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">提出了使用</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">getlibs</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">（该工具可自动解决</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">32</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">位程序在</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">64</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">位系统上的依赖关系）来解决这个问题。具体用法如下：</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">$ getlibs -l libz.so</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">libz.so: zlib1g-dev</span></p> 
 <pre name="code" class="cjk"><span style="font-family:DejaVu Sans Mono,monospace;font-size:18px;color:#330099;">	The following i386 packages will be installed:</span><span style="font-size:18px;color:#330099;">
                                                            </span><span style="font-family:DejaVu Sans Mono,monospace;font-size:18px;color:#330099;">	zlib1g-dev</span><span style="font-size:18px;color:#330099;">
                                                            </span><span style="font-family:DejaVu Sans Mono,monospace;font-size:18px;color:#330099;">	Continue [Y/n]? y</span><span style="font-size:18px;color:#330099;">
                                                            </span><span style="font-family:DejaVu Sans Mono,monospace;font-size:18px;color:#330099;">	Downloading ...</span><span style="font-size:18px;color:#330099;">
                                                            </span><span style="font-family:DejaVu Sans Mono,monospace;font-size:18px;color:#330099;">	Installing libraries ...</span><span style="font-size:18px;color:#330099;">
                                                            </span><span style="font-family:DejaVu Sans Mono,monospace;font-size:18px;color:#330099;">	</span><span style="font-size:18px;color:#330099;">具体</span><span style="font-family:DejaVu Sans Mono,monospace;font-size:18px;color:#330099;">getlibs</span><span style="font-size:18px;color:#330099;">工具的介绍请参考网址： <span style="font-family:DejaVu Sans Mono,monospace;">	<span lang="zxx"><u><a href="http://ubuntuforums.org/showthread.php?t=474790" rel="nofollow">http://ubuntuforums.org/showthread.php?t=474790</a></u></span> </span></span></pre> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style=""><span style="font-weight:normal">注：</span></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">在“获取</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Android</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">源代码”一节中已介绍使用</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">java 6</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">时会有不兼容的问题，但</span><span style=""><span style="font-weight:normal">经过测试发现，如果仅仅</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make</span></span></span><span style=""><span style="font-weight:normal">（</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make</span></span></span><span style=""><span style="font-weight:normal">不包括</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make sdk</span></span></span><span style=""><span style="font-weight:normal">），用</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">sun</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">java6</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">jdk</span></span></span><span style=""><span style="font-weight:normal">是没有问题的。而</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make sdk</span></span></span><span style=""><span style="font-weight:normal">，就会有问题，严格来说是在</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make doc</span></span></span><span style=""><span style="font-weight:normal">时会</span></span><span style=""><span style="font-weight:normal">出问题，它需要的</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">javadoc</span></span></span><span style=""><span style="font-weight:normal">版本为</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">1.5</span></span></span><span style=""><span style="font-weight:normal">。</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style=""><span style="font-weight:normal"></span></span></span><span style="font-size:18px; color:#330099"><span style=""><span style="font-weight:normal">因此，我们安装完</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">sun‐java6‐jdk</span></span></span><span style=""><span style="font-weight:normal">后最好再安装</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">sun‐java5‐jdk</span></span></span><span style=""><span style="font-weight:normal">，或者只安装</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">sun‐java5‐jdk</span></span></span><span style=""><span style="font-weight:normal">。这里</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">sun‐java6‐jdk</span></span></span><span style=""><span style="font-weight:normal">和</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">sun‐java5‐jdk</span></span></span><span style=""><span style="font-weight:normal">都安装，并只修改</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">javadoc.1.gz</span></span></span><span style=""><span style="font-weight:normal">和</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">javadoc</span></span></span><span style=""><span style="font-weight:normal">。因为只有这两个是</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make sdk </span></span></span><span style=""><span style="font-weight:normal">用到的。这样的话，除了</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">javadoc</span></span></span><span style=""><span style="font-weight:normal">工具是用</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">1.5</span></span></span><span style=""><span style="font-weight:normal">版本，其它均用</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">1.6</span></span></span><span style=""><span style="font-weight:normal">版本，</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">java</span></span></span><span style=""><span style="font-weight:normal">的安装目录及结构如下：</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""></span><span style=""><span style="font-weight:normal">derek@derek-desktop:/usr/lib/jvm$ ls -l</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">total 4</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">lrwxrwxrwx 1 root root 19 2010-08-20 23:19 java-6-sun -&gt; java-6-sun-1.6.0.20</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">drwxr-xr-x 8 root root 4096 2010-08-21 00:06 java-6-sun-1.6.0.20</span></span><span style=""></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""></span><span style=""><span style="font-weight:normal">sudo aptitude install sun‐java5‐jdk</span></span></span><span style=""><span style="font-weight:normal">（现在发现找不到</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">java 5</span></span></span><span style=""><span style="font-weight:normal">的包，可能是源的问题）</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal"></span></span></span><span style=""><span style="font-weight:normal">修改</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">javadoc</span></span></span><span style=""><span style="font-weight:normal">的</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">link</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">$ cd /etc/alternatives</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">$ sudo rm javadoc.1.gz</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">$ sudo ln ‐s /usr/lib/jvm/java‐1.5.0‐sun/man/man1/javadoc.1.gz javadoc.1.gz</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">$ sudo rm javadoc</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">$ sudo ln ‐s /usr/lib/jvm/java‐1.5.0‐sun/bin/javadoc javadoc</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">但是，本人在编译</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">2.2</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">系统时测试发现使用</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">java 6</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">并没有上述问题。估计应该是解决了。所以上述对</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">javadoc</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">这快的处理就可以不做了。</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; text-decoration:none"><span style="font-size:18px; color:#330099"><strong>设置环境变量</strong></span></p> 
 <p align="left" style="margin-bottom:0cm; text-decoration:none"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="text-decoration:none"></span></span><span style=""><span style="text-decoration:none"><span style="font-weight:normal">$ vim ~/.bashrc</span></span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style=""></span></span><span style="font-size:18px; color:#330099"><span style="">增加如下的环境变量，包括</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">java</span></span><span style="font-size:18px; color:#330099"><span style="">以及</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">android</span></span><span style="font-size:18px; color:#330099"><span style="">程序开发、运行的一些环境变量</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style=""></span><span style="">JAVA_HOME=/usr/lib/jvm/java-6-sun</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">export JAVA_HOME</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">JRE_HOME=${JAVA_HOME}/jre</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">export JRE_HOME</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">export ANDROID_JAVA_HOME=${JAVA_HOME}</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib:$CLASSPATH</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">export JAVA_PATH=${JAVA_HOME}/bin:${JRE_HOME}/bin</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">HOME_BIN=~/android/bin/</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="">export PATH=${PATH}:${JAVA_PATH}:${HOME_BIN}</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">$ source ~/.bashrc</span></span><span style="font-size:18px; color:#330099"><span style="">（使环境变量的设置立即生效，即同步变化）</span></span></p> 
 <p style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style=""><strong>编译</strong></span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style=""><strong>android</strong></span></span><span style="font-size:18px; color:#330099"><span style=""><strong>源码</strong></span></span></p> 
 <p style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">$ cd ~/android/androidplatform/</span></span><span style="font-size:18px; color:#330099"><span style="">（</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">cd</span></span><span style="font-size:18px; color:#330099"><span style="">到</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">android</span></span><span style="font-size:18px; color:#330099"><span style="">源码目录）</span></span></p> 
 <p style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">$ make</span></span><span style="font-size:18px; color:#330099"><span style="">（或者使用</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">make -jn</span></span><span style="font-size:18px; color:#330099"><span style="">命令，其中，</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">n</span></span><span style="font-size:18px; color:#330099"><span style="">值的确定参考原则为</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">2m-1</span></span><span style="font-size:18px; color:#330099"><span style="">，</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">m</span></span><span style="font-size:18px; color:#330099"><span style="">为处理器核数，本人实验机子为双核，故用</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">make -j3</span></span><span style="font-size:18px; color:#330099"><span style="">）</span></span></p> 
 <p style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style=""></span></span><span style="font-size:18px; color:#330099"><span style="">这个过程很久，大概花两个小时左右，编译完后将</span><span style="">得到</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="">~/android/androidplatform/out</span></span><span style="font-size:18px; color:#330099"><span style="">目录，可参加附件中的目录树文件。</span></span></p> 
 <p style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style=""><strong>编译</strong></span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style=""><strong>SDK</strong></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal"></span></span></span><span style=""><span style="font-weight:normal">直接执行</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make</span></span></span><span style=""><span style="font-weight:normal">是不包括</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make sdk </span></span></span><span style=""><span style="font-weight:normal">的。</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">make sdk</span></span></span><span style=""><span style="font-weight:normal">用来生成</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">SDK</span></span></span><span style=""><span style="font-weight:normal">，这样，我们就可以用与源码同步的</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">SDK</span></span></span><span style=""><span style="font-weight:normal">来开发</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">android</span></span></span><span style=""><span style="font-weight:normal">了。</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style="font-weight:normal"></span><span style=""><span style="font-weight:normal">1</span></span></span><span style=""><span style="font-weight:normal">、</span></span><span style=""><span style="font-weight:normal">查看～</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">/android/androidplatform/</span></span><span style=""><span style="font-weight:normal">frameworks/base/include/utils/Asset.h</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">$ cd ~/android/androidplatform/</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">$ vim frameworks/base/include/utils/Asset.h</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal"></span></span></span><span style=""><span style="font-weight:normal">查看</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">UNCOMPRESS_DATA_MAX</span></span></span><span style=""><span style="font-weight:normal">值：</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">enum {<!-- --></span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">/* data larger than this does not get uncompressed into a buffer */</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">#ifdef HAVE_ANDROID_OS</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">UNCOMPRESS_DATA_MAX = 1 * 1024 * 1024</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">#else</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">UNCOMPRESS_DATA_MAX = 2 * 1024 * 1024</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><span style="">#endif</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">};</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal"></span></span></span><span style=""><span style="font-weight:normal">由于</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">Eclipse</span></span></span><span style=""><span style="font-weight:normal">编译工程需要大于</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">1.3M</span></span></span><span style=""><span style="font-weight:normal">的</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">buffer</span></span></span><span style=""><span style="font-weight:normal">，如果仅为</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">1 * 1024 * 1024</span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style=""><span style="font-weight:normal">请改为</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">2 * 1024 * 1024</span></span></span>，由于本人实验的版本为<span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">2.2</span></span></span><span style=""><span style="font-weight:normal">已使用</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">enum</span></span></span><span style=""><span style="font-weight:normal">进行了更正，故不用修改。</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal"></span></span></span><span style=""><span style="font-weight:normal">输入以下命令进行</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">sdk</span></span></span><span style=""><span style="font-weight:normal">编译：</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">$ make sdk</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-weight:normal">注意如果这里出现问题请按照上面所介绍的将</span><span style="font-family:DejaVu Serif,serif"><span style="font-weight:normal">j</span><span style=""><span style="font-weight:normal">avadoc</span></span></span><span style=""><span style="font-weight:normal">换回</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">1.5</span></span></span><span style=""><span style="font-weight:normal">版本。</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal"></span></span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal"></span></span></span><span style=""><span style="font-weight:normal">编译后生成的</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">SDK</span></span></span><span style=""><span style="font-weight:normal">存放在～</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">/android/android/platform/</span></span><span style=""><span style="font-weight:normal">out/host/linux</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">x86/sdk/</span></span></span><span style=""><span style="font-weight:normal">， 此目录下有</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">android</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">sdk_eng.xxx_linux</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">x86.zip</span></span></span><span style=""><span style="font-weight:normal">和</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">android</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">sdk_eng.xxx_linux</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">x86</span></span></span><span style=""><span style="font-weight:normal">目录。</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">android</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">sdk_eng.xxx_linux</span></span><span style=""><span style="font-weight:normal">‐</span></span><span style=""><span style="font-weight:normal">x86</span></span></span><span style=""><span style="font-weight:normal">就是</span></span><span style="font-family:DejaVu Serif,serif"><span style=""><span style="font-weight:normal">SDK</span></span></span><span style=""><span style="font-weight:normal">目录。参加附件中的目录树文件。</span></span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><strong>模拟器使用</strong></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"><br> </span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">进入</span><span style="font-family:DejaVu Serif,serif"><span style="font-weight:normal">~/android/androidplatform/out/host/linux-x86/</span><span style="text-decoration:none"><span style="font-weight:normal">sdk/</span></span><span style="font-weight:normal">android-sdk_eng.derek_linux-x86/tools</span></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">目录下，这里有很多</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Android</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">的工具，其中模拟器对应的应用 程序是</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">emulator</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">。下面是正确使用模拟器的步奏：</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><strong><br> </strong></span><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">输入以下命令启动</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Android SDK </span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">和</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">AVD</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">管理器，可以通过该图形化界面进行很多操作，比如</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">SDK</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">下载，虚拟设备的创建，启动模拟器等等。</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./android</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">Starting Android SDK and AVD Manager</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">No command line parameters provided, launching UI.</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">See 'android --help' for operations from the command line.</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">列出机子上的所有</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">target</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">版本，可以理解为</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">android sdk </span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">版本。</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./android list target</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">Available Android targets:</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">id: 1 or "android-AOSP"</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Name: Android AOSP (Preview)</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Type: Platform</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">API level: AOSP</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Revision: 2</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Skins: WQVGA400, WQVGA432, WVGA800, WVGA854, HVGA (default), QVGA</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">创建一个名为</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">My_AVD_2.2</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">的虚拟设备</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./android create avd -n My_AVD_2.2 -t 1</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">Android AOSP (Preview) is a basic Android platform.</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">Do you wish to create a custom hardware profile [no]</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">Created AVD 'My_AVD_2.2' based on Android AOSP (Preview),</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">with the following hardware config:</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">hw.lcd.density=160</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">使用刚创建的虚拟设备启动模拟器</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./emulator -avd My_AVD_2.2</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">创建虚拟</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">sdcard</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">，用于模拟器中数据和外部数据的交互， 虚拟</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">SD</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">卡的大小不应该小于</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">100M</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">，否则在后期的文件系统打包过程中，有可能会有</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">SD</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">卡存储空间不够的问题。</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./mksdcard -l smallone 256M ~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/sdcard.img</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">使用刚刚创建的虚拟</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">sdcard</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">创建一虚拟设备</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./android create avd -n MyAOSP -t 1 -c ~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/sdcard.img</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">列出本机上的所有虚拟设备</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./android list avd</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">Available Android Virtual Devices:</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Name: MyAOSP</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Path: /home/derek/.android/avd/MyAOSP.avd</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Target: Android AOSP (Preview) (API level AOSP)</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Skin: HVGA</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Sdcard: /home/derek/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/sdcard.img</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">---------</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Name: My_AVD_2.2</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Path: /home/derek/.android/avd/My_AVD_2.2.avd</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Target: Android AOSP (Preview) (API level AOSP)</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Skin: HVGA</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">Sdcard: 256M</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">使用刚编译完成的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">SDK</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">中的模拟器启动</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">android</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">系统时，默认采用的系统镜像为</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/platforms/android-AOSP/images</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">目录（刚编译完的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">SDK</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">目录中的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">android-sdk_eng.derek_linux-x86/platforms/android-AOSP/images</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">）下的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">kernel-qemu ramdisk.img system.img userdata.img </span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">。</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-weight:normal">其中</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">kernel-qemu</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">为内核镜像，其他组合为文件系统。</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099">当然也可以使用自己编译的内核镜像，关于如果编译内核的问题 会在后续文章中说明。</span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">使用名为</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">MyAOSP</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">的虚拟设备启动模拟器，并规定系统，数据等的映象文件路径，模拟器内核采用</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">prebuild/android-arm/kernel/kernel-qemu</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">。当然也可以使用自己编译的内核镜像，关于如果编译内核的问题 会在后续文章中说明。 </span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">derek@derek-desktop:~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools$ ./emulator -avd MyAOSP -sysdir ~/android/androidplatform/out/target/product/generic/ -data ~/android/androidplatform/out/target/product/generic/userdata.img -ramdisk ~/android/androidplatform/out/target/product/generic/ramdisk.img -kernel ~/android/androidplatform/prebuilt/android-arm/kernel/kernel-qemu</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal"></span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">也可以再加上下面的参数进行启动，</span></span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">-system ~/android/androidplatform/out/target/product/generic/system.img</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099">或</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099">-image ~/android/androidplatform/out/target/product/generic/system.img</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099">但后者已过时。</span></p> 
 <p align="left" style="margin-bottom:0cm; font-weight:normal"><span style="font-size:18px; color:#330099"><br> </span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-weight:normal">可以输入</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">emulator -help</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">进行进一步的工作。</span></span></p> 
 <p align="left" style="margin-bottom:0cm"><span style="font-size:18px; color:#330099"><span style="font-weight:normal">注意：细心的人可能会发现刚刚编译生成的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">SDK</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">目录下的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">tools</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">目录（</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">~/android/androidplatform/out/host/linux-x86/sdk/android-sdk_eng.derek_linux-x86/tools</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">）中的所有工具在刚刚源码编译完的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">host</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">目录下的</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">bin</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">目录（</span></span><span style="font-family:DejaVu Serif,serif; font-size:18px; color:#330099"><span style="font-weight:normal">~/android/androidplatform/out/host/linux-x86/bin</span></span><span style="font-size:18px; color:#330099"><span style="font-weight:normal">）中都有。</span></span></p> 
 <span style="font-size:18px; color:#330099"><br> </span> 
 <p><span style="font-size:18px; color:#330099"><br> </span></p> 
</div> 
<span style="font-size:18px; color:#330099"><br> </span> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bf7c6efaf6ab3290bfecfd1f9e9c9dd6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android应用程序的生命周期</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d34d989df7873913082c38ac8b8103cc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">名人问题 (Celebrity problem)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
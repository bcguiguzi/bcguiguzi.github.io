<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FPGA学习-Verilog实现独立按键消抖 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="FPGA学习-Verilog实现独立按键消抖" />
<meta property="og:description" content="文章目录 前言一、独立按键消抖原理二、按键消抖程序实现（Verilog）1.按键触发判断2.计数器模块实现3.按键状态更新4.按键控制led亮灭 三、仿真测试文件编写四、编译结果 前言 利用verilog语言实现独立按键消抖，文章首先对按键抖动产生的原因、消抖原理进行简要解释；之后详细阐述各模块verilog语言实现方法；最后利用四个独立按键控制led亮灭，在vivado下进行源码设计与仿真。（完成程序代码附在文章结尾）
一、独立按键消抖原理 按键一般是机械弹性开关，由于机械触点的弹性作用，机械触点断开、闭合时会伴随着一连串的抖动，这个抖动会使得按键输出的高低电平连续变化，而这并不是真正的按下按键，如果直接作为开关控制后续电路，就会造成电路的不稳定，因此，需要采用按键消抖。
机械按键按下时候有一个不稳定的抖动期，这个时间大概在20ms以内，我们可以利用这个20ms的抖动期，当检测到按键电平变化时20ms计数器重新计数，若计数器达到20ms，证明按键电平变化以后的20ms内没有再发生电平变化，可以认为是按键真正被按下，将此时的按键状态放入寄存器进而控制后续电路。
二、按键消抖程序实现（Verilog） 1.按键触发判断 只要有按键状态变化,20ms计数器就应重新开始计数。而判断按键状态是否变化应该比较按键前后两个状态，由此采用移位寄存器，缓存按键前后的状态，再进行逻辑运算判断按键被按下还是松开。 注意：只要有按键被按下就要采用延时20ms消抖，同时按键全被松开也会对应按键电平的变化，仍然要采用消抖
代码如下：
wire key ; //用于按键触发判断 reg[3:0] key_r ; //缓存标志key的信息 assign key = key_h[3]&amp;key_h[2]&amp;key_h[1]&amp;key_h[0] ; always@(posedge sys_clk_i or negedge ext_rst_n)begin if(!ext_rst_n) key_r &lt;= 4&#39;b1111; else key_r &lt;= {key_r[2:0],key}; //左移寄存器，最低位保存按键最新的状态 end wire key_neg = key_r[3] &amp; ~key_r[2] ; //key_r[2]是现态，[3]是前一个状态，采用左移寄存器 wire key_pos = ~key_r[3] &amp; key_r[2] ;//按键全部被释放 2.计数器模块实现 由于FPGA系统时钟是50MHz，需要计数到20ms 20ms/20ns得到结果为1_000_000次，表示需要每一个时钟上升沿计数，从0开始计数，计数到999_999,二十进制换算，需要采用20bit的寄存器来保存计数次数。计数至20ms时应进行清零操作 //20ms计数，一旦出现按键按下或释放重新开始计数 reg[19:0]cnt ; always@(posedge sys_clk_i or negedge ext_rst_n)begin if(!ext_rst_n) cnt &lt;= 20&#39;d0 ; else if(key_neg || key_pos ) cnt &lt;= 20&#39;d0 ; else if(cnt == 20&#39;d999_999) cnt &lt;= 20&#39;d0 ; else cnt &lt;= cnt &#43; 20&#39;d1 ; end 3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7cacdc9dd0f3b825e29b798989627e7b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-08T13:52:41+08:00" />
<meta property="article:modified_time" content="2022-03-08T13:52:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">FPGA学习-Verilog实现独立按键消抖</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_7" rel="nofollow">前言</a></li><li><a href="#_14" rel="nofollow">一、独立按键消抖原理</a></li><li><a href="#Verilog_18" rel="nofollow">二、按键消抖程序实现（Verilog）</a></li><li><ul><li><a href="#1_19" rel="nofollow">1.按键触发判断</a></li><li><a href="#2_39" rel="nofollow">2.计数器模块实现</a></li><li><a href="#3_53" rel="nofollow">3.按键状态更新</a></li><li><a href="#4led_73" rel="nofollow">4.按键控制led亮灭</a></li></ul> 
  </li><li><a href="#_87" rel="nofollow">三、仿真测试文件编写</a></li><li><a href="#_144" rel="nofollow">四、编译结果</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_7"></a>前言</h2> 
<p>利用verilog语言实现独立按键消抖，文章首先对按键抖动产生的原因、消抖原理进行简要解释；之后详细阐述各模块verilog语言实现方法；最后利用四个独立按键控制led亮灭，在vivado下进行源码设计与仿真。（完成程序代码附在文章结尾）</p> 
<hr> 
<h2><a id="_14"></a>一、独立按键消抖原理</h2> 
<p>按键一般是机械弹性开关，由于机械触点的弹性作用，机械触点断开、闭合时会伴随着一连串的抖动，这个抖动会使得按键输出的高低电平连续变化，而这并不是真正的按下按键，如果直接作为开关控制后续电路，就会造成电路的不稳定，因此，需要采用按键消抖。<br> 机械按键按下时候有一个不稳定的抖动期，这个时间大概在20ms以内，我们可以利用这个20ms的抖动期，当检测到按键电平变化时20ms计数器重新计数，若计数器达到20ms，证明按键电平变化以后的20ms内没有再发生电平变化，可以认为是按键真正被按下，将此时的按键状态放入寄存器进而控制后续电路。</p> 
<h2><a id="Verilog_18"></a>二、按键消抖程序实现（Verilog）</h2> 
<h3><a id="1_19"></a>1.按键触发判断</h3> 
<ul><li>只要有按键状态变化,20ms计数器就应重新开始计数。而判断按键状态是否变化应该比较按键前后两个状态，由此采用移位寄存器，缓存按键前后的状态，再进行逻辑运算判断按键被按下还是松开。</li></ul> 
<p>注意：只要有按键被按下就要采用延时20ms消抖，同时按键全被松开也会对应按键电平的变化，仍然要采用消抖</p> 
<p>代码如下：</p> 
<pre><code class="prism language-clike">wire key <span class="token punctuation">;</span> <span class="token comment">//用于按键触发判断</span>
reg<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> key_r <span class="token punctuation">;</span> <span class="token comment">//缓存标志key的信息</span>
assign key <span class="token operator">=</span> key_h<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>key_h<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>key_h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">;</span>
always@<span class="token punctuation">(</span>posedge sys_clk_i or negedge ext_rst_n<span class="token punctuation">)</span>begin
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ext_rst_n<span class="token punctuation">)</span> key_r <span class="token operator">&lt;=</span> <span class="token number">4</span>'b1111<span class="token punctuation">;</span>
	<span class="token keyword">else</span> key_r <span class="token operator">&lt;=</span> <span class="token punctuation">{<!-- --></span>key_r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>key<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//左移寄存器，最低位保存按键最新的状态</span>
end

wire key_neg <span class="token operator">=</span> key_r<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token operator">~</span>key_r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token comment">//key_r[2]是现态，[3]是前一个状态，采用左移寄存器</span>
wire key_pos <span class="token operator">=</span> <span class="token operator">~</span>key_r<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> key_r<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">;</span><span class="token comment">//按键全部被释放</span>
</code></pre> 
<h3><a id="2_39"></a>2.计数器模块实现</h3> 
<ul><li>由于FPGA系统时钟是50MHz，需要计数到20ms 20ms/20ns得到结果为1_000_000次，表示需要每一个时钟上升沿计数，从0开始计数，计数到999_999,二十进制换算，需要采用20bit的寄存器来保存计数次数。</li><li>计数至20ms时应进行清零操作</li></ul> 
<pre><code class="prism language-clike"><span class="token comment">//20ms计数，一旦出现按键按下或释放重新开始计数</span>
reg<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>cnt <span class="token punctuation">;</span>
always@<span class="token punctuation">(</span>posedge sys_clk_i or negedge ext_rst_n<span class="token punctuation">)</span>begin
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ext_rst_n<span class="token punctuation">)</span> cnt <span class="token operator">&lt;=</span> <span class="token number">20</span>'d0 <span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key_neg <span class="token operator">||</span> key_pos <span class="token punctuation">)</span> cnt <span class="token operator">&lt;=</span> <span class="token number">20</span>'d0 <span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>cnt <span class="token operator">==</span> <span class="token number">20</span><span class="token string">'d999_999) cnt &lt;= 20'</span>d0 <span class="token punctuation">;</span>
	<span class="token keyword">else</span> cnt <span class="token operator">&lt;=</span> cnt <span class="token operator">+</span> <span class="token number">20</span>'d1 <span class="token punctuation">;</span>
end
</code></pre> 
<h3><a id="3_53"></a>3.按键状态更新</h3> 
<p>模块输入的按键值【key_h】状态表示未消抖前按键的状态，而控制后续电路的应该是消抖后的按键状态，因此需要设置一个4bit的寄存器，用于保存消抖后的状态。<br> 同时，由于我们时利用按键前后的状态比较来判断按键是否被按下，所以需要有两个4bit的寄存器，分别保存前后状态。</p> 
<ul><li>【key_press】用于表示按键是否被按下</li></ul> 
<pre><code class="prism language-clike">reg<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>key_value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">;</span>
always@<span class="token punctuation">(</span>posedge sys_clk_i or negedge ext_rst_n<span class="token punctuation">)</span>begin
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ext_rst_n<span class="token punctuation">)</span>begin
		key_value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>'b1111<span class="token punctuation">;</span> <span class="token comment">//保存最新的状态</span>
		key_value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>'b1111<span class="token punctuation">;</span>
	end
	<span class="token keyword">else</span> begin
		<span class="token keyword">if</span><span class="token punctuation">(</span>cnt <span class="token operator">==</span> <span class="token number">20</span>'d999_999<span class="token punctuation">)</span> key_value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> key_h <span class="token punctuation">;</span>
		key_value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> key_value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	end
end
wire<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>key_press <span class="token punctuation">;</span>
assign key_press <span class="token operator">=</span> key_value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token operator">~</span>key_value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">;</span>
</code></pre> 
<h3><a id="4led_73"></a>4.按键控制led亮灭</h3> 
<pre><code class="prism language-clike"><span class="token comment">//led状态控制模块</span>
always@<span class="token punctuation">(</span>posedge sys_clk_i or negedge ext_rst_n<span class="token punctuation">)</span>begin
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ext_rst_n<span class="token punctuation">)</span> led <span class="token operator">&lt;=</span> <span class="token number">4</span>'b1111 <span class="token punctuation">;</span>
	<span class="token keyword">else</span> begin
		<span class="token keyword">if</span><span class="token punctuation">(</span>key_press<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> led<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token operator">~</span>led<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>key_press<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> led<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token operator">~</span>led<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>key_press<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> led<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token operator">~</span>led<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>key_press<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> led<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token operator">~</span>led<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	end
end
</code></pre> 
<h2><a id="_87"></a>三、仿真测试文件编写</h2> 
<pre><code class="prism language-clike">`timescale <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps
module <span class="token function">sim_keyboard</span><span class="token punctuation">(</span>

    <span class="token punctuation">)</span><span class="token punctuation">;</span>
reg sys_clk_i <span class="token punctuation">;</span>
reg ext_rst_n <span class="token punctuation">;</span>
reg<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>key_h <span class="token punctuation">;</span>
wire<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>led <span class="token punctuation">;</span>
keyboard <span class="token function">utt_keyboard</span><span class="token punctuation">(</span>
	<span class="token punctuation">.</span><span class="token function">sys_clk_i</span><span class="token punctuation">(</span>sys_clk_i<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">ext_rst_n</span><span class="token punctuation">(</span>ext_rst_n<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">key_h</span><span class="token punctuation">(</span>key_h<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//按键未按下时高电平，按下后低电平</span>
	<span class="token punctuation">.</span><span class="token function">led</span><span class="token punctuation">(</span>led<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
initial begin
	sys_clk_i <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	ext_rst_n <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	key_h <span class="token operator">=</span> <span class="token number">4</span>'b1111 <span class="token punctuation">;</span>
	#<span class="token number">1000</span>
	@<span class="token punctuation">(</span>posedge sys_clk_i<span class="token punctuation">)</span> <span class="token punctuation">;</span> #<span class="token number">2</span> <span class="token punctuation">;</span>
	ext_rst_n <span class="token operator">=</span> <span class="token number">1</span>'b1 <span class="token punctuation">;</span>
	@<span class="token punctuation">(</span>posedge sys_clk_i<span class="token punctuation">)</span> <span class="token punctuation">;</span> #<span class="token number">2</span> <span class="token punctuation">;</span>

	<span class="token comment">//模拟按键抖动</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	#<span class="token number">1000</span>_000  <span class="token punctuation">;</span><span class="token comment">//1ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b1 <span class="token punctuation">;</span>
	#<span class="token number">5</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//5ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	#<span class="token number">3</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//3ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b1 <span class="token punctuation">;</span>
	#<span class="token number">1</span>_000_000 
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	#<span class="token number">1000</span>_000  <span class="token punctuation">;</span><span class="token comment">//1ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b1 <span class="token punctuation">;</span>
	#<span class="token number">5</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//5ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	#<span class="token number">3</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//3ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b1 <span class="token punctuation">;</span>
	#<span class="token number">3</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//3ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	#<span class="token number">50</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//50ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b1 <span class="token punctuation">;</span>
	#<span class="token number">30</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//30ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b0 <span class="token punctuation">;</span>
	#<span class="token number">50</span>_000_000  <span class="token punctuation">;</span><span class="token comment">//50ms</span>
	key_h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>'b1 <span class="token punctuation">;</span>
	$finish <span class="token punctuation">;</span>
end

always #<span class="token number">10</span> sys_clk_i <span class="token operator">=</span> <span class="token operator">~</span>sys_clk_i <span class="token punctuation">;</span>

endmodule
</code></pre> 
<h2><a id="_144"></a>四、编译结果</h2> 
<ul><li>可以看到计数器计数到999_999,此时【key_h】的值为1110，【key_value[0]】值仍然为1111，在下一个时钟上升沿，消抖完成，【key_value[0]】会保存1110，表示按键key_h[0]被按下<br> <img src="https://images2.imgbox.com/f0/cd/Odsm52xu_o.png" alt="在这里插入图片描述"></li><li>下一个时钟上升沿计数器清零，重新开始20ms计数，key_value[0]即为消抖完成后案件的现态，key_value[1]表示按键的前一个状态，【key_press[0]】值为1，表示按键被按下。<br> <img src="https://images2.imgbox.com/5f/ec/j4rvnpql_o.png" alt="在这里插入图片描述"></li><li>测试文件模拟按键抖动过程，仿真结果可以看到当按键值【key_h】变化时，【key_pos】【key_neg】检测到边沿变化，但并不会引起【led】电平变化，说明消抖模块是有效的<br> <img src="https://images2.imgbox.com/2b/83/OZllLPws_o.png" alt="在这里插入图片描述"><br> 代码<br> 链接：https://pan.baidu.com/s/1euNaVxH-goOatb3lxpe4aQ<br> 提取码：mcuh</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad56f1d7f8777e5cbc46b1ed54a9010f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Codeforces Round #775 (Div. 2, based on Moscow Open Olympiad in Informatics)A~C 题解(原来如此简单，超级详细入门必备)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/528c21aaac5eb4245f2d2f5df276b5a1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">目标检测算法YOLOv4详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>第十二课：eNSP OSPF协议教程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="第十二课：eNSP OSPF协议教程" />
<meta property="og:description" content="系列文章目录
第一课：eNSP第一个网络拓扑配置教程
第二课：eNSP vlan网络拓扑图配置教程
第三课：eNSP WIFI网络拓扑配置教程
第四课：eNSP 路由器路由配置拓扑教程
第五课：eNSP DHCP拓扑配置教程
第六课：eNSP 防火墙拓扑配置教程
第七课：eNSP 单臂路由/多臂路由拓扑配置教程
第八课：eNSP 链路聚合2种方式（手工模式和LACP模式）拓扑配置教程
第九课：eNSP VRRP虚拟路由冗余协议配置教程（防火墙双机热备）
第十课：eNSP 静态NAT/动态NAT/动态NAPT/Easy IP/静态NAPT 5种NAT配置教程
第十一课：eNSP ACL应用教程
一、知识点 1、OSPF等介绍 OSPF OSPF（Open Shortest Path First）协议是一种内部网关协议（IGP），用于在自治系统（AS）内部选择路由。它是一种链路状态路由协议，使用Dijkstra算法计算最短路径树。OSPF协议具有以下特点：
快速收敛：OSPF协议能够快速检测网络变化并更新路由表，确保路由的准确性。无路由环路：OSPF协议通过使用区域内路由和区域间路由的分层结构，以及使用区域间认证避免路由环路。支持多种路由形式：OSPF协议支持特定主机路由、子网路由、汇总路由等多种形式，以满足不同网络环境的需求。支持变长子网掩码（VLSM）：OSPF协议能够支持变长子网掩码，从而提高了IP地址空间的利用率。负载均衡：OSPF协议支持根据路径的带宽和延迟等参数进行负载均衡，以提高网络的利用率和可靠性。 在OSPF协议中，每个路由器维护一个链路状态数据库，记录了区域内所有路由器的连接状态和距离信息。当网络发生变化时，路由器会发送链路状态更新报文通知其他路由器，其他路由器则会根据这些更新信息重新计算最短路径树。
OSPF协议支持多播和广播类型的网络环境，可以通过多播报文进行路由信息的交换。此外，OSPF协议还支持区域划分，可以将大型网络划分为多个区域，每个区域运行一个OSPF实例，从而提高路由器的资源利用率和减少路由器的资源消耗。
自治系统（AS）
自治系统包括一个单独管理实体下所控制的一组路由器（OSPF 是内部网关路由协议，工作于自治系统内部）。
链路状态（LS）
指路由器接口的状态（如 Up 、Down 、IP 地址、网络类型、链路开销以及路由器和它邻接路由器间的关系）。
链路状态信息通过链路状态通告(Link State Advertisement, LSA) 扩散到网络上的每台路由器，每台路由器根据 LSA 信息建立一个于千网络的拓扑数据库（邻居表）。
最短路径优先算法(SPF)=迪克斯加算法(Dijkstra)
利用从 LSA 通告得来的信息计算到达每一个目标网络的最短路径，以自身为根生成一棵树，包含了到达每个目的网络的完整路径。
路由器标识
OSPF 的路由标识是一个 32 位的数字，它在自治系统中被用来唯一地识别路由器。
默认使用最高回环地址（loopback），若回环地址没有被配置，则使用物理接口上最高的IP地址作为路由器标识。
邻居和邻接
OSPF 在相邻路由器间建立邻接关系，使它们交换路由信息。
邻居是指共享同一网络的路由器，并使用Hello包来建立和维护邻居路由器间的邻接关系。
区域
在OSPF网络中使用区域(Area)为自治系统分段。
OSPF是一种层次化的路由选择协议，区域 0是一个 OSPF 网络中必须具有的区域，也称为主干区域，其他所有区域要求通过区域0互连到一起。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/0da410ef7d7191c9c46c13795d501ccd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-26T11:48:14+08:00" />
<meta property="article:modified_time" content="2023-12-26T11:48:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">第十二课：eNSP OSPF协议教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong> 系列文章目录</strong></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/134634255?spm=1001.2014.3001.5501" title="第一课：eNSP第一个网络拓扑配置教程">第一课：eNSP第一个网络拓扑配置教程</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/134654324?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22134654324%22%2C%22source%22%3A%22qq_41555586%22%7D" title="第二课：eNSP vlan网络拓扑图配置教程">第二课：eNSP vlan网络拓扑图配置教程</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/134674416?spm=1001.2014.3001.5502" title="第三课：eNSP WIFI网络拓扑配置教程">第三课：eNSP WIFI网络拓扑配置教程</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/134779666?spm=1001.2014.3001.5502" title="第四课：eNSP 路由器路由配置拓扑教程">第四课：eNSP 路由器路由配置拓扑教程</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/134803051?spm=1001.2014.3001.5501" title="第五课：eNSP DHCP拓扑配置教程">第五课：eNSP DHCP拓扑配置教程</a></p> 
<p><a href="https://mp.csdn.net/mp_blog/creation/editor/134846917" title="第六课：eNSP 防火墙拓扑配置教程">第六课：eNSP 防火墙拓扑配置教程</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/134940167?spm=1001.2014.3001.5501" title="第七课：eNSP 单臂路由/多臂路由拓扑配置教程">第七课：eNSP 单臂路由/多臂路由拓扑配置教程</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/134980061" title="第八课：eNSP 链路聚合2种方式（手工模式和LACP模式）拓扑配置教程">第八课：eNSP 链路聚合2种方式（手工模式和LACP模式）拓扑配置教程</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/135065202?spm=1001.2014.3001.5501" title="第九课：eNSP VRRP虚拟路由冗余协议配置教程（防火墙双机热备）">第九课：eNSP VRRP虚拟路由冗余协议配置教程（防火墙双机热备）</a></p> 
<p><a href="https://blog.csdn.net/qq_41555586/article/details/135085584?spm=1001.2014.3001.5502" title="第十课：eNSP 静态NAT/动态NAT/动态NAPT/Easy IP/静态NAPT 5种NAT配置教程">第十课：eNSP 静态NAT/动态NAT/动态NAPT/Easy IP/静态NAPT 5种NAT配置教程</a></p> 
<p><a class="link-info" href="https://blog.csdn.net/qq_41555586/article/details/135131288?spm=1001.2014.3001.5501" title="第十一课：eNSP ACL应用教程">第十一课：eNSP ACL应用教程</a></p> 
<hr> 
<h2><span style="color:#4da8ee;">一、知识点</span></h2> 
<h3>1、OSPF等介绍</h3> 
<ul><li><span style="color:#be191c;"><strong>OSPF</strong></span></li></ul> 
<p><span style="color:#0d0016;">OSPF（Open Shortest Path First）协议是一种内部网关协议（IGP），用于在自治系统（AS）内部选择路由。它是一种链路状态路由协议，使用Dijkstra算法计算最短路径树。OSPF协议具有以下特点：</span></p> 
<ol><li><span style="color:#0d0016;">快速收敛：OSPF协议能够快速检测网络变化并更新路由表，确保路由的准确性。</span></li><li><span style="color:#0d0016;">无路由环路：OSPF协议通过使用区域内路由和区域间路由的分层结构，以及使用区域间认证避免路由环路。</span></li><li><span style="color:#0d0016;">支持多种路由形式：OSPF协议支持特定主机路由、子网路由、汇总路由等多种形式，以满足不同网络环境的需求。</span></li><li><span style="color:#0d0016;">支持变长子网掩码（VLSM）：OSPF协议能够支持变长子网掩码，从而提高了IP地址空间的利用率。</span></li><li><span style="color:#0d0016;">负载均衡：OSPF协议支持根据路径的带宽和延迟等参数进行负载均衡，以提高网络的利用率和可靠性。</span></li></ol> 
<p><span style="color:#0d0016;">在OSPF协议中，每个路由器维护一个链路状态数据库，记录了区域内所有<strong>路由器的连接状态和距离信息</strong>。当网络发生变化时，路由器会发送链路状态更新报文通知其他路由器，其他路由器则会根据这些更新信息重新计算最短路径树。</span></p> 
<p><span style="color:#0d0016;">OSPF协议支持多播和广播类型的网络环境，可以通过多播报文进行路由信息的交换。此外，OSPF协议还支持区域划分，可以将大型网络划分为多个区域，每个区域运行一个OSPF实例，从而提高路由器的资源利用率和减少路由器的资源消耗。</span></p> 
<ul><li> <p><strong><span style="color:#be191c;">自治系统（AS）</span></strong></p> </li></ul> 
<p><span style="color:#0d0016;">自治系统包括一个单独管理实体下所控制的一组路由器（OSPF 是内部网关路由协议，工作于自治系统内部）。</span></p> 
<ul><li> <p><strong><span style="color:#be191c;">链路状态（LS）</span></strong></p> </li></ul> 
<p><span style="color:#0d0016;">指路由器接口的状态（如 Up 、Down 、IP 地址、网络类型、链路开销以及路由器和它邻接路由器间的关系）。</span></p> 
<p><span style="color:#0d0016;">链路状态信息通过链路状态通告(Link State Advertisement, LSA) 扩散到网络上的每台路由器，每台路由器根据 LSA 信息建立一个于千网络的拓扑数据库（邻居表）。</span></p> 
<ul><li> <p><strong><span style="color:#be191c;">最短路径优先算法(SPF)=迪克斯加算法(Dijkstra)</span></strong></p> </li></ul> 
<p><span style="color:#0d0016;">利用从 LSA 通告得来的信息计算到达每一个目标网络的最短路径，以自身为根生成一棵树，包含了到达每个目的网络的完整路径。</span></p> 
<ul><li> <p><strong><span style="color:#be191c;">路由器标识</span></strong></p> </li></ul> 
<p><span style="color:#0d0016;">OSPF 的路由标识是一个 32 位的数字，它在自治系统中被用来唯一地识别路由器。</span></p> 
<p><span style="color:#0d0016;">默认使用最高回环地址（loopback），若回环地址没有被配置，则使用物理接口上最高的IP地址作为路由器标识。</span></p> 
<ul><li> <p><strong><span style="color:#be191c;">邻居和邻接</span></strong></p> </li></ul> 
<p><span style="color:#0d0016;">OSPF 在相邻路由器间建立邻接关系，使它们交换路由信息。</span></p> 
<p><span style="color:#0d0016;">邻居是指共享同一网络的路由器，并使用Hello包来建立和维护邻居路由器间的邻接关系。</span></p> 
<ul><li> <p><span style="color:#be191c;"><strong>区域</strong></span></p> </li></ul> 
<p><span style="color:#0d0016;">在OSPF网络中使用区域(Area)为自治系统分段。</span></p> 
<p><span style="color:#0d0016;">OSPF是一种层次化的路由选择协议，区域 0是一个 OSPF 网络中必须具有的区域，也称为主干区域，其他所有区域要求通过区域0互连到一起。</span></p> 
<h3>2、命令说明</h3> 
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><span style="color:#4da8ee;">命令</span></td><td><span style="color:#4da8ee;">说明</span></td></tr><tr><td>network 192.168.1.0 0.0.0.255</td><td> <p>指定运行OSPF协议的接口范围的命令。这个命令用于精确宣告和范围宣告，以确定哪些接口将运行OSPF协议。</p> <p>在这个命令中，IP地址192.168.1.0表示一个C类网络地址，而掩码0.0.0.255表示该网络地址中的前24位是网络地址，后8位是主机地址。因此，这个范围包括IP地址192.168.1.0到192.168.1.255之间的所有子网。</p> <p>当使用这个命令时，运行OSPF协议的路由器会将该范围内的所有接口都宣告出去，以便其他路由器能够学习到这些接口的路由信息。这样，所有在范围内的接口都将成为OSPF区域的一部分，并且将与其他运行OSPF协议的路由器交换路由信息。</p> </td></tr><tr><td>area &lt;area_ID&gt;</td><td> <p>在OSPF协议中，区域（Area）是用来将一个大的路由环境划分为多个小型路由环境，以便进行更具体的路由选择和优化。OSPF协议支持多个区域，每个区域运行一个OSPF实例，维护一个区域内路由表和一个区域间路由表。</p> <p>在OSPF协议中，区域0通常表示为主干区域（Backbone Area），它是所有其他区域的中心。区域0中的路由器负责在区域之间传递路由信息，并维护一个区域内路由表和一个区域间路由表。区域0中的所有路由器都必须相互连接，以便在区域之间进行通信。</p> <p>区域1表示为常规区域（Normal Area），它是区域0之外的其他区域。常规区域必须与区域0相连，以便将其路由信息传递给其他区域。常规区域中的路由器只维护一个区域内路由表，而将区域间路由信息传递给区域0中的路由器。</p> <p>总之，在OSPF协议中，区域0和区域1是两个不同的区域类型，分别表示主干区域和常规区域。每个区域运行一个OSPF实例，维护一个区域内路由表和一个区域间路由表，以便进行更具体的路由选择和优化。</p> </td></tr></tbody></table> 
<h2><span style="color:#4da8ee;">二、 OSPF实践</span></h2> 
<h3><span style="color:#0d0016;">1、绘制拓扑图</span></h3> 
<p><img alt="" height="576" src="https://images2.imgbox.com/0b/e8/nXPSLHHE_o.png" width="614"></p> 
<p></p> 
<h3>2、配置各个路由器的接口IP</h3> 
<p>根据拓扑图提示配置IP</p> 
<h3>3、配置各路由器的区域</h3> 
<p><strong>a) 区域 0</strong></p> 
<p>配置R1</p> 
<pre><code>[R1]ospf //进入 ospf 配置</code><code>[R1-ospf-1]area 0 //进入区域 0</code><code>[R1-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.255 //宣告网络（通配符掩码）</code></pre> 
<p>配置R2</p> 
<pre><code>[R2]ospf</code><code>[R2-ospf-1]area 0</code><code>[R2-ospf-1-area-0.0.0.0]network 192.168.1.0 0.0.0.255</code></pre> 
<p><strong>b) 区域 1</strong></p> 
<p>配置R1</p> 
<pre><code>[R1]ospf //进入 ospf 配置</code><code>[R1-ospf-1]area 1 //进入区域 1</code><code>[R1-ospf-1-area-0.0.0.1]network 192.168.2.0 0.0.0.255 //宣告网络（通配符掩码）</code></pre> 
<p>配置R3</p> 
<pre><code>[R3]ospf</code><code>[R3-ospf-1]area 1</code><code>[R3-ospf-1-area-0.0.0.1]network 192.168.2.0 0.0.0.255</code><code>[R3-ospf-1-area-0.0.0.1]network 192.168.3.0 0.0.0.255</code></pre> 
<p>配置R5</p> 
<pre><code>[R5]ospf</code><code>[R5-ospf-1]area 1</code><code>[R5-ospf-1-area-0.0.0.1]network 192.168.3.0 0.0.0.255</code></pre> 
<p><strong>c) 区域 2</strong></p> 
<p>配置R2</p> 
<pre><code>[R2-ospf-1]ospf //进入 ospf 配置</code><code>[R2-ospf-1]area 2 //进入区域 2</code><code>[R2-ospf-1-area-0.0.0.2]network 192.168.4.0 0.0.0.255 //宣告网络（通配符掩码）</code></pre> 
<p>配置R4​​​​​​​</p> 
<pre><code>[R4]ospf</code><code>[R4-ospf-1]area 2</code><code>[R4-ospf-1-area-0.0.0.2]network 192.168.4.0 0.0.0.255</code><code>[R4-ospf-1-area-0.0.0.2]network 192.168.5.0 0.0.0.255</code></pre> 
<p>配置R6​​​​​​​</p> 
<pre><code>[R6]ospf</code><code>[R6-ospf-1]area 2</code><code>[R6-ospf-1-area-0.0.0.2]network 192.168.5.0 0.0.0.255</code></pre> 
<h3>4、查看各路由器的路由表(dis ip routing-table/dis ospf peer)</h3> 
<p>举例R1，R2~R6操作类似：</p> 
<p><img alt="" height="554" src="https://images2.imgbox.com/fd/23/CnY4QgM1_o.png" width="676"></p> 
<p><img alt="" height="554" src="https://images2.imgbox.com/45/3b/0gVgQd8U_o.png" width="676"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0169495f45c6bdb080b0170c5261c884/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端性能优化三十九：花裤衩模板gzip的webpack配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/93004781218bbb78809440501e8e5ffc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LinkedIn 开源分布式存储系统Ambry</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
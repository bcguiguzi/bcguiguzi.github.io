<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot线程池的使用和扩展 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot线程池的使用和扩展" />
<meta property="og:description" content="我们常用ThreadPoolExecutor提供的线程池服务，springboot框架提供了@Async注解，帮助我们更方便的将业务逻辑提交到线程池中异步执行，今天我们就来实战体验这个线程池服务；
本文地址：http://blog.csdn.net/boling_cavalry/article/details/79120268
实战环境 windowns10；jdk1.8；springboot 1.5.9.RELEASE；开发工具：IntelliJ IDEA； 实战源码 本次实战的源码可以在我的GitHub下载，地址：git@github.com:zq2599/blog_demos.git，项目主页：https://github.com/zq2599/blog_demos
这里面有多个工程，本次用到的工程为threadpooldemoserver，如下图红框所示：
实战步骤梳理 本次实战的步骤如下：
创建springboot工程；创建Service层的接口和实现；创建controller，开发一个http服务接口，里面会调用service层的服务；创建线程池的配置；将Service层的服务异步化，这样每次调用都会都被提交到线程池异步执行；扩展ThreadPoolTaskExecutor，在提交任务到线程池的时候可以观察到当前线程池的情况； 创建springboot工程 用IntelliJ IDEA创建一个springboot的web工程threadpooldemoserver，pom.xml内容如下：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.bolingcavalry&lt;/groupId&gt; &lt;artifactId&gt;threadpooldemoserver&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;threadpooldemoserver&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;/project&gt; 创建Service层的接口和实现 创建一个service层的接口AsyncService，如下：
public interface AsyncService { /** * 执行异步任务 */ void executeAsync(); } 对应的AsyncServiceImpl，实现如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/416d37a99f8842199f608a4163579f68/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-21T23:33:40+08:00" />
<meta property="article:modified_time" content="2018-01-21T23:33:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot线程池的使用和扩展</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>我们常用ThreadPoolExecutor提供的线程池服务，springboot框架提供了@Async注解，帮助我们更方便的将业务逻辑提交到线程池中异步执行，今天我们就来实战体验这个线程池服务；</p> 
<p>本文地址：<a href="http://blog.csdn.net/boling_cavalry/article/details/79120268">http://blog.csdn.net/boling_cavalry/article/details/79120268</a></p> 
<h4><a id="_4"></a>实战环境</h4> 
<ol><li>windowns10；</li><li>jdk1.8；</li><li>springboot 1.5.9.RELEASE；</li><li>开发工具：IntelliJ IDEA；</li></ol> 
<h4><a id="_10"></a>实战源码</h4> 
<p>本次实战的源码可以在我的GitHub下载，地址：git@github.com:zq2599/blog_demos.git，项目主页：<a href="https://github.com/zq2599/blog_demos">https://github.com/zq2599/blog_demos</a></p> 
<p>这里面有多个工程，本次用到的工程为threadpooldemoserver，如下图红框所示：<br> <img src="https://images2.imgbox.com/42/db/DZMhNMrv_o.jpg" alt="这里写图片描述"></p> 
<h4><a id="_16"></a>实战步骤梳理</h4> 
<p>本次实战的步骤如下：</p> 
<ol><li>创建springboot工程；</li><li>创建Service层的接口和实现；</li><li>创建controller，开发一个http服务接口，里面会调用service层的服务；</li><li>创建线程池的配置；</li><li>将Service层的服务异步化，这样每次调用都会都被提交到线程池异步执行；</li><li>扩展ThreadPoolTaskExecutor，在提交任务到线程池的时候可以观察到当前线程池的情况；</li></ol> 
<h4><a id="springboot_25"></a>创建springboot工程</h4> 
<p>用IntelliJ IDEA创建一个springboot的web工程threadpooldemoserver，pom.xml内容如下：</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.bolingcavalry<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>threadpooldemoserver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>threadpooldemoserver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.5.9.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="Service_66"></a>创建Service层的接口和实现</h4> 
<p>创建一个service层的接口AsyncService，如下：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AsyncService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 执行异步任务
     */</span>
    <span class="token keyword">void</span> <span class="token function">executeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>对应的AsyncServiceImpl，实现如下：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AsyncService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>AsyncServiceImpl<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">executeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"start executeAsync"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{<!-- --></span>
            Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"end executeAsync"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这个方法做的事情很简单：sleep了一秒钟；</p> 
<h4><a id="controller_99"></a>创建controller</h4> 
<p>创建一个controller为Hello，里面定义一个http接口，做的事情是调用Service层的服务，如下：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>Hello<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> AsyncService asyncService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"start submit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//调用service层的任务</span>
        asyncService<span class="token punctuation">.</span><span class="token function">executeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"end submit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>至此，我们已经做好了一个http请求的服务，里面做的事情其实是同步的，接下来我们就开始配置springboot的线程池服务，将service层做的事情都提交到线程池中去处理；</p> 
<h4><a id="springboot_126"></a>springboot的线程池配置</h4> 
<p>创建一个配置类ExecutorConfig，用来定义如何创建一个ThreadPoolTaskExecutor，要使用@Configuration和@EnableAsync这两个注解，表示这是个配置类，并且是线程池的配置类，如下所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableAsync</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExecutorConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>ExecutorConfig<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> Executor <span class="token function">asyncServiceExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"start asyncServiceExecutor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ThreadPoolTaskExecutor executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolTaskExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置核心线程数</span>
        executor<span class="token punctuation">.</span><span class="token function">setCorePoolSize</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置最大线程数</span>
        executor<span class="token punctuation">.</span><span class="token function">setMaxPoolSize</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置队列大小</span>
        executor<span class="token punctuation">.</span><span class="token function">setQueueCapacity</span><span class="token punctuation">(</span><span class="token number">99999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置线程池中的线程的名称前缀</span>
        executor<span class="token punctuation">.</span><span class="token function">setThreadNamePrefix</span><span class="token punctuation">(</span><span class="token string">"async-service-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// rejection-policy：当pool已经达到max size的时候，如何处理新任务</span>
        <span class="token comment">// CALLER_RUNS：不在新线程中执行任务，而是有调用者所在的线程来执行</span>
        executor<span class="token punctuation">.</span><span class="token function">setRejectedExecutionHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>CallerRunsPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//执行初始化</span>
        executor<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> executor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>注意，上面的方法名称为<font color="red">asyncServiceExecutor</font>，稍后马上用到；</p> 
<h4><a id="Service_159"></a>将Service层的服务异步化</h4> 
<p>打开AsyncServiceImpl.java，在executeAsync方法上增加注解<font color="red">@Async(“asyncServiceExecutor”)</font>，asyncServiceExecutor是前面ExecutorConfig.java中的方法名，表明executeAsync方法进入的线程池是asyncServiceExecutor方法创建的，如下：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@Async</span><span class="token punctuation">(</span><span class="token string">"asyncServiceExecutor"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">executeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"start executeAsync"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{<!-- --></span>
            Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"end executeAsync"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_175"></a>验证效果</h4> 
<ol><li>将这个springboot运行起来（pom.xml所在文件夹下执行mvn spring-boot:run）；</li><li>在浏览器输入：<a href="http://localhost:8080" rel="nofollow">http://localhost:8080</a>；</li><li>在浏览器用F5按钮快速多刷新几次；</li><li>在springboot的控制台看见日志如下：</li></ol> 
<pre><code class="prism language-shell">2018-01-21 22:43:18.630  INFO 14824 --- <span class="token punctuation">[</span>nio-8080-exec-8<span class="token punctuation">]</span> c.b.t.controller.Hello                   <span class="token keyword">:</span> start submit
2018-01-21 22:43:18.630  INFO 14824 --- <span class="token punctuation">[</span>nio-8080-exec-8<span class="token punctuation">]</span> c.b.t.controller.Hello                   <span class="token keyword">:</span> end submit
2018-01-21 22:43:18.929  INFO 14824 --- <span class="token punctuation">[</span>async-service-1<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 22:43:18.930  INFO 14824 --- <span class="token punctuation">[</span>async-service-1<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> start executeAsync
2018-01-21 22:43:19.005  INFO 14824 --- <span class="token punctuation">[</span>async-service-2<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 22:43:19.006  INFO 14824 --- <span class="token punctuation">[</span>async-service-2<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> start executeAsync
2018-01-21 22:43:19.175  INFO 14824 --- <span class="token punctuation">[</span>async-service-3<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 22:43:19.175  INFO 14824 --- <span class="token punctuation">[</span>async-service-3<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> start executeAsync
2018-01-21 22:43:19.326  INFO 14824 --- <span class="token punctuation">[</span>async-service-4<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 22:43:19.495  INFO 14824 --- <span class="token punctuation">[</span>async-service-5<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 22:43:19.930  INFO 14824 --- <span class="token punctuation">[</span>async-service-1<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 22:43:20.006  INFO 14824 --- <span class="token punctuation">[</span>async-service-2<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 22:43:20.191  INFO 14824 --- <span class="token punctuation">[</span>async-service-3<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
</code></pre> 
<p>如上日志所示，我们可以看到controller的执行线程是"nio-8080-exec-8"，这是tomcat的执行线程，而service层的日志显示线程名为“async-service-1”，显然已经在我们配置的线程池中执行了，并且每次请求中，controller的起始和结束日志都是连续打印的，表明每次请求都快速响应了，而耗时的操作都留给线程池中的线程去异步执行；</p> 
<h4><a id="ThreadPoolTaskExecutor_198"></a>扩展ThreadPoolTaskExecutor</h4> 
<p>虽然我们已经用上了线程池，但是还不清楚线程池当时的情况，有多少线程在执行，多少在队列中等待呢？这里我创建了一个ThreadPoolTaskExecutor的子类，在每次提交线程的时候都会将当前线程池的运行状况打印出来，代码如下：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VisiableThreadPoolTaskExecutor</span> <span class="token keyword">extends</span> <span class="token class-name">ThreadPoolTaskExecutor</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger logger <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>VisiableThreadPoolTaskExecutor<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">showThreadPoolInfo</span><span class="token punctuation">(</span>String prefix<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        ThreadPoolExecutor threadPoolExecutor <span class="token operator">=</span> <span class="token function">getThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>null<span class="token operator">==</span>threadPoolExecutor<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"{}, {},taskCount [{}], completedTaskCount [{}], activeCount [{}], queueSize [{}]"</span><span class="token punctuation">,</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getThreadNamePrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                prefix<span class="token punctuation">,</span>
                threadPoolExecutor<span class="token punctuation">.</span><span class="token function">getTaskCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                threadPoolExecutor<span class="token punctuation">.</span><span class="token function">getCompletedTaskCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                threadPoolExecutor<span class="token punctuation">.</span><span class="token function">getActiveCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                threadPoolExecutor<span class="token punctuation">.</span><span class="token function">getQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span>Runnable task<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">showThreadPoolInfo</span><span class="token punctuation">(</span><span class="token string">"1. do execute"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span>Runnable task<span class="token punctuation">,</span> <span class="token keyword">long</span> startTimeout<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">showThreadPoolInfo</span><span class="token punctuation">(</span><span class="token string">"2. do execute"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>task<span class="token punctuation">,</span> startTimeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Future<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">&gt;</span> <span class="token function">submit</span><span class="token punctuation">(</span>Runnable task<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">showThreadPoolInfo</span><span class="token punctuation">(</span><span class="token string">"1. do submit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> Future<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token function">submit</span><span class="token punctuation">(</span>Callable<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> task<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">showThreadPoolInfo</span><span class="token punctuation">(</span><span class="token string">"2. do submit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> ListenableFuture<span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">&gt;</span> <span class="token function">submitListenable</span><span class="token punctuation">(</span>Runnable task<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">showThreadPoolInfo</span><span class="token punctuation">(</span><span class="token string">"1. do submitListenable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">submitListenable</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> ListenableFuture<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token function">submitListenable</span><span class="token punctuation">(</span>Callable<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> task<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">showThreadPoolInfo</span><span class="token punctuation">(</span><span class="token string">"2. do submitListenable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">submitListenable</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如上所示，showThreadPoolInfo方法中将任务总数、已完成数、活跃线程数，队列大小都打印出来了，然后Override了父类的execute、submit等方法，在里面调用showThreadPoolInfo方法，这样每次有任务被提交到线程池的时候，都会将当前线程池的基本情况打印到日志中；</p> 
<p>修改ExecutorConfig.java的asyncServiceExecutor方法，将<font color="blue">ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor()</font>改为<font color="red">ThreadPoolTaskExecutor executor = new VisiableThreadPoolTaskExecutor()</font>，如下所示：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> Executor <span class="token function">asyncServiceExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"start asyncServiceExecutor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使用VisiableThreadPoolTaskExecutor</span>
        ThreadPoolTaskExecutor executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VisiableThreadPoolTaskExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置核心线程数</span>
        executor<span class="token punctuation">.</span><span class="token function">setCorePoolSize</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置最大线程数</span>
        executor<span class="token punctuation">.</span><span class="token function">setMaxPoolSize</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置队列大小</span>
        executor<span class="token punctuation">.</span><span class="token function">setQueueCapacity</span><span class="token punctuation">(</span><span class="token number">99999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//配置线程池中的线程的名称前缀</span>
        executor<span class="token punctuation">.</span><span class="token function">setThreadNamePrefix</span><span class="token punctuation">(</span><span class="token string">"async-service-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// rejection-policy：当pool已经达到max size的时候，如何处理新任务</span>
        <span class="token comment">// CALLER_RUNS：不在新线程中执行任务，而是有调用者所在的线程来执行</span>
        executor<span class="token punctuation">.</span><span class="token function">setRejectedExecutionHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ThreadPoolExecutor<span class="token punctuation">.</span>CallerRunsPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//执行初始化</span>
        executor<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> executor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>再次启动该工程，再浏览器反复刷新http://localhost:8080，看到的日志如下：</p> 
<pre><code class="prism language-shell">2018-01-21 23:04:56.113  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-1<span class="token punctuation">]</span> c.b.t.e.VisiableThreadPoolTaskExecutor   <span class="token keyword">:</span> async-service-, 2. <span class="token keyword">do</span> submit,taskCount <span class="token punctuation">[</span>99<span class="token punctuation">]</span>, completedTaskCount <span class="token punctuation">[</span>85<span class="token punctuation">]</span>, activeCount <span class="token punctuation">[</span>5<span class="token punctuation">]</span>, queueSize <span class="token punctuation">[</span>9<span class="token punctuation">]</span>
2018-01-21 23:04:56.113  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-1<span class="token punctuation">]</span> c.b.t.controller.Hello                   <span class="token keyword">:</span> end submit
2018-01-21 23:04:56.225  INFO 15580 --- <span class="token punctuation">[</span>async-service-1<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 23:04:56.225  INFO 15580 --- <span class="token punctuation">[</span>async-service-1<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> start executeAsync
2018-01-21 23:04:56.240  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-2<span class="token punctuation">]</span> c.b.t.controller.Hello                   <span class="token keyword">:</span> start submit
2018-01-21 23:04:56.240  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-2<span class="token punctuation">]</span> c.b.t.e.VisiableThreadPoolTaskExecutor   <span class="token keyword">:</span> async-service-, 2. <span class="token keyword">do</span> submit,taskCount <span class="token punctuation">[</span>100<span class="token punctuation">]</span>, completedTaskCount <span class="token punctuation">[</span>86<span class="token punctuation">]</span>, activeCount <span class="token punctuation">[</span>5<span class="token punctuation">]</span>, queueSize <span class="token punctuation">[</span>9<span class="token punctuation">]</span>
2018-01-21 23:04:56.240  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-2<span class="token punctuation">]</span> c.b.t.controller.Hello                   <span class="token keyword">:</span> end submit
2018-01-21 23:04:56.298  INFO 15580 --- <span class="token punctuation">[</span>async-service-2<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 23:04:56.298  INFO 15580 --- <span class="token punctuation">[</span>async-service-2<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> start executeAsync
2018-01-21 23:04:56.372  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-3<span class="token punctuation">]</span> c.b.t.controller.Hello                   <span class="token keyword">:</span> start submit
2018-01-21 23:04:56.373  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-3<span class="token punctuation">]</span> c.b.t.e.VisiableThreadPoolTaskExecutor   <span class="token keyword">:</span> async-service-, 2. <span class="token keyword">do</span> submit,taskCount <span class="token punctuation">[</span>101<span class="token punctuation">]</span>, completedTaskCount <span class="token punctuation">[</span>87<span class="token punctuation">]</span>, activeCount <span class="token punctuation">[</span>5<span class="token punctuation">]</span>, queueSize <span class="token punctuation">[</span>9<span class="token punctuation">]</span>
2018-01-21 23:04:56.373  INFO 15580 --- <span class="token punctuation">[</span>nio-8080-exec-3<span class="token punctuation">]</span> c.b.t.controller.Hello                   <span class="token keyword">:</span> end submit
2018-01-21 23:04:56.444  INFO 15580 --- <span class="token punctuation">[</span>async-service-3<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> end executeAsync
2018-01-21 23:04:56.445  INFO 15580 --- <span class="token punctuation">[</span>async-service-3<span class="token punctuation">]</span> c.b.t.service.impl.AsyncServiceImpl      <span class="token keyword">:</span> start executeAsync
</code></pre> 
<p>注意这一行日志：2. do submit,taskCount [101], completedTaskCount [87], activeCount [5], queueSize [9]</p> 
<p>这说明提交任务到线程池的时候，调用的是<font color="blue">submit(Callable task)</font>这个方法，当前已经提交了101个任务，完成了87个，当前有5个线程在处理任务，还剩9个任务在队列中等待，线程池的基本情况一路了然；</p> 
<p>至此，springboot线程池服务的实战就完成了，希望能帮您在工程中快速实现异步服务；</p> 
<h4><a id="_307"></a>欢迎关注我的公众号：程序员欣宸</h4> 
<p><img src="https://images2.imgbox.com/a7/b6/q3km39Of_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d18500525be2f212f4cf7eefb59aec79/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">实战：向GitHub提交代码时触发Jenkins自动构建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2f2e9615e57351d7b82e040d7ae0a254/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">GPS 经纬度转换 百度、高德经纬度</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
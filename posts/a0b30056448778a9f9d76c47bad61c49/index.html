<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何实现OPC DA Server和MQTT Broker之间的数据交互？ - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何实现OPC DA Server和MQTT Broker之间的数据交互？" />
<meta property="og:description" content="一、前言 世纪九十年代，传统OPC通信技术的诞生为不同生产商的工业设备通讯建立一整套开放的接口、属性和方法标准集，进而实现了不同协议设备和上位机之间的通讯。随着工业4.0的快速推进，越来越多的用户希望将设备数据上传到物联网平台实现数据的统筹管理，MQTT作为物联网协议，常常用于物联网平台数据的采集。因此，本文主要介绍如何通过虹科OPC Client for MQTT软件实现OPC DA Server和MQTT Broker之间的数据交互。
二、工具 1. 软件：OPC DA Server 、虹科OPC Client for MQTT、虹科HiveMQ MQTT Broker、MQTT.fx
2. 硬件：1台Windows 10 PC
三、MQTT通信简介 MQTT协议是一种基于发布/订阅（Pub/Sub）模式的“轻量级”通讯协议，作为一种低开销、低带宽占用的即时通讯协议，广泛应用于物联网行业。MQTT协议通信主要由三部分组成，分别为发布端（Publisher）、订阅端（Subscriber）和MQTT Broker。其中，发布端和订阅端通过主题（Topic）来进行数据传输。而且，发布端和订阅端并不是直接相连，而是通过MQTT Broker进行连接，整体的通信架构如下图所示。
当发布端给MQTT Broker发布某个主题的消息后，MQTT Broker会把消息转发给订阅该主题的订阅端，从而实现发布端和订阅端的数据交互。
四、 操作步骤 本文使用虹科OPC Client for MQTT采集OPC DA Server数据并且作为MQTT发布端发布数据，使用虹科HiveMQ MQTT Broker作为MQTT Broker，使用MQTT.fx作为MQTT订阅端接收数据。
4.1 OPC DA Server数据添加
1. 打开虹科OPC Client for MQTT软件，点击菜单栏中“OPC Servers”添加OPC DA Server
2. 选择本地OPC DA Server
注：除了本地OPC DA Server，也支持连接远程OPC DA Server（通信前请配置DCOM），可以在上图中“Remote Connection”配置远程OPC DA Server连接参数。
3. 添加OPC组
（1）右键点击刚添加的OPC DA Server，选择菜单中中“Add Group”添加OPC组" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/a0b30056448778a9f9d76c47bad61c49/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-23T09:59:26+08:00" />
<meta property="article:modified_time" content="2023-03-23T09:59:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何实现OPC DA Server和MQTT Broker之间的数据交互？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>一、前言</h3> 
<p>世纪九十年代，传统OPC通信技术的诞生为不同生产商的工业设备通讯建立一整套开放的接口、属性和方法标准集，进而实现了不同协议设备和上位机之间的通讯。随着工业4.0的快速推进，越来越多的用户希望将设备数据上传到物联网平台实现数据的统筹管理，MQTT作为物联网协议，常常用于物联网平台数据的采集。因此，本文主要介绍<strong>如何通过虹科OPC Client for MQTT软件实现OPC DA Server和MQTT Broker之间的数据交互</strong>。</p> 
<h3>二、<strong>工具</strong></h3> 
<p>1. 软件：OPC DA Server 、虹科OPC Client for MQTT、虹科HiveMQ MQTT Broker、MQTT.fx</p> 
<p>2. 硬件：1台Windows 10 PC</p> 
<h3>三、<strong>MQTT通信简介</strong></h3> 
<p><strong>MQTT协议是一种基于发布/订阅（Pub/Sub）模式的“轻量级”通讯协议，作为一种低开销、低带宽占用的即时通讯协议，广泛应用于物联网行业</strong>。MQTT协议通信主要由三部分组成，分别为发布端（Publisher）、订阅端（Subscriber）和MQTT Broker。其中，发布端和订阅端通过主题（Topic）来进行数据传输。而且，发布端和订阅端并不是直接相连，而是通过MQTT Broker进行连接，整体的通信架构如下图所示。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c2/2d/YkS2mKid_o.png"></p> 
<p>当发布端给MQTT Broker发布某个主题的消息后，MQTT Broker会把消息转发给订阅该主题的订阅端，从而实现发布端和订阅端的数据交互。</p> 
<h3>四、 <strong>操作步骤</strong></h3> 
<p>本文使用<strong>虹科OPC Client for MQTT</strong>采集OPC DA Server数据并且作为MQTT发布端发布数据，使用<strong>虹科HiveMQ MQTT Broker</strong>作为MQTT Broker，使用MQTT.fx作为MQTT订阅端接收数据。</p> 
<p><strong>4.1 OPC DA Server数据添加</strong></p> 
<p>1. 打开虹科OPC Client for MQTT软件，点击菜单栏中“OPC Servers”添加OPC DA Server</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/da/5d/JptCbbIB_o.png"></p> 
<p>2. 选择本地OPC DA Server</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/75/a4/p1PIrh7F_o.png"></p> 
<p>注：除了本地OPC DA Server，也支持连接远程OPC DA Server（通信前请配置DCOM），可以在上图中“Remote Connection”配置远程OPC DA Server连接参数。</p> 
<p></p> 
<p>3. 添加OPC组</p> 
<p>（1）右键点击刚添加的OPC DA Server，选择菜单中中“Add Group”添加OPC组</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/50/b5/AKbLwLIw_o.png"></p> 
<p>（2）配置OPC组名称、更新速率、死区（百分比）以及时间偏差等参数</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b8/72/9uKdwMgb_o.png"></p> 
<p>（3）配置OPC组的读写模式</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/89/9f/BAPgg1c3_o.png"></p> 
<p>4. 添加OPC项</p> 
<p>（1）右键点击刚添加的OPC组，选择菜单中的“Add Items”添加OPC项</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/61/9d/xsEU8PyS_o.png"></p> 
<p>（2）选择对应的项，直接拖到右边空白处或者右键添加</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b3/9e/Y9xMMIkt_o.png"></p> 
<p>（3）至此，完成了OPC DA Server数据的添加</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c2/f0/OFPP5b4L_o.png"></p> 
<p><strong>4.2 MQTT发布端发布数据</strong></p> 
<p>1.点击菜单栏中“MQTT Agents”添加MQTT发布端</p> 
<p>2. 配置MQTT发布端参数</p> 
<p>（1）设置发布端名称以及MQTT协议版本</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/68/f2/wrIZrn0w_o.png"></p> 
<p>（2）配置MQTT Broker连接参数、发布主题以及QoS服务等参数</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/77/bd/NvM4kmRb_o.png"></p> 
<p>（3）选择OPC组</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/7a/68/WMtwUwil_o.png"></p> 
<p>（4）点击“Finish”完成MQTT发布端参数配置</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b4/84/5ozfZcgZ_o.png"></p> 
<p>（5）右键点击创建的发布端，点击“Start”启动服务</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c8/4b/UOLQtovZ_o.png"></p> 
<p> </p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/13/29/RDISkMdE_o.png"></p> 
<p> </p> 
<p>注：服务启动后，MQTT发布端的颜色由红色变成绿色。</p> 
<p></p> 
<p><strong>4.3 MQTT订阅端接收数据</strong></p> 
<p>1. 打开MQTT.fx软件，配置MQTT Broker连接参数</p> 
<p> </p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/8a/28/XX5Zn6M3_o.png"></p> 
<p>2. 连接MQTT Broker，配置订阅主题（对应MQTT发布端的发布主题）</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/65/ed/HTqdO80A_o.png"></p> 
<p>3. 点击“Subscribe”接收OPC DA Server数据</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/15/97/hEXm47z6_o.png"></p> 
<p>4. 至此，完成了OPC DA Server数据的接收</p> 
<h3>五、总结</h3> 
<p><strong>虹科OPC Client for MQTT软件</strong>操作简单易上手，可以快速帮助用户采集多个OPC DA Server数据，并通过MQTT协议上传到用户的物联网平台或者云平台，进而实现数据的统筹管理。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/67/0f/qDLMrdeq_o.png"></p> 
<hr> 
<p style="text-align:center;"> 更多精彩资讯 欢迎关注博主</p> 
<p> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7172dc0768b4d505362460e448a99417/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu 离线安装mariadb 10.4及mysql初始化</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e5d5481319d70c04824317c40b526b2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">什么是布隆过滤器？如何解决高并发缓存穿透问题？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
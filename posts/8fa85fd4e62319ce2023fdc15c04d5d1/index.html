<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MATLAB——tiff文件数据读取,modis - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MATLAB——tiff文件数据读取,modis" />
<meta property="og:description" content="方法一、geotiffread（）geotiffwrite（）读写 [A,R] = geotiffread(filename)
从filename指定的GeoTIFF文件中读取一个地理参考的灰度、RGB或多光谱图像或数据网格到A中，并创建一个空间参考对象，R。
[X, cmap, R] = geotiffread(filename)读取一个索引的图像到X和相关的彩色地图到cmap，并创建一个空间引用对象，R。
[A, refmat, bbox] = geotiffread (filename)将地理参考的灰度、RGB或多光谱图像或数据网格读入A，将相应的参考矩阵读入refmat，将边界框读入bbox。
[X, cmap, refmat, bbox] = geotiffread(filename)读取一个索引图像到X，相关的彩色地图到cmap，参考矩阵到refmat，和边界框到bbox。引用矩阵必须由GeoTIFF文件明确地定义，否则它和边界框将返回空。= geotiffread(url)从url读取GeoTIFF图像。= geotiffread(，idx)从多图像GeoTIFF文件或URL中读取一张图像。
基础代码 [Data,R] = geotiffread(); [SS,R] = geotiffread(samplename); %SS为tif数据的信息，是一个二维数组，R是tif数据的地理信息 info = geotiffinfo(samplename); % 读取tif数据的地理信息，为后面导出为tif数据提供地理信息 [nrows,ncols] = size(SS); %读取SS的行列数 %导出为tif outname = [&#39;##.tif&#39;]; %存储位置和名字 geotiffwrite(outname,SS, R, &#39;GeoKeyDirectoryTag&#39;, info.GeoTIFFTags.GeoKeyDirectoryTag); 批量TIFF读取、年均值计算、批量写入（自定义输出路径） 在这里插入代码片 方法二 imfinfo、imread、imshow读取信息、数据，显示图像 读，并显示信息 filepath=&#39;D:\study\AOD\AVR\2021002.tif&#39;; %%图像名称与路径 Info=imfinfo(filepath); %%获取图片信息并判断是否为tif tif=&#39;tif&#39;; format=Info.Format; if (strcmp(format ,tif)==0) disp(&#39;载入的不是tif图像，请确认载入的数据&#39;); %%确保载入的图像是tiff图像 end Slice=size(Info,1); %%获取图片z向帧数 Width=Info." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/8fa85fd4e62319ce2023fdc15c04d5d1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-21T23:44:09+08:00" />
<meta property="article:modified_time" content="2023-04-21T23:44:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MATLAB——tiff文件数据读取,modis</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="geotiffreadgeotiffwrite_1"></a>方法一、geotiffread（）geotiffwrite（）读写</h2> 
<p><strong>[A,R] = geotiffread(filename)</strong><br> 从filename指定的GeoTIFF文件中读取一个地理参考的灰度、RGB或多光谱图像或数据网格到A中，并创建一个空间参考对象，R。<br> [X, cmap, R] = geotiffread(filename)读取一个索引的图像到X和相关的彩色地图到cmap，并创建一个空间引用对象，R。<br> [A, refmat, bbox] = geotiffread (filename)将地理参考的灰度、RGB或多光谱图像或数据网格读入A，将相应的参考矩阵读入refmat，将边界框读入bbox。<br> [X, cmap, refmat, bbox] = geotiffread(filename)读取一个索引图像到X，相关的彩色地图到cmap，参考矩阵到refmat，和边界框到bbox。引用矩阵必须由GeoTIFF文件明确地定义，否则它和边界框将返回空。= geotiffread(url)从url读取GeoTIFF图像。= geotiffread(，idx)从多图像GeoTIFF文件或URL中读取一张图像。</p> 
<h4><a id="_7"></a>基础代码</h4> 
<pre><code class="prism language-c"><span class="token punctuation">[</span>Data<span class="token punctuation">,</span>R<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">geotiffread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">[</span>SS<span class="token punctuation">,</span>R<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">geotiffread</span><span class="token punctuation">(</span>samplename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">%</span>SS为tif数据的信息，是一个二维数组，R是tif数据的地理信息
info <span class="token operator">=</span> <span class="token function">geotiffinfo</span><span class="token punctuation">(</span>samplename<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">%</span> 读取tif数据的地理信息，为后面导出为tif数据提供地理信息
<span class="token punctuation">[</span>nrows<span class="token punctuation">,</span>ncols<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>SS<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">%</span>读取SS的行列数
<span class="token operator">%</span>导出为tif
outname <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token char">'##.tif'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token operator">%</span>存储位置和名字
<span class="token function">geotiffwrite</span><span class="token punctuation">(</span>outname<span class="token punctuation">,</span>SS<span class="token punctuation">,</span> R<span class="token punctuation">,</span> <span class="token char">'GeoKeyDirectoryTag'</span><span class="token punctuation">,</span> info<span class="token punctuation">.</span>GeoTIFFTags<span class="token punctuation">.</span>GeoKeyDirectoryTag<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> 
<h4><a id="TIFF_17"></a>批量TIFF读取、年均值计算、批量写入（自定义输出路径）</h4> 
<pre><code class="prism language-c">在这里插入代码片
</code></pre> 
<h2><a id="__imfinfoimreadimshow_24"></a>方法二 imfinfo、imread、imshow读取信息、数据，显示图像</h2> 
<h2><a id="_25"></a>读，并显示信息</h2> 
<pre><code class="prism language-c">filepath<span class="token operator">=</span><span class="token char">'D:\study\AOD\AVR\2021002.tif'</span><span class="token punctuation">;</span>                                         <span class="token operator">%</span><span class="token operator">%</span>图像名称与路径
Info<span class="token operator">=</span><span class="token function">imfinfo</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">;</span>                                      <span class="token operator">%</span><span class="token operator">%</span>获取图片信息并判断是否为tif
 
tif<span class="token operator">=</span><span class="token char">'tif'</span><span class="token punctuation">;</span>
format<span class="token operator">=</span>Info<span class="token punctuation">.</span>Format<span class="token punctuation">;</span>
<span class="token keyword">if</span>  <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>format <span class="token punctuation">,</span>tif<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token function">disp</span><span class="token punctuation">(</span><span class="token char">'载入的不是tif图像，请确认载入的数据'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token operator">%</span><span class="token operator">%</span>确保载入的图像是tiff图像
end
 
Slice<span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>Info<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                          <span class="token operator">%</span><span class="token operator">%</span>获取图片z向帧数
Width<span class="token operator">=</span>Info<span class="token punctuation">.</span>Width<span class="token punctuation">;</span>
Height<span class="token operator">=</span>Info<span class="token punctuation">.</span>Height<span class="token punctuation">;</span>
 
<span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span><span class="token operator">%</span>
Image<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span>Height<span class="token punctuation">,</span>Width<span class="token punctuation">,</span>Slice<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>Slice
    <span class="token function">Image</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">imread</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                         <span class="token operator">%</span><span class="token operator">%</span>一层一层的读入图像
end

</code></pre> 
<h2><a id="tiff_51"></a>读tiff</h2> 
<p><code>imageData = read(t)</code> 从与 Tiff 对象 t 关联的 TIFF 文件的当前图像文件目录 (IFD) 中读取图像数据。<br> <code>[Y,Cb,Cr] = read(t)</code> 从 TIFF 文件的当前图像文件目录中读取 YCbCr 分量数据。<strong>仅</strong>对具有 YCbCr <strong>光度解释的图像</strong>使用此语法。</p> 
<p>根据 YCbCrSubSampling 标记的值，Cb 和 Cr 分量的大小可能与 Y 分量不同。</p> 
<h4><a id="_Tiff__TIFF__63"></a>创建一个 Tiff 对象并从 TIFF 文件中读取数据。</h4> 
<pre><code class="prism language-c">t <span class="token operator">=</span> <span class="token function">Tiff</span><span class="token punctuation">(</span><span class="token char">'peppers_RGB_tiled.tif'</span><span class="token punctuation">,</span><span class="token char">'r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
imageData <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>读取 YCbCr TIFF 图像数据</p> 
<pre><code class="prism language-c">t <span class="token operator">=</span> <span class="token function">Tiff</span><span class="token punctuation">(</span><span class="token char">'peppers_YCbCr_tiled.tif'</span><span class="token punctuation">,</span><span class="token char">'r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>Y<span class="token punctuation">,</span>Cb<span class="token punctuation">,</span>Cr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">read</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>显示图像的 Y 分量。</p> 
<pre><code class="prism language-c"><span class="token function">imshow</span><span class="token punctuation">(</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">title</span><span class="token punctuation">(</span><span class="token char">'Peppers Image (Y Component)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_81"></a>写，创建</h3> 
<h4><a id="1tiff_82"></a>1、创建tiff图像</h4> 
<p>MATLAB函数：<code>obj = Tiff(filename, mode)</code></p> 
<ul><li>obj就是创建的Tiff对象</li><li>filename是文件名，要带上格式后缀吼，比如filename = ‘img.tiff’</li><li>mode是文件访问类型，默认是‘r’读，保存文件的话这里要修改。对于单张图像，改成 ‘w’ 就好啦，如果是多张的话，改成 ‘a’ 。‘r+’ 打开（而非创建）文件以便读写。<br> <img src="https://images2.imgbox.com/31/1d/oid3hAxp_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="2_89"></a>2、设置标记值</h4> 
<p>根据图像的布局，您必须设置以下额外标记：<br> 条状布局 - 设置 RowsPerStrip 标记。<br> 分块布局 - 设置 TileWidth 和 TileHeight 标记。</p> 
<p>创建文件后，在写入数据前，要先设置以下标记：<br> ImageWidth：图像宽度<br> ImageLength：图像长度<br> BitsPerSample：比特数/一个像素样本。磕科研中常用的三种：8位，16位，32位。<br> SamplePerPixel：像素样本数/一个像素<br> PlanarConfiguration：存储配置。chunky是连续存储每个像素的分量值，seperate是分开存储每个通道。在科研中处理的大多数为单通道灰度图像，这个设置都可。<br> Photometric：图像数据颜色空间。有好多种可以选。科研处理的灰度图像，一般选’MinIsBlack’，即像素值为0时是黑色的。<br> SampleFormat：像素样本格式。uint8和uint16时选择’UInt’，32位single时选’IEEEFP’（IEEE浮点数据）<br> Compression： 图像数据压缩方案，科研中选无压缩</p> 
<pre><code class="prism language-c">t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'ImageLength'</span><span class="token punctuation">,</span> <span class="token function">size</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'ImageWidth'</span><span class="token punctuation">,</span> <span class="token function">size</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'Photometric'</span><span class="token punctuation">,</span> Tiff<span class="token punctuation">.</span>Photometric<span class="token punctuation">.</span>MinIsBlack<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token operator">%</span>图像数据的颜色空间
t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'BitsPerSample'</span><span class="token punctuation">,</span> dtype<span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token operator">%</span>数据位数
t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'SamplesPerPixel'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'PlanarConfiguration'</span><span class="token punctuation">,</span> Tiff<span class="token punctuation">.</span>PlanarConfiguration<span class="token punctuation">.</span>Chunky<span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'Compression'</span><span class="token punctuation">,</span>Tiff<span class="token punctuation">.</span>Compression<span class="token punctuation">.</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token operator">%</span>无压缩
t<span class="token punctuation">.</span><span class="token function">setTag</span><span class="token punctuation">(</span><span class="token char">'SampleFormat'</span><span class="token punctuation">,</span>sf<span class="token punctuation">)</span><span class="token punctuation">;</span>                            <span class="token operator">%</span>像素样本格式
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1f14ecccbc89dcf2d7899270976762f0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ChatGPT 中的人类反馈强化学习 (RLHF) 实战</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c05aaf6a11a26ba2eb8f0580e8c676e3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【已解决】TypeError: meshgrid() got an unexpected keyword argument ‘indexing‘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
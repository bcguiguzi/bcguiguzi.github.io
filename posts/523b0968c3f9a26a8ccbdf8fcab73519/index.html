<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Onvif开发之Linux下gsoap的使用及移植 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Onvif开发之Linux下gsoap的使用及移植" />
<meta property="og:description" content="一直以来都是在CSDN上面学习别人的东西，很多次想写点什么但是又无从写起。由于公司项目需要，最近一段时间在研究onvif，在网上找了很多资料，发现资料是非常多，但是很少有比较全的资料，或者资料太多无从下手。我打算从做项目开始，用CSDN博客记录我的项目笔记，同时希望能帮助到需要帮助的人，以感谢这么多年来CSDN上各位高手对我的帮助。onvif的开发从gsoap的移植开始！今天完成了gsoap的移植，生成了代码。
一、 开发环境
本人开发环境为：
1. 电脑主频2.6G，内存4G；
2. 虚拟机：Product: VMware® Workstation; Version: 7.1.3 build-324285
3. linux操作系统版本：
[root@localhost ~]# cat /proc/version
Linux version 2.6.25-14.fc9.i686 (mockbuild@) (gcc version 4.3.0 20080428 (Red Hat 4.3.0-8) (GCC) ) #1 SMP Thu May 1 06:28:41 EDT 2008
[root@localhost ~]#
4. linux编译环境：海思交叉编译器arm-hisiv100nptl-linux-g&#43;&#43;
二、必备网址
1. Onvif官网：http://www.onvif.org/
2. gsoap官网：http://www.cs.fsu.edu/~engelen/soap.html
三、操作步骤详解
1. 下载gsoap
根据以上提供的地址，登陆gsoap官网下载最新的安装包和相关文档；截止今天(2013年8月5日)，官网发布的最新版本的gsoap工具为2.8.15版本；最新版本的使用，可以参考文档：《gSOAP 2.8.15 User Guide .pdf》，该文档有非常详细的说明，现在网络上的大部分的demo都是copy这里的；该文档值得研究；该文档在其官网上可以下载，下载地址为：http://www.cs.fsu.edu/~engelen/soap.html；也可以在官网在线查看；或者，可以在gsoap安装包里面找到该文档，路径为：gsoap_2.8.15/gsoap-2.8/gsoap/doc, 名字为soapdoc2.pdf的文件。
2. 安装
将下载的安装包解压，并拷贝到linux的操作目录，本人操作目录为： $: /home/samba/onvif-2013.08.05/ 以上面的目录为例：（注意以下操作均在root用户权限下进行）
首先进入目录cd /home/samba/onvif-2013.08.05/ gsoap_2.8.15/gsoap-2.8/
然后，配置编译环境:
命令：$:./configure" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/523b0968c3f9a26a8ccbdf8fcab73519/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-01-06T20:42:02+08:00" />
<meta property="article:modified_time" content="2014-01-06T20:42:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Onvif开发之Linux下gsoap的使用及移植</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="details" id="article_details"> 
 <div class="article_title"> 
  <span class="ico ico_type_Original"></span>     
  <span class="link_title">  </span> 
 </div> 
 <div class="article_content" id="article_content"> 
  <p>         <span style="font-size:14px">一直以来都是在CSDN上面学习别人的东西，很多次想写点什么但是又无从写起。由于公司项目需要，最近一段时间在研究onvif，在网上找了很多资料，发现资料是非常多，但是很少有比较全的资料，或者资料太多无从下手。我打算从做项目开始，用CSDN博客记录我的项目笔记，同时希望能帮助到需要帮助的人，以感谢这么多年来CSDN上各位高手对我的帮助。onvif的开发从gsoap的移植开始！今天完成了gsoap的移植，生成了代码。</span></p> 
  <p class="p0" style="margin-top:0pt; margin-bottom:0pt"><span style="font-size:14px">一、 开发环境<br> 本人开发环境为：<br> 1. 电脑主频2.6G，内存4G；<br> 2. 虚拟机：Product: VMware® Workstation;  Version: 7.1.3 build-324285<br> 3. linux操作系统版本：</span></p> 
  <p class="p0" style="margin-top:0pt; margin-bottom:0pt"><span style="font-size:14px">[root@localhost ~]# cat /proc/version<br> Linux version 2.6.25-14.fc9.i686 (mockbuild@) (gcc version 4.3.0 20080428 (Red Hat 4.3.0-8) (GCC) ) #1 SMP Thu May 1 06:28:41 EDT 2008<br> [root@localhost ~]#</span></p> 
  <p class="p0" style="margin-top:0pt; margin-bottom:0pt"><span style="font-size:14px"></span></p> 
  <p class="p0" style="margin-top:0pt; margin-bottom:0pt"><span style="font-size:14px">4. linux编译环境：海思交叉编译器arm-hisiv100nptl-linux-g++</span></p> 
  <p><span style="font-size:14px">二、必备网址<br> 1. Onvif官网：</span><a target="_blank" href="http://www.onvif.org/" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/</span></a><br> <span style="font-size:14px">2. gsoap官网：</span><a target="_blank" href="http://www.cs.fsu.edu/~engelen/soap.html" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.cs.fsu.edu/~engelen/soap.html</span></a></p> 
  <p><span style="font-size:14px">三、操作步骤详解<br> 1. 下载gsoap<br> 根据以上提供的地址，登陆gsoap官网下载最新的安装包和相关文档；截止今天(2013年8月5日)，官网发布的最新版本的gsoap工具为2.8.15版本；最新版本的使用，可以参考文档：《gSOAP 2.8.15 User Guide .pdf》，该文档有非常详细的说明，现在网络上的大部分的demo都是copy这里的；该文档值得研究；该文档在其官网上可以下载，下载地址为：</span><a target="_blank" href="http://www.cs.fsu.edu/~engelen/soap.html" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.cs.fsu.edu/~engelen/soap.html</span></a><span style="font-size:14px">；也可以在官网在线查看；或者，可以在gsoap安装包里面找到该文档，路径为：gsoap_2.8.15/gsoap-2.8/gsoap/doc,  名字为soapdoc2.pdf的文件。<br> 2. 安装<br> 将下载的安装包解压，并拷贝到linux的操作目录，本人操作目录为： <br> $: /home/samba/onvif-2013.08.05/   <br> 以上面的目录为例：（注意以下操作均在root用户权限下进行）<br> 首先进入目录cd /home/samba/onvif-2013.08.05/ gsoap_2.8.15/gsoap-2.8/<br> 然后，配置编译环境:<br> 命令：$:./configure<br> 然后，编译连接<br> 命令：$:make<br> 最后，安装gSOAP<br> 命令：$:make install</span></p> 
  <p><span style="font-size:14px">以上命令执行完成之后可用wsdl2h或者soapcpp2查看gSOAP是否已经安装成功；安装成功即会显示该命令：如下所示</span></p> 
  <p class="p0" style="margin-top:0pt; margin-bottom:0pt"><span style="font-size:14px">[root@localhost ~]# wsdl<br> wsdl    wsdl2   wsdl2h  <br> [root@localhost ~]# <br> [root@localhost ~]# <br> [root@localhost ~]# soap<br> soapcpp2  soapsuds  <br> [root@localhost ~]#</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">如果不知道被安装在哪个目录，可以用命令查询：<br> 命令：$:find / -name wsdl2h<br> 如下所示：</span></p> 
  <span style="font-size:14px"></span> 
  <p>[root@localhost ~]# <br> [root@localhost ~]# find / -name wsdl2h<br> /usr/local/bin/wsdl2h</p> 
  <p>^C<br> [root@localhost ~]# <br> [root@localhost ~]# </p> 
  <p class="p0" style="margin-top:0pt; margin-bottom:0pt"></p> 
  <p><span style="font-size:14px">即安装的wsdl2h和soapcpp2存在于系统的/usr/local/bin/目录<br> 至此，完成了gsoap2.8.15工具的安装工作；</span></p> 
  <p><span style="font-size:14px">3. 头文件生成<br> 以上两个命令中，命令wsdl2h用于生成头文件，命令soapcpp2用于生成源文件；这两个命令在/gsoap_2.8.15/gsoap-2.8/gsoap/bin中可以找到。bin目录下面包含三个目录，分别表示win32系统，linux系统以及macosx系统下的命令。但是bin目录下面的是源码包里面自带的，我们在自己系统里开发的话最好根据自己的编译器去编译生成新的命令。编译生成的新的命令可以在gsoap目录下看到。<br> 工具安装完成之后可以在linux下重新建立一个自己的目录，用来生成代码：<br> 这里建立目录：onvif_new<br> 完整路径为：/home/samba/onvif-2013.08.05/ onvif_new/<br> 将gsoap 目录下的typemap.dat文件拷贝到目录onvif_new<br> (1)在线生成头文件：<br> 在onvif_new目录下执行命令：<br> ~onvif_new$: wsdl2h -o onvif.h -c -s -t ./typemap.dat <br> </span><a target="_blank" href="http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/media/wsdl/media.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/event/wsdl/event.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/event/wsdl/event.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/display.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/display.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/deviceio.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/deviceio.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver20/imaging/wsdl/imaging.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver20/imaging/wsdl/imaging.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver20/ptz/wsdl/ptz.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver20/ptz/wsdl/ptz.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/receiver.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/receiver.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/recording.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/recording.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/search.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/search.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/network/wsdl/remotediscovery.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/network/wsdl/remotediscovery.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/replay.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/replay.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver20/analytics/wsdl/analytics.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver20/analytics/wsdl/analytics.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/onvif/ver10/analyticsdevice.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/onvif/ver10/analyticsdevice.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/ver10/actionengine.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/ver10/actionengine.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/ver10/pacs/accesscontrol.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/ver10/pacs/accesscontrol.wsdl</span></a><br> <a target="_blank" href="http://www.onvif.org/ver10/pacs/doorcontrol.wsdl" rel="nofollow noopener noreferrer"><span style="font-size:14px">http://www.onvif.org/ver10/pacs/doorcontrol.wsdl</span></a><br> <span style="font-size:14px">每个网址之间用空格分开，执行完命令即可生成头文件onvif.h。<br> 以上地址来自onvif官网，可以自己登录官网查看。<br> 注意，这种方式的话一定要保证您的虚拟机能出外网，简单说就是在虚拟机下能ping通百度或者其他外网地址；而且要保证网络比较快，否则在生成过程中会出现下载文件超时而导致生成头文件失败。该方式生成的话，所有文件均是在线实时下载。<br> (2)离线生成头文件<br> 如果当前电脑无法联网，则可以通过离线的方式来生成，命令为：<br> ~onvif_new$: wsdl2h -o onvif.h -c -s -t ./typemap.dat devicemgmt.wsdl media.wsdl event.wsdl display.wsdl<br> deviceio.wsdl imaging.wsdl ptz.wsdl receiver.wsdl recording.wsdl search.wsdl remotediscovery.wsdl<br> replay.wsdl analytics.wsdl analyticsdevice.wsdl actionengine.wsdl accesscontrol.wsdl doorcontrol.wsdl<br> 注意不同的wsdl以空格分开。<br> 目前Onvif官网提供的最新的WSDL文件一共有17个，可以将其下载下来。不过这些文件直接都是相互关联的，下载的话，除了这17个文件之外，还要下载所有相关联的文件。另外，下载之后，还需要更改文件中的路径，将wsdl文件中的schemaLocation以及location所指的路径进行修改，修改为本地的地址。将所有需要下载的文件下载到onvif_new目录，并修改相关地址。当然如果网速够快，提倡直接在线生成头文件和源文件。另外为了避免后续开发过程中出现某些功能的缺省，最好一次性生成包含所有功能的代码。<br> (3)离线生成头文件过程：<br> 离线生成头文件过程如下所示：</span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">**  The gSOAP WSDL/Schema processor for C and C++, wsdl2h release 2.8.15</span></p> 
  <p><span style="font-size:14px">**  Copyright (C) 2000-2013 Robert van Engelen, Genivia Inc.</span></p> 
  <p><span style="font-size:14px">**  All Rights Reserved. This product is provided "as is", without any warranty.</span></p> 
  <p><span style="font-size:14px">**  The wsdl2h tool is released under one of the following two licenses:</span></p> 
  <p><span style="font-size:14px">**  GPL or the commercial license by Genivia Inc. Use option -l for details.</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Saving onvif.h</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading type definitions from type map file './typemap.dat'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'devicemgmt.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'devicemgmt.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'media.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'media.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'event.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'bw-2.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'rw-2.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'r-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'r-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'rw-2.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'bw-2.wsdl'</span></p> 
  <p><span style="font-size:14px">Done reading 'event.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'display.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'display.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'deviceio.wsdl'...</span></p> 
  <p><span style="font-size:14px">Done reading 'deviceio.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'imaging.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'imaging.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'ptz.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'ptz.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'receiver.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'receiver.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'recording.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'recording.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'search.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'search.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'remotediscovery.wsdl'...</span></p> 
  <p><span style="font-size:14px">Done reading 'remotediscovery.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'replay.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'replay.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'analytics.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'analytics.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'analyticsdevice.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'analyticsdevice.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'actionengine.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'onvif.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'onvif.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'b-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'b-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'bf-2.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'bf-2.xsd'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 't-1.xsd'...</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 2 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Warning: unexpected element 'xsd:unique' at level 6 is skipped (safe to ignore)</span></p> 
  <p><span style="font-size:14px">Done reading 't-1.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'actionengine.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'accesscontrol.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'types.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'types.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'accesscontrol.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading file 'doorcontrol.wsdl'...</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Reading schema file 'types.xsd'...</span></p> 
  <p><span style="font-size:14px">Done reading 'types.xsd'</span></p> 
  <p><span style="font-size:14px">Done reading 'doorcontrol.wsdl'</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Warning: 8 service bindings found, but collected as one service (use option -Nname to produce a separate service for each binding)</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Warning: 2 service bindings found, but collected as one service (use option -Nname to produce a separate service for each binding)</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Warning: 2 service bindings found, but collected as one service (use option -Nname to produce a separate service for each binding)</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Warning: WSDL "WS-BaseNotification" has no bindings to implement operations</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">To complete the process, compile with:</span></p> 
  <p><span style="font-size:14px">&gt; soapcpp2 onvif.h</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">命令执行完成之后可以在当前目录下看到onvif.h。</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">4. 源文件的生成</span></p> 
  <p><span style="font-size:14px">生成onvif.h头文件之后，即可根据soapcpp2命令生成C源文件或者CPP源文件。</span></p> 
  <p><span style="font-size:14px">命令为：</span></p> 
  <p><span style="font-size:14px">onvif_new $: soapcpp2 -c onvif.h -x -I import路径 -I gsoap路径</span></p> 
  <p><span style="font-size:14px">如果要生成cpp文件，则为：</span></p> 
  <p><span style="font-size:14px">onvif_new $: soapcpp2 -cpp onvif.h -x -I import路径 -I gsoap路径</span></p> 
  <p><span style="font-size:14px">两种方式生成的文件基本相同，只是名字略有区别，大家可以生成对比看看。</span></p> 
  <p><span style="font-size:14px">如下所示：</span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# soapcpp2 -c onvif.h -x -I /home/samba/onvif-2013.08.05/gsoap_2.8.15/</span></p> 
  <p><span style="font-size:14px">gsoap-2.8/gsoap/import -I /home/samba/onvif-2013.08.05/gsoap_2.8.15/gsoap-2.8/gsoap/</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">**  The gSOAP code generator for C and C++, soapcpp2 release 2.8.15</span></p> 
  <p><span style="font-size:14px">**  Copyright (C) 2000-2013, Robert van Engelen, Genivia Inc.</span></p> 
  <p><span style="font-size:14px">**  All Rights Reserved. This product is provided "as is", without any warranty.</span></p> 
  <p><span style="font-size:14px">**  The soapcpp2 tool is released under one of the following two licenses:</span></p> 
  <p><span style="font-size:14px">**  GPL or the commercial license by Genivia Inc.</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Saving soapStub.h annotated copy of the source input</span></p> 
  <p><span style="font-size:14px">Saving soapH.h interface declarations</span></p> 
  <p><span style="font-size:14px">Using wsdd service name: wsdd</span></p> 
  <p><span style="font-size:14px">Using wsdd service style: document</span></p> 
  <p><span style="font-size:14px">Using wsdd service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using wsdd service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using wsdd schema import: http://schemas.xmlsoap.org/ws/2005/04/discovery</span></p> 
  <p><span style="font-size:14px">Saving wsdd.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using ns1 service name: ActionEngineBinding</span></p> 
  <p><span style="font-size:14px">Using ns1 service style: document</span></p> 
  <p><span style="font-size:14px">Using ns1 service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using ns1 service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using ns1 schema namespace: http://www.onvif.org/ver10/actionengine/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ActionEngineBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using ns2 service name: PACSBinding</span></p> 
  <p><span style="font-size:14px">Using ns2 service style: document</span></p> 
  <p><span style="font-size:14px">Using ns2 service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using ns2 service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using ns2 schema namespace: http://www.onvif.org/ver10/accesscontrol/wsdl</span></p> 
  <p><span style="font-size:14px">Saving PACSBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using ns4 service name: DoorControlBinding</span></p> 
  <p><span style="font-size:14px">Using ns4 service style: document</span></p> 
  <p><span style="font-size:14px">Using ns4 service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using ns4 service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using ns4 schema namespace: http://www.onvif.org/ver10/doorcontrol/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DoorControlBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tad service name: AnalyticsDeviceBinding</span></p> 
  <p><span style="font-size:14px">Using tad service style: document</span></p> 
  <p><span style="font-size:14px">Using tad service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tad service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tad schema namespace: http://www.onvif.org/ver10/analyticsdevice/wsdl</span></p> 
  <p><span style="font-size:14px">Saving AnalyticsDeviceBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tan service name: RuleEngineBinding</span></p> 
  <p><span style="font-size:14px">Using tan service style: document</span></p> 
  <p><span style="font-size:14px">Using tan service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tan service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tan schema namespace: http://www.onvif.org/ver20/analytics/wsdl</span></p> 
  <p><span style="font-size:14px">Saving RuleEngineBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tdn service name: RemoteDiscoveryBinding</span></p> 
  <p><span style="font-size:14px">Using tdn service style: document</span></p> 
  <p><span style="font-size:14px">Using tdn service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tdn service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tdn schema namespace: http://www.onvif.org/ver10/network/wsdl</span></p> 
  <p><span style="font-size:14px">Saving RemoteDiscoveryBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tds service name: DeviceBinding</span></p> 
  <p><span style="font-size:14px">Using tds service style: document</span></p> 
  <p><span style="font-size:14px">Using tds service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tds service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tds schema namespace: http://www.onvif.org/ver10/device/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DeviceBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tev service name: PullPointSubscriptionBinding</span></p> 
  <p><span style="font-size:14px">Using tev service style: document</span></p> 
  <p><span style="font-size:14px">Using tev service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tev service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tev schema namespace: http://www.onvif.org/ver10/events/wsdl</span></p> 
  <p><span style="font-size:14px">Saving PullPointSubscriptionBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using timg service name: ImagingBinding</span></p> 
  <p><span style="font-size:14px">Using timg service style: document</span></p> 
  <p><span style="font-size:14px">Using timg service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using timg service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using timg schema namespace: http://www.onvif.org/ver20/imaging/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ImagingBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tls service name: DisplayBinding</span></p> 
  <p><span style="font-size:14px">Using tls service style: document</span></p> 
  <p><span style="font-size:14px">Using tls service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tls service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tls schema namespace: http://www.onvif.org/ver10/display/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DisplayBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tmd service name: DeviceIOBinding</span></p> 
  <p><span style="font-size:14px">Using tmd service style: document</span></p> 
  <p><span style="font-size:14px">Using tmd service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tmd service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tmd schema namespace: http://www.onvif.org/ver10/deviceIO/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DeviceIOBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tptz service name: PTZBinding</span></p> 
  <p><span style="font-size:14px">Using tptz service style: document</span></p> 
  <p><span style="font-size:14px">Using tptz service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tptz service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tptz schema namespace: http://www.onvif.org/ver20/ptz/wsdl</span></p> 
  <p><span style="font-size:14px">Saving PTZBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trc service name: RecordingBinding</span></p> 
  <p><span style="font-size:14px">Using trc service style: document</span></p> 
  <p><span style="font-size:14px">Using trc service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trc service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trc schema namespace: http://www.onvif.org/ver10/recording/wsdl</span></p> 
  <p><span style="font-size:14px">Saving RecordingBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trp service name: ReplayBinding</span></p> 
  <p><span style="font-size:14px">Using trp service style: document</span></p> 
  <p><span style="font-size:14px">Using trp service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trp service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trp schema namespace: http://www.onvif.org/ver10/replay/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ReplayBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trt service name: MediaBinding</span></p> 
  <p><span style="font-size:14px">Using trt service style: document</span></p> 
  <p><span style="font-size:14px">Using trt service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trt service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trt schema namespace: http://www.onvif.org/ver10/media/wsdl</span></p> 
  <p><span style="font-size:14px">Saving MediaBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trv service name: ReceiverBinding</span></p> 
  <p><span style="font-size:14px">Using trv service style: document</span></p> 
  <p><span style="font-size:14px">Using trv service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trv service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trv schema namespace: http://www.onvif.org/ver10/receiver/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ReceiverBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tse service name: SearchBinding</span></p> 
  <p><span style="font-size:14px">Using tse service style: document</span></p> 
  <p><span style="font-size:14px">Using tse service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tse service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tse schema namespace: http://www.onvif.org/ver10/search/wsdl</span></p> 
  <p><span style="font-size:14px">Saving SearchBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Saving soapClient.c client calling stubs</span></p> 
  <p><span style="font-size:14px">Saving soapClientLib.c client stubs with serializers (use only for libs)</span></p> 
  <p><span style="font-size:14px">Saving soapServer.c server request dispatcher</span></p> 
  <p><span style="font-size:14px">Saving soapServerLib.c server request dispatcher with serializers (use only for libs)</span></p> 
  <p><span style="font-size:14px">Saving soapC.c serializers</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">There were errors:</span></p> 
  <p><span style="font-size:14px">1 semantic error</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">我们发现，生成过程中有错误：</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">wsa5.h(288): **ERROR**: remote method name clash: struct/class 'SOAP_ENV__Fault' already declared at line 274</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">可以发现这是由于重复定义导致，可以修改该文件。</span></p> 
  <p><span style="font-size:14px">打开文件gsoap_2.8.15/gsoap-2.8/gsoap/import/ wsa5.h</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">将277行int SOAP_ENV__Fault修改为int SOAP_ENV__Fault_alex</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">再执行命令</span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# soapcpp2 -c onvif.h -x -I /home/samba/onvif-2013.08.05/gsoap_2.8.15/</span></p> 
  <p><span style="font-size:14px">gsoap-2.8/gsoap/import -I /home/samba/onvif-2013.08.05/gsoap_2.8.15/gsoap-2.8/gsoap/</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">**  The gSOAP code generator for C and C++, soapcpp2 release 2.8.15</span></p> 
  <p><span style="font-size:14px">**  Copyright (C) 2000-2013, Robert van Engelen, Genivia Inc.</span></p> 
  <p><span style="font-size:14px">**  All Rights Reserved. This product is provided "as is", without any warranty.</span></p> 
  <p><span style="font-size:14px">**  The soapcpp2 tool is released under one of the following two licenses:</span></p> 
  <p><span style="font-size:14px">**  GPL or the commercial license by Genivia Inc.</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Saving soapStub.h annotated copy of the source input</span></p> 
  <p><span style="font-size:14px">Saving soapH.h interface declarations</span></p> 
  <p><span style="font-size:14px">Using wsdd service name: wsdd</span></p> 
  <p><span style="font-size:14px">Using wsdd service style: document</span></p> 
  <p><span style="font-size:14px">Using wsdd service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using wsdd service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using wsdd schema import: http://schemas.xmlsoap.org/ws/2005/04/discovery</span></p> 
  <p><span style="font-size:14px">Saving wsdd.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using ns1 service name: ActionEngineBinding</span></p> 
  <p><span style="font-size:14px">Using ns1 service style: document</span></p> 
  <p><span style="font-size:14px">Using ns1 service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using ns1 service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using ns1 schema namespace: http://www.onvif.org/ver10/actionengine/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ActionEngineBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using ns2 service name: PACSBinding</span></p> 
  <p><span style="font-size:14px">Using ns2 service style: document</span></p> 
  <p><span style="font-size:14px">Using ns2 service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using ns2 service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using ns2 schema namespace: http://www.onvif.org/ver10/accesscontrol/wsdl</span></p> 
  <p><span style="font-size:14px">Saving PACSBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using ns4 service name: DoorControlBinding</span></p> 
  <p><span style="font-size:14px">Using ns4 service style: document</span></p> 
  <p><span style="font-size:14px">Using ns4 service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using ns4 service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using ns4 schema namespace: http://www.onvif.org/ver10/doorcontrol/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DoorControlBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tad service name: AnalyticsDeviceBinding</span></p> 
  <p><span style="font-size:14px">Using tad service style: document</span></p> 
  <p><span style="font-size:14px">Using tad service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tad service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tad schema namespace: http://www.onvif.org/ver10/analyticsdevice/wsdl</span></p> 
  <p><span style="font-size:14px">Saving AnalyticsDeviceBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tan service name: RuleEngineBinding</span></p> 
  <p><span style="font-size:14px">Using tan service style: document</span></p> 
  <p><span style="font-size:14px">Using tan service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tan service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tan schema namespace: http://www.onvif.org/ver20/analytics/wsdl</span></p> 
  <p><span style="font-size:14px">Saving RuleEngineBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tdn service name: RemoteDiscoveryBinding</span></p> 
  <p><span style="font-size:14px">Using tdn service style: document</span></p> 
  <p><span style="font-size:14px">Using tdn service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tdn service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tdn schema namespace: http://www.onvif.org/ver10/network/wsdl</span></p> 
  <p><span style="font-size:14px">Saving RemoteDiscoveryBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tds service name: DeviceBinding</span></p> 
  <p><span style="font-size:14px">Using tds service style: document</span></p> 
  <p><span style="font-size:14px">Using tds service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tds service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tds schema namespace: http://www.onvif.org/ver10/device/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DeviceBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tev service name: PullPointSubscriptionBinding</span></p> 
  <p><span style="font-size:14px">Using tev service style: document</span></p> 
  <p><span style="font-size:14px">Using tev service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tev service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tev schema namespace: http://www.onvif.org/ver10/events/wsdl</span></p> 
  <p><span style="font-size:14px">Saving PullPointSubscriptionBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using timg service name: ImagingBinding</span></p> 
  <p><span style="font-size:14px">Using timg service style: document</span></p> 
  <p><span style="font-size:14px">Using timg service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using timg service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using timg schema namespace: http://www.onvif.org/ver20/imaging/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ImagingBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tls service name: DisplayBinding</span></p> 
  <p><span style="font-size:14px">Using tls service style: document</span></p> 
  <p><span style="font-size:14px">Using tls service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tls service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tls schema namespace: http://www.onvif.org/ver10/display/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DisplayBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tmd service name: DeviceIOBinding</span></p> 
  <p><span style="font-size:14px">Using tmd service style: document</span></p> 
  <p><span style="font-size:14px">Using tmd service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tmd service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tmd schema namespace: http://www.onvif.org/ver10/deviceIO/wsdl</span></p> 
  <p><span style="font-size:14px">Saving DeviceIOBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tptz service name: PTZBinding</span></p> 
  <p><span style="font-size:14px">Using tptz service style: document</span></p> 
  <p><span style="font-size:14px">Using tptz service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tptz service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tptz schema namespace: http://www.onvif.org/ver20/ptz/wsdl</span></p> 
  <p><span style="font-size:14px">Saving PTZBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trc service name: RecordingBinding</span></p> 
  <p><span style="font-size:14px">Using trc service style: document</span></p> 
  <p><span style="font-size:14px">Using trc service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trc service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trc schema namespace: http://www.onvif.org/ver10/recording/wsdl</span></p> 
  <p><span style="font-size:14px">Saving RecordingBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trp service name: ReplayBinding</span></p> 
  <p><span style="font-size:14px">Using trp service style: document</span></p> 
  <p><span style="font-size:14px">Using trp service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trp service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trp schema namespace: http://www.onvif.org/ver10/replay/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ReplayBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trt service name: MediaBinding</span></p> 
  <p><span style="font-size:14px">Using trt service style: document</span></p> 
  <p><span style="font-size:14px">Using trt service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trt service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trt schema namespace: http://www.onvif.org/ver10/media/wsdl</span></p> 
  <p><span style="font-size:14px">Saving MediaBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using trv service name: ReceiverBinding</span></p> 
  <p><span style="font-size:14px">Using trv service style: document</span></p> 
  <p><span style="font-size:14px">Using trv service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using trv service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using trv schema namespace: http://www.onvif.org/ver10/receiver/wsdl</span></p> 
  <p><span style="font-size:14px">Saving ReceiverBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Using tse service name: SearchBinding</span></p> 
  <p><span style="font-size:14px">Using tse service style: document</span></p> 
  <p><span style="font-size:14px">Using tse service encoding: literal</span></p> 
  <p><span style="font-size:14px">Using tse service location: http://localhost:80</span></p> 
  <p><span style="font-size:14px">Using tse schema namespace: http://www.onvif.org/ver10/search/wsdl</span></p> 
  <p><span style="font-size:14px">Saving SearchBinding.nsmap namespace mapping table</span></p> 
  <p><span style="font-size:14px">Saving soapClient.c client calling stubs</span></p> 
  <p><span style="font-size:14px">Saving soapClientLib.c client stubs with serializers (use only for libs)</span></p> 
  <p><span style="font-size:14px">Saving soapServer.c server request dispatcher</span></p> 
  <p><span style="font-size:14px">Saving soapServerLib.c server request dispatcher with serializers (use only for libs)</span></p> 
  <p><span style="font-size:14px">Saving soapC.c serializers</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">Compilation successful </span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]# </span></p> 
  <p><span style="font-size:14px">[root@localhost onvif_new]#</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">可以看到，这次可以成功执行命令，在当前目录下可以看到生成的源文件以及不同功能所对应的命名空间。然后我们可以在新生成的源码上面进行开发。也许有人会觉得代码量很大，没关系，我们后续可以裁剪。另外，为了保证onvif所有的功能都包括在里面，我们必须在最开始开发的时候就生成包含所有功能的文件。</span></p> 
  <p><span style="font-size:14px">以上过程的wsdl文件可以在</span><a target="_blank" href="http://download.csdn.net/detail/u011597695/5875143" rel="noopener noreferrer"><span style="font-size:14px">http://download.csdn.net/detail/u011597695/5875143</span></a><span style="font-size:14px">下载。</span></p> 
  <p><span style="font-size:14px"></span></p> 
  <p><span style="font-size:14px">后续介绍根据该过程生成的代码实现onvif发现功能。</span></p> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2003143bf4a95f9a191b0fea000d0567/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">onvif开发之设备发现功能的实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b511b21fa218b8d36ffc4b83350a3d06/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">onvif 客户端发现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
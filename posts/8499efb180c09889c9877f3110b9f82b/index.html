<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>问题 L: Rem of Sum is Num--------------------------------思维(套路题) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="问题 L: Rem of Sum is Num--------------------------------思维(套路题)" />
<meta property="og:description" content="题目描述
Given are a sequence of N positive integers A1,A2,…,AN, and a positive integer K.
Find the number of non-empty contiguous subsequences in A such that the remainder when dividing the sum of its elements by K is equal to the number of its elements. We consider two subsequences different if they are taken from different positions, even if they are equal sequences.
Constraints
·All values in input are integers." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/8499efb180c09889c9877f3110b9f82b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-17T17:27:47+08:00" />
<meta property="article:modified_time" content="2020-03-17T17:27:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">问题 L: Rem of Sum is Num--------------------------------思维(套路题)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>题目描述</strong><br> Given are a sequence of N positive integers A1,A2,…,AN, and a positive integer K.<br> Find the number of non-empty contiguous subsequences in A such that the remainder when dividing the sum of its elements by K is equal to the number of its elements. We consider two subsequences different if they are taken from different positions, even if they are equal sequences.</p> 
<p>Constraints<br> ·All values in input are integers.<br> ·1≤N≤2×105<br> ·1≤K≤109<br> ·1≤Ai≤109</p> 
<p><strong>输入</strong><br> Input is given from Standard Input in the following format:</p> 
<p>N K<br> A1 A2 ⋯ AN</p> 
<p><strong>输出</strong><br> Print the number of subsequences that satisfy the condition.</p> 
<p><strong>样例输入 Copy<br> 【样例1】</strong><br> 5 4<br> 1 4 2 3 5<br> <strong>【样例2】</strong><br> 8 4<br> 4 2 4 2 4 2 4 2<br> <strong>【样例3】</strong><br> 10 7<br> 14 15 92 65 35 89 79 32 38 46<br> <strong>样例输出 Copy</strong><br> <strong>【样例1】</strong><br> 4<br> <strong>【样例2】</strong><br> 7<br> <strong>【样例3】</strong><br> 8<br> <strong>提示<br> 样例1解释</strong><br> Four sequences satisfy the condition: (1), (4,2), (1,4,2), and (5).<br> <strong>样例2解释</strong><br> (4,2) is counted four times, and (2,4) is counted three times.</p> 
<p><strong>解析:</strong></p> 
<pre><code class="prism language-cpp"><span class="token number">1.</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span>k<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token punctuation">)</span>
<span class="token number">2.</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">=</span>k<span class="token operator">*</span>m<span class="token operator">+</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token punctuation">)</span> <span class="token comment">//左边去掉了k倍，相当于右边加了k倍</span>
<span class="token number">3.</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span>r<span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">-</span>l<span class="token punctuation">)</span><span class="token operator">=</span>k<span class="token operator">*</span>m
<span class="token number">4.</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span>r<span class="token punctuation">)</span><span class="token operator">%</span>k<span class="token operator">-</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">-</span>l<span class="token punctuation">)</span><span class="token operator">%</span>k<span class="token operator">==</span><span class="token number">0</span>
<span class="token number">5.</span>s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">-</span>r<span class="token operator">=</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token operator">-</span>l<span class="token punctuation">;</span>
</code></pre> 
<p>假设f(x)=s[x]-x; 所以我们只要预处理f(x)然后在统计出现的次数。<br> 但是题目有要求区间长度要&lt;m。<br> 所以转化成 区间长度&lt;m.相同f(x)出现的次数之和</p> 
<p>对于[m,n]这段区间，就像滑动窗口一样，我们要把前面的产生的贡献减去。再计算和</p> 
<pre><code class="prism language-javascript">
#include<span class="token operator">&lt;</span>bits<span class="token operator">/</span>stdc<span class="token operator">++</span><span class="token punctuation">.</span>h<span class="token operator">&gt;</span>
using namespace std<span class="token punctuation">;</span>
typedef long long ll<span class="token punctuation">;</span>
<span class="token keyword">const</span> int <span class="token constant">N</span><span class="token operator">=</span><span class="token number">2e5</span><span class="token operator">+</span><span class="token number">10000</span><span class="token punctuation">;</span> 
ll a<span class="token punctuation">[</span><span class="token constant">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
ll sum<span class="token punctuation">[</span><span class="token constant">N</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
map<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span>ll<span class="token operator">&gt;</span> v<span class="token punctuation">;</span>
int n<span class="token punctuation">,</span>k<span class="token punctuation">;</span>
int <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cin<span class="token operator">&gt;&gt;</span>n<span class="token operator">&gt;&gt;</span>k<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> cin<span class="token operator">&gt;&gt;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>sum<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>i<span class="token operator">+</span>k<span class="token punctuation">)</span><span class="token operator">%</span>k<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	ll low<span class="token operator">=</span><span class="token function">min</span><span class="token punctuation">(</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
	ll res<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>low<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		res<span class="token operator">+=</span>v<span class="token punctuation">[</span>sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		v<span class="token punctuation">[</span>sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>int i<span class="token operator">=</span>low<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		v<span class="token punctuation">[</span>sum<span class="token punctuation">[</span>i<span class="token operator">-</span>k<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>
		res<span class="token operator">+=</span>v<span class="token punctuation">[</span>sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		v<span class="token punctuation">[</span>sum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout<span class="token operator">&lt;&lt;</span>res<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
 <span class="token punctuation">}</span> 
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/26f8fa6eec740fa9261daa3980730ff3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Wayland/Weston 启动方式简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d84eadbdd5b15b05cb316eaade3a955c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">qemu-kvm串口功能代码调试随笔</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
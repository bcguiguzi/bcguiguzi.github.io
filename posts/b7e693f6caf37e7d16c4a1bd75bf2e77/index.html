<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Pandas] 添加新列 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[Pandas] 添加新列" />
<meta property="og:description" content="美图欣赏2022/06/18 数据准备
import pandas as pd df = pd.DataFrame([[&#39;ABC&#39;], [&#39;FJZ&#39;], [&#39;FOC&#39;] ],columns=[&#39;Site&#39;]) df 在平时开发中，添加新数据列涉及到以下三种常用方法:
1. 直接赋值
语法: df[新列名] = 值
import pandas as pd import numpy as np df = pd.DataFrame([[&#39;ABC&#39;], [&#39;FJZ&#39;], [&#39;FOC&#39;] ],columns=[&#39;Site&#39;]) # 添加空值数据列 # 添加&#39;Level&#39;,&#39;Remark&#39;列,将两列的值设置为空(keep blank) df[&#39;Level&#39;] = np.nan df[&#39;Remark&#39;] = np.nan 2.reindex()函数
语法: df.reindex(columns=[原来所有的列名,新增列名],fill_value=值)
import pandas as pd df = pd.DataFrame([[&#39;ABC&#39;], [&#39;FJZ&#39;], [&#39;FOC&#39;] ],columns=[&#39;Site&#39;]) # 添加新列&#39;Quantity&#39;和&#39;Product_number&#39;,并将其值设置为0 df = df.reindex(columns = [&#39;Site&#39;, &#39;Quantity&#39;, &#39;Product_number&#39;], fill_value=0) 注意: 不加fill_value参数，默认值为nan" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/b7e693f6caf37e7d16c4a1bd75bf2e77/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-16T13:43:26+08:00" />
<meta property="article:modified_time" content="2023-09-16T13:43:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Pandas] 添加新列</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="img-center"> 
 <figure class="image"> 
  <img alt="" src="https://images2.imgbox.com/1c/76/5koLeR3B_o.png"> 
  <figcaption>
    美图欣赏2022/06/18 
  </figcaption> 
 </figure> 
</div> 
<hr> 
<p><span style="color:#fe2c24;">数据准备</span></p> 
<pre><code class="language-python">import pandas as pd

df = pd.DataFrame([['ABC'],
                   ['FJZ'],
                   ['FOC']
                  ],columns=['Site'])</code></pre> 
<p><strong>df </strong></p> 
<p class="img-center"><img alt="" height="155" src="https://images2.imgbox.com/00/ce/DzBGTpKr_o.png" width="216"></p> 
<hr> 
<p>在平时开发中，添加新数据列涉及到以下三种常用方法:</p> 
<p><strong>1. 直接赋值</strong></p> 
<p>语法: df[新列名] = 值</p> 
<pre><code class="language-python">import pandas as pd
import numpy as np

df = pd.DataFrame([['ABC'],
                   ['FJZ'],
                   ['FOC']
                  ],columns=['Site'])

# 添加空值数据列
# 添加'Level','Remark'列,将两列的值设置为空(keep blank)
df['Level'] = np.nan
df['Remark'] = np.nan</code></pre> 
<p class="img-center"><img alt="" height="151" src="https://images2.imgbox.com/27/bf/SWRq1Fhh_o.png" width="413"></p> 
<p><strong>2.reindex()函数</strong></p> 
<p>语法: df.reindex(columns=[原来所有的列名,新增列名],fill_value=值)</p> 
<pre><code class="language-python">import pandas as pd

df = pd.DataFrame([['ABC'],
                   ['FJZ'],
                   ['FOC']
                  ],columns=['Site'])

# 添加新列'Quantity'和'Product_number',并将其值设置为0
df = df.reindex(columns = ['Site', 'Quantity', 'Product_number'], fill_value=0)</code></pre> 
<p class="img-center"><img alt="" height="152" src="https://images2.imgbox.com/1c/d7/iozd0G02_o.png" width="412"></p> 
<p><span style="color:#fe2c24;">注意: 不加fill_value参数，默认值为nan</span></p> 
<p><strong>3.loc()函数</strong></p> 
<p>语法: df.loc[:,新列名] = 值</p> 
<pre><code class="language-python">import pandas as pd

df = pd.DataFrame([['ABC'],
                   ['FJZ'],
                   ['FOC']
                  ],columns=['Site'])

# 添加新列'Description',并将其值设置为'Good'
df.loc[:,'Description'] = 'Good'</code></pre> 
<p class="img-center"><img alt="" height="153" src="https://images2.imgbox.com/38/1d/V2XOYMlH_o.png" width="314"></p> 
<hr> 
<p><span style="color:#fe2c24;"><span style="background-color:#fef2f0;">练习案例</span></span>:增加一个自增id列</p> 
<pre><code class="language-python">import pandas as pd

df = pd.DataFrame([['L123',1,2,3],
                   ['L456',4,5,6],
                   ['L437',7,8,9],
                   ['L112',10,11,12],
                   ['L211',13,14,15],
                   ['L985',16,17,18]
                  ],columns=['Material','W1|6/22','W2|6/23','W3|6/24'])

df.index = df.index + 1
df = df.reset_index()
df = df.rename(columns = {'index':'id'})</code></pre> 
<p><strong>df</strong></p> 
<p class="img-center"><img alt="" height="239" src="https://images2.imgbox.com/84/a6/Ulnf8F0n_o.png" width="517"></p> 
<p><strong>df(增加自增id列) </strong></p> 
<p class="img-center"><img alt="" height="239" src="https://images2.imgbox.com/a3/04/kWkBvsNU_o.png" width="618"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d83b8ff19e2b0af899fc3a9a0d7cc38b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">超强Markdown编辑器 —— Typora最新版本的安装与使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8fa06835e6089729215fa35a08674abd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Anaconda安装h5py和netCDF4</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
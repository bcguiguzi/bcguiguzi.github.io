<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>codeforces 999D Equalize the Remainders - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="codeforces 999D Equalize the Remainders" />
<meta property="og:description" content="http://www.elijahqi.win/archives/3822 看做一个有向环
考虑我们其实从每个点出发如果采用最优策略那么一定都是一样的 那么不妨来看
我一遍扫描一边带着前缀和 如果遇到是小于平均值的我优先分配给他我最前面的
注意扫描一遍是不够的 但最多两遍即可 因为最优策略不可能绕一圈以上
#include&lt;bits/stdc&#43;&#43;.h&gt; #define ll long long using namespace std; inline char gc(){ static char now[1&lt;&lt;16],*S,*T; if (T==S){T=(S=now)&#43;fread(now,1,1&lt;&lt;16,stdin);if (T==S) return EOF;} return *S&#43;&#43;; } inline int read(){ int x=0,f=1;char ch=gc(); while(!isdigit(ch)) {if (ch==&#39;-&#39;) f=-1;ch=gc();} while(isdigit(ch)) x=x*10&#43;ch-&#39;0&#39;,ch=gc(); return x*f; } const int N=2e5&#43;10; const int inf=0x3f3f3f3f; int n,m,s[N]; vector&lt;int&gt; q[N];queue&lt;int&gt; pd; ll a[N],ans; inline void add(int p,int sta,int ed){ if(sta&lt;ed) a[p]&#43;=ed-sta,ans&#43;=ed-sta; else{ a[p]&#43;=ed&#43;1&#43;m-1-sta;ans&#43;=ed&#43;1&#43;m-1-sta; } } int main(){ // freopen(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/fd91e74107316fafc5aeffa70095b997/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-22T12:31:58+08:00" />
<meta property="article:modified_time" content="2018-06-22T12:31:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">codeforces 999D Equalize the Remainders</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="http://www.elijahqi.win/archives/3822" rel="nofollow">http://www.elijahqi.win/archives/3822</a> <br> 看做一个有向环</p> 
<p>考虑我们其实从每个点出发如果采用最优策略那么一定都是一样的 那么不妨来看</p> 
<p>我一遍扫描一边带着前缀和 如果遇到是小于平均值的我优先分配给他我最前面的</p> 
<p>注意扫描一遍是不够的 但最多两遍即可 因为最优策略不可能绕一圈以上</p> 
<pre class="prettyprint"><code class=" hljs perl"><span class="hljs-comment">#include&lt;bits/stdc++.h&gt;</span>
<span class="hljs-comment">#define ll long long</span>
using namespace std;
inline char gc(){
    static char now[<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">16</span>],<span class="hljs-variable">*S</span>,<span class="hljs-variable">*T</span>;
    <span class="hljs-keyword">if</span> (T==S){T=(S=now)+fread(now,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">16</span>,stdin);<span class="hljs-keyword">if</span> (T==S) <span class="hljs-keyword">return</span> EOF;}
    <span class="hljs-keyword">return</span> <span class="hljs-variable">*S</span>++;
}
inline <span class="hljs-keyword">int</span> <span class="hljs-keyword">read</span>(){
    <span class="hljs-keyword">int</span> <span class="hljs-keyword">x</span>=<span class="hljs-number">0</span>,f=<span class="hljs-number">1</span>;char ch=gc();
    <span class="hljs-keyword">while</span>(!isdigit(ch)) {<!-- --><span class="hljs-keyword">if</span> (ch==<span class="hljs-string">'-'</span>) f=-<span class="hljs-number">1</span>;ch=gc();}
    <span class="hljs-keyword">while</span>(isdigit(ch)) <span class="hljs-keyword">x</span>=<span class="hljs-keyword">x</span><span class="hljs-variable">*10</span>+ch-<span class="hljs-string">'0'</span>,ch=gc();
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">x</span><span class="hljs-variable">*f</span>;
}
const <span class="hljs-keyword">int</span> N=<span class="hljs-number">2</span>e5+<span class="hljs-number">10</span>;
const <span class="hljs-keyword">int</span> inf=<span class="hljs-number">0x3f3f3f3f</span>;
<span class="hljs-keyword">int</span> n,<span class="hljs-keyword">m</span>,<span class="hljs-keyword">s</span>[N];
vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-string">q[N]</span>;queue&lt;<span class="hljs-keyword">int</span>&gt; pd;
ll a[N],ans;
inline void add(<span class="hljs-keyword">int</span> p,<span class="hljs-keyword">int</span> sta,<span class="hljs-keyword">int</span> ed){
    <span class="hljs-keyword">if</span>(sta&lt;ed) a[p]+=ed-sta,ans+=ed-sta;
    <span class="hljs-keyword">else</span>{
        a[p]+=ed+<span class="hljs-number">1</span>+<span class="hljs-keyword">m</span>-<span class="hljs-number">1</span>-sta;ans+=ed+<span class="hljs-number">1</span>+<span class="hljs-keyword">m</span>-<span class="hljs-number">1</span>-sta;
    }
}
<span class="hljs-keyword">int</span> main(){
<span class="hljs-regexp">//</span>  freopen(<span class="hljs-string">"d.in"</span>,<span class="hljs-string">"r"</span>,stdin);
    n=<span class="hljs-keyword">read</span>();<span class="hljs-keyword">m</span>=<span class="hljs-keyword">read</span>();<span class="hljs-keyword">int</span> d=n/<span class="hljs-keyword">m</span>,st;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) a[i]=<span class="hljs-keyword">read</span>(),<span class="hljs-string">q[a[i]</span><span class="hljs-variable">%m</span>].push_back(i);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">m</span>;++i){
        <span class="hljs-keyword">if</span> (i==<span class="hljs-number">0</span>) {<!-- --><span class="hljs-keyword">s</span>[i]=<span class="hljs-string">q[i]</span>.size()-d;<span class="hljs-keyword">continue</span>;}
        <span class="hljs-keyword">s</span>[i]=<span class="hljs-keyword">s</span>[i-<span class="hljs-number">1</span>]+<span class="hljs-string">q[i]</span>.size()-d;
    }<span class="hljs-keyword">int</span> now=inf;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-keyword">m</span>;++i){
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">s</span>[i]&lt;now) now=<span class="hljs-keyword">s</span>[i],st=i+<span class="hljs-number">1</span>;
    }st<span class="hljs-variable">%=</span><span class="hljs-keyword">m</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span><span class="hljs-variable">*n</span>;++i){
        <span class="hljs-keyword">if</span> (<span class="hljs-string">q[st]</span>.size()&gt;d) {pd.<span class="hljs-keyword">push</span>(st);++st;st<span class="hljs-variable">%=</span><span class="hljs-keyword">m</span>;<span class="hljs-keyword">continue</span>;}
        <span class="hljs-keyword">if</span> (<span class="hljs-string">q[st]</span>.size()&lt;d){
            <span class="hljs-keyword">int</span> <span class="hljs-keyword">x</span>;
            <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>){
                <span class="hljs-keyword">x</span>=pd.front();
                <span class="hljs-keyword">while</span>(<span class="hljs-string">q[x]</span>.size()&gt;d&amp;&amp;<span class="hljs-string">q[st]</span>.size()&lt;d){
                    add(<span class="hljs-string">q[x]</span>[<span class="hljs-string">q[x]</span>.size()-<span class="hljs-number">1</span>],<span class="hljs-keyword">x</span>,st);
                    <span class="hljs-string">q[x]</span>.pop_back();<span class="hljs-string">q[st]</span>.push_back(<span class="hljs-number">1</span>);
                }<span class="hljs-keyword">if</span> (<span class="hljs-string">q[x]</span>.size()==d) pd.<span class="hljs-keyword">pop</span>();
                <span class="hljs-keyword">if</span> (<span class="hljs-string">q[st]</span>.size()==d) <span class="hljs-keyword">break</span>;
            }<span class="hljs-keyword">continue</span>;
        }++st;st<span class="hljs-variable">%=</span><span class="hljs-keyword">m</span>;
    }<span class="hljs-keyword">printf</span>(<span class="hljs-string">"<span class="hljs-variable">%lld</span>\n"</span>,ans);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) <span class="hljs-keyword">printf</span>(<span class="hljs-string">"<span class="hljs-variable">%lld</span> "</span>,a[i]);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2248e44555e8d773a48c0b79f7e311ba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CentOS 6.9安装LibreOffice及字体安装及python调用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4dee317d6412fb8c4d8d8fb2f4ddc84e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">树莓派--bcm2835 library (2) 交叉编译BCM2835</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
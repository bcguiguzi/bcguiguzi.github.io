<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>快速搞懂时间序列数据平稳检验 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="快速搞懂时间序列数据平稳检验" />
<meta property="og:description" content="在对时间序列数据进行分析预测时，平稳时间序列数据预测效果更好。所以首先要检测数据是否平稳，没有趋势的时间序列数据，我们称为平稳的，即随着时间的推移，表现出恒定的方差，具有恒定的自相关结构。本文介绍如何检测数据集是否平稳的方法，并给出实战过程代码。常用的检测方法有KPSS，Phillips–Perron,
和 Augmented Dickey-Fuller，本文主要介绍ADF检测。
单位根检验 在时间序列分析中，单位根检验是检验时间序列是否不平稳，是否由单位根组成。时间序列中单位根的存在定义了零假设，备择假设定义了时间序列是平稳的。单位根检验的数学公式可表示为：
y t = D t &#43; z t &#43; ɛ t y_t = D_t &#43; z_t &#43; ɛ_t yt​=Dt​&#43;zt​&#43;ɛt​
D t D_t Dt​ 是决定性成分 Z t Z_t Zt​ 是随机成分 ɛ t ɛ_t ɛt​ 是平稳的误差处理 单位根检验的基本概念是确定 z t z_t zt​(随机分量)是否由单位根组成。
ADF检验简要说明 ADF(Augmented Dickey-Fuller) 检验是一种检验时间序列数据是否平稳的方法。ADF是统计显著性检验，包括零假设和备择假设分别为：
H0
时间序列不是平稳的，换句话说，它有一些随时间变化的结构，随时间推移没有恒定的方差。
H1
时间序列是平稳的。
如果测试的P值小于显著性水平（假设为 .α = .05)，那么我们能拒绝零假设，得出结论时间序列是平稳的。下面通过示例进行说明。
Python实现ADF检验 假设我们有下面测试数据：
data = [3, 4, 4, 5, 6, 7, 6, 6, 7, 8, 9, 12, 10] 在检验之前，我们先对数据进行可视化，展示数据的分布情况。下面代码可视化数据：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/b6fdb612a6ca02fbcd233843a411cf78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-18T11:30:17+08:00" />
<meta property="article:modified_time" content="2024-02-18T11:30:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">快速搞懂时间序列数据平稳检验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>在对时间序列数据进行分析预测时，平稳时间序列数据预测效果更好。所以首先要检测数据是否平稳，没有趋势的时间序列数据，我们称为平稳的，即随着时间的推移，表现出恒定的方差，具有恒定的自相关结构。本文介绍如何检测数据集是否平稳的方法，并给出实战过程代码。常用的检测方法有KPSS，Phillips–Perron,<br> 和 Augmented Dickey-Fuller，本文主要介绍ADF检测。</p> 
</blockquote> 
<h3><a id="_5"></a>单位根检验</h3> 
<p>在时间序列分析中，单位根检验是检验时间序列是否不平稳，是否由单位根组成。时间序列中单位根的存在定义了零假设，备择假设定义了时间序列是平稳的。单位根检验的数学公式可表示为：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           y 
          
         
           t 
          
         
        
          = 
         
         
         
           D 
          
         
           t 
          
         
        
          + 
         
         
         
           z 
          
         
           t 
          
         
        
          + 
         
         
         
           ɛ 
          
         
           t 
          
         
        
       
         y_t = D_t + z_t + ɛ_t 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.7333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.044em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: -0.044em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord">ɛ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           D 
          
         
           t 
          
         
        
       
         D_t 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 是决定性成分</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           Z 
          
         
           t 
          
         
        
       
         Z_t 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">Z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 是随机成分</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           ɛ 
          
         
           t 
          
         
        
       
         ɛ_t 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord">ɛ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 是平稳的误差处理</li></ul> 
<p>单位根检验的基本概念是确定<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          z 
         
        
          t 
         
        
       
      
        z_t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.044em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: -0.044em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>(随机分量)是否由单位根组成。</p> 
<h3><a id="ADF_19"></a>ADF检验简要说明</h3> 
<p>ADF(Augmented Dickey-Fuller) 检验是一种检验时间序列数据是否平稳的方法。ADF是统计显著性检验，包括零假设和备择假设分别为：</p> 
<ul><li> <p>H0</p> <p>时间序列不是平稳的，换句话说，它有一些随时间变化的结构，随时间推移没有恒定的方差。</p> </li><li> <p>H1</p> <p>时间序列是平稳的。</p> </li></ul> 
<p>如果测试的P值小于显著性水平（假设为 .α = .05)，那么我们能拒绝零假设，得出结论时间序列是平稳的。下面通过示例进行说明。</p> 
<h3><a id="PythonADF_32"></a>Python实现ADF检验</h3> 
<p>假设我们有下面测试数据：</p> 
<pre><code class="prism language-python">data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>
</code></pre> 
<p>在检验之前，我们先对数据进行可视化，展示数据的分布情况。下面代码可视化数据：</p> 
<pre><code>import matplotlib.pyplot as plt


plt.plot(data)
plt.show()
</code></pre> 
<p><img src="https://images2.imgbox.com/ba/b3/D95Up5XO_o.png" alt="在这里插入图片描述"></p> 
<p>要执行ADF单位根检验，需要statsmodels库中导入函数 <code>adfuller()</code>函数，首先需要安装statsmodels包：</p> 
<pre><code class="prism language-shell">pip <span class="token function">install</span> statsmodels
</code></pre> 
<p>接下来，我们使用下面代码执行ADF检验：</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>stattools <span class="token keyword">import</span> adfuller

<span class="token comment"># perform augmented Dickey-Fuller test</span>
result <span class="token operator">=</span> adfuller<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

</code></pre> 
<p>输出结果如下：</p> 
<pre><code>-0.975383623474406, 0.7621363564361016, 0, 12, {'1%': -4.137829282407408, '5%': -3.1549724074074077, '10%': -2.7144769444444443}, 31.2466098872313
</code></pre> 
<p>这里我们解释前两个最重要的值：</p> 
<ul><li>检验统计量: -0.97538</li></ul> 
<ul><li>P-value: 0.7621</li></ul> 
<p>既然P值不小于.05, 我们不能拒绝零假设。这意味着数据不是平稳的，也就是说随时间推移没有恒定的方差。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/df7b8a9b7c2743a5c87d29b669137686/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">win7安装anaconda3实现yolov5环境搭建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e0a1e8c96d4c22a4ad443422b1fef9d5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【个人博客搭建】butterfly主题配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
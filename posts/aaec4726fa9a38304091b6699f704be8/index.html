<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PHP调用接口京东API封装的例子（ 获得JD商品详情，按关键字搜索商品， 按图搜索京东商品（拍立淘），获得店铺） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PHP调用接口京东API封装的例子（ 获得JD商品详情，按关键字搜索商品， 按图搜索京东商品（拍立淘），获得店铺）" />
<meta property="og:description" content="POST和GET是HTTP协议中两种最基本的请求方式。其主要差别在于传参方式、数据大小等方面，下面做详细介绍：
1. GET（获取）：从服务器获取资源或数据
当一个GET请求发生时，客户端发送一个请求给服务端，服务端会返回请求的内容。这个请求可以使用一个URL地址，在该地址后添加查询参数。
2. POST（提交）：向服务器提交数据并让其处理
当一个POST请求发生时，客户端将一个请求发送到服务端，并且包含了所有要提交的数据。这些数据可以位于HTML表单中，或者是通过JavaScript打包。
GET和POST的区别
- 数据传输方式：GET请求的数据是以查询字符在URL后面，而POST请求的数据则放在HTTP消息的消息体中。
- 使用场景不同：GET更适合用来获取数据，POST更适合用来提交数据。
- 数据长度限制：GET是有长度限制（限制是由浏览器和服务器设置的），POST没有长度限制。
- 编码方式：GET请求只接受ASCAII编码的字符，而POST请求支持多种类型的编码方式。
因此，你应该根据不同的情况选择适合的请求方式，GET和POST各自都有自己的优缺点。
GET：
/** * 通过URL获取页面信息 * @param $url 地址 * @return mixed 返回页面信息 */ function get_url($url) { $ch = curl_init(); curl_setopt($ch, CURLOPT_URL,$url); //设置访问的url地址 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);//不输出内容 $result = curl_exec($ch); curl_close ($ch); return $result; } POST：
/** * 模拟POST提交 * @param string $url 地址 * @param string $data 提交的数据 * @return string 返回结果 */ function post_url($url, $data) { $curl = curl_init(); // 启动一个CURL会话 curl_setopt($curl, CURLOPT_URL, $url); // 要访问的地址 curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); // 对认证证书来源的检查 curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); // 从证书中检查SSL加密算法是否存在 curl_setopt($curl, CURLOPT_USERAGENT, &#39;Mozilla/5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/aaec4726fa9a38304091b6699f704be8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-27T14:26:52+08:00" />
<meta property="article:modified_time" content="2023-05-27T14:26:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PHP调用接口京东API封装的例子（ 获得JD商品详情，按关键字搜索商品， 按图搜索京东商品（拍立淘），获得店铺）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>    POST和GET是HTTP协议中两种最基本的请求方式。其主要差别在于传参方式、数据大小等方面，下面做详细介绍：</p> 
<p>1. GET（获取）：从服务器获取资源或数据</p> 
<p>当一个GET请求发生时，客户端发送一个请求给服务端，服务端会返回请求的内容。这个请求可以使用一个URL地址，在该地址后添加查询参数。</p> 
<p>2. POST（提交）：向服务器提交数据并让其处理</p> 
<p>当一个POST请求发生时，客户端将一个请求发送到服务端，并且包含了所有要提交的数据。这些数据可以位于HTML表单中，或者是通过JavaScript打包。</p> 
<p>GET和POST的区别</p> 
<p>- 数据传输方式：GET请求的数据是以查询字符在URL后面，而POST请求的数据则放在HTTP消息的消息体中。<br> - 使用场景不同：GET更适合用来获取数据，POST更适合用来提交数据。<br> - 数据长度限制：GET是有长度限制（限制是由浏览器和服务器设置的），POST没有长度限制。<br> - 编码方式：GET请求只接受ASCAII编码的字符，而POST请求支持多种类型的编码方式。</p> 
<p>因此，你应该根据不同的情况选择适合的请求方式，GET和POST各自都有自己的优缺点。</p> 
<p></p> 
<p><strong>GET：</strong></p> 
<pre><code>/**
 * 通过URL获取页面信息
 * @param $url 地址
 * @return mixed 返回页面信息
 */
function get_url($url)
{
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL,$url); //设置访问的url地址
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);//不输出内容
  $result = curl_exec($ch);
  curl_close ($ch);
  return $result;
}</code></pre> 
<p><strong>POST：</strong></p> 
<pre><code>/**
 * 模拟POST提交
 * @param string $url 地址
 * @param string $data 提交的数据
 * @return string 返回结果
 */
function post_url($url, $data) 
{
  $curl = curl_init(); // 启动一个CURL会话
  curl_setopt($curl, CURLOPT_URL, $url); // 要访问的地址
  curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, FALSE); // 对认证证书来源的检查
  curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, FALSE); // 从证书中检查SSL加密算法是否存在
  curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0)'); // 模拟用户使用的浏览器
  //curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1); // 使用自动跳转
  //curl_setopt($curl, CURLOPT_AUTOREFERER, 1);  // 自动设置Referer
  curl_setopt($curl, CURLOPT_POST, 1);       // 发送一个常规的Post请求
  curl_setopt($curl, CURLOPT_POSTFIELDS, $data);  // Post提交的数据包x
  curl_setopt($curl, CURLOPT_TIMEOUT, 30);     // 设置超时限制 防止死循环
  curl_setopt($curl, CURLOPT_HEADER, 0);      // 显示返回的Header区域内容
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);  // 获取的信息以文件流的形式返回
 
  $tmpInfo = curl_exec($curl); // 执行操作
  if(curl_errno($curl)) 
 {
    echo 'Errno'.curl_error($curl);//捕抓异常
  }
  curl_close($curl); // 关闭CURL会话
  return $tmpInfo; // 返回数据
}</code></pre> 
<p><strong>GET&amp;&amp;POST：</strong></p> 
<pre><code>/**
 * CURL请求
 * @param $url 请求url地址
 * @param $method 请求方法 get post
 * @param null $postfields post数据数组
 * @param array $headers 请求header信息
 * @param bool|false $debug 调试开启 默认false
 * @return mixed
 */
function httpRequest($url, $method, $postfields = null, $headers = array(), $debug = false) {
  $method = strtoupper($method);
  $ci = curl_init();
  /* Curl settings */
  curl_setopt($ci, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0);
  curl_setopt($ci, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.2; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0");
  curl_setopt($ci, CURLOPT_CONNECTTIMEOUT, 60); /* 在发起连接前等待的时间，如果设置为0，则无限等待 */
  curl_setopt($ci, CURLOPT_TIMEOUT, 7); /* 设置cURL允许执行的最长秒数 */
  curl_setopt($ci, CURLOPT_RETURNTRANSFER, true);
  switch ($method) {
    case "POST":
      curl_setopt($ci, CURLOPT_POST, true);
      if (!empty($postfields)) {
        $tmpdatastr = is_array($postfields) ? http_build_query($postfields) : $postfields;
        curl_setopt($ci, CURLOPT_POSTFIELDS, $tmpdatastr);
      }
      break;
    default:
      curl_setopt($ci, CURLOPT_CUSTOMREQUEST, $method); /* //设置请求方式 */
      break;
  }
  $ssl = preg_match('/^https:\/\//i',$url) ? TRUE : FALSE;
  curl_setopt($ci, CURLOPT_URL, $url);
  if($ssl){
    curl_setopt($ci, CURLOPT_SSL_VERIFYPEER, FALSE); // https请求 不验证证书和hosts
    curl_setopt($ci, CURLOPT_SSL_VERIFYHOST, FALSE); // 不从证书中检查SSL加密算法是否存在
  }
  //curl_setopt($ci, CURLOPT_HEADER, true); /*启用时会将头文件的信息作为数据流输出*/
  curl_setopt($ci, CURLOPT_FOLLOWLOCATION, 1);
  curl_setopt($ci, CURLOPT_MAXREDIRS, 2);/*指定最多的HTTP重定向的数量，这个选项是和CURLOPT_FOLLOWLOCATION一起使用的*/
  curl_setopt($ci, CURLOPT_HTTPHEADER, $headers);
  curl_setopt($ci, CURLINFO_HEADER_OUT, true);
  /*curl_setopt($ci, CURLOPT_COOKIE, $Cookiestr); * *COOKIE带过去** */
  $response = curl_exec($ci);
  $requestinfo = curl_getinfo($ci);
  $http_code = curl_getinfo($ci, CURLINFO_HTTP_CODE);
  if ($debug) {
    echo "=====post data======\r\n";
    var_dump($postfields);
    echo "=====info===== \r\n";
    print_r($requestinfo);
    echo "=====response=====\r\n";
    print_r($response);
  }
  curl_close($ci);
  return $response;
  //return array($http_code, $response,$requestinfo);
}</code></pre> 
<h2>jd API 接入说明</h2> 
<ol><li> <p>API地址:<a class="link-info" href="http://o0b.cn/tinale" rel="nofollow" title="调用KEY 地址">调用KEY 地址</a></p> </li><li> <p>调用示例：</p> <pre><code class="hljs">&lt;?php

// 请求示例 url 默认请求参数已经URL编码处理
// 本示例代码未加密secret参数明文传输，若要加密请参考：https://api.……cn/taobao/demo/sdk2020/demo-sign.php
$method = "GET";
$url = "https://api-gw.…….cn/jd/item_get/?key=&lt;您自己的apiKey&gt;&amp;secret=&lt;您自己的apiSecret&gt;&amp;num_iid=10335871600";
$curl = curl_init();
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, $method);
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST,FALSE);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER,FALSE);
curl_setopt($curl, CURLOPT_FAILONERROR, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HEADER, true);
curl_setopt($curl, CURLOPT_ENCODING, "gzip");
var_dump(curl_exec($curl));
?&gt;</code></pre> <pre><code class="hljs">&lt;?php
//定义缓存目录和引入文件
define("DIR_RUNTIME","runtime/");
define("DIR_ERROR","runtime/");
define("SECACHE_SIZE","0");
//SDK下载地址 http://api-gw.…….cn/taobao/demo/sdk2020/……-api-sdk.zip
include ("ObApiClient.php");

$obapi = new otao\ObApiClient();
$obapi-&gt;api_url = "http://api-gw.…….cn/";
$obapi-&gt;api_urls = array("http://api-gw.…….cn/","http://api-1.onebound.cn/");//备用API服务器
$obapi-&gt;api_urls_on = true;//当网络错误时，是否启用备用API服务器
$obapi-&gt;api_key = "&lt;您自己的apiKey&gt;";
$obapi-&gt;api_secret = "&lt;您自己的apiSecret&gt;";
$obapi-&gt;api_version ="";
$obapi-&gt;secache_path ="runtime/";
$obapi-&gt;secache_time ="86400";
$obapi-&gt;cache = true;

$api_data = $obapi-&gt;exec(
                array(
	                "api_type" =&gt;"jd",
	                "api_name" =&gt;"item_get",
	                "api_params"=&gt;array (
  'num_iid' =&gt; '10335871600',
)
                )
            );
 var_dump($api_data);
?&gt;</code></pre> <p></p> </li><li> <p>参数说明</p> 
  <ul><li>通用参数说明 
    <ul><li>url说明 https://api-gw.onebound.cn/平台/API类型/ 平台：淘宝，京东等， API类型:[item_search,item_get,item_search_shop等]</li><li>version:API版本</li><li>key:调用key,测试key:test_api_key</li><li>secret:调用secret,测试secret:(不用填写)</li><li>cache:[yes,no]默认yes，将调用缓存的数据，速度比较快</li><li>result_type:[json,xml,serialize,var_export]返回数据格式，默认为json</li><li>lang:[cn,en,ru] 翻译语言，默认cn简体中文</li><li>secret:密钥</li></ul></li></ul></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b61512b1ab2a1df935648e69422bf209/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">二层转发&amp;交换机工作原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/090f48c7ef4d18c210e01e754e35fcec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">乌班图静态指定IP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
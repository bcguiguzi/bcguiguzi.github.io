<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于android嵌套webview等相关问题 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于android嵌套webview等相关问题" />
<meta property="og:description" content="web开发越来越活跃，大多app内嵌套html已经是非常平常的事情，在android中有许多js加载问题及微信支付问题，还有显示问题，以下是我这几天的学习所整理的一些方法，在这里发布以下
打开webview ，url为地址，replace(&#34;\\&#34;, &#34;&#34;) 去除多余的斜杠，android接受json的地址会多出来几条斜杠，这样会造成web无法显示的问题
startActivity(WebActivity.newIntent(this, url.replace(&#34;\\&#34;, &#34;&#34;),&#34;积分商城&#34;)); xlm（主要就这一句，不多BB） &lt;WebView android:id=&#34;@&#43;id/webView&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; /&gt; java代码
@Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_webview);webview = findviewbyid（R.id.webview）; iniview();//引用控件 setwebviewbackgrand();//服务，中有加载处理方法和打开微信支付方法 } 博主比较懒，简单的代码就不备注了 private void iniview() { web_view = (WebView) findViewById(R.id.webView); weiuri = new String(stringExtra); WebSettings webSettings = web_view.getSettings();//初始化WebSettings 获取web服务 webSettings.setPluginState(WebSettings.PluginState.ON);//过期方法， webSettings.setUseWideViewPort(true); //将图片调整到适合webview的大小 webSettings.setLoadWithOverviewMode(true); // 缩放至屏幕的大小 webSettings.setJavaScriptEnabled(true);//启用js webSettings.setBlockNetworkImage(false);//解决图片不显示 webSettings.setAppCacheEnabled(true);//设置是否打开。默认关闭，即，H5的缓存无法使用。 webSettings.setJavaScriptCanOpenWindowsAutomatically(true); webSettings.setAllowFileAccess(true);// 设置允许访问文件数据 webSettings.setSupportZoom(true);//支持缩放 webSettings.setBuiltInZoomControls(true);//进行控制缩放。由于某些原因需要在该activity的onDestroy方法里面调用webView.destroy()。当进入该webview并且进行缩放操作时，退出该activity程序崩溃 webSettings.setJavaScriptCanOpenWindowsAutomatically(true);//自动打开窗口 if (URL.endsWith(&#34;.html&#34;)) { web_view.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); } else { web_view.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); } webSettings." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/044a0d00307e83f62812cb8c0fc7265e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-27T11:57:55+08:00" />
<meta property="article:modified_time" content="2018-06-27T11:57:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于android嵌套webview等相关问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>web开发越来越活跃，大多app内嵌套html已经是非常平常的事情，在android中有许多js加载问题及微信支付问题，还有显示问题，以下是我这几天的学习所整理的一些方法，在这里发布以下</p> 
<p>打开webview ，url为地址，<span style="color:rgb(0,0,0);font-family:'宋体';font-size:9pt;line-height:20px;background-color:rgb(255,255,255);">replace(</span><span style="font-family:'宋体';font-size:9pt;line-height:20px;color:rgb(0,128,0);"><strong>"</strong></span><span style="font-family:'宋体';font-size:9pt;line-height:20px;color:rgb(0,0,128);"><strong>\\</strong></span><span style="font-family:'宋体';font-size:9pt;line-height:20px;color:rgb(0,128,0);"><strong>"</strong></span><span style="color:rgb(0,0,0);font-family:'宋体';font-size:9pt;line-height:20px;background-color:rgb(255,255,255);">, </span><span style="font-family:'宋体';font-size:9pt;line-height:20px;color:rgb(0,128,0);"><strong>""</strong></span><span style="color:rgb(0,0,0);font-family:'宋体';font-size:9pt;line-height:20px;background-color:rgb(255,255,255);">) 去除多余的斜杠，android接受json的地址会多出来几条斜杠，这样会造成web无法显示的问题</span></p> 
<p></p> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);">startActivity(WebActivity.<span style="font-style:italic;">newIntent</span>(<span style="color:#000080;"><strong>this</strong></span>, <span style="color:#660e7a;"><strong>url</strong></span>.replace(<span style="color:#008000;"><strong>"</strong></span><span style="color:#000080;"><strong>\\</strong></span><span style="color:#008000;"><strong>"</strong></span>, <span style="color:#008000;"><strong>""</strong></span>),<span style="color:#008000;"><strong>"积分商城"</strong></span>));</pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);">xlm（主要就这一句，不多BB）</pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);">&lt;<span style="color:#000080;"><strong>WebView
</strong></span><span style="color:#000080;"><strong>    </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:id=</strong></span><span style="color:#008000;"><strong>"@+id/webView"
</strong></span><span style="color:#008000;"><strong>    </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_width=</strong></span><span style="color:#008000;"><strong>"match_parent"
</strong></span><span style="color:#008000;"><strong>    </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_height=</strong></span><span style="color:#008000;"><strong>"match_parent" </strong></span>/&gt;</pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"></pre> 
<p>java代码</p> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"></pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"><span style="color:#808000;">@Override
</span><span style="color:#000080;"><strong>protected void </strong></span>onCreate(Bundle savedInstanceState) {
    <span style="color:#000080;"><strong>super</strong></span>.onCreate(savedInstanceState);
</pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);">setContentView(<span style="font-size:9pt;">R.layout.activity_</span><span style="font-size:9pt;color:rgb(102,14,122);"><strong><em>webview</em></strong></span><span style="font-size:9pt;">);</span></pre>webview = findviewbyid（R.id.webview）; iniview();//引用控件 setwebviewbackgrand();//服务，中有加载处理方法和打开微信支付方法 
<br>} 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);">博主比较懒，简单的代码就不备注了</pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"></pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"><span style="color:#000080;"><strong>private void </strong></span>iniview() {
    <span style="color:#660e7a;"><strong>web_view </strong></span>= (WebView) findViewById(R.id.<span style="color:#660e7a;"><strong><em>webView</em></strong></span>);
    <span style="color:#660e7a;"><strong>weiuri </strong></span>= <span style="color:#000080;"><strong>new </strong></span>String(stringExtra);
    WebSettings webSettings = <span style="color:#660e7a;"><strong>web_view</strong></span>.getSettings();//初始化<span style="font-size:9pt;">WebSettings 获取web服务</span>
    webSettings.setPluginState(WebSettings.PluginState.<span style="color:rgb(102,14,122);"><strong><em>ON</em></strong></span>);//过期方法，
    webSettings.setUseWideViewPort(<span style="color:#000080;"><strong>true</strong></span>); <span style="color:#808080;"><em>//将图片调整到适合webview的大小
</em></span><span style="color:#808080;"><em>    </em></span>webSettings.setLoadWithOverviewMode(<span style="color:#000080;"><strong>true</strong></span>); <span style="color:#808080;"><em>// 缩放至屏幕的大小
</em></span><span style="color:#808080;"><em>    </em></span>webSettings.setJavaScriptEnabled(<span style="color:#000080;"><strong>true</strong></span>);<span style="color:#808080;"><em>//启用js
</em></span><span style="color:#808080;"><em>    </em></span>webSettings.setBlockNetworkImage(<span style="color:#000080;"><strong>false</strong></span>);<span style="color:#808080;"><em>//解决图片不显示</em></span>
    webSettings.setAppCacheEnabled(<span style="color:#000080;"><strong>true</strong></span>);//<span style="color:rgb(51,51,51);font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;font-size:14px;line-height:22px;background-color:rgb(255,255,255);">设置是否打开。默认关闭，即，H5的缓存无法使用。</span>
    webSettings.setJavaScriptCanOpenWindowsAutomatically(<span style="color:#000080;"><strong>true</strong></span>);
    webSettings.setAllowFileAccess(<span style="color:#000080;"><strong>true</strong></span>);<span style="color:#808080;"><em>// 设置允许访问文件数据
</em></span><span style="color:#808080;"><em>    </em></span>webSettings.setSupportZoom(<span style="color:#000080;"><strong>true</strong></span>);//支持缩放
    webSettings.setBuiltInZoomControls(<span style="color:#000080;"><strong>true</strong></span>);//<span style="font-family:'-apple-system', 'SF UI Text', Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif, SimHei, SimSun;background-color:rgb(255,255,255);">进行控制缩放。由于某些原因需要在该activity的onDestroy方法里面调用webView.destroy()。当进入该webview并且进行缩放操作时，退出该activity程序崩溃</span>
    webSettings.setJavaScriptCanOpenWindowsAutomatically(<span style="color:#000080;"><strong>true</strong></span>);//自动打开窗口
    <span style="color:#000080;"><strong>if </strong></span>(<span style="color:#660e7a;"><strong><em>URL</em></strong></span>.endsWith(<span style="color:#008000;"><strong>".html"</strong></span>)) {
        <span style="color:#660e7a;"><strong>web_view</strong></span>.getSettings().setCacheMode(WebSettings.<span style="color:#660e7a;"><strong><em>LOAD_CACHE_ELSE_NETWORK</em></strong></span>);
    } <span style="color:#000080;"><strong>else </strong></span>{
        <span style="color:#660e7a;"><strong>web_view</strong></span>.getSettings().setCacheMode(WebSettings.<span style="color:#660e7a;"><strong><em>LOAD_NO_CACHE</em></strong></span>);
    }
    webSettings.setDomStorageEnabled(<span style="color:#000080;"><strong>true</strong></span>);//<span style="color:rgb(0,0,0);font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;white-space:pre;background-color:rgb(246,248,250);">设置支持DomStorage</span>
    webSettings.setDatabaseEnabled(<span style="color:#000080;"><strong>true</strong></span>);//<span style="color:rgb(0,0,0);font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;white-space:pre;background-color:rgb(246,248,250);">设置支持本地存储</span>
    <span style="color:#000080;"><strong>if</strong></span>(Build.VERSION.<span style="color:#660e7a;"><strong><em>SDK_INT</em></strong></span>&gt;=Build.VERSION_CODES.<span style="color:#660e7a;"><strong><em>LOLLIPOP</em></strong></span>){//这个很重要 不接受了
        webSettings.setMixedContentMode(WebSettings.<span style="color:#660e7a;"><strong><em>MIXED_CONTENT_ALWAYS_ALLOW</em></strong></span>);

    }
    <span style="color:#660e7a;"><strong>web_view</strong></span>.requestFocus();//缓存<span style="color:#808080;"><em>
</em></span><span style="color:#808080;"><em>    //设置响应js 的Alert()函数
</em></span><span style="color:#808080;"><em>    </em></span><span style="color:#660e7a;"><strong>web_view</strong></span>.setWebChromeClient(<span style="color:#000080;"><strong>new </strong></span>WebChromeClient() {
        <span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public boolean </strong></span>onJsAlert(WebView view, String url, String message, <span style="color:#000080;"><strong>final </strong></span>JsResult result) {
            AlertDialog.Builder b = <span style="color:#000080;"><strong>new </strong></span>AlertDialog.Builder(WebActivity.<span style="color:#000080;"><strong>this</strong></span>);
            b.setTitle(<span style="color:#008000;"><strong>"提示"</strong></span>);
            b.setMessage(message);
            b.setPositiveButton(android.R.string.<span style="color:#660e7a;"><strong><em>ok</em></strong></span>, <span style="color:#000080;"><strong>new </strong></span>DialogInterface.OnClickListener() {
                <span style="color:#808000;">@Override
</span><span style="color:#808000;">                </span><span style="color:#000080;"><strong>public void </strong></span>onClick(DialogInterface dialog, <span style="color:#000080;"><strong>int </strong></span>which) {
                    <span style="color:#660e7a;">result</span>.confirm();
                }
            });
            b.setCancelable(<span style="color:#000080;"><strong>false</strong></span>);
            b.create().show();
            <span style="color:#000080;"><strong>return true</strong></span>;
        }

        <span style="color:#808080;"><em>//设置响应js 的Confirm()函数
</em></span><span style="color:#808080;"><em>        </em></span><span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public boolean </strong></span>onJsConfirm(WebView view, String url, String message, <span style="color:#000080;"><strong>final </strong></span>JsResult result) {
            AlertDialog.Builder b = <span style="color:#000080;"><strong>new </strong></span>AlertDialog.Builder(WebActivity.<span style="color:#000080;"><strong>this</strong></span>);
            b.setTitle(<span style="color:#008000;"><strong>"confirm"</strong></span>);
            b.setMessage(message);
            b.setPositiveButton(android.R.string.<span style="color:#660e7a;"><strong><em>ok</em></strong></span>, <span style="color:#000080;"><strong>new </strong></span>DialogInterface.OnClickListener() {
                <span style="color:#808000;">@Override
</span><span style="color:#808000;">                </span><span style="color:#000080;"><strong>public void </strong></span>onClick(DialogInterface dialog, <span style="color:#000080;"><strong>int </strong></span>which) {
                    <span style="color:#660e7a;">result</span>.confirm();
                }
            });
            b.setNegativeButton(android.R.string.<span style="color:#660e7a;"><strong><em>cancel</em></strong></span>, <span style="color:#000080;"><strong>new </strong></span>DialogInterface.OnClickListener() {
                <span style="color:#808000;">@Override
</span><span style="color:#808000;">                </span><span style="color:#000080;"><strong>public void </strong></span>onClick(DialogInterface dialog, <span style="color:#000080;"><strong>int </strong></span>which) {
                    <span style="color:#660e7a;">result</span>.cancel();
                }
            });
            b.create().show();
            <span style="color:#000080;"><strong>return true</strong></span>;
        }

        <span style="color:#808080;"><em>//设置响应js 的Prompt()函数
</em></span><span style="color:#808080;"><em>        </em></span><span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public boolean </strong></span>onJsPrompt(WebView view, String url, String message, String defaultValue, <span style="color:#000080;"><strong>final </strong></span>JsPromptResult result) {
            <span style="color:#000080;"><strong>final </strong></span>View v = View.<span style="font-style:italic;">inflate</span>(WebActivity.<span style="color:#000080;"><strong>this</strong></span>, R.layout.<span style="color:#660e7a;"><strong><em>prompt_dialog</em></strong></span>, <span style="color:#000080;"><strong>null</strong></span>);
            ((TextView) v.findViewById(R.id.<span style="color:#660e7a;"><strong><em>prompt_message_text</em></strong></span>)).setText(message);
            ((EditText) v.findViewById(R.id.<span style="color:#660e7a;"><strong><em>prompt_input_field</em></strong></span>)).setText(defaultValue);
            AlertDialog.Builder b = <span style="color:#000080;"><strong>new </strong></span>AlertDialog.Builder(WebActivity.<span style="color:#000080;"><strong>this</strong></span>);
            b.setTitle(<span style="color:#008000;"><strong>"prompt"</strong></span>);
            b.setView(v);
            b.setPositiveButton(android.R.string.<span style="color:#660e7a;"><strong><em>ok</em></strong></span>, <span style="color:#000080;"><strong>new </strong></span>DialogInterface.OnClickListener() {
                <span style="color:#808000;">@Override
</span><span style="color:#808000;">                </span><span style="color:#000080;"><strong>public void </strong></span>onClick(DialogInterface dialog, <span style="color:#000080;"><strong>int </strong></span>which) {
                    String value = ((EditText) <span style="color:#660e7a;">v</span>.findViewById(R.id.<span style="color:#660e7a;"><strong><em>prompt_input_field</em></strong></span>)).getText().toString();
                    <span style="color:#660e7a;">result</span>.confirm(value);
                }
            });
            b.setNegativeButton(android.R.string.<span style="color:#660e7a;"><strong><em>cancel</em></strong></span>, <span style="color:#000080;"><strong>new </strong></span>DialogInterface.OnClickListener() {
                <span style="color:#808000;">@Override
</span><span style="color:#808000;">                </span><span style="color:#000080;"><strong>public void </strong></span>onClick(DialogInterface dialog, <span style="color:#000080;"><strong>int </strong></span>which) {
                    <span style="color:#660e7a;">result</span>.cancel();
                }
            });
            b.create().show();
            <span style="color:#000080;"><strong>return true</strong></span>;
        }
    });
    <span style="color:#660e7a;"><strong>web_view</strong></span>.loadUrl(<span style="color:#660e7a;"><strong>weiuri</strong></span>);//打开webview weiuri是连接地址

}</pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"></pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"></pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);">这里主要用于微信支付操作，正常android自带的web是打不开微信，这里做的就是简单的拦截费网站页面和跳转微信支付的操作</pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"><span style="color:#000080;"><strong>private void </strong></span>setwebviewbackgrand() {
    <span style="color:#660e7a;"><strong>web_view</strong></span>.setPictureListener(<span style="color:#000080;"><strong>new </strong></span>WebView.PictureListener() {
        <span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public void </strong></span>onNewPicture(WebView view, Picture picture) {

            <span style="color:#808080;"><em>//移除动画或者删除背景图片
</em></span><span style="color:#808080;"><em>        </em></span>}
    });
    <span style="color:#660e7a;"><strong>web_view</strong></span>.setWebViewClient(<span style="color:#000080;"><strong>new </strong></span>WebViewClient() {
        <span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public void </strong></span>onReceivedError(WebView view, <span style="color:#000080;"><strong>int </strong></span>errorCode,
                                    String description, String failingUrl) {

            <span style="color:#808080;"><em>//网页加载失败的处理，一般是出错图片，跳转到出错处理页面
</em></span><span style="color:#808080;"><em>            </em></span><span style="color:#000080;"><strong>super</strong></span>.onReceivedError(view, errorCode, description,failingUrl);
        }
        <span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public boolean </strong></span>shouldOverrideUrlLoading(WebView view, String url) {
            <span style="color:#808080;"><em>// </em></span><span style="color:#0073bf;"><strong><em>TODO Auto-generated method stub
</em></strong></span><span style="color:#0073bf;"><strong><em>            </em></strong></span><span style="color:#808080;"><em>//返回值是true的时候控制去WebView打开，为false调用系统浏览器或第三方浏览器
</em></span><span style="color:#808080;"><em>
</em></span><span style="color:#808080;"><em>            </em></span><span style="color:#000080;"><strong>if </strong></span>(url.startsWith(<span style="color:#008000;"><strong>"http:"</strong></span>) || url.startsWith(<span style="color:#008000;"><strong>"https:"</strong></span>)){
                view.loadUrl(url);

                Map&lt;String, String&gt; extraHeaders = <span style="color:#000080;"><strong>new </strong></span>HashMap&lt;String, String&gt;();
                extraHeaders.put(<span style="color:#008000;"><strong>"Referer"</strong></span>, <span style="color:#008000;"><strong>"http://www.jxzwawa.cn"</strong></span>);
                view.loadUrl(url, extraHeaders);
                <span style="color:#000080;"><strong>return false</strong></span>;
            }<span style="color:#000080;"><strong>else </strong></span>{
                <span style="color:#000080;"><strong>if </strong></span>(url.startsWith(<span style="color:#008000;"><strong>"weixin://wap/pay?"</strong></span>)) {
                    Intent intent = <span style="color:#000080;"><strong>new </strong></span>Intent();
                    intent.setAction(Intent.<span style="color:#660e7a;"><strong><em>ACTION_VIEW</em></strong></span>);
                    intent.setData(Uri.<span style="font-style:italic;">parse</span>(url));
                    startActivity(intent);
                }
                <span style="color:#000080;"><strong>return true</strong></span>;
            }

        }
        <span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public void </strong></span>onPageFinished(WebView view, String url) {
            <span style="color:#000080;"><strong>super</strong></span>.onPageFinished(view, url);
            <span style="color:#000080;"><strong>if </strong></span>(view.getTitle().length() != <span style="color:#0000ff;">0</span>) {
                <span style="color:#660e7a;"><strong>mTitleBar</strong></span>.setTitle(view.getTitle());
            }

            WebActivity.<span style="color:#000080;"><strong>this</strong></span>.setTitle(view.getTitle());
            <span style="color:#808080;"><em>//网页加载结束的处理，可以停止动画
</em></span><span style="color:#808080;"><em>
</em></span><span style="color:#808080;"><em>        </em></span>}
        <span style="color:#808000;">@Override
</span><span style="color:#808000;">        </span><span style="color:#000080;"><strong>public void </strong></span>onPageStarted(WebView view, String url, Bitmap favicon) {

            <span style="color:#000080;"><strong>super</strong></span>.onPageFinished(view, url);
            <span style="color:#000080;"><strong>if </strong></span>(view.getTitle().length() != <span style="color:#0000ff;">0</span>) {
                <span style="color:#660e7a;"><strong>mTitleBar</strong></span>.setTitle(view.getTitle());
            }

            WebActivity.<span style="color:#000080;"><strong>this</strong></span>.setTitle(view.getTitle());
            <span style="color:#808080;"><em>//网页加载开始的处理，开始动画
</em></span><span style="color:#808080;"><em>        </em></span>}
    });
}</pre>顺便带一个退出操作 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"></pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"><span style="color:#808000;">@Override
</span><span style="color:#000080;"><strong>public boolean </strong></span>onKeyDown(<span style="color:#000080;"><strong>int </strong></span>keyCode, KeyEvent event) {
    <span style="color:#808080;"><em>// </em></span><span style="color:#0073bf;"><strong><em>TODO Auto-generated method stub
</em></strong></span><span style="color:#0073bf;"><strong><em>    </em></strong></span><span style="color:#000080;"><strong>if </strong></span>(keyCode == KeyEvent.<span style="color:#660e7a;"><strong><em>KEYCODE_BACK </em></strong></span>&amp;&amp; <span style="color:#660e7a;"><strong>web_view</strong></span>.canGoBack()) {
        <span style="color:#660e7a;"><strong>web_view</strong></span>.goBack();
        <span style="color:#000080;"><strong>return true</strong></span>;
    } <span style="color:#000080;"><strong>else </strong></span>{

        finish();

    }
    <span style="color:#000080;"><strong>return true</strong></span>;
}</pre> 
<br> 
<br> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"></pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"><span style="color:rgb(102,14,122);"><strong><em>xml.prompt_dialog</em></strong></span></pre> 
<pre style="font-family:'宋体';font-size:9pt;background-color:rgb(255,255,255);"><span style="font-style:italic;">&lt;?</span><span style="color:#0000ff;"><strong>xml version=</strong></span><span style="color:#008000;"><strong>"1.0" </strong></span><span style="color:#0000ff;"><strong>encoding=</strong></span><span style="color:#008000;"><strong>"utf-8"</strong></span><span style="font-style:italic;">?&gt;
</span>&lt;<span style="color:#000080;"><strong>LinearLayout </strong></span><span style="color:#0000ff;"><strong>xmlns:</strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>=</strong></span><span style="color:#008000;"><strong>"http://schemas.android.com/apk/res/android"
</strong></span><span style="color:#008000;"><strong>    </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_width=</strong></span><span style="color:#008000;"><strong>"match_parent"
</strong></span><span style="color:#008000;"><strong>    </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_height=</strong></span><span style="color:#008000;"><strong>"match_parent"
</strong></span><span style="color:#008000;"><strong>    </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:orientation=</strong></span><span style="color:#008000;"><strong>"vertical"</strong></span>&gt;

    &lt;<span style="color:#000080;"><strong>TextView
</strong></span><span style="color:#000080;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:id=</strong></span><span style="color:#008000;"><strong>"@+id/prompt_message_text"
</strong></span><span style="color:#008000;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_width=</strong></span><span style="color:#008000;"><strong>"match_parent"
</strong></span><span style="color:#008000;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_height=</strong></span><span style="color:#008000;"><strong>"wrap_content" </strong></span>/&gt;

    &lt;<span style="color:#000080;"><strong>EditText
</strong></span><span style="color:#000080;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:id=</strong></span><span style="color:#008000;"><strong>"@+id/prompt_input_field"
</strong></span><span style="color:#008000;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_width=</strong></span><span style="color:#008000;"><strong>"match_parent"
</strong></span><span style="color:#008000;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:layout_height=</strong></span><span style="color:#008000;"><strong>"wrap_content"
</strong></span><span style="color:#008000;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:minWidth=</strong></span><span style="color:#008000;"><strong>"250dp"
</strong></span><span style="color:#008000;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:selectAllOnFocus=</strong></span><span style="color:#008000;"><strong>"true"
</strong></span><span style="color:#008000;"><strong>        </strong></span><span style="color:#660e7a;"><strong>android</strong></span><span style="color:#0000ff;"><strong>:scrollHorizontally=</strong></span><span style="color:#008000;"><strong>"true"</strong></span>/&gt;
&lt;/<span style="color:#000080;"><strong>LinearLayout</strong></span>&gt;</pre> 
<p>代码比较简单 站过去就能用 不给dome了 希望各路大神多多指点。</p> 
<p>如果帮助到各位请留言告诉我 如果没帮助到了 如果我知道会告诉你 不过 我项目已经不用这个了 用qq游览器的内核 比自带的块很多倍 </p> 
<br> 
<p></p> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/05613185325e1c1a975527a2a7f8b94d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Fragment的OnkeyDown处理方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/34d95696ecef34799fc431e13c16747d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">稳压二极管工作原理与使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
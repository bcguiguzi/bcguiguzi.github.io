<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>第45届国际大学生程序设计竞赛(ICPC)亚洲网上区域赛模拟赛 E Eat Walnuts（区间dp） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="第45届国际大学生程序设计竞赛(ICPC)亚洲网上区域赛模拟赛 E Eat Walnuts（区间dp）" />
<meta property="og:description" content="链接：https://ac.nowcoder.com/acm/contest/8688/E
来源：牛客网
时间限制：C/C&#43;&#43; 2秒，其他语言4秒
空间限制：C/C&#43;&#43; 65536K，其他语言131072K
64bit IO Format: %lld
题目描述 As we all know, in the ACM ICPC held in 2017, the organizer of Xinjiang University presented a box of walnuts to each coach. Our coach is happy to share with the team members except Mr.Watermelon. He is going to test Mr.Watermelon with a game when Mr.Watermelon want to eat some walnuts.
He put some walnuts in a row and let Mr." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/a6ffcb95b5acd29839d83ed845801ec1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-03T19:11:56+08:00" />
<meta property="article:modified_time" content="2020-11-03T19:11:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">第45届国际大学生程序设计竞赛(ICPC)亚洲网上区域赛模拟赛 E Eat Walnuts（区间dp）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>链接：<a href="https://ac.nowcoder.com/acm/contest/8688/E" rel="nofollow">https://ac.nowcoder.com/acm/contest/8688/E</a><br> 来源：牛客网</p> 
<p>时间限制：C/C++ 2秒，其他语言4秒<br> 空间限制：C/C++ 65536K，其他语言131072K<br> 64bit IO Format: %lld</p> 
<h3>题目描述</h3> 
<p>As we all know, in the ACM ICPC held in 2017, the organizer of Xinjiang University presented a box of walnuts to each coach. Our coach is happy to share with the team members except Mr.Watermelon. He is going to test Mr.Watermelon with a game when Mr.Watermelon want to eat some walnuts.<br><br> He put some walnuts in a row and let Mr.Watermelon pick one of them. And this walnut is not the ﬁrst or last in the queue. The price Mr.Watermelon need to pay is : the walnut, the walnut in front of the walnut, and the walnut behind the walnut , the square of the sum of the size of these three walnuts.<br><br> For example, now there is a row of walnuts in front of Mr.Watermelon. Their size is: 3 1 50 20 15. If this time Mr.Watermelon picked the third walnut. He needs to pay (1 + 50 + 20) ∗ (1 + 50 + 20) = 5041.<br><br> After a walnut is taken away, it will leave the queue. Then Mr.Watermelon picks a walnut again until only two walnuts remain in the queue.<br><br> Mr.Watermelon wants to know what the minimum price he will pay when he takes walnuts until there are only two walnuts in the queue. But he needs more time to spend with his girlfriend. So he ask you to help him calculate this problem.</p> 
<h3>输入描述:</h3> 
<pre>Input contains multiple test cases.The ﬁrst line of each test case contains a integer n(3 ≤ n ≤ 100), the number of walnuts at the beginning. The second line contains n positive integers separated by spaces, representing the size of each walnut. Each positive integer does not exceed 1,000.

For 50% of the testcases, n ≤ 50.

For 90% of the testcases, n ≤ 90.

For 100% of the testcases, n ≤ 100.

The number of the testcases does not exceed 1000.</pre> 
<h3>输出描述:</h3> 
<pre>For each test case, print a integer–the minimum price Mr.Watermelon will pay.</pre> 
<p>示例1</p> 
<h3>输入</h3> 
<pre>5
3 1 50 20 15</pre> 
<h3>输出</h3> 
<pre>6698</pre> 
<p>题意：</p> 
<p>给一个数列，将除首尾以外的数删掉，每次删掉一个数a[i]的代价为（a[i - 1] + a[i] + a[i + 1])^ 2，问最小代价</p> 
<p>思路：</p> 
<p>区间dp，<img alt="dp[i][j]" class="mathcode" src="https://images2.imgbox.com/51/fd/mcyeLlaA_o.gif"> 表示区间 <img alt="[i, j]" class="mathcode" src="https://images2.imgbox.com/d9/cc/jhvLkYHN_o.gif"> 的数已经删完的最小代价，第一层枚举区间长度，第二层枚举区间左端点，第三层枚举区间断点 x，转移方程：</p> 
<p><img alt="dp[i][j] = dp[i][x - 1] + dp[x + 1][j] + (a[i - 1] + a[j + 1] + a[x])^{2}" class="mathcode" src="https://images2.imgbox.com/9e/a0/PA3sb9wj_o.gif"></p> 
<p>提前赋初值：</p> 
<p><img alt="dp[i][j] = \left\{\begin{matrix} 0, i &gt; j\\ inf, i &lt; j\\ (a[i - 1] + a[i] + a[i + 1])^{2},i = j \end{matrix}\right." class="mathcode" src="https://images2.imgbox.com/2b/cb/Sg5SrykS_o.gif"></p> 
<pre><code class="language-cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long ll;
const ll inf = 0x3f3f3f3f3f3f3f3f;
const ll mod = 1e9 + 7;
const int N = 1e3 + 10;

int a[N], dp[N][N];

int main(){
    int n;
    while(~scanf("%d", &amp;n)) {
        for(int i = 1; i &lt;= n; ++i) scanf("%d", &amp;a[i]);
        for(int i = 0; i &lt; N; ++i)
            for(int j = i; j &lt; N; ++j)
                dp[i][j] = inf;
        for(int i = 2; i &lt; n; ++i) dp[i][i] = (a[i - 1] + a[i] + a[i + 1]) * (a[i - 1] + a[i] + a[i + 1]);
        for(int len = 2; len &lt;= n - 2; ++len) {
            for(int i = 2; i + len &lt;= n; ++i) {
                int j = i + len - 1;
                for(int x = i; x &lt;= j; ++x) {
                    dp[i][j] = min(dp[i][j], dp[i][x - 1] + dp[x + 1][j] +
                                   (a[i - 1] + a[j + 1] + a[x]) * (a[i - 1] + a[j + 1] + a[x]));
                }
            }
        }
        printf("%d\n", dp[2][n - 1]);
    }
	return 0;
}
</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/60114a7174420aa4fb8ec870ad7d3f10/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Roboware Studio详细安装教程 （ROS kinetic）以及简单使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7d31b907b82e0dbebb11bccc8dad3d15/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小小程序员的第一篇笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>php get有长度限制吗,HTTP中GET长度问题 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="php get有长度限制吗,HTTP中GET长度问题" />
<meta property="og:description" content="曾做过一个plist的接口，需要将参数编码后放在URL上传递，编码后的URL很长，长到让人担心这么传有没有问题？要弄清这个问题得先弄明白HTTP报文请求格式，借用网上一张图片： 一个HTTP请求由四部分组成：Request Line、Headers、空行和Request Body。见下面GE
曾做过一个plist的接口，需要将参数编码后放在URL上传递，编码后的URL很长，长到让人担心这么传有没有问题？要弄清这个问题得先弄明白HTTP报文请求格式，借用网上一张图片：
一个HTTP请求由四部分组成：Request Line、Headers、空行和Request Body。见下面GET示例：
可以看到GET请求时，数据放在Request Line中Request-URI传递；若发送POST请求时，数据则放在Request Body中传递，不同的地方决定了其享受不同的待遇。
HTTP手册上是这么说的：
HTTP协议不会对URI做任何限制，服务端必须能处理不限长度的URI，如果不能处理则返回414
The HTTP protocol does not place any a priori limit on the length of a URI. Servers MUST be able to handle the URI of any resource they serve, and SHOULD be able to handle URIs of unbounded length if they provide GET-based forms that could generate such URIs. A server SHOULD return 414 (Request-URI Too Long) status if a URI is longer than the server can handle (see section 10." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d919ec18159a8ccaeded346bd42c6c91/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-11T03:08:33+08:00" />
<meta property="article:modified_time" content="2021-03-11T03:08:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">php get有长度限制吗,HTTP中GET长度问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>曾做过一个plist的接口，需要将参数编码后放在URL上传递，编码后的URL很长，长到让人担心这么传有没有问题？要弄清这个问题得先弄明白HTTP报文请求格式，借用网上一张图片： 一个HTTP请求由四部分组成：Request Line、Headers、空行和Request Body。见下面GE</p> 
 <p>曾做过一个plist的接口，需要将参数编码后放在URL上传递，编码后的URL很长，长到让人担心这么传有没有问题？要弄清这个问题得先弄明白HTTP报文请求格式，借用网上一张图片：</p> 
 <p align="center"><img src="https://images2.imgbox.com/b3/48/P3wnxr60_o.png" alt="42ef8e9de7d60cf5d27f55bbe74d54ad.png"></p> 
 <p>一个HTTP请求由四部分组成：Request Line、Headers、空行和Request Body。见下面GET示例：</p> 
 <p align="center"><img src="https://images2.imgbox.com/ee/85/zCAc0Tdq_o.png" alt="4784e11650d9e4aecff61c82db38774b.png"></p> 
 <p>可以看到GET请求时，数据放在Request Line中Request-URI传递；若发送POST请求时，数据则放在Request Body中传递，不同的地方决定了其享受不同的待遇。</p> 
 <p>HTTP手册上是这么说的：</p> 
 <p>HTTP协议不会对URI做任何限制，服务端必须能处理不限长度的URI，如果不能处理则返回414</p> 
 <p>The HTTP protocol does not place any a priori limit on the length of a URI. Servers MUST be able to handle the URI of any resource they serve, and SHOULD be able to handle URIs of unbounded length if they provide GET-based forms that could generate such URIs. A server SHOULD return 414 (Request-URI Too Long) status if a URI is longer than the server can handle (see section 10.4.15).</p> 
 <p>http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2.1</p> 
 <p>虽然HTTP协议中并未限制Request-URI的大小，但不同浏览器和WEB服务器则有不同的限制。</p> 
 <p>浏览器限制</p> 
 <p>不同的浏览器限制不同，若通过浏览器访问，2000个字符长度以内基本上都可以兼容。</p> 
 <p>WEB服务器</p> 
 <p>这里在SAE上写了个脚本，访问地址http://ipbt.vipsinaapp.com/demo/Http/request.php?len=8151，看到可以正常访问，若len参数改为8152则提示</p> 
 <p>414 Request-URI Too Large</p> 
 <p>可见这是当前NGINX环境下的极限值，此时Request Line的总长度为8190。同样的请求本地Apache配置的服务器，当Request Line长度超过8190时，Aapche也会提示</p> 
 <p>Request-URI Too Large</p> 
 <p>The requested URL's length exceeds the capacity limit for this server.</p> 
 <p>可见Nginx和Apache在请求行的长度控制上是一致的，默认都是8190个字符长度。但同时该值也是可以调整的，Nginx中可以通过large_client_header_buffers来控制请求行的最大长度；Apache中可设置LimitRequestLine的值来控制。</p> 
 <p>LimitRequestLine指令</p> 
 <p>语法：LimitRequestLine bytes</p> 
 <p>默认：LimitRequestLine 8190</p> 
 <p>这个指令用来设置客户端发送的HTTP请求行的最大字节数。请求行包括HTTP方法、URL、协议版本等。因此LimitRequestLine指令能够限制URL的长度，服务器会需要这个值足够大以装载它所有的资源名，包括可能在GET请求中所传递的查询部分的所有信息。</p> 
 <p>一般情况下，不要更改这个值，使用默认即可。</p> 
 <p>当把本地Apache LimitRequestLine 调整为 8190000后，加3个0在请求也没问题。。。</p> 
 <p>GET /ipbt/1/demo/Http/response.php?s=11111111.....</p> 
 <p>Host: localhost:80</p> 
 <p>Connection: Close</p> 
 <p>HTTP/1.1 200 OK</p> 
 <p>Date: Tue, 05 Aug 2014 23:19:17 GMT</p> 
 <p>Server: Apache/2.2.11 (Win32) PHP/5.4.7</p> 
 <p>X-Powered-By: PHP/5.4.7</p> 
 <p>Content-Length: 14</p> 
 <p>Connection: close</p> 
 <p>Content-Type: text/html</p> 
 <p>Length:8000000</p> 
 <p>可见GET请求实际上也是没有长度限制的，只是浏览器和WEB服务器做了控制。。。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e8dcfec0e75f0a699ed7eb2cf7a2439f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Git、GitHub、GitLab三者之间的联系以及区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6eb437268318d4512532c1186c5b1e6b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小狼-Windows10将默认输入法删除掉，只留一个输入法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
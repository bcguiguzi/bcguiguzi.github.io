<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux下protobuf保姆级安装教程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux下protobuf保姆级安装教程" />
<meta property="og:description" content="有两种安装方式，一种是通过链接安装，另一种是下载源文件安装。
我们来介绍后一种——通过源文件安装。
注意了，版本一定要安装正确，**v20开头和v3不是一个版本**。
两者最大的区别在于，v3开头的版本有autogen.sh文件，而v20开头的版本没有autogen.sh文件，所以我推荐使用v3开头的版本，当然自己也可以选择更合适的版本。
在安装过程中记得使用sudo命令，赋予管理员权限。
tar zxvf protobuf-all-3.19.4.tar.gz //解压
cd protobuf-3.19.4/ //进入解压目录
//检查并安装以下环境，Ubuntu使用apt-get安装，centos7环境使用yum
sudo apt-get install autoconf sudo apt-get install automake sudo apt-get install libtool
//以上安装成功后执行下面
./autogen.sh
//生成编译配置文件成功,运行配置脚本
./configure
sudo make //要编译很久
sudo make check //测试
sudo make install //安装
sudo ldconfig //更新一些动态链接库
protoc --vertion //在任何目录下输入这个命令，查看protoc版本，出现版本号即成功
期间遇到的问题：
1. 执行make check
virtual memory exhausted: Cannot allocate memory 或 c&#43;&#43;: internal compiler ereor: killed(program cciplus) 有两种情况，一种是虚拟机，比如说vmware，那么只需要将虚拟内存从4G变成8G即可；第二种情况是服务器，比如说腾讯云服务器，那么只需要将swap分区设置为8G即可，命令如下：
# 1. 创建分区
sudo dd if=/dev/zero of=/swapfile bs=1M count=8192 #挂载和开启swap" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/e191b49e836e3ee732610ad84786d14f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T12:55:54+08:00" />
<meta property="article:modified_time" content="2023-04-24T12:55:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux下protobuf保姆级安装教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>有两种安装方式，一种是通过链接安装，另一种是下载源文件安装。</p> 
<p>我们来介绍后一种——通过源文件安装。</p> 
<p>注意了，版本一定要安装正确，**v20开头和v3不是一个版本**。</p> 
<p>两者最大的区别在于，v3开头的版本有autogen.sh文件，而v20开头的版本没有autogen.sh文件，所以我推荐使用v3开头的版本，当然自己也可以选择更合适的版本。</p> 
<p>在安装过程中记得使用sudo命令，赋予管理员权限。</p> 
<p></p> 
<blockquote> 
 <p>tar zxvf protobuf-all-3.19.4.tar.gz        //解压<br> cd protobuf-3.19.4/                        //进入解压目录<br> //检查并安装以下环境，Ubuntu使用apt-get安装，centos7环境使用yum<br> sudo apt-get install autoconf <br> sudo apt-get install automake <br> sudo apt-get install libtool<br> //以上安装成功后执行下面<br> ./autogen.sh<br> //生成编译配置文件成功,运行配置脚本<br> ./configure<br> sudo make                  //要编译很久<br> sudo make check            //测试<br> sudo make install        //安装</p> 
 <p>sudo ldconfig                //更新一些动态链接库</p> 
 <p>protoc --vertion            //在任何目录下输入这个命令，查看protoc版本，出现版本号即成功</p> 
</blockquote> 
<p> 期间遇到的问题：</p> 
<p>1. 执行make check</p> 
<h2> <a href="https://so.csdn.net/so/search?q=virtual&amp;spm=1001.2101.3001.7020" title="virtual">virtual</a> memory exhausted: Cannot allocate memory 或 c++: internal compiler ereor: killed(program cciplus)</h2> 
<p>有两种情况，一种是虚拟机，比如说vmware，那么只需要将虚拟内存从4G变成8G即可；第二种情况是服务器，比如说腾讯云服务器，那么只需要将swap分区设置为8G即可，命令如下：</p> 
<blockquote> 
 <p># 1. 创建分区<br> sudo dd if=/dev/zero of=/swapfile bs=1M count=8192   </p> 
 <p></p> 
 <p>#挂载和开启swap<br> sudo mkswap /swapfile<br> sudo swapon /swapfile</p> 
 <p></p> 
 <p># free -m    #可以查看内存使用<br>  </p> 
 <p>#2. 关闭分区，在protobuf编译结束之后，可以关掉和删除swapfile<br> sudo swapoff /swapfile<br> sudo rm /swapfile</p> 
</blockquote> 
<p>执行创建分区命令的时候有可能会遇到这个问题：dd: failed to open '/swapfile': Text file busy</p> 
<p>那么我们只需要关闭swap分区，再重新执行创建分区的命令即可。</p> 
<blockquote> 
 <p>sudo swapoff -a </p> 
</blockquote> 
<p></p> 
<p>2. protoc --version</p> 
<blockquote> 
 <p>protoc: error while loading shared libraries: libprotoc.so.15: cannot open shared object file: No such file or directory</p> 
</blockquote> 
<p>只需要刷新动态链接库即可。</p> 
<blockquote> 
 <p>sudo ldconfig </p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/71c0ee6d7016428aa19c091596e92910/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot学习笔记 (图文详解)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e487244dadad1fdd72993a9a37cf317e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【leetcode速通java版】05—— 快乐数、两数之和、四数相加II</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MySQL】GROUP_CONCAT 运用易错点之建立方程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【MySQL】GROUP_CONCAT 运用易错点之建立方程" />
<meta property="og:description" content="力扣题 1、题目地址 2118. 建立方程
2、模拟表 表：Terms
Column NameTypepowerintfactorint power 是该表具有唯一值的列。该表的每一行包含关于方程的一项的信息。power 是范围为 [0, 100] 的整数。factor 是范围为 [-100,100] 的整数，且不能为零。 3、要求 你有一个非常强大的程序，可以解决世界上任何单变量的方程。传递给程序的方程必须格式化如下：
1、左边 (LHS) 应该包含所有的术语。
2、右边 (RHS) 应该是零。
3、LHS 的每一项应遵循 “X^” 的格式，其中：
是 “&#43;” 或者 “-”。
是 factor 的 绝对值。
是 power 的值。
如果幂是 1, 不要加上 “^”.
例如, 如果 power = 1 并且 factor = 3, 将有 “&#43;3X”。
如果幂是 0, 不要加上 “X” 和 “^”.
例如, 如果 power = 0 并且 factor = -3, 将有 “-3”。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/959faed2cce3da4e95a768fe6cce2cc2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-14T14:58:33+08:00" />
<meta property="article:modified_time" content="2024-03-14T14:58:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MySQL】GROUP_CONCAT 运用易错点之建立方程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>力扣题</h2> 
<h3><a id="1_1"></a>1、题目地址</h3> 
<p><a href="https://leetcode.cn/problems/build-the-equation/description/" rel="nofollow">2118. 建立方程</a></p> 
<h3><a id="2_3"></a>2、模拟表</h3> 
<p><strong>表：Terms</strong></p> 
<table><thead><tr><th>Column Name</th><th>Type</th></tr></thead><tbody><tr><td>power</td><td>int</td></tr><tr><td>factor</td><td>int</td></tr></tbody></table> 
<ul><li>power 是该表具有唯一值的列。</li><li>该表的每一行包含关于方程的一项的信息。</li><li>power 是范围为 [0, 100] 的整数。</li><li>factor 是范围为 [-100,100] 的整数，且不能为零。</li></ul> 
<h3><a id="3_15"></a>3、要求</h3> 
<p>你有一个非常强大的程序，可以解决世界上任何单变量的方程。传递给程序的方程必须格式化如下：</p> 
<p>1、左边 (LHS) 应该包含所有的术语。<br> 2、右边 (RHS) 应该是零。<br> 3、LHS 的每一项应遵循 “X^” 的格式，其中：</p> 
<ul><li> <p> 是 “+” 或者 “-”。</p> </li><li> <p> 是 factor 的 绝对值。</p> </li><li> <p> 是 power 的值。</p> </li><li> <p>如果幂是 1, 不要加上 “^”.<br> 例如, 如果 power = 1 并且 factor = 3, 将有 “+3X”。</p> </li><li> <p>如果幂是 0, 不要加上 “X” 和 “^”.<br> 例如, 如果 power = 0 并且 factor = -3, 将有 “-3”。</p> </li></ul> 
<p>4、LHS 中的幂应该按 降序排序。</p> 
<p>编写一个解决方案来构建方程。</p> 
<h3><a id="4_34"></a>4、示例</h3> 
<h4><a id="_35"></a>示例一</h4> 
<p><strong>输入：</strong><br> Terms 表：</p> 
<table><thead><tr><th>power</th><th>factor</th></tr></thead><tbody><tr><td>2</td><td>1</td></tr><tr><td>1</td><td>-4</td></tr><tr><td>0</td><td>2</td></tr></tbody></table> 
<p><strong>输出：</strong></p> 
<table><thead><tr><th>equation</th></tr></thead><tbody><tr><td><code>+1X^4-4X+2=0</code></td></tr></tbody></table> 
<h4><a id="_50"></a>示例二</h4> 
<p><strong>输入：</strong><br> Terms 表：</p> 
<table><thead><tr><th>power</th><th>factor</th></tr></thead><tbody><tr><td>4</td><td>-4</td></tr><tr><td>2</td><td>1</td></tr><tr><td>1</td><td>-1</td></tr></tbody></table> 
<p><strong>输出：</strong></p> 
<table><thead><tr><th>equation</th></tr></thead><tbody><tr><td><code>-4X^4+1X^2-1X=0</code></td></tr></tbody></table> 
<h3><a id="5_66"></a>5、代码编写</h3> 
<h4><a id="_67"></a>我的写法</h4> 
<pre><code class="prism language-sql"><span class="token keyword">with</span> tmp <span class="token keyword">as</span> <span class="token punctuation">(</span>
    <span class="token keyword">select</span> power<span class="token punctuation">,</span> 
           concat<span class="token punctuation">(</span>
               <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
               <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
               <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
           <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
    <span class="token keyword">from</span> Terms
<span class="token punctuation">)</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>group_concat<span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token keyword">order</span> <span class="token keyword">by</span> power <span class="token keyword">desc</span> separator <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'=0'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> equation
<span class="token keyword">from</span> tmp
</code></pre> 
<h4><a id="_81"></a>代码分析</h4> 
<p>第一步，根据要求列出对应的式子进行输出，power 是为了之后拼接使用</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> power<span class="token punctuation">,</span> 
       concat<span class="token punctuation">(</span>
           <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
<span class="token keyword">from</span> Terms
</code></pre> 
<pre><code>| power | value |
| ----- | ----- |
| 2     | +1X^2 |
| 1     | -4X   |
| 0     | +2    |
</code></pre> 
<p>第二步，使用 group_concat 进行拼接，拼接字符使用空字符串就行，记住得根据 power 倒序进行拼接</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span>group_concat<span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token keyword">order</span> <span class="token keyword">by</span> power <span class="token keyword">desc</span> separator <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'=0'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> equation
<span class="token keyword">from</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> power<span class="token punctuation">,</span> 
	       concat<span class="token punctuation">(</span>
	           <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
	       <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
	<span class="token keyword">from</span> Terms
<span class="token punctuation">)</span> <span class="token keyword">AS</span> one
</code></pre> 
<h4><a id="_power_112"></a>说一下为什么需要 power（易错点）</h4> 
<p>假设模拟数据</p> 
<table><thead><tr><th>power</th><th>factor</th></tr></thead><tbody><tr><td>67</td><td>12</td></tr><tr><td>82</td><td>54</td></tr></tbody></table> 
<p>第一步，不根据 power 排序（例子里面是顺序，也可能乱序）和根据 power 倒序两种情况，都不输出 power</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span>
           <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
<span class="token keyword">from</span> Terms
</code></pre> 
<pre><code>| value   |
| ------- |
| +12X^67 |
| +54X^82 |
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span>
           <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
           <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
<span class="token keyword">from</span> Terms
<span class="token keyword">order</span> <span class="token keyword">by</span> power <span class="token keyword">desc</span>
</code></pre> 
<pre><code>| value   |
| ------- |
| +54X^82 |
| +12X^67 |
</code></pre> 
<p>第二步，正常去使用 group_concat 进行拼接（对应第一步两种情况）</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span>group_concat<span class="token punctuation">(</span><span class="token keyword">value</span> separator <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'=0'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> equation
<span class="token keyword">from</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> concat<span class="token punctuation">(</span>
        <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
    <span class="token keyword">from</span> Terms
<span class="token punctuation">)</span> <span class="token keyword">AS</span> one
</code></pre> 
<pre><code>| equation         |
| ---------------- |
| +12X^67+54X^82=0 |
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span>group_concat<span class="token punctuation">(</span><span class="token keyword">value</span> separator <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'=0'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> equation
<span class="token keyword">from</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> concat<span class="token punctuation">(</span>
        <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
        <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
    <span class="token keyword">from</span> Terms
    <span class="token keyword">order</span> <span class="token keyword">by</span> power <span class="token keyword">desc</span>
<span class="token punctuation">)</span> <span class="token keyword">AS</span> one
</code></pre> 
<pre><code>| equation         |
| ---------------- |
| +12X^67+54X^82=0 |
</code></pre> 
<p>我们如果改成输出 power，在 group_concat 函数里进行排序</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> concat<span class="token punctuation">(</span>group_concat<span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token keyword">order</span> <span class="token keyword">by</span> power <span class="token keyword">desc</span> separator <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'=0'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> equation
<span class="token keyword">from</span> <span class="token punctuation">(</span>
	<span class="token keyword">select</span> power<span class="token punctuation">,</span>
           concat<span class="token punctuation">(</span>
               <span class="token keyword">IF</span><span class="token punctuation">(</span>factor <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> factor<span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'+'</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
               <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
               <span class="token keyword">IF</span><span class="token punctuation">(</span>power <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> concat<span class="token punctuation">(</span><span class="token string">'^'</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">)</span>
           <span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">value</span>
    <span class="token keyword">from</span> Terms
<span class="token punctuation">)</span>
</code></pre> 
<pre><code>| equation         |
| ---------------- |
| +54X^82+12X^67=0 |
</code></pre> 
<p>从结果来看，我们很容易发现一个点，在使用 group_concat 之前提前使用排序是没有效果的，需要在 group_concat 函数中进行使用，这个需要特别注意。</p> 
<h4><a id="_203"></a>用法可参考我以前文章</h4> 
<p><a href="https://blog.csdn.net/weixin_50223520/article/details/134503582">【MySQL】CONCAT、CONCAT_WS、GROUP_CONCAT 函数用法</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/68565c55730ce1071b82f60b6841ac53/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何在鼠标点击指定元素以外的元素时 触发事件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dd9fdcd1faf184ce33ef03f5dce7bfcb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">有趣之matlab-烟花</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
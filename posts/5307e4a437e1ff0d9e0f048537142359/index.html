<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Raspberry Pi的CODESYS PLC控制器 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Raspberry Pi的CODESYS PLC控制器" />
<meta property="og:description" content="使用树莓派制作一个CODESYS的PLC控制器 树莓派上实现控制器1. 安装CodeSys编程环境1.1 下载CODESYS1.2 安装CODESYS开发环境1.3 运行CODESYS开发环境 2. 运行CODESYS开发环境2.1 创建项目2.2 编辑程序2.3 编译程序2.4 下载程序 3. 运行结果3.1 接口3.2 可视化3.3 支持的现场总线 4. 后续 树莓派上实现控制器 大家对树莓派都不陌生，可以作为一个微型计算机，使用SSH可以在计算机上编辑，如果有支持HDMI的显示器，有USB鼠标和键盘就可以像一个计算机一样使用。有LibreOffice做表格和文字处理等。一个树莓派的界面如下：
介绍树莓派的文章都很多了，在这里不做赘述了，主要介绍使用一个树莓派来作为一个PLC及采取的Codesys来编辑树莓派PLC。其实就是在树莓派上运行一个CodeSys的runtime。实现一个PLC可以完成的全部的功能。
1. 安装CodeSys编程环境 首先要在计算机上安装CodeSys的PLC编辑的软件。
1.1 下载CODESYS 软件的英文名称是CODESYS开发系统：
可以看到，开发系统有支持32位的，也有支持64位。我这里选择了64位的系统。下载需要有一个账户，这个软件是免费的。所以在英文网站上先注册账户，然后下载就可以了。
下载首先是下载一个程序，如图：
名称：CODESYS 64 3.5.17.0.exe
1.2 安装CODESYS开发环境 双击上面的CODESYS 64 3.5.17.0.exe开始安装，时间比较长。要有耐心，一定要关闭防病毒的软件，我装了360安全卫士，关闭。然后安装。不然在过程中总是问要不要允许安装。安装完成了就可以运行CODESYS 3.5 SP17，我计算机上的图标如下：
1.3 运行CODESYS开发环境 运行的界面如上。先不要着急建立系统，在工具栏目上选择包管理器，如图：
点击包管理器及选择安装，出现下面的画面，这是我已经下载的包。要安装的包有两个：
CODESYS Edge Gateway for Linux 4.1.0.0.packageCODESYS Control for Raspberry PI 4.1.0.0.package 在树莓派的包安装时需要这个Edge Gateway，我看早一个版本的还不需要这个Edge Gateway安装。
安装完成后就可以进行对树莓派进行编程了。
2. 运行CODESYS开发环境 2.1 创建项目 在CODESYS环境下选择新建一个树莓派的控制器的项目。
我们选择一个名称为RASP002的项目，采用标准项目的模板。然后确定。
在下面的画面中我们可以选择要建立的项目的硬件类型。
在这其中可以看到有许多种的硬件可以选择。最简单的是选择一个CODESYS Control Win V3 x64的项目。这个项目是在我们的电脑上创建一个软PLC。当然，如果没有许可证，这个PLC运行两个小时就会退出。我们现在有了CODESYS Control for Raspberry Pi, 在这里选择这个设备。选择了以后剩下的事情就可以让计算机来工作了，要有大约1分钟的时间，给我们创建了这个项目。如图：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5307e4a437e1ff0d9e0f048537142359/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-04T19:49:29+08:00" />
<meta property="article:modified_time" content="2021-07-04T19:49:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Raspberry Pi的CODESYS PLC控制器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>使用树莓派制作一个CODESYS的PLC控制器</h4> 
 <ul><li><a href="#_1" rel="nofollow">树莓派上实现控制器</a></li><li><a href="#1_CodeSys_6" rel="nofollow">1. 安装CodeSys编程环境</a></li><li><ul><li><a href="#11_CODESYS_8" rel="nofollow">1.1 下载CODESYS</a></li><li><a href="#12_CODESYS_16" rel="nofollow">1.2 安装CODESYS开发环境</a></li><li><a href="#13_CODESYS_19" rel="nofollow">1.3 运行CODESYS开发环境</a></li></ul> 
  </li><li><a href="#2_CODESYS_33" rel="nofollow">2. 运行CODESYS开发环境</a></li><li><ul><li><a href="#21__34" rel="nofollow">2.1 创建项目</a></li><li><a href="#22__43" rel="nofollow">2.2 编辑程序</a></li><li><a href="#23__47" rel="nofollow">2.3 编译程序</a></li><li><a href="#24__49" rel="nofollow">2.4 下载程序</a></li></ul> 
  </li><li><a href="#3__54" rel="nofollow">3. 运行结果</a></li><li><ul><li><a href="#31__57" rel="nofollow">3.1 接口</a></li><li><a href="#32__66" rel="nofollow">3.2 可视化</a></li><li><a href="#33__68" rel="nofollow">3.3 支持的现场总线</a></li></ul> 
  </li><li><a href="#4__81" rel="nofollow">4. 后续</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>树莓派上实现控制器</h2> 
<p>大家对树莓派都不陌生，可以作为一个微型计算机，使用SSH可以在计算机上编辑，如果有支持HDMI的显示器，有USB鼠标和键盘就可以像一个计算机一样使用。有LibreOffice做表格和文字处理等。一个树莓派的界面如下：<br> <img src="https://images2.imgbox.com/a9/91/iS2ywV3a_o.png" alt="在这里插入图片描述"><br> 介绍树莓派的文章都很多了，在这里不做赘述了，主要介绍使用一个树莓派来作为一个PLC及采取的Codesys来编辑树莓派PLC。其实就是在树莓派上运行一个CodeSys的runtime。实现一个PLC可以完成的全部的功能。</p> 
<h2><a id="1_CodeSys_6"></a>1. 安装CodeSys编程环境</h2> 
<p>首先要在计算机上安装CodeSys的PLC编辑的软件。</p> 
<h3><a id="11_CODESYS_8"></a>1.1 下载CODESYS</h3> 
<p>软件的英文名称是CODESYS开发系统：<br> <img src="https://images2.imgbox.com/7c/71/4r48PNf8_o.png" alt="在这里插入图片描述"><br> 可以看到，开发系统有支持32位的，也有支持64位。我这里选择了64位的系统。下载需要有一个账户，这个软件是免费的。所以在英文网站上先注册账户，然后下载就可以了。<br> 下载首先是下载一个程序，如图：<br> <img src="https://images2.imgbox.com/29/0e/WASAx1we_o.png" alt="在这里插入图片描述"><br> 名称：CODESYS 64 3.5.17.0.exe</p> 
<h3><a id="12_CODESYS_16"></a>1.2 安装CODESYS开发环境</h3> 
<p>双击上面的CODESYS 64 3.5.17.0.exe开始安装，时间比较长。要有耐心，一定要关闭防病毒的软件，我装了360安全卫士，关闭。然后安装。不然在过程中总是问要不要允许安装。安装完成了就可以运行CODESYS 3.5 SP17，我计算机上的图标如下：<br> <img src="https://images2.imgbox.com/ac/3c/CKNUhcYb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13_CODESYS_19"></a>1.3 运行CODESYS开发环境</h3> 
<p><img src="https://images2.imgbox.com/60/7d/Df92K24t_o.png" alt="在这里插入图片描述"><br> 运行的界面如上。先不要着急建立系统，在工具栏目上选择包管理器，如图：<br> <img src="https://images2.imgbox.com/2c/23/XVViuh7c_o.png" alt="在这里插入图片描述"></p> 
<p>点击包管理器及选择安装，出现下面的画面，这是我已经下载的包。要安装的包有两个：</p> 
<ol><li>CODESYS Edge Gateway for Linux 4.1.0.0.package</li><li>CODESYS Control for Raspberry PI 4.1.0.0.package</li></ol> 
<p>在树莓派的包安装时需要这个Edge Gateway，我看早一个版本的还不需要这个Edge Gateway安装。<br> <img src="https://images2.imgbox.com/bf/90/Sf4KjzjQ_o.png" alt="在这里插入图片描述"></p> 
<p>安装完成后就可以进行对树莓派进行编程了。</p> 
<h2><a id="2_CODESYS_33"></a>2. 运行CODESYS开发环境</h2> 
<h3><a id="21__34"></a>2.1 创建项目</h3> 
<p>在CODESYS环境下选择新建一个树莓派的控制器的项目。<br> <img src="https://images2.imgbox.com/b8/84/yixxrihR_o.png" alt="在这里插入图片描述"><br> 我们选择一个名称为RASP002的项目，采用标准项目的模板。然后确定。<br> <img src="https://images2.imgbox.com/21/c2/gWYiAHFc_o.png" alt="在这里插入图片描述"><br> 在下面的画面中我们可以选择要建立的项目的硬件类型。<br> <img src="https://images2.imgbox.com/1a/91/2rCD3rhX_o.png" alt="在这里插入图片描述"><br> 在这其中可以看到有许多种的硬件可以选择。最简单的是选择一个CODESYS Control Win V3 x64的项目。这个项目是在我们的电脑上创建一个软PLC。当然，如果没有许可证，这个PLC运行两个小时就会退出。我们现在有了CODESYS Control for Raspberry Pi, 在这里选择这个设备。选择了以后剩下的事情就可以让计算机来工作了，要有大约1分钟的时间，给我们创建了这个项目。如图：<br> <img src="https://images2.imgbox.com/b5/80/Z33esrlj_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22__43"></a>2.2 编辑程序</h3> 
<p>在这里我们要简单的编辑一下程序，双击页面中的PLC_PRG. 出现下面的画面，先命名一个变量，在PLC_PRG中声明变量。在程序部分做一个累加的程序，判断如果是大于1000，将变量变为0.</p> 
<p><img src="https://images2.imgbox.com/b7/a4/zvCIU4Cc_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23__47"></a>2.3 编译程序</h3> 
<p>在下载程序前要对程序进行编译，在菜单栏上选择编译-生成代码。这一步就完成了。</p> 
<h3><a id="24__49"></a>2.4 下载程序</h3> 
<p>编译没有问题就可以下载程序，下载程序可以在工具栏上选择在线。这时需要对设备进行设置，我知道我的Raspberry的IP地址，不知道的可以在Raspberry PI上查看。用Linux的ifconfig命令来查看。得到的IP地址是192.168.32.164<br> <img src="https://images2.imgbox.com/a3/16/Cym6eC4k_o.png" alt="在这里插入图片描述"><br> 这个时候会出现一个上面的窗口，不知道在那个地方定义的了。我的用户名是Admin，密码：xxxxxx。输入，OK<br> 下载，运行。</p> 
<h2><a id="3__54"></a>3. 运行结果</h2> 
<p><img src="https://images2.imgbox.com/cb/38/Opat0oNc_o.png" alt="在这里插入图片描述"><br> 一个PLC就生成了，可以对GPIO，I2C设备及SPI等机型编程。为应用提供了非常底层的联系，同样的，CODESYS Raspberry PI还支持如下的应用：</p> 
<h3><a id="31__57"></a>3.1 接口</h3> 
<p>CODESYS设备描述支持以下组件：<br> · CODESYS OPC UA服务器，作为用于数据交换的完整版本<br> · 通过EL6751网关的CANopen<br> · 树莓派相机<br> · I²C接口，带有SenseHat，SRF02，Adafruit PWM，MPU6050陀螺仪，MPU9150陀螺仪，AK8975罗盘<br> · SPI接口，带有MCP3008，MCP23S17，PiFace Digital，PiFace控制显示<br> · 单线接口，带DS20B18<br> · GPIO通用输入输出</p> 
<h3><a id="32__66"></a>3.2 可视化</h3> 
<p>CODESYS WebVisu，作为完整版本包含在交付的Runtime软件包中。</p> 
<h3><a id="33__68"></a>3.3 支持的现场总线</h3> 
<p>随着运行时软件包的交付，支持以下现场总线：</p> 
<p>· Modbus-TCP 主站/从站<br> · Modbus RTU主站/从站<br> · EtherNet/IP 扫描仪/适配器<br> · PROFINET控制器/设备<br> · EtherCAT主站<br> · CANopen主站/从站<br> · J1939</p> 
<p>所以，控制器的功能还是很强大的。</p> 
<h2><a id="4__81"></a>4. 后续</h2> 
<p>应网友要求，看能不能将包贴在这里供大家使用，没有授权，请大家注意是Codesys公司的产品。需要付费请自觉与codesys联系codesys。<br> https://download.csdn.net/download/weixin_44481398/21379709?spm=1001.2014.3001.5501</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/87b0a7472736efef5e9f2803446bb79b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">四个通用寄存器：AX,BX,CX,DX</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af137da4aa14aea1ef2893bf1840ffdf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">张雪峰分析计算机专业考研学校选择,张雪峰老师：上二本院校，不要选择这几个专业，考研出路也不大...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
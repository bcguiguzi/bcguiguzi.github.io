<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MATLAB与Arcgis技术层面实现城市灯光中心转移可视化 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MATLAB与Arcgis技术层面实现城市灯光中心转移可视化" />
<meta property="og:description" content="一、MATLAB实现夜间灯光数据的灯光中心获取 普遍来说，城市中心被认为是与周边地区相比，拥有较高人口密度、就业规模和经济聚集度的城市区域（Giuliano and Small，1991），是一座城市经济文明的聚集区，是各种社会经济要素在空间上集聚的结果。总的来说，城市中心就是人类活动比周围都要活跃的城市区域（Tammaru，2001），表现在夜间灯光影像上就是高值像元（Chen et al.，2017），即在一定的城市空间范围内，该像元的夜间灯光亮度值比周围的所有像元都要大[6]。
目前大尺度空间的城市中心区域空间边界的确定主要依靠统一的阈值方法，下述方法提取的是中心点[6]。（值得注意的是，根据生活经验来说，独立工厂通常也具有较大的光亮值并且其通常可能被误提取为中心）
（一）MATLAB代码
由于遥感影像本身具备图像值矩阵与坐标元素结构体两部分的复杂性以及研究区四周几乎不存在中心出现的可能性，暂不考虑边界像素的遍历问题，多次采用不同边长方形核实验后，采用25*25核进行遍历。
%获取文件绝对路径 File = &#39;D:\matlab\code\Plight\20202.tif&#39;; %本处提供核大小更改交互（仅支持奇数边长方形核） len = input(&#39;请输入奇数边方形核边长：&#39;); ck = (len-1)/2; %读取tiff文件的影像矩阵与坐标系文件 [A,R] = geotiffread(File); %获取投影坐标系 info = geotiffinfo(&#39;D:\matlab\code\Plight\20202.tif&#39;); [r,c] = size(A); %创建一个与影像矩阵同大小的outPut矩阵 outPut = ones(size(A)); %将output矩阵值全赋为-1，避免与原数据相减时误提取灯光中心 outputR = outPut .*(-1); %处理过程 for i = (ck&#43;1):(r-ck) for j = (ck&#43;1):(c-ck) MatC = A((i-ck):(i&#43;ck),(j-ck):(j&#43;ck)); MatMax = max(MatC(:)); for k = (i-ck):(i&#43;ck) for l = (j-ck):(j&#43;ck) outputR(k,l) = MatMax; end end end end %输出图像 fprintf(&#39;数据处理完毕，正在导出！\n&#39;); geotiffwrite(&#39;centralLight2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/927034c5323f9296ae6fd60f2ac35807/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-04T21:41:18+08:00" />
<meta property="article:modified_time" content="2022-08-04T21:41:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MATLAB与Arcgis技术层面实现城市灯光中心转移可视化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、MATLAB实现夜间灯光数据的灯光中心获取</h2> 
<p>        普遍来说，城市中心被认为是与周边地区相比，拥有较高人口密度、就业规模和经济聚集度的城市区域（Giuliano and Small，1991），是一座城市经济文明的聚集区，是各种社会经济要素在空间上集聚的结果。总的来说，城市中心就是人类活动比周围都要活跃的城市区域（Tammaru，2001），表现在夜间灯光影像上就是高值像元（Chen et al.，2017），即在一定的城市空间范围内，该像元的夜间灯光亮度值比周围的所有像元都要大[6]。</p> 
<p>        目前大尺度空间的城市中心区域空间边界的确定主要依靠统一的阈值方法，下述方法提取的是中心点[6]。（<span style="color:#fe2c24;">值得注意的是，根据生活经验来说，独立工厂通常也具有较大的光亮值并且其通常可能被误提取为中心</span>）</p> 
<p>（一）MATLAB代码</p> 
<p>        由于遥感影像本身具备图像值矩阵与坐标元素结构体两部分的复杂性以及研究区四周几乎不存在中心出现的可能性，暂不考虑边界像素的遍历问题，多次采用不同边长方形核实验后，采用25*25核进行遍历。</p> 
<pre><code>%获取文件绝对路径
File = 'D:\matlab\code\Plight\20202.tif';
%本处提供核大小更改交互（仅支持奇数边长方形核）
len = input('请输入奇数边方形核边长：');
ck = (len-1)/2;
%读取tiff文件的影像矩阵与坐标系文件
[A,R] = geotiffread(File);
%获取投影坐标系
info = geotiffinfo('D:\matlab\code\Plight\20202.tif');
[r,c] = size(A);
%创建一个与影像矩阵同大小的outPut矩阵
outPut = ones(size(A));
%将output矩阵值全赋为-1，避免与原数据相减时误提取灯光中心
outputR = outPut .*(-1);
%处理过程
for i = (ck+1):(r-ck)
    for j = (ck+1):(c-ck)
        MatC = A((i-ck):(i+ck),(j-ck):(j+ck));
        MatMax = max(MatC(:));
        for k = (i-ck):(i+ck)
            for l = (j-ck):(j+ck)
                outputR(k,l) = MatMax;
            end
        end
    end
end
%输出图像
fprintf('数据处理完毕，正在导出！\n');
geotiffwrite('centralLight2.tif',outputR,R,'GeoKeyDirectoryTag',info.GeoTIFFTags.GeoKeyDirectoryTag);
fprintf('数据导出完毕！');
</code></pre> 
<p>（二）灯光中心输出影像与原始影像做差值(可基于ENVI中的Band Math来做)</p> 
<p>        <span style="color:#fe2c24;">(abs(灯光中心影像-原始影像) lt 0.000009)*原始影像</span></p> 
<p>        差值影像中像元值为0（除背景值）的像元即为灯光中心（<span style="color:#fe2c24;">此处需要考虑到浮点数运算必须有个误差限比较</span>）。</p> 
<h2>二、Arcgis标准差椭圆和中心迁移轨迹制作</h2> 
<p>（一）栅格转矢量点数据</p> 
<p>        1、避免按栅格大小直接转点，首先将背景值点去除</p> 
<p>        spatial analyst tools(空间分析工具) -&gt;extraction（提取）-&gt;extract by attributes(按属性提取) -&gt;按要求筛选出符合要求的栅格即可。</p> 
<p>        2、按照属性转点</p> 
<p>        Conversion Tools(转换工具) -&gt; From Raster(来源栅格) -&gt;Raster to Point(栅格转矢量点) -&gt;可将栅格DN值作为属性转入。</p> 
<p>（二）标准差椭圆</p> 
<p>        Spatial Statistics Tools(空间统计工具) -&gt; 度量地理分布 -&gt;方向分布（标准差椭圆）-&gt;可按点属性值加权绘制标准差椭圆。</p> 
<p>（三）显示时序的标准差椭圆</p> 
<p>        spatial statistics Tools -&gt;Measuring Geographic Distributions -&gt;Mean Center（获取均值中心）；</p> 
<p>        GeoProcessing(标题栏下工具栏) -&gt;Merge (将时序中心点组合为一个图层)；</p> 
<p>        Data Management Tools -&gt;Feature(要素) -&gt;Points to Line（点集转线）。</p> 
<p class="img-center"><img alt="" height="345" src="https://images2.imgbox.com/d6/97/KBMY8pFO_o.png" width="382"></p> 
<p style="text-align:center;"> 上图来源[6]：Bilibili平台的进击的脊梁小白</p> 
<p style="text-align:center;">（注：该图作为标准制图展示，如有侵权请联系本人删除）</p> 
<h2>参考资料：</h2> 
<p>[1]<a href="https://blog.csdn.net/weixin_43342986/article/details/102936380" title="获得人生第一桶金对遥感的一些思考_N某人的博客-CSDN博客">获得人生第一桶金对遥感的一些思考_N某人的博客-CSDN博客</a>(MATLAB)</p> 
<p>[2]<a href="https://blog.csdn.net/XinemaChen/article/details/124024805" title="MATLAB读取及存储geotiff_就是一只白的博客-CSDN博客_matlab读geotif">MATLAB读取及存储geotiff_就是一只白的博客-CSDN博客_matlab读geotif</a></p> 
<p>[3]<a href="https://blog.csdn.net/weixin_44725365/article/details/124110001" title="DMSP/OLS等夜间灯光数据建成区扩张时空分析之标准差椭圆_端木宛白的GIS课堂的博客-CSDN博客_椭圆分布">DMSP/OLS等夜间灯光数据建成区扩张时空分析之标准差椭圆_端木宛白的GIS课堂的博客-CSDN博客_椭圆分布</a></p> 
<p>[4]<a href="https://blog.csdn.net/weixin_44389786/article/details/124078842?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-2-124078842-blog-123427450.pc_relevant_vip_default&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=5" title="arcgis 栅格转点时抹去value值为0的区域_smartian-_-的博客-CSDN博客_arcgis删除0值">arcgis 栅格转点时抹去value值为0的区域_smartian-_-的博客-CSDN博客_arcgis删除0值</a></p> 
<p>[5]<a href="https://www.bilibili.com/video/BV1qN4y1j7rs/?spm_id_from=333.788.recommend_more_video.-1&amp;vd_source=a17b26e6f5dce43e0b4b220aeb13a517" rel="nofollow" title="重心迁移1——重心迁移图绘制_哔哩哔哩_bilibili">重心迁移1——重心迁移图绘制_哔哩哔哩_bilibili</a></p> 
<p>[6]<a href="https://www.bilibili.com/video/BV1cg411f7cg/?spm_id_from=333.788.recommend_more_video.1&amp;vd_source=a17b26e6f5dce43e0b4b220aeb13a517" rel="nofollow" title="重心迁移2——标准差椭圆和重心迁移补充_哔哩哔哩_bilibili">重心迁移2——标准差椭圆和重心迁移补充_哔哩哔哩_bilibili</a></p> 
<p>[7]葛伟.基于NPP-VIIRS夜间灯光数据的中国城市中心识别及其时空格局研究[D].重庆：西南大学，2019.</p> 
<p>[8]<a href="https://blog.csdn.net/themingyi/article/details/84842473" title="Matlab 读取—处理—保存遥感影像（带有地理信息的图像）_themingyi的博客-CSDN博客_geotiffread">Matlab 读取—处理—保存遥感影像（带有地理信息的图像）_themingyi的博客-CSDN博客_geotiffread</a></p> 
<p>[9]<a href="https://blog.csdn.net/allenlu2008/article/details/47780405" title="白话空间统计之九：方向分布（标准差椭圆）修正版_虾神说D的博客-CSDN博客_标准差椭圆分析arcgis​​​​​​">白话空间统计之九：方向分布（标准差椭圆）修正版_虾神说D的博客-CSDN博客_标准差椭圆分析arcgis​​​​​​</a></p> 
<p>[10]<a href="https://blog.csdn.net/weixin_36301419/article/details/113891164" title="arcgis 将栅格值提取到点_Arcgis中怎么把栅格数据中大于某值的区域提取出来_不许肥的博客-CSDN博客">arcgis 将栅格值提取到点_Arcgis中怎么把栅格数据中大于某值的区域提取出来_不许肥的博客-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/359e1f2afc56a843e491e0580661308f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JSON字符串与List集合相互转换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/38a184a27528b2fe17f1a60eb0d52292/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">遥遥领先一键导出微信小程序、UNIAPP低代码源码使用介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
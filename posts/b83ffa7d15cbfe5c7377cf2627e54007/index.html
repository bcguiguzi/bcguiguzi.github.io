<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Codeforces 1312 D. Count the Arrays (组合数学) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Codeforces 1312 D. Count the Arrays (组合数学)" />
<meta property="og:description" content="E. Array Shrinking
time limit per test2 seconds
memory limit per test256 megabytes
inputstandard input
outputstandard output
You are given an array a1,a2,…,an. You can perform the following operation any number of times:
Choose a pair of two neighboring equal elements ai=ai&#43;1 (if there is at least one such pair).
Replace them by one element with value ai&#43;1.
After each such operation, the length of the array will decrease by one (and elements are renumerated accordingly)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/b83ffa7d15cbfe5c7377cf2627e54007/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-10T10:38:53+08:00" />
<meta property="article:modified_time" content="2020-03-10T10:38:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Codeforces 1312 D. Count the Arrays (组合数学)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>E. Array Shrinking<br> time limit per test2 seconds<br> memory limit per test256 megabytes<br> inputstandard input<br> outputstandard output<br> You are given an array a1,a2,…,an. You can perform the following operation any number of times:</p> 
<p>Choose a pair of two neighboring equal elements ai=ai+1 (if there is at least one such pair).<br> Replace them by one element with value ai+1.<br> After each such operation, the length of the array will decrease by one (and elements are renumerated accordingly). What is the minimum possible length of the array a you can get?</p> 
<p>Input<br> The first line contains the single integer n (1≤n≤500) — the initial length of the array a.</p> 
<p>The second line contains n integers a1,a2,…,an (1≤ai≤1000) — the initial array a.</p> 
<p>Output<br> Print the only integer — the minimum possible length you can get after performing the operation described above any number of times.</p> 
<p>Examples<br> inputCopy<br> 5<br> 4 3 2 2 3<br> outputCopy<br> 2<br> inputCopy<br> 7<br> 3 3 4 4 4 3 3<br> outputCopy<br> 2<br> inputCopy<br> 3<br> 1 3 5<br> outputCopy<br> 3<br> inputCopy<br> 1<br> 1000<br> outputCopy<br> 1<br> Note<br> In the first test, this is one of the optimal sequences of operations: 4 3 2 2 3 → 4 3 3 3 → 4 4 3 → 5 3.</p> 
<p>In the second test, this is one of the optimal sequences of operations: 3 3 4 4 4 3 3 → 4 4 4 4 3 3 → 4 4 4 4 4 → 5 4 4 4 → 5 5 4 → 6 4.</p> 
<p>In the third and fourth tests, you can’t perform the operation at all.</p> 
<p><strong>题意：</strong><br> 在m个数里面挑出n个数，n个数要先递增后递减，然后必须有两个一样的数，剩下的数各不相同。</p> 
<p><strong>思路:</strong></p> 
<ol><li>很明显是一道组合数学。</li><li>首先在m里面挑出n-1个数就是Cm取n-1。</li><li>然后是保证最大的那个元素不在两边，剩下的n-2个元素有n-3个不同元素可以放在最大的元素的左边或者右边，所以是（n-2） * qpow(2,n-3) 。</li><li>因为这里n的范围是大于等于2的，而快速幂无法处理负幂，所以这里可以采用特判n=2或者用逆元处理，见代码处。</li><li>还有就是快速幂不能带快速乘，具体原因不知，比赛时因快速乘超时了一发，重写快速幂才过。</li><li>如果有什么讲的不清楚的地方欢迎提出来，欢迎交流~</li></ol> 
<p><strong>代码:</strong></p> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;bits/stdc++.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">define</span> ll long long</span>
<span class="token macro property">#<span class="token directive keyword">define</span> inf 0x3f3f3f3f</span>
<span class="token macro property">#<span class="token directive keyword">define</span> mod 998244353</span>
<span class="token macro property">#<span class="token directive keyword">define</span> PI acos(-1)</span>
<span class="token macro property">#<span class="token directive keyword">define</span> fi first</span>
<span class="token macro property">#<span class="token directive keyword">define</span> se second</span>
<span class="token macro property">#<span class="token directive keyword">define</span> lowbit(x) (x&amp;(-x))</span>
<span class="token macro property">#<span class="token directive keyword">define</span> mp make_pair</span>
<span class="token macro property">#<span class="token directive keyword">define</span> pb push_back</span>
<span class="token macro property">#<span class="token directive keyword">define</span> ins insert</span>
<span class="token macro property">#<span class="token directive keyword">define</span> si size()</span>
<span class="token macro property">#<span class="token directive keyword">define</span> E exp(1.0)</span>
<span class="token macro property">#<span class="token directive keyword">define</span> fixed cout.setf(ios::fixed)</span>
<span class="token macro property">#<span class="token directive keyword">define</span> fixeds(x) setprecision(x)</span>
<span class="token macro property">#<span class="token directive keyword">pragma</span> GCC optimize(2)</span>
using namespace std<span class="token punctuation">;</span>
<span class="token keyword">inline</span> ll <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>ll s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">char</span> ch<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>ch<span class="token operator">&lt;</span><span class="token string">'0'</span><span class="token operator">||</span>ch<span class="token operator">&gt;</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">if</span><span class="token punctuation">(</span>ch<span class="token operator">==</span><span class="token string">'-'</span><span class="token punctuation">)</span>w<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>ch<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>ch<span class="token operator">&gt;=</span><span class="token string">'0'</span><span class="token operator">&amp;&amp;</span>ch<span class="token operator">&lt;=</span><span class="token string">'9'</span><span class="token punctuation">)</span> s<span class="token operator">=</span>s<span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span>ch<span class="token operator">-</span><span class="token string">'0'</span><span class="token punctuation">,</span>ch<span class="token operator">=</span><span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> s<span class="token operator">*</span>w<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">put1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"YES"</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">put2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"NO"</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">put3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token function">puts</span><span class="token punctuation">(</span><span class="token string">"-1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token comment">//��=acos(L/2R);</span>
<span class="token comment">//void debug1(){ cout&lt;&lt;"I CAN AC"&lt;&lt;endl;}//void debug2(){printf("T A T\n");}</span>
ll <span class="token function">qp</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span>ll b<span class="token punctuation">,</span> ll p<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>ll ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token operator">&amp;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans<span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token operator">%</span>p<span class="token punctuation">;</span><span class="token operator">--</span>b<span class="token punctuation">;</span><span class="token punctuation">}</span>a <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token operator">%</span>p<span class="token punctuation">;</span>b <span class="token operator">&gt;&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">return</span> ans<span class="token operator">%</span>p<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> manx<span class="token operator">=</span><span class="token number">1e3</span><span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">;</span>

ll <span class="token function">Inv</span><span class="token punctuation">(</span>ll x<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token function">qp</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>mod<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>mod<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
ll <span class="token function">Cal</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span>ll m<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token operator">&gt;</span>n<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	ll ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> ans<span class="token operator">=</span>ans<span class="token operator">*</span><span class="token function">Inv</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token operator">*</span><span class="token punctuation">(</span>n<span class="token operator">-</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
	<span class="token keyword">return</span> ans<span class="token operator">%</span>mod<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ll n<span class="token operator">=</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>m<span class="token operator">=</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ll ans<span class="token operator">=</span><span class="token function">Cal</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ans<span class="token operator">%</span><span class="token operator">=</span>mod<span class="token punctuation">;</span>
    <span class="token comment">/*特判
    if(n&gt;2) ans=ans*qp(2,n-3,mod)%mod*(n-2)%mod;
    else ans=0;
    */</span>
    <span class="token comment">//逆元</span>
    ans<span class="token operator">=</span>ans<span class="token operator">*</span><span class="token function">qp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>mod<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token operator">*</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token operator">*</span><span class="token function">Inv</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ans<span class="token operator">=</span><span class="token punctuation">(</span>ans<span class="token operator">+</span>mod<span class="token punctuation">)</span><span class="token operator">%</span>mod<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lld\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/27795877edd0b170fa20734f207ad14d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CodeForces - 1312D Count the Arrays(组合数学)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a9a2735bb4a219383544d51e74904d50/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">codeforces1312 D. Count the Arrays（推导 &#43; 组合数）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
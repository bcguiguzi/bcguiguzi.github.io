<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux RPM包安装、卸载和升级 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux RPM包安装、卸载和升级" />
<meta property="og:description" content="我们以安装 apache 程序为例。因为后续章节还会介绍使用源码包的方式安装 apache 程序，读者可以直观地感受到源码包和 RPM 包的区别。
RPM包默认安装路径 通常情况下，RPM 包采用系统默认的安装路径，所有安装文件会按照类别分散安装到表 1 所示的目录中。
RPM 包的默认安装路径是可以通过命令查询的。
除此之外，RPM 包也支持手动指定安装路径，但此方式并不推荐。因为一旦手动指定安装路径，所有的安装文件会集中安装到指定位置，且系统中用来查询安装路径的命令也无法使用（需要进行手工配置才能被系统识别），得不偿失。
与 RPM 包不同，源码包的安装通常采用手动指定安装路径（习惯安装到 /usr/local/ 中）的方式。既然安装路径不同，同一 apache 程序的源码包和 RPM 包就可以安装到一台 Linux 服务器上（但同一时间只能开启一个，因为它们需要占用同一个 80 端口）。
实际情况中，一台服务器几乎不会同时包含两个 apache 程序，管理员不好管理，还会占用过多的服务器磁盘空间。
RPM 包的安装 安装 RPM 的命令格式为：
[root@localhost ~]# rpm -ivh 包全名
注意一定是包全名。涉及到包全名的命令，一定要注意路径，可能软件包在光盘中，因此需提前做好设备的挂载工作。
此命令中各选项参数的含义为：
-i：安装（install）;
-v：显示更详细的信息（verbose）;
-h：打印 #，显示安装进度（hash）;
例如，使用此命令安装 apache 软件包，如下所示：
[root@localhost ~]# rpm -ivh \ /mnt/cdrom/Packages/httpd-2.2.15-15.el6.centos.1.i686.rpm Preparing... #################### [100%] 1:httpd #################### [100%] 注意，直到出现两个 100% 才是真正的安装成功，第一个 100% 仅表示完成了安装准备工作。此命令还可以一次性安装多个软件包，仅需将包全名用空格分开即可，如下所示：
[root@localhost ~]# rpm -ivh a." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/ebe16524c61b96a25440c9a09972c7f8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-11T19:06:39+08:00" />
<meta property="article:modified_time" content="2023-11-11T19:06:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux RPM包安装、卸载和升级</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>我们以安装 apache 程序为例。因为后续章节还会介绍使用源码包的方式安装 apache 程序，读者可以直观地感受到源码包和 RPM 包的区别。</p> 
<p></p> 
<p class="img-center"><img alt="" height="580" src="https://images2.imgbox.com/7f/d0/le3jqo5E_o.png" width="1200"></p> 
<p></p> 
<h3>RPM包默认安装路径</h3> 
<p>通常情况下，RPM 包采用系统默认的安装路径，所有安装文件会按照类别分散安装到表 1 所示的目录中。</p> 
<p></p> 
<p class="img-center"><img alt="" height="304" src="https://images2.imgbox.com/ec/7e/OvGyk5Wz_o.png" width="472"></p> 
<p>RPM 包的默认安装路径是可以通过命令查询的。</p> 
<p></p> 
<p class="img-center"><img alt="" height="500" src="https://images2.imgbox.com/c7/48/R8rFF1YL_o.png" width="577"></p> 
<p>除此之外，RPM 包也支持手动指定安装路径，但此方式并不推荐。因为一旦手动指定安装路径，所有的安装文件会集中安装到指定位置，且系统中用来查询安装路径的命令也无法使用（需要进行手工配置才能被系统识别），得不偿失。</p> 
<p>与 RPM 包不同，源码包的安装通常采用手动指定安装路径（习惯安装到 /usr/local/ 中）的方式。既然安装路径不同，同一 apache 程序的源码包和 RPM 包就可以安装到一台 Linux 服务器上（但同一时间只能开启一个，因为它们需要占用同一个 80 端口）。</p> 
<p>实际情况中，一台服务器几乎不会同时包含两个 apache 程序，管理员不好管理，还会占用过多的服务器磁盘空间。</p> 
<p></p> 
<h3>RPM 包的安装</h3> 
<p>安装 RPM 的命令格式为：</p> 
<blockquote> 
 <p>[root@localhost ~]# rpm -ivh 包全名</p> 
</blockquote> 
<p>注意一定是包全名。涉及到包全名的命令，一定要注意路径，可能软件包在光盘中，因此需提前做好设备的挂载工作。</p> 
<p>此命令中各选项参数的含义为：</p> 
<p></p> 
<ul><li> <p>-i：安装（install）;</p> </li><li> <p>-v：显示更详细的信息（verbose）;</p> </li><li> <p>-h：打印 #，显示安装进度（hash）;</p> </li></ul> 
<p>例如，使用此命令安装 apache 软件包，如下所示：</p> 
<pre><code>[root@localhost ~]# rpm -ivh \
/mnt/cdrom/Packages/httpd-2.2.15-15.el6.centos.1.i686.rpm
Preparing...
####################
[100%]
1:httpd
####################
[100%]</code></pre> 
<p>注意，直到出现两个 100% 才是真正的安装成功，第一个 100% 仅表示完成了安装准备工作。此命令还可以一次性安装多个软件包，仅需将包全名用空格分开即可，如下所示：</p> 
<p></p> 
<p class="img-center"><img alt="" height="500" src="https://images2.imgbox.com/dd/47/PmVgrxUx_o.png" width="745"></p> 
<blockquote> 
 <p>[root@localhost ~]# rpm -ivh a.rpm b.rpm c.rpm</p> 
</blockquote> 
<p>如果还有其他安装要求（比如强制安装某软件而不管它是否有依赖性），可以通过以下选项进行调整：</p> 
<p></p> 
<ul><li> <p>-nodeps：不检测依赖性安装。软件安装时会检测依赖性，确定所需的底层软件是否安装，如果没有安装则会报错。如果不管依赖性，想强制安装，则可以使用这个选项。注意，这样不检测依赖性安装的软件基本上是不能使用的，所以不建议这样做。</p> </li><li> <p>-replacefiles：替换文件安装。如果要安装软件包，但是包中的部分文件已经存在，那么在正常安装时会报"某个文件已经存在"的错误，从而导致软件无法安装。使用这个选项可以忽略这个报错而覆盖安装。</p> </li><li> <p>-replacepkgs：替换软件包安装。如果软件包已经安装，那么此选项可以把软件包重复安装一遍。</p> </li><li> <p>-force：强制安装。不管是否已经安装，都重新安装。也就是 -replacefiles 和 -replacepkgs 的综合。</p> </li><li> <p>-test：测试安装。不会实际安装，只是检测一下依赖性。</p> </li><li> <p>-prefix：指定安装路径。为安装软件指定安装路径，而不使用默认安装路径。</p> </li></ul> 
<p>apache 服务安装完成后，可以尝试启动：</p> 
<blockquote> 
 <p>[root@localhost ~]# service 服务名 start|stop|restart|status</p> 
</blockquote> 
<p>各参数含义：</p> 
<p></p> 
<ul><li> <p>start：启动服务；</p> </li><li> <p>stop：停止服务；</p> </li><li> <p>restart：重启服务；</p> </li><li> <p>status: 查看服务状态；</p> </li></ul> 
<p>例如：</p> 
<blockquote> 
 <p>[root@localhost ~]# service httpd start #启动apache服务</p> 
</blockquote> 
<p>服务启动后，可以查看端口号 80 是否出现。命令如下：</p> 
<blockquote> 
 <p>[root@localhost ~]# netstat -tlun | grep 80</p> 
 <p>tcp 0 0 :::80:::* LISTEN</p> 
</blockquote> 
<p>也可以在浏览器中输入 Linux 服务器的 IP 地址，访问这个 apache 服务器。目前在 apache 中没有建立任何网页，所以看到的只是测试页</p> 
<p></p> 
<p class="img-center"><img alt="" height="379" src="https://images2.imgbox.com/0e/0c/7vPhbOCW_o.jpg" width="700"></p> 
<p></p> 
<h3>RPM包的升级</h3> 
<p>使用如下命令即可实现 RPM 包的升级：</p> 
<blockquote> 
 <p>[root@localhost ~]# rpm -Uvh 包全名</p> 
</blockquote> 
<p>-U（大写）选项的含义是：如果该软件没安装过则直接安装；若已经安装则升级至最新版本。</p> 
<blockquote> 
 <p>[root@localhost ~]# rpm -Fvh 包全名</p> 
</blockquote> 
<p>-F（大写）选项的含义是：如果该软件没有安装，则不会安装，必须安装有较低版本才能升级。</p> 
<p></p> 
<h3>RPM包的卸载</h3> 
<p>RPM 软件包的卸载要考虑包之间的依赖性。例如，我们先安装的 httpd 软件包，后安装 httpd 的功能模块 mod_ssl 包，那么在卸载时，就必须先卸载 mod_ssl，然后卸载 httpd，否则会报错。</p> 
<blockquote> 
 <p>软件包卸载和拆除大楼是一样的，本来先盖的 2 楼，后盖的 3 楼，那么拆楼时一定要先拆除 3 楼。</p> 
</blockquote> 
<p>如果卸载 RPM 软件不考虑依赖性，执行卸载命令会包依赖性错误，例如：</p> 
<pre><code>[root@localhost ~]# rpm -e httpd
error: Failed dependencies:
httpd-mmn = 20051115 is needed by (installed) mod_wsgi-3.2-1.el6.i686
httpd-mmn = 20051115 is needed by (installed) php-5.3.3-3.el6_2.8.i686
httpd-mmn = 20051115 is needed by (installed) mod_ssl-1:2.2.15-15.el6.
centos.1.i686
httpd-mmn = 20051115 is needed by (installed) mod_perl-2.0.4-10.el6.i686
httpd = 2.2.15-15.el6.centos.1 is needed by (installed) httpd-manual-2.2.
15-15.el6.centos.1 .noarch
httpd is needed by (installed) webalizer-2.21_02-3.3.el6.i686
httpd is needed by (installed) mod_ssl-1:2.2.15-15.el6.centos.1.i686
httpd=0:2.2.15-15.el6.centos.1 is needed by(installed)mod_ssl-1:2.2.15-15.el6.centos.1.i686</code></pre> 
<p>RPM 软件包的卸载很简单，使用如下命令即可：</p> 
<pre><code>[root@localhost ~]# rpm -e 包名</code></pre> 
<p>-e 选项表示卸载，也就是 erase 的首字母。</p> 
<p>RPM 软件包的卸载命令支持使用“-nocteps”选项，即可以不检测依赖性直接卸载，但此方式不推荐大家使用，因为此操作很可能导致其他软件也无法征程使用。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1442330dbc32118de1f51c1b4654e7c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Quartus II 13.0下载安装和HelloWorld</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/064777ad5d6a1083b7b831a5e4792c21/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ModuleNotFoundError: No module named ‘tqdm‘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>cloudcompare插件编写教程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="cloudcompare插件编写教程" />
<meta property="og:description" content="一、简介 首先从cloudcompare（后面简称cc）官网上下载源码，解压后在\plugins\example路径下可以看到名为ExamplePlugin、ExampleIOPlugin、ExampleGLPlugin这三个文件夹，以及一个CMakeLists.txt文件。这三个文件夹都是插件的模板，字面意思上理解，分别是写一般插件、输出输出、显示相关的。
二、修改为自己的插件 下面讲一下一般插件ExamplePlugin的编写细则。首先复制一份ExamplePlugin，更改文件夹名字为自己的插件名，这里就命名为myplugin，然后打开CMakeLists.txt，仿照上面三行，赋值一下，改为自己的插件名，如下所示:
下面，进入myplugin文件夹，然后把里面的命名为ExamplePlugin的文件都更改为myplugin，如下所示：
下面就按照文件顺序进行修改吧，其实整个修改过程并不存在先后顺序，重点只是需要把所有模板的命名都改为自己的插件名而已。在这里，images里面存的是插件的图标图片，可以自己修改图片以及命名，只是后面写路径时候要注意保持一致就好了。
1. CMakeLists.txt 首先，打开CMakeLists.txt，将第13行的ExamplePlugin改为myplugin，第9行和第11行的命名随意，可改可不改，如下所示：
2. info.json 保存，然后打开info.json文件，这个文件主要是写一些插件的描述，这里最重要的是把第4行的&#34;:/CC/plugin/ExamplePlugin/images/icon.png&#34;改为自己的插件图标路径和命名&#34;:/CC/plugin/myplugin/images/icon.png&#34;。在这里，前面的CC并不是真实的路径，感觉像是宏一类的，会在运行时候自动替换为你当前的绝对路径，所以可以不用管它。然后第3行的name的值是插件在cc里的名字，可以自己随意改动，这里就也命名为myplugin了。其他一些信息可以自己按需要设置，这些信息不会对生成插件造成影响。修改后如下所示：
3. myplugin.cpp 下面打开myplugin.cpp，直接在记事本里面，将ExamplePlugin全部替换为myplugin，如下所示：
4. myplugin.h 打开myplugin.h，同理，直接将所有的ExamplePlugin全部替换为myplugin，不过，这里还需要改一个地方，第49行，将Example改为myplugin。这是插件的唯一标识，具体描述直接看46-48行就知道了。
5. myplugin.qrc 最后，打开myplugin.qrc，将第2行的prefix路径修改为自己的路径，在这里，我们应该将ExamplePlugin改为myplugin，如下图所示：
三、编译 好了，到这里一切工作就都已经准备完毕了，接下来就是使用cmake对源码进行编译了，编译的教程可以参考这里。有一点不同的是，在configure之后，generate之前，要先把PLUGIN_MYPLUGIN项目勾上，如下图所示。这个就是刚才我们修改好的myplugin项目了，都改好后点击generate就可以了。
四、功能实现 生成后，打开生成的sln工程，组织如下：
插件功能的实现都是在我们建立的myplugin里面的h和cpp文件中进行的。展开myplugin项目，如下所示：
插件功能实现的接口都是在doAction这个函数里面，可以把它认为是控制台程序中的main函数。如下图所示：
如果将它与main函数类比，那应该就很好理解了。简单的操作你可以直接在这个函数里实现，而复杂的操作，你也可以像控制台程序那样，在myplugin这个工程里新建很多h和cpp文件来进行实现。模板里实现的功能是点击这个plugin后，会在cc底下输出hello这行字样。功能实现以后，将程序改为release x64环境，然后点击顶部菜单栏的生成-&gt;批生成，全部勾上，然后关闭。右键ALL_BUILD工程，然后就是漫长的编译等待了。
ALL_BUILD生成成功后，右键INSTALL工程，点击生成。生成成功后，你就可以在cmake时候指定的生成路径下看到cloudcompare文件夹了：
打开，可以看到里面有cc的exe文件，然后plugins文件夹里有名字为myplugin的dll文件，这个就是你编译生成的插件了。
双击运行exe文件，在打开的cc顶部菜单栏，可以看到自己编写的插件：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/fc2805509ce2f77ba44532b2ffd30f6a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-10T15:03:08+08:00" />
<meta property="article:modified_time" content="2022-07-10T15:03:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">cloudcompare插件编写教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>一、简介</h4> 
<p>  首先从<a href="http://www.cloudcompare.org/" rel="nofollow">cloudcompare</a>（后面简称cc）官网上下载源码，解压后在<code>\plugins\example</code>路径下可以看到名为<code>ExamplePlugin</code>、<code>ExampleIOPlugin</code>、<code>ExampleGLPlugin</code>这三个文件夹，以及一个<code>CMakeLists.txt</code>文件。这三个文件夹都是插件的模板，字面意思上理解，分别是写一般插件、输出输出、显示相关的。<br> <img src="https://images2.imgbox.com/d9/e4/7sKkHwN3_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_3"></a>二、修改为自己的插件</h4> 
<p>  下面讲一下一般插件<code>ExamplePlugin</code>的编写细则。首先复制一份<code>ExamplePlugin</code>，更改文件夹名字为自己的插件名，这里就命名为<code>myplugin</code>，然后打开<code>CMakeLists.txt</code>，仿照上面三行，赋值一下，改为自己的插件名，如下所示:<br> <img src="https://images2.imgbox.com/82/8d/qU2LIrbq_o.png" alt="在这里插入图片描述"><br>   下面，进入<code>myplugin</code>文件夹，然后把里面的命名为<code>ExamplePlugin</code>的文件都更改为<code>myplugin</code>，如下所示：<br> <img src="https://images2.imgbox.com/3d/bd/fzTiL6lm_o.png" alt="在这里插入图片描述"><br>   下面就按照文件顺序进行修改吧，其实整个修改过程并不存在先后顺序，重点只是需要把所有模板的命名都改为自己的插件名而已。在这里，images里面存的是插件的图标图片，可以自己修改图片以及命名，只是后面写路径时候要注意保持一致就好了。</p> 
<h5><a id="1_CMakeListstxt_9"></a>1. CMakeLists.txt</h5> 
<p>  首先，打开<code>CMakeLists.txt</code>，将第13行的<code>ExamplePlugin</code>改为<code>myplugin</code>，第9行和第11行的命名随意，可改可不改，如下所示：<br> <img src="https://images2.imgbox.com/cb/0b/i2zGdXtk_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2_infojson_12"></a>2. info.json</h5> 
<p>  保存，然后打开<code>info.json</code>文件，这个文件主要是写一些插件的描述，这里最重要的是把第4行的<code>":/CC/plugin/ExamplePlugin/images/icon.png"</code>改为自己的插件图标路径和命名<code>":/CC/plugin/myplugin/images/icon.png"</code>。在这里，前面的CC并不是真实的路径，感觉像是宏一类的，会在运行时候自动替换为你当前的绝对路径，所以可以不用管它。然后第3行的<code>name</code>的值是插件在cc里的名字，可以自己随意改动，这里就也命名为<code>myplugin</code>了。其他一些信息可以自己按需要设置，这些信息不会对生成插件造成影响。修改后如下所示：<br> <img src="https://images2.imgbox.com/82/53/zl4edX8D_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_myplugincpp_15"></a>3. myplugin.cpp</h5> 
<p>  下面打开<code>myplugin.cpp</code>，直接在记事本里面，将<code>ExamplePlugin</code>全部替换为<code>myplugin</code>，如下所示：<br> <img src="https://images2.imgbox.com/61/63/6tdahOPs_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4_mypluginh_18"></a>4. myplugin.h</h5> 
<p>  打开<code>myplugin.h</code>，同理，直接将所有的<code>ExamplePlugin</code>全部替换为<code>myplugin</code>，不过，这里还需要改一个地方，第49行，将<code>Example</code>改为<code>myplugin</code>。这是插件的唯一标识，具体描述直接看46-48行就知道了。<br> <img src="https://images2.imgbox.com/2b/1f/KJwurSOQ_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="5_mypluginqrc_21"></a>5. myplugin.qrc</h5> 
<p>  最后，打开<code>myplugin.qrc</code>，将第2行的prefix路径修改为自己的路径，在这里，我们应该将<code>ExamplePlugin</code>改为<code>myplugin</code>，如下图所示：<br> <img src="https://images2.imgbox.com/c4/b4/q4j37pZN_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_24"></a>三、编译</h4> 
<p>  好了，到这里一切工作就都已经准备完毕了，接下来就是使用cmake对源码进行编译了，编译的教程可以参考<a href="https://blog.csdn.net/weixin_44120025/article/details/115175909">这里</a>。有一点不同的是，在configure之后，generate之前，要先把<code>PLUGIN_MYPLUGIN</code>项目勾上，如下图所示。这个就是刚才我们修改好的myplugin项目了，都改好后点击generate就可以了。<br> <img src="https://images2.imgbox.com/fb/96/kjYtd3lh_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_27"></a>四、功能实现</h4> 
<p>  生成后，打开生成的sln工程，组织如下：<br> <img src="https://images2.imgbox.com/e5/62/Qj5Zt0Ae_o.png" alt="在这里插入图片描述"><br>   插件功能的实现都是在我们建立的<code>myplugin</code>里面的h和cpp文件中进行的。展开myplugin项目，如下所示：<br> <img src="https://images2.imgbox.com/03/4d/ok4BZQPN_o.png" alt="在这里插入图片描述"><br>   插件功能实现的接口都是在<code>doAction</code>这个函数里面，可以把它认为是控制台程序中的main函数。如下图所示：<br> <img src="https://images2.imgbox.com/08/0f/I5Lujael_o.png" alt="在这里插入图片描述"><br>   如果将它与main函数类比，那应该就很好理解了。简单的操作你可以直接在这个函数里实现，而复杂的操作，你也可以像控制台程序那样，在<code>myplugin</code>这个工程里新建很多h和cpp文件来进行实现。模板里实现的功能是点击这个plugin后，会在cc底下输出hello这行字样。功能实现以后，将程序改为<code>release x64</code>环境，然后点击顶部菜单栏的<code>生成-&gt;批生成</code>，全部勾上，然后关闭。右键<code>ALL_BUILD</code>工程，然后就是漫长的编译等待了。<br> <img src="https://images2.imgbox.com/a4/75/aUFWt6qa_o.png" alt="在这里插入图片描述"><br>   <code>ALL_BUILD</code>生成成功后，右键<code>INSTALL</code>工程，点击生成。生成成功后，你就可以在cmake时候指定的生成路径下看到<code>cloudcompare</code>文件夹了：<br> <img src="https://images2.imgbox.com/a8/88/0dN6HQ6c_o.png" alt="在这里插入图片描述"><br>   打开，可以看到里面有cc的exe文件，然后<code>plugins</code>文件夹里有名字为<code>myplugin</code>的dll文件，这个就是你编译生成的插件了。<br> <img src="https://images2.imgbox.com/f6/88/8hDzh9eU_o.png" alt="在这里插入图片描述"><br>   双击运行exe文件，在打开的cc顶部菜单栏，可以看到自己编写的插件：<br> <img src="https://images2.imgbox.com/eb/e0/u8PHPQEg_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f6a740b7b3003b85aba4f43ec80a5c51/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">clickhouse笔记01--快速部署clickhouse</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e4211c32a6dee2da02a0ba9f114119dc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ThreadLocal线程安全示例及其原理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
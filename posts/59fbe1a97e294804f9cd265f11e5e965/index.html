<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用Yakit进行常规渗透测试 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用Yakit进行常规渗透测试" />
<meta property="og:description" content="作者：@shangzeng师傅
说明：本文项目中涉及的任何软件工具，仅用于测试和学习研究，其所用目标的环境为个人在本机的靶机环境，数据仅在本地，未对他人信息系统造成任何破坏，文章表达所展现的观点及技术等信息仅用于学习交流。
关于Yak的官方介绍
YAK是国际上首个致力于网络安全底层能力融合的垂直开发语言，提供了非常强大的安全能力。Yak是绝大部分 “数据描述语言 / 容器语言” 的超集，具备Go所有能力与库生态，VSCode插件等，语法可自定义，是图灵完备的脚本语言，完全国产。通过函数提供各类底层安全能力，包括端口扫描、指纹识别、poc框架、shell管理、MITM劫持、强大的插件系统等。
简单来说就是为安全而开发的一种语言的方言。
关于Yakit
Yakit 是一个基于yak语言编写的工具，功能类似Burpsuite，主要功能有拦截http/s数据包，漏洞检测，网站地图，自动/手动测试web应用，编码解码，请求与响应差异数据化等功能，此外yakit插件库还集成了多个专项漏洞检测的插件，支持检测排查新发现的以及过去的经典级漏洞，如log4j2漏洞和struts2漏洞。
端口扫描、指纹
靶场：192.168.131.130
Yakit所在的：192.168.131.2
点击左侧的基础安全工具---扫描端口/指纹---填写目标IP----其他项目保持默认即可---下滑到底部---点击开始扫描端口---等待结果
扫描发现主机开放了ssh服务web服务，当然，这些都是常见端口，对于其他特定端口我们可以调整端口范围，不过最大目前只能扫描200个端口，还无法全端口扫描，一般来说，我们常规保持默认即可。
Web服务
ssh服务
两个端口处都有登录框，可以从爆力登录试试，而web服务可以查看中间件版本是否有对应版本相关的漏洞。
登录口令爆破
点击基础安全工具---爆破与未授权---右侧的可用爆破类型里，目前只有11个类型可用，没有web登录的，一般的也足够了，那这里就只能勾选ssh类型了。
之后右边这里填写好目标IP后，需要指定字典，点击更多参数
指定字典，预设字典可以在左侧的payload管理里修改，也可以增加，由于这里我没有添加，所以就写了几个试试。
填写完后，没有确定按钮，就只能点击右上角关闭，应该是实时保存了的，之后就点击开始检测，走起。
很快之后，出一个了，Yakit速度还是蛮快的，还是字典的原因？不管了，登录试试看看。
登录进去之后，可惜权限很小，在家目录发现了flag4，打开看，应该是想让我们以同样方法试试其他服务拿到root权限，可惜目前yakit不支持对接web登录框。
再找找看其他地方还有没有flag。
最终是在这个文件里找到了flag2，这个文件里面还有数据库的配置信息，其他的目录则需要更高权限查看了，可以从权限提升方面着手。
权限提升
目标主机是Linux系统，我们可以用最近曝出的Polkit pkexec for Linux本地权限提升漏洞CVE-2021-4034方法来提权，这个相对而言成功率比其他方式高。
可以通过第三方远程工具来将文件上传至目标主机。
上传之后，执行试试看。
翻车了额，目标主机没有python3环境。
Yakit使用心得
虽然最终没有获取到另外的flag，也没有获取到管理员权限，但对于当前的yakit而言，是很不错的非常NICE的一个工具，对用户起到了很好的辅路链路效果，而其他功能自己也还没体验，还没发现yakit的真正厉害之处，特别是yak runner，专项漏洞检测，反连管理，数据库等很多压箱底的实用性功能，总体而言yakit界面友好，排版美观，容易上手，使用流畅，提升了工作效率，这次是使用yakit为主的渗透测试之旅。期待yakti以后会越来越好。
Yak官方资源 Yak 语言官方教程：
https://yaklang.com/docs/intro/
Yakit 视频教程：
https://space.bilibili.com/437503777
Github下载地址：
https://github.com/yaklang/yakit
Yakit官网下载地址：
https://yaklang.com/
Yakit安装文档：
https://yaklang.com/products/download_and_install
Yakit使用文档：
https://yaklang.com/products/intro/
常见问题速查：
https://yaklang.com/products/FAQ" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/59fbe1a97e294804f9cd265f11e5e965/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-07T11:18:57+08:00" />
<meta property="article:modified_time" content="2023-11-07T11:18:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用Yakit进行常规渗透测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>作者：@shangzeng师傅</p> 
<p>说明：本文项目中涉及的任何软件工具，仅用于测试和学习研究，其所用目标的环境为个人在本机的靶机环境，数据仅在本地，未对他人信息系统造成任何破坏，文章表达所展现的观点及技术等信息仅用于学习交流。</p> 
<p></p> 
<p class="img-center"><img alt="" height="394" src="https://images2.imgbox.com/ab/4a/PlIvOubd_o.png" width="865"></p> 
<p><strong>关于Yak的官方介绍</strong></p> 
<p>YAK是国际上首个致力于网络安全底层能力融合的垂直开发语言，提供了非常强大的安全能力。Yak是绝大部分 “数据描述语言 / 容器语言” 的超集，具备Go所有能力与库生态，VSCode插件等，语法可自定义，是图灵完备的脚本语言，完全国产。通过函数提供各类底层安全能力，包括端口扫描、指纹识别、poc框架、shell管理、MITM劫持、强大的插件系统等。</p> 
<p>简单来说就是为安全而开发的一种语言的方言。</p> 
<p><strong>关于Yakit</strong></p> 
<p>Yakit 是一个基于yak语言编写的工具，功能类似Burpsuite，主要功能有拦截http/s数据包，漏洞检测，网站地图，自动/手动测试web应用，编码解码，请求与响应差异数据化等功能，此外yakit插件库还集成了多个专项漏洞检测的插件，支持检测排查新发现的以及过去的经典级漏洞，如log4j2漏洞和struts2漏洞。</p> 
<p></p> 
<p class="img-center"><img alt="" height="289" src="https://images2.imgbox.com/5e/14/Sb6DERZh_o.png" width="554"></p> 
<p></p> 
<p class="img-center"><img alt="" height="334" src="https://images2.imgbox.com/1d/13/YfrikxQa_o.png" width="865"></p> 
<p><strong>端口扫描、指纹</strong></p> 
<p>靶场：192.168.131.130</p> 
<p>Yakit所在的：192.168.131.2</p> 
<p>点击左侧的基础安全工具---扫描端口/指纹---填写目标IP----其他项目保持默认即可---下滑到底部---点击开始扫描端口---等待结果</p> 
<p></p> 
<p class="img-center"><img alt="" height="514" src="https://images2.imgbox.com/c3/4d/FG5MTI7g_o.png" width="865"></p> 
<p></p> 
<p class="img-center"><img alt="" height="554" src="https://images2.imgbox.com/4e/2b/qSymHI6K_o.png" width="865"></p> 
<p>扫描发现主机开放了ssh服务web服务，当然，这些都是常见端口，对于其他特定端口我们可以调整端口范围，不过最大目前只能扫描200个端口，还无法全端口扫描，一般来说，我们常规保持默认即可。</p> 
<p></p> 
<p class="img-center"><img alt="" height="386" src="https://images2.imgbox.com/4e/c5/PuHT9Ll6_o.png" width="798"></p> 
<p></p> 
<p class="img-center"><img alt="" height="454" src="https://images2.imgbox.com/42/00/9AV1aqXk_o.png" width="865"></p> 
<p><strong>Web服务</strong></p> 
<p></p> 
<p class="img-center"><img alt="" height="499" src="https://images2.imgbox.com/07/3c/i65kRzYV_o.png" width="865"></p> 
<p><strong>ssh服务</strong></p> 
<p></p> 
<p class="img-center"><img alt="" height="222" src="https://images2.imgbox.com/48/bc/C6OeDJn6_o.png" width="865"></p> 
<p>两个端口处都有登录框，可以从爆力登录试试，而web服务可以查看中间件版本是否有对应版本相关的漏洞。</p> 
<p><strong>登录口令爆破</strong></p> 
<p>点击基础安全工具---爆破与未授权---右侧的可用爆破类型里，目前只有11个类型可用，没有web登录的，一般的也足够了，那这里就只能勾选ssh类型了。</p> 
<p></p> 
<p class="img-center"><img alt="" height="605" src="https://images2.imgbox.com/94/10/MaHToKwn_o.png" width="670"></p> 
<p>之后右边这里填写好目标IP后，需要指定字典，点击更多参数</p> 
<p></p> 
<p class="img-center"><img alt="" height="328" src="https://images2.imgbox.com/1d/eb/hccY0lSj_o.png" width="865"></p> 
<p>指定字典，预设字典可以在左侧的payload管理里修改，也可以增加，由于这里我没有添加，所以就写了几个试试。</p> 
<p></p> 
<p class="img-center"><img alt="" height="615" src="https://images2.imgbox.com/6c/27/9HecbL42_o.png" width="865"></p> 
<p>填写完后，没有确定按钮，就只能点击右上角关闭，应该是实时保存了的，之后就点击开始检测，走起。</p> 
<p></p> 
<p class="img-center"><img alt="" height="402" src="https://images2.imgbox.com/cb/b5/hgLl4lKC_o.png" width="865"></p> 
<p>很快之后，出一个了，Yakit速度还是蛮快的，还是字典的原因？不管了，登录试试看看。</p> 
<p></p> 
<p class="img-center"><img alt="" height="443" src="https://images2.imgbox.com/b4/bd/qvchZsby_o.png" width="865"></p> 
<p>登录进去之后，可惜权限很小，在家目录发现了flag4，打开看，应该是想让我们以同样方法试试其他服务拿到root权限，可惜目前yakit不支持对接web登录框。</p> 
<p></p> 
<p class="img-center"><img alt="" height="536" src="https://images2.imgbox.com/2a/5f/HvFghCCo_o.png" width="865"></p> 
<p>再找找看其他地方还有没有flag。</p> 
<p></p> 
<p class="img-center"><img alt="" height="355" src="https://images2.imgbox.com/12/c1/HnI1g6AY_o.png" width="746"></p> 
<p>最终是在这个文件里找到了flag2，这个文件里面还有数据库的配置信息，其他的目录则需要更高权限查看了，可以从权限提升方面着手。</p> 
<p><strong>权限提升</strong></p> 
<p>目标主机是Linux系统，我们可以用最近曝出的Polkit pkexec for Linux本地权限提升漏洞CVE-2021-4034方法来提权，这个相对而言成功率比其他方式高。</p> 
<p>可以通过第三方远程工具来将文件上传至目标主机。</p> 
<p></p> 
<p class="img-center"><img alt="" height="444" src="https://images2.imgbox.com/c0/05/nhDLcKNW_o.png" width="865"></p> 
<p>上传之后，执行试试看。</p> 
<p></p> 
<p class="img-center"><img alt="" height="334" src="https://images2.imgbox.com/43/b4/wqNEKBGj_o.png" width="865"></p> 
<p>翻车了额，目标主机没有python3环境。</p> 
<p><strong>Yakit使用心得</strong></p> 
<p>虽然最终没有获取到另外的flag，也没有获取到管理员权限，但对于当前的yakit而言，是很不错的非常NICE的一个工具，对用户起到了很好的辅路链路效果，而其他功能自己也还没体验，还没发现yakit的真正厉害之处，特别是yak runner，专项漏洞检测，反连管理，数据库等很多压箱底的实用性功能，总体而言yakit界面友好，排版美观，容易上手，使用流畅，提升了工作效率，这次是使用yakit为主的渗透测试之旅。期待yakti以后会越来越好。</p> 
<h4><strong>Yak官方资源</strong></h4> 
<p>Yak 语言官方教程：<br><em>https://yaklang.com/docs/intro/</em><br> Yakit 视频教程：<br><em>https://space.bilibili.com/437503777</em><br> Github下载地址：<br><em>https://github.com/yaklang/yakit</em><br> Yakit官网下载地址：<br><em>https://yaklang.com/</em><br> Yakit安装文档：<br><em>https://yaklang.com/products/download_and_install</em><br> Yakit使用文档：<br><em>https://yaklang.com/products/intro/</em><br> 常见问题速查：<br><em>https://yaklang.com/products/FAQ</em></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6290bd021983967154f058e1a5f850a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Node.js与npm版本比对</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/741be4a6634665da7836aad6e052a0c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用与非门等效替代异或门和或门,并制作半加器和全加器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
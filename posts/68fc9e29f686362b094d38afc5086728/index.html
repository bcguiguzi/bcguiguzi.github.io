<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Opencv C&#43;&#43; 基本数据结构 Mat - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Opencv C&#43;&#43; 基本数据结构 Mat" />
<meta property="og:description" content="Opencv C&#43;&#43; 基本数据结构 Mat Mat构造单通道Mat对象获取单通道Mat的基本信息以三行两列的矩阵为例1、获取行数和列数2、使用成员函数size()获取矩阵的尺寸3、使用成员函数channels()获取矩阵的通道数4、使用成员函数total获得面积（行数乘列数）5、成员变量dims（维数） 访问单通道对象中的值1、使用成员函数at2、利用成员函数ptr3、使用成员函数isContinuous 和 ptr4、使用成员变量step和data 向量类Vec(构建多通道Mat的基础)构造多通道Mat对象访问多通道对象中的值1、使用成员函数at2、利用成员函数ptr3、使用成员函数isContinuous 和 ptr4、使用成员变量step和data5、分离通道5、合并通道 获得Mat中某一个区域的值1、使用row(i)或col(j)得到矩阵的第i行j列2、使用rowRange或colRange得到矩阵的连续行或连续列3、使用rowRange或colRange得到矩阵的连续行或连续列4、使用Rect类 Mat Mat代表矩阵，该类声明在头文件opencv2/core/core.hpp中
其构造函数为：
Mat(int rows, int cols, int type) rows代表行数，cols代表列数
type可以设置为 CV_8UC(n)、CV_8SC(n)、CV_16SC(n)、、CV_16UC(n)、CV_32FC(n)、*、CV_32SC(n)、CV_64FC(n)
其中8U、8S、16S、16U、32S、32F、64F前的数字代表Mat中每一个数值的位数
U代表uchar类型、S代表int类型、F代表浮点型（32F为float、64F为double）其他类似。
构造单通道Mat对象 如代码所示：
# include &lt;opencv2\core\core.hpp&gt; using namespace cv; int main() { //构造两行三列的float型矩阵 Mat m = Mat(2, 3, CV_32FC(1)); //利用Size对象构造两行3列矩阵，Size（列，行） Mat m1 = Mat(Size(3, 2), CV_32FC(1)); //使用Mat类中的成员函数create完成Mat对象构造 Mat m2; m2.create(Size(2, 3), CV_32FC1); //构造零矩阵和1矩阵 Mat o = Mat::ones(2, 3, CV_32FC1); Mat z = Mat::zeros(Size(3,2), CV_32FC1); //初始化小型矩阵 Mat m = (Mat_&lt;int&gt;(2, 3) &lt;&lt; 1, 2, 3, 4, 5, 6; return 0; } 获取单通道Mat的基本信息 注：单通道与ndarray中的二维对应，多通道与ndarray的三维对应" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/68fc9e29f686362b094d38afc5086728/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-28T21:07:42+08:00" />
<meta property="article:modified_time" content="2019-09-28T21:07:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Opencv C&#43;&#43; 基本数据结构 Mat</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Opencv C++ 基本数据结构 Mat</h4> 
 <ul><li><a href="#Mat_1" rel="nofollow">Mat</a></li><li><a href="#Mat_12" rel="nofollow">构造单通道Mat对象</a></li><li><a href="#Mat_34" rel="nofollow">获取单通道Mat的基本信息</a></li><li><ul><li><ul><li><a href="#_36" rel="nofollow">以三行两列的矩阵为例</a></li><li><ul><li><a href="#1_46" rel="nofollow">1、获取行数和列数</a></li><li><a href="#2size_65" rel="nofollow">2、使用成员函数size()获取矩阵的尺寸</a></li><li><a href="#3channels_74" rel="nofollow">3、使用成员函数channels()获取矩阵的通道数</a></li><li><a href="#4total_81" rel="nofollow">4、使用成员函数total获得面积（行数乘列数）</a></li><li><a href="#5dims_88" rel="nofollow">5、成员变量dims（维数）</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#_95" rel="nofollow">访问单通道对象中的值</a></li><li><ul><li><ul><li><ul><li><a href="#1at_97" rel="nofollow">1、使用成员函数at</a></li><li><a href="#2ptr_127" rel="nofollow">2、利用成员函数ptr</a></li><li><a href="#3isContinuous__ptr_147" rel="nofollow">3、使用成员函数isContinuous 和 ptr</a></li><li><a href="#4stepdata_166" rel="nofollow">4、使用成员变量step和data</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#VecMat_173" rel="nofollow">向量类Vec(构建多通道Mat的基础)</a></li><li><a href="#Mat_201" rel="nofollow">构造多通道Mat对象</a></li><li><a href="#_212" rel="nofollow">访问多通道对象中的值</a></li><li><ul><li><ul><li><ul><li><a href="#1at_213" rel="nofollow">1、使用成员函数at</a></li><li><a href="#2ptr_229" rel="nofollow">2、利用成员函数ptr</a></li><li><a href="#3isContinuous__ptr_248" rel="nofollow">3、使用成员函数isContinuous 和 ptr</a></li><li><a href="#4stepdata_266" rel="nofollow">4、使用成员变量step和data</a></li><li><a href="#5_282" rel="nofollow">5、分离通道</a></li><li><a href="#5_294" rel="nofollow">5、合并通道</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#Mat_321" rel="nofollow">获得Mat中某一个区域的值</a></li><li><ul><li><ul><li><ul><li><a href="#1rowicoljij_322" rel="nofollow">1、使用row(i)或col(j)得到矩阵的第i行j列</a></li><li><a href="#2rowRangecolRange_327" rel="nofollow">2、使用rowRange或colRange得到矩阵的连续行或连续列</a></li><li><a href="#3rowRangecolRange_397" rel="nofollow">3、使用rowRange或colRange得到矩阵的连续行或连续列</a></li><li><a href="#4Rect_428" rel="nofollow">4、使用Rect类</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Mat_1"></a>Mat</h2> 
<p>Mat代表矩阵，该类声明在头文件opencv2/core/core.hpp中<br> 其构造函数为：</p> 
<pre><code class="prism language-cpp"><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token keyword">int</span> rows<span class="token punctuation">,</span> <span class="token keyword">int</span> cols<span class="token punctuation">,</span> <span class="token keyword">int</span> type<span class="token punctuation">)</span>
</code></pre> 
<p>rows代表行数，cols代表列数<br> type可以设置为 <strong>CV_8UC(n)</strong>、<strong>CV_8SC(n)</strong>、<strong>CV_16SC(n)</strong>、、<strong>CV_16UC(n)</strong>、<strong>CV_32FC(n)</strong>、*、<strong>CV_32SC(n)</strong>、<strong>CV_64FC(n)</strong><br> 其中8U、8S、16S、16U、32S、32F、64F前的数字代表Mat中每一个数值的位数<br> U代表uchar类型、S代表int类型、F代表浮点型（32F为float、64F为double）其他类似。</p> 
<hr> 
<h2><a id="Mat_12"></a>构造单通道Mat对象</h2> 
<p>如代码所示：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\core\core.hpp&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//构造两行三列的float型矩阵</span>
	Mat m <span class="token operator">=</span> <span class="token function">Mat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">CV_32FC</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//利用Size对象构造两行3列矩阵，Size（列，行）</span>
	Mat m1 <span class="token operator">=</span> <span class="token function">Mat</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">CV_32FC</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//使用Mat类中的成员函数create完成Mat对象构造</span>
	Mat m2<span class="token punctuation">;</span>
	m2<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//构造零矩阵和1矩阵</span>
	Mat o <span class="token operator">=</span> Mat<span class="token operator">::</span><span class="token function">ones</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat z <span class="token operator">=</span> Mat<span class="token operator">::</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_32FC1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//初始化小型矩阵</span>
	Mat m <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="Mat_34"></a>获取单通道Mat的基本信息</h2> 
<p>注：单通道与ndarray中的二维对应，多通道与ndarray的三维对应</p> 
<h4><a id="_36"></a>以三行两列的矩阵为例</h4> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          m 
         
        
          = 
         
         
         
           [ 
          
          
           
            
             
             
               11 
              
             
            
            
             
             
               12 
              
             
            
           
           
            
             
             
               33 
              
             
            
            
             
             
               43 
              
             
            
           
           
            
             
             
               51 
              
             
            
            
             
             
               16 
              
             
            
           
          
         
           ] 
          
         
        
       
         m=\left[ \begin{matrix} 11 &amp; 12 \\ 33 &amp; 43 \\ 51&amp; 16 \end{matrix} \right] 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 3.60004em; vertical-align: -1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05002em;"><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎣</span></span></span><span class="" style="top: -4.05002em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55002em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05em;"><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">1</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">3</span><span class="mord">3</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">5</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05em;"><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">2</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">4</span><span class="mord">3</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55em;"><span class=""></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05002em;"><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎦</span></span></span><span class="" style="top: -4.05002em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55002em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<h5><a id="1_46"></a>1、获取行数和列数</h5> 
<pre><code class="prism language-cpp"><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\core\core.hpp&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//快速构造矩阵</span>
	Mat m <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//矩阵的行数</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"行数："</span> <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">.</span>rows <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">//矩阵的列数</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"行数："</span> <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">.</span>cols <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>输出:<br> <img src="https://images2.imgbox.com/af/ef/7oCrQFoh_o.png" alt="这里写图片描述"></p> 
<hr> 
<h5><a id="2size_65"></a>2、使用成员函数size()获取矩阵的尺寸</h5> 
<p>成员函数**size()**返回的是Size对象</p> 
<pre><code class="prism language-cpp"><span class="token comment">//获取尺寸</span>
	Size size <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"尺寸："</span> <span class="token operator">&lt;&lt;</span> size <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3b/56/yS4dXuu4_o.png" alt="这里写图片描述"></p> 
<hr> 
<h5><a id="3channels_74"></a>3、使用成员函数channels()获取矩阵的通道数</h5> 
<pre><code class="prism language-cpp">cout <span class="token operator">&lt;&lt;</span> <span class="token string">"通道数："</span> <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<p>输出：<br> <img src="https://images2.imgbox.com/e3/5d/BSFuJKBE_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h5><a id="4total_81"></a>4、使用成员函数total获得面积（行数乘列数）</h5> 
<pre><code class="prism language-cpp">	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"面积："</span> <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<p>输出<br> <img src="https://images2.imgbox.com/bc/d5/W3lzEwUc_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h5><a id="5dims_88"></a>5、成员变量dims（维数）</h5> 
<pre><code class="prism language-cpp">cout <span class="token operator">&lt;&lt;</span> <span class="token string">"维数："</span> <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">.</span>dims <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<p>输出：<br> <img src="https://images2.imgbox.com/16/be/K5VTaSTs_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_95"></a>访问单通道对象中的值</h2> 
<h5><a id="1at_97"></a>1、使用成员函数at</h5> 
<p>例如访问单通道数据类型为CV_32F的对象m,访问其第r行c列的值：<br> 格式为：<strong>m.at&lt;类型&gt;(行,列)</strong></p> 
<pre><code class="prism language-cpp">m<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
</code></pre> 
<p>遍历上文中矩阵m中的值并输出：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"># <span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\core\core.hpp&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//快速构造矩阵</span>
	Mat m <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//for循环打印m中的每一个值</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//return 0;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>还可以结合opencv中的Point类和at成员函数来实现:<br> <strong>m.at(r, c)可用m.at(Point(r,c))代替</strong></p> 
<hr> 
<h5><a id="2ptr_127"></a>2、利用成员函数ptr</h5> 
<p>矩阵每一行的值值是连续存储在内存中的，行与行在内存中也可能存在间隔<br> 通过ptr成员函数可以获得执行每一行地址的指针<br> 格式为：<strong>m.ptr&lt;类型&gt;（第几行）</strong><br> 遍历上文中矩阵m中的值并输出：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span> ptr <span class="token operator">=</span> m<span class="token punctuation">.</span>ptr<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//打印第r行所有值</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> m<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> ptr<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
			<span class="token comment">//cout &lt;&lt; *(ptr+c) &lt;&lt; ",";</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h5><a id="3isContinuous__ptr_147"></a>3、使用成员函数isContinuous 和 ptr</h5> 
<p>矩阵在存储时如果每一行在内存中没有间隔则<strong>isContinuous</strong>返回true<br> 遍历上文中矩阵m中的值并输出：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">isContinuous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//获取指向第一行的指针</span>
		<span class="token keyword">int</span><span class="token operator">*</span> ptr <span class="token operator">=</span> m<span class="token punctuation">.</span>ptr<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> ptr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> m<span class="token punctuation">.</span>cols<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h5><a id="4stepdata_166"></a>4、使用成员变量step和data</h5> 
<p>对于单通道矩阵来说，step[0]代表每一行所占的字节数，如果有间隔则间隔也作为字节数被计算在内；step[1]代表每一个数值所占的字节数，data是一个指针类型为uchar，它指向第一个数值。<br> 因此无论矩阵行与行之间在内存中是否有间隔，都可以使用以下代码来访问第r行c列：</p> 
<pre><code class="prism language-cpp"><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>data<span class="token operator">+</span>m<span class="token punctuation">.</span>step<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>r<span class="token operator">+</span>c<span class="token operator">*</span>m<span class="token punctuation">.</span>step<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<hr> 
<h2><a id="VecMat_173"></a>向量类Vec(构建多通道Mat的基础)</h2> 
<p>可以把这里的向量理解为列向量，构造一个 _cn行x1列的数据类型为_Tp的列向量格式：<strong>Vec&lt;Typename _Tp, int _cn&gt;</strong><br> 例如构造一个长度为3类型为int，且初始化为11，87，37的列向量：</p> 
<pre><code class="prism language-cpp">Vec<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">&gt;</span> <span class="token function">vi</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这样构建的向量默认为列向量，可以通过输出行数和列数查看</p> 
<pre><code class="prism language-cpp">	cout <span class="token operator">&lt;&lt;</span> vi<span class="token punctuation">.</span>rows <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> vi<span class="token punctuation">.</span>cols <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/60/67/8ELQ9KTu_o.png" alt="在这里插入图片描述"><br> 可以使用 “[]” 或"()"操作符f访问向量中的值</p> 
<pre><code class="prism language-cpp"><span class="token comment">//访问向量中的值</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"访问第0个元素"</span> <span class="token operator">&lt;&lt;</span> <span class="token function">vi</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"访问第1个元素"</span> <span class="token operator">&lt;&lt;</span> vi<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/52/e9/shopSV0f_o.png" alt="在这里插入图片描述"><br> opencv 为向量类取了别名：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">typedef</span> Vec\<span class="token operator">&lt;</span>uchar <span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">&gt;</span> Vec3b
<span class="token keyword">typedef</span> Vec\<span class="token operator">&lt;</span><span class="token keyword">int</span> <span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">&gt;</span> Vec2i
<span class="token keyword">typedef</span> Vec\<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token operator">&gt;</span> Vec4f
<span class="token keyword">typedef</span> Vec\<span class="token operator">&lt;</span><span class="token keyword">double</span> <span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">&gt;</span> Vec3d
</code></pre> 
<p>单通道矩阵每个元素都是一个数值，多通道矩阵每个元素可以看作一个向量。</p> 
<hr> 
<h2><a id="Mat_201"></a>构造多通道Mat对象</h2> 
<p>构造一个由n个rows*cols二维浮点型矩阵组成的三维矩阵的格式如下：</p> 
<pre><code class="prism language-cpp"><span class="token function">Mat</span><span class="token punctuation">(</span><span class="token keyword">int</span> rows<span class="token punctuation">,</span><span class="token keyword">int</span> cols<span class="token punctuation">,</span><span class="token function">CV_32FC</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>例如构造一个2行2列的float类型的三通道矩阵</p> 
<pre><code class="prism language-cpp">Mat mm <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span>Vec3f<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">Vec3f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Vec3f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">Vec3f</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Vec3f</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h2><a id="_212"></a>访问多通道对象中的值</h2> 
<h5><a id="1at_213"></a>1、使用成员函数at</h5> 
<p>可以将多通道Mat看作一个特殊的二维数组，数组的每个元素不是数值而是一个向量<br> 以上文 创建的mm多通道对象为例遍历输出多通道矩阵mm的每个元素</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> mm<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> mm<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> mm<span class="token punctuation">.</span>at<span class="token operator">&lt;</span>Vec3f<span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>输出：<br> <img src="https://images2.imgbox.com/76/7b/GmXwMq19_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h5><a id="2ptr_229"></a>2、利用成员函数ptr</h5> 
<p>多通道Mat的元素在内存中也是按行存储，每一个行存储在连续内存区域中，如果行与行之间由间隔，间隔相等。成员函数ptr返回指向指定行的第一个元素的指针。<br> 使用ptr访问<strong>mm</strong>对象的每个元素。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> mm<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		Vec3f<span class="token operator">*</span> ptr <span class="token operator">=</span> mm<span class="token punctuation">.</span>ptr<span class="token operator">&lt;</span>Vec3f<span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> mm<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> ptr<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">%</span> mm<span class="token punctuation">.</span>cols<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>输出与使用at相同</p> 
<hr> 
<h5><a id="3isContinuous__ptr_248"></a>3、使用成员函数isContinuous 和 ptr</h5> 
<p>与单通道Mat对象一样，可通过isContinuous判断整个Mat对象中的元素是否存储在连续内存中，返回true即表示连续存储；如果是连续存储，就可以少一个循环用ptr遍历</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">if</span> <span class="token punctuation">(</span>mm<span class="token punctuation">.</span><span class="token function">isContinuous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//获取指向第一行的指针</span>
		Vec3f<span class="token operator">*</span> ptr <span class="token operator">=</span> mm<span class="token punctuation">.</span>ptr<span class="token operator">&lt;</span>Vec3f<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mm<span class="token punctuation">.</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> ptr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> mm<span class="token punctuation">.</span>cols<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h5><a id="4stepdata_266"></a>4、使用成员变量step和data</h5> 
<p>与单通道Mat类似，step[0]代表每一行所占的字节数，如果有间隔则间隔计算在内，step[1]代表每一个个元素所占的字节数，step[1] = elemSize1()*channels()<br> elemSize1()代表一个元素中一个数值所占的字节数；data代表首个数值的地址<br> 下面使用step和data遍历输出mm中的元素:</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> mm<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> mm<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span><span class="token operator">*</span><span class="token punctuation">(</span>Vec3f<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>mm<span class="token punctuation">.</span>data <span class="token operator">+</span> r<span class="token operator">*</span>mm<span class="token punctuation">.</span>step<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>c<span class="token operator">*</span>mm<span class="token punctuation">.</span>step<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>输出与1，2，3相同</p> 
<hr> 
<h5><a id="5_282"></a>5、分离通道</h5> 
<p>以上述讨论的mm多通道对象为例，将所有向量第一个数值组成的二维矩阵作为第一通道，将所有向量第二个数值组成的单通道矩阵作为第二通道以此类推；<br> 所以mm分离后的三个通道为<br> 第一通道：2x2的矩阵，元素为 1、2、3、4<br> 第二通道：2x2的矩阵，元素为 11、12、13、24<br> 第三通道：2x2的矩阵，元素为 21、32、23、34<br> 使用split可以将mm分离为多个单通道:</p> 
<pre><code class="prism language-cpp">vector<span class="token operator">&lt;</span>Mat<span class="token operator">&gt;</span>planes<span class="token punctuation">;</span>
<span class="token function">split</span><span class="token punctuation">(</span>mm<span class="token punctuation">,</span> planes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h5><a id="5_294"></a>5、合并通道</h5> 
<p>使用merge函数可以将多个单通道矩阵合并为一个三维矩阵<br> 该函数声明为：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> merge <span class="token punctuation">(</span><span class="token keyword">const</span> Mat <span class="token operator">*</span>mv<span class="token punctuation">,</span> size_t count<span class="token punctuation">,</span> OutputArray dst<span class="token punctuation">)</span>
<span class="token comment">//其重载函数</span>
<span class="token keyword">void</span> merge <span class="token punctuation">(</span>InputArrayofArrays mv<span class="token punctuation">,</span> OutputArray dst<span class="token punctuation">)</span>
</code></pre> 
<p>例如将三个2*2int型单通道合并：</p> 
<pre><code class="prism language-cpp">	Mat plane0 <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat plane1 <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat plane2 <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//初始化Mat数组也</span>
	Mat plane<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span> plane0<span class="token punctuation">,</span> plane1<span class="token punctuation">,</span> plane2 <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//声明一个mat对象用来保存合并后的多通道对象</span>
	Mat mat<span class="token punctuation">;</span>
	<span class="token function">merge</span><span class="token punctuation">(</span>plane<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> mat<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//将三个单通道矩阵放在vector容器中</span>
	vector<span class="token operator">&lt;</span>Mat<span class="token operator">&gt;</span>pl<span class="token punctuation">;</span>
	pl<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>plane0<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pl<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>plane1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	pl<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>plane2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat mat1<span class="token punctuation">;</span>
	<span class="token function">merge</span><span class="token punctuation">(</span>pl<span class="token punctuation">,</span> mat<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h2><a id="Mat_321"></a>获得Mat中某一个区域的值</h2> 
<h5><a id="1rowicoljij_322"></a>1、使用row(i)或col(j)得到矩阵的第i行j列</h5> 
<pre><code class="prism language-cpp">Mat mr <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Mat mc <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token function">col</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2rowRangecolRange_327"></a>2、使用rowRange或colRange得到矩阵的连续行或连续列</h5> 
<p>首先知道Opencv中的Range类，该类用于构造连续整数序列，左闭右开。<br> Range(2,5)产生2、3、4序列。以5*5矩阵为例<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          m 
         
        
          a 
         
        
          t 
         
        
          r 
         
        
          i 
         
        
          x 
         
        
          = 
         
         
         
           [ 
          
          
           
            
             
             
               1 
              
             
            
            
             
             
               2 
              
             
            
            
             
             
               3 
              
             
            
            
             
             
               4 
              
             
            
            
             
             
               5 
              
             
            
           
           
            
             
             
               6 
              
             
            
            
             
             
               7 
              
             
            
            
             
             
               8 
              
             
            
            
             
             
               9 
              
             
            
            
             
             
               10 
              
             
            
           
           
            
             
             
               11 
              
             
            
            
             
             
               12 
              
             
            
            
             
             
               13 
              
             
            
            
             
             
               14 
              
             
            
            
             
             
               15 
              
             
            
           
           
            
             
             
               16 
              
             
            
            
             
             
               17 
              
             
            
            
             
             
               18 
              
             
            
            
             
             
               19 
              
             
            
            
             
             
               20 
              
             
            
           
           
            
             
             
               21 
              
             
            
            
             
             
               22 
              
             
            
            
             
             
               23 
              
             
            
            
             
             
               24 
              
             
            
            
             
             
               25 
              
             
            
           
          
         
           ] 
          
         
        
       
         matrix = \left[ \begin{matrix} 1 &amp; 2 &amp; 3 &amp; 4 &amp; 5\\ 6 &amp; 7 &amp; 8 &amp; 9 &amp; 10 \\ 11 &amp; 12 &amp; 13 &amp; 14 &amp; 15 \\ 16 &amp; 17 &amp; 18 &amp; 19 &amp; 20 \\ 21 &amp; 22 &amp; 23 &amp; 24 &amp; 25 \end{matrix} \right] 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.65952em; vertical-align: 0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 6.00404em; vertical-align: -2.75004em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.254em;"><span class="" style="top: -1.04998em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎣</span></span></span><span class="" style="top: -2.20498em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -2.80598em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -3.40698em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -4.00798em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎢</span></span></span><span class="" style="top: -5.254em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.75004em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.25em;"><span class="" style="top: -5.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">6</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">1</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">6</span></span></span><span class="" style="top: -0.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.75em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.25em;"><span class="" style="top: -5.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span></span></span><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">7</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">2</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">7</span></span></span><span class="" style="top: -0.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.75em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.25em;"><span class="" style="top: -5.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">3</span></span></span><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">8</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">3</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">8</span></span></span><span class="" style="top: -0.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.75em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.25em;"><span class="" style="top: -5.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">4</span></span></span><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">9</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">4</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">9</span></span></span><span class="" style="top: -0.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.75em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.25em;"><span class="" style="top: -5.41em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">5</span></span></span><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">5</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">0</span></span></span><span class="" style="top: -0.61em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.75em;"><span class=""></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 3.254em;"><span class="" style="top: -1.04998em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎦</span></span></span><span class="" style="top: -2.20498em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -2.80598em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -3.40698em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -4.00798em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎥</span></span></span><span class="" style="top: -5.254em;"><span class="pstrut" style="height: 3.155em;"></span><span class="delimsizinginner delim-size4"><span class="">⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 2.75004em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<pre><code class="prism language-cpp"><span class="token comment">//构造一个5*5int型矩阵</span>
	Mat matrix <span class="token operator">=</span> <span class="token punctuation">(</span>Mat_<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//访问第2、3两行</span>
	Mat r_range <span class="token operator">=</span> matrix<span class="token punctuation">.</span><span class="token function">rowRange</span><span class="token punctuation">(</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以写为matrix.rowRange(2，4)</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> r_range<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> r_range<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> r_range<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>输出：<br> <img src="https://images2.imgbox.com/a8/72/W6faBGwe_o.png" alt="在这里插入图片描述"><br> colRange与之类似</p> 
<pre><code class="prism language-cpp">Mat c_range <span class="token operator">=</span> matrix<span class="token punctuation">.</span><span class="token function">colRange</span><span class="token punctuation">(</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> c_range<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> c_range<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> c_range<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>输出：<br> <img src="https://images2.imgbox.com/61/cf/hCtukjRI_o.png" alt="在这里插入图片描述"><br> <strong>注意</strong>：成员函数row、 col 、 rowRange 、colRange 返回的矩阵是指向原矩阵的，例如改变c_range第1行1列的值，原矩阵也会改变：</p> 
<pre><code class="prism language-cpp">c_range<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span><span class="token comment">//改为1000</span>
	cout <span class="token operator">&lt;&lt;</span>  <span class="token string">"输出c_range"</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> c_range<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> c_range<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> c_range<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输出原矩阵"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> matrix<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>输出：<br> <img src="https://images2.imgbox.com/04/a7/fzyWAs6Q_o.png" alt="在这里插入图片描述"><br> 使用成员函数clone和copyTo可以解决这个问题</p> 
<hr> 
<h5><a id="3rowRangecolRange_397"></a>3、使用rowRange或colRange得到矩阵的连续行或连续列</h5> 
<p>使用这两个成员函数会将矩阵克隆一份，以上述r_range为例</p> 
<pre><code class="prism language-cpp">	Mat r_range <span class="token operator">=</span> matrix<span class="token punctuation">.</span><span class="token function">rowRange</span><span class="token punctuation">(</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	r_range<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span><span class="token comment">//修改值为1000</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输出r_range"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> r_range<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> r_range<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> r_range<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"输出原矩阵"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> matrix<span class="token punctuation">.</span>at<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>输出：<br> <img src="https://images2.imgbox.com/7c/f4/PUN7SIEz_o.png" alt="在这里插入图片描述"><br> copyTo的用法为:</p> 
<pre><code class="prism language-cpp">matrix<span class="token punctuation">.</span><span class="token function">rowRange</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>r_range<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h5><a id="4Rect_428"></a>4、使用Rect类</h5> 
<p>如果我们需要矩阵中一块矩形区域，我们可以使用rowRange和colRange来定位，但是Opencv提供了Rect类来简化操作。知道矩形的左上角坐标，和矩形的宽高就可以确定一个矩形，所以其构造函数为：</p> 
<pre><code class="prism language-cpp"><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token keyword">int</span> _x<span class="token punctuation">,</span><span class="token keyword">int</span> _y<span class="token punctuation">,</span> <span class="token keyword">int</span> _width<span class="token punctuation">,</span> <span class="token keyword">int</span> _height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>也可以将 _width 和 _height保存在一个Size中</p> 
<pre><code class="prism language-cpp"><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token keyword">int</span> _x<span class="token punctuation">,</span><span class="token keyword">int</span> _y<span class="token punctuation">,</span> Size size<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>如果知道左上角和右下角的坐标也可以确定一个矩形，所以构造函数为：</p> 
<pre><code class="prism language-cpp"><span class="token function">Rect</span><span class="token punctuation">(</span>Point2i <span class="token operator">&amp;</span>pt1<span class="token punctuation">,</span>Point2i <span class="token operator">&amp;</span>pt2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>以之前叙述的5*5矩阵matrix为例，要获得使矩形框中的值为8，9，13，14<br> 可以按如下方式构建矩形框</p> 
<pre><code class="prism language-cpp">	Mat roi1 <span class="token operator">=</span> <span class="token function">matrix</span><span class="token punctuation">(</span><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//左上角和右下角坐标,"左开右闭"</span>
	Mat roi2 <span class="token operator">=</span> <span class="token function">matrix</span><span class="token punctuation">(</span><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment">//x,y,宽，高</span>
	Mat roi3 <span class="token operator">=</span> <span class="token function">matrix</span><span class="token punctuation">(</span><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//左上角坐标，尺寸</span>
</code></pre> 
<p>使用for循环输出：<br> <img src="https://images2.imgbox.com/06/ba/8VQM06PH_o.png" alt="在这里插入图片描述"><br> 这样得到的矩形区域仍然是指向原矩阵的所以，仍然可以使用clone和copyTo</p> 
<pre><code class="prism language-cpp">Mat roi1 <span class="token operator">=</span> <span class="token function">matrix</span><span class="token punctuation">(</span><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clone<span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/308a5fe3521d575c321eac71faa243f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python实例-批量重命名文件夹中的图片文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d709819037036bf71e0bb0f0f7507e71/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">H5 video 标签 播放事件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
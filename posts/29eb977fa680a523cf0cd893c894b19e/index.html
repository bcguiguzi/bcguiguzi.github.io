<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ArkTS快速入门----Harmony OS 开发(第四期) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ArkTS快速入门----Harmony OS 开发(第四期)" />
<meta property="og:description" content="ArkTS快速入门 初始例程解析 装饰器:用来装饰结构体,方法,变量,赋予其特殊含义 @Entry 标记当前组件是入口组件，即可以作为一个独立页面直接访问,若没有该装饰器,则该组件不能被独立访问，只能作为其他组件的陪衬。一个页面只能有一个@Entry修饰的组件,加载页面时会首先创建并呈现@Entry标记的组件,只有@Entry修饰的组件及其子组件才能被显示在页面上。
@Component 标记下面这个是自定义组件----(组件可以理解为模块，可以直接将整体拿来使用)。
@State 标记该变量是状态变量,其值的变化会触发与其关联的组件的刷新(即所有调用了该变量的组件的刷新)。
@Link 标记的变量可以与父组件的@State变量建立双向数据绑定，任何一方做的修改都会使另一方一同改变。 @Link变量不能在组件内部进行初始化。@Link 标记的变量必须在生命周期函数中完成初始化。
如上图一，在父组件RankPage中通过’$&#39;操作符创建&#34;引用&#34;,使父组件中的isSwitchDataSource与子组件TitleComponent中定义的isRefreshData进行双向数据绑定。
5.@Prop与@State有相同的语义，但初始化方式不同。@Prop装饰的变量必须使用其父组件提供的@State变量进行初始化，允许组件内部修改@Prop变量，但更改不会通知给父组件，即@Prop属于单向数据绑定。
如上图，@Prop装饰的变量必须使用其父组件提供的@State变量进行初始化
@Builder 按引用传递参数时，传递的参数可为状态变量，且状态变量的改变会引起@Builder方法内的UI刷新。 @Builder 就是用于页面构建的装饰器，表示其后面的函数可以用来构建页面(只要函数被调用)，函数可以定义在组件外(全局页面构建函数),也可以定义在组件内部(局部页面构建函数，此时不用加function关键字)。
7.@Styles 就是用于页面构建样式的装饰器,表示其后面的函数可以用来构建页面的样式(只要函数被调用---- .函数名())，要求：函数内部的所有样式必须是通用样式。
8.@Extend(组件名a) 就是与@Styles 装饰器类似,只是其后面的函数中的样式不全是通用样式，其中有样式为a的特有样式。注意:@Extern 只能定义在全局，不能定义在组件内。
9.@Provide和@Consume 就是 @Provide修饰的状态变量自动对提供者组件的所有后代组件可用，后代组件通过使用@Consume装饰的变量来获得对提供的状态变量的访问。@Provide作为数据的提供方，可以更新其子孙节点的数据，并触发页面渲染。@Consume在感知到@Provide数据的更新后，会触发当前自定义组件的重新渲染，反之同理，@Consume 修饰的变量不用初始化，但要求变量名与祖先组件一致(方便绑定)，也就是说：@Consume装饰的变量通过相同的属性名绑定其祖先组件内的@Provide装饰的变量
内置组件: ArkUI提供的组件,分为两种:
1.容器组件:用来完成页面布局，如Row(该组件内部的所有元素自动成为一行),Column(该组件内部的所有元素自动成为一列)。
2.基础组件:自带样式和功能的页面元素,如Text。
3.自定义组件: 将上面两种组件组合,可以直接拿来使用。
属性方法:设置对应组件的UI样式。 例子:
.fontSize(50) //字体大小 .fontWeight(FontWeight.Bold) //字体宽度 .fontColor(&#34;#16B&#34;) //字体颜色 .height(&#39;100%&#39;) //字体高度占满 事件方法:设置该组件的触发的事件。 例子:
.onClick(()=&gt;{ //点击事件 //……处理点击事件 this.message=&#34;hello ArkTS!&#34; }) 给组件传参数 值传递(默认) 上图就是默认的参数传递----值传递，Text()标签调用本组件内部的变量content,外部调用ToDoItem()组件时要为变量content进行初始化，形式:ToDoItem({变量名:值});
引用传递 上图便是按引用传递,用$$ : {参数名1:参数类型,参数名2:参数类型……}接收。函数体内要使用参数:$$.参数名。外部调用组件时，变量初始化的方式与值传递的一致。
关于${……} ${……}是一种JavaScript中的模板字符串语法，用于在字符串中插入动态的变量或表达式。
生命周期函数 自定义组件生命周期：指自定义组件从创建到销毁的整个过程。
提供了两个生命周期回调函数 aboutToAppear(),aboutToDisappear(),前者在创建自定义组件后，执行build组件前自动调用，可用于初始化页面要展示的数据或申请定时器资源。 后者在该自定义组件被销毁时调用，可用于释放不再使用的资源。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/29eb977fa680a523cf0cd893c894b19e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-19T00:45:55+08:00" />
<meta property="article:modified_time" content="2024-01-19T00:45:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ArkTS快速入门----Harmony OS 开发(第四期)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="ArkTS_0"></a>ArkTS快速入门</h2> 
<h3><a id="_1"></a>初始例程解析</h3> 
<p><img src="https://images2.imgbox.com/3a/40/RLPDBffQ_o.png" alt="image.png"></p> 
<ul><li><strong>装饰器</strong>:用来装饰结构体,方法,变量,赋予其特殊含义</li></ul> 
<ol><li> <p>@Entry 标记当前组件是入口组件，即可以作为一个独立页面直接访问,若没有该装饰器,则该组件不能被独立访问，只能作为其他组件的陪衬。一个页面只能有一个@Entry修饰的组件,<strong>加载页面时</strong>会首先创建并呈现@Entry标记的组件,只有@Entry修饰的组件及其子组件才能被显示在页面上。</p> </li><li> <p>@Component 标记下面这个是自定义组件----(<strong>组件可以理解为模块，可以直接将整体拿来使用</strong>)。</p> </li><li> <p>@State 标记该变量是状态变量,其值的变化会触发与其关联的组件的刷新(即<strong>所有调用了该变量的组件的刷新</strong>)。</p> </li><li> <p>@Link 标记的变量可以与<strong>父组件</strong>的@State变量建立<strong>双向数据绑定</strong>，任何一方做的修改都会使另一方一同改变。 @Link变量不能在组件内部进行初始化。@Link 标记的变量<strong>必须在生命周期函数中完成初始化。</strong></p> </li></ol> 
<p><img src="https://images2.imgbox.com/a9/48/jZfPXpOh_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/92/a2/xm6DxxvO_o.png" alt="image.png"><br> 如上图一，在父组件RankPage中通过’$'操作符创建"引用",使<strong>父组件中的isSwitchDataSource与子组件TitleComponent中定义的isRefreshData进行双向数据绑定。</strong></p> 
<p>5.@Prop与@State有相同的语义，但初始化方式不同。@Prop装饰的变量必须使用其父组件提供的@State变量进行初始化，<strong>允许组件内部修改@Prop变量，但更改不会通知给父组件，即@Prop属于单向数据绑定。</strong></p> 
<p><img src="https://images2.imgbox.com/a7/87/DdUnjhkW_o.png" alt="捕获.PNG"></p> 
<p>如上图，<strong>@Prop装饰的变量必须使用其父组件提供的@State变量进行初始化</strong></p> 
<ol start="6"><li>@Builder <strong>按引用传递参数</strong>时，<strong>传递的参数可为状态变量</strong>，且状态变量的改变会引起@Builder方法内的UI刷新。</li></ol> 
<p><img src="https://images2.imgbox.com/91/61/sKm4seyG_o.png" alt="在这里插入图片描述"></p> 
<p>@Builder 就是<strong>用于页面构建的装饰器</strong>，表示其后面的函数可以用来构建页面(只要函数被调用)，函数可以定义在组件外(<code>全局页面构建函数</code>),也可以定义在组件内部(<code>局部页面构建函数</code>，此时不用加<code>function关键字</code>)。</p> 
<p><img src="https://images2.imgbox.com/56/8c/Rxz7t7hG_o.png" alt="image.png"></p> 
<p>7.@Styles 就是<strong>用于页面构建样式的装饰器</strong>,表示其后面的函数可以用来构建页面的样式(只要函数被调用---- <strong>.函数名()</strong>)，<strong>要求：函数内部的所有样式必须是通用样式</strong>。</p> 
<p><img src="https://images2.imgbox.com/00/bc/EPPBO0Q6_o.png" alt="在这里插入图片描述"></p> 
<p>8.@Extend(<strong>组件名a</strong>) 就是与@Styles 装饰器类似,只是其后面的函数中的样式不全是通用样式，其中有样式为<strong>a</strong>的特有样式。<strong>注意:@Extern 只能定义在全局，不能定义在组件内。</strong></p> 
<p>9.@Provide和@Consume 就是 <strong>@Provide修饰的状态变量自动对提供者组件的所有后代组件可用</strong>，后代组件通过使用@Consume装饰的变量来获得对提供的状态变量的访问。<strong>@Provide作为数据的提供方，可以更新其子孙节点的数据，并触发页面渲染。@Consume在感知到@Provide数据的更新后，会触发当前自定义组件的重新渲染，反之同理</strong>，@Consume 修饰的变量不用初始化，但要求变量名与祖先组件一致(方便绑定)，也就是说：<code>@Consume</code><strong>装饰的变量通过相同的属性名绑定其祖先组件内的</strong><code>@Provide</code><strong>装饰的变量</strong></p> 
<ul><li> <p>内置组件: ArkUI提供的组件,分为两种:</p> <p>1.<strong>容器组件</strong>:用来完成页面布局，如Row(<strong>该组件内部的所有元素自动成为一行</strong>),Column(<strong>该组件内部的所有元素自动成为一列</strong>)。</p> <p>2.<strong>基础组件</strong>:自带样式和功能的页面元素,如Text。</p> <p><img src="https://images2.imgbox.com/1b/94/w7sFlP4s_o.png" alt="捕获.PNG"></p> <p>3.<strong>自定义组件</strong>: 将上面两种组件组合,可以直接拿来使用。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/da/02/2ivVBbbw_o.png" alt="image.png"></p> 
<ul><li>属性方法:设置对应组件的UI样式。</li></ul> 
<p>例子:</p> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>            <span class="token comment">//字体大小</span>
<span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span>FontWeight<span class="token punctuation">.</span>Bold<span class="token punctuation">)</span>   <span class="token comment">//字体宽度</span>
<span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span><span class="token string">"#16B"</span><span class="token punctuation">)</span>    <span class="token comment">//字体颜色</span>
<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>       <span class="token comment">//字体高度占满</span>

</code></pre> 
<ul><li>事件方法:设置该组件的触发的事件。</li></ul> 
<p>例子:</p> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>          <span class="token comment">//点击事件</span>
  <span class="token comment">//……处理点击事件</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token operator">=</span><span class="token string">"hello ArkTS!"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_75"></a>给组件传参数</h4> 
<h5><a id="_76"></a>值传递(默认)</h5> 
<p><img src="https://images2.imgbox.com/ff/a8/DTmxYEux_o.png" alt="捕获.PNG"><br> 上图就是默认的参数传递----<strong>值传递</strong>，Text()标签调用本组件内部的变量content,外部调用ToDoItem()组件时要为变量content进行初始化，形式:<code>ToDoItem({变量名:值});</code></p> 
<h5><a id="_81"></a>引用传递</h5> 
<p><img src="https://images2.imgbox.com/a0/a1/myDyl08u_o.png" alt="捕获.PNG"></p> 
<p>上图便是按引用传递,用<code>$$ : {参数名1:参数类型,参数名2:参数类型……}</code>接收。函数体内要使用参数:<code>$$.参数名</code>。外部调用组件时，变量初始化的方式与值传递的一致。</p> 
<h5><a id="_87"></a>关于${……}</h5> 
<p><code>${……}</code>是一种JavaScript中的模板字符串语法，用于在字符串中插入动态的变量或表达式。</p> 
<h4><a id="_90"></a>生命周期函数</h4> 
<ul><li> <p>自定义组件生命周期：指自定义组件从创建到销毁的整个过程。</p> <p>提供了两个生命周期回调函数 aboutToAppear(),aboutToDisappear(),前者在创建自定义组件后，执行build组件前自动调用，<strong>可用于初始化页面要展示的数据或申请定时器资源。</strong> 后者在该自定义组件被销毁时调用，<strong>可用于释放不再使用的资源。</strong></p> </li></ul> 
<p><img src="https://images2.imgbox.com/7c/10/k3VBW4tq_o.png" alt="在这里插入图片描述"></p> 
<ul><li>对于@Entry标记的页面入口组件,系统还单独给出了三个生命周期回调函数:onPageShow(),onBackPress(),onPageHide(),<strong>第一个函数在页面每次显示时触发，第二个函数在用户点击返回键回到另一个页面时调用(原页面存在)，返回值为true时，由页面处理返回逻辑，页面不返回，返回false时由系统处理返回逻辑(默认)，第三个函数在用户删除本页面时调用。</strong></li></ul> 
<p><img src="https://images2.imgbox.com/77/10/prnyux9R_o.png" alt="image.png"></p> 
<h4><a id="_102"></a>循环渲染</h4> 
<p>循环渲染:使用<strong>ForEach</strong>迭代数组，并为每个数组项创建相应组件。</p> 
<p><img src="https://images2.imgbox.com/8c/9f/kh9WuuYM_o.png" alt="image.png"></p> 
<p>ForEach()有三个参数，<strong>参数1为数组</strong>，用于存储要展示的所有数据，可以为空数组，为空数组时，不会创建子组件。<strong>参数2为数组中的每个元素创建对应的组件</strong>，<strong>固定参数:item:数组中的数据项,index:数组中的数据项索引（可选）</strong>，<strong>参数3(string类型)为数据源 的每个数组项生成唯一且持久的键值,<br> 函数返回值为开发者自定义的键值生成规则,如果参数未填，则框架默认的键值生成函数为<br> (item: T, index: number) =&gt; { return index + ‘__’ + JSON.stringify(item); }</strong></p> 
<h4><a id="_113"></a>网络权限申请</h4> 
<p>凡是涉及到网络，都有提前申请权限。</p> 
<p>权限类型分为<strong>system_grant</strong>(系统授权)和<strong>user_grant</strong>(用户授权)两种类型。</p> 
<p>申请网络权限步骤:</p> 
<blockquote> 
 <p>1.官网点击文档—&gt;指南—&gt;开发—&gt;安全—&gt;访问控制授权申请</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/46/47/kFAlx4s9_o.png" alt="image.png"></p> 
<p><img src="https://images2.imgbox.com/0a/2b/q9RB99jb_o.png" alt="image.png"></p> 
<blockquote> 
 <p>2.点击应用权限列表，查看你要申请的权限类型,分为<strong>system_grant</strong>(系统授权)和<strong>user_grant</strong>(用户授权)两种类型。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/d6/c5/b3bTq7nG_o.png" alt="捕获.PNG"></p> 
<blockquote> 
 <p>3.查看权限属性表，若为<strong>system_grant</strong>(系统授权),则只需要填写"name"这一个属性,否则这要参考下表看是否填写:</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/9a/96/LN2cOJlT_o.png" alt="捕获.PNG"></p> 
<blockquote> 
 <p>4.回到项目，找到module.json5文件</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/24/77/uGBk68yZ_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>5.找到下图位置，添加"requestPermissions":[],可以看出其是一个数组，在这个数组<strong>以一个{}为一组作为一个申请权限</strong>，如下图就代表两个权限。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/c5/55/un2yyTlW_o.png" alt="捕获.PNG"></p> 
<blockquote> 
 <p>6.更改完成后，保存文件module.json5即可。</p> 
</blockquote> 
<h3><a id="_145"></a>基础组件</h3> 
<h4><a id="Image_146"></a>Image组件</h4> 
<h5><a id="Image_148"></a>声明Image组件</h5> 
<p>1.string 格式，通常用来加载网络图片，需要申请网络访问权限: <strong>ohos.permission.INTERNET</strong>—权限名</p> 
<p><code>Image('http://xxx.png') //图片网络地址</code></p> 
<p>2.PixelMap 格式，可以加载像素图，常用在图片编辑中</p> 
<p><code>Image(pixelMapObject)</code></p> 
<ol start="3"><li>Resource格式，加载本地图片，<strong>推荐使用</strong></li></ol> 
<pre><code class="prism language-ts"><span class="token function">Image</span><span class="token punctuation">(</span><span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">'app.media.图片名'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    
<span class="token comment">//app. 是固定写法，  </span>
<span class="token comment">//media.图片名  是resource文件夹下的base下的图片路径，无后缀</span>

<span class="token function">Image</span><span class="token punctuation">(</span><span class="token function">$rawfile</span><span class="token punctuation">(</span><span class="token string">'图片名.后缀'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">//resource文件夹下</span>
                                  <span class="token comment">//的rawfile下的图片路径</span>
</code></pre> 
<h5><a id="Image_167"></a>Image组件属性</h5> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment">//图片宽度</span>
<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span>   <span class="token comment">//图片高度</span>
<span class="token punctuation">.</span><span class="token function">borderRadius</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token comment">//边框圆角(让图片边缘变圆滑)</span>
<span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token number">0xCCCCCC</span><span class="token punctuation">)</span>   <span class="token comment">//设置图片背景色为灰色</span>
<span class="token punctuation">.</span><span class="token function">interpolation</span><span class="token punctuation">(</span>ImageInterpolation<span class="token punctuation">.</span>High<span class="token punctuation">)</span>    <span class="token comment">//图片插值，</span>
                                            <span class="token comment">//消除锯齿</span>
</code></pre> 
<p><strong>设置缩放类型</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">//设置图片的缩放类型，objectFit的参数类型为ImageFit</span>
<span class="token punctuation">.</span><span class="token function">objectFit</span><span class="token punctuation">(</span>ImageFit<span class="token punctuation">.</span>Cover<span class="token punctuation">)</span>

<span class="token comment">//ImageFit包含以下几种类型：</span>
   <span class="token comment">//Contain：保持宽高比进行缩小或者放大，使得图片完全显示在显示边界内</span>
   <span class="token comment">//Cover（默认值）:保持宽高比进行缩小或者放大，使得图片</span>
      <span class="token comment">//两边都大于或等于显示边界</span>
      
   <span class="token comment">//Auto：自适应显示</span>
   <span class="token comment">//Fill：不保持宽高比进行放大缩小，使得图片充满显示边界</span>
   <span class="token comment">//ScaleDown：保持宽高比显示，图片缩小或者保持不变</span>
   <span class="token comment">//None：保持原有尺寸显示</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ab/8e/Ksiwr6Nt_o.png" alt="image.png"></p> 
<h4><a id="Text_195"></a>Text组件</h4> 
<h5><a id="Text_197"></a>声明Text组件</h5> 
<ol><li> <p>string格式，直接填写文本内容</p> <p><code>Text('图片宽度')</code></p> </li><li> <p>Resource格式,读取本地资源文件</p> </li></ol> 
<blockquote> 
 <p>Text($r(‘app.string.关键字’))</p> 
 <p>//这样文本可以根据设备环境的不同而自动改变</p> 
 <p>//限定词目录 ----en_US(英文),zh_CN(中文):里面存储的是一些文本资源,<strong>系统根据设备语言环境，自动选择目录，访问string.json文件,查找匹配的关键字,返回其对应的value</strong>。</p> 
 <p>若几个目录中未找到匹配的关键字，则进入base目录中的string.json文件查找</p> 
</blockquote> 
<h5><a id="stringjson_211"></a>string.json配置对应文本</h5> 
<blockquote> 
 <ol><li>找到三个目录下的string.json文件<br> 如下图:</li></ol> 
</blockquote> 
<p><img src="https://images2.imgbox.com/6c/f4/0K5vwvde_o.png" alt="捕获.PNG"></p> 
<blockquote> 
 <ol start="2"><li>在文件中，以一个{}为一组，"name"属性就是查找对应文本的关键字,"value"属性就是显示在页面上的文本。</li></ol> 
</blockquote> 
<p><img src="https://images2.imgbox.com/ed/b6/OpIukXBr_o.png" alt="image.png"></p> 
<blockquote> 
 <p>3.按照上面格式创建新的本地文本即可。</p> 
</blockquote> 
<h5><a id="Text_223"></a>Text组件属性</h5> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">lineHeight</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>  <span class="token comment">//行高</span>
<span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>    <span class="token comment">//字体大小</span>
<span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span><span class="token string">'#ff1876f8'</span><span class="token punctuation">)</span>   <span class="token comment">//字体颜色</span>
<span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span>FontWeight<span class="token punctuation">.</span>Medium<span class="token punctuation">)</span>   <span class="token comment">//字体粗细,参数类型就是下表中的FontWeight类</span>

<span class="token punctuation">.</span><span class="token function">textAlign</span><span class="token punctuation">(</span>TextAlign<span class="token punctuation">.</span>Start<span class="token punctuation">)</span>  <span class="token comment">//文本对齐，TextAlign类分为</span>
<span class="token comment">//Start(默认)水平对齐首部,Center水平居中对齐, End水平对齐尾部</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/d3/25/08d3GSiD_o.png" alt="6b32be031b4840068e71af6700655dfe.png"></p> 
<p><strong>设置文本超长显示</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">//当文本内容较多超出了Text组件范围的时候，</span>
<span class="token comment">//您可以使用textOverflow设置文本截取方式，</span>
<span class="token comment">//需配合maxLines使用，单独设置不生效，maxLines用于设置文本显示最大行数。</span>

 <span class="token punctuation">.</span><span class="token function">maxLines</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment">//最大显示一行</span>
 <span class="token punctuation">.</span><span class="token function">textOverflow</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>overflow<span class="token operator">:</span>TextOverflow<span class="token punctuation">.</span>Ellipsis<span class="token punctuation">}</span><span class="token punctuation">)</span>  
 <span class="token comment">//overflow的类型为TextOverflow.Ellipsis</span>
 <span class="token comment">//将textOverflow设置为Ellipsis,它将显示不下的文本用 "..." 表示</span>
</code></pre> 
<p><strong>设置文本装饰线</strong></p> 
<pre><code class="prism language-ts"><span class="token comment">//使用decoration设置文本装饰线样式及其颜色,decoration包含type和color两个参数，</span>
<span class="token comment">//其中type用于设置装饰线样式，参数类型为TextDecorationTyp，color为可选参数。</span>
</code></pre> 
<pre><code class="prism language-ts"> <span class="token punctuation">.</span><span class="token function">decoration</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> type<span class="token operator">:</span> TextDecorationType<span class="token punctuation">.</span>Underline<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">.</span>Black <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">//TextDecorationTyp包含以下几种类型:</span>
    <span class="token comment">//None：不使用文本装饰线</span>
    <span class="token comment">//Overline：文字上划线修饰</span>
    <span class="token comment">//LineThrough：穿过文本的修饰线</span>
    <span class="token comment">//Underline：文字下划线修饰</span>
</code></pre> 
<h4><a id="TextInput_266"></a>TextInput组件</h4> 
<p>TextInput组件用于输入单行文本，响应输入事件。</p> 
<h5><a id="TextInput_269"></a>声明TextInput组件</h5> 
<p><code>TextInput({ placeholder: '请输入账号' })</code></p> 
<h5><a id="TextInput_271"></a>TextInput组件属性</h5> 
<pre><code class="prism language-ts"><span class="token function">TextInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Blue<span class="token punctuation">)</span>    <span class="token comment">//字体颜色</span>
  <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>            <span class="token comment">//字体大小</span>
  <span class="token punctuation">.</span><span class="token function">fontStyle</span><span class="token punctuation">(</span>FontStyle<span class="token punctuation">.</span>Italic<span class="token punctuation">)</span>  <span class="token comment">//字体形式 </span>
  <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span>FontWeight<span class="token punctuation">.</span>Bold<span class="token punctuation">)</span>    <span class="token comment">//字体粗细</span>
  <span class="token punctuation">.</span><span class="token function">fontFamily</span><span class="token punctuation">(</span><span class="token string">'Arial'</span><span class="token punctuation">)</span>      <span class="token comment">//字体</span>
  
</code></pre> 
<p><strong>设置输入提示文本</strong></p> 
<p>提示功能使用<strong>placeholder</strong>属性,还可以使用<strong>placeholderColor</strong>和<strong>placeholderFont</strong>分别设置提示文本的颜色和样式</p> 
<pre><code class="prism language-ts"><span class="token function">TextInput</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> placeholder<span class="token operator">:</span> <span class="token string">'请输入账号'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">placeholderColor</span><span class="token punctuation">(</span><span class="token number">0x999999</span><span class="token punctuation">)</span>    <span class="token comment">//设置提示文字颜色</span>
  <span class="token punctuation">.</span><span class="token function">placeholderFont</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> size<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> weight<span class="token operator">:</span> FontWeight<span class="token punctuation">.</span>Medium<span class="token punctuation">,</span> 
  family<span class="token operator">:</span> <span class="token string">'cursive'</span><span class="token punctuation">,</span> style<span class="token operator">:</span> FontStyle<span class="token punctuation">.</span>Italic <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">//设置提示文字样式</span>
</code></pre> 
<p><strong>设置输入类型</strong></p> 
<p>可以使用type属性来设置输入框类型。</p> 
<pre><code class="prism language-ts"><span class="token function">TextInput</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> placeholder<span class="token operator">:</span> <span class="token string">'请输入密码'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>InputType<span class="token punctuation">.</span>Password<span class="token punctuation">)</span>      <span class="token comment">//设置输入框为密码框类型</span>
  
  <span class="token comment">//type的参数类型为InputType</span>
  <span class="token comment">//Normal：基本输入模式。支持输入数字、字母、下划线、空格、特殊字符</span>
  <span class="token comment">//Password：密码输入模式</span>
  <span class="token comment">//Email：e-mail地址输入模式</span>
  <span class="token comment">//Number：纯数字输入模式</span>
</code></pre> 
<p><strong>获取输入文本</strong></p> 
<p>可以给TextInput设置onChange事件，输入文本发生变化时触发回调，实时获取用户输入的文本信息。</p> 
<pre><code class="prism language-ts"> <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> value
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="Button_317"></a>Button组件</h4> 
<p>Button组件主要用来响应点击事件，可以包含子组件。</p> 
<h5><a id="Button_321"></a>声明Button组件</h5> 
<p><code>Button('按钮上显示的文本', { type: ButtonType.Capsule, stateEffect: true })</code></p> 
<pre><code class="prism language-ts"> <span class="token comment">//第一个参数类型是ButtonType,用于设置按钮显示样式,</span>
 <span class="token comment">//ButtonType 有三种类型:</span>
 <span class="token comment">//Capsule：胶囊型按钮（圆角默认为高度的一半）</span>
 <span class="token comment">//Circle：圆形按钮。</span>
 <span class="token comment">//Normal：普通按钮（默认不带圆角）</span>
 
 <span class="token comment">//第二个参数类型是boolean,用于按钮按下时是否开启</span>
 <span class="token comment">//按压态显示效果</span>
 
</code></pre> 
<h5><a id="Button_335"></a>Button组件属性</h5> 
<pre><code class="prism language-ts">  <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'90%'</span><span class="token punctuation">)</span>   <span class="token comment">//按钮宽度</span>
  <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>    <span class="token comment">//按钮高度</span>
  <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>   <span class="token comment">//按钮字体大小</span>
  <span class="token punctuation">.</span><span class="token function">fontWeight</span><span class="token punctuation">(</span>FontWeight<span class="token punctuation">.</span>Medium<span class="token punctuation">)</span>   <span class="token comment">//按钮字体粗细</span>
  <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">'#007DFF'</span><span class="token punctuation">)</span>  <span class="token comment">//按钮背景颜色</span>
</code></pre> 
<p><strong>设置按钮点击事件</strong></p> 
<pre><code class="prism language-ts">  <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 处理点击事件逻辑</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>按钮可以包含子组件</strong></p> 
<pre><code class="prism language-ts"><span class="token function">Button</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> type<span class="token operator">:</span> ButtonType<span class="token punctuation">.</span>Circle<span class="token punctuation">,</span> stateEffect<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">Image</span><span class="token punctuation">(</span><span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">'app.media.icon_delete'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
      <span class="token comment">//按钮中包含了图片,则这个图片就是按钮。</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token number">0x317aff</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="Slider_367"></a>Slider组件(滑块)</h4> 
<h5><a id="Slider_368"></a>声明Slider组件</h5> 
<p><code>Slider({max:100,min:0,value:40,step:10,style:SliderStyle.OutSet,direction:Axis.Horizontal,reverse:false})</code></p> 
<blockquote> 
 <p>Slider({参数……})</p> 
 <p>max 进度条最大值</p> 
 <p>min 进度条最小值</p> 
 <p>value 当前滑块所在进度条的位置对应的值</p> 
 <p>step 步长，每次滑动变化的值</p> 
 <p>style:SliderStyle.InSet 滑块在进度条内部还是外部<br> (style:SliderStyle.OutSet)</p> 
 <p>direction:Axis.Horizontal 进度条是水平还是垂直的<br> (direction:Axis.Vertical)</p> 
 <p>reverse :false 是否反向滑动（即<strong>水平</strong>的进度条变为max在左，<br> min在右,<strong>垂直</strong>的进度条变为max在上，min在下）</p> 
</blockquote> 
<p><strong>OutSet与Inset</strong>样式<br> <img src="https://images2.imgbox.com/d8/88/iaPcZpWG_o.png" alt="image.png"></p> 
<h5><a id="Slider_394"></a>Slider组件属性</h5> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'90%'</span><span class="token punctuation">)</span>    <span class="token comment">//进度条的宽</span>
<span class="token punctuation">.</span><span class="token function">showTips</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token comment">//是否展示value的百分比提示</span>
<span class="token punctuation">.</span><span class="token function">blockColor</span><span class="token punctuation">(</span><span class="token string">'#36d'</span><span class="token punctuation">)</span>  <span class="token comment">//滑块颜色</span>
<span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
     <span class="token comment">//进度条改变时的响应事件，value就是当前滑块值   </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="LoadingProgress_404"></a>LoadingProgress组件</h4> 
<p>LoadingProgress组件<strong>用于显示加载进展</strong>，比如应用的登录界面，当我们点击登录的时候，显示的“正在登录”的进度条状态。</p> 
<h5><a id="LoadingProgress_407"></a>LoadingProgress组件声明与属性</h5> 
<pre><code class="prism language-ts"><span class="token function">LoadingProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Blue<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="Video_416"></a>Video组件</h4> 
<p><strong>Video组件</strong>可以帮助 <strong>实现视频的播放功能并控制其播放状态</strong>，常见的视频播放场景包括观看网络上的较为流行的短视频，也包括查看我们存储在本地的视频内容。</p> 
<h5><a id="Video_418"></a>声明Video组件</h5> 
<p><code>Video({src,currentProgressRate,previewUri,controller})</code></p> 
<p>其中包含四个可选参数:<strong>src、currentProgressRate、previewUri和controller。</strong></p> 
<ul><li>src表示视频播放源的路径，可以<strong>支持本地视频路径和网络路径</strong>,使用网络地址,需要注意的是需要在module.json5文件中申请网络权限:<code>"ohos.permission.INTERNET"</code>。</li><li>currentProgressRate表示视频播放倍速，其参数类型为<br> <strong>PlaybackSpeed</strong><br> ，取值支持<br> (<strong>PlaybackSpeed.Speed_Forward_1_00_X</strong>),<br> Speed_Forward_0_75_X,Speed_Forward_2_00_X…………，<br> 默认值为1.0倍速。</li><li>previewUri表示视频未播放时的预览图片路径</li><li>controller表示视频控制器</li></ul> 
<p><img src="https://images2.imgbox.com/10/75/zn495ohz_o.png" alt="image.png"></p> 
<p><img src="https://images2.imgbox.com/54/72/3b0H24av_o.png" alt="捕获.PNG"></p> 
<h5><a id="Video_437"></a>Video组件属性</h5> 
<p>除了支持组件的尺寸设置、位置设置等通用属性外,还有私有的一些属性:</p> 
<p><img src="https://images2.imgbox.com/71/7f/DqCUWZEO_o.png" alt="image.png"></p> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">muted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token comment">//是否静音。默认值：false</span>
<span class="token punctuation">.</span><span class="token function">autoPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">//是否自动播放。默认值：false</span>
<span class="token punctuation">.</span><span class="token function">controls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//控制视频播放的控制栏是否显示,默认值：true</span>
<span class="token punctuation">.</span><span class="token function">objectFit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//设置视频显示模式。默认值：Cover </span>
<span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//是否单个视频循环播放。默认值：false</span>
</code></pre> 
<p><strong>属性objectFit</strong> 中视频显示模式<strong>包括Contain、Cover、Auto、Fill、ScaleDown、None</strong> 6种模式，默认情况下使用ImageFit.Cover（<strong>保持宽高比进行缩小或者放大，使得图片两边都大于或等于显示边界</strong>），其他效果（如自适应显示、保持原有尺寸显示、不保持宽高比进行缩放等）可以根据具体使用场景/设备来进行选择。</p> 
<h5><a id="Video_452"></a>Video组件回调事件介绍</h5> 
<table><thead><tr><th align="left">事件名称</th><th align="left">功能描述</th></tr></thead><tbody><tr><td align="left">onStart(event:() =&gt; void)</td><td align="left">播放时触发该事件。</td></tr><tr><td align="left">onPause(event:() =&gt; void)</td><td align="left">暂停时触发该事件。</td></tr><tr><td align="left">onFinish(event:() =&gt; void)</td><td align="left">播放结束时触发该事件。</td></tr><tr><td align="left">onError(event:() =&gt; void)</td><td align="left">播放失败时触发该事件。</td></tr><tr><td align="left">onPrepared(callback:(event?: { duration: number }) =&gt; void)</td><td align="left">视频准备完成,还未开始播放时触发该事件，通过<strong>duration可以获取视频总时长，单位为s</strong>。</td></tr><tr><td align="left">onSeeking(callback:(event?: { time: number }) =&gt; void)</td><td align="left"><strong>操作进度条过程</strong>时上报时间信息，单位为s,参数event中的成员变量time用于存放播放时间。</td></tr><tr><td align="left">onSeeked(callback:(event?: { time: number }) =&gt; void)</td><td align="left"><strong>操作进度条完成</strong>后，上报播放时间信息，单位为s,参数event中的成员变量time用于存放播放时间。</td></tr><tr><td align="left">onUpdate(callback:(event?: { time: number }) =&gt; void)</td><td align="left">播放进度变化时触发该事件，单位为s，更新时间间隔为250ms,参数event中的成员变量time用于存放播放时间。</td></tr><tr><td align="left">onFullscreenChange(callback:(event?: { fullscreen: boolean }) =&gt; void)</td><td align="left">在全屏播放与非全屏播放</td></tr></tbody></table> 
<p>例子:</p> 
<pre><code class="prism language-ts"><span class="token function">Video</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> event<span class="token punctuation">.</span>time<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentStringTime <span class="token operator">=</span> 
    <span class="token function">changeSliderTime</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//更新事件 </span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  
  <span class="token punctuation">.</span><span class="token function">onPrepared</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>     
    <span class="token function">prepared</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//准备事件 </span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  
  <span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>       <span class="token comment">//prompt为系统自带，直接调用</span>
    prompt<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      duration<span class="token operator">:</span> <span class="token constant">COMMON_NUM_DURATION</span><span class="token punctuation">,</span>    <span class="token comment">//播放失败事件 </span>
      message<span class="token operator">:</span> <span class="token constant">MESSAGE</span>      
      <span class="token comment">//视频播放失败后要展示给用户的信息。</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>其中，onUpdate更新事件在播放进度变化时触发，<strong>从event中可以获取当前播放进度，从而更新进度条显示事件(changeSliderTime()用户自定义的方法)</strong>，比如视频播放时间从24秒更新到30秒。onError事件在视频播放失败时触发，在CommonConstants.ets中定义了常量类MESSAGE，所以在视频播放失败时会显示“请检查网络”。<code>const MESSAGE: string = '请检查网络' </code></p> 
<h5><a id="_495"></a>自定义控制器的组成与实现</h5> 
<p><strong>(样式没有特殊要求的话,建议直接用原生的控制器)</strong></p> 
<p>Video组件的原生控制器样式相对固定，当我们对页面的布局色调的一致性有所要求，或者在拖动进度条的同时需要显示其百分比进度时，原生控制器就无法满足需要了。</p> 
<p><img src="https://images2.imgbox.com/0e/1e/MTeQ1sAH_o.png" alt="捕获.PNG"></p> 
<ul><li>首先要模拟出上图这种进度条效果。</li></ul> 
<pre><code class="prism language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
<span class="token keyword">export</span> struct VideoSlider <span class="token punctuation">{<!-- --></span>
  <span class="token operator">...</span>
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Row</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Image</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>      <span class="token comment">//开始还是暂停播放的图片</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>       <span class="token comment">//已经视频播放了的时长</span>
      <span class="token function">Slider</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>      <span class="token comment">//进度条</span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>        <span class="token comment">//视频总时长</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>两个Text组件显示的时长是由Slider组件的<code>onChange((value: number, mode: SliderChangeMode) =&gt; void)</code>回调事件来进行传递的(<strong>详细请见上面的Slider组件介绍</strong>)，而Text组件的数值与视频播放进度数值value则是通过<code>@Provide</code>与 <code>@Consume</code>装饰器进行的数据联动。</li></ul> 
<p>这里需要把以上的自定义的播放栏写成一个组件，作为整体页面的一个子组件。</p> 
<h6><a id="_524"></a>自定义播放栏（子组件）</h6> 
<pre><code class="prism language-ts"><span class="token comment">/*
 * 自定义播放栏的实现
 *
 * 自定义播放栏组件
 * */</span>
 
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
<span class="token keyword">export</span>  struct  VideoSlider<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">private</span> controller<span class="token operator">:</span> VideoController<span class="token punctuation">;</span>
  <span class="token comment">//系统自带的类，用于对视频的控制</span>
  
  <span class="token comment">//视频是否在播放</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Consume</span></span> isPlay<span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token comment">//默认值是false</span>
  
  <span class="token comment">//显示视频时长</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Consume</span></span> durationTime<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span> 
  <span class="token comment">// 数字类型的视频时长总时间(数值形式，用于接收数据)</span>
  
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Consume</span></span> durationStringTime<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token comment">//字符类型的视频时长总时间(字符串形式，用于界面展示数据)</span>
  
  <span class="token comment">//当前视频进度时间</span>
  <span class="token comment">//(数值形式，用于接收数据，字符串形式，用于界面展示数据)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Consume</span></span> currentTime<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Consume</span></span> currentStringTime<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">;</span>
 
  <span class="token comment">//通过控制滑动条拖动，来控制视频视频进度</span>
  <span class="token function">sliderOnchange</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> mode<span class="token operator">:</span> SliderChangeMode<span class="token punctuation">)</span> 
  <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> 
    Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//获得当前的进度条的滑块值</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span>controller<span class="token punctuation">.</span><span class="token function">setCurrentTime</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>
    value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SeekMode<span class="token punctuation">.</span>Accurate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//将当前滑块的值指定为视频播放的进度位置</span>
  并指定跳转模式为SeekMode<span class="token punctuation">.</span><span class="token function">Accurate</span><span class="token punctuation">(</span>类型为SeekMode<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>space<span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      
        <span class="token comment">//播放图标</span>
        <span class="token function">Image</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlay <span class="token operator">?</span> <span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">"app.media.pause"</span><span class="token punctuation">)</span> <span class="token operator">:</span> 
        <span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">"app.media.start"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//播放暂停按钮</span>
        
          <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isPlay<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>controller<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//视频开始播放</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>isPlay <span class="token operator">=</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>controller<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//视频暂停</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>isPlay <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
          
        <span class="token comment">//显示当前播放时间</span>
        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentStringTime<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span><span class="token string">'#ff0099ff'</span><span class="token punctuation">)</span>
          
        <span class="token comment">//播放进度条</span>
        <span class="token function">Slider</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          value<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">,</span>
          min<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
          max<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>durationTime<span class="token punctuation">,</span>     
          <span class="token comment">//进度条长度就是视频的总长度</span>
          
          step<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'55%'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">trackColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Orange<span class="token punctuation">)</span><span class="token comment">//设置滑轨的背景颜色</span>
          
          <span class="token punctuation">.</span><span class="token function">blockColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span><span class="token comment">//滑块的颜色</span>
          
          <span class="token punctuation">.</span><span class="token function">selectedColor</span><span class="token punctuation">(</span><span class="token string">'#ff0099ff'</span><span class="token punctuation">)</span>
          <span class="token comment">//滑块的已滑动部分颜色</span>
          
          <span class="token punctuation">.</span><span class="token function">showSteps</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
          <span class="token comment">//展示出播放进度</span>
          
          <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> 
          mode<span class="token operator">:</span> SliderChangeMode<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sliderOnchange</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//执行自定义的滑块拖动函数</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          
          
        <span class="token comment">//视频的总时间</span>
        <span class="token function">Text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>durationStringTime<span class="token punctuation">)</span>
        
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token string">'#ff7d6e80'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token string">'6%'</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_629"></a>自定义播放栏与视频结合（父组件）</h6> 
<pre><code class="prism language-ts"><span class="token comment">/*
 * 注意：预览器测试看不了视频，视频只能在模拟器上正常测试预览
 * 视频  video组件的使用
 * */</span>
 
<span class="token comment">//导入自定义播放控制栏</span>
<span class="token keyword">import</span>  <span class="token punctuation">{<!-- --></span> VideoSlider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./VideoSlider'</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct  viedoPage<span class="token punctuation">{<!-- --></span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> videoSrc<span class="token operator">:</span> Resource <span class="token operator">=</span> <span class="token function">$rawfile</span><span class="token punctuation">(</span><span class="token string">'video.mp4'</span><span class="token punctuation">)</span>
  <span class="token comment">//视频路径 </span>
  
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> playSpeed<span class="token operator">:</span>PlaybackSpeed <span class="token operator">=</span> 
  PlaybackSpeed<span class="token punctuation">.</span>Speed_Forward_1_75_X   <span class="token comment">//播放速度</span>
  
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> previewUri<span class="token operator">:</span> Resource <span class="token operator">=</span> 
  <span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">'app.media.previewUriVideoo'</span><span class="token punctuation">)</span> 
  <span class="token comment">//视频未播放时的预览图片路径，默认不显示图片。</span>
 
  <span class="token comment">//定义一个controller对象，用于自定义播放控制栏</span>
  <span class="token keyword">private</span>  controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Provide</span></span> isPlay<span class="token operator">:</span><span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//默认值是false</span>
 
 <span class="token comment">//显示视频总时长</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Provide</span></span> durationTime<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Provide</span></span> durationStringTime<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'00:00'</span>
  
  <span class="token comment">//当前视频进度时间</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Provide</span></span> currentTime<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Provide</span></span> currentStringTime<span class="token operator">:</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'00:00'</span>
 
  <span class="token comment">//视频准备完成时触发该事件</span>
   <span class="token function">prepared</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>durationTime <span class="token operator">=</span> event<span class="token punctuation">.</span>duration<span class="token punctuation">;</span>
    <span class="token comment">//获取视频时长 单位:秒</span>
    
    <span class="token keyword">let</span> second<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> event<span class="token punctuation">.</span>duration <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">;</span>   
    <span class="token comment">//求出总时长的秒数</span>
    
    <span class="token keyword">let</span> min<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>duration
    <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token comment">//求出总时长的分钟数</span>
    
    
    <span class="token keyword">let</span> head <span class="token operator">=</span> min <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>min<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span>min<span class="token punctuation">;</span>
    <span class="token keyword">let</span> end <span class="token operator">=</span> second <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>second<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> second<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>durationStringTime <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>end<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token comment">//分 : 秒 显示</span>
  <span class="token punctuation">}</span>
 
  <span class="token comment">//获取当前播放进度时间</span>
  <span class="token function">changeSliderTime</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> second<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> value <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">;</span>
    
    <span class="token keyword">let</span> min<span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value 
    <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
    
    <span class="token keyword">let</span> head <span class="token operator">=</span> min <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>min<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span>min<span class="token punctuation">;</span>
    <span class="token keyword">let</span> end <span class="token operator">=</span> second <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token number">0</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>second<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> second<span class="token punctuation">;</span>
    <span class="token keyword">let</span> nowTime <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>head<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>end<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> nowTime<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 
  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">//自定义播放栏</span>
      <span class="token function">Video</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            src<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>videoSrc<span class="token punctuation">,</span>
            previewUri<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>previewUri<span class="token punctuation">,</span>
            currentProgressRate<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>playSpeed<span class="token punctuation">,</span>
            controller<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>controller
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token string">'94%'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>
        
       <span class="token comment">//控制视频播放的控制栏不显示</span>
        <span class="token punctuation">.</span><span class="token function">controls</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
        
        <span class="token comment">//视频准备完成时触发该事件</span>
        <span class="token punctuation">.</span><span class="token function">onPrepared</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
         <span class="token comment">//调用对象</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">prepared</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token comment">//获取当前播放进度时间</span>
        <span class="token punctuation">.</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>currentTime <span class="token operator">=</span> event<span class="token operator">?.</span>time<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>currentStringTime <span class="token operator">=</span>  
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeSliderTime</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentTime<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token comment">//播放结束时触发该事件</span>
        <span class="token punctuation">.</span><span class="token function">onFinish</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
          <span class="token comment">//切换播放图标</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>isPlay <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          promptAction<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            message<span class="token operator">:</span><span class="token string">'播放完成'</span><span class="token punctuation">,</span>
            duration<span class="token operator">:</span><span class="token number">2000</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        <span class="token comment">//播放失败触发该事件</span>
        <span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
          <span class="token comment">//显示文本提示框</span>
          promptAction<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            message<span class="token operator">:</span><span class="token string">'播放失败'</span><span class="token punctuation">,</span>
            duration<span class="token operator">:</span><span class="token number">2000</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
      <span class="token comment">//调用自定义播放栏组件</span>
      <span class="token function">VideoSlider</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>controller<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>controller<span class="token punctuation">}</span><span class="token punctuation">)</span>
      
      
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>private controller = new VideoController();</code></p> 
<p><img src="https://images2.imgbox.com/bb/9e/TJORz5y3_o.png" alt="捕获.PNG"></p> 
<h4><a id="_759"></a>使用资源引用类型</h4> 
<p><strong>将资源文件（字符串、图片、音频等）统一存放于resources目录下，便于开发者统一维护</strong>。</p> 
<p>与上面Text()组件，string.json文件配置文本一样，我们同样可以在resources目录下的base目录，en_US目录，zh_CN目录下定义float.json文件,color.json文件等,配置相应的"name"与"value"。查找路径为<code>$r{app.float.关键字}</code>，<code>$r{app.color.关键字}</code>,一切都可以由开发者自己来定义。</p> 
<h3><a id="_765"></a>容器组件</h3> 
<p><strong>ArkTS提供容器组件来布局页面</strong></p> 
<h4><a id="ColumnRow_769"></a>Column和Row组件的使用</h4> 
<p>Column表示沿垂直方向布局的容器(<strong>组件内部的所有子组件自动排成一列</strong>)</p> 
<p>Row表示沿水平方向布局的容器(<strong>组件内部的所有子组件自动排成一行</strong>)</p> 
<h5><a id="_774"></a>主轴和交叉轴概念</h5> 
<ul><li><strong>主轴</strong>：在Column容器中的子组件是按照<strong>从上到下</strong>的垂直方向布局的，其主轴的方向是垂直方向；在Row容器中的组件是按照<strong>从左到右</strong>的水平方向布局的，其主轴的方向是水平方向。</li><li><strong>交叉轴</strong>：与主轴垂直相交的轴线。</li></ul> 
<p><img src="https://images2.imgbox.com/e8/37/lgYfk2Dj_o.png" alt="51c13e2fcbd8c085ec2757bbfa27ab10.png"><br> 浅色为主轴，深色为交叉轴。</p> 
<h5><a id="_781"></a>属性介绍</h5> 
<p><img src="https://images2.imgbox.com/d3/01/4nlCO7e0_o.png" alt="捕获.PNG"></p> 
<p>属性调用的例子:(交叉轴同理)</p> 
<pre><code class="prism language-ts"><span class="token function">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
……………………
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>SpaceBetween<span class="token punctuation">)</span>    <span class="token comment">//主轴对齐</span>
  <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>
</code></pre> 
<ol><li>主轴方向的对齐（justifyContent）</li></ol> 
<p>子组件在主轴方向上的对齐使用<strong>属性justifyContent</strong>来设置，<strong>其参数类型是FlexAlign</strong>,FlexAlign定义了以下几种类型：</p> 
<ul><li>Start：元素在主轴方向首端对齐，第一个元素与行首对齐，同时后续的元素与前一个对齐。</li></ul> 
<p><img src="https://images2.imgbox.com/de/3f/NsVOveZn_o.png" alt="0e38734eceed7847ee9aba4e3e56ec16.png"></p> 
<ul><li>Center：元素在主轴方向中心对齐，第一个元素与行首的距离以及最后一个元素与行尾距离相同。</li></ul> 
<p><img src="https://images2.imgbox.com/5c/44/dxls6NDj_o.png" alt="421aa89739a16dbd66add7b1df26f150.png"></p> 
<ul><li>End：元素在主轴方向尾部对齐，最后一个元素与行尾对齐，其他元素与后一个对齐。</li></ul> 
<p><img src="https://images2.imgbox.com/89/a2/bb3MVAFh_o.png" alt="c3da7c62941f31a4d0fd37db4f567110.png"></p> 
<ul><li>SpaceBetween：元素在主轴方向均匀分配弹性元素，相邻元素之间距离相同。 第一个元素与行首对齐，最后一个元素与行尾对齐。</li></ul> 
<p><img src="https://images2.imgbox.com/f0/0d/rwJoQFdx_o.png" alt="fecdcc021534c05eb89e4a2c8bf89501.png"></p> 
<ul><li>SpaceAround：元素在主轴方向均匀分配弹性元素，相邻元素之间距离相同。 第一个元素到行首的距离和最后一个元素到行尾的距离是相邻元素之间距离的一半。</li></ul> 
<p><img src="https://images2.imgbox.com/35/8d/ns4vN7c1_o.png" alt="1caf7e195b3c8d12cca1fc38a0781c05 (1).png"></p> 
<ul><li>SpaceEvenly：元素在主轴方向等间距布局，无论是相邻元素还是边界元素到容器的间距都一样。</li></ul> 
<p><img src="https://images2.imgbox.com/de/2a/nGPB17ga_o.png" alt="719993b7f50e5c57ebe8acb8eecd7144.png"></p> 
<ol start="2"><li>交叉轴方向的对齐（alignItems）</li></ol> 
<p>子组件在交叉轴方向上的对齐方式<strong>使用alignItems的属性</strong>来设置</p> 
<p>Column容器的属性alignItems()，其<strong>参数类型为HorizontalAlign</strong>（水平对齐），HorizontalAlign定义了以下几种类型：</p> 
<ul><li>Start：设置子组件在水平方向上按照起始端对齐。</li></ul> 
<p><img src="https://images2.imgbox.com/45/60/ve8P4Hnu_o.png" alt="4fe3d70aaeb38983de344567ab19fb43.png"></p> 
<ul><li>Center（默认值）：设置子组件在水平方向上居中对齐</li></ul> 
<p><img src="https://images2.imgbox.com/00/8a/OWPBXZLl_o.png" alt="c498ded72e494e943ec37947244ab4d0.png"></p> 
<ul><li>End：设置子组件在水平方向上按照末端对齐</li></ul> 
<p><img src="https://images2.imgbox.com/52/b3/Q1UzX0lx_o.png" alt="c6110cabdca871e54a81c62b5e13088f.png"></p> 
<p>Row容器的属性alignItems()，其<strong>参数类型为VerticalAlign</strong>（垂直对齐），VerticalAlign定义了以下几种类型：</p> 
<ul><li>Top：设置子组件在垂直方向上居顶部对齐</li></ul> 
<p><img src="https://images2.imgbox.com/59/5b/tHkM7Cdd_o.png" alt="5f14a8c4e560d673727750ec4ef56cfe.png"></p> 
<ul><li>Center（默认值）：设置子组件在竖直方向上居中对齐</li></ul> 
<p><img src="https://images2.imgbox.com/10/13/d9zyCqlI_o.png" alt="f1b338118391bc5853a773e7034f9acd.png"></p> 
<ul><li>Bottom：设置子组件在竖直方向上居底部对齐</li></ul> 
<p><img src="https://images2.imgbox.com/35/84/loZls5rD_o.png" alt="413ed590fc5b16d632c7532106af3c95.png"></p> 
<p><strong>Column和Row容器的接口都有一个可选参数space，表示子组件在主轴方向上的间距。</strong></p> 
<pre><code class="prism language-ts"><span class="token function">Column</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>space<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                  ………………
<span class="token punctuation">}</span>
<span class="token function">Row</span><span class="token punctuation">(</span>value<span class="token operator">?</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>space<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                  ………………
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="List_867"></a>List组件的使用</h4> 
<p>列表(List)是一个复杂的容器组件，具有以下特点:</p> 
<ol><li>列表项(ListItem)数量过多超过屏幕后，会自动提供滚动功能。</li><li>列表项(ListItem)既可以纵向排列，也可以横向排列。</li></ol> 
<p>例子:</p> 
<pre><code class="prism language-ts"><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>space<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment">//space控制子组件(表项)的间距</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">ListItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>    <span class="token comment">//列表项(ListItem)不是容器组件，</span>
            <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"999"</span><span class="token punctuation">)</span>  <span class="token comment">//只是一种约束。</span>
        <span class="token punctuation">}</span>  <span class="token comment">//表项中只能包含一个根组件</span>
        <span class="token comment">//(如果有多个组件，则可以用一个容器组件"打包")</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>   <span class="token comment">//整个列表宽度</span>
<span class="token punctuation">.</span><span class="token function">listDirection</span><span class="token punctuation">(</span>Axis<span class="token punctuation">.</span>Vertical<span class="token punctuation">)</span>  <span class="token comment">//列表方向，默认纵向</span>

<span class="token comment">// Axis.Vertical  纵向</span>
<span class="token comment">//Axis.Horizontal   横向</span>
</code></pre> 
<h5><a id="_891"></a>设置列表分割线</h5> 
<p>List组件子组件ListItem之间默认是没有分割线的，部分场景子组件ListItem间需要设置分割线，这时候您可以使用List组件的<strong>divider属性</strong>。divider属性包含<strong>四个参数</strong>：</p> 
<blockquote> 
 <ul><li>strokeWidth: 分割线的线宽。</li><li>color: 分割线的颜色。</li><li>startMargin：分割线距离列表侧边起始端的距离。</li><li>endMargin: 分割线距离列表侧边结束端的距离。</li></ul> 
</blockquote> 
<p><img src="https://images2.imgbox.com/7f/07/hK9JHihC_o.png" alt="0000000000011111111.20231219114021.70899408000972728202421604905907.png"></p> 
<h5><a id="List_902"></a>List列表滚动事件监听</h5> 
<p>List组件提供了一系列事件方法用来监听列表的滚动，您可以根据需要，监听这些事件来做一些操作：</p> 
<ul><li><strong>onScroll</strong>：列表滑动时触发，返回值scrollOffset为滑动偏移量(相较于滑动前的位置)，scrollState为当前滑动状态。</li><li><strong>onScrollIndex</strong>：列表滑动时触发，返回值分别为滑动起始位置索引值与滑动结束位置索引值。</li><li><strong>onReachStart</strong>：列表到达起始位置时触发。</li><li><strong>onReachEnd</strong>：列表到底末尾位置时触发。</li><li><strong>onScrollStop</strong>：列表滑动停止时触发。</li></ul> 
<pre><code class="prism language-ts"><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> space<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">ForEach</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">,</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">ListItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> item <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">onScrollIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>firstIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> lastIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>        <span class="token comment">//两个参数分别用来接收滑动开始的索引位置和</span>
           <span class="token comment">//结束的索引位置</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'first'</span> <span class="token operator">+</span> firstIndex<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'last'</span> <span class="token operator">+</span> lastIndex<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">onScroll</span><span class="token punctuation">(</span><span class="token punctuation">(</span>scrollOffset<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> scrollState<span class="token operator">:</span> ScrollState<span class="token punctuation">)</span>
<span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//两个参数分别用来接收滑动的相对偏移量</span>
     <span class="token comment">//和结束的索引位置</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'scrollOffset'</span> <span class="token operator">+</span> scrollOffset<span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'scrollState'</span> <span class="token operator">+</span> scrollState<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">onReachStart</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'onReachStart'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">onReachEnd</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
<span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'onReachEnd'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">onScrollStop</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'onScrollStop'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="ListItem_946"></a>子组件ListItem属性</h5> 
<p><code>.swipeAction({end:……})</code><br> <strong>用于设置ListItem的划出组件</strong>。</p> 
<p>参数:</p> 
<ul><li> <p>start: ListItem向右划动时item左边的组件（List垂直布局时）或ListItem向下划动时item上方的组件（List水平布局时）。</p> </li><li> <p>end: ListItem向左划动时item右边的组件（List垂直布局时）或ListItem向上划动时item下方的组件（List水平布局时）。</p> </li><li> <p>edgeEffect: 滑动效果(可选参数)。</p> </li></ul> 
<p><strong>start和end参数至少要存在一个，且两者后面都是@builder装饰的函数。</strong><br> start和end对应的@builder函数中顶层<strong>必须是单个组件</strong>，不能是if/else、ForEach、LazyForEach语句。</p> 
<h4><a id="Grid_962"></a>Grid组件的使用(网格布局)</h4> 
<p><strong>Grid组件</strong>为网格容器,Grid组件一般和子组件GridItem一起使用，Grid列表中的每一个条目对应一个<strong>GridItem组件</strong>。(<strong>与List组件类似</strong>)</p> 
<h5><a id="Grid_966"></a>Grid组件属性</h5> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">columnsTemplate</span><span class="token punctuation">(</span><span class="token string">'1fr 1fr 1fr 1fr'</span><span class="token punctuation">)</span>
<span class="token comment">//网格布局的列数，4个'1fr'就代表4列</span>

<span class="token punctuation">.</span><span class="token function">rowsTemplate</span><span class="token punctuation">(</span><span class="token string">'1fr 1fr 1fr 1fr'</span><span class="token punctuation">)</span>
<span class="token comment">//网格布局的行数，4个'1fr'就代表4行</span>

<span class="token punctuation">.</span><span class="token function">columnsGap</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">//网格布局的列间距</span>

<span class="token punctuation">.</span><span class="token function">rowsGap</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">//网格布局的行间距</span>

<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
<span class="token comment">//网格布局的高</span>

<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">"100%"</span><span class="token punctuation">)</span>
<span class="token comment">//网格布局的宽</span>
</code></pre> 
<p>此外，Grid像List一样也可以<strong>使用onScrollIndex来监听列表的滚动。</strong></p> 
<h4><a id="Tabs_990"></a>Tabs组件的使用(页签)</h4> 
<p>ArkUI开发框架提供了一种页签容器组件Tabs，开发者通过Tabs组件可以很容易的实现内容视图的切换。</p> 
<p><img src="https://images2.imgbox.com/15/4b/m2qNNw4X_o.png" alt="0000000000011111111.20231219114006.15810054681671435100170427657354.png"></p> 
<p><img src="https://images2.imgbox.com/6d/54/s8wXIx3u_o.png" alt="0000000000011111111.20231219114006.46447288653153728154552503552279.png"></p> 
<p>Tabs组件仅可包含<strong>子组件TabContent</strong>，每一个页签对应一个内容视图即TabContent组件。(<strong>与List的子组件Listitem类似</strong>)</p> 
<pre><code class="prism language-ts">  <span class="token function">Tabs</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> barPosition<span class="token operator">:</span> BarPosition<span class="token punctuation">.</span>Start<span class="token punctuation">,</span> 
  controller<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>controller <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">TabContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        该页签对应的页面上的内容
      <span class="token punctuation">}</span>
 <span class="token punctuation">.</span><span class="token function">tabBar</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
</code></pre> 
<p>代码运行效果如下:<br> <img src="https://images2.imgbox.com/a7/ae/QTpYNhWj_o.png" alt="捕获.PNG"></p> 
<p><strong>TabContent的tabBar属性用于设置TabBar的显示内容(页签上显示的内容)</strong></p> 
<blockquote> 
 <ul><li>TabContent组件不支持设置通用宽度属性，其宽度默认撑满Tabs父组件。</li><li>TabContent组件不支持设置通用高度属性，其高度由Tabs父组件高度与TabBar组件高度决定。</li></ul> 
</blockquote> 
<pre><code class="prism language-ts"> <span class="token punctuation">.</span><span class="token function">barWidth</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>  <span class="token comment">// 设置TabBar宽度</span>
 <span class="token punctuation">.</span><span class="token function">barHeight</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>   <span class="token comment">// 设置TabBar高度(TabBar代表页签)</span>
 <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>   <span class="token comment">// 设置Tabs组件宽度</span>
 <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>   <span class="token comment">// 设置Tabs组件高度</span>
 <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token number">0xF5F5F5</span><span class="token punctuation">)</span> <span class="token comment">// 设置Tabs组件背景颜色</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/22/c6/LJx58PCG_o.png" alt="0000000000011111111.20231219114006.79264385194341570090819155451771.png"></p> 
<h5><a id="TabBar_1025"></a>设置TabBar(页签)布局模式</h5> 
<p>BarMode.Fixed：所有TabBar平均分配barWidth宽度（纵向时平均分配barHeight高度）,<strong>页签不可滚动</strong>。</p> 
<p>BarMode.Scrollable：每一个TabBar均使用实际布局宽度，超过总长度（横向Tabs的barWidth，纵向Tabs的barHeight）后<strong>可滑动</strong>。调用: <code>.barMode(BarMode.Scrollable)</code></p> 
<h5><a id="TabBar_1030"></a>设置TabBar(页签)位置和排列方向</h5> 
<p>barPosition的值可以设置为<code>BarPosition.Start（默认值）</code>和<code>BarPosition.End</code></p> 
<p><strong>vertical属性用于设置页签的排列方向，当vertical的属性值为false（默认值）时页签横向排列，为true时页签纵向排列</strong>。</p> 
<p><strong>BarPosition.Start</strong>, vertical属性方法设置为false（默认值）时，页签<strong>位于容器顶部</strong>。vertical属性方法设置为true时，页签<strong>位于容器左侧</strong>。</p> 
<pre><code class="prism language-ts"><span class="token function">Tabs</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> barPosition<span class="token operator">:</span> BarPosition<span class="token punctuation">.</span>Start <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">vertical</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">barWidth</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">barHeight</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>  
</code></pre> 
<p><strong>BarPosition.End</strong>,vertical属性方法设置为false时，页签<strong>位于容器底部</strong>。vertical属性方法设置为true时，页签<strong>位于容器右侧</strong>。</p> 
<pre><code class="prism language-ts"><span class="token function">Tabs</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> barPosition<span class="token operator">:</span> BarPosition<span class="token punctuation">.</span>End<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token function">vertical</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">barWidth</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">barHeight</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="TabBar_1058"></a>自定义TabBar样式</h5> 
<p>TabBar的默认显示效果如下所示：<br> <img src="https://images2.imgbox.com/58/fc/Y5o1ITYK_o.png" alt="0000000000011111111.20231219114007.57593322016245242510238779899423.png"></p> 
<p><strong>TabContent的tabBar属性除了支持string类型，还支持使用@Builder装饰器修饰的函数。</strong></p> 
<p>您可以使用@Builder装饰器，构造一个生成自定义TabBar(页签)样式的函数，实现下面的底部页签效果。</p> 
<p><img src="https://images2.imgbox.com/02/fb/fUOvew9u_o.png" alt="0000000000011111111.20231219114007.72898712019039007392373201818437.png"></p> 
<pre><code class="prism language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct TabsExample <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> currentIndex<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  
  <span class="token keyword">private</span> tabsController<span class="token operator">:</span> TabsController <span class="token operator">=</span>
  <span class="token keyword">new</span> <span class="token class-name">TabsController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Builder</span></span> <span class="token function">TabBuilder</span><span class="token punctuation">(</span>title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
  targetIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> selectedImg<span class="token operator">:</span> Resource<span class="token punctuation">,</span> 
  normalImg<span class="token operator">:</span> Resource<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Image</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">===</span> 
      targetIndex <span class="token operator">?</span> selectedImg <span class="token operator">:</span> normalImg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> width<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span> height<span class="token operator">:</span> <span class="token number">25</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
      <span class="token function">Text</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">===</span> 
        targetIndex <span class="token operator">?</span> <span class="token string">'#1698CE'</span> <span class="token operator">:</span> <span class="token string">'#6B6B6B'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">justifyContent</span><span class="token punctuation">(</span>FlexAlign<span class="token punctuation">.</span>Center<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> targetIndex<span class="token punctuation">;</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>tabsController<span class="token punctuation">.</span><span class="token function">changeIndex</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  
  
  
  

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Tabs</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> barPosition<span class="token operator">:</span> BarPosition<span class="token punctuation">.</span>End<span class="token punctuation">,</span> 
    controller<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tabsController <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">TabContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        页面内容<span class="token number">1</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">tabBar</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">TabBuilder</span><span class="token punctuation">(</span><span class="token string">'首页'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> 
      <span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">'app.media.home_selected'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
      <span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">'app.media.home_normal'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token function">TabContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       网页内容<span class="token number">2</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">tabBar</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">TabBuilder</span><span class="token punctuation">(</span><span class="token string">'我的'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> 
      <span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">'app.media.mine_selected'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">$r</span><span class="token punctuation">(</span><span class="token string">'app.media.mine_normal'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">barWidth</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">barHeight</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span>index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>   <span class="token comment">//获得该页面的id</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>Tabs组件的第二个参数tabsController为控制Tab页面切换的类。</p> 
<p><strong>上面代码解释:</strong></p> 
<p><code>private tabsController: TabsController = new TabsController();</code></p> 
<p><strong>TabsController</strong>类是系统自带的一个类，用于<strong>在Tabs组件中控制页面的切换</strong><br> 使用@Builder修饰TabBuilder函数，生成由Image和Text组成的页签。同时也给Tabs组件设置了TabsController控制器。</p> 
<p>当点击某个页签时，调用changeIndex方法通过每个页面的唯一id来进行不同页面切换。每次点击页签，就会调用该页签对应的<strong>渲染函数(@Builder修饰的函数)</strong>。</p> 
<p>最后还需要给Tabs添加onChange事件，Tab页签切换后触发该事件，这样当我们左右滑动内容视图的时候，页签样式也会跟着改变。</p> 
<h4><a id="Swiper_1145"></a>Swiper组件(轮播图)</h4> 
<h5><a id="Swiper_1146"></a>Swiper声明</h5> 
<p><code>Swiper(){……}</code></p> 
<p><img src="https://images2.imgbox.com/4f/6e/SY9sbFb1_o.png" alt="image.png"></p> 
<h5><a id="Swiper_1152"></a>Swiper属性</h5> 
<pre><code class="prism language-ts"><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment">//默认显示显示第几页，默认值为 0。</span>

<span class="token punctuation">.</span><span class="token function">autoPlay</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>     <span class="token comment">//是否自动播放，默认值为 false</span>

<span class="token punctuation">.</span><span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>     <span class="token comment">//设置自动轮播时，播放的时间间隔，</span>
                   <span class="token comment">//单位毫秒，默认是 3000。</span>

<span class="token punctuation">.</span><span class="token function">indicator</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token comment">//是否显示导航点指示器，默认显示。</span>

<span class="token punctuation">.</span><span class="token function">loop</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>         <span class="token comment">//是否开启循环显示，也就是说</span>
    <span class="token comment">//当翻页到最后一页再往下翻页是否会回到第一页，默认开启</span>
</code></pre> 
<p>也可以通过<strong>SwiperController这个控制器</strong>而不使用autoPlay()自动轮播函数，而是借助于<strong>定时器</strong>来实现轮播图的效果。</p> 
<p><img src="https://images2.imgbox.com/76/90/FDRxWzwV_o.png" alt="image.png"></p> 
<p><code>Swiper(this.controller){……}</code> 绑定轮播控制器</p> 
<p>然后再定义一个函数，通过<strong>定时器setInterval()</strong> 在函数内部借助<strong>swiper.showNext()</strong> 来实现翻页效果，然后我们设置定时器每隔3000毫秒执行一次：</p> 
<p><img src="https://images2.imgbox.com/28/39/0Bo1m0cq_o.png" alt="cke_16396.png"></p> 
<p>在aboutToAppear()函数中调用上面的启动轮播的函数：</p> 
<p><img src="https://images2.imgbox.com/d2/a4/9rxwBkq1_o.png" alt="cke_19854.png"></p> 
<p>在aboutToDisappear()函数中关闭定时器：</p> 
<p><img src="https://images2.imgbox.com/8b/f2/gwyO102z_o.png" alt="cke_23608.png"></p> 
<p><strong>轮播图响应事件</strong></p> 
<p>需求：点击不同的轮播图需要跳转到不同的页面。</p> 
<p><strong>onChange(Index:number)</strong>：当轮播图页面切换时会回调当前方法，显示当前第几页,即放回页面id。</p> 
<p>可以先借助<code>onChange()</code>函数来获取到当前页面的索引，再在<code>onClick()</code>函数中根据页面索引不同而跳转到不同的页面。</p> 
<h4><a id="Stack_1196"></a>Stack组件(堆叠组件)</h4> 
<p>Stack组件为容器组件，容器内<strong>可包含各种子组件</strong>。其中子组件默认进行居中堆叠(<strong>像栈一样,后面元素覆盖在前面元素的上面</strong>)。子元素被约束在Stack下，进行自己的样式定义以及排列。</p> 
<p><code>Stack({ alignContent: Alignment.Center}) {……}</code></p> 
<ul><li>参数alignContent : 设置子组件在容器内的对齐方式。默认值:<code>Alignment.Center</code></li></ul> 
<h3><a id="_1204"></a>其他常用</h3> 
<h4><a id="setIntervalTimeout_1206"></a>定时器setInterval与Timeout</h4> 
<p><strong>setInterval()</strong> 方法可按照指定的周期（以毫秒计）来调用函数或计算表达式。</p> 
<p>setInterval() 方法会<strong>不停地调用函数</strong>，直到 clearInterval() 被调用或窗口被关闭。由 setInterval() 返回的 ID 值可用作 clearInterval() 方法的参数。</p> 
<p>提示： 1000 毫秒= 1 秒。</p> 
<p>提示： 如果你只想执行一次可以使用<strong>setTimeout()</strong> 方法。</p> 
<p><strong>setInterval(function, milliseconds, param1, param2, …)</strong></p> 
<p><img src="https://images2.imgbox.com/67/db/e2IllKA3_o.png" alt="image.png"></p> 
<p>返回值: 返回一个 ID（数字），可以将这个ID传递给clearInterval()，clearTimeout() 以取消执行。</p> 
<h4><a id="Dialog___1225"></a>Dialog 组件 (弹窗)</h4> 
<p>弹窗是一种模态窗口，通常用来展示用户当前需要的或用户必须关注的信息或操作。在弹出框消失之前，用户无法操作其他界面内容。</p> 
<h5><a id="AlertDialog_1229"></a>警告弹窗(AlertDialog)</h5> 
<p>警告弹窗AlertDialog由以下三部分区域构成，对应下面的示意图：</p> 
<ol><li>标题区：为可选的。</li><li>内容区：显示提示消息。</li><li>操作按钮区：用户做”确认“或者”取消“等操作。</li></ol> 
<p><img src="https://images2.imgbox.com/66/74/p4ZauGmJ_o.png" alt=""></p> 
<p>例程代码:</p> 
<pre><code class="prism language-ts"><span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">'点击显示弹窗'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    AlertDialog<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span>   <span class="token comment">//显示出警告弹窗</span>
      <span class="token punctuation">{<!-- --></span>
        title<span class="token operator">:</span> <span class="token string">'删除联系人'</span><span class="token punctuation">,</span>     <span class="token comment">// 标题</span>
        
        message<span class="token operator">:</span> <span class="token string">'是否需要删除所选联系人?'</span><span class="token punctuation">,</span>    <span class="token comment">// 内容</span>
        
        autoCancel<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>   <span class="token comment">// 点击弹窗外的区域时，</span>
                           <span class="token comment">//是否关闭弹窗。</span>
                           
        alignment<span class="token operator">:</span> DialogAlignment<span class="token punctuation">.</span>Bottom<span class="token punctuation">,</span> 
        <span class="token comment">// 弹窗在竖直方向的对齐方式</span>
        
        offset<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> dx<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> dy<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token comment">// 弹窗相对alignment位置的偏移量</span>
        
        primaryButton<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>    <span class="token comment">//取消按钮</span>
          value<span class="token operator">:</span> <span class="token string">'取消'</span><span class="token punctuation">,</span>      <span class="token comment">//内容可更改</span>
          <span class="token function-variable function">action</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>      <span class="token comment">//响应的点击事件</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'777'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        secondaryButton<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>    <span class="token comment">//删除按钮</span>
          value<span class="token operator">:</span> <span class="token string">'删除'</span><span class="token punctuation">,</span>       <span class="token comment">//内容可更改</span>
          fontColor<span class="token operator">:</span> <span class="token string">'#D94838'</span><span class="token punctuation">,</span>
          <span class="token function-variable function">action</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>      <span class="token comment">//响应的点击事件</span>
           <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'666'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        
        <span class="token function-variable function">cancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 点击遮障层(弹窗外的区域)</span>
                           <span class="token comment">//关闭dialog时的回调</span>
         <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'Closed callbacks'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>此外，您还可以使用AlertDialog，<strong>构建只包含一个操作按钮的确认弹窗</strong>，使用<strong>confirm响应操作按钮回调</strong>。</p> 
<p><strong>即将上面代码中两个按钮的部分(删除按钮和取消按钮)替换</strong>为下面的代码:</p> 
<pre><code class="prism language-ts"> confirm<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    value<span class="token operator">:</span> <span class="token string">'确认'</span><span class="token punctuation">,</span>        <span class="token comment">//内容可更改</span>
    <span class="token function-variable function">action</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'888'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h5><a id="_1296"></a>选择类弹窗—文本选择弹窗</h5> 
<p>例程代码:</p> 
<pre><code class="prism language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct TextPickerDialogDemo <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> select<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> fruits<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'苹果'</span><span class="token punctuation">,</span> <span class="token string">'橘子'</span><span class="token punctuation">,</span>
  <span class="token string">'香蕉'</span><span class="token punctuation">,</span> <span class="token string">'猕猴桃'</span><span class="token punctuation">,</span> <span class="token string">'西瓜'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">//存储所有选项的内容</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">'TextPickerDialog'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          TextPickerDialog<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>   <span class="token comment">//显示出文本弹窗</span>
            range<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fruits<span class="token punctuation">,</span> 
            <span class="token comment">//设置文本选择器的选择范围</span>
            
            selected<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>select<span class="token punctuation">,</span> 
            <span class="token comment">//设置初始选中项的索引值，这里是2，表示香蕉。</span>
            
            <span class="token function-variable function">onAccept</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> TextPickerResult<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
            <span class="token punctuation">{<!-- --></span> <span class="token comment">// 点击弹窗中的“确定”按钮时触发该回调。</span>
              
   <span class="token comment">// 设置select为按下确定按钮时候的选中项index，</span>
   <span class="token comment">//这样当弹窗再次弹出时显示选中的是上一次确定的选项</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>select <span class="token operator">=</span> value<span class="token punctuation">.</span>index<span class="token punctuation">;</span>
              
              <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"TextPickerDialog:onAccept()"</span> 
              <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            
            <span class="token function-variable function">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
            <span class="token comment">// 点击弹窗中的“取消”按钮时触发该回调。</span>
            
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>"TextPickerDialog
              <span class="token operator">:</span><span class="token function">onCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
              
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            
            <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> TextPickerResult<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
     <span class="token comment">// 滑动弹窗中的选择器使当前选中项改变时触发该回调。</span>
              <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>'TextPickerDialog<span class="token operator">:</span><span class="token function">onChange</span>
              <span class="token punctuation">(</span><span class="token punctuation">)</span>' <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>效果:<br> <img src="https://images2.imgbox.com/b3/d7/pY8ZLq7C_o.png" alt="image.png"></p> 
<h5><a id="_1356"></a>选择类弹窗—日期选择弹窗</h5> 
<p>当我们需要输入个人出生日期的时候，就可以使用DatePickerDialog。</p> 
<p>例程代码：</p> 
<pre><code class="prism language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct DatePickerDialogDemo <span class="token punctuation">{<!-- --></span>
  selectedDate<span class="token operator">:</span> Date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2010-1-1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">"DatePickerDialog"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          DatePickerDialog<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>   <span class="token comment">//显示日期弹窗</span>
            start<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'1900-1-1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token comment">// 设置选择器的起始日期</span>
            
            end<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2023-12-31'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token comment">// 设置选择器的结束日期</span>
            <span class="token comment">//(当前时间 new Date())</span>
            
            
            selected<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectedDate<span class="token punctuation">,</span> 
            <span class="token comment">// 设置当前选中的日期</span>
            
            lunar<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>   <span class="token comment">//日期是否是农历</span>
            
            <span class="token function-variable function">onAccept</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> DatePickerResult<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
            <span class="token comment">// 点击弹窗中的“确定”按钮时触发该回调</span>
            
      <span class="token comment">// 通过Date的setFullYear方法设置按下确定按钮时</span>
      <span class="token comment">//的日期，这样当弹窗再次弹出时显示选中的是上一次</span>
      <span class="token comment">//确定的日期 </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>selectedDate
     <span class="token punctuation">.</span><span class="token function">setFullYear</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>year<span class="token punctuation">,</span> value<span class="token punctuation">.</span>month<span class="token punctuation">,</span> value<span class="token punctuation">.</span>day<span class="token punctuation">)</span>
     
              <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'999'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            
            <span class="token function-variable function">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
            <span class="token comment">// 点击弹窗中的“取消”按钮时触发该回调</span>
                     <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'555'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            
            <span class="token function-variable function">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> DatePickerResult<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token comment">// 滑动弹窗中的滑动选择器使当前选中项改变时触发该回调</span>
             <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'333'</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>效果:<br> <img src="https://images2.imgbox.com/c4/0c/bWsTlXnU_o.png" alt="image.png"></p> 
<h5><a id="_1419"></a>选择类弹窗—自定义弹窗</h5> 
<p>自定义弹窗的界面可以通过<strong>装饰器@CustomDialog</strong>定义的组件来实现，然后结合<strong>CustomDialogController</strong>来控制自定义弹窗的显示和隐藏。</p> 
<p>通过CustomDialogController类显示自定义弹窗。使用弹窗组件时，可优先考虑自定义弹窗，便于自定义弹窗的样式与内容。</p> 
<p>自定义弹窗声明:<br> <code>CustomDialogController(value:{builder: CustomDialog, cancel?: () =&gt; void, autoCancel?: boolean, alignment?: DialogAlignment, offset?: Offset, customStyle?: boolean, gridCount?: number})</code></p> 
<table><thead><tr><th align="left">参数名</th><th align="left">参数类型</th><th align="left">必填</th><th align="left">参数描述</th></tr></thead><tbody><tr><td align="left">builder</td><td align="left">CustomDialog</td><td align="left">是</td><td align="left">自定义弹窗内容构造器。</td></tr><tr><td align="left">cancel</td><td align="left">() =&gt; void</td><td align="left">否</td><td align="left">点击遮障层退出时的回调。</td></tr><tr><td align="left">autoCancel</td><td align="left">boolean</td><td align="left">否</td><td align="left">是否允许点击遮障层退出。默认值：true</td></tr><tr><td align="left">alignment</td><td align="left"><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/ts-methods-alert-dialog-box-0000001478341185-V3#ZH-CN_TOPIC_0000001523968878__dialogalignment%E6%9E%9A%E4%B8%BE%E8%AF%B4%E6%98%8E" rel="nofollow">DialogAlignment</a></td><td align="left">否</td><td align="left">弹窗在竖直方向上的对齐方式。默认值：DialogAlignment.Default</td></tr><tr><td align="left">offset</td><td align="left"><a href="https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/ts-types-0000001477981241-V3#ZH-CN_TOPIC_0000001573928889__offset" rel="nofollow">Offset</a></td><td align="left">否</td><td align="left">弹窗相对alignment所在位置的偏移量。</td></tr><tr><td align="left">customStyle</td><td align="left">boolean</td><td align="left">否</td><td align="left">弹窗容器样式是否自定义。默认值：false，弹窗容器的宽度根据栅格系统自适应，不跟随子节点；高度自适应子节点，最大为窗口高度的90%；圆角为24vp。</td></tr><tr><td align="left">gridCount8+</td><td align="left">number</td><td align="left">否</td><td align="left">弹窗宽度占<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-layout-development-grid-layout-0000001454765270-V3" rel="nofollow">栅格宽度</a>的个数。默认为按照窗口大小自适应，异常值按默认值处理，最大栅格数为系统最大栅格数。</td></tr></tbody></table> 
<p>代码例程:</p> 
<pre><code class="prism language-ts"><span class="token decorator"><span class="token at operator">@</span><span class="token function">CustomDialog</span></span>      <span class="token comment">//该装饰器表示下面组件是一个弹窗</span>
struct CustomDialogExample <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Link</span></span> textValue<span class="token operator">:</span> <span class="token builtin">string</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Link</span></span> inputValue<span class="token operator">:</span> <span class="token builtin">string</span>
  
  controller<span class="token operator">:</span> CustomDialogController
  <span class="token comment">//用于自动接收对象自己的Controller,</span>
  <span class="token comment">//便于后面对本弹窗的控制</span>
 
 
 <span class="token comment">// 若尝试在CustomDialog中传入多个其他的Controller，</span>
 <span class="token comment">//以实现在CustomDialog中打开另一个或另一些CustomDialog，</span>
 <span class="token comment">//那么此处需要将指向自己的controller放在最后。</span>
 
 
  <span class="token function-variable function">cancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>       <span class="token comment">//用于接收函数</span>
  <span class="token function-variable function">confirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>      <span class="token comment">//用于接收函数</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>       <span class="token comment">//用于渲染弹窗内容</span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Change text'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> bottom<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      
      
      <span class="token function">TextInput</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> placeholder<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> 
      text<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>textValue<span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'90%'</span><span class="token punctuation">)</span>
      
      <span class="token punctuation">.</span><span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//获取输入框内容</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>textValue <span class="token operator">=</span> value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        
        
      <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'Whether to change a text?'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">fontSize</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> bottom<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      
     <span class="token function">Flex</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> justifyContent<span class="token operator">:</span> FlexAlign<span class="token punctuation">.</span>SpaceAround <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    
     <span class="token comment">//表示该组件内部的子组件主轴对齐(横向)</span>
     
        <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">'cancel'</span><span class="token punctuation">)</span>    <span class="token comment">//取消按钮</span>
          <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>controller<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">//关闭本弹窗</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token comment">//执行响应函数</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Black<span class="token punctuation">)</span>
         
        <span class="token function">Button</span><span class="token punctuation">(</span><span class="token string">'confirm'</span><span class="token punctuation">)</span>     <span class="token comment">//确定按钮</span>
          <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>textValue
            <span class="token keyword">this</span><span class="token punctuation">.</span>controller<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//关闭本弹窗</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">//执行响应函数</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token number">0xffffff</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">fontColor</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span>
          
      <span class="token punctuation">}</span>
      <span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> bottom<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      
    <span class="token punctuation">}</span>
    <span class="token comment">// dialog默认的borderRadius为24vp，</span>
    <span class="token comment">//如果需要使用border属性，</span>
    <span class="token comment">//请和borderRadius属性一起使用。</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>




<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entry</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span>
struct CustomDialogUser <span class="token punctuation">{<!-- --></span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> textValue<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">State</span></span> inputValue<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">'click me'</span>
  
  <span class="token comment">//构建弹窗控制器</span>
  dialogController<span class="token operator">:</span> CustomDialogController <span class="token operator">=</span>
  <span class="token keyword">new</span> <span class="token class-name">CustomDialogController</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  
    builder<span class="token operator">:</span> <span class="token function">CustomDialogExample</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>     
    <span class="token comment">//自定义的弹窗构造器，用于生成弹窗的内容。</span>
      cancel<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onCancel<span class="token punctuation">,</span>
      confirm<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAccept<span class="token punctuation">,</span>
      textValue<span class="token operator">:</span> $textValue<span class="token punctuation">,</span>
      inputValue<span class="token operator">:</span> $inputValue
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    
    cancel<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>existApp<span class="token punctuation">,</span>      
    <span class="token comment">//点击弹窗外区域后退出的回调函数</span>
    
    autoCancel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">//是否允许点击弹窗外区域后退出</span>
    
    alignment<span class="token operator">:</span> DialogAlignment<span class="token punctuation">.</span>Bottom<span class="token punctuation">,</span>
    <span class="token comment">//弹窗的位置</span>
    
    offset<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> dx<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> dy<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//弹窗位置的偏移量</span>
    
    gridCount<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    
    customStyle<span class="token operator">:</span> <span class="token boolean">false</span>     <span class="token comment">//弹窗样式是否自定义</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 在自定义组件即将析构销毁时将dialogController置空</span>
  <span class="token function">aboutToDisappear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  
    <span class="token keyword">this</span><span class="token punctuation">.</span>dialogController <span class="token operator">=</span> <span class="token keyword">undefined</span> 
    <span class="token comment">// 将dialogController置空</span>
    
  <span class="token punctuation">}</span>

  <span class="token function">onCancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'222'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onAccept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'111'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">existApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'444'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">Button</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>dialogController <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>dialogController<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">backgroundColor</span><span class="token punctuation">(</span><span class="token number">0x317aff</span><span class="token punctuation">)</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token string">'100%'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> top<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_1583"></a>动画</h4> 
<h5><a id="_1584"></a>属性动画</h5> 
<p><strong>属性动画</strong>通过设置组件的<strong>animation属性</strong>来给组件添加动画，当组件的<strong>width，height，Opacity(透明度),backgroundColor，scale(缩放比例)，rotate，translate(平移的距离)</strong> 等属性变更时,可以实现渐变过渡效果(动画效果)。</p> 
<p>animation参数：</p> 
<p><img src="https://images2.imgbox.com/7b/bd/PmIcYdI6_o.png" alt="image.png"></p> 
<p><img src="https://images2.imgbox.com/ff/cd/d1CiIugY_o.png" alt="image.png"></p> 
<p><img src="https://images2.imgbox.com/6c/39/2t7ZoxkE_o.png" alt="image.png"></p> 
<p>例程代码：</p> 
<pre><code class="prism language-ts"><span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"&gt;_&lt;"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>    <span class="token comment">//组件位置(页面左上角为原点)</span>
    x<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>     <span class="token comment">//x轴坐标</span>
    y<span class="token operator">:</span><span class="token number">0</span>       <span class="token comment">//y轴坐标</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    angle<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>      <span class="token comment">//旋转角度</span>
    centerX<span class="token operator">:</span><span class="token string">'50%'</span><span class="token punctuation">,</span>  <span class="token comment">//旋转中心横坐标</span>
    centerY<span class="token operator">:</span><span class="token string">'50%'</span>   <span class="token comment">//旋转中心纵坐标</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">animation</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    duration<span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>
    curve<span class="token operator">:</span>Curve<span class="token punctuation">.</span>EaseInOut
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>当Text组件的属性发生变化(<strong>因此要单独添加响应事件来控制属性变化</strong>)时，就会自动产生渐变的效果(即动画效果)，<strong>.animation()属性必须定义在所有要发生变化的属性的后面才能起作用</strong>。</p> 
<h5><a id="_1618"></a>显式动画</h5> 
<p><strong>显式动画</strong>通过<strong>全局animateTo函数</strong>来修改组件属性，实现属性变化时的渐变效果(动画效果)。</p> 
<p>例程代码:</p> 
<pre><code class="prism language-ts"><span class="token function">animateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>参数<span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>

<span class="token comment">//该函数用于修改与属性相关联的状态变量，</span>
<span class="token comment">//即控制组件的属性变化</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment">//参数1即动画参数，与属性动画参数相同</span>

</code></pre> 
<h5><a id="_1634"></a>组件转场动画</h5> 
<p>组件内转场主要通过<strong>transition属性</strong>配置转场参数，在<strong>组件插入和删除</strong>时显示过渡动效果。</p> 
<p>属性的参数：</p> 
<p><img src="https://images2.imgbox.com/9b/f3/hRLLxt9z_o.png" alt="image.png"><br> <img src="https://images2.imgbox.com/85/75/Oc5UBNNH_o.png" alt="image.png"></p> 
<pre><code class="prism language-ts"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isShow<span class="token punctuation">)</span>    <span class="token comment">//boolean状态变量，</span>
                 <span class="token comment">//用于控制组件的出现与消失(插入与删除)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">"&gt;_&lt;"</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        opacity<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        rotate<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>angle<span class="token operator">:</span><span class="token operator">-</span><span class="token number">360</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        scale<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>x<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span>   <span class="token comment">//放缩比例，表示插入的起点， </span>
                         <span class="token comment">//删除的终点，0表示缩到最小</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>组件转场动画必须配合显示动画(用来控制状态变量)来使用</strong>。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1a2a8e9a7675a3b1f1f7190dae761ffc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在VMware上安装MySQL</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ff5c55b8975beef128ac1752c468cf14/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【RPC】动态代理：面向接口编程，屏蔽RPC处理流程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
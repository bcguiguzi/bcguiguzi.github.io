<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT 添加带有滚动条的窗口，并使之滚动起来 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT 添加带有滚动条的窗口，并使之滚动起来" />
<meta property="og:description" content="QT ui designer中提供了一个叫做QScrollBar的控件，但这导致了人们的一个误区，就是必须要使用这个控件，才能使窗口滚动起来
虽然可以通过这个控件来达到目的，但是需要自己去绑定和窗口滚动的一些信号和槽函数，非常麻烦。
因此，我们通常选择另一种方案来实现窗口滚动：QScrollArea控件。
这个控件自带了滚动条，我们只需要在使用前设置好这个控件的一些参数即可。
这个控件自带了一个子控件：QWidget:scrollAreaWidget。 我们需要对这个控件的一些参数进行设置。
要想看到滚动条的一个必要条件就是scrollAreaWidget的尺寸大于scrollArea。
这里我们可以看到，两个控件尺寸都相同，此时运行程序，是不会看到右边有垂直滚动条的
我们修改scrollAreaWidget的尺寸高度为1000
再次运行程序
结果还是没有垂直滚动条，这是什么原因呢？ 因为QScrollArea在Qt designer中有一个属性：WidgetResizable。 它的默认属性为true(勾选)，false(未勾选)
我们需要取消这个钩，将其属性设置为false,之后再次运行程序
这是就可以看到右边出现了滚动条，此时出现的滚动条已经可以通过鼠标滚轮，鼠标左键拖拽，点击来控制显示区域了，都不需要自己去实现什么函数。
和QScrollBar相比，简直不要太方便。
但是，再界面上需要动态添加控件的时候，给scrollAreaWidget设置一个固定的尺寸就不合适了，因为当控件的坐标超出scrollAreaWidget的尺寸时，依然无法显示
此时，就需要在动态生成控件的时候添加一个判断，判断控件的位置&#43;尺寸是否超出了scrollAreaWidget的显示范围，如果超出，则需要使用函数
ui-&gt;scrollAreaWidget-&gt;setGeometry(0, 0, 340, ui-&gt;scrollAreaWidget-&gt;height()&#43;30); 动态的设置scrollAreaWidget的尺寸大小，这样就能保证无论生成多少动态控件，始终都在scrollAreaWidget范围内，而且可以通过滚动条滚动来显示不同区域的控件
补充使用代码添加滚动区域的方法
首先在界面上随便放置一个容器，我们这里放置了一个groupbox
然后在头文件中添加如下代码
QHBoxLayout *layout; QScrollArea *scrollarea; QWidget *scrollareacontent; 然后在构造函数中添加如下代码
Widget::Widget(QWidget *parent) :QWidget(parent),ui(new Ui::Widget) { ui-&gt;setupUi(this); scrollarea = new QScrollArea(ui-&gt;groupBox); scrollarea-&gt;setWidgetResizable(true); scrollarea-&gt;setGeometry(0,0,ui-&gt;groupBox-&gt;width(),ui-&gt;groupBox-&gt;height()); layout = new QHBoxLayout(ui-&gt;groupBox); scrollareacontent = new QWidget(ui-&gt;groupBox); scrollareacontent-&gt;setLayout(layout); scrollarea-&gt;setWidget(scrollareacontent); } 注意，这里设置的父对象是ui-&gt;groupbox，就是我们前面添加在主界面上的groupbox控件
然后添加按钮槽函数，实现点击一个按钮就在groupbox中添加一个新按钮的功能，准确的说，应该是在scrollareacontent中添加新的按钮
void Widget::on_pushButton_clicked() { QPushButton *btn = new QPushButton(scrollareacontent); btn-&gt;setMinimumSize(btn-&gt;size()); layout-&gt;addWidget(btn); } 新建按钮的时候，它的父对象是scrollareacontent，如果是别的父对象，滚动条将不会生效。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/9e28a758bbefa812155e1e6382e31178/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-24T23:09:09+08:00" />
<meta property="article:modified_time" content="2023-03-24T23:09:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT 添加带有滚动条的窗口，并使之滚动起来</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>QT  ui designer中提供了一个叫做QScrollBar的控件，但这导致了人们的一个误区，就是必须要使用这个控件，才能使窗口滚动起来</p> 
<p>虽然可以通过这个控件来达到目的，但是需要自己去绑定和窗口滚动的一些信号和槽函数，非常麻烦。</p> 
<p>因此，我们通常选择另一种方案来实现窗口滚动：QScrollArea控件。</p> 
<p>这个控件自带了滚动条，我们只需要在使用前设置好这个控件的一些参数即可。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f4/ed/rFlgoERR_o.png"></p> 
<p></p> 
<p>这个控件自带了一个子控件：QWidget:scrollAreaWidget。 我们需要对这个控件的一些参数进行设置。</p> 
<p>要想看到滚动条的一个必要条件就是scrollAreaWidget的尺寸大于scrollArea。</p> 
<p></p> 
<p> </p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/1b/d0/Aydh4CTF_o.png"></p> 
<p></p> 
<p></p> 
<p> 这里我们可以看到，两个控件尺寸都相同，此时运行程序，是不会看到右边有垂直滚动条的</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/de/bf/4CoErEu7_o.png"></p> 
<p></p> 
<p></p> 
<p> 我们修改scrollAreaWidget的尺寸高度为1000</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/5c/06/u6a2eFQr_o.png"></p> 
<p></p> 
<p></p> 
<p> 再次运行程序</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/1a/b6/immHyYlK_o.png"></p> 
<p></p> 
<p></p> 
<p> 结果还是没有垂直滚动条，这是什么原因呢？ </p> 
<p>因为QScrollArea在Qt designer中有一个属性：WidgetResizable。 它的默认属性为true(勾选)，false(未勾选)</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/7b/bc/2kFfj8im_o.png"></p> 
<p>我们需要取消这个钩，将其属性设置为false,之后再次运行程序</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f8/db/zYIDV407_o.png"></p> 
<p></p> 
<p></p> 
<p> 这是就可以看到右边出现了滚动条，此时出现的滚动条已经可以通过鼠标滚轮，鼠标左键拖拽，点击来控制显示区域了，都不需要自己去实现什么函数。</p> 
<p>和QScrollBar相比，简直不要太方便。</p> 
<p>但是，再界面上需要动态添加控件的时候，给scrollAreaWidget设置一个固定的尺寸就不合适了，因为当控件的坐标超出scrollAreaWidget的尺寸时，依然无法显示</p> 
<p>此时，就需要在动态生成控件的时候添加一个判断，判断控件的位置+尺寸是否超出了scrollAreaWidget的显示范围，如果超出，则需要使用函数</p> 
<pre>ui-&gt;scrollAreaWidget-&gt;setGeometry(0, 0, 340, ui-&gt;scrollAreaWidget-&gt;height()+30);</pre> 
<p>动态的设置scrollAreaWidget的尺寸大小，这样就能保证无论生成多少动态控件，始终都在scrollAreaWidget范围内，而且可以通过滚动条滚动来显示不同区域的控件</p> 
<p></p> 
<p>补充使用代码添加滚动区域的方法</p> 
<p>首先在界面上随便放置一个容器，我们这里放置了一个groupbox</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/cd/3a/DO6WbOn1_o.png"></p> 
<p></p> 
<p>然后在头文件中添加如下代码</p> 
<pre>    QHBoxLayout *layout;
    QScrollArea *scrollarea;
    QWidget *scrollareacontent;</pre> 
<p>然后在构造函数中添加如下代码</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/fd/af/UeqXtiKP_o.gif"></p> 
<pre>Widget::Widget(QWidget *parent) :QWidget(parent),ui(new Ui::Widget)
{
    ui-&gt;setupUi(this);

    scrollarea = new QScrollArea(ui-&gt;groupBox);
    scrollarea-&gt;setWidgetResizable(true);
    scrollarea-&gt;setGeometry(0,0,ui-&gt;groupBox-&gt;width(),ui-&gt;groupBox-&gt;height());

    layout = new QHBoxLayout(ui-&gt;groupBox);
    scrollareacontent = new QWidget(ui-&gt;groupBox);

    scrollareacontent-&gt;setLayout(layout);
    scrollarea-&gt;setWidget(scrollareacontent);
}</pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/5d/89/F3Pg5AOB_o.gif"></p> 
<p>注意，这里设置的父对象是ui-&gt;groupbox，就是我们前面添加在主界面上的groupbox控件</p> 
<p>然后添加按钮槽函数，实现点击一个按钮就在groupbox中添加一个新按钮的功能，准确的说，应该是在scrollareacontent中添加新的按钮</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b8/e8/7X3j0tKO_o.gif"></p> 
<pre>void Widget::on_pushButton_clicked()
{
    QPushButton *btn = new QPushButton(scrollareacontent);
    btn-&gt;setMinimumSize(btn-&gt;size());
    layout-&gt;addWidget(btn);
}</pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/cc/ba/LjVQo9jt_o.gif"></p> 
<p>新建按钮的时候，它的父对象是scrollareacontent，如果是别的父对象，滚动条将不会生效。</p> 
<p>之后，点击这个按钮就可以生成新的按钮控件，并且自动布局，布局大小超出scrollareacontent之后，会自动出现滚动条。</p> 
<p> 参考网址：https://www.cnblogs.com/ybqjymy/p/14592422.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/461ea249918867d6a938ba7e4e71c2f3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Qt | 鼠标事件和滚轮事件 QMouseEvent、QWheelEvent</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9f660947a619bb2a6e3ea04925d8a25e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【angular-gojs使用笔记】gojs-angular的基本使用。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>http转https，腾讯云服务器SSL证书安装指引 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="http转https，腾讯云服务器SSL证书安装指引" />
<meta property="og:description" content="Nginx的产生 没有听过Nginx？那么一定听过它的&#34;同行&#34;Apache吧！Nginx同Apache一样都是一种WEB服务器。基于REST架构风格，以统一资源描述符(Uniform Resources Identifier)URI或者统一资源定位符(Uniform Resources Locator)URL作为沟通依据，通过HTTP协议提供各种网络服务。
简单说，你的腾讯云主机想成为能通过http请求到数据的服务器，就必须配置成WEB服务器，Nginx就是WEB服务器的其中一种类型。所以在实现http转https之前，你需要配置你的腾讯云服务器为Nginx服务器。
一、Linux 安装Nginx rpm 包方式（推荐） （1）进入下载页面，选择合适版本下载。
$ wget http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm （2）安装 nginx rpm 包
nginx rpm 包实际上安装的是 nginx 的 yum 源。
$ rpm -ivh nginx-*.rpm （3）正式安装 rpm 包
$ yum install nginx （4）关闭防火墙
$ firewall-cmd --zone=public --add-port=80/tcp --permanent $ firewall-cmd --reload （5） 启动 Nginx
安装成功后，直接执行 nginx 命令即可启动 nginx。
启动后，访问站点：
Linux 开机自启动 Centos7 以上是用 Systemd 进行系统初始化的，Systemd 是 Linux 系统中最新的初始化系统（init），它主要的设计目标是克服 sysvinit 固有的缺点，提高系统的启动速度。Systemd 服务文件以 .service 结尾。
rpm 包方式 如果是通过 rpm 包安装的，会自动创建 nginx." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/e76bd91bdfe19b761f11c4fd9949d6ee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-18T11:50:48+08:00" />
<meta property="article:modified_time" content="2019-07-18T11:50:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">http转https，腾讯云服务器SSL证书安装指引</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>Nginx的产生</h2> 
<p>没有听过Nginx？那么一定听过它的"同行"Apache吧！Nginx同Apache一样都是一种WEB服务器。基于REST架构风格，以统一资源描述符(Uniform Resources Identifier)URI或者统一资源定位符(Uniform Resources Locator)URL作为沟通依据，通过HTTP协议提供各种网络服务。</p> 
<p>简单说，你的腾讯云主机想成为能通过http请求到数据的服务器，就必须配置成WEB服务器，Nginx就是WEB服务器的其中一种类型。所以在实现http转https之前，你需要配置你的腾讯云服务器为Nginx服务器。</p> 
<h3>一、Linux 安装Nginx</h3> 
<h4>rpm 包方式（推荐）</h4> 
<p>（1）进入<a href="http://nginx.org/packages/" rel="nofollow">下载页面</a>，选择合适版本下载。</p> 
<pre class="has"><code class="language-html">$ wget http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</code></pre> 
<p>（2）安装 nginx rpm 包</p> 
<p>nginx rpm 包实际上安装的是 nginx 的 yum 源。</p> 
<pre class="has"><code class="language-html">$ rpm -ivh nginx-*.rpm</code></pre> 
<p>（3）正式安装 rpm 包</p> 
<pre class="has"><code class="language-html">$ yum install nginx</code></pre> 
<p>（4）关闭防火墙</p> 
<pre class="has"><code class="language-html">$ firewall-cmd --zone=public --add-port=80/tcp --permanent
$ firewall-cmd --reload
</code></pre> 
<p>（5） 启动 Nginx</p> 
<p>安装成功后，直接执行 <code>nginx</code> 命令即可启动 nginx。</p> 
<p>启动后，访问站点：</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/dd/92/rbPXjGup_o.png"></p> 
<p> </p> 
<h3>Linux 开机自启动</h3> 
<p>Centos7 以上是用 Systemd 进行系统初始化的，Systemd 是 Linux 系统中最新的初始化系统（init），它主要的设计目标是克服 sysvinit 固有的缺点，提高系统的启动速度。Systemd 服务文件以 .service 结尾。</p> 
<h4>rpm 包方式</h4> 
<p>如果是通过 rpm 包安装的，会自动创建 nginx.service 文件。</p> 
<p>直接用命令：</p> 
<pre class="has"><code class="language-html">$ systemctl enable nginx.service</code></pre> 
<p>设置开机启动即可。</p> 
<h2>二、配置SSL证书</h2> 
<h3> Nginx 证书部署</h3> 
<h4>获取证书</h4> 
<p>Nginx文件夹内获得<a href="https://cloud.tencent.com/product/ssl" rel="nofollow">SSL证书</a>文件 1_www.domain.com_bundle.crt 和私钥文件 2_www.domain.com.key,<br> 1_www.domain.com_bundle.crt 文件包括两段证书代码 “-----BEGIN CERTIFICATE-----”和“-----END CERTIFICATE-----”,<br> 2_www.domain.com.key 文件包括一段私钥代码“-----BEGIN RSA PRIVATE KEY-----”和“-----END RSA PRIVATE KEY-----”。</p> 
<h4> 证书安装</h4> 
<p>将<a href="https://dnspod.cloud.tencent.com/" rel="nofollow">域名</a> www.domain.com 的证书文件1_www.domain.com_bundle.crt 、私钥文件2_www.domain.com.key保存到同一个目录，例如/usr/local/nginx/conf目录下。<br> 更新Nginx根目录下 etc/nginx/conf.d/default.conf 文件如下：</p> 
<ul><li> <p> </p> </li></ul> 
<pre class="has"><code class="language-html">server {
    listen       80;
    server_name  www.xx.com;
    rewrite ^(.*) https://$host$1 permanent;//将http 请求跳转https
   }
server {
   listen 443;
   server_name www.xx.com; #填写绑定证书的域名
   ssl on;
   ssl_certificate 1_www.xx.com_bundle.crt;
   ssl_certificate_key 2_www.xx.com.key;
   ssl_session_timeout 5m;
   ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置
   ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置
   ssl_prefer_server_ciphers on;
   location / {
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header Host  $http_host;
       proxy_set_header X-Nginx-Proxy true;
       proxy_set_header Connection "";
       proxy_pass      http://127.0.0.1:3000;
        }
    }
 
</code>
</pre> 
<p>配置完成后，重启nginx。就可以使用 <code>https://www.domain.com</code> 来访问了。</p> 
<p>注：</p> 
<p>配置文件参数说明</p> 
<table><tbody><tr><td>listen 443</td><td>SSL访问端口号为443</td></tr><tr><td>ssl on</td><td>启用SSL功能</td></tr><tr><td>ssl_certificate</td><td>证书文件</td></tr><tr><td>ssl_certificate_key</td><td>私钥文件</td></tr><tr><td>ssl_protocols</td><td>使用的协议</td></tr><tr><td>ssl_ciphers</td><td>配置加密套件，写法遵循openssl标准</td></tr></tbody></table> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/951744ed08e392239d371b1389f4b907/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">net::err_file_not_found只有谷歌报错 样式正常 解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fc1732653e5670bfb77e2811786a9bce/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HC32F003系列芯片时钟源性能测试及分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java基础之国际化 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java基础之国际化" />
<meta property="og:description" content="国际化程序实现 文章目录 国际化程序实现原理前期准备编码问题读取资源文件ResourceBundle 实现步骤消息格式化显示 原理 国际化程序：同一个程序代码可以根据不同语言描述，但核心业务是相同的
实现国际化程序开发
定义保存文字的文本信息
根据不同区域语言的编码读取指定的资源信息
前期准备 编码问题 解决不同国家用户的区域和语言的编码问题
java.uilt.Locale 类专门描述区域和语言编码 Locale 类主要构造方法
public Locale(String language)
public Locale(String language, String country)
需要国家和语言的代码 中文的代码:zh_CN美国英语的代码: en_US 区域和语言的编码最佳获得方式就是通过 IE 浏览器
利用 Locale 类自动获取当前运行环境
默认方式实例化 读取本地默认环境 Locale loc = Locale.getDefault();loc 输出 zh_CN 在实际开发中大多并不关心国家和语言的编码，将一些著名国家编码设置了常量简化开发
常量实例化 Locale 对象 Locale loc = Locale.CHINA; loc 输出 zh_CN 避免一些区域编码信息的繁琐 读取资源文件 主要依靠 ResourceBundle 类进行
public abstrach class ResourceBundle{} 该类为抽象类，使用其子类完成资源读取
或其中的一个静态方法获取 ResourceBundle 对象 public static final ResourceBundle getBundle(String baseName) baseName：资源文件名称，不含后缀；即资源文件路径 根据 key 读取资源内容 public final String getString(String key) 资源读取时要确保路径下有文件，且文件中存在相应的 key ResourceBundle 包含特定于语言环境的对象" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/196e9f38b8254080bd655049b031df11/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-18T23:38:16+08:00" />
<meta property="article:modified_time" content="2022-08-18T23:38:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java基础之国际化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>国际化程序实现</h3> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_0" rel="nofollow">国际化程序实现</a></li><li><ul><li><a href="#_2" rel="nofollow">原理</a></li><li><a href="#_14" rel="nofollow">前期准备</a></li><li><ul><li><a href="#_16" rel="nofollow">编码问题</a></li><li><a href="#_45" rel="nofollow">读取资源文件</a></li><li><a href="#ResourceBundle_59" rel="nofollow">ResourceBundle</a></li></ul> 
    </li><li><a href="#_126" rel="nofollow">实现</a></li><li><ul><li><a href="#_128" rel="nofollow">步骤</a></li><li><a href="#_165" rel="nofollow">消息格式化显示</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_2"></a>原理</h4> 
<ul><li> <p>国际化程序：同一个程序代码可以根据不同语言描述，但核心业务是相同的</p> </li><li> <p>实现国际化程序开发</p> 
  <ul><li> <p>定义保存文字的文本信息</p> </li><li> <p>根据不同区域语言的编码读取指定的资源信息</p> </li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/6a/ca/U8WkeONW_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_14"></a>前期准备</h4> 
<h5><a id="_16"></a>编码问题</h5> 
<ul><li> <p>解决不同国家用户的区域和语言的编码问题</p> 
  <ul><li><code>java.uilt.Locale</code> 类专门描述区域和语言编码</li></ul> </li><li> <p><code>Locale</code> 类主要构造方法</p> 
  <ul><li> <p><code>public Locale(String language)</code></p> </li><li> <p><code>public Locale(String language, String country)</code></p> 
    <ul><li>需要国家和语言的代码 
      <ul><li>中文的代码:<code>zh_CN</code></li><li>美国英语的代码: <code>en_US</code></li></ul> </li></ul> </li><li> <p>区域和语言的编码最佳获得方式就是通过 <code>IE</code> 浏览器</p> </li></ul> </li><li> <p>利用 <code>Locale</code> 类自动获取当前运行环境</p> 
  <ul><li>默认方式实例化 
    <ul><li>读取本地默认环境 <code>Locale loc = Locale.getDefault();</code></li><li><code>loc</code> 输出 <code>zh_CN</code></li></ul> </li></ul> </li><li> <p>在实际开发中大多并不关心国家和语言的编码，将一些著名国家编码设置了常量简化开发</p> 
  <ul><li>常量实例化 <code>Locale</code> 对象 <code>Locale loc = Locale.CHINA;</code> 
    <ul><li><code>loc</code> 输出 <code>zh_CN</code></li></ul> </li><li>避免一些区域编码信息的繁琐</li></ul> </li></ul> 
<h5><a id="_45"></a>读取资源文件</h5> 
<ul><li> <p>主要依靠 <code>ResourceBundle</code> 类进行</p> 
  <ul><li><code>public abstrach class ResourceBundle{}</code></li></ul> </li><li> <p>该类为抽象类，使用其子类完成资源读取</p> 
  <ul><li>或其中的一个静态方法获取 <code>ResourceBundle</code> 对象 
    <ul><li><code>public static final ResourceBundle getBundle(String baseName)</code> 
      <ul><li><code>baseName</code>：资源文件名称，不含后缀；即资源文件路径</li></ul> </li></ul> </li><li>根据 <code>key</code> 读取资源内容 
    <ul><li><code>public final String getString(String key) </code></li><li>资源读取时要确保路径下有文件，且文件中存在相应的 <code>key</code></li></ul> </li></ul> </li></ul> 
<h5><a id="ResourceBundle_59"></a>ResourceBundle</h5> 
<ul><li> <p>包含特定于语言环境的对象</p> 
  <ul><li>当程序需要特定于语言环境的资源（例如 <code>String</code> ）时可以从适合当前用户语言环境的资源包中加载</li></ul> </li><li> <p>程序可以</p> 
  <ul><li>一次处理多个语言环境</li><li>轻松修改以支持更多语言环境</li></ul> </li><li> <p>如果不同国家有不同的资源，可以进行专门化</p> 
  <ul><li>例如：<code>MyResources_de_CH</code> 包含瑞士( CH ) 的德语 ( de ) 对象</li><li>如果只想修改专精中的部分资源，可以这样做</li></ul> </li><li> <p>程序需要特定于语言环境的对象时，使用 <code>getBundle</code> 方法加载 <code>ResourceBundle</code> 类</p> 
  <ul><li><code>ResourceBundle myResources = ResourceBundle.getBundle("MyResources", currentLocale);</code></li><li>资源包包含键/值对 
    <ul><li>键唯一地标识包中特定于语言环境的对象</li><li>键必须是 <code>String</code></li><li>值可以是任何类型的对象</li></ul> </li></ul> </li><li> <p><code>ListResourceBundle</code>示例</p> 
  <ul><li> <pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyResources</span> <span class="token keyword">extends</span> <span class="token class-name">ListResourceBundle</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">protected</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// LOCALIZE THE SECOND STRING OF EACH ARRAY (e.g., "OK")</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"OkKey"</span><span class="token punctuation">,</span> <span class="token string">"OK"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"CancelKey"</span><span class="token punctuation">,</span> <span class="token string">"Cancel"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// END OF MATERIAL TO LOCALIZE</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul> </li><li> <p>使用 <code>getter</code> 方法从资源包中检索对象</p> 
  <ul><li><code>getter</code> 方法需要键作为参数 
    <ul><li>找到则返回对象</li><li>如果找不到对象 <code>getter</code> 方法会抛出 <code>MissingResourceException</code></li></ul> </li><li><code>ResourceBundle</code> 提供了一种获取字符串数组的方法 <code>getStringArray</code></li><li>用于任何其他类型对象的通用 <code>getObject</code> 方法 
    <ul><li>使用 <code>getObject</code> 时，必须将结果转换为适当的类型</li><li>例如：<code>int[] myIntegers = (int[]) myResources.getObject("intList");</code></li></ul> </li></ul> </li><li> <p><code>Java</code> 提供 <code>ResourceBundle</code> 两个子类 <code>ListResourceBundle</code> 和 <code>PropertyResourceBundle</code></p> 
  <ul><li>提供一种相当简单的方法来创建资源 
    <ul><li><code>ListResourceBundle</code> 将资源作为键/值对列表进行管理</li><li><code>PropertyResourceBundle</code> 使用属性文件来管理资源</li><li>可以编写自定义的 <code>ResourceBundle</code> 子类 
      <ul><li>子类必须覆盖两个方法：<code>handleGetObject</code> 和 <code>getKeys()</code></li></ul> </li></ul> </li></ul> </li><li> <p><code>ResourceBundle</code> 子类同时被多个线程使用，其实现必须是线程安全的</p> 
  <ul><li>该类中非抽象方法的默认实现，以及直接已知的具体子类 <code>ListResourceBundle</code> 和 <code>PropertyResourceBundle</code> 中的方法都是线程安全的</li></ul> </li><li> <p>缓存管理：<code>getBundle</code> 工厂方法创建的资源包实例默认会被缓存</p> 
  <ul><li>如果已经缓存，工厂方法会多次返回同一个资源包实例</li><li><code>getBundle</code> 客户端可以清除缓存，使用生存时间值管理缓存的资源包实例的生命周期 
    <ul><li>或者指定不缓存资源包实例</li></ul> </li></ul> </li><li> <p>不必限制使用单一的 <code>ResourceBundle</code> 系列、</p> 
  <ul><li>例如：可以有一组用于异常消息的包 <code>ExceptionResources</code> 
    <ul><li><code>ExceptionResources_fr</code> 、<code>ExceptionResources_de</code> …</li></ul> </li><li>用于小部件的 <code>WidgetResource 等</code> 
    <ul><li><code>WidgetResources_fr</code> 、<code>WidgetResources_de</code> …</li></ul> </li></ul> </li></ul> 
<h4><a id="_126"></a>实现</h4> 
<h5><a id="_128"></a>步骤</h5> 
<p>核心关键：读取资源信息</p> 
<ol><li> <p><code>CLASSPATH</code> 下建立：项目源文件路径下 <code>cn.mldn.message.Messages_zh_CN.properties;</code></p> 
  <ul><li> <p><code>info="欢迎访问"</code>：资源内容</p> </li><li> <p><code>zh_CN</code>：表示中文资源</p> 
    <ul><li><code>CLASSPATH</code>：文件路径；</li></ul> </li></ul> </li><li> <p><code>CLASSPATH</code> 下建立 <code>cn.mldn.message.Messages_en_US.properties;</code></p> 
  <ul><li> <p><code>info=Welcome</code>：资源内容</p> </li><li> <p><code>en_US</code>：表示英文资源</p> </li></ul> </li><li> <p>没有设置的默认区域资源文件</p> 
  <ul><li>共有三个资源</li></ul> </li><li> <p>使用 <code>ResourceBundle</code> 类读取资源</p> 
  <ul><li><code>ResourceBundle.getBundle("").getString();</code></li><li>未指定明确的 <code>Locale</code> 对象，使用默认的本地 <code>Locale</code> 对象</li></ul> </li><li> <p>有需要可以修改 Locale 环境</p> 
  <ul><li><code>public static final ResourceBundle getBundle(String baseName, Locale loc)</code> 
    <ul><li>获取指定区域的资源文件</li></ul> </li><li>指定区域的资源文件存在，未设置区域的资源文件信息不会被读取</li><li>指定的的区域没有资源文件存在，读取默认本地资源文件</li><li>都不存在则读取没有区域的公共资源</li></ul> </li><li> <p>读取顺序</p> 
  <ul><li>指定区域的资源文件 &gt; 默认的本地资源 &gt; 公共的资源（没有区域）</li></ul> </li></ol> 
<h5><a id="_165"></a>消息格式化显示</h5> 
<p>登陆成功时显示的 “Xxx，欢迎登录”</p> 
<ul><li>这些东西若保存在资源文件中则需要占位符</li><li>取出时需要进行格式化处理</li><li>例如：<code>info="欢迎{0}登录，今日日期：{1}"</code> 
  <ul><li>占位符：{0}、{1}…</li><li>直接读取资源文件会将占位符<code>{0}</code>、<code>{1}</code>同时读取出来</li></ul> </li><li>使用 <code>MessageFormat</code> 类 进行格式化文本 
  <ul><li><code>public static String format(String pattern, Object...arguments)</code> 
    <ul><li><code>pattermn</code>：资源文件中的文本语句</li><li><code>arguments</code>：替换占位符的参数（可变参数）</li></ul> </li></ul> </li><li>在资源文件中{0}、{1}…等都表示占位符，读取资源时必须使用 MessageFormat 格式化处理</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/09aaa9e47debe32b408e3724dcef1838/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux 网络管理之route命令详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e682ea8fb1d07bfb1c00fb861546e360/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">给Jsoup设置代理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>❤️ 【STL 序列式容器】 vector 超硬核源码剖析 ❤️ - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="❤️ 【STL 序列式容器】 vector 超硬核源码剖析 ❤️" />
<meta property="og:description" content="目录 前言第4章 序列式容器4.1 容器的概念与分类4.1.1 序列式容器 4.2 vector4.2.1 vector概述4.2.2 vector定义摘要4.2.3 vector的迭代器4.2.4 vector的数据结构4.2.5 vector的构造与内存管理4.2.6 vector的元素操作 前言 国庆七天假宛如一天假，定睛一看又要上班…
国庆档电影院热闹了不少，《长津湖》真的值回票价，吴京真不错，意外的是易烊千玺竟然演出了小戏骨的感觉，整部电影很有感染力，点赞！
外滩一如既往的人山人海，不过每次抱着去看人的心态还是能玩得开心的，节日就要有节日的氛围。
总之，国庆快乐最重要！也祝各位节日快乐！祖国生日快乐！ ❤️
❤️❤️❤️ 如果本文对你有所帮助，请不要忘了点赞、关注、收藏哦！灰常感谢！ ❤️❤️❤️
第4章 序列式容器 4.1 容器的概念与分类 容器，置物之所也。
研究数据的特定排列方式，以利于搜寻或排序或其它特殊目的，这一专门学科我们称为数据结构（Data Structures）。大学信息类相关教育里面，与编程最有直接关系的科目，首推数据结构与算法（Algorithms）。几乎可以说，任何特定的数据结构都是为了实现某种特定的算法。STL 容器即是将运用最广的一些数据结构实现出来（图4-1）。未来，在每五年召开一次的C＋＋标准委员会的会议中，STL容器的数量还有可能增加。
众所周知，常用的数据结构不外乎array（数组）、list（链表）、tree（树）、stack（堆栈）、queue（队列）、hash table（散列表）、set（集合）、map（映射表）···等等。根据“数据在容器中的排列”特性，这些数据结构分为序列式（sequence）和关联式（associative）两种。本章探讨序列式容器，下一章探讨关联式容器。容器是大多数人对STL的第一印象，这说明了容器的好用与受欢迎。容器也是许多人对STL 的唯一印象，这说明了还有多少人利器（STL）在手而未能善用。
这里所谓的衍生，并非派生（inheritance）关系，而是内含（containment）关系。例如 heap内含一个 vector，priority-queue 内含一个 heap、stack 和 queue 都含一个deque，set／map／multiset／multimap 都内含一个 RB-tree，hast＿x 都内含一个hashtable。
4.1.1 序列式容器 4.2 vector 4.2.1 vector概述 vector 的数据安排以及操作方式，与 array非常相似。两者的唯一差别在于空间的运用的灵活性。array 是静态空间，一旦配置了就不能改变；要换个大（或小）一点的房子，可以，一切琐细得由客户端自己来：首先配置一块新空间，然后将元素从旧址一一搬往新址，再把原来的空间释还给系统。vector 是动态空间，随着元素的加入，它的内部机制会自行扩充空间以容纳新元素。因此，vector 的运用对于内存的合理利用与运用的灵活性有很大的帮助，我们再也不必因为害怕空间不足而一开始就要求一个大块头 array了，我们可以安心使用vector，吃多少用多少。vector的实现技术,关键在于其对大小的控制以及重新配置时的数据移动效率。一旦 vector旧有空间满载,如果客户端每新增一个元素, vector内部只是扩充一个元素的空间,实为不智,因为所谓扩充空间(不论多大),一如稍早所说是“配置新空间/数据移动/释还旧空间”的大工程,时间成本很高,应该加人某种未雨绸缪的考虑。稍后我们便可看到 SGI vector的空间配置策略。
4.2.2 vector定义摘要 以下是 vector定义的源代码摘录。虽然STL规定,欲使用 vector者必须先包括&lt; vector&gt;,但 SGISTL将 vector实现于更底层的&lt;stl_ vector." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/667e027f15cff534a06f3a4f6c4c5ee0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-06T14:56:11+08:00" />
<meta property="article:modified_time" content="2021-10-06T14:56:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">❤️ 【STL 序列式容器】 vector 超硬核源码剖析 ❤️</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#4__10" rel="nofollow">第4章 序列式容器</a></li><li><ul><li><a href="#41__11" rel="nofollow">4.1 容器的概念与分类</a></li><li><ul><li><a href="#411__18" rel="nofollow">4.1.1 序列式容器</a></li></ul> 
   </li><li><a href="#42_vector_20" rel="nofollow">4.2 vector</a></li><li><ul><li><a href="#421_vector_21" rel="nofollow">4.2.1 vector概述</a></li><li><a href="#422_vector_24" rel="nofollow">4.2.2 vector定义摘要</a></li><li><a href="#423_vector_136" rel="nofollow">4.2.3 vector的迭代器</a></li><li><a href="#424_vector_156" rel="nofollow">4.2.4 vector的数据结构</a></li><li><a href="#425_vector_172" rel="nofollow">4.2.5 vector的构造与内存管理</a></li><li><a href="#426_vector_336" rel="nofollow">4.2.6 vector的元素操作</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p><strong>国庆七天假宛如一天假，定睛一看又要上班…</strong><br> <strong>国庆档电影院热闹了不少，《长津湖》真的值回票价，吴京真不错，意外的是易烊千玺竟然演出了小戏骨的感觉，整部电影很有感染力，点赞！</strong><br> <strong>外滩一如既往的人山人海，不过每次抱着去看人的心态还是能玩得开心的，节日就要有节日的氛围</strong>。<br> <strong>总之，国庆快乐最重要！也祝各位节日快乐！祖国生日快乐！</strong> ❤️<br> <img src="https://images2.imgbox.com/01/45/YKumBOZT_o.jpg" alt="在这里插入图片描述"></p> 
<p>❤️❤️❤️ <strong>如果本文对你有所帮助，请不要忘了点赞、关注、收藏哦！灰常感谢！</strong> ❤️❤️❤️</p> 
<h2><a id="4__10"></a>第4章 序列式容器</h2> 
<h3><a id="41__11"></a>4.1 容器的概念与分类</h3> 
<p>容器，置物之所也。<br> 研究数据的特定排列方式，以利于搜寻或排序或其它特殊目的，这一专门学科我们称为数据结构（Data Structures）。大学信息类相关教育里面，与编程最有直接关系的科目，首推数据结构与算法（Algorithms）。几乎可以说，任何特定的数据结构都是为了实现某种特定的算法。STL 容器即是将运用最广的一些数据结构实现出来（图4-1）。未来，在每五年召开一次的C＋＋标准委员会的会议中，STL容器的数量还有可能增加。<br> 众所周知，常用的数据结构不外乎<code>array</code>（数组）、<code>list</code>（链表）、<code>tree</code>（树）、<code>stack</code>（堆栈）、<code>queue</code>（队列）、<code>hash table</code>（散列表）、<code>set</code>（集合）、<code>map</code>（映射表）···等等。根据“数据在容器中的排列”特性，这些数据结构分为序列式（sequence）和关联式（associative）两种。本章探讨序列式容器，下一章探讨关联式容器。容器是大多数人对STL的第一印象，这说明了容器的好用与受欢迎。容器也是许多人对STL 的唯一印象，这说明了还有多少人利器（STL）在手而未能善用。<br> <img src="https://images2.imgbox.com/cb/9a/rZHP91oy_o.png" alt="在这里插入图片描述"><br> 这里所谓的衍生，并非派生（inheritance）关系，而是内含（containment）关系。例如 <code>heap</code>内含一个 <code>vector</code>，<code>priority-queue</code> 内含一个 <code>heap</code>、<code>stack</code> 和 <code>queue</code> 都含一个<code>deque</code>，<code>set／map／multiset／multimap</code> 都内含一个 <code>RB-tree</code>，<code>hast＿x</code> 都内含一个<code>hashtable</code>。</p> 
<h4><a id="411__18"></a>4.1.1 序列式容器</h4> 
<h3><a id="42_vector_20"></a>4.2 vector</h3> 
<h4><a id="421_vector_21"></a>4.2.1 vector概述</h4> 
<p><code>vector</code> 的数据安排以及操作方式，与 array非常相似。两者的唯一差别在于空间的运用的灵活性。<font color="green"><strong><code>array</code> 是静态空间，一旦配置了就不能改变；要换个大（或小）一点的房子，可以，一切琐细得由客户端自己来：首先配置一块新空间，然后将元素从旧址一一搬往新址，再把原来的空间释还给系统。<code>vector</code> 是动态空间，随着元素的加入，它的内部机制会自行扩充空间以容纳新元素</strong></font>。因此，<code>vector</code> 的运用对于内存的合理利用与运用的灵活性有很大的帮助，我们再也不必因为害怕空间不足而一开始就要求一个大块头 array了，我们可以安心使用<code>vector</code>，吃多少用多少。<strong><code>vector</code>的实现技术,关键在于其对大小的控制以及重新配置时的数据移动效率</strong>。一旦 vector旧有空间满载,如果客户端每新增一个元素, vector内部只是扩充一个元素的空间,实为不智,因为所谓扩充空间(不论多大),一如稍早所说是“配置新空间/数据移动/释还旧空间”的大工程,时间成本很高,应该加人某种未雨绸缪的考虑。稍后我们便可看到 SGI vector的空间配置策略。</p> 
<h4><a id="422_vector_24"></a>4.2.2 vector定义摘要</h4> 
<p>以下是 <code>vector</code>定义的源代码摘录。虽然STL规定,欲使用 vector者必须先包括<code>&lt; vector&gt;,</code>但 SGISTL将 vector实现于更底层的<code>&lt;stl_ vector.h&gt;</code></p> 
<pre><code class="prism language-cpp"><span class="token comment">// alloc 是 SGI STL 的空间配置器</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Alloc</span> <span class="token operator">=</span> alloc<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">vector</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">typedef</span> T value_type<span class="token punctuation">;</span>
    <span class="token keyword">typedef</span> value_type<span class="token operator">*</span> pointer<span class="token punctuation">;</span>
    <span class="token keyword">typedef</span> value_type<span class="token operator">*</span> iterator<span class="token punctuation">;</span>
    <span class="token keyword">typedef</span> value_type<span class="token operator">&amp;</span> reference<span class="token punctuation">;</span>
    <span class="token keyword">typedef</span> size_t size_type<span class="token punctuation">;</span>
    <span class="token keyword">typedef</span> ptrdiff_t difference_type<span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token comment">// simple_alloc 是 SGI STL 的空间配置器，是源码所有容器都使用这个接口</span>
    <span class="token keyword">typedef</span> simple_alloc<span class="token operator">&lt;</span>value_type<span class="token punctuation">,</span> Alloc<span class="token operator">&gt;</span> data_allocator<span class="token punctuation">;</span>

    iterator start<span class="token punctuation">;</span>           <span class="token comment">//表示目前使用空间的头</span>
    iterator finish<span class="token punctuation">;</span>          <span class="token comment">//表示目前使用空间的尾</span>
    iterator end_of_storage<span class="token punctuation">;</span>  <span class="token comment">//表示目前可用空间的尾</span>

    <span class="token keyword">void</span> <span class="token function">insert_aux</span><span class="token punctuation">(</span>iterator position<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">deallocate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span>
            data_allocator<span class="token operator">::</span><span class="token function">deallocate</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end_of_storage <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">fill_initialize</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        start <span class="token operator">=</span> <span class="token function">allocate_and_fill</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        finish <span class="token operator">=</span> start <span class="token operator">+</span> n<span class="token punctuation">;</span>
        end_of_storage <span class="token operator">=</span> finish<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> start<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> finish<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    size_type <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">size_type</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    size_type <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">size_type</span><span class="token punctuation">(</span>end_of_storage <span class="token operator">-</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">bool</span> <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    reference <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">finish</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end_of_storage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token function">vector</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">fill_initialize</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">vector</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">fill_initialize</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">vector</span><span class="token punctuation">(</span><span class="token keyword">long</span> n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">fill_initialize</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">explicit</span> <span class="token function">vector</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">fill_initialize</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">vector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">destroy</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> finish<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//全局变量</span>
        <span class="token function">deallocate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    reference <span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">*</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    reference <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>finish <span class="token operator">!=</span> end_of_storage<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//还有备用空间</span>
            <span class="token function">construct</span><span class="token punctuation">(</span>finish<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//全局函数</span>
            <span class="token operator">++</span>finish<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span>  <span class="token comment">//无备用空间</span>
            <span class="token function">insert_aux</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//成员函数，后续会分析</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token operator">--</span>finish<span class="token punctuation">;</span>
        <span class="token function">destroy</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//finish-&gt;~T 这里仅仅是调用指针finish所指对象的析构函数，不能释放内存</span>
    <span class="token punctuation">}</span>
  
    iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator position<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//如果移除的不是最后一个元素</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">!=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token function">copy</span><span class="token punctuation">(</span>position <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> finish<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//全局函数</span>

        <span class="token operator">--</span>finish<span class="token punctuation">;</span>
        <span class="token function">destroy</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> position<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_type new_size<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>new_size <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
            <span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> new_size<span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> new_size <span class="token operator">-</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_type new_size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token function">resize</span><span class="token punctuation">(</span>new_size<span class="token punctuation">,</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
    <span class="token comment">//配置空间并填满内容</span>
    iterator <span class="token function">allocate_and_fill</span><span class="token punctuation">(</span>size_type n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        iterator result <span class="token operator">=</span> data_allocator<span class="token operator">::</span><span class="token function">allocate</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">uninitialized_fill_n</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> n<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="423_vector_136"></a>4.2.3 vector的迭代器</h4> 
<p><code>vector</code>维护的是一个连续线性空间,所以不论其元素型别为何,普通指针都可以作为 vector的迭代器而满足所有必要条件,因为 vector迭代器所需要的操作行为, 如 <code>operator*, operator-&gt;, operator++, operator--, operator+, operator-,operator+=, operator-=</code>,普通指针天生就具备。 vector支持随机存取,而普通指针正有着这样的能力。所以, vector提供的是 Random Access Iterators。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Alloc</span> <span class="token operator">=</span> alloc<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">vector</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">typedef</span> T value_type<span class="token punctuation">;</span>
	<span class="token keyword">typedef</span> value_type<span class="token operator">*</span> iterator<span class="token punctuation">;</span>	<span class="token comment">// vector的迭代器是普通指针</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>根据上述定义,如果客户端写出这样的代码:</strong></p> 
<pre><code class="prism language-cpp">vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">::</span>iterator ivite<span class="token punctuation">;</span>
vector<span class="token operator">&lt;</span>Shape<span class="token operator">&gt;</span><span class="token operator">::</span>iterator svite<span class="token punctuation">;</span>
</code></pre> 
<p>ivite的型别其实就是int*, svite的型别其实就是 Shape*。</p> 
<h4><a id="424_vector_156"></a>4.2.4 vector的数据结构</h4> 
<p><strong><code>vector</code>所采用的数据结构非常简单:线性连续空间</strong>。它以两个迭代器 <code>start</code>和 <code>finish</code>分别指向配置得来的连续空间中目前已被使用的范围,并以迭代器<code>end_of_ storage</code>指向整块连续空间(含备用空间)的尾端:</p> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Alloc</span> <span class="token operator">=</span> alloc<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">vector</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">protected</span><span class="token operator">:</span>
	iterator start<span class="token punctuation">;</span>				<span class="token comment">//表示目前使用空间的头</span>
	iterator finish<span class="token punctuation">;</span>			<span class="token comment">//表示目前使用空间的尾</span>
	iterator end_of_storage<span class="token punctuation">;</span>	<span class="token comment">//表示目前可用空间的尾</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>为了降低空间配置时的速度成本, <code>vector</code>实际配置的大小可能比客户端需求量更大一些,以备将来可能的扩充。这便是容量( capacity)的观念。换句话说,一个 vector的容量永远大于或等其大小。一旦容量等于大小,便是满载,下次再有新增元素,整个 vector就得另觅居所,见图4-2运用 <code>start, finish,end_of_storage</code>三个迭代器,便可轻易地提供首尾标示、大小、容量、空容器判断、注标([1)运算子、最前端元素值、最后端元素值…等机能<br> <img src="https://images2.imgbox.com/da/00/qPz5icpn_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="425_vector_172"></a>4.2.5 vector的构造与内存管理</h4> 
<p>千头万绪该如何说起?以客户端程序代码为引导,观察其所得结果并实证源代码,是一个良好的学习路径。下面是一个小小的测试程序,我的观察重点在构造的元素的添加,以及大小、容量的变化：</p> 
<pre><code class="prism language-cpp"><span class="token comment">// filename: 4vector-test. cpp</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//int i;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token function">iv</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=2</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>	<span class="token comment">// capacity=2</span>

	iv<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=3</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=4</span>

	iv<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=4</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=4</span>

	iv<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=5</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>

	iv<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=6</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>						<span class="token comment">// 9 9 1 2 3 4</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	iv<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=7</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>						<span class="token comment">// 9 9 1 2 3 4 5</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	iv<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	iv<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=5</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>

	iv<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=4</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>

	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">::</span>iterator ivite <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>iv<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> iv<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ivite <span class="token operator">!=</span> iv<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		iv<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>ivite<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=3</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>						<span class="token comment">// 9 9 2 </span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	ivite <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>iv<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> iv<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ivite <span class="token operator">!=</span> iv<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		iv<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>ivite<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=6</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>						<span class="token comment">// 9 9 7 7 7 2 </span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	iv<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>			<span class="token comment">// size=0</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"capacity = "</span> <span class="token operator">&lt;&lt;</span> iv<span class="token punctuation">.</span><span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// capacity=8</span>

	<span class="token comment">//system("pause");</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>vector缺省使用<code>alloc</code>(第二章)作为空间配置器,并据此另外定义了一个<code>data_allocator</code>,为的是更方便以元素大小为配置单位。</p> 
<p><code>uninitialized_fill_n()</code>会根据第一参数的型别特性( type traits,3.37节),决定使用算法<code>fiill_n()</code>或反复调用 <code>construct()</code>来完成任务(见2.3节描述)。<br> 当我们以 <code>push_back()</code>将新元素插入于 vector尾端时,该函数首先检查是否还有备用空间,如果有就直接在备用空间上构造元素,并调整迭代器 finish,使vector变大;如果没有备用空间了,就扩充空间(重新配置、移动数据、释放原空间)。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>finish <span class="token operator">!=</span> end_of_storage<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>	<span class="token comment">// 还有备用空间</span>
		<span class="token function">construct</span><span class="token punctuation">(</span>finish<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 全局函数, 见2.2.3节</span>
		<span class="token operator">++</span>finish<span class="token punctuation">;</span>					<span class="token comment">// 调整水位高度</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>							<span class="token comment">// 已无备用空间</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">insert_aux</span><span class="token punctuation">(</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// vector member function,见以下列表</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Alloc</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token class-name">vector</span><span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Alloc<span class="token operator">&gt;</span><span class="token operator">::</span><span class="token function">insert_aux</span><span class="token punctuation">(</span>iterator position<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>finish <span class="token operator">!=</span> end_of_storage<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>		<span class="token comment">//还有备用空间</span>
		<span class="token comment">// 在备用空间起始处构造一个元素, 并以 vector最后一个元素值为其初值</span>
		<span class="token function">construct</span><span class="token punctuation">(</span>finish<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>finish <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 调整水位</span>
		<span class="token operator">++</span>finish<span class="token punctuation">;</span>
		T x_copy <span class="token operator">=</span> x<span class="token punctuation">;</span>
		<span class="token function">copy_backward</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> finish <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> finish <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token operator">*</span>position <span class="token operator">=</span> x_copy<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>								<span class="token comment">// 已无备用空间</span>
		<span class="token keyword">const</span> size_type old_size <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> size_type len <span class="token operator">=</span> old_size <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token operator">*</span> old_size<span class="token punctuation">;</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token comment">//以上配置原则:如果原大小为0,则配置1(个元素大小)</span>
		<span class="token comment">//如果原大小不为0,则配置原大小的两倍</span>
		<span class="token comment">//前半段用来放置原数据,后半段准备用来放置新数据</span>

		iterator new_ start <span class="token operator">=</span> data_allocator<span class="token operator">::</span><span class="token function">allocate</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//实际配置</span>
		iterator new_finish <span class="token operator">=</span> new_start<span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 将原 vector的内容拷贝到新 vector</span>
			<span class="token keyword">new</span> finish <span class="token operator">=</span> <span class="token function">uninitialized_copy</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> position<span class="token punctuation">,</span> new_start<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//为新元素设定初值</span>
			<span class="token function">construct</span><span class="token punctuation">(</span>new_finish<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//调整水位</span>
			<span class="token operator">++</span>new_finish<span class="token punctuation">;</span>
			<span class="token comment">//将原 vector的备用空间中的内容也忠实拷贝过来(侯捷疑惑:啥用途 ? )</span>
			new_finish <span class="token operator">=</span> <span class="token function">uninitialized_copy</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> finish<span class="token punctuation">,</span> new_finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">//"commit or roll back" semantics</span>
			<span class="token function">destroy</span><span class="token punctuation">(</span>new_start<span class="token punctuation">,</span> new_finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
			data_allocator<span class="token operator">::</span><span class="token function">deallocate</span><span class="token punctuation">(</span>new_start<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">throw</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 析构并释放原 vector</span>
		<span class="token function">destroy</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">deallocate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//调整迭代器, 指向新 vector</span>
		start <span class="token operator">=</span> new_start<span class="token punctuation">;</span>
		finish <span class="token operator">=</span> new_finish<span class="token punctuation">;</span>
		end_of_storage <span class="token operator">=</span> new_start <span class="token operator">+</span> len<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
	
</code></pre> 
<p>注意,所谓动态增加大小,并不是在原空间之后接续新空间(因为无法保证原空间之后尚有可供配置的空间),而是以原大小的两倍另外配置一块较大空间,然后将原内容拷贝过来,然后才开始在原内容之后构造新元素,并释放原空间。<strong>因此对 <code>vector</code>的任何操作,一旦引起空间重新配置,指向原 vector的所有迭代器就都失效了</strong>。这是程序员易犯的一个错误,务需小心。</p> 
<h4><a id="426_vector_336"></a>4.2.6 vector的元素操作</h4> 
<p>vector所提供的元素操作很多,无法在有限篇幅中一一讲解其实也没有这种必要。为搭配先前对空间配置的讨论,我挑选数个相关函数作为解说对象,这些函数也出现在先前的测试程序中。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//将尾端元素拿掉,并调整大小</span>
<span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token operator">--</span>finish<span class="token punctuation">;</span>				<span class="token comment">// 将尾端标记往前移一格, 表示将放弃尾端元素</span>
	<span class="token function">destroy</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// destroy是全局函数,见第2章</span>
<span class="token punctuation">}</span>

<span class="token comment">// 清除[ first, last)中的所有元素</span>
iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator first<span class="token punctuation">,</span> iterator last<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	iterator i <span class="token operator">=</span> <span class="token function">copy</span><span class="token punctuation">(</span>last<span class="token punctuation">,</span> finish<span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//copy是全局函数,第6章</span>
	<span class="token function">destroy</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> finish<span class="token punctuation">)</span><span class="token punctuation">;</span>							<span class="token comment">//destroy是全局函数, 第2章</span>
	finish <span class="token operator">=</span> finish <span class="token operator">-</span> <span class="token punctuation">(</span>last <span class="token operator">-</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> first<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//清除某个位置上的元素</span>
iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator position<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">!=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">copy</span><span class="token punctuation">(</span>position <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> finish<span class="token punctuation">,</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//copy是全局函数,第6章</span>
	<span class="token punctuation">}</span>
	<span class="token operator">--</span>finish<span class="token punctuation">;</span>
	<span class="token function">destroy</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span>							<span class="token comment">// destroy是全局函数,2.2.3节</span>
	<span class="token keyword">return</span> positlon<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// erase()就定义在上面</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/a6/c9/GWOW23nF_o.png" alt="在这里插入图片描述"><br> 下面是 <code>vector::insert()</code>实现内容:</p> 
<pre><code class="prism language-cpp"><span class="token comment">// 从 position开始, 插入n个元素, 元素初值为x</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">Alloc</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span> <span class="token class-name">vector</span><span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Alloc<span class="token operator">&gt;</span><span class="token operator">::</span><span class="token function">insert</span><span class="token punctuation">(</span>iterator position<span class="token punctuation">,</span> size_type n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>		<span class="token comment">//当n!=0才进行以下所有操作</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">size_type</span><span class="token punctuation">(</span>end_of_storage <span class="token operator">-</span> finish<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">//备用空间大于等于“新增元素个数</span>
			T x_copy <span class="token operator">=</span> x<span class="token punctuation">;</span>
			<span class="token comment">//以下计算插入点之后的现有元素个数</span>
			<span class="token keyword">const</span> size_type elems_after <span class="token operator">=</span> finish <span class="token operator">-</span> position<span class="token punctuation">;</span>
			iterator old_finish <span class="token operator">=</span> finish<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>elems_after <span class="token operator">&gt;</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// "插入点之后的现有元素个数"大于“新增元素个数</span>
				<span class="token function">uninitialized_copy</span><span class="token punctuation">(</span>finish <span class="token operator">-</span> n<span class="token punctuation">,</span> finish<span class="token punctuation">,</span> finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
				finish <span class="token operator">+=</span> n<span class="token punctuation">;</span>
				<span class="token comment">// 将 vector尾端标记后移</span>
				<span class="token function">copy_backward</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> old_finish <span class="token operator">-</span> n<span class="token punctuation">,</span> old_finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">fill</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> posltion <span class="token operator">+</span> n<span class="token punctuation">,</span> x_copy<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从插入点开始填人新值</span>

			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// “插入点之后的现有元素个数”小于等于“新增元素个数</span>
				<span class="token function">uninitialized_fill_n</span><span class="token punctuation">(</span>finish<span class="token punctuation">,</span> n <span class="token operator">-</span> elems_after<span class="token punctuation">,</span> x_copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
				finish <span class="token operator">+=</span> n <span class="token operator">-</span> elems_after<span class="token punctuation">;</span>
				<span class="token function">uninitialized_copy</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> old_position<span class="token punctuation">,</span> finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
				finish <span class="token operator">+=</span> elems_after<span class="token punctuation">;</span>
				<span class="token function">fill</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> old_finish<span class="token punctuation">,</span> x_copy<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 备用空间小于“新增元素个数”(那就必须配置额外的内存)</span>
			<span class="token comment">// 首先决定新长度:旧长度的两倍, 或旧长度 + 新增元素个数</span>
			<span class="token keyword">const</span> size_type old_size <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> size_type len <span class="token operator">=</span> old_size <span class="token operator">+</span> <span class="token function">max</span><span class="token punctuation">(</span>old_size<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//以下配置新的 vector空间</span>
			iterator new_start <span class="token operator">=</span> data_allocator<span class="token operator">::</span><span class="token function">allocate</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
			iterator new_finish <span class="token operator">=</span> new_start<span class="token punctuation">;</span>
			__STL_TRY
				<span class="token comment">// 以下首先将旧 vector的插入点之前的元素复制到新空间</span>
				new_finish <span class="token operator">=</span> <span class="token function">uninitialized_copy</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> position<span class="token punctuation">,</span> new_start<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//以下再将新增元素(初值皆为n)填人新空间</span>
			new_finish <span class="token operator">=</span> <span class="token function">uninitialized_fill_n</span><span class="token punctuation">(</span>new_finish<span class="token punctuation">,</span> n<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//以下再将旧 vector的插入点之后的元素复制到新空间</span>
			new_finish <span class="token operator">=</span> <span class="token function">uninitialized_copy</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> finish<span class="token punctuation">,</span> new_finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__STL_USE_EXCEPTIONS</span></span>
			<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 如有异常发生, 实现" commit or ro11back" semantics</span>
				<span class="token function">destroy</span><span class="token punctuation">(</span>new_start<span class="token punctuation">,</span> new_finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
				data_allocator<span class="token operator">::</span><span class="token function">deallocate</span><span class="token punctuation">(</span>new_start<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">throw</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span>	 <span class="token comment">/*STL _USE_EXCEPTIONS */</span></span>
				<span class="token comment">//以下清除并释放旧的 vector</span>
				<span class="token function">destroy</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> finish<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">deallocate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 以下调整水位标记</span>
				start <span class="token operator">=</span> new_start<span class="token punctuation">;</span>
				finish <span class="token operator">=</span> new_finish<span class="token punctuation">;</span>
				end_of_storage <span class="token operator">=</span> new_start <span class="token operator">+</span> len<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>注意,插人完成后,新节点将位于哨兵迭代器(例之 position,标示出插入点)所指之节点的前方一一这是STL对于“插入操作”的标准规范。图4-3b展示了 Insert( position,n,x)的操作<br> <img src="https://images2.imgbox.com/4d/38/aeApOEga_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6e/c5/XMF5TEzk_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/d7/e8/fTpHc86L_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/f1/44/OkzuoE0i_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8c/c2/4Dj3qj3B_o.jpg" alt="在这里插入图片描述"></p> 
<p>❤️❤️❤️ <strong>如果本文对你有所帮助，请不要忘了点赞、关注、收藏哦！灰常感谢！</strong> ❤️❤️❤️</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0a385824cf128c94fb39b72e2876d6e8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">javascript百炼成仙 第一章 掌握JavaScript基础1.6 叶老</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2f8a09317435a45cb1f91ab31c8fe38c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序搜索不到腾讯服务路线规划插件的解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
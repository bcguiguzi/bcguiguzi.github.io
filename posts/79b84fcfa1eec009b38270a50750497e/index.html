<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java的JDBC编程—连接Mysql数据库 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java的JDBC编程—连接Mysql数据库" />
<meta property="og:description" content="目录
一、 Java的数据库编程：JDBC
二、JDBC工作原理
三、 JDBC使用
四、JDBC使用步骤总结
五. JDBC常用接口和类
5.1 JDBC API
5.2 数据库连接Connection
5.3 Statement对象
5.4 ResultSet对象
一、 Java的数据库编程：JDBC JDBC，即Java Database Connectivity，java数据库连接。是一种用于执行SQL语句的Java API，它是 Java中的数据库连接规范。这个API由 java.sql.*,javax.sql.* 包中的一些类和接口组成，它为Java 开发人员操作数据库提供了一个标准的API，可以为多种关系数据库提供统一访问。 二、JDBC工作原理 JDBC 为多种关系数据库提供了统一访问方式，作为特定厂商数据库访问API的一种高级抽象，它主要包 含一些通用的接口类。 JDBC访问数据库层次结构: JDBC优势： Java语言访问数据库操作完全面向抽象接口编程开发数据库应用不用限定在特定数据库厂商的API程序的可移植性大大增强 三、 JDBC使用 准备数据库驱动包，并添加到项目的依赖中： 在项目中创建文件夹lib，并将依赖包mysql-connector-java-5.1.47.jar复制到lib中。再配置该jar 包到本项目的依赖中：右键点击项目Open Module Settings，在Modules中，点击项目，配置 Dependencies，点击&#43;，JARS or Directories，将该lib文件夹配置进依赖中，表示该文件夹下的 jar包都引入作为依赖。
建立数据库连接 MySQL数据连接的URL参数格式如下：
jdbc:mysql://服务器地址:端口/数据库名?参数名=参数值
// 加载JDBC驱动程序：反射，这样调用初始化com.mysql.jdbc.Driver类，即将该类加载到JVM方法 区，并执行该类的静态方法块、静态属性。 Class.forName(&#34;com.mysql.jdbc.Driver&#34;); // 创建数据库连接 Connection connection = DriverManager.getConnection(&#34;jdbc:mysql://localhost:3306/test? user=root&amp;password=root&amp;useUnicode=true&amp;characterEncoding=UTF-8&#34;); 创建操作命令（Statement） //3.构造一个Sql String sql =&#34; insert into stu(id,name,age) values(1,zhang,3)&#34;; //需要把 Sql语句转化为对象 PreparedStatement statement = connection." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/79b84fcfa1eec009b38270a50750497e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-13T18:37:41+08:00" />
<meta property="article:modified_time" content="2023-12-13T18:37:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java的JDBC编程—连接Mysql数据库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>目录</strong></p> 
<p style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%20Java%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B%EF%BC%9AJDBC" rel="nofollow">一、 Java的数据库编程：JDBC</a></p> 
<p style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81JDBC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">二、JDBC工作原理</a></p> 
<p style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%C2%A0JDBC%E4%BD%BF%E7%94%A8" rel="nofollow">三、 JDBC使用</a></p> 
<p style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81JDBC%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%E6%80%BB%E7%BB%93" rel="nofollow">四、JDBC使用步骤总结</a></p> 
<p style="margin-left:0px;"><a href="#%C2%A0%E4%BA%94.%20JDBC%E5%B8%B8%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%92%8C%E7%B1%BB" rel="nofollow"> 五. JDBC常用接口和类</a></p> 
<p style="margin-left:40px;"><a href="#5.1%20JDBC%20API" rel="nofollow">5.1 JDBC API</a></p> 
<p style="margin-left:40px;"><a href="#5.2%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5Connection" rel="nofollow">5.2 数据库连接Connection</a></p> 
<p style="margin-left:40px;"><a href="#5.3%20Statement%E5%AF%B9%E8%B1%A1" rel="nofollow">5.3 Statement对象</a></p> 
<p style="margin-left:40px;"><a href="#5.4%20ResultSet%E5%AF%B9%E8%B1%A1" rel="nofollow">5.4 ResultSet对象</a></p> 
<hr> 
<h2><strong>一、 Java的数据库编程：</strong><strong>JDBC </strong></h2> 
<blockquote> 
 <p>     JDBC，即Java Database Connectivity，java数据库连接。是一种用于执行SQL语句的Java API，它是 Java中的数据库连接规范。这个API由 java.sql.*,javax.sql.* 包中的一些类和接口组成，它为Java 开发人员操作数据库提供了一个标准的API，可以为多种关系数据库提供统一访问。    </p> 
</blockquote> 
<h2><strong>二、JDBC</strong><strong>工作原理 </strong></h2> 
<div>
          JDBC 为多种关系数据库提供了统一访问方式，作为特定厂商数据库访问API的一种高级抽象，它主要包 含一些通用的接口类。 
</div> 
<div>
    
</div> 
<div> 
 <strong>JDBC访问数据库层次结构:</strong> 
 <br>   
</div> 
<div> 
 <img src="https://images2.imgbox.com/30/11/946JLv70_o.png" alt="03ec87ca8ed1468ba894a0b4ef601426.png"> 
</div> 
<div>
    
</div> 
<div> 
 <strong>JDBC优势： </strong> 
</div> 
<div>
    
</div> 
<blockquote> 
 <ul><li>Java语言访问数据库操作完全面向抽象接口编程</li><li>开发数据库应用不用限定在特定数据库厂商的API</li><li>程序的可移植性大大增强</li></ul> 
</blockquote> 
<div> 
 <h2><strong>三、 JDBC</strong><strong>使用</strong></h2> 
 <ul><li><strong>准备数据库驱动包，并添加到项目的依赖中： </strong></li></ul> 
 <blockquote> 
  <p>       在项目中创建文件夹lib，并将依赖包mysql-connector-java-5.1.47.jar复制到lib中。再配置该jar 包到本项目的依赖中：右键点击项目Open Module Settings，在Modules中，点击项目，配置 Dependencies，点击+，JARS or Directories，将该lib文件夹配置进依赖中，表示该文件夹下的 jar包都引入作为依赖。</p> 
 </blockquote> 
 <ul><li><strong> 建立数据库连接</strong></li></ul> 
 <blockquote> 
  <p>    MySQL数据连接的URL参数格式如下：<br> jdbc:mysql://服务器地址:端口/数据库名?参数名=参数值</p> 
 </blockquote> 
 <pre><code>// 加载JDBC驱动程序：反射，这样调用初始化com.mysql.jdbc.Driver类，即将该类加载到JVM方法
区，并执行该类的静态方法块、静态属性。
Class.forName("com.mysql.jdbc.Driver");

// 创建数据库连接
Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/test?
user=root&amp;password=root&amp;useUnicode=true&amp;characterEncoding=UTF-8");
</code></pre> 
 <ul><li><strong>创建操作命令（Statement）</strong></li></ul> 
 <pre><code>//3.构造一个Sql
 String sql =" insert into stu(id,name,age) values(1,zhang,3)";

//需要把 Sql语句转化为对象
 PreparedStatement statement = connection.prepareStatement(sql);</code></pre> 
 <ul><li><strong>使用操作命令来执行SQL </strong></li></ul> 
 <pre><code>// 查询操作
preparedStatement.executeQuery();

// 新增、修改、删除操作
preparedStatement.executeUpdate();
</code></pre> 
 <ul><li><strong>处理结果集ResultSet. </strong></li></ul> 
 <div> 
  <pre><code>    //接受结果集合         
     ResultSet resultSet = statement.executeQuery();
        //结果集遍历
        while (resultSet.next()){
            //移动光标
            int id = resultSet.getInt("id");
            String name = resultSet.getString("name");
            int age = resultSet.getInt("age");
            System.out.println(id+" "+name+" "+age+" ");
        }</code></pre> 
  <ul><li><strong>释放资源</strong></li></ul> 
 </div> 
</div> 
<pre><code>try {
    if(resultSet != null){
        resultSet.close();
   }
    if(preparedStatement != null){
        preparedStatement.close();
   }
    if(connection != null){
        connection.close();
   }
} catch (SQLException e) {
    e.printStackTrace();
    throw new RuntimeException("数据库错误");
}
</code></pre> 
<h2><strong>四、JDBC</strong><strong>使用步骤总结 </strong></h2> 
<blockquote> 
 <div>
   1. 创建数据库连接Connection 
 </div> 
 <div>
   2. 创建操作命令Statement 
 </div> 
 <div>
   3. 使用操作命令来执行SQL 
 </div> 
 <div>
   4. 处理结果集ResultSet 
 </div> 
 <div>
   5. 释放资源 
 </div> 
</blockquote> 
<h2> 五<strong>. JDBC</strong><strong>常用接口和类</strong></h2> 
<h3><strong>5.1 JDBC API </strong></h3> 
<div>
          在Java JDBC编程中对数据库的操作均使用JDK自带的API统一处理，通常与特定数据库的驱动类是完全 解耦的。所以掌握Java JDBC API （位于 java.sql 包下） 即可掌握Java数据库编程。 
</div> 
<h3><strong>5.2 </strong><strong>数据库连接</strong><strong>Connection </strong></h3> 
<div>
  Connection接口实现类由数据库提供，获取Connection对象通常有两种方式： 
</div> 
<ul><li>一种是通过DriverManager（驱动管理类）的静态方法获取：</li></ul> 
<pre><code>    // 加载JDBC驱动程序
Class.forName("com.mysql.jdbc.Driver");
// 创建数据库连接
Connection connection = DriverManager.getConnection(url);
</code></pre> 
<ul><li>一种是通过DataSource（数据源）对象获取。<strong>实际应用中会使用</strong><strong>DataSource</strong><strong>对象</strong></li></ul> 
<pre><code> DataSource dataSource = new MysqlDataSource();
        ((MysqlDataSource)dataSource).setUrl("jdbc:mysql://localhost:3306/db1?serverTimezone=UTC");
        ((MysqlDataSource)dataSource).setUser("root");
        ((MysqlDataSource)dataSource).setPassword("123456");</code></pre> 
<blockquote> 
 <p>以上两种方式的区别是：</p> 
 <p>   1. DriverManager类来获取的Connection连接，是无法重复利用的，每次使用完以后释放资源 时，通过connection.close()都是关闭物理连接。</p> 
 <p>   2. DataSource提供连接池的支持。连接池在初始化时将创建一定数量的数据库连接，这些连接 是可以复用的，每次使用完数据库连接，释放资源调用connection.close()都是将 Conncetion连接对象回收。</p> 
 <p> </p> 
</blockquote> 
<h3><strong>5.3 Statement</strong><strong>对象 </strong></h3> 
<div>
  Statement对象主要是将SQL语句发送到数据库中。JDBC API中主要提供了三种Statement对象 
</div> 
<p> <img src="https://images2.imgbox.com/9f/aa/xZCQwuzI_o.png" alt="4aec17b72233456a91d6b358f0a6fc8e.png"></p> 
<blockquote> 
 <div> 
  <strong>主要掌握两种执行SQL的方法： </strong> 
 </div> 
 <ul><li>executeQuery() 方法执行后返回单个结果集的，通常用于select语句</li><li>executeUpdate()方法返回值是一个整数，指示受影响的行数，通常用于update、insert、delete 语句</li></ul> 
</blockquote> 
<h3><strong>5.4 ResultSet</strong><strong>对象 </strong></h3> 
<div>
          ResultSet对象它被称为结果集，它代表符合SQL语句条件的所有行，并且它通过一套getXXX方法提供 了对这些行中数据的访问。 
</div> 
<div>
          ResultSet里的数据一行一行排列，每行有多个字段，并且有一个记录指针，指针所指的数据行叫做当 前数据行，我们只能来操作当前的数据行。我们如果想要取得某一条记录，就要使用ResultSet的next() 方法 ,如果我们想要得到ResultSet里的所有记录，就应该使用while循环。 
</div> 
<h2>六、示例代码 </h2> 
<pre><code>import com.mysql.cj.jdbc.MysqlDataSource;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

public class TestJDBC {
    public static void main(String[] args) throws SQLException {
        // MysqlDataSource dataSource = new MysqlDataSource();
        //dataSource.setUrl();
        //1. 创建数据源，即获取数据库的位置
        DataSource dataSource = new MysqlDataSource();
        ((MysqlDataSource) dataSource).setUrl("jdbc:mysql://localhost:3306/db1?serverTimezone=UTC");
        ((MysqlDataSource)dataSource).setUser("root");
        ((MysqlDataSource)dataSource).setPassword("123456");

        // 2 .和数据库服务器建立连接
        Connection connection = dataSource.getConnection();

        //3.构造一个Sql
        String sql =" insert into stu(id,name,age) values(?,?,?)";
      //  String sql =" insert into stu(id,name,age) values(1,zhang,3)";
        //需要把 Sql语句转化为对象
        PreparedStatement statement = connection.prepareStatement(sql);

        statement.setInt(1,66);
        statement.setString(2,"a");
        statement.setInt(3,7);
        //4.构造好的sql 发送给服务器;
       int n = statement.executeUpdate();
        System.out.println("n:"+ n);

        //5.最后一步 释放资源
        statement.close();
        connection.close();
    }
}
</code></pre> 
<p> <strong>结语：</strong>JDBC的相关分享到这里就结束了，希望对大家的学习会有帮助，如果大家有什么问题或者不同的见解，欢迎大家评论区的留言，ganxiezhich~~~</p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/940940ad05731e9ad5e6b84241252c5a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">gorm 高级查询</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/095fa3d903b2dc8f8e653ef86e480058/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机网络(全)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
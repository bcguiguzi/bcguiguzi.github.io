<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java语言第七篇网络编程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java语言第七篇网络编程" />
<meta property="og:description" content="网络编程 网络编程IP地址端口协议UDP通信程序TCP通信程序服务器端优化NIO 网络编程 网络编程:在网络通信协议下，不同计算机上运行的程序，可以进行数据传输
网络编程三要素
IP地址:设备在网络中的地址，是唯一的标识。是分配给上网设备的数字标签。
端口:应用程序在设备中唯一的标识。
协议:数据在网络中传输的规则，常见的协议有UDP协议和TCP协议。
IP地址 常用命令：
⚫ ipconfig：查看本机IP地址
⚫ ping IP地址：检查网络是否连通
特殊IP地址：
⚫ 127.0.0.1：是回送地址也称本地回环地址，可以代表本机的IP地址，一般用来测试使用
加一个ipv4的分类,需要讲A-E,IP组成为:网络号 &#43; 主机号广域网 城域网 局域网最大的广域网是因特网
添加组播地址,广播地址
InetAddress 的使用:此类表示Internet协议（IP）地址
static InetAddress getByName(String host) 确定主机名称的IP地址。主机名称可以是机器名称，也可以是IP地址 String getHostName() 获取此IP地址的主机名 String getHostAddress() 返回文本显示中的IP地址字符串 端口 端口：应用程序在设备中唯一的标识。
端口号：用两个字节表示的整数，它的取值范围是065535。其中01023之间的端口号用于一些知名的网络服务或者应用。我们自己使用1024以上的端口号就可以了。注意：一个端口号只能被一个应用程序使用。
协议 协议：计算机网络中，连接和通信的规则被称为网络通信协议
UDP协议
⚫ 用户数据报协议(User Datagram Protocol)
⚫ UDP是面向无连接通信协议。速度快，有大小限制一次最多发送64K，数据不安全，易丢失数据。
TCP协议
⚫ 传输控制协议 (Transmission Control Protocol)
⚫ TCP协议是面向连接的通信协议。速度慢，没有大小限制，数据安全。
UDP通信程序 UDP发送数据
创建发送端的DatagramSocket对象创建数据，并把数据打包(DatagramPacket)调用DatagramSocket对象的方法发送数据释放资源 UDP接收数据
创建接收端的DatagramSocket对象创建一个箱子，用于接收数据调用DatagramSocket的方法接收数据并将数据放入箱子中解析数据包，并把数据在控制台显示释放资源 UDP的三种通信方式
⚫ 单播
⚫ 组播
⚫ 广播" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/97a7ce0fe08dabc5e25f877abbb4f7af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-22T14:53:08+08:00" />
<meta property="article:modified_time" content="2024-01-22T14:53:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java语言第七篇网络编程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>网络编程</h4> 
 <ul><li><ul><li><a href="#_1" rel="nofollow">网络编程</a></li><li><ul><li><a href="#IP_10" rel="nofollow">IP地址</a></li><li><a href="#_28" rel="nofollow">端口</a></li><li><a href="#_32" rel="nofollow">协议</a></li><li><a href="#UDP_44" rel="nofollow">UDP通信程序</a></li><li><a href="#TCP_90" rel="nofollow">TCP通信程序</a></li><li><a href="#_115" rel="nofollow">服务器端优化</a></li><li><a href="#NIO_122" rel="nofollow">NIO</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_1"></a>网络编程</h3> 
<p>网络编程:在网络通信协议下，不同计算机上运行的程序，可以进行数据传输</p> 
<p>网络编程三要素<br> IP地址:设备在网络中的地址，是唯一的标识。是分配给上网设备的数字标签。<br> 端口:应用程序在设备中唯一的标识。<br> 协议:数据在网络中传输的规则，常见的协议有UDP协议和TCP协议。</p> 
<h4><a id="IP_10"></a>IP地址</h4> 
<p>常用命令：<br> ⚫ ipconfig：查看本机IP地址<br> ⚫ ping IP地址：检查网络是否连通</p> 
<p>特殊IP地址：<br> ⚫ 127.0.0.1：是回送地址也称本地回环地址，可以代表本机的IP地址，一般用来测试使用</p> 
<p>加一个ipv4的分类,需要讲A-E,IP组成为:网络号 + 主机号广域网 城域网 局域网最大的广域网是因特网<br> 添加组播地址,广播地址</p> 
<p>InetAddress 的使用:此类表示Internet协议（IP）地址</p> 
<pre><code>static InetAddress getByName(String host) 确定主机名称的IP地址。主机名称可以是机器名称，也可以是IP地址
String getHostName() 获取此IP地址的主机名
String getHostAddress() 返回文本显示中的IP地址字符串
</code></pre> 
<h4><a id="_28"></a>端口</h4> 
<p>端口：应用程序在设备中唯一的标识。<br> 端口号：用两个字节表示的整数，它的取值范围是0<sub>65535。其中0</sub>1023之间的端口号用于一些知名的网络服务或者应用。我们自己使用1024以上的端口号就可以了。注意：一个端口号只能被一个应用程序使用。</p> 
<h4><a id="_32"></a>协议</h4> 
<p>协议：计算机网络中，连接和通信的规则被称为网络通信协议</p> 
<p>UDP协议<br> ⚫ 用户数据报协议(User Datagram Protocol)<br> ⚫ UDP是面向无连接通信协议。速度快，有大小限制一次最多发送64K，数据不安全，易丢失数据。</p> 
<p>TCP协议<br> ⚫ 传输控制协议 (Transmission Control Protocol)<br> ⚫ TCP协议是面向连接的通信协议。速度慢，没有大小限制，数据安全。</p> 
<h4><a id="UDP_44"></a>UDP通信程序</h4> 
<p>UDP发送数据</p> 
<ul><li>创建发送端的DatagramSocket对象</li><li>创建数据，并把数据打包(DatagramPacket)</li><li>调用DatagramSocket对象的方法发送数据</li><li>释放资源</li></ul> 
<p>UDP接收数据</p> 
<ul><li>创建接收端的DatagramSocket对象</li><li>创建一个箱子，用于接收数据</li><li>调用DatagramSocket的方法接收数据并将数据放入箱子中</li><li>解析数据包，并把数据在控制台显示</li><li>释放资源</li></ul> 
<p>UDP的三种通信方式<br> ⚫ 单播<br> ⚫ 组播<br> ⚫ 广播</p> 
<p>UDP通信组播代码实现<br> 组播地址：224.0.0.0 ~ 239.255.255.255<br> 其中224.0.0.0 ~ 224.0.0.255 为预留的组播地址</p> 
<p>单播的发送端<br> ① 创建发送端的Socket对象(DatagramSocket)<br> ② 创建数据，并把数据打包(DatagramPacket)<br> ③ 调用DatagramSocket对象的方法发送数据<br> 注意：在单播中，这里是发给指定IP的电脑但是在组播当中，这里是发给组播地址<br> ④ 释放资源</p> 
<p>单播的接收端：<br> ① 创建接收端的Socket对象(DatagramSocket)DatagramSocket ds = new DatagramSocket(10086);<br> ② 创建一个箱子，用于接收数据DatagramPacket dp = new DatagramPacket(new byte[1024], 1024);<br> ③ 调用DatagramSocket的方法接收数据并将数据放入箱子中ds.receive(dp);<br> ④ 解析数据包，并把数据在控制台显示byte[] data = dp.getData();System.out.println(new String(data,0,dp.getLength()));new MulticastSocket(10086);<br> ⑤ 释放资源</p> 
<p>UDP通信广播代码实现<br> ① 创建发送端的Socket对象(DatagramSocket)<br> ② 创建数据，并把数据打包(DatagramPacket)<br> ③ 调用DatagramSocket对象的方法发送数据<br> 注意：在单播中，这里是发给指定IP的电脑但是在广播当中，这里是发给广播地址<br> ④ 释放资源</p> 
<p>广播地址：255.255.255.255</p> 
<h4><a id="TCP_90"></a>TCP通信程序</h4> 
<p>TCP通信协议是一种可靠的网络协议，它在通信的两端各建立一个Socket对象。通信之前要保证连接已经建立。通过Socket产生IO流来进行网络通信。</p> 
<p>TCP发送数据步骤<br> ① 创建客户端的Socket对象(Socket)与指定服务端连接Socket(String host, int port)<br> ② 获取输出流，写数据OutputStream getOutputStream()<br> ③ 释放资源void close()</p> 
<p>TCP接收数据<br> ① 创建服务器端的Socket对象(ServerSocket)ServerSocket(int port)<br> ② 监听客户端连接，返回一个Socket对象Socket accept()<br> ③ 获取输入流，读数据，并把数据显示在控制台InputStream getInputStream()<br> ④ 释放资源void close()</p> 
<p>三次握手</p> 
<ul><li>客户端向服务器发出连接请求等待服务器确认</li><li>服务器向客户端返回一个响应告诉客户端收到了请求</li><li>客户端向服务器再次发出确认信息连接建立</li></ul> 
<p>四次挥手</p> 
<ul><li>客户端向服务器发出取消连接请求</li><li>服务器向客户端返回一个响应表示收到,客户端取消请求</li><li>服务器向客户端发出确认取消信息</li><li>客户端再次发送确认消息,连接取消</li></ul> 
<h4><a id="_115"></a>服务器端优化</h4> 
<ul><li>服务器只能处理一个客户端请求，接收完一个图片之后，服务器就关闭了。改进:循环</li><li>第二次上传文件的时候，会把第一次的文件给覆盖。改进:UUID. randomUUID()方法生成随机的文件名</li><li>使用循环虽然可以让服务器处理多个客户端请求。但是还是无法同时跟多个客户端进行通信。改进:开启多线程处理</li><li>使用多线程虽然可以让服务器同时处理多个客户端请求。但是资源消耗太大。改进:加入线程池</li></ul> 
<h4><a id="NIO_122"></a>NIO</h4> 
<p>我们之前学习的IO，称之为：BIO（Blocking IO）阻塞型IO。NIO（Non Blocking IO） 非阻塞性IO</p> 
<p>BIO与NIO的区别</p> 
<ul><li>区别一：BIO是阻塞的，NIO是非阻塞的</li><li>区别二：BIO是面向流的，NIO是面向缓冲区的BIO中数据传输是单向的，NIO中的缓冲区是双向的</li></ul> 
<p>NIO之缓冲区</p> 
<pre><code>static ByteBuffer allocate(长度) 创建byte类型的缓冲区
static ByteBuffer wrap(byte[] array) 创建一个有内容的byte类型缓冲区
</code></pre> 
<ul><li>capacity：容量（长度）</li><li>limit： 界限（最多能读/写到哪里）</li><li>posotion：位置（读/写哪个索引）</li></ul> 
<p>将数据添加到缓冲区</p> 
<p>获取缓冲区中的数据</p> 
<pre><code>rewind() 将position设置为0，可以重复读
clear() 数据读写完毕（读-&gt;写）
array() 将缓冲区转换成字节数组返回
</code></pre> 
<p>获取缓冲区里面数据之前，需要调用flip方法<br> 再次写数据之前，需要调用clear方法，但是数据还未消失，等再次写入数据，被覆盖了才会消失。</p> 
<p>NIO之通道</p> 
<ul><li>打开一个服务端通道</li><li>绑定对应的端口号</li><li>通道默认是阻塞的，需要设置为非阻塞</li><li>此时没有门卫大爷，所以需要经常看一下有没有连接发过来没？</li><li>如果有客户端来连接了，则在服务端通道内部，再创建一个客户端通道，相当于是客户端通道的延伸</li><li>客户端将缓冲区通过通道传递给服务端</li><li>服务端创建一个空的缓冲区装数据并输出</li></ul> 
<p>NIO之选择器</p> 
<ul><li>Selector选择器对象</li><li>SelectionKey绑定通道后返回的key</li><li>SelectableChannel能使用选择器的通道SocketChannel,ServerSocketChannel</li></ul> 
<p>选择器改写服务端</p> 
<ul><li>打开一个服务端通道(open)</li><li>绑定对应的端口号</li><li>通道默认是阻塞的，需要设置为非阻塞</li><li>打开一个选择器（门卫大爷）以上步骤中，服务端通道和门卫大爷还没有任何关系</li><li>将选择器绑定服务端通道，并监视服务端是否准备好</li><li>如果有客户端来连接了，大爷会遍历所有的服务端通道，谁准备好了，就让谁来连接连接后，在服务端通道内部，再创建一个客户端延伸通道</li><li>如果客户端把数据传递过来了，大爷会遍历所有的延伸通道，谁准备好了，谁去接收数据</li><li>选择器监视客户端通道</li><li>选择器监视服务端通道</li><li>选择器监视客户端延伸通道</li></ul> 
<p>非阻塞的HTTP服务器</p> 
<p>就是NIO服务器.HTTP：互联网传输数据的一种规则</p> 
<p>HTTP协议<br> 是互联网传输数据的一种规则。是基于TCP/IP协议由请求和响应组成</p> 
<p>URL统一资源定位符<br> 组成:协议 域名 端口号 请求资源路径（URI统一资源标识符）</p> 
<p>抓包工具</p> 
<p>HTTP请求协议</p> 
<ul><li>请求行 
  <ul><li>请求方式 get post</li><li>URI 如果省略就是默认资源</li><li>协议版本 HTTP1.1</li></ul> </li><li>请求头部 
  <ul><li>Host用来指定请求的服务端地址</li><li>Connection取值为keep-alive表示需要持久连接</li><li>User-Agent客户端的信息</li><li>Accept指定客户端能够接收的内容类型</li><li>Accept-Encoding指定浏览器可以支持的服务器返回内容压缩编码类型</li><li>Accept-Language浏览器可接受的语言</li></ul> </li><li>请求空行 空行</li><li>请求体 GET没有请求体</li></ul> 
<p>HTTP响应协议</p> 
<ul><li>响应行 
  <ul><li>协议版本HTTP1.1</li><li>响应状态码200，404，500</li><li>状态消息状态码对应的消息</li></ul> </li><li>响应头部 
  <ul><li>Content-Type 
    <ul><li>text/html ----&gt; 文本类型</li><li>image/png ----&gt; png格式文件</li><li>image/jpeg ----&gt; jpg格式文件</li></ul> </li></ul> </li><li>响应空行 空行</li><li>响应体</li></ul> 
<p>HTTP服务器<br> 封装请求头<br> 封装响应</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/afc309e1d01e27807efb1e6a87054793/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">odoo17基础培训1-odoo开发基础知识准备以及odoo17开发环境安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cb817788df335b9b393049a8835056c3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Tomcat靶机渗透</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
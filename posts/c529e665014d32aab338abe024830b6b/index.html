<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>前端发送请求获取后端文件，并且前端实现下载文件功能 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="前端发送请求获取后端文件，并且前端实现下载文件功能" />
<meta property="og:description" content="最近遇到一个需求，就是前端发送post请求获取后端的excel文件，并且前端实现下载导出到本地的功能。
前端页面就长上面那样，一个批量导出功能，用户勾选之后，前端通过接口把id和其他的参数传给后端，接口调用方法这里需要注意的是，这里必须设置responseType: ‘blob’
，后端返回来一个文件流，然后前端通过封装的方法实现下载导出，前端导出方法如下：
这里前端通过blobDownloads实现下载：
前端需要引入这个js
import localDownloadUtil from &#34;@/utils/localDownloadUtil.js&#34;; 然后我们看看这个js里封装了两个下载方法，一种是iframe下载，一种是二进制文件下载，这里我们选择了二进制文件下载：
/** * 本地下载一个文本文件。 * @link https://ourcodeworld.com/articles/read/189/how-to-create-a-file-and-generate-a-download-with-javascript-in-the-browser-without-a-server * @param filename {string} * @param text {string} */ // function download (filename, text) { // const element = document.createElement(&#39;a&#39;) // element.setAttribute(&#39;href&#39;, `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`) // element.setAttribute(&#39;download&#39;, filename) // element.style.display = &#39;none&#39; // document.body.appendChild(element) // element.click() // document.body.removeChild(element) // } // iframe下载文件，没又身份验证的get接口可以使用 function iframeDownloads(lastUrl){ var downloadFileUrl = window.g.API_URL &#43; lastUrl var elemIF = document.createElement(&#34;iframe&#34;); elemIF." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/c529e665014d32aab338abe024830b6b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-21T10:22:35+08:00" />
<meta property="article:modified_time" content="2023-04-21T10:22:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">前端发送请求获取后端文件，并且前端实现下载文件功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>最近遇到一个需求，就是前端发送post请求获取后端的excel文件，并且前端实现下载导出到本地的功能。<br> <img src="https://images2.imgbox.com/21/48/CzokQhrT_o.png" alt="在这里插入图片描述"><br> 前端页面就长上面那样，一个批量导出功能，用户勾选之后，前端通过接口把id和其他的参数传给后端，接口调用方法这里需要注意的是，这里必须设置responseType: ‘blob’<br> <img src="https://images2.imgbox.com/bb/4b/yTrUNrVG_o.png" alt="请添加图片描述"></p> 
<p>，后端返回来一个文件流，然后前端通过封装的方法实现下载导出，前端导出方法如下：<br> <img src="https://images2.imgbox.com/89/98/tzhcuqPP_o.png" alt="在这里插入图片描述"><br> 这里前端通过blobDownloads实现下载：<br> 前端需要引入这个js</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> localDownloadUtil <span class="token keyword">from</span> <span class="token string">"@/utils/localDownloadUtil.js"</span><span class="token punctuation">;</span>

</code></pre> 
<p>然后我们看看这个js里封装了两个下载方法，一种是iframe下载，一种是二进制文件下载，这里我们选择了二进制文件下载：</p> 
<pre><code class="prism language-javascript"><span class="token comment">/**
 * 本地下载一个文本文件。
 * @link https://ourcodeworld.com/articles/read/189/how-to-create-a-file-and-generate-a-download-with-javascript-in-the-browser-without-a-server
 * @param filename {string}
 * @param text {string}
 */</span>
<span class="token comment">// function download (filename, text) {<!-- --></span>
<span class="token comment">//   const element = document.createElement('a')</span>
<span class="token comment">//   element.setAttribute('href', `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`)</span>
<span class="token comment">//   element.setAttribute('download', filename)</span>

<span class="token comment">//   element.style.display = 'none'</span>
<span class="token comment">//   document.body.appendChild(element)</span>

<span class="token comment">//   element.click()</span>

<span class="token comment">//   document.body.removeChild(element)</span>
<span class="token comment">// }</span>

<span class="token comment">// iframe下载文件，没又身份验证的get接口可以使用</span>
<span class="token keyword">function</span> <span class="token function">iframeDownloads</span><span class="token punctuation">(</span><span class="token parameter">lastUrl</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">var</span> downloadFileUrl <span class="token operator">=</span> window<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token constant">API_URL</span> <span class="token operator">+</span> lastUrl
  <span class="token keyword">var</span> elemIF <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"iframe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  elemIF<span class="token punctuation">.</span>src <span class="token operator">=</span> downloadFileUrl<span class="token punctuation">;</span>
  elemIF<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>elemIF<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 设备二进制文件</span>
<span class="token keyword">function</span> <span class="token function">blobDownloads</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> fileName</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// type: 'application/vnd.ms-excel'</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
  link<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span>
  link<span class="token punctuation">.</span>href <span class="token operator">=</span> url
  link<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'download'</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span>
  link<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token comment">// 下载完毕删除a标签</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// download,</span>
  blobDownloads<span class="token punctuation">,</span>
  iframeDownloads
<span class="token punctuation">}</span>
</code></pre> 
<p>还有一种情况是后端返回的不是文件流或文件对象，而返回的就是一个blob文件，然后文件名带文件格式的字符串，如下图是后端返回的结果：<br> <img src="https://images2.imgbox.com/17/94/u8wPXKZB_o.png" alt="请添加图片描述"><br> 那这个请求就不能用我们封装的请求去发请求了，需要我们手动写个axios去发请求，并将返回的结果通过window.open来打开下载：<br> <img src="https://images2.imgbox.com/e6/95/vesFqqZO_o.png" alt="请添加图片描述"><br> 整个页面完整代码如下：</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mainBox"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 仿冒日志 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>card shadow<span class="token operator">=</span><span class="token string">"always"</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"'height:100%;overflow:auto;'"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"centerLeftBox"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>search<span class="token operator">-</span>form
          ref<span class="token operator">=</span><span class="token string">"searchForm_Board"</span>
          @reset<span class="token operator">=</span><span class="token string">"reset_Board"</span>
          @handleSubmit<span class="token operator">=</span><span class="token string">"handleSubmitSearch_Board"</span>
          <span class="token operator">:</span>formData<span class="token operator">=</span><span class="token string">"formData_Board"</span>
          <span class="token operator">:</span>isInline<span class="token operator">=</span><span class="token string">"true"</span>
          <span class="token operator">:</span>searchConfig<span class="token operator">=</span><span class="token string">"searchConfig_Board"</span>
        <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>search<span class="token operator">-</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height:10px;"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>commonTable
        <span class="token operator">:</span>tableHead<span class="token operator">=</span><span class="token string">"tableHead_Board"</span>
        <span class="token operator">:</span>tableData<span class="token operator">=</span><span class="token string">"tableData_Board"</span>
        <span class="token operator">:</span>selectionFlag<span class="token operator">=</span><span class="token string">"true"</span>
        <span class="token operator">:</span>toolBoxFlag<span class="token operator">=</span><span class="token string">"true"</span>
        <span class="token operator">:</span>resizable<span class="token operator">=</span><span class="token string">"true"</span>
        <span class="token operator">:</span>dataFiter<span class="token operator">=</span><span class="token string">"true"</span>
        <span class="token operator">:</span>xuhaoFlag<span class="token operator">=</span><span class="token string">"false"</span>
        <span class="token operator">:</span>dropdownList<span class="token operator">=</span><span class="token string">"dropdownList"</span>
        @selectAction<span class="token operator">=</span><span class="token string">"selectAction"</span>
        <span class="token operator">:</span>addBtn<span class="token operator">=</span><span class="token string">"false"</span>
        <span class="token operator">:</span>tableLoading<span class="token operator">=</span><span class="token string">"tableLoading_Board"</span>
        <span class="token operator">:</span>showListD<span class="token operator">=</span><span class="token string">"showListD_Board"</span>
        <span class="token operator">:</span>maxHeight<span class="token operator">=</span><span class="token string">"'458'"</span>
        <span class="token operator">:</span>freeElfFlag<span class="token operator">=</span><span class="token string">"false"</span>
        <span class="token operator">:</span>rightBtnList<span class="token operator">=</span><span class="token string">"rightBtnList"</span>
        ref<span class="token operator">=</span><span class="token string">"commonTable"</span>
      <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>template slot<span class="token operator">-</span>scope<span class="token operator">=</span><span class="token string">"scope"</span> slot<span class="token operator">=</span><span class="token string">"freeElf"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>el<span class="token operator">-</span>button
          size<span class="token operator">=</span><span class="token string">"mini"</span>
          type<span class="token operator">=</span><span class="token string">"text"</span>
          @click<span class="token operator">=</span><span class="token string">"goFakeLog(scope.scope.row)"</span>
          v<span class="token operator">-</span>authbuttons<span class="token operator">:</span><span class="token punctuation">[</span>otherAuth<span class="token punctuation">]</span>
          <span class="token operator">&gt;</span>仿冒日志<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button
        <span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>commonTable<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height:10px;"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>pagination
        <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"tac page-style"</span>
        background
        @size<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"BoardChangeSize"</span>
        @current<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"BoardCurrentChange"</span>
        <span class="token operator">:</span>current<span class="token operator">-</span>page<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"BoardPageObj.page"</span>
        <span class="token operator">:</span>page<span class="token operator">-</span>sizes<span class="token operator">=</span><span class="token string">"[10, 20, 30, 40, 50]"</span>
        <span class="token operator">:</span>page<span class="token operator">-</span>size<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"BoardPageObj.page_size"</span>
        <span class="token operator">:</span>current<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"BoardPageObj.page"</span>
        layout<span class="token operator">=</span><span class="token string">"total, sizes, prev, pager, next, jumper"</span>
        <span class="token operator">:</span>total<span class="token operator">=</span><span class="token string">"BoardPageObj.total"</span>
        <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"'text-align:left;'"</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>pagination<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>card<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>el<span class="token operator">-</span>dialog
      title<span class="token operator">=</span><span class="token string">"处理仿冒"</span>
      <span class="token literal-property property">center</span>
      <span class="token operator">:</span>visible<span class="token punctuation">.</span>sync<span class="token operator">=</span><span class="token string">"isShowModal"</span>
      @close<span class="token operator">=</span><span class="token string">"closeModal"</span>
      <span class="token operator">:</span>show<span class="token operator">-</span>close<span class="token operator">=</span><span class="token string">"true"</span>
      <span class="token operator">:</span>close<span class="token operator">-</span>on<span class="token operator">-</span>click<span class="token operator">-</span>modal<span class="token operator">=</span><span class="token string">"false"</span>
      <span class="token operator">:</span>width<span class="token operator">=</span><span class="token string">"'800px'"</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>fake<span class="token operator">-</span>edit
        v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"isShowModal"</span>
        ref<span class="token operator">=</span><span class="token string">"fakeEdit"</span>
        <span class="token operator">:</span>formData<span class="token operator">=</span><span class="token string">"FakeObj"</span>
        <span class="token operator">:</span>newValue<span class="token operator">=</span><span class="token string">"newValue"</span>
        @closeFake<span class="token operator">=</span><span class="token string">"closeFake"</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div slot<span class="token operator">=</span><span class="token string">"footer"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog-footer"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button @click<span class="token operator">=</span><span class="token string">"isShowModal = false"</span><span class="token operator">&gt;</span>取 消<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> <span class="token operator">:</span>loading<span class="token operator">=</span><span class="token string">"saveLoading"</span> @click<span class="token operator">=</span><span class="token string">"editOk"</span>
          <span class="token operator">&gt;</span>处 理<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button
        <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>dialog<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> searchForm <span class="token keyword">from</span> <span class="token string">"@/components/search-form"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> commonTable <span class="token keyword">from</span> <span class="token string">"@/components/common-table"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> getFakelogList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/api/systemControl.js"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> getBoardFakeCommonData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/api/asset.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> localDownloadUtil <span class="token keyword">from</span> <span class="token string">"@/utils/localDownloadUtil.js"</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> getToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/utils/auth"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"PendingProcessing"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    commonTable<span class="token punctuation">,</span>
    searchForm
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">formData_Board</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">searchConfig_Board</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"select"</span><span class="token punctuation">,</span>

          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"操作类型"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token string">"log_pd_result"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">labelWidth</span><span class="token operator">:</span> <span class="token number">95</span><span class="token punctuation">,</span>
          <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">changeSearch</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">changeSearch</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">defaultPropsLabel</span><span class="token operator">:</span> <span class="token string">"val"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">defaultPropsValue</span><span class="token operator">:</span> <span class="token string">"key"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"设备IP"</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token string">"ip"</span><span class="token punctuation">,</span> <span class="token literal-property property">labelWidth</span><span class="token operator">:</span> <span class="token number">95</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"input"</span><span class="token punctuation">,</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"设备MAC"</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token string">"old"</span><span class="token punctuation">,</span> <span class="token literal-property property">labelWidth</span><span class="token operator">:</span> <span class="token number">95</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"input"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"当前MAC"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token string">"new"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">labelWidth</span><span class="token operator">:</span> <span class="token number">95</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"timeBox"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"时间范围"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token string">"time"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"btnList"</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tableHead_Board</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"设备IP"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">"ip"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"设备MAC"</span><span class="token punctuation">,</span> <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">"old"</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span> <span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"仿冒原因"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">"cause_str"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"当前MAC"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">"new"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"操作人账户"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">"user_name"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"操作类型"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">"pd_result_str"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"更新时间"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">"c_time"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"normal"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">sortable</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tableData_Board</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tableLoading_Board</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">showListD_Board</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"ip"</span><span class="token punctuation">,</span>
        <span class="token string">"old"</span><span class="token punctuation">,</span>
        <span class="token string">"cause_str"</span><span class="token punctuation">,</span>
        <span class="token string">"new"</span><span class="token punctuation">,</span>
        <span class="token string">"user_name"</span><span class="token punctuation">,</span>
        <span class="token string">"c_time"</span><span class="token punctuation">,</span>
        <span class="token string">"pd_result_str"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">BoardPageObj</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">page_size</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token literal-property property">total</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">editAuth</span><span class="token operator">:</span> <span class="token string">"update,FakeManage"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">otherAuth</span><span class="token operator">:</span> <span class="token string">"others,FakeManage"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">FakeObj</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">isShowModal</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">saveLoading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">newValue</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dropdownList</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// {actionName:'fileAction',label:'归档',iconClass:'el-icon-s-cooperation',actionConfirm:'是否确定归档这些数据'},</span>
        <span class="token comment">// {actionName:'deleteAction',label:'删除',iconClass:'el-icon-delete',actionConfirm:'是否确定删除这些数据'},</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">actionName</span><span class="token operator">:</span> <span class="token string">"downLoadBatch"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"批量导出"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"primary"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">iconClass</span><span class="token operator">:</span> <span class="token string">"el-icon-download"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">actionConfirm</span><span class="token operator">:</span> <span class="token string">"是否确定导出这些数据"</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// {<!-- --></span>
        <span class="token comment">//   actionName: "editGroup",</span>
        <span class="token comment">//   label: "移动分组",</span>
        <span class="token comment">//   type: "primary",</span>
        <span class="token comment">//   iconClass: "el-icon-s-cooperation",</span>
        <span class="token comment">//   actionConfirm: "是否确定移动这些数据",</span>
        <span class="token comment">//   flag: true,</span>
        <span class="token comment">// },</span>
        <span class="token comment">// {actionName:'editGroupHigh',label:'高级分组',type:'primary',iconClass:'el-icon-s-grid',actionConfirm:'', flagEx: true,},</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rightBtnList</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">actionName</span><span class="token operator">:</span> <span class="token string">"downAll"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">"一键导出"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"primary"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">iconClass</span><span class="token operator">:</span> <span class="token string">"el-icon-download"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">actionConfirm</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
          <span class="token literal-property property">flagEx</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>formData_Board<span class="token punctuation">.</span>ip <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>fakeIp<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit_Board</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCommonData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 每页显示数变动</span>
    <span class="token function">BoardChangeSize</span><span class="token punctuation">(</span><span class="token parameter">pageSize</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// console.log("条数", pageSize);</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>BoardPageObj<span class="token punctuation">.</span>page_size <span class="token operator">=</span> pageSize<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit_Board</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">BoardCurrentChange</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// console.log("当前页", page);</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>BoardPageObj<span class="token punctuation">.</span>page <span class="token operator">=</span> page<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit_Board</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 获取交换机列表数据</span>
    <span class="token function">handleSubmit_Board</span><span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> flag</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>BoardPageObj<span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">let</span> dataT <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>formData_Board<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      dataT<span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>BoardPageObj<span class="token punctuation">.</span>page<span class="token punctuation">;</span>
      dataT<span class="token punctuation">.</span>page_size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>BoardPageObj<span class="token punctuation">.</span>page_size<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>dataT<span class="token punctuation">.</span>time <span class="token operator">&amp;&amp;</span> dataT<span class="token punctuation">.</span>time<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataT<span class="token punctuation">.</span>start_time <span class="token operator">=</span> dataT<span class="token punctuation">.</span>time<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        dataT<span class="token punctuation">.</span>end_time <span class="token operator">=</span> dataT<span class="token punctuation">.</span>time<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> dataT<span class="token punctuation">.</span>time<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>tableLoading_Board <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token function">getFakelogList</span><span class="token punctuation">(</span>dataT<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>tableData_Board <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>BoardPageObj<span class="token punctuation">.</span>total <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>tableLoading_Board <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 重置筛选项</span>
    <span class="token function">reset_Board</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>formData_Board <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit_Board</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">handleSubmitSearch_Board</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit_Board</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">editData</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isShowModal <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>newValue <span class="token operator">=</span> item<span class="token punctuation">.</span>new<span class="token punctuation">;</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>FakeObj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token operator">...</span>item<span class="token punctuation">,</span>
        <span class="token literal-property property">process_type</span><span class="token operator">:</span> <span class="token string">"1"</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">closeModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isShowModal <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">closeFake</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isShowModal <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset_Board</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">editOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>fakeEdit<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 数据批量操作,判断和提示都已经做好了</span>
    <span class="token function">selectAction</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">var</span> idList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> idString <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> element <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
        idList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        idString <span class="token operator">=</span> idString <span class="token operator">+</span> element<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">!==</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          idString <span class="token operator">=</span> idString <span class="token operator">+</span> <span class="token string">","</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">var</span> dataT <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">ids</span><span class="token operator">:</span> idString <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"fileAction"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 归档</span>
        <span class="token comment">// assetsdevinfofiling(dataT).then((res) =&gt; {<!-- --></span>
        <span class="token comment">//   that.$message({ message: "归档成功", type: "success" });</span>
        <span class="token comment">//   this.handleSubmitSearch({});</span>
        <span class="token comment">// });</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"deleteAction"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// if (data.data.length &lt;= 1) {<!-- --></span>
        <span class="token comment">//   assetsListDelete(dataT.ids).then((res) =&gt; {<!-- --></span>
        <span class="token comment">//     that.$message({ message: "删除成功", type: "success" });</span>
        <span class="token comment">//     this.handleSubmitSearch({});</span>
        <span class="token comment">//   });</span>
        <span class="token comment">// } else {<!-- --></span>
        <span class="token comment">//   multipleDelete(dataT.ids).then((res) =&gt; {<!-- --></span>
        <span class="token comment">//     that.$message({ message: "删除成功", type: "success" });</span>
        <span class="token comment">//     this.handleSubmitSearch({});</span>
        <span class="token comment">//   });</span>
        <span class="token comment">// }</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"editGroup"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// var showListFenzu = [];</span>
        <span class="token comment">// for (let index = 0; index &lt; data.data.length; index++) {<!-- --></span>
        <span class="token comment">//   const element = data.data[index];</span>
        <span class="token comment">//   showListFenzu.push(element.id);</span>
        <span class="token comment">// }</span>
        <span class="token comment">// this.editAssetGroutIdList = showListFenzu;</span>
        <span class="token comment">// this.treeTitle = "设置资产分组";</span>
        <span class="token comment">// this.treeFlag = true;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"downLoadBatch"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// dataT.id_ls = JSON.stringify(idList);</span>
        dataT<span class="token punctuation">.</span>filename <span class="token operator">=</span> <span class="token string">"仿冒文件"</span><span class="token punctuation">;</span>
        dataT<span class="token punctuation">.</span>pending_flag <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">;</span>
        dataT<span class="token punctuation">.</span>ip <span class="token operator">=</span> that<span class="token punctuation">.</span>formData_Board<span class="token punctuation">.</span>ip <span class="token operator">?</span> that<span class="token punctuation">.</span>formData_Board<span class="token punctuation">.</span>ip <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
        dataT<span class="token punctuation">.</span>old <span class="token operator">=</span> that<span class="token punctuation">.</span>formData_Board<span class="token punctuation">.</span>old <span class="token operator">?</span> that<span class="token punctuation">.</span>formData_Board<span class="token punctuation">.</span>old <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
        dataT<span class="token punctuation">.</span>new <span class="token operator">=</span> that<span class="token punctuation">.</span>formData_Board<span class="token punctuation">.</span>new <span class="token operator">?</span> that<span class="token punctuation">.</span>formData_Board<span class="token punctuation">.</span>new <span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
        dataT<span class="token punctuation">.</span>pd_result <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tableLoading_Board <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> datatFormdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> dataT<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          datatFormdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> dataT<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>window<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token constant">API_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/counterfeits/log/export/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>

          <span class="token literal-property property">data</span><span class="token operator">:</span> datatFormdata<span class="token punctuation">,</span>
          <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string-property property">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"multipart/form-data"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token string">"Bearer "</span> <span class="token operator">+</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// console.log("导出", res);</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">let</span> filename <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
              window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>window<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token constant">API_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/media/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"批量导出成功"</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>commonTable<span class="token punctuation">.</span><span class="token function">resetSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>commonTable<span class="token punctuation">.</span><span class="token function">clearSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>tableLoading_Board <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"downAll"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tableLoading_Board <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">"仿冒文件"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">ids</span><span class="token operator">:</span> <span class="token string">"all"</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">let</span> queryFormdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> query<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          queryFormdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>k<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> query<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>window<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token constant">API_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/counterfeits/log/export/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>

          <span class="token literal-property property">data</span><span class="token operator">:</span> queryFormdata<span class="token punctuation">,</span>
          <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string-property property">"Content-Type"</span><span class="token operator">:</span> <span class="token string">"multipart/form-data"</span><span class="token punctuation">,</span>
            <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token string">"Bearer "</span> <span class="token operator">+</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// console.log("导出", res);</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">let</span> filename <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

              window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>window<span class="token punctuation">.</span>g<span class="token punctuation">.</span><span class="token constant">API_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/media/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>filename<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">"一键导出成功"</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>commonTable<span class="token punctuation">.</span><span class="token function">resetSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>commonTable<span class="token punctuation">.</span><span class="token function">clearSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>tableLoading_Board <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">goFakeLog</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"FakeLog"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">fakeIp</span><span class="token operator">:</span> item<span class="token punctuation">.</span>ip
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//获取公共数据</span>
    <span class="token function">getCommonData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">getBoardFakeCommonData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// console.log("获取公共数据", res);</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>searchConfig_Board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>options <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>log_pd_result<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9fa1295fb67740ceee848e10cbf6310d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">git 查看 stash 记录的内容</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b068522ce2f3ee45fc3a1326b2367d8d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【超详细】初探FME--获取等时圈</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ant design vue 实现组件类型推断 vue3,vite,ts - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ant design vue 实现组件类型推断 vue3,vite,ts" />
<meta property="og:description" content="1,全局引入的antd vue组件是没有代码提示的
因为全局引入的时候组件的类型已经丢失了,这时候写代码就没有这个组件的代码提示,还得去看文档
2,如何实现全局组件类型推断
(1),在使用的时候引入,这个不用多说,使用的时候写import就行
(2),在全局写一个类型定义文件,这个需要使用vite的插件帮我们实现
3,实现推断
(1),使用vite的unplugin-vue-components插件帮我们实现Vue 的按需组件自动导入
https://github.com/antfu/unplugin-vue-components
(2),配置 vite.config.ts
安装完成unplugin-vue-components后配置如下:
import Components from &#34;unplugin-vue-components/vite&#34;; // 按需组件自动导入 import { AntDesignVueResolver } from &#34;unplugin-vue-components/resolvers&#34;; // https://vitejs.dev/config/ export default ({ mode, }: { mode: &#34;dev&#34; | &#34;prod&#34; | &#34;build&#34; | &#34;devbuild&#34;; }): UserConfigExport =&gt; { return defineConfig({ plugins: [ vue(), vueJsx(), Components({ dts: true, //生成components.d.ts 全局定义文件 resolvers: [ AntDesignVueResolver({ //对使用到的全局ant design vue组件进行类型导入 importStyle: false, // 不动态引入css,这个不强求 }), ], include: [/\." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/df5d0ed11c7224a97c3705f1842edb24/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-05T14:24:48+08:00" />
<meta property="article:modified_time" content="2022-07-05T14:24:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ant design vue 实现组件类型推断 vue3,vite,ts</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1,全局引入的antd vue组件是没有代码提示的</p> 
<p>因为全局引入的时候组件的类型已经丢失了,这时候写代码就没有这个组件的代码提示,还得去看文档</p> 
<p><img alt="" height="302" src="https://images2.imgbox.com/05/f0/4jXGAojE_o.png" width="588"></p> 
<p> 2,如何实现全局组件类型推断</p> 
<p><img alt="" height="312" src="https://images2.imgbox.com/ad/c0/WW8rIZyz_o.png" width="837"></p> 
<p>   (1),在使用的时候引入,这个不用多说,使用的时候写import就行</p> 
<p>   (2),在全局写一个类型定义文件,这个需要使用vite的插件帮我们实现</p> 
<p>3,实现推断</p> 
<p>(1),使用vite的unplugin-vue-components插件帮我们实现Vue 的按需组件自动导入</p> 
<p><a href="https://github.com/antfu/unplugin-vue-components" title="https://github.com/antfu/unplugin-vue-components">https://github.com/antfu/unplugin-vue-components</a></p> 
<p>(2),配置 vite.config.ts</p> 
<p>安装完成unplugin-vue-components后配置如下:</p> 
<pre><code class="language-javascript">import Components from "unplugin-vue-components/vite"; // 按需组件自动导入
import { AntDesignVueResolver } from "unplugin-vue-components/resolvers";
// https://vitejs.dev/config/
export default ({
  mode,
}: {
  mode: "dev" | "prod" | "build" | "devbuild";
}): UserConfigExport =&gt; {
  return defineConfig({
    plugins: [
      vue(),
      vueJsx(),
      Components({
        dts: true, //生成components.d.ts 全局定义文件
        resolvers: [
          AntDesignVueResolver({ //对使用到的全局ant design vue组件进行类型导入
            importStyle: false,  // 不动态引入css,这个不强求
          }),
        ],
        include: [/\.vue$/, /\.vue\?vue/, /\.md$/, /\.tsx$/], //包含的文件类型
      })
    ],
    ....其他配置
    });
};</code></pre> 
<p> (3),再次启动项目时会自动生成一个components.d.ts</p> 
<p><img alt="" height="964" src="https://images2.imgbox.com/77/e0/loRtMjKL_o.png" width="1200"></p> 
<p> (4),有这个文件还不够,还需要在tsconfig.json配置文件中修改配置,使得vscode能正确识别类型</p> 
<pre><code class="language-javascript">{
  "compilerOptions": {
    "target": "esnext",
    "module": "esnext",
    "moduleResolution": "node",
    "strict": true,
    "jsx": "preserve",
    "sourceMap": true,
    "resolveJsonModule": true,
    "esModuleInterop": true,
    "types": ["vite/client","node"],
    "baseUrl": ".",
    "importHelpers": true,
    "skipLibCheck": true,
    "allowSyntheticDefaultImports": true,
    "paths": {
      "@/*": ["src/*","components.d.ts"],
    },
    "lib": [
      "esnext",
      "dom",
      "dom.iterable",
      "scripthost"
    ]
  },
  "exclude": [
    "node_modules"
  ],
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue","main/**/*"]
}
</code></pre> 
<p>(5)这时候就可以使用类型推断了,enjoy</p> 
<p><img alt="" height="217" src="https://images2.imgbox.com/39/e2/FgKBIlZX_o.png" width="952"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f688c547889121fcccf895f95c84764/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java&#43;springboot&#43;mysql仓库管理系统（源码、文档、ppt）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7618cc2aa08e9104c9b23bce5882210c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux设置yum源为阿里云镜像源</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
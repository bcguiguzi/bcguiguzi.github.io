<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>制作composer包提供sdk扩展 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="制作composer包提供sdk扩展" />
<meta property="og:description" content="目录 1、初始化包
2、将代码推送到github远程仓库
3、为写好扩展包打上tag标签标记当前代码版本
4、将包发布到包管理平台
初始化包，生成 Creates a basic composer.json file in current directory
composer init composer init 按照引导就可以生成了 , 详细的引导解释如下
This command will guide you through creating your composer.json config. # 1. 输入项目命名空间，我是按github账号名/仓库名 # 注意&lt;vendor&gt;/&lt;name&gt; 必须要符合 [a-z0-9_.-]&#43;/[a-z0-9_.-]&#43; Package name (&lt;vendor&gt;/&lt;name&gt;) [root/test_composer]:yourname/projectname # 2. 项目描述 Description []:这是一个测试composer init 项目 # 3. 输入作者信息，直接回车可能出现如下提示，有的系统可以直接回车，具体为什么？这里不详细介绍 Invalid author string. Must be in the format: John Smith &lt;john@example.com&gt; # 3.1. 注意必须要符合 John Smith &lt;john@example.com&gt; Author [Alan." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/047d68a6a6c03f4233f5093626dde816/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-04T23:22:46+08:00" />
<meta property="article:modified_time" content="2022-12-04T23:22:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">制作composer包提供sdk扩展</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>目录</h3> 
<p>1、初始化包<br> 2、将代码推送到github远程仓库<br> 3、为写好扩展包打上tag标签标记当前代码版本<br> 4、将包发布到包管理平台</p> 
<h4><a id="_5"></a>初始化包，生成</h4> 
<p>Creates a basic composer.json file in current directory</p> 
<pre><code>composer init 
</code></pre> 
<p>composer init 按照引导就可以生成了 , 详细的引导解释如下</p> 
<pre><code>This command will guide you through creating your composer.json config.
 
# 1. 输入项目命名空间，我是按github账号名/仓库名
# 注意&lt;vendor&gt;/&lt;name&gt; 必须要符合 [a-z0-9_.-]+/[a-z0-9_.-]+
Package name (&lt;vendor&gt;/&lt;name&gt;) [root/test_composer]:yourname/projectname
 
# 2. 项目描述
Description []:这是一个测试composer init 项目
 
# 3. 输入作者信息，直接回车可能出现如下提示，有的系统可以直接回车，具体为什么？这里不详细介绍
 Invalid author string.  Must be in the format: John Smith &lt;john@example.com&gt;
# 3.1. 注意必须要符合 John Smith &lt;john@example.com&gt;
Author [Alan.Liu &lt;5425902+liuyuanshan11@user.noreply.gitee.com&gt;, n to skip]: liuyuanshan
 
# 4. 输入最低稳定版本，stable, RC, beta, alpha, dev
Minimum Stability []:dev
 
# 5. 输入项目类型
Package Type (e.g. library, project, metapackage, composer-plugin) []:library
 
# 6. 输入授权类型，默认回车
License []:
 
Define your dependencies.
 
# 7. 输入依赖信息，默认回车
Would you like to define your dependencies (require) interactively [yes]?
 
# 7.1. 如果需要依赖，则输入要安装的依赖
Search for a package:php
 
# 7.2. 输入版本号
Enter the version constraint to require (or leave blank to use the latest version): &gt;=7.0.0
 
#  如需多个依赖，则重复以上两个步骤(7.1/7.2)，没有则默认回车
Search for a package:
 
# 8. 是否需要require-dev，
Would you like to define your dev dependencies (require-dev) interactively [yes]?
 
{
    "name": "liuyuanshan11/demo",
    "description": "this is test project",
    "type": "library",
    "require-dev": {
        "php": "7.0.0"
    },
    "autoload": {
        "psr-4": {
            "Liuyuanshan11\\Demo\\": "src/"
        }
    },
    "authors": [
        {
            "name": "liuyuanshan"
        }
    ],
    "minimum-stability": "dev",
    "require": {}
}
# 9. 是否生成composer.json
Do you confirm generation [yes]?
 
# 现在安装依赖项吗
Would you like to install dependencies now [yes]?
</code></pre> 
<p>随后调整composer.json配置文件，内容示例如下：</p> 
<pre><code>{
    "name": "liuyuanshan11/demo",
    "description": "this is test project",
    "homepage":"https://github.com/liuyuanshan11/demo",
    "require": {
        "php":"&gt;=7.0",
        "ext-json": "*"
    },
    "type": "library",
    "autoload": {
        "psr-4": {
            "Liuyuanshan11\\Demo\\": "src/"
        }
    },
    "authors": [
        {
            "name": "liuyuanshan",
            "email": "1019213039@qq.com",
            "homepage":"https://github.com/liuyuanshan11/demo"
        }
    ],
    "minimum-stability": "dev"
}

</code></pre> 
<p>生成vendor目录</p> 
<pre><code>composer update
</code></pre> 
<p>编写测试代码<br> src/Test.php</p> 
<pre><code>&lt;?php
namespace Liuyuanshan11\Demo;
class Test
{
    function index()
    {
        echo "test";
    }
}
</code></pre> 
<p>后再根目录 创建一下 index.php 引入类</p> 
<pre><code>&lt;?php
use Liuyuanshan11\Demo\Test;

include_once "./vendor/autoload.php";
$obj = new Test();
$obj-&gt;index();

</code></pre> 
<p>执行自动加载命令，为创建的类文件指定自动加载命名空间</p> 
<pre><code>composer dump-autoload -o
</code></pre> 
<h4><a id="github_141"></a>将代码推送到github远程仓库</h4> 
<pre><code># 将代码推送到master远程仓库
 git push origin master
</code></pre> 
<h4><a id="tag_148"></a>为写好扩展包打上tag标签标记当前代码版本</h4> 
<p>为当前版本打上tag标签，在发布包管理平台时会使用到，因为包的拉取是根据版本拉取的，默认拉取最新tag标签的版本包</p> 
<pre><code># 创建标签
git tag v1.0.0

# 查看所有标签
git tag

# 远程推送到github仓库
git push origin master --tags
</code></pre> 
<h4><a id="_160"></a>将包发布到包管理平台</h4> 
<p>先到包管理平台进行注册登录，这里我选择了github账号进行授权登录比较方标</p> 
<pre><code>https://packagist.org/
</code></pre> 
<p>点击【Submit】按钮，将github仓库地址放入解析框，最后点击【Check】便可完成包的发布<br> <img src="https://images2.imgbox.com/89/86/f4H8RRKe_o.png" alt="在这里插入图片描述"><br> 查看发布的包与迭代中的包版本<br> <img src="https://images2.imgbox.com/7b/c3/CZwq0UNH_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_170"></a>下载并使用包示例</h4> 
<p>下载包，默认拉取最新tag包</p> 
<pre><code>composer require liuyuanshan11/sd-micro-service-client
</code></pre> 
<p>使用包</p> 
<pre><code>use liuyuanshan11\SdMicroServiceClient\MicroService;


$services = [
    'queue' =&gt; 'https://queue-service.sumian.com',
    'console' =&gt; 'https://console-service.sumian.com',
    'organization' =&gt; 'https://organization-service.sumian.com',
    'liu' =&gt; 'http://sdapi.test.top'
];

$obj = new MicroService('appId', 'appSecret', $services);
var_dump($obj-&gt;get('console')-&gt;act('controller', 'action', ["key01" =&gt; "value01"]));
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9d365c95f8f0250bd41894ff1cf9cda/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redis 网络模型</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/062fad13139e7c76933d9fd9ddfd9d88/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">K8S - Pod 的概念和简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WebSSH神器sshwifty的安装与使用 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="WebSSH神器sshwifty的安装与使用" />
<meta property="og:description" content="本文章最初发表在XJHui’s Blog，未经允许，任何人禁止转载！
为使您获得最好的阅读体验，强烈建议您点击 这里 前往 XJHui’s Blog 查看！
WebSSH工具 初衷 9.9买的一年服务器，不用实属可惜由于是计算机专业实验课经常需要用到linux系统，苦于每次上实验都要被虚拟机各种问题困扰浪费时间博客已经搭建好了，完全可以把弄好的WebSSH嵌进去（别想太复杂，其实就是给个入口） SSH和WebSSH工具 因为在搭建博客的时候经常用到SSH，自己对它的理解就是它能实现“远程登陆”，刚看了百度其实这种想法不对。
SSH(Secure Shell是专为远程登录会话和其他网络服务提供安全性的协议。
我在用的SSH工具是Xshell（免费版本对我来说足以），通过Xshell输入用户名和密码就能远程登陆服务器。
通过上面的介绍，应该对WebSSH工具有了一点点的猜想。
WebSSH工具说白了就是把Xshell放到网页上，用户不需要安装，有个联网的浏览器就能控制服务器。
慎重考虑 本博客教程使用的WebSSH工具，虽是GitHub开源项目，但安全性较客户端（Xshell一类的）肯定是不够的，使用者请自行注意保护个人隐私安全。搭建该WebSSH工具需要云服务器。需要linux命令基础（会vim足够）。文章随长但也是为了让小白也能掌握，有些不得不啰嗦几句。 本博客的任务清单已在最后列出，清单未完成前会持续更新…
WebSSH神器Sshwifty 项目简介：Web SSH &amp; Telnet (WebSSH &amp; WebTelnet client)
作者DEMO：https://sshwifty.herokuapp.com（可以点进去体验一下，注意保护个人隐私）
个人Sshwifty：https://webssh.xingjiahui.top (安全起见暂时不开放)
点击访问项目地址，感谢作者！
有能力可以直接去看官方文档（小白还是建议老老实实看我教程，能少走些坑）。
安装步骤 下载sshwifty
$ wget https://github.com/niruix/sshwifty/releases/download/0.2.2-beta-release-prebuild/sshwifty_0.2.2-beta-release_linux_amd64.tar.gz 注：如果下载速度慢，可以尝试本地下载后使用Xftp上传到服务器（速度飞快）
由于服务器都在国外（我其实也不清楚，速度慢就是在国外），所以这里提供两个不限速下载链接：
sshwifty_0.2.2-beta-release_linux_amd64.tar.gzXftp 感谢蓝奏云！
Xftp使用方式很简单：先登录服务器，后拖拽上传（下图）：
解压sshwifty
$ tar -xzvf sshwifty_0.2.2-beta-release_linux_amd64.tar.gz 复制可执行文件到指定目录并赋予执行权限
$ cp sshwifty_linux_amd64 /usr/local/bin/sshwifty $ chmod &#43;x /usr/local/bin/sshwifty 生成默认配置文件：
$ cp sshwifty.conf.example.json /etc/sshwifty.conf.json 感谢：iMike
本地运行 启动 sshwifty，命令行输入：
$ sshwifty 运行结果：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6af60be5c048d109dc8f6b8afc6d93a8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-06T15:04:18+08:00" />
<meta property="article:modified_time" content="2020-05-06T15:04:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">WebSSH神器sshwifty的安装与使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本文章最初发表在<a href="https://plushine.cn" rel="nofollow">XJHui’s Blog</a>，未经允许，任何人禁止转载！</p> 
<p>为使您获得最好的阅读体验，强烈建议您点击 <a href="https://plushine.cn/33075.html" rel="nofollow">这里</a> 前往 XJHui’s Blog 查看！</p> 
<h2><a id="WebSSH_5"></a>WebSSH工具</h2> 
<img src="https://images2.imgbox.com/a1/33/MTC14wlV_o.png" width="90%" align="center"> 
<h3><a id="_9"></a>初衷</h3> 
<ul><li>9.9买的一年服务器，不用实属可惜</li><li>由于是计算机专业实验课经常需要用到linux系统，苦于每次上实验都要被虚拟机各种问题困扰浪费时间</li><li>博客已经搭建好了，完全可以把弄好的WebSSH嵌进去（别想太复杂，其实就是给个入口）</li></ul> 
<h3><a id="SSHWebSSH_15"></a>SSH和WebSSH工具</h3> 
<p>因为在<code>搭建博客</code>的时候经常用到SSH，自己对它的理解就是它能实现“远程登陆”，刚看了百度其实这种想法不对。</p> 
<p>SSH(Secure Shell是专为<code>远程登录会话</code>和<code>其他网络服务</code>提供安全性的<code>协议</code>。</p> 
<p>我在用的SSH工具是<code>Xshell</code>（免费版本对我来说足以），通过<code>Xshell</code>输入<code>用户名</code>和<code>密码</code>就能远程登陆服务器。</p> 
<p>通过上面的介绍，应该对<code>WebSSH</code>工具有了一点点的猜想。</p> 
<p><code>WebSSH</code>工具说白了就是把<code>Xshell</code>放到网页上，用户不需要安装，有个<code>联网的浏览器</code>就能<code>控制服务器</code>。</p> 
<h3><a id="_27"></a>慎重考虑</h3> 
<ol><li>本博客教程使用的<code>WebSSH工具</code>，虽是<code>GitHub</code>开源项目，但安全性较客户端（<code>Xshell</code>一类的）肯定是不够的，使用者请自行注意保护个人隐私安全。</li><li>搭建该<code>WebSSH工具</code>需要<code>云服务器</code>。</li><li>需要<code>linux命令</code>基础（会vim足够）。</li><li>文章随长但也是为了让<code>小白</code>也能掌握，有些不得不<code>啰嗦</code>几句。</li></ol> 
<p>本博客的<code>任务清单</code>已在最后列出，清单未完成前会持续更新…</p> 
<h2><a id="WebSSHSshwifty_36"></a>WebSSH神器Sshwifty</h2> 
<img src="https://images2.imgbox.com/54/87/hFdetKWE_o.png" width="90%" align="center"> 
<p>项目简介：Web SSH &amp; Telnet (WebSSH &amp; WebTelnet client)</p> 
<p>作者DEMO：<a href="https://sshwifty.herokuapp.com/" rel="nofollow">https://sshwifty.herokuapp.com</a>（可以点进去<code>体验一下</code>，注意<code>保护个人隐私</code>）</p> 
<p>个人Sshwifty：https://webssh.xingjiahui.top (安全起见<code>暂时不开放</code>)</p> 
<p>点击访问<a href="https://github.com/niruix/sshwifty">项目地址</a>，感谢作者！</p> 
<p>有能力可以直接去看<a href="https://github.com/niruix/sshwifty/blob/master/README.md">官方文档</a>（<code>小白</code>还是建议老老实实<code>看我教程</code>，能少走些<code>坑</code>）。</p> 
<h2><a id="_50"></a>安装步骤</h2> 
<ol><li> <p>下载<code>sshwifty</code></p> <pre><code class="prism language-shell">$ <span class="token function">wget</span> https://github.com/niruix/sshwifty/releases/download/0.2.2-beta-release-prebuild/sshwifty_0.2.2-beta-release_linux_amd64.tar.gz 
</code></pre> <p>注：如果下载<code>速度慢</code>，可以尝试<code>本地下载</code>后使用<code>Xftp</code>上传到服务器（速度飞快）</p> <p>由于<code>服务器</code>都在国外（我其实也不清楚，速度慢就是在国外），所以这里提供两个不限速下载链接：</p> 
  <ul><li><a href="https://ww.lanzous.com/icf4w7a" rel="nofollow">sshwifty_0.2.2-beta-release_linux_amd64.tar.gz</a></li><li><a href="https://ww.lanzous.com/icf4wgj" rel="nofollow">Xftp</a></li></ul> <p>感谢<a href="https://pc.woozooo.com/" rel="nofollow">蓝奏云</a>！</p> <p><code>Xftp</code>使用方式很简单：先<code>登录服务器</code>，后<code>拖拽上传</code>（下图）：</p> <img src="https://images2.imgbox.com/88/68/iOut1OPC_o.png" width="80%"> </li><li> <p>解压<code>sshwifty</code></p> <pre><code class="prism language-shell">$ <span class="token function">tar</span> -xzvf sshwifty_0.2.2-beta-release_linux_amd64.tar.gz 
</code></pre> </li><li> <p>复制可执行文件到指定目录并赋予执行权限</p> <pre><code class="prism language-shell">$ <span class="token function">cp</span> sshwifty_linux_amd64 /usr/local/bin/sshwifty 
$ <span class="token function">chmod</span> +x /usr/local/bin/sshwifty 
</code></pre> </li><li> <p>生成默认配置文件：</p> <pre><code class="prism language-shell">$ <span class="token function">cp</span> sshwifty.conf.example.json /etc/sshwifty.conf.json 
</code></pre> <p>感谢：<a href="https://developer.51cto.com/art/201911/606376.htm" rel="nofollow">iMike</a></p> </li></ol> 
<h2><a id="_92"></a>本地运行</h2> 
<p>启动 <code>sshwifty</code>，命令行输入：</p> 
<pre><code class="prism language-shell">$ sshwifty 
</code></pre> 
<p>运行结果：</p> 
<img src="https://images2.imgbox.com/0e/19/SJu7YooZ_o.png" width="80%"> 
<p>从上图可以看出本地访问默认使用<code>127.0.0.1:8182</code>这个地址</p> 
<h3><a id="_106"></a>可视化系统</h3> 
<p>可视化系统可以<code>安装浏览器</code>，安装后可直接<code>输入上面的地址访问</code>。</p> 
<h3><a id="_110"></a>服务器端</h3> 
<p>因为我用的<code>云服务器</code>，肯定不能像<code>可视化系统</code>那样直接访问，这里介绍如何使用ssh工具（<code>Xshell</code>为例）在自己电脑上远程访问服务器的本地地址（听起来有点绕，但的确是这么个意思）。</p> 
<p>感谢<a href="https://blog.csdn.net/hhhbada/article/details/105099128">hhhbada</a>和<a href="https://www.bt.cn/bbs/thread-1186-1-1.html" rel="nofollow">宝塔</a>提供的方法。</p> 
<h4><a id="_116"></a>开放安全组</h4> 
<ul><li> <p>腾讯云：https://www.bt.cn/bbs/thread-1229-1-1.html</p> </li><li> <p>阿里云：https://www.bt.cn/bbs/thread-2897-1-1.html</p> </li><li> <p>华为云：https://www.bt.cn/bbs/thread-3923-1-1.html</p> <p>根据自己服务器代理商选择对应链接进行操作，因为上面这些<code>开放安全组</code>的方法是我在安装<code>CuteOne</code>时遇到的，差异是最后开放端口时，我们要开放的端口号是8182，仅此一个（这里错了导致无法访问别找我…）。</p> </li></ul> 
<h4><a id="Xshell_126"></a>Xshell建立隧道</h4> 
<p>​ 版本：Xshell.exe: 6.0.0033（其余版本大同小异）</p> 
<ol><li> <p>连接服务器（很简单，自行百度）</p> </li><li> <p>依次点击：文件（左上角）-&gt;当前会话属性-&gt;连接-&gt;SSH-&gt;隧道，进入到下面的界面：</p> <img src="https://images2.imgbox.com/80/aa/FyRLIVBg_o.png" width="80%" align="center"> </li><li> <p>选择<code>添加</code></p> <p>这里举例说明<code>添加隧道的规则</code>：</p> <img src="https://images2.imgbox.com/e9/24/h8odjk5Y_o.png" width="80%" align="center"> <p>​ 如果按照上图填写，实现的是我们自己计算机的<code>localhost:8000</code>地址可以访问服务器的<code>localhost:8182</code>，举这个例子应该很清楚了。</p> <p>​ 为了方便后面的操作，我选择了下面的填写方法：</p> <img src="https://images2.imgbox.com/82/d5/HoW7yLLR_o.png" width="80%"> <p>​ 点击确定（不要点<code>连接</code>）</p> <img src="https://images2.imgbox.com/c4/3a/TjFRqVXI_o.png" width="80%" align="center"> </li></ol> 
<h4><a id="_152"></a>本地启动</h4> 
<p>输入命令：</p> 
<pre><code class="prism language-shell">sshwifty
</code></pre> 
<p>浏览器输入<code>localhost:8182</code>即可。</p> 
<p>你可能会问前面不是说地址是<code>127.0.0.1</code>？为什么这里又要用localhost？这里说明一下你可以把<code>localhost</code>和<code>127.0.0.1</code>想成<code>同一个东西</code>。</p> 
<p>刚启动如下图：</p> 
<img src="https://images2.imgbox.com/2d/1a/IPAq8syB_o.png" width="80%"> 
<p>稍等，即出现验证页面：</p> 
<img src="https://images2.imgbox.com/5c/b2/AxX8Dips_o.png" width="80%" align="center"> 
<p>这样就成功的在本地启动服务器上的sshwifty啦…</p> 
<h2><a id="_174"></a>开始使用</h2> 
<p>如上图，进入sshwifty后需要输入验证密码，初始验证密码是：</p> 
<pre><code>WEB_ACCESS_PASSWORD
</code></pre> 
<h3><a id="_182"></a>修改验证密码</h3> 
<p>正在运行中的<code>sshwifty</code>：</p> 
<img src="https://images2.imgbox.com/ec/6a/MrsXMFJz_o.png" width="80%"> 
<p>停止运行（快捷键）：</p> 
<pre><code class="prism language-shell">Ctrl+C
</code></pre> 
<p>打开配置文件</p> 
<pre><code class="prism language-shell">$ vim /etc/sshwifty.conf.example.json
</code></pre> 
<p>找到SharedKey，编辑后面的内容即可修改验证密码：</p> 
<img src="https://images2.imgbox.com/cc/cb/yD5NZEzT_o.png" width="80%"> 
<h3><a id="SSH_204"></a>本地登陆SSH</h3> 
<p>输入验证密码：</p> 
<img src="https://images2.imgbox.com/7e/c7/B3tFjN3o_o.png" width="80%" align="center"> 
<p>进入主界面：</p> 
<img src="https://images2.imgbox.com/d3/f5/qT3q7tPq_o.png" width="80%" align="center"> 
<p>添加SSH：</p> 
<img src="https://images2.imgbox.com/40/a0/KVAlwz1f_o.png" width="80%" align="center"> 
<p>输入服务器信息（注册服务器时填写的，登陆Xshell时也会用到）：</p> 
<img src="https://images2.imgbox.com/6b/74/9LYVzbRX_o.png" width="80%" align="center"> 
<p>​ 注意：Host处的IP地址为<code>服务器公网IP</code>，如果<code>登陆失败</code>尝试把<code>:22</code>去掉</p> 
<p>选择<code>Yes，I do</code>：</p> 
<img src="https://images2.imgbox.com/8b/5a/JftpKVTg_o.png" width="80%" align="center"> 
<p>输入<code>服务器登陆密码</code>（不是前面的<code>验证密码</code>！！！）：</p> 
<img src="https://images2.imgbox.com/fc/71/ZSnm6nXr_o.png" width="80%" align="center"> 
<p>进入终端界面：</p> 
<img src="https://images2.imgbox.com/a7/41/442JHoNC_o.png" width="80%" align="center"> 
<p>我心心念念的在线SSH终于看到了苗头（因为现在才只是实现了本地），哈哈！</p> 
<h3><a id="ip_238"></a>使用ip:端口号登陆</h3> 
<p>最终失败了，这里想看就看看，不想看直接到<a href="https://xingjiahui.top/33075.html#%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE" rel="nofollow">这里</a>。</p> 
<p>由于根本找不到教程，我就大胆把<code>127.0.0.1</code>改成了我的ip地址：</p> 
<img src="https://images2.imgbox.com/5d/f2/9ttV2qQr_o.png" width="50%"> 
<p>却无法正常使用端口访问，向作者提了<a href="https://github.com/niruix/sshwifty/issues/21">issues#21</a></p> 
<p>给出的方法是修改配置文件ip为：<code>0.0.0.0</code></p> 
<ol><li> <p>修改配置文件：</p> <img src="https://images2.imgbox.com/79/01/uc4k7BK0_o.png" width="50%"> <p>运行结果：</p> <img src="https://images2.imgbox.com/f5/c9/806GVQMu_o.png" width="80%"> </li><li> <p>地址栏输入<code>ip:8182</code>（ip为服务器公网ip），访问<code>sshwifty</code>：</p> </li></ol> 
<img src="https://images2.imgbox.com/a5/99/q0hki13m_o.png" width="80%"> 
<p>​ 输入密码，报错：</p> 
<img src="https://images2.imgbox.com/7e/70/PrExRh4S_o.png" width="80%"> 
<p>​ README中作者给出了解释：</p> 
<img src="https://images2.imgbox.com/c1/67/R9a7qbTj_o.png" width="80%"> 
<p>​ 看不懂？我给你翻译：</p> 
<img src="https://images2.imgbox.com/23/46/uBrgWLeU_o.png" width="80%"> 
<ol start="3"><li> <p>服务器使用https连接</p> <p>最简单的办法莫过于给<code>ip地址</code>申请一个<code>ssl证书</code>，然后在<code>配置文件</code>中添加上。</p> <p>于时我去找哪里可以<code>免费</code>为<code>ip</code>颁发<code>SSL证书</code>，于时就看到了：</p> <img src="https://images2.imgbox.com/5b/38/9ehC4cvE_o.png" width="80%"> <p>​ 所以，我放弃了，使用<code>ip:端口</code>以失败告终！</p> </li><li> <p>收获</p> <p>虽然失败了，但还是有收获的。</p> <p>先看我配置：</p> <img src="https://images2.imgbox.com/cd/79/woGSXeXE_o.png" width="60%"> <p>稍微懂一定<code>SSL</code>的应该能看出来这是个证书，但与我ip不匹配，我知道肯定会提示不安全，但可以https访问，前面遇到的问题不是<code>非https不能进去？</code>我换成<code>https</code>试试能不能进去，能进去我就继续尝试<code>绑定域名访问</code>，否则<code>就此放弃</code>。</p> <p>不出我所料，成功了（能登陆进去）：</p> <img src="https://images2.imgbox.com/40/65/zfMaVxi2_o.png" width="80%"> <p>也给了我信心！</p> </li></ol> 
<h3><a id="_300"></a>绑定域名访问</h3> 
<p>下面就是要教你怎么<code>绑定域名</code>啦，看最下面的<code>更新日期</code>能看出来我中间搁了几天，原因是中途遇到的<code>坑</code>太多，中途放弃了，但昨天下午（05.12）突然想到用<code>宝塔面板</code>反代可能会简单些，回到家就先安排上了<code>宝塔面板</code>，开始尝试，进展很顺利，最后也是实现了<code>绑定域名访问</code>。</p> 
<h4><a id="_304"></a>安装宝塔面板</h4> 
<p>以<code>v5.9</code>为例，参考了<a href="https://www.bt.cn/bbs/thread-1186-1-1.html" rel="nofollow">官方教程</a>。</p> 
<ol><li> <p>开放安全组</p> <p>前面已经介绍了，点击<a rel="nofollow">这里</a>查看，需要注意的是我们这次要开放的端口是<code>8888</code>，仅此一个。</p> <p>贴上我的服务器安全组配置：</p> <img src="https://images2.imgbox.com/19/59/zSRANDvD_o.png" width="60%"> </li><li> <p>安装宝塔面板：</p> <p>Centos安装命令：</p> <pre><code class="prism language-shell">yum <span class="token function">install</span> -y <span class="token function">wget</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> -O install.sh http://download.bt.cn/install/install.sh <span class="token operator">&amp;&amp;</span> sh install.sh
</code></pre> <p>Ubuntu/Deepin安装命令：</p> <pre><code class="prism language-shell"><span class="token function">wget</span> -O install.sh http://download.bt.cn/install/install-ubuntu.sh <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">bash</span> install.sh
</code></pre> <p>Debian安装命令：</p> <pre><code class="prism language-shell"><span class="token function">wget</span> -O install.sh http://download.bt.cn/install/install-ubuntu.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> install.sh
</code></pre> <p>Fedora安装命令:</p> <pre><code class="prism language-shell"><span class="token function">wget</span> -O install.sh http://download.bt.cn/install/install.sh <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> install.sh
</code></pre> <p>注：</p> 
  <ol><li> <p>确认是否要安装宝塔，输入y 回车等待安装完即可：</p> <img src="https://images2.imgbox.com/aa/bd/SyyRcpUa_o.png" width="80%"> </li><li> <p>如果安装过程中出现<code>大量黄色字体</code>，说明出现错误（可能是下载错误），尝试重复执行安装命令解决。</p> </li><li> <p>等待一段时间，如果提示<code>pip install --upgrade pip</code>：</p> <p>命令行输入：</p> <pre><code class="prism language-shell">pip <span class="token function">install</span> --upgrade pip
</code></pre> <p>还需要再次输入安装命令（安装命令可重复执行，不用太在意）。</p> </li><li> <p>出现下图文字表示安装完成：</p> <img src="https://images2.imgbox.com/41/28/ieHCHXeL_o.png" width="60%"> <p>分别代表登陆链接、账号、密码，注意报错。</p> </li></ol> </li><li> <p>进入宝塔面板：</p> <p>打开浏览器，访问给出的登陆链接，输入账号和密码：</p> <img src="https://images2.imgbox.com/36/03/bZQVGjAu_o.png" width="80%"> <p>就可以进入宝塔面板啦：</p> <img src="https://images2.imgbox.com/b1/33/ephyI03A_o.png" width="80%"> </li><li> <p>安装反代插件：</p> <img src="https://images2.imgbox.com/b2/52/VaEo09Le_o.png" width="80%"> <p>注：需要等待一段时间，大约几分钟。</p> </li><li> <p>开放8182端口：</p> <img src="https://images2.imgbox.com/54/2f/DamIGaej_o.png" width="80%"> <p>​ 注：如果不放行肯定<code>无法访问</code>，谁给<code>宝塔</code>的权利能比<code>安全组</code>权力还大…</p> </li></ol> 
<h4><a id="_388"></a>站点配置</h4> 
<p>本篇教程使用<code>webssh.xingjiahui.top</code>作为域名访问<code>Sshwifty</code>。</p> 
<ol><li> <p>添加站点：</p> <img src="https://images2.imgbox.com/94/a5/nY2zL3Qq_o.png" width="90%"> <p>添加后：</p> <img src="https://images2.imgbox.com/7c/58/s5n1hTl5_o.png" width="90%"> </li><li> <p>设置SSL证书：</p> <img src="https://images2.imgbox.com/25/4c/QYdsUhww_o.png" width="90%"> <p>注：如果你已有证书，先下载下来，选择上图中的<code>其他证书</code>输入证书的<code>pem</code>和<code>key</code>，记得要在<code>证书夹</code>中部署。</p> </li><li> <p>解析域名：</p> <img src="https://images2.imgbox.com/98/ed/vYykx5jM_o.png" width="90%"> <p>注：主机记录如果不会填写，看这里：</p> <img src="https://images2.imgbox.com/8d/a7/qamoBA13_o.png" width="50%"> </li></ol> 
<h4><a id="Nginx_414"></a>Nginx反代配置</h4> 
<p>反代是什么？举个例子，你有个域名<code>baidu.com</code>，你想实现浏览器输入<code>baidu.com</code>进去的是<code>hao123.com</code>，反代的作用就是帮你实现这个（个人理解）。</p> 
<p>再想想反代的条件：</p> 
<ul><li>自己得有个域名。</li><li>反代的域名能够直接访问。</li></ul> 
<p>把上面的条件拿到我们的Sshwifty这里来：</p> 
<ul><li>自己的域名：<code>webssh.xingjiahui.top</code></li><li>反代的域名：<code>ip:端口号</code></li></ul> 
<p>按照下图操作：</p> 
<img src="https://images2.imgbox.com/85/42/fAsuFZky_o.png" width="70%"> 
<p>此时直接在浏览器输入上面的地址是没有效果的，因为Sshwifty没有启动。</p> 
<h4><a id="Sshwifty_434"></a>Sshwifty配置</h4> 
<p>进入配置文件：</p> 
<pre><code class="prism language-shell">$ vim /etc/sshwifty.conf.json
</code></pre> 
<p>按照下图修改（蓝框中信息一定要与我的一致）：</p> 
<img src="https://images2.imgbox.com/24/de/TRP4RBMt_o.png" width="50%"> 
<h4><a id="Sshwifty_446"></a>启动Sshwifty</h4> 
<p>输入命令：</p> 
<pre><code class="prism language-shell">sshwifty
</code></pre> 
<p>运行结果：</p> 
<img src="https://images2.imgbox.com/61/cc/dJ08WvqK_o.png" width="80%"> 
<p>使用前面的域名访问：</p> 
<img src="https://images2.imgbox.com/a5/fe/StUw6Oej_o.png" width="80%"> 
<p>还有一个问题，如果此时在命令行按下<code>CTRL+C</code>，<code>Sshwifty服务</code>就会停止，应该怎么避免这样？</p> 
<p>我首先想到的就是<code>后台运行</code>，之前接触过<code>nohup</code>：</p> 
<p>怎么判断是否安装？</p> 
<p>输入which nohub，如果出现/usr/bin/nohup 说明已经安装了，执行以下命令：</p> 
<pre><code class="prism language-shell"><span class="token function">nohup</span> sshwifty <span class="token operator">&amp;</span>
</code></pre> 
<p>如果<code>没有安装</code>，可以根据<a href="https://blog.csdn.net/weixin_43926604/article/details/96001694">这篇文章</a>进行操作。</p> 
<p>没错，到这里就实现了<code>使用域名访问你的Sshwifty</code>。</p> 
<p>记得要看看下面的问题，你很有可能会遇到。</p> 
<h3><a id="_480"></a>问题</h3> 
<h4><a id="Error_1006_482"></a>Error (1006)</h4> 
<p>问题重现：创建SSH时，浏览器弹窗：</p> 
<img src="https://images2.imgbox.com/92/60/QbhsFOU4_o.png" width="50%"> 
<p>在GitHub项目地址的<a href="https://github.com/niruix/sshwifty/issues/9">issues9</a>中给出了解决方法：</p> 
<pre><code class="prism language-shell">map <span class="token variable">$http_upgrade</span> <span class="token variable">$connection_upgrade</span> <span class="token punctuation">{<!-- --></span> default upgrade<span class="token punctuation">;</span> <span class="token string">''</span> close<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-shell">proxy_set_header Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span> 
proxy_set_header Connection <span class="token variable">$connection_upgrade</span><span class="token punctuation">;</span>
</code></pre> 
<p>第一步：</p> 
<img src="https://images2.imgbox.com/a7/ee/WlTrrM6N_o.png" width="80%"> 
<p>第二步：</p> 
<img src="https://images2.imgbox.com/86/ed/ENyH1Ew8_o.png" width="80%"> 
<p>​ 注：如果实在不知道加在哪里，可以<code>先根据行号</code>找到<code>大概位置</code>然后<code>根据前后代码</code>找到<code>具体位置</code>粘进去。</p> 
<h4><a id="Time_difference_509"></a>Time difference</h4> 
<p>问题重现：浏览器访问<code>Sshwifty</code>并<code>创建ssh</code>后，关闭浏览器重新访问，报错：</p> 
<img src="https://images2.imgbox.com/ad/74/qM49Bmfn_o.png" width="80%"> 
<p>但<code>每次</code>退出后<code>重新访问</code>都会出现这个问题，解决方法：</p> 
<p>删除配置文件中：</p> 
<pre><code class="prism language-shell">location / <span class="token punctuation">{<!-- --></span>
        proxy_pass http://121.36.2.183:8182<span class="token punctuation">;</span>
        proxy_set_header Host 121.36.2.183:8182<span class="token punctuation">;</span>
        proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
        proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
        proxy_set_header REMOTE-HOST <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
                
        <span class="token comment">#持久化连接相关配置</span>
        <span class="token comment">#proxy_connect_timeout 30s;</span>
        <span class="token comment">#proxy_read_timeout 86400s;</span>
        <span class="token comment">#proxy_send_timeout 30s;</span>
        <span class="token comment">#proxy_http_version 1.1;</span>
        <span class="token comment">#proxy_set_header Upgrade $http_upgrade;</span>
        <span class="token comment">#proxy_set_header Connection "upgrade";</span>
        
        add_header X-Cache <span class="token variable">$upstream_cache_status</span><span class="token punctuation">;</span>
        
        expires 12h<span class="token punctuation">;</span>
        proxy_set_header Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span> 
        proxy_set_header Connection <span class="token variable">$connection_upgrade</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在原位置添加（记得先修改下面的<code>你的ip:端口号</code>）：</p> 
<pre><code class="prism language-shell">location / <span class="token punctuation">{<!-- --></span>
     proxy_pass http://你的ip:端口号<span class="token punctuation">;</span>
     proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
     proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
     proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
     proxy_set_header X-Forwarded-Proto https<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

location /sshwifty/socket <span class="token punctuation">{<!-- --></span>
     proxy_pass http://你的ip:端口号<span class="token punctuation">;</span>
     proxy_http_version 1.1<span class="token punctuation">;</span>
     proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>
     proxy_set_header X-Real-IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
     proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
     proxy_set_header X-Forwarded-Proto https<span class="token punctuation">;</span>
     proxy_set_header Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
     proxy_set_header Connection <span class="token variable">$connection_upgrade</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_566"></a>更新完毕</h2> 
<ol><li>本地实现SSH（已完成，2020.05.06）</li><li><code>ip:端口号</code>实现登陆（失败，2020.05.09）</li><li>绑定域名（已完成，2020.05.13）</li><li>*魔改ui（放弃）</li></ol> 
<p>注：标星表示随时可能会放弃</p> 
<hr> 
<p>不足之处，欢迎留言，评论会及时回复，错误会及时更正！</p> 
<p>创作不易，感谢支持！</p> 
<p>最后的最后，欢迎访问我的个人博客<a href="https://xingjiahui.top" rel="nofollow">XJHui’s Blog</a>。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/81d76d2a3658446dbfbed69decbddfa9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ASP.NET的数据控件repeater应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6936ee7fa44f57aa90f2d27a4f2f2084/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">初识Wayland（X、Mir）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
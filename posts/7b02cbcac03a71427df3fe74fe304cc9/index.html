<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HDU 6284 Longest Increasing Subsequence(LIS&#43;思维) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="HDU 6284 Longest Increasing Subsequence(LIS&#43;思维)" />
<meta property="og:description" content="Longest Increasing Subsequence Time Limit: 2000/1000 MS (Java/Others) Memory Limit: 32768/32768 K (Java/Others)
Total Submission(s): 232 Accepted Submission(s): 57
Problem Description Bobo has a sequence a1,a2,…,an. Let f(x) be the length of longest *strictly* increasing subsequence after replacing all the occurrence of 0 with x. He would like to find ∑ni=1i⋅f(i). Note that the length of longest strictly increasing subsequence of sequence s1,s2,…,sm is the largest k such that there exists 1≤i1&lt;i2&lt;⋯&lt;ik≤m satisfying si1&lt;si2&lt;⋯&lt;sik." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7b02cbcac03a71427df3fe74fe304cc9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-14T15:16:21+08:00" />
<meta property="article:modified_time" content="2018-07-14T15:16:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HDU 6284 Longest Increasing Subsequence(LIS&#43;思维)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="color:rgb(26,92,200);text-align:center;font-family:'Times New Roman';">Longest Increasing Subsequence</h2> 
<span style="color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;"><strong><span style="font-family:Arial;font-size:12px;color:#008000;">Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 232    Accepted Submission(s): 57<br></span></strong></span> 
<br style="color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;"> 
<br style="color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;"> 
<div class="panel_title" align="left" style='background-image:url("panel-title.png");background-position:left bottom;background-repeat:no-repeat;color:rgb(124,169,237);font-size:18px;font-family:Arial;font-weight:bold;'>
  Problem Description 
</div> 
<div class="panel_content" style="background-image:url(&quot;panel-content.png&quot;);background-repeat:repeat-y;font-size:14px;font-family:'Times New Roman';text-align:left;color:rgb(0,0,0);">
  Bobo has a sequence  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-1-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-1" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-2" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-3" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-4" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-5" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">1</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-6" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-7" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-8" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-9" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-10" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mo" id="MathJax-Span-11" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">…</span><span class="mo" id="MathJax-Span-12" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-13" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-14" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-15" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">n</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>. 
 <br>Let  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-2-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-16" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-17" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-18" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">f<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-19" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-20" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span><span class="mo" id="MathJax-Span-21" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span> be the length of longest *strictly* increasing subsequence after replacing all the occurrence of  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-3-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-22" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-23" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-24" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">0</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span> with  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-4-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-25" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-26" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-27" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">x</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>. 
 <br>He would like to find  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-5-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-28" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-29" style="border:0px;vertical-align:0px;line-height:normal;"><span class="munderover" id="MathJax-Span-30" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mo" id="MathJax-Span-31" style="border:0px;vertical-align:.003em;line-height:normal;font-family:'MathJax_Size1';">∑</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-32" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">n</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-33" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-34" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-35" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span><span class="mo" id="MathJax-Span-36" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">=</span><span class="mn" id="MathJax-Span-37" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">1</span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mi" id="MathJax-Span-38" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span class="mo" id="MathJax-Span-39" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">⋅</span><span class="mi" id="MathJax-Span-40" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">f<span style="border:0px;vertical-align:0px;line-height:normal;"></span></span><span class="mo" id="MathJax-Span-41" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">(</span><span class="mi" id="MathJax-Span-42" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span class="mo" id="MathJax-Span-43" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">)</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>. 
 <br> 
 <br>Note that the length of longest strictly increasing subsequence of sequence  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-6-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-44" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-45" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-46" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-47" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-48" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">1</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-49" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-50" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-51" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-52" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-53" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mo" id="MathJax-Span-54" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">…</span><span class="mo" id="MathJax-Span-55" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-56" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-57" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-58" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">m</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span> is the largest  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-7-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-59" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-60" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-61" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">k</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span> 
 <br>such that there exists  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-8-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-62" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-63" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-64" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">1</span><span class="mo" id="MathJax-Span-65" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">≤</span><span class="msubsup" id="MathJax-Span-66" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-67" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-68" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">1</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-69" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&lt;</span><span class="msubsup" id="MathJax-Span-70" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-71" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-72" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-73" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&lt;</span><span class="mo" id="MathJax-Span-74" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">⋯</span><span class="mo" id="MathJax-Span-75" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&lt;</span><span class="msubsup" id="MathJax-Span-76" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-77" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-78" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-79" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">≤</span><span class="mi" id="MathJax-Span-80" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">m</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.211em;line-height:normal;width:0px;"></span></span></span> satisfying  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-9-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-81" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-82" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-83" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-84" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-85" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-86" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-87" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-88" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-89" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">1</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-90" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&lt;</span><span class="msubsup" id="MathJax-Span-91" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-92" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-93" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-94" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-95" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-96" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-97" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-98" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&lt;</span><span class="mo" id="MathJax-Span-99" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">⋯</span><span class="mo" id="MathJax-Span-100" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">&lt;</span><span class="msubsup" id="MathJax-Span-101" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-102" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">s</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="texatom" id="MathJax-Span-103" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-104" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-105" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-106" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-107" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">k</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.354em;line-height:normal;width:0px;"></span></span></span>. 
 <br> 
</div> 
<div class="panel_bottom" style="background-image:url(&quot;panel-bottom.png&quot;);background-position:left top;background-repeat:no-repeat;color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;">
    
</div> 
<br style="color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;"> 
<div class="panel_title" align="left" style='background-image:url("panel-title.png");background-position:left bottom;background-repeat:no-repeat;color:rgb(124,169,237);font-size:18px;font-family:Arial;font-weight:bold;'>
  Input 
</div> 
<div class="panel_content" style="background-image:url(&quot;panel-content.png&quot;);background-repeat:repeat-y;font-size:14px;font-family:'Times New Roman';text-align:left;color:rgb(0,0,0);">
  The input consists of several test cases and is terminated by end-of-file. 
 <br> 
 <br>The first line of each test case contains an integer  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-10-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-108" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-109" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-110" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span>. 
 <br>The second line contains  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-11-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-111" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-112" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-113" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span> integers  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-12-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-114" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-115" style="border:0px;vertical-align:0px;line-height:normal;"><span class="msubsup" id="MathJax-Span-116" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-117" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-118" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">1</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-119" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-120" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-121" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-122" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">2</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-123" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mo" id="MathJax-Span-124" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">…</span><span class="mo" id="MathJax-Span-125" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="msubsup" id="MathJax-Span-126" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-127" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-128" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">n</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>. 
 <br> 
</div> 
<div class="panel_bottom" style="background-image:url(&quot;panel-bottom.png&quot;);background-position:left top;background-repeat:no-repeat;color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;">
    
</div> 
<br style="color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;"> 
<div class="panel_title" align="left" style='background-image:url("panel-title.png");background-position:left bottom;background-repeat:no-repeat;color:rgb(124,169,237);font-size:18px;font-family:Arial;font-weight:bold;'>
  Output 
</div> 
<div class="panel_content" style="background-image:url(&quot;panel-content.png&quot;);background-repeat:repeat-y;font-size:14px;font-family:'Times New Roman';text-align:left;color:rgb(0,0,0);">
  For each test case, print an integer which denotes the result. 
 <br> 
 <br>## Constraint 
 <br> 
 <br>*  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-13-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-129" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-130" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-131" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">1</span><span class="mo" id="MathJax-Span-132" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">≤</span><span class="mi" id="MathJax-Span-133" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span><span class="mo" id="MathJax-Span-134" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">≤</span><span class="msubsup" id="MathJax-Span-135" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-136" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">10</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-137" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Main';">5</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.211em;line-height:normal;width:0px;"></span></span></span> 
 <br>*  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-14-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-138" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-139" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-140" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">0</span><span class="mo" id="MathJax-Span-141" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">≤</span><span class="msubsup" id="MathJax-Span-142" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-143" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">a</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-144" style="border:0px;vertical-align:0px;line-height:normal;font-size:12px;font-family:'MathJax_Math-italic';">i</span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span></span><span class="mo" id="MathJax-Span-145" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">≤</span><span class="mi" id="MathJax-Span-146" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.211em;line-height:normal;width:0px;"></span></span></span> 
 <br>* The sum of  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-15-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-147" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-148" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mi" id="MathJax-Span-149" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Math-italic';">n</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.068em;line-height:normal;width:0px;"></span></span></span> does not exceed  
 <span class="MathJax_Preview" style="color:rgb(136,136,136);"></span> 
 <span class="MathJax" id="MathJax-Element-16-Frame" style="line-height:normal;word-spacing:normal;min-width:0px;min-height:0px;border:0px;"><span class="math" id="MathJax-Span-150" style="border:0px;vertical-align:0px;line-height:normal;"><span style="border-top:0px;border-right:0px;border-bottom:0px;vertical-align:0px;line-height:normal;font-size:14.42px;border-left-width:0px;"><span style="border:0px;vertical-align:0px;line-height:normal;"><span class="mrow" id="MathJax-Span-151" style="border:0px;vertical-align:0px;line-height:normal;"><span class="mn" id="MathJax-Span-152" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">250</span><span class="mo" id="MathJax-Span-153" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">,</span><span class="mn" id="MathJax-Span-154" style="border:0px;vertical-align:0px;line-height:normal;font-family:'MathJax_Main';">000</span></span><span style="border:0px;vertical-align:0px;line-height:normal;width:0px;"></span></span></span><span style="border-width:0px 0px 0px .004em;border-left-style:solid;vertical-align:-.282em;line-height:normal;width:0px;"></span></span></span>. 
 <br> 
</div> 
<div class="panel_bottom" style="background-image:url(&quot;panel-bottom.png&quot;);background-position:left top;background-repeat:no-repeat;color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;">
    
</div> 
<br style="color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;"> 
<div class="panel_title" align="left" style='background-image:url("panel-title.png");background-position:left bottom;background-repeat:no-repeat;color:rgb(124,169,237);font-size:18px;font-family:Arial;font-weight:bold;'>
  Sample Input 
</div> 
<div class="panel_content" style="background-image:url(&quot;panel-content.png&quot;);background-repeat:repeat-y;font-size:14px;font-family:'Times New Roman';text-align:left;color:rgb(0,0,0);"> 
 <pre style="font-size:14px;"></pre> 
 <div style="font-family:'Courier New', Courier, monospace;">
   21 131 0 364 0 6 1 0 3 
 </div> 
</div> 
<div class="panel_bottom" style="background-image:url(&quot;panel-bottom.png&quot;);background-position:left top;background-repeat:no-repeat;color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;">
    
</div> 
<br style="color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;"> 
<div class="panel_title" align="left" style='background-image:url("panel-title.png");background-position:left bottom;background-repeat:no-repeat;color:rgb(124,169,237);font-size:18px;font-family:Arial;font-weight:bold;'>
  Sample Output 
</div> 
<div class="panel_content" style="background-image:url(&quot;panel-content.png&quot;);background-repeat:repeat-y;font-size:14px;font-family:'Times New Roman';text-align:left;color:rgb(0,0,0);"> 
 <pre style="font-size:14px;"></pre> 
 <div style="font-family:'Courier New', Courier, monospace;">
   31449 
 </div> 
</div> 
<div class="panel_bottom" style="background-image:url(&quot;panel-bottom.png&quot;);background-position:left top;background-repeat:no-repeat;color:rgb(0,0,0);font-family:'Times New Roman';font-size:14px;">
    
</div> 
<p></p> 
<div> 
 <br> 
</div> 
<div>
  题意: 
</div> 
<p>给你一个长度为n的序列，</p> 
<p>x从1变到n，每一次变化后，都用x替换序列里面的0，求一遍最长严格上升子序列的长度len,将答案加上len*x</p> 
<p>最后输出答案</p> 
<p><br></p> 
<p>解析:</p> 
<p>首先我们可以知道每一次变化，len是有一个最小值的，这个最小值就是把序列中0全部去掉所求出来的最长严格上升子序列长度lenmin。并且每一次变化最多只能让len在最小值的基础上+1，因为我们变化的只有一个数，所以在最长严格上升子序列中这个数最多只会有一次，所以每一次变化len的长度要么是[lenmin,lenmin+1]<br></p> 
<p>然后上官方题解</p> 
<p>设 fi, gi 分别表⽰以点 i 开始、结束的 LIS ⻓度，L 是原来的 LIS ⻓度。对于每个 i，找出它下⼀个 0 后⾯的 aj 满⾜ fi + gj = L，那么当 x 在[ai + 1, aj − 1] 的区间内时，答案是 L + 1.<br></p> 
<p>根据官方题解，剩下的就是在得到f[],g[]下，怎么求满足条件的i,j使得fi+gj=L<br></p> 
<p>当一个i,在他的下一个0后面有很多满足条件jk(k=1,2,..)使得a[i]&lt;a[j]且fi+gj=L，每一对得到的区间是[ai+1,ajk-1](k=1,2,..)，则有[ai+1,aj1-1],[ai+1,aj2-1],[ai+1,aj3-1],....，x的值在这些区间都是会对答案产生贡献的，观察发现起始这些区间有很多是包含的关系。</p> 
<p>例如aj1&lt;aj2,aj2&gt;aj3&gt;aj4&gt;....,即aj2是最大值，则起始这些区间都被包含于[ai+1,aj2-1]。所以只有找每一个i，在他的下一个0后面有很多满足条件的j中，a[j]最大的那个j就可以了。将x属于[ai + 1, aj − 1]的情况的len+1</p> 
<p>这样我们就可以从后往前扫，根据0来分段，复杂度只要O(n)即可</p> 
<p><br></p> 
<p>这里被自己的代码坑到了，数组定义的是longlong ,带初始化的时候用int来memset,因为这个原因卡了一天....</p> 
<pre><code class="language-cpp">#include&lt;cstdio&gt;

#include&lt;cstring&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;

using namespace std;
typedef long long int ll;

#define MAXN 100010



ll n,len;
ll dp[MAXN];
ll a[MAXN],g[MAXN];
ll f[MAXN],b[MAXN];
ll fz[MAXN];
vector&lt;int&gt; pz;
int inc[MAXN];

ll binary_search2(ll key,ll g[],ll left,ll right)
{

    ll mid;

    while(left&lt;right)

    {

        mid=(left+right)&gt;&gt;1;

        if(key&gt;g[mid]) left=mid+1;  //不加等号，严格上升

        else right=mid;

    }

    return left;

}



ll binary_search1(ll key,ll g[],ll left,ll right)
{

    ll mid;

    while(left&lt;right)
    {

        mid=(left+right)&gt;&gt;1;

        if(key&gt;=g[mid]) right=mid;  //加等号，严格递减

        else left=mid+1;

    }

    return right;

}



int main()
{
    int t;
    while(scanf("%lld",&amp;n)!=EOF)
    {
        ll j;
        int flag;
        flag=0;
        ll ans=0;
        memset(inc,0,sizeof(ll)*(n+3));    //!
        memset(fz,-1,sizeof(ll)*(n+3));    //!!
        for(int i=0;i&lt;n;i++)
        {
            scanf("%lld",&amp;a[i]);
            if(a[i]!=0) flag=1;
        }
        if(!flag)
        {
            printf("%lld\n",(1+n)*n/2);
            continue;
        }
        pz.clear();
        //非递减
        len=0;
        g[0]=-100;
        for(int i=0;i&lt;n;i++)
        {
            if(a[i]==0)
            {
                f[i]=0;
                pz.push_back(i);
                continue;
            }
            if(a[i]&gt;g[len])
                j=++len;
            else
                j=binary_search2(a[i],g,1,len+1);
                //j=lower_bound(g+1,g+len+1,a[i])-g;
            g[j]=a[i];
            f[i]=j;

        }

        g[0]=MAXN;
        len=0;
        for(int i=n-1;i&gt;=0;i--)
        {
            if(a[i]==0)
            {
                b[i]=0;
                continue;
            }
            if(a[i]&lt;g[len])
                j=++len;
            else
                j=binary_search1(a[i],g,1,len+1);

            g[j]=a[i];
            b[i]=j;
        }
        ans+=(1+n)*n/2*len;
        for(int i=pz.size()-1;i&gt;=0;i--)
        {
            int en;
            if(i==pz.size()-1) en=n;
            else en=pz[i+1];
            int beg;
            if(i==0) beg=0;
            else beg=pz[i-1];

            for(j=pz[i];j&lt;en;j++)
            {
                if(a[j]==0)
                {
                    fz[0]=n+1;
                }
                else
                {
                    if(fz[b[j]]&lt;a[j]) fz[b[j]]=a[j];
                }
            }

            for(j=beg;j&lt;=pz[i];j++)
            {
                if(fz[len-f[j]]!=-1&amp;&amp;fz[len-f[j]]&gt;a[j]+1)
                {
                   inc[a[j]+1]+=1,inc[fz[len-f[j]]]-=1;
                }
            }
        }
        for(int i=1;i&lt;=n;i++)
        {
            inc[i]+=inc[i-1];
            if(inc[i]&gt;0) ans+=(ll)i;
        }

        printf("%lld\n",ans);
    }
    return 0;
}</code></pre> 
<p></p> 
<p>这个参考别人的代码，对求LIS进行代码量减少的一种</p> 
<pre><code class="language-cpp">#include&lt;cstdio&gt;

#include&lt;cstring&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;

using namespace std;
typedef long long int ll;

#define MAXN 100010



ll n,len;
ll a[MAXN],g[MAXN];
ll f[MAXN],b[MAXN];
vector&lt;int&gt; pz;
ll fz[MAXN];
int inc[MAXN];


int main()
{
    int t;
    while(scanf("%lld",&amp;n)!=EOF)
    {
        ll j;
        int flag;
        flag=0;
        ll ans=0;
        memset(inc,0,sizeof(ll)*(n+3));
        memset(fz,-1,sizeof(ll)*(n+3));
        /*memset(g,0,sizeof(int)*(n+3));
        memset(a,-1,sizeof(int)*(n+3));
        memset(b,0,sizeof(int)*(n+3));
        memset(f,-1,sizeof(int)*(n+3));*/
        for(int i=0;i&lt;n;i++)
        {
            scanf("%lld",&amp;a[i]);
            if(a[i]!=0) flag=1;
        }
        if(!flag)
        {
            printf("%lld\n",(1+n)*n/2);
            continue;
        }
        pz.clear();
        //非递减
        len=0;
        g[0]=-100;
        for(int i=0;i&lt;n;i++)
        {
            if(a[i]==0)
            {
                f[i]=0;
                pz.push_back(i);
                continue;
            }
            if(a[i]&gt;g[len])
                j=++len;
            else
                //j=binary_search2(a[i],g,1,len+1);
                j=lower_bound(g+1,g+len+1,a[i])-g;

            g[j]=a[i];
            f[i]=j;

        }

        g[0]=-MAXN;
        len=0;
        for(int i=n-1;i&gt;=0;i--)
        {
            if(a[i]==0)
            {
                b[i]=0;
                continue;
            }
            if(-a[i]&gt;g[len])
                j=++len;
            else
                //j=binary_search1(a[i],g,1,len+1);
                j=lower_bound(g+1,g+len+1,-a[i])-g;
            g[j]=-a[i];
            b[i]=j;
        }
        ans+=(1+n)*n/2*len;
        for(int i=pz.size()-1;i&gt;=0;i--)
        {
            int en;
            if(i==pz.size()-1) en=n;
            else en=pz[i+1];
            int beg;
            if(i==0) beg=0;
            else beg=pz[i-1];

            for(j=pz[i];j&lt;en;j++)
            {
                if(a[j]==0)
                {
                    fz[0]=n+1;
                }
                else
                {
                    if(fz[b[j]]&lt;a[j]) fz[b[j]]=a[j];
                }
            }

            for(j=beg;j&lt;=pz[i];j++)
            {
                if(fz[len-f[j]]!=-1&amp;&amp;fz[len-f[j]]&gt;a[j]+1)
                {
                   inc[a[j]+1]+=1,inc[fz[len-f[j]]]-=1;
                }
            }
        }
        
        for(int i=1;i&lt;=n;i++)
        {
            inc[i]+=inc[i-1];
            if(inc[i]&gt;0) ans+=(ll)i;
        }

        printf("%lld\n",ans);
    }
    return 0;
}
</code></pre> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/37a45df7976a722083846802270431c7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【OpenCv】 VS C&#43;&#43; 图像处理（一）: 环境配置及简单使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/252a12d00a6b796b0ce555e2bf2c744f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HDU 6277 Higher h-index (脑洞题)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
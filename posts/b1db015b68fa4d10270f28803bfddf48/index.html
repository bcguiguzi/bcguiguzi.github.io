<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>简述相机镜头变焦与对焦、成像的原理 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="简述相机镜头变焦与对焦、成像的原理" />
<meta property="og:description" content="相机镜头变焦与对焦概念 定义
焦点：相机的镜头是一组透镜，当平行光线穿过透镜时，会汇聚到一点上，这个点叫做焦点。
焦距：从光心（凸透镜的中心）到焦点的距离，用&#34;f&#34;表示。
定焦镜头：焦距固定的镜头，即定焦镜头。
变焦镜头：焦距可以调节变化的镜头，即变焦镜头。
详 解 变 焦 原 理
通常指通过移动镜头内的透镜镜片位置来拉长或缩短焦距，也叫ZOOM。改变镜头的焦距，从而造成视角或图像大小的变化，获取拉近或拉远的效果。焦距越长，视角越窄，画面中能容纳的景象就少，画面看起来越近。焦距越短，视角越大，画面中能容纳的景物就多，画面看起来较远。
变焦目前可以分为光学变焦和数字变焦两种类型
①光学变焦：通过移动镜头内部镜片的相对位置来改变焦点的位置，改变镜头焦距的长短，并改变镜头的视角大小，从而实现影像的放大与缩小。如果被拍摄的物体位置保持不变，镜头的焦距与物体的放大倍率会呈现正比例的关系，如果要用一个词来形容光学变焦的话，那就是“望远镜”。(成像面水平方向移动)
②数字变焦：通过可拍照手机处理器，把图片内的每个像素面积增大，从而达到放大的目的，就像我们在ACDSEE等图像处理软件中，强行拉大图像的像素一样，只不过这个过程在手机中进行，把原来SENSOR上的一部分像素使用插值手段进行放大。与光学变焦不同的是，数码变焦是在SENSOR垂直方向上的变化，而给人以变焦效果的。由于整个过程焦距没有任何变化，所以图像质量是会随着放大比例的增加，逐渐下降。(成像面垂直方向缩放)
数字变焦也可以分为插值算法变焦和伪数字变焦两种
插值算法变焦：对图像进行插值运算，将图像的尺寸扩大到所需的规格，这种算法就其效果而言，并不理想，尤其是当使用在手机上的时候，手机上的摄像头本身得到的数据就有较大的噪声，再插值的话，得到的图像几乎没法使用。
伪数字变焦：当摄像头不处在最大分辨率格式的情况下，比如130 万像素的 sensor 使用 640*480 的规格拍照时，仍旧设置 sersor 工作在 1280*960 的分辨率下，而后通过采集中央部分的图像来获取 640*480 的照片，使得在手机上看来所拍物体尺寸被放大了一倍。这种办法几乎不需要额外的算法支持，对图像质量也没有影
响，缺点是只有小尺寸情况下可以采用。
结论：光学变焦不会牺牲清晰度、数字变焦显著牺牲清晰度
详 解 对 焦 原 理
其实并不是改变镜头的焦距，而是改变像距，调整成像面和镜头距离，使成像面到光心的距离等于像距，使物体可以清晰的成像到胶片（感光元件）上。调整相机使被摄体成清晰的像的过程，就是调焦（对焦）过程。成像位置位于透镜1倍焦距之外、2倍焦距之内，并且成像位置即是感光元件CCD/CMOS所在的位置，这时成像非常清晰。如果成像位置偏离了感光元件CCD/CMOS所在的平面，这时成像变得非常虚，比较模糊，即出现摄影时的对焦不准现象。
对焦实际上是调整整个镜头的位置(而不是镜头内的镜片)的位置，来控制像距，从而使成像最清晰。
对焦分类
手动对焦：通过手工转动对焦环来调节相机镜头从而使拍摄出来的照片清晰的一种对焦方式。
自动对焦：由照相机根据被摄体距离的远近，自动地调节镜头的对焦距离。
多点对焦：也叫区域对焦，当对焦中心不设置在图片中心的时候，可以使用多点对焦。常见的多点对焦为5点，7点和9点对焦。
以下为大家详细介绍自动对焦的原理
自动对焦（Auto Focus，简称AF）是一个复杂的光电一体化过程，主要可以实现三个功能：一是自动判断所拍摄的主体，二是测量被摄主体与相机感光元器件之间的距离，三是驱动马达将镜头的对焦装置推到与之相应的距离刻度。
自动对焦按照是否主动测量合焦距离分为以下两种：
（1）主动式：激光对焦、TOF对焦等
优势：低反差、弱光线、细线条、运动物体
劣势：当被摄物体能吸收光波时、光波被玻璃反射等场景不能对焦到正确物体上。
（2）被动式：相位对焦、反差对焦等
优势：自身无发射系统，耗能少，小型化、逆光场景等
劣势：细线条、弱光下、偏光物体、运动物体
反差对焦（CDAF）
概念：反差对焦（Contrast Detection Auto Focus，简称CDAF），又称对比度对焦，是目前普及率最高、使用最广泛、成本相对较低的自动对焦技术。
原理和过程：反差对焦是一个反复迭代逐渐收敛的过程，即一个简单的求最大值的过程，反差对焦类似手动调焦的过程：模糊-清晰-模糊，然后逐渐平衡到一个最清晰的位置(计算反差度—&gt;移动镜头、比较反差度—&gt;直到反差度最大)。
对焦步骤
（1）未合焦状态：此时图像处于虚焦状态（2）对焦开始状态：镜头开始移动，画面逐渐清晰，对比度开始上升
（3）合焦状态：对比度最高，画面最清晰，继续移动镜头
（4）继续移动镜头发现对比度开始下降，错过焦点
（5）镜头回退至对比度最高的位置，完成对焦
优点：
（1）物理成本低
（2）无单独的子系统，不占用独立的空间（3）对焦精度高
缺点：对焦耗时会比较长，在纯色或者反差不明显的场景，对焦时间过长或精度低" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/b1db015b68fa4d10270f28803bfddf48/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-20T13:44:17+08:00" />
<meta property="article:modified_time" content="2023-12-20T13:44:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">简述相机镜头变焦与对焦、成像的原理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>相机镜头变焦与对焦概念</h3> 
<p><strong>定义</strong></p> 
<p><strong>焦点：</strong>相机的镜头是一组透镜，当平行光线穿过透镜时，会汇聚到一点上，这个点叫做焦点。</p> 
<p><strong>焦距</strong><strong>：</strong>从光心（凸透镜的中心）到焦点的距离，用"f"表示。</p> 
<p><strong>定焦镜头：</strong>焦距固定的镜头，即定焦镜头。</p> 
<p><strong>变焦镜头：</strong>焦距可以调节变化的镜头，即变焦镜头。</p> 
<p><img alt="" height="227" src="https://images2.imgbox.com/f6/e3/f0FhM9Tw_o.png" width="449"></p> 
<p><img alt="" height="201" src="https://images2.imgbox.com/ec/55/VIFmBWB0_o.png" width="380"></p> 
<p><img alt="" height="261" src="https://images2.imgbox.com/39/45/xJCusL47_o.gif" width="577"> </p> 
<p style="text-align:center;"></p> 
<p><strong>详 解 变 焦 原 理</strong></p> 
<p>通常指通过移动镜头内的透镜镜片位置来拉长或缩短焦距，也叫ZOOM。改变镜头的焦距，从而造成视角或图像大小的变化，获取拉近或拉远的效果。<span style="color:#1c7331;"><strong>焦距越长，视角越窄，画面中能容纳的景象就少，画面看起来越近。焦距越短，视角越大，画面中能容纳的景物就多，画面看起来较远。</strong></span></p> 
<p></p> 
<p><strong>变焦目前可以分为光学变焦和数字变焦两种类型</strong></p> 
<p><strong>①光学变焦：</strong>通过移动镜头内部镜片的相对位置来改变焦点的位置，改变镜头焦距的长短，并改变镜头的视角大小，从而实现影像的放大与缩小。如果被拍摄的物体位置保持不变，镜头的焦距与物体的放大倍率会呈现正比例的关系，如果要用一个词来形容光学变焦的话，那就是“望远镜”。(成像面水平方向移动)</p> 
<p><img alt="" height="233" src="https://images2.imgbox.com/b1/bd/EENuseBH_o.png" width="491"></p> 
<p><strong>②数字变焦：</strong>通过可拍照手机处理器，把图片内的每个像素面积增大，从而达到放大的目的，就像我们在ACDSEE等图像处理软件中，强行拉大图像的像素一样，只不过这个过程在手机中进行，把原来SENSOR上的一部分像素使用插值手段进行放大。与光学变焦不同的是，数码变焦是在SENSOR垂直方向上的变化，而给人以变焦效果的。由于整个过程焦距没有任何变化，所以图像质量是会随着放大比例的增加，逐渐下降。(成像面垂直方向缩放)</p> 
<p></p> 
<p><strong>数字变焦也可以分为插值算法变焦和伪数字变焦两种</strong></p> 
<p><strong>插值算法变焦：</strong>对图像进行插值运算，将图像的尺寸扩大到所需的规格，这种算法就其效果而言，并不理想，尤其是当使用在手机上的时候，手机上的摄像头本身得到的数据就有较大的噪声，再插值的话，得到的图像几乎没法使用。</p> 
<p><strong>伪数字变焦：</strong>当摄像头不处在最大分辨率格式的情况下，比如130 万像素的 sensor 使用 640*480 的规格拍照时，仍旧设置 sersor 工作在 1280*960 的分辨率下，而后通过采集中央部分的图像来获取 640*480 的照片，使得在手机上看来所拍物体尺寸被放大了一倍。这种办法几乎不需要额外的算法支持，对图像质量也没有影</p> 
<p>响，缺点是只有小尺寸情况下可以采用。</p> 
<p><span style="color:#1c7331;"><strong>结论：</strong><strong>光学变焦不会牺牲清晰度、</strong><strong>数字变焦显著牺牲清晰度</strong></span></p> 
<p></p> 
<p><strong>详 解 对 焦 原 理</strong></p> 
<p>其实并不是改变镜头的焦距，而是改变像距，调整成像面和镜头距离，使成像面到光心的距离等于像距，使物体可以清晰的成像到胶片（感光元件）上。调整相机使被摄体成清晰的像的过程，就是调焦（对焦）过程。成像位置位于透镜1倍焦距之外、2倍焦距之内，并且成像位置即是感光元件CCD/CMOS所在的位置，这时成像非常清晰。如果成像位置偏离了感光元件CCD/CMOS所在的平面，这时成像变得非常虚，比较模糊，即出现摄影时的对焦不准现象。</p> 
<p>对焦实际上是调整整个镜头的位置(而不是镜头内的镜片)的位置，来控制像距，从而使成像最清晰。</p> 
<p></p> 
<p><strong>对焦分类</strong></p> 
<p><strong>手动对焦：</strong>通过手工转动对焦环来调节相机镜头从而使拍摄出来的照片清晰的一种对焦方式。</p> 
<p><strong>自动对焦：</strong>由照相机根据被摄体距离的远近，自动地调节镜头的对焦距离。</p> 
<p><strong>多点对焦：</strong>也叫区域对焦，当对焦中心不设置在图片中心的时候，可以使用多点对焦。常见的多点对焦为5点，7点和9点对焦。</p> 
<p></p> 
<p><span style="color:#fe2c24;"><strong>以下为大家详细介绍自动对焦的原理</strong></span></p> 
<p><span style="color:#1c7331;"><strong>自动对焦（Auto Focus，简称AF）是一个复杂的光电一体化过程，主要可以实现三个功能：一是自动判断所拍摄的主体，二是测量被摄主体与相机感光元器件之间的距离，三是驱动马达将镜头的对焦装置推到与之相应的距离刻度。</strong></span></p> 
<p></p> 
<p><strong>自动对焦按照是否主动测量合焦距离分为以下两种：</strong></p> 
<p><strong>（1）主动式：激光对焦、TOF对焦等</strong></p> 
<p>优势：低反差、弱光线、细线条、运动物体</p> 
<p>劣势：当被摄物体能吸收光波时、光波被玻璃反射等场景不能对焦到正确物体上。</p> 
<p><strong>（2）被动式：相位对焦、反差对焦等</strong></p> 
<p>优势：自身无发射系统，耗能少，小型化、逆光场景等</p> 
<p>劣势：细线条、弱光下、偏光物体、运动物体</p> 
<p></p> 
<p><strong>反差对焦（CDAF）</strong></p> 
<ul><li> <p><strong>概念：</strong>反差对焦（Contrast Detection Auto Focus，简称CDAF），又称对比度对焦，是目前普及率最高、使用最广泛、成本相对较低的自动对焦技术。</p> </li><li> <p><strong>原理和过程：</strong>反差对焦是一个反复迭代逐渐收敛的过程，即一个简单的求最大值的过程，反差对焦类似手动调焦的过程：模糊-清晰-模糊，然后逐渐平衡到一个最清晰的位置(计算反差度—&gt;移动镜头、比较反差度—&gt;直到反差度最大)。</p> </li><li> <p><strong>对焦步骤</strong></p> <p>（1）未合焦状态：此时图像处于虚焦状态（2）对焦开始状态：镜头开始移动，画面逐渐清晰，对比度开始上升</p> <p>（3）合焦状态：对比度最高，画面最清晰，继续移动镜头</p> <p>（4）继续移动镜头发现对比度开始下降，错过焦点</p> <p>（5）镜头回退至对比度最高的位置，完成对焦</p> </li></ul> 
<p></p> 
<p class="img-center"><img alt="" height="264" src="https://images2.imgbox.com/5f/b8/vExwdyos_o.gif" width="640"></p> 
<p></p> 
<ul><li> <p><strong>优点：</strong></p> <p>（1）物理成本低</p> <p>（2）无单独的子系统，不占用独立的空间（3）对焦精度高</p> </li><li> <p><strong>缺点：</strong>对焦耗时会比较长，在纯色或者反差不明显的场景，对焦时间过长或精度低</p> </li><li> <p><strong>难点：</strong>反差对焦处理方式很简单，而且对处理器性能要求也不高，那为什么不同相机的反差对焦的效果差异那么大呢？反差对焦要不断的筛选，需要以下两个条件：一是降低序列图像的规模，减小对比次数；另一个是更加快速密集的数据源，让数据提供变得更快。</p> </li><li> <p><strong>影响性能的因素如下：</strong></p> <p>（1）感光器的采样帧率：采样帧率，也称为实时刷新率，这是反差对焦性能不佳的关键原因。</p> <p>（2）镜头的采样帧率：镜头也有采样帧率的概念，一般也用FPS表示。步进马达和镜头的协调工作更好地提高反差对焦性能。</p> <p>（3）算法优劣的影响：有了密集的高频数据源，不等于对焦速度会有绝对提升，还需要良好的算法支持。</p> </li></ul> 
<p></p> 
<p><strong>相位对焦（PDAF</strong>）</p> 
<p><img alt="" height="500" src="https://images2.imgbox.com/87/14/D0N3L5mT_o.png" width="434"></p> 
<ul><li> <p><strong>概念：</strong>相位对焦（Phase Detection Auto Focus，简称PDAF），全称是“相位检测自动对焦”</p> </li><li> <p><strong>原理和过程：</strong>在整体相位检测焦点位置之后，镜头驱动模块会将镜片组进行移动合焦，因此耗时更少。</p> <p>PDAF sensor的一种实现如下，在CMOS上面一半的位置加了金属遮盖，从像素传感器上找出成对像素点，通过相位差检测，找出准确的对焦点，马达一次将镜片推动到相应位置完成对焦。</p> </li></ul> 
<p></p> 
<p class="img-center"><img alt="" height="334" src="https://images2.imgbox.com/8b/77/QEPnIxFC_o.png" width="547"></p> 
<p></p> 
<ul><li> <p><strong>优点：</strong>一半计算一次即可完成对焦，马达移动距离更短。</p> </li><li> <p><strong>缺点：</strong>专用PDAF sensor，暗环境效果差。</p> </li></ul> 
<p></p> 
<p><strong>激光对焦（LDAF）</strong></p> 
<p></p> 
<ul><li> <p><strong>概念：</strong>激光对焦（Laser Detection Auto Focus，简称LDAF），也称为测距式对焦。</p> </li><li> <p><strong>原理和过程：</strong>激光对焦是通过单独的红外激光传感器向被摄物体发射低功率红外激光，经过反射后被传感器接收，在计算出被摄物体之间的距离之后，对焦马达便会将镜片组驱动到相应位置完成对焦。</p> </li><li> <p><strong>优点：</strong>暗环境、文理不明显的纯色区域</p> </li><li> <p>缺点：对焦距离有限，距离远的主体对焦效果差</p> </li></ul> 
<p><strong>TOF对焦是一种激光对焦方法</strong>，TOF是飞行时间（Time of Flight）技术的缩写，即传感器发射红外光，经被摄物体反射后，传感器通过计算光线发射和反射时间差或相位差，来换算被拍摄景物的距离。</p> 
<p>TOF对焦通过TOF传感器的自动对焦系统，检测物体与相机之间的距离来进行对焦</p> 
<ul><li> <p>优点：计算一次即可完成对焦，降低处理器计算负担，降低了背景光的干扰。</p> </li><li> <p>缺点：物理器件性能要求很高，时间测量精度要求高</p> </li></ul> 
<p></p> 
<p></p> 
<h3 id="articleContentId">相机成像的原理</h3> 
<p>被摄景物反射出的光线通过照相镜头（摄景物镜）和控制曝光量的快门聚焦后，被摄景物在暗箱内的感光材料上形成潜像，经冲洗处理（即显影、定影）构成永久性的影像（百度百科）。传统胶片相机的感光材料为胶卷，现代数码相机的感光原件一般为CMOS传感器。它的尺寸一定程度上决定了成像质量，所以是很多相机/手机厂商宣传的重点，比如坊间经常听到的“一英寸大底”，“底大一级压死人”等等。</p> 
<p>当一束与凸透镜的主轴平行的光穿过凸透镜时，在凸透镜的另一侧会被凸透镜汇聚成一点，这一点叫做焦点，焦点到凸透镜光心的距离就叫这个凸透镜的焦距。一个凸透镜的两侧各有一个焦点。</p> 
<p>理论上只有处于镜头焦点距离的景物是成像清晰的，而在焦点前后，光线开始聚焦和扩散，成像变的模糊，成像点形成一个扩大的圆：弥散圆(circle of confusion)，而人眼的分辨能力有限，只有当弥散圆直径大到一定程度，我们才感觉到模糊，比如图 1的草地看起来中间一段都是清晰的，通俗的说，这一段“看起来清晰”的距离就是<span style="color:#fe2c24;"><strong>景深(Depth of Field)。</strong></span><br>  </p> 
<p><img alt="" height="360" src="https://images2.imgbox.com/78/e7/4a2W66vs_o.png" width="689"></p> 
<p>图 1 草地上看起来清晰的一段距离就是 <strong><span style="color:#fe2c24;">景深</span></strong></p> 
<p>在焦点前后各有一个容许弥散圆，这两个弥散圆之间的距离称为焦深，对应在被拍摄点处即为景深，换言之，被摄物体前后景深距离内，呈现在成像平面上的影像模糊度都在容许弥散圆的限定范围内。小孔成像模型示意图如图 2所示。</p> 
<p><img alt="" height="352" src="https://images2.imgbox.com/4c/96/fquqFerC_o.png" width="679"></p> 
<p><img alt="" height="335" src="https://images2.imgbox.com/ab/6d/wGo7RRWt_o.png" width="633"></p> 
<p></p> 
<h3>相机的基本原理</h3> 
<p></p> 
<h4>一、获取图像</h4> 
<h5>1、小孔成像</h5> 
<p>要讲清楚摄像头成像的原理，就得介绍下小孔成像的原理。<br> 中国春秋时代的墨子，发现在一间黑暗的屋子朝阳的墙上开一个小孔，人对着小孔站在屋外，屋里相对的墙上就会出现一个倒立的人影，这就是全世界最早关于<strong>小孔成像</strong>的记载。</p> 
<p><img alt="" height="254" src="https://images2.imgbox.com/2a/73/ilFGkRCT_o.png" width="598"></p> 
<p></p> 
<p>小孔成像实验中，点燃蜡烛，会在小孔另一面的白纸上看到一个倒立的烛焰。</p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/84/44/3ETuplcT_o.png" width="420"></p> 
<p></p> 
<p>此现象可以用来解释物理学原理：<strong>光在同种均匀介质中，在不受引力作用干扰的情况下沿直线传播</strong>。</p> 
<p>这样，我们就用一种最简单的方法在白纸上获得了蜡烛烛焰的图像。</p> 
<h5>2、凸透镜</h5> 
<p> <a href="https://www.bilibili.com/video/BV1Qd4y1f7cM/" rel="nofollow" title="把天空搬进房间，这就是理科生的浪漫吗？【小孔成像】_哔哩哔哩_bilibili">把天空搬进房间，这就是理科生的浪漫吗？【小孔成像】_哔哩哔哩_bilibili</a>，一个B站的UP主的视频 ，很有艺术浪漫细胞哦，想到了使用小孔成像的原理，将窗外的风景搬入室内。<br> 她是怎么做到的呢 ? 其实也就是把窗户全部用锡纸包住，只留一个小孔，这样室外的风景就会倒立这投影到房间里的白墙上了，不过这样投出的画面会很暗淡。(因为光线不足)</p> 
<p>这时候就需要使用到凸透镜了，凸透镜具有聚拢光线的效果，它既可以收集足够多的入射光线，又可以让出射光线集中的打在屏幕上。</p> 
<p><img alt="" height="335" src="https://images2.imgbox.com/f1/05/zLHAgCD9_o.png" width="633"></p> 
<p>所以只要选择合适焦距的凸透镜，就可以让窗外的风景清晰地投屏到白墙上了。<br> 手机摄像头成像的原理也类似的</p> 
<p></p> 
<h4>二、捕获图像——底片原理</h4> 
<p><br> 如果将小孔成像实验中的白纸换为底片（胶片），就可以将蜡烛烛焰的图像记录下来。</p> 
<p>胶片的全称为银盐感光胶片，也叫菲林，原理是将卤化银涂抹在乙酸片基上，当有光线照射到卤化银上时，卤化银转变为黑色的银，经显影工艺后固定于片基，成为我们常见到黑白负片，而彩色负片则是涂抹了三层卤化银以表现三原色。</p> 
<p>这样一个最简单的照相机就诞生了。<br><img alt="" height="278" src="https://images2.imgbox.com/dd/65/j4AjBSZq_o.png" width="492"></p> 
<h4>三、聚焦成像——凸透镜的成像原理</h4> 
<p>小孔成像实验中，蜡烛自身是强光源，才能透过小孔在白纸上成像，所以该种方式对光源的要求极高，在日常生活中，我们不可能像蜡烛一样点亮自己，更多的是靠太阳光进行漫反射。</p> 
<p>凸透镜可以改变光线折射率，对光线进行聚焦成像，凸透镜的成像原理如下：</p> 
<p><img alt="" height="449" src="https://images2.imgbox.com/61/99/qtIpAjgb_o.png" width="491"></p> 
<p></p> 
<p><img alt="" height="271" src="https://images2.imgbox.com/26/11/mfpN0X0p_o.gif" width="600"></p> 
<p><img alt="" height="252" src="https://images2.imgbox.com/23/d2/7kMaNBnE_o.png" width="476"></p> 
<p>1. 焦距<br> 焦距是指平行光线通过镜头汇聚到一点，这一点到镜头中心的距离称为焦距，也就是上图中的F。</p> 
<p>2. 凸透镜成像规律的应用<br> 首先需要知道什么是物距？什么是相距？物距指的是上图中左边物体与镜头的距离，记作u uu，相距指的是上图中右边成像与镜头的距离，记作v vv。</p> 
<p>（1）照相机</p> 
<p>成像规律：当物体处于凸透镜的2倍焦距之外（u &gt; 2 F u&gt;2Fu&gt;2F），成倒立的、缩小的、实像，成像位于一倍焦距和二倍焦距之间（f &lt; v &lt; 2 F f&lt;v&lt;2Ff&lt;v&lt;2F）</p> 
<p>根据此成像规律，可以将凸透镜应用于照相机，拍摄2倍焦距之外的物体。</p> 
<p>（2）投影仪</p> 
<p>成像规律：当物体处于凸透镜的1倍焦距和2倍焦距之间（F &lt; u &lt; 2 F F&lt;u&lt;2FF&lt;u&lt;2F），成倒立的、放大的、实像，成像位于二倍焦距之外（v &gt; 2 F v&gt;2Fv&gt;2F）</p> 
<p>根据此成像规律，可以将凸透镜应用于投影仪，放大在1倍焦距和2倍焦距之间的物体成像。</p> 
<p>（3）放大镜</p> 
<p>成像规律：当物体处于凸透镜的1倍焦距之内（u &lt; F u&lt;Fu&lt;F），成正立的、放大的、虚像，并且物体和成像在凸透镜的同一侧。</p> 
<p>根据此成像规律，可以将凸透镜应用于放大镜，放大在1倍焦距之内的物体成像。</p> 
<p>3. 焦距与视角的关系<br> 视角的专业名词叫视场角（Field of view），简称FOV，指照相机最终能成像的角度范围。</p> 
<p>视角与焦距之间的关系如下图：<br><img alt="" height="279" src="https://images2.imgbox.com/83/c4/4h9pwnbo_o.png" width="528"></p> 
<p>图中f ff是焦距，h hh是感光元件的长度，可以近似得出焦距与FOV角度的关系：<br><img alt="" height="55" src="https://images2.imgbox.com/9f/8a/hP33SjUP_o.png" width="324"></p> 
<p>得出结论：当f越小，FOV越大，即焦距越小，成像角度范围越大。</p> 
<p>镜头的焦距和视角对应情况如下：</p> 
<p><img alt="" height="382" src="https://images2.imgbox.com/17/10/Sj6jsvyV_o.png" width="1116"></p> 
<p>不同焦距的镜头拍摄出的实际成像区别如下：</p> 
<p><img alt="" height="585" src="https://images2.imgbox.com/0e/32/dzSqLHOi_o.png" width="1101"></p> 
<p>一般情况下，相机镜头可以按视角分为</p> 
<p>鱼眼镜头：焦距为16mm或更短，视角范围极广，接近180°<br> 超广角镜头：24mm以下<br> 广角镜头：24-35mm，视角范围广，景物个体小<br> 标准镜头：35-85mm，视角接近于人类的视野<br> 远摄镜头：85-300mm，视角范围窄，景物个体大<br> 超远摄镜头：300mm以上<br>  </p> 
<h4>四、数字图像——感光元件（sensor）</h4> 
<p><br> 胶片的原理是通过光产生化学反应来记录，而感光元件的原理将光转化为模拟电信号来记录，感光元件使得照相机从传统的胶片相机变为数码相机。</p> 
<p>感光元件产生的模拟信号，首先经过模拟信号放大器进行信号放大，进而经过数模转换电路（DAC）变为数字图像，数字图像再经过ISP（Image Signal Processor）图像处理器进行数字图像处理，最后数字图像经过压缩编码算法，存储到SD卡中成为一个照片文件。</p> 
<p>感光元件也叫图像传感器（sensor），分为两种：一种是广泛使用的CCD(电荷耦合)元件，另一种是CMOS(互补金属氧化物半导体)器件。</p> 
<h5>1. CCD</h5> 
<p><br> CCD全称Charge Coupled Device，它使用一种高感光度的半导体材料制成，由许多感光单位组成，通常以百万像素为单位。</p> 
<p>当CCD表面受到光线照射时，每个感光单位会将电荷反映在组件上，即把光转换为电荷，所有的感光单位所产生的信号加在一起，就构成了一幅完整的画面。</p> 
<h5>2. CMOS</h5> 
<p><br> CMOS全称Complementary Metal-Oxide Semiconductor，它主要是利用硅和锗这两种元素所做成的半导体，使其在CMOS上共存着N极和P极的半导体，这两个互补效应所产生的电流即可被处理芯片记录为影像。</p> 
<p>两者最主要的区别在于：CCD传感器的图像质量优于CMOS传感器，而CMOS传感器在成像速度、功耗、价格等方面优于CCD传感器。</p> 
<p>CMOS图像传感器用来接收光信号，并转化为电信号，再通过内部的ADC转化为数字信号</p> 
<h6>2.1 微透镜</h6> 
<p>在彩色滤镜阵列(CFA)的上方，用来把光线聚集到每一个像素点上，每一个像素点上方都有一个微透镜，6400万像素就有6400万个微透镜，1亿像素就有1亿个微透镜</p> 
<p><img alt="" height="263" src="https://images2.imgbox.com/9d/6a/trlLP1CM_o.png" width="553"></p> 
<h6>2.2 彩色滤镜阵列 (CFA)</h6> 
<p>CFA的作用就是赋予图像颜色，阳光通过CFA的某个像素的时候，只有对应颜色(红/绿/蓝)的光线才能进入。<br> 一般用的就是拜耳(Bayer) 阵列 (RGGB 排列)，由于人眼对于绿色更敏感，所以有两个绿色像素，红色和蓝色像素各占一个。</p> 
<p><img alt="" height="587" src="https://images2.imgbox.com/0e/18/SyInQvyO_o.png" width="902"></p> 
<p>当然也有其他的排列，比如华为和特斯拉就用的RYYB排列，这样做的好处是进光量更大，在同等条件下夜晚拍照会更清晰。<br> 但是存在一个问题，就是需要多一步将黄色的光再分解为红色和绿色，这导致照片会容易出现偏色问题，后期算法层面需要进行更多的优化。</p> 
<p><img alt="" height="285" src="https://images2.imgbox.com/3c/e3/XXAYNHhI_o.png" width="540"></p> 
<h6>2.3 像素阵列</h6> 
<p><br> 也就是光电二极管(photodiode)，它收集着光子，并将其转化为电子。<br> 一个光电二极管，就代表着一个像素，是照片上最小的成像单元，一般用微米(um)来表示它的大小，比如0.8um</p> 
<h6>2.4 ADC 模数转换器</h6> 
<p><br> 负责将电子信号转化为数字信号</p> 
<p></p> 
<h6>2.5. 拓展知识</h6> 
<p><a name="t10"></a>CMOS图像传感器的结构</p> 
<p><img alt="" height="492" src="https://images2.imgbox.com/8b/bb/crskw5mo_o.png" width="1029"></p> 
<p>CMOS图像传感器结构有前罩式，被罩式，以及堆栈式。</p> 
<p>前罩式 : 比较浪费光线<br> 被罩式 : 电路层移到了光电二极管的下面，光线利用率高<br> 堆栈式 : 本质也是被罩式图像传感器，但多加入了一层DRAM，这样手机才能去拍摄超级慢动作</p> 
<p>怎么评价图像传感器的好坏<br> 信噪比 = 有用信号 / 噪声，信噪比越高，就意味着画质越好，越纯净。<br> 信噪比越低，整个画面就会看上去有很多的噪点。</p> 
<p>除此之外，还有三个对成像质量有影响的点</p> 
<p>清晰度 : 像素越高越清晰 (前提是信噪比高才有用)<br> 宽容度 (动态范围) : 相机所能记录最亮与最暗的入射光亮度之比，动态范围越高，拍摄的明暗层次越多，细节也更多；一般单像素面积越大，动态范围越大。<br> 感光能力 : 图像传感器的尺寸越大，感光能力越强，在暗光环境下，画质更好</p> 
<p></p> 
<h4>五、 ISP图像信号处理</h4> 
<p><br> 一般ISP也集成在CMOS中，并不是每一个图像传感器(CMOS)都自带ISP，随着现在的手机摄像越来越往计算摄影去发展，这个处理过程也更多的被放在SoC级的ISP上进行。</p> 
<p>ISP，主要用来对前端图像传感器(CMOS)输出的信号做后期处理，主要功能有去马赛克(也叫反马赛克 ，demosaicing，由于每个像素点经过CFA后只能感应到一种颜色，所以需要通过该像素周围像素来预测出该点的插补值)、自动对焦(协同对焦马达)、曝光、白平衡、校正镜头缺陷、焦躁、HDR、格式转换等功能。</p> 
<p>具体功能有 : 黑电平校正(BLC)、镜头阴影校正(LSC)、坏点校正(DPC)、颜色插值(Demosaic)、自动白平衡 (AWB)、颜色校正 (CCM)、彩色空间转换 (CSC)、Gammma校正 (Gamma Correction) 、宽动态 (WDR) 、多帧降噪 (3DNR)、锐化 (Sharp)、自动曝光 (AE)等。<br> ISP中的模块有IFE、BPS、IPE，JPEG等，其中JPEG会将数据进行jpeg编码工作。<br> 颜色插值功能是去马赛克的一种方法。<br>  </p> 
<h4>六、手机相机拍照过程</h4> 
<p>手机相机的链路</p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/0c/b1/KRn2MXmz_o.png" width="865"><br> 先来整体看一下手机相机的链路，总共有5步，本篇文章会针对前3部分(硬件部分)进行讲解 :</p> 
<p><strong>Camera Lens</strong> : 手机相机镜头，光线通过透镜，到达COMS图像传感器<br><strong>Image Sensor</strong> : CMOS图像传感器会将光信号转化为电信号，再通过内部的ADC转化为数字信号<br><strong>ISP</strong> : 数字信号会传输给ISP进行处理，主要进行矫正、白平衡、曝光控制等<br><strong>SOC </strong>: 这一步就在应用层了(比如App)，通过CPU和GPU对图像数据进行后处理，比如添加滤镜等操作<br><strong>Display</strong> : 最终将图像数据显示到屏幕上</p> 
<p><strong>Camera Lens</strong>手机镜头示意图：</p> 
<p><img alt="" height="258" src="https://images2.imgbox.com/bb/45/xIMYNDcg_o.png" width="559"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fe1654579af16ea5594837e7dbd4d2ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">docker 安装 rocketmq-mqtt</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/75ef6495d77744830a07b32eb1641515/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">反网络爬虫的三个阶段</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
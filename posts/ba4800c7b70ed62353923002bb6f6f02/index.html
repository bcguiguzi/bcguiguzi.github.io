<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android数据存储（二）——Android存储概念、内部存储、外部存储 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android数据存储（二）——Android存储概念、内部存储、外部存储" />
<meta property="og:description" content="今天主要讲一下Android中存储概念，主要分为以下两点：
1.内部存储（Internal Storage） 内部存储会随应用卸载被删除
/data/data/&lt;applicationId&gt;/shared_prefs 数据存储
/data/data/&lt;applicationId&gt;/databases 数据库
/data/data/&lt;applicationId&gt;/files 文件
通过context.getCacheDir()获得
/data/data/&lt;applicationId&gt;/cache 缓存
通过context.getFilesDir()获得
FileOutputStream FileInputStream
主要看代码进行总结整理
package com.example.scrollview.datastorage; import androidx.appcompat.app.AppCompatActivity; import android.content.SharedPreferences; import android.os.Bundle; import android.view.View; import android.widget.Button; import android.widget.EditText; import android.widget.TextView; import com.example.scrollview.R; import java.io.FileInputStream; import java.io.FileNotFoundException; import java.io.FileOutputStream; import java.io.IOException; public class FileActivity extends AppCompatActivity { EditText editText; Button save,show; TextView savetv; SharedPreferences sharedPreferences; SharedPreferences.Editor editor; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_shared_peferences); editText=findViewById(R.id.name); save=findViewById(R.id.save); show=findViewById(R." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/ba4800c7b70ed62353923002bb6f6f02/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-07T22:10:01+08:00" />
<meta property="article:modified_time" content="2019-08-07T22:10:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android数据存储（二）——Android存储概念、内部存储、外部存储</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>今天主要讲一下Android中存储概念，主要分为以下两点：</strong></p> 
<h3>1.内部存储（Internal Storage）</h3> 
<p>内部存储会随应用卸载被删除</p> 
<p>/data/data/&lt;applicationId&gt;/shared_prefs    数据存储</p> 
<p>/data/data/&lt;applicationId&gt;/databases  数据库</p> 
<p>/data/data/&lt;applicationId&gt;/files  文件</p> 
<p>通过context.getCacheDir()获得</p> 
<p>/data/data/&lt;applicationId&gt;/cache  缓存</p> 
<p>通过context.getFilesDir()获得</p> 
<p>FileOutputStream FileInputStream</p> 
<p>主要看代码进行总结整理</p> 
<pre class="has"><code>package com.example.scrollview.datastorage;
import androidx.appcompat.app.AppCompatActivity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import com.example.scrollview.R;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

public class FileActivity extends AppCompatActivity {

    EditText editText;
    Button save,show;
    TextView savetv;
    SharedPreferences sharedPreferences;
    SharedPreferences.Editor editor;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_shared_peferences);
        editText=findViewById(R.id.name);
        save=findViewById(R.id.save);
        show=findViewById(R.id.show);
        savetv=findViewById(R.id.tv_show);
        save.setOnClickListener(new onclick());
        show.setOnClickListener(new onclick());
    }

    class onclick implements View.OnClickListener{

        @Override
        public void onClick(View view) {

            switch (view.getId()){
                case R.id.name:
                    break;
                case R.id.save:
                    save(editText.getText().toString().trim()); //调用存储方法
                    break;
                case R.id.show:
                    savetv.setText(read()); //调用读取数据的方法
                    break;
                case R.id.tv_show:
                    break;
            }
        }
    }

    //内部存取数据
    private void save(String content){
        FileOutputStream fileOutputStream= null; //文件输出流
        try {
            fileOutputStream = openFileOutput("test.txt",MODE_PRIVATE); //打开文件输出
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        try {
            fileOutputStream.write(content.getBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            fileOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    //内部读取数据
    private String read(){
        FileInputStream fileInputStream= null;
        try {
            fileInputStream = openFileInput("test.txt");
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        byte[] buff=new byte[1024];
        StringBuilder sb=new StringBuilder("");
        int len=0;
        while (true){
            try {
                if (!(fileInputStream.read(buff)&gt;0)) break;
            } catch (IOException e) {
                e.printStackTrace();
            }
            sb.append(new String(buff,0,len));
        }
        try {
            fileInputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sb.toString();
    }
}
</code></pre> 
<p><img alt="" class="has" height="488" src="https://images2.imgbox.com/39/ff/8CdGVb9E_o.png" width="373"></p> 
<p>2.外部存储（External Storage）</p> 
<p>公有目录  </p> 
<p>pictures movies music....</p> 
<p>通过Environment.getExternalStoragePublicDirectory(int type)</p> 
<p>私有目录  随应用卸载被删除</p> 
<p>/mnt/sdcard/Android/data/data/&lt;applicationId&gt;/cache</p> 
<p>/mnt/sdcard/Android/data/data/&lt;applicationId&gt;/files</p> 
<pre class="has"><code>package com.example.scrollview.datastorage;
import androidx.appcompat.app.AppCompatActivity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import com.example.scrollview.R;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

public class FileActivity extends AppCompatActivity {


    EditText editText;
    Button save,show;
    TextView savetv;
    SharedPreferences sharedPreferences;
    SharedPreferences.Editor editor;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_shared_peferences);
        editText=findViewById(R.id.name);
        save=findViewById(R.id.save);
        show=findViewById(R.id.show);
        savetv=findViewById(R.id.tv_show);
        save.setOnClickListener(new onclick());
        show.setOnClickListener(new onclick());
  
    }

    class onclick implements View.OnClickListener{

        @Override
        public void onClick(View view) {

            switch (view.getId()){
                case R.id.name:
                    break;
                case R.id.save:
                    save2(editText.getText().toString().trim());
                    break;
                case R.id.show:
                    savetv.setText(read2());
                    break;
                case R.id.tv_show:
                    break;
            }
        }
    }
    //外部存取数据
    private void save2(String content){
        FileOutputStream fileOutputStream= null;
        try {
            //fileOutputStream = openFileOutput("test.txt",MODE_PRIVATE);
            File dir=new File(Environment.getExternalStorageDirectory(),"Demo");
            if(!dir.exists()){
                dir.mkdirs();
            }
            File file=new File(dir,"test.txt");
            if(!file.exists()){
                file.createNewFile();
            }
            fileOutputStream=new FileOutputStream(file);
            fileOutputStream.write(content.getBytes());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    //外部读取数据
    private String read2(){
        FileInputStream fileInputStream= null;
        try {
          File file=new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/Demo","test.txt");
          fileInputStream=new FileInputStream(file);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        byte[] buff=new byte[1024];
        StringBuilder sb=new StringBuilder("");
        int len=0;
        while (true){
            try {
                if (!(fileInputStream.read(buff)&gt;0)) break;
            } catch (IOException e) {
                e.printStackTrace();
            }
            sb.append(new String(buff,0,len));
        }
        try {
            fileInputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sb.toString();
    }
}
</code></pre> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e2d010c1059de02e7f64115f7889e31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">BottomSheetDialog&#43;Recyclerview一次记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/05cf609bff64d2c0ea440e540c822a6a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何用MATLAB产生25Gbaud的基带QPSK调制信号</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
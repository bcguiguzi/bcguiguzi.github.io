<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android应用之【隐藏桌面图标的一种方法】 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android应用之【隐藏桌面图标的一种方法】" />
<meta property="og:description" content="Android10之前的版本，应用程序调用方法PackageManager.setComponentEnabledSetting(componentName, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP)可以隐藏在桌面上的图标，这样的程序如果被偷偷安装后，机主本人可能并不知道自己的手机被安装了某些程序。
但是android10之后的版本，如果应用中使用了四大组件（activity ，service ，broadcast， contentprovider)或者需要动态申请权限，这个函数调用将失去效果，简单测试后，调用该方法后，程序的桌面图标效果如下：
若AndroidManifest.xml中activity的icon和roundIcon这两者都不是黑色，显示资源文件中定义的图标像素。如果activity中的icon和roundIcon同时设置为黑色，则icon不显示，roundIcon显示为系统默认的空白图标。 因此，传统的方法调用将不再适用了。
网上流传一种方式是，设置activity的label为空字符串“”，icon和roundIcon的像素值为0的黑色图标。该方案链接为：
Android10.0应用图标隐藏方案（7.0-10.0）
上述方法中，icon和roundIcon的图标资源文件如下：
上文中，theme字段透明的设置：
实际测试后，这种方法的隐藏效果有重大缺陷，在调用本文开头的PackageManager.setComponentEnabledSetting方法后，桌面上的图标虽然被抹去了，但是留下了一个图标大小的黑影，并不像作者在文中所说的那样&#34;完全看不到&#34;, 作者源码我在android12上亲自测试过，这时候，点击图标虽然完全没有效果，但是视觉上的缺陷是无法容忍的。
通过测试，我发现有一种隐藏图标的方式，其实现步骤如下：
设置主activity的intent-filter字段，其格式必须满足如下两点，一是在启动节点的activity中，包含默认的启动属性&#34;android.intent.action.MAIN&#34;和&#34;android.intent.category.LAUNCHER&#34;，二是还要添加别的属性，比如android.intent.action.VIEW，这样作的目的就是破坏应用程序启动节点的默认设置，使之含有别的行为和动作，这样程序启动后就不能正常显示图标。 比如启动节点的如下设置：
使用Android scheme方式从浏览器启动（或者另外再安装一个程序，当作此程序的启动器）。要注意的是，浏览器scheme启动方式不是说客户端的浏览器访问路径触发启动应用程序，我原先以为，在客户端的浏览器中输入形如myscheme://myhost这样的url就可以触发程序的执行，但是反复测试没有效果，于是想到，会不会这种scheme方式，说的是访问服务器的web页面，该地址的页面中有个形如 “&lt;a href=“myscheme://myhost”&gt;点击此处启动Android程序&lt;/a&gt;” 这样的标签，用户在浏览器中点击这个标签后，即可触发应用中Android的启动组件。 这个简单的逻辑，无形中浪费了很多时间。
源码如下，上述描述的内容，只需要关注测试项目中AndroidManifest.xml中的Application节区属性。
源码链接地址" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/ebdfd5a2543d2ef2109d7bb418e3b2e8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T23:16:29+08:00" />
<meta property="article:modified_time" content="2024-01-04T23:16:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android应用之【隐藏桌面图标的一种方法】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Android10之前的版本，应用程序调用方法PackageManager.setComponentEnabledSetting(componentName, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP)可以隐藏在桌面上的图标，这样的程序如果被偷偷安装后，机主本人可能并不知道自己的手机被安装了某些程序。</p> 
<p>但是android10之后的版本，如果应用中使用了四大组件（activity ，service ，broadcast， contentprovider)或者需要动态申请权限，这个函数调用将失去效果，简单测试后，调用该方法后，程序的桌面图标效果如下：</p> 
<ol><li>若AndroidManifest.xml中activity的icon和roundIcon这两者都不是黑色，显示资源文件中定义的图标像素。</li><li>如果activity中的icon和roundIcon同时设置为黑色，则icon不显示，roundIcon显示为系统默认的空白图标。</li></ol> 
<p>因此，传统的方法调用将不再适用了。</p> 
<p>网上流传一种方式是，设置activity的label为空字符串“”，icon和roundIcon的像素值为0的黑色图标。该方案链接为：<br> <a href="https://blog.csdn.net/u010982507/article/details/108683190">Android10.0应用图标隐藏方案（7.0-10.0）</a></p> 
<p>上述方法中，icon和roundIcon的图标资源文件如下：<br> <img src="https://images2.imgbox.com/99/1f/4YRMlT7G_o.png" alt="在这里插入图片描述"></p> 
<p>上文中，theme字段透明的设置：<br> <img src="https://images2.imgbox.com/bf/06/vIHlRk3V_o.png" alt="在这里插入图片描述"></p> 
<p>实际测试后，这种方法的隐藏效果有重大缺陷，在调用本文开头的PackageManager.setComponentEnabledSetting方法后，桌面上的图标虽然被抹去了，但是留下了一个图标大小的黑影，并不像作者在文中所说的那样"完全看不到", 作者源码我在android12上亲自测试过，这时候，点击图标虽然完全没有效果，但是视觉上的缺陷是无法容忍的。</p> 
<p>通过测试，我发现有一种隐藏图标的方式，其实现步骤如下：</p> 
<ol><li>设置主activity的intent-filter字段，其格式必须满足如下两点，一是在启动节点的activity中，包含默认的启动属性"android.intent.action.MAIN"和"android.intent.category.LAUNCHER"，二是还要添加别的属性，比如android.intent.action.VIEW，这样作的目的就是破坏应用程序启动节点的默认设置，使之含有别的行为和动作，这样程序启动后就不能正常显示图标。</li></ol> 
<p>比如启动节点的如下设置：<br> <img src="https://images2.imgbox.com/94/6d/7ZjVObY3_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>使用Android scheme方式从浏览器启动（或者另外再安装一个程序，当作此程序的启动器）。要注意的是，浏览器scheme启动方式不是说客户端的浏览器访问路径触发启动应用程序，我原先以为，在客户端的浏览器中输入形如myscheme://myhost这样的url就可以触发程序的执行，但是反复测试没有效果，于是想到，会不会这种scheme方式，说的是访问服务器的web页面，该地址的页面中有个形如 <strong>“&lt;a href=“myscheme://myhost”&gt;点击此处启动Android程序&lt;/a&gt;”</strong> 这样的标签，用户在浏览器中点击这个标签后，即可触发应用中Android的启动组件。</li></ol> 
<p>这个简单的逻辑，无形中浪费了很多时间。</p> 
<p>源码如下，上述描述的内容，只需要关注测试项目中AndroidManifest.xml中的Application节区属性。</p> 
<p><a href="https://github.com/satadriver/flashplayer">源码链接地址</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6b2d379796ff11a410f09d058d162194/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">P1029 [NOIP2001 普及组] 最大公约数和最小公倍数问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/28a06041c78d150044cca779bfaee83c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OSPF多区域配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
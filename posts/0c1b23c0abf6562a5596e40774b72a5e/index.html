<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos7yum配置及参数 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos7yum配置及参数" />
<meta property="og:description" content="yum的使用
yum的命令形式一般是如下：
yum(选项)（参数）
常用选项：
-h ：显示帮助信息
-y ：对所有的提问都回答yes
-c ：指定配置文件
-q ：安静模式（不显示安装过程）
-v : 详细模式（显示安装过程）
-d ：设置调试等级 (0-10)
-e : 设置错误等级（0-10）
-R ：设置yum处理一个命令的最大等却时间
-C ：完全从缓存中运行，不从源下载、更新如何文件
常用参数： -install ：安装rpm软件包
-update ：更新rpm软件包
-check-update ：检查是否有可用的更新rpm软件包 -remove ：删除指定的rpm软件包-list ：显示软件包的信息
-search ：检查软件包的信息
-info : 显示指定的rpm软件包的描述信息和概要信息-clean : 清理yum过期的缓存
-shell ：进入yum的shell提示符-resolvedep ：显示rpm软件包的依赖关系
-localinstall ：安装本地的rpm软件包
-localupdate ：显示本地rpm软件包进行更新
-deplist ：显示rpm软件包的所有依赖关系
yum –选项命令包 -参数，如：yum install vim -y
yum信息
yum的一切信息都存储在一个叫yum.reops.d目录下的配置文件中，通常位于/etc/yum.reops.d目录下。
在这个目录下面有很多文件，都是.repo结尾的，repo文件是yum源（也就是软件仓库）的配置文件，通常一个repo文件定义了一个或者多个软件仓库的细节内容，例如我们将从哪里下载需要安装或者升级的软件包，repo文件中的设置内容将被yum读取和应用 yum源文件配置方法一：网络源
比较常见的网络源：系统自带网络源，阿里源，清华源；
系统自带网络源使用方法：
系统自带网络源解析：
进入/etc/yum.repo.d/目录下
打开CentOS-Base.repo配置文件，vim /etc/yum.repos.d/CentOS-Base.repo
在这里插入图片描述](https://img-blog.csdnimg.cn/ad90d7b9f3aa40639ce1b039d7d26b7d.png)
在此文件中需要注意的地方：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/0c1b23c0abf6562a5596e40774b72a5e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-28T12:07:07+08:00" />
<meta property="article:modified_time" content="2023-04-28T12:07:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos7yum配置及参数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>yum的使用<br> yum的命令形式一般是如下：<br> yum(选项)（参数）<br> 常用选项：<br> -h ：显示帮助信息</p> 
<ul><li>-y ：对所有的提问都回答yes<br> -c ：指定配置文件<br> -q ：安静模式（不显示安装过程）<br> -v : 详细模式（显示安装过程）<br> -d ：设置调试等级 (0-10)<br> -e : 设置错误等级（0-10）<br> -R ：设置yum处理一个命令的最大等却时间<br> -C ：完全从缓存中运行，不从源下载、更新如何文件<br> 常用参数： 
  <ul><li>-install ：安装rpm软件包<br> -update ：更新rpm软件包<br> -check-update ：检查是否有可用的更新rpm软件包</li></ul> </li><li>-remove ：删除指定的rpm软件包</li><li>-list ：显示软件包的信息<br> -search ：检查软件包的信息<br> -info : 显示指定的rpm软件包的描述信息和概要信息</li><li>-clean : 清理yum过期的缓存<br> -shell ：进入yum的shell提示符</li><li>-resolvedep ：显示rpm软件包的依赖关系<br> -localinstall ：安装本地的rpm软件包<br> -localupdate ：显示本地rpm软件包进行更新<br> -deplist ：显示rpm软件包的所有依赖关系<br> yum –选项命令包 -参数，如：yum install vim -y<br> yum信息<br> yum的一切信息都存储在一个叫yum.reops.d目录下的配置文件中，通常位于/etc/yum.reops.d目录下。<br> 在这个目录下面有很多文件，都是.repo结尾的，repo文件是yum源（也就是软件仓库）的配置文件，通常一个repo文件定义了一个或者多个软件仓库的细节内容，例如我们将从哪里下载需要安装或者升级的软件包，repo文件中的设置内容将被yum读取和应用</li></ul> 
<p>yum源文件配置方法一：网络源<br> 比较常见的网络源：系统自带网络源，阿里源，清华源；<br> 系统自带网络源使用方法：<br> 系统自带网络源解析：<br> 进入/etc/yum.repo.d/目录下</p> 
<p><img src="https://images2.imgbox.com/41/5a/iocVoGGQ_o.png" alt="在这里插入图片描述"></p> 
<p>打开CentOS-Base.repo配置文件，vim /etc/yum.repos.d/CentOS-Base.repo<br> 在这里插入图片描述](https://img-blog.csdnimg.cn/ad90d7b9f3aa40639ce1b039d7d26b7d.png)<br> <img src="https://images2.imgbox.com/a4/43/vJmxnsSu_o.png" alt="在这里插入图片描述"></p> 
<p>在此文件中需要注意的地方：<br> [extras]这个表示的是名称，即yum的ID，且必须唯一，当本地有多个yum源的时候，这里必须是唯一的<br> name=CentOS-<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         e 
        
       
         l 
        
       
         e 
        
       
         a 
        
       
         s 
        
       
         e 
        
       
         v 
        
       
         e 
        
       
         r 
        
       
         − 
        
       
         B 
        
       
         a 
        
       
         s 
        
       
         e 
        
       
         − 
        
       
         − 
        
       
         − 
        
       
         − 
        
       
         − 
        
       
         &gt; 
        
       
         具体的 
        
       
         y 
        
       
         u 
        
       
         m 
        
       
         源名字，其实相当于对它的描述描述信息 
        
       
         b 
        
       
         a 
        
       
         s 
        
       
         e 
        
       
         u 
        
       
         r 
        
       
         l 
        
       
         是镜像服务器地址，只能写具体的确定地址。在文件中，只能有一个 
        
       
         b 
        
       
         a 
        
       
         s 
        
       
         e 
        
       
         u 
        
       
         r 
        
       
         l 
        
       
         ，但里面可以包含多个 
        
       
         u 
        
       
         r 
        
       
         l 
        
       
         m 
        
       
         i 
        
       
         r 
        
       
         r 
        
       
         o 
        
       
         r 
        
       
         l 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         是镜像服务器的地址列表，里面有很多的服务器地址。这里有一个变量 
        
       
      
        releasever - Base -----&gt;具体的yum源名字，其实相当于对它的描述描述信息 baseurl是镜像服务器地址，只能写具体的确定地址。在文件中，只能有一个baseurl，但里面可以包含多个url mirrorlist是镜像服务器的地址列表，里面有很多的服务器地址。这里有一个变量 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">se</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal" style="margin-right: 0.0278em;">er</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.7667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal" style="margin-right: 0.0502em;">B</span><span class="mord mathnormal">a</span><span class="mord mathnormal">se</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord">−</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord cjk_fallback">具体的</span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord cjk_fallback">源名字，其实相当于对它的描述描述信息</span><span class="mord mathnormal">ba</span><span class="mord mathnormal">se</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord cjk_fallback">是镜像服务器地址，只能写具体的确定地址。在文件中，只能有一个</span><span class="mord mathnormal">ba</span><span class="mord mathnormal">se</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord cjk_fallback">，但里面可以包含多个</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">mi</span><span class="mord mathnormal" style="margin-right: 0.0278em;">rror</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">是镜像服务器的地址列表，里面有很多的服务器地址。这里有一个变量</span></span></span></span></span>arch，cpu体系，还有一个变量：$basearch，cpu的基本体系组<br> baseurl和mirrorlist都是指向yum源的地址，不同点是包含地址的多少。你若自己写的话，一般只写一个地址直接用baseurl就行<br> gpgcheck=0 ----&gt;要不要验证呢，取消验证。1，使用公钥检验rpm的正确性。<br> gpgcheck若是1将对下载的rpm将进行gpg的校验，校验密钥就是gpgkey，一般自己的yum源是不需要检测的。gpgcheck=0，那么gpgkey就可以不填写。</p> 
<p>打开yum.conf文件，vim /etc/yum.conf<br> 在这里插入图片描述](https://img-blog.csdnimg.cn/0932602e1e8d41e882b2005de29d26ac.png)</p> 
<p>此文件需要注意的地方：<br> cachedir=/var/cache/yum #yum下载的RPM包的缓存目录<br> keepcache=0 #缓存是否保存，1保存，0不保存。<br> debuglevel=2 #调试级别(0-10)，默认为2<br> logfile=/var/log/yum.log #yum的日志文件所在的位置</p> 
<p>阿里源：<br> 源地址介绍及教程：https://developer.aliyun.com/mirror/centos?spm=a2c6h.13651102.0.0.3e221b11omzmgW<br> 清华源：</p> 
<p>本地源：<br> 首先在虚拟机中，进行设置<br> <img src="https://images2.imgbox.com/c0/bb/JLGx5hkC_o.png" alt="在这里插入图片描述"></p> 
<p>在虚拟机系统中，我们的 iso 文件是 /dev/sr0</p> 
<p>我们要将iso文件挂载到 /mnt/cdrom 下。如果mnt目录下已被挂在占用你，那么自己新建一个挂在目录</p> 
<p>更改CentOS-Media.repo配置文件 ，vim /etc/yum.repos.d/CentOS-Media.repo<br> <img src="https://images2.imgbox.com/43/62/ljnyOMpC_o.png" alt="在这里插入图片描述"></p> 
<p>删除CentOS-Base.repo文件，rm -f /etc/yum.repos.d/CentOS-Base.repo<br> 此时就完成本地源配置</p> 
<p>重启后本地源无法使用，使用df-h命令发现ios没有挂载，此时就要设置永久挂载<br> 我们的设备的挂载信息在 /etc/fstab 里面，所以我们要想永久挂载，需要修改 fstab 文件。用 vim 打开该文件，我们可以看到有三行信息，是其他分区的挂载信息，所以我们现在要把我们的光盘的挂载信息添加过去。</p> 
<p><img src="https://images2.imgbox.com/b8/5e/K69OaUgX_o.png" alt="在这里插入图片描述"></p> 
<p>添加：/dev/sr0 /guazai iso9660 defaults 0 0<br> <img src="https://images2.imgbox.com/91/22/qPWWchpr_o.png" alt="在这里插入图片描述"></p> 
<p>添加完成后，保存退出<br> 执行命令，mount -a<br> 这个命令的意思是挂载fstab文件中的所有文件系统</p> 
<p>本地永久挂载完成到此</p> 
<p>远程挂载（此步骤比较少应用，不做截图）：</p> 
<p>服务端配置：<br> systemctl stop firewalld<br> setenforce 0<br> yum -y install nfs-utils rpcbind<br> systemctl restart nfs rpcbind<br> systemctl enable nfs rpcbind<br> mkdir -p /mnt/vcdrom/ 创建挂载目录<br> vim /etc/exports 添加如下内容<br> /mnt/vcdrom/ 服务端ip(rw,async,no_root_squash,no_subtree_check) 　<br> 重启服务<br> 配置文件说明：/mnt/vcdrom/为共享的目录，使用绝路径。对服务器ip(rw,no_root_squash,no_all_squash,sync) 为客户端的地址及权限，地址可以是一个网段，一个IP地址或者是一个域名，域名支持通配符，如：xxxx.com。<br> 权限说明：rw：read-write，可读写；ro：read-only，只读；sync：文件同时写入硬盘和内存；async：文件暂存于内存，而不是直接写入内存；no_root_squash：NFS客户端连接服务端时如果使用的是root的话，那么对服务端分享的目录来说，也拥有root权限。显然开启这项是不安全的。root_squash：NFS客户端连接服务端时如果使用的是root的话，那么对服务端分享的目录来说，拥有匿名用户权限，通常他将使用nobody或nfsnobody身份；all_squash：不论NFS客户端连接服务端时使用什么用户，对服务端分享的目录来说都是拥有匿名用户权限；anonuid：匿名用户的UID值，通常是nobody或nfsnobody，可以在此处自行设定；anongid：匿名用户的GID值。</p> 
<p>客户端配置：<br> systemctl stop firewalld<br> setenforce 0<br> yum -y install nfs-utils rpcbind<br> systemctl restart nfs rpcbind<br> systemctl enable nfs rpcbind<br> mkdir -p /mnt/vcdrom/ 创建挂载点<br> mount -t nfs 服务器ip:/mnt/vcdrom /mnt/vcdrom<br> vim /etc/fstab 永久挂在添加如下内容<br> server_ip:/mnt/vcdrom /mnt/vcdrom nfs rw,tcp,intr 0 1</p> 
<p>拓展：<br> 1 yum清空缓存列表</p> 
<p>yum clean packages 清除缓存目录下的软件包，清空的是(/var/cache/yum)下的缓存<br> yum clean headers 清除缓存目录下的 headers<br> yum clean oldheaders 清除缓存目录下旧的 headers<br> yum clean, yum clean all (= yum clean packages; yum clean oldheaders) 清除缓存目录下的软件包及旧的headers</p> 
<p>2 yum显示信息</p> 
<p>yum list # yum list显示所有已经安装和可以安装的程序包<br> 这些列表里面的包的来源就是/etc/yum.repo.d。 base docker-ce-stable epel/x86_64/metalink epel extras rpmforge updates<br> yum list rpm 显示安装包信息rpm<br> 显示installed ，这里是包名，版本和仓库名</p> 
<p>yum list httpd<br> 这里是可获得包，说明还没有安装。</p> 
<p>yum info rpm 显示安装包rpm的详细信息</p> 
<p>3 yum安装</p> 
<p>yum -y install httpd<br> 如果你不加-y他会问你要不要安装。如果你想自己来控制有些包是否安装，这里不要加-y，如果你想自动安装，不进行交互，这里加入-y。这个就是yum 的安装了，非常简单。<br> 安装完之后查询一下</p> 
<p>yum list httpd，Installed 说明已经安装好了</p> 
<p>4 yum删除</p> 
<p>yum remove httpd 删除程序包httpd ，也就是卸载。<br> yum deplist rpm 查看程序rpm依赖情况</p> 
<p>5 yum包的升级</p> 
<p>yum check-update 检查可更新的程序<br> yum update 全部更新，升级所有包，以及升级软件和系统内核，这就是一键升级。他可以更新CentOS的内核到最新版本。<br> yum update package1 更新指定程序包package1，<br> yum upgrade package1 升级指定程序包package1</p> 
<p>6 yum 解决依赖的原理</p> 
<p>YUM 解决依赖关系问题，自动下载软件包。yum是基于C/S架构。C指的是客户端， S指的是服务器，想ftp，http,file、关于yum为什么能解决依赖关系：所有的Yum 源里面都有repodata，它里面是有XML格式文件，里面有说明需要什么包。例如上堂课实验的：mysql-server rpm 需要：perl-DBI ，python，或者是php等等包。</p> 
<p>7 yum 组的管理</p> 
<p>yum进行安装的时候可以一组一组的进行安装，先来看看有那些组yumgrouplist。可用的组有这么多。<br> Available Environment Groups:首先是可用的环境分组。<br> Compute Node 计算节点<br> Infrastructure Server 基础设施服务器<br> File and Print Server 文件和打印服务<br> Cinnamon Desktop Cinnamon桌面<br> Installed Groups:已安装的组，开发工具</p> 
<p>Development Tools</p> 
<p>Available Groups:可用的组。</p> 
<p>如果我们想以组的方式来安装，加入我想安装安全工具：</p> 
<p>输入：yumgroupinstall “Security Tools”<br> 看到这里询问是否要安装，当然是N不安装了。如果想直接安装，不询问的话，这里也在后面加上选项 –y。<br> yum groupremove group1 删除程序组group1</p> 
<p>参考</p> 
<p>1 安装<br> yum install 全部安装<br> yum install package1 安装指定的安装包package1<br> yum groupinsall group1 安装程序组group1</p> 
<p>2 更新和升级<br> yum update 全部更新<br> yum update package1 更新指定程序包package1<br> yum check-update 检查可更新的程序<br> yum upgrade package1 升级指定程序包package1<br> yum groupupdate group1 升级程序组group1</p> 
<p>3 查找和显示<br> yum info package1 显示安装包信息package1<br> yum list 显示所有已经安装和可以安装的程序包<br> yum list package1 显示指定程序包安装情况package1<br> yum groupinfo group1 显示程序组group1信息yum search string 根据关键字string查找安装包</p> 
<p>4 删除程序<br> yum remove | erase package1 删除程序包package1<br> yum groupremove group1 删除程序组group1<br> yum deplist package1 查看程序package1依赖情况</p> 
<p>5 清除缓存<br> yum clean packages 清除缓存目录下的软件包<br> yum clean headers 清除缓存目录下的 headers<br> yum clean oldheaders 清除缓存目录下旧的 headers<br> yum clean, yum clean all (= yum clean packages; yum clean oldheaders) 清除缓存目录下的软件包及旧的header</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6b4ce0e009b705d3f545cdb89141f654/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">内容分发网络CDN</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b870c44ed84cb1ed1f03963b7aebb9d8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">手工模式链路聚合 &#43; LACP模式链路聚合配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VLAN与二层交换机 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VLAN与二层交换机" />
<meta property="og:description" content="目录
一：VLAN
1.VLAN的概念及优势
2.VLAN的种类
3.VLAN的范围
4.VLAN的配置
5.VLAN跨交换机通信过程
6.IEEE 802.1q帧格式
7. IEEE 802.1q工作原理
二：华为交换机
1.access的配置
2.TRUNK 作用
3.TRUNK的配置
一：VLAN 1.VLAN的概念及优势 VLAN（Virtual Local Area Network）即虚拟局域网，是将一个物理的LAN在逻辑上划分成多个广播域的通信技术。VLAN分割广播域：物理分割和逻辑分割。VLAN的优势：控制广播，增强网络安全性，简化网络管理。只能在交换机使用。
2.VLAN的种类 静态VLAN：基于端口划分静态VLAN，在实际工作中应用最多。动态VLAN：基于MAC地址划分动态VLAN。 3.VLAN的范围 VLAN的ID范围：0-4095 一共4096个VLAN ID，其中0和4095为系统保留，可以的ID范围：1-4094,1为默认VLAN ID。
4.VLAN的配置 添加vlan
[SW1]vlan 10
[SW1-vlan10] q
批量添加vlan
[SW1]vlan batch 20 30 40
删除：[SW1] undo vlan 10
5.VLAN跨交换机通信过程 交换机给往其他交换机的数据帧打上VLAN标识
在以太网上实现中继，由两种封装类型：ISL（Cisco私有标准），IEEE 802.1q。
6.IEEE 802.1q帧格式 IEEE 802.1q的帧格式（4字节）：
2字节标识协议标识符（TPID）包含一个0x8100 的固定值，这个特定的TPID值指明了该帧带有IEEE 802.1q的标识信息。
2字节标识控制信息（TCI）包含了以下3个元素：
3位的用户优先级（Priority）：IEEE 802.1q不使用该字段。
1位的规范格式标识符（CFI）：CFI 常用以太网和令牌环网。在以太网中，CFI 的值通常设置为 0.
12位VLAN标识符（VLAN ID）：该字段唯一标识了帧所属的VLAN。VLAN ID 可以唯一的标识4096个VLAN,但VLAN 0和 VLAN 4095是被保留的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f2fbe83687ad550bb6b604b756319e07/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-19T19:16:24+08:00" />
<meta property="article:modified_time" content="2023-03-19T19:16:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VLAN与二层交换机</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%EF%BC%9AVLAN-toc" style="margin-left:0px;"><a href="#%E4%B8%80%EF%BC%9AVLAN" rel="nofollow">一：VLAN</a></p> 
<p id="1.VLAN%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BC%98%E5%8A%BF-toc" style="margin-left:40px;"><a href="#1.VLAN%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BC%98%E5%8A%BF" rel="nofollow">1.VLAN的概念及优势</a></p> 
<p id="%C2%A02.VLAN%E7%9A%84%E7%A7%8D%E7%B1%BB-toc" style="margin-left:40px;"><a href="#%C2%A02.VLAN%E7%9A%84%E7%A7%8D%E7%B1%BB" rel="nofollow"> 2.VLAN的种类</a></p> 
<p id="3.VLAN%E7%9A%84%E8%8C%83%E5%9B%B4-toc" style="margin-left:40px;"><a href="#3.VLAN%E7%9A%84%E8%8C%83%E5%9B%B4" rel="nofollow">3.VLAN的范围</a></p> 
<p id="%C2%A04.VLAN%E7%9A%84%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%C2%A04.VLAN%E7%9A%84%E9%85%8D%E7%BD%AE" rel="nofollow">4.VLAN的配置</a></p> 
<p id="5.VLAN%E8%B7%A8%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B-toc" style="margin-left:40px;"><a href="#5.VLAN%E8%B7%A8%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B" rel="nofollow">5.VLAN跨交换机通信过程</a></p> 
<p id="6.IEEE%20802.1q%E5%B8%A7%E6%A0%BC%E5%BC%8F-toc" style="margin-left:40px;"><a href="#6.IEEE%20802.1q%E5%B8%A7%E6%A0%BC%E5%BC%8F" rel="nofollow">6.IEEE 802.1q帧格式</a></p> 
<p id="7.%20IEEE%C2%A0%20802.1q%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#7.%20IEEE%C2%A0%20802.1q%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">7. IEEE  802.1q工作原理</a></p> 
<p id="%E4%BA%8C%EF%BC%9A%E5%8D%8E%E4%B8%BA%E4%BA%A4%E6%8D%A2%E6%9C%BA-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%EF%BC%9A%E5%8D%8E%E4%B8%BA%E4%BA%A4%E6%8D%A2%E6%9C%BA" rel="nofollow">二：华为交换机</a></p> 
<p id="1.access%E7%9A%84%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#1.access%E7%9A%84%E9%85%8D%E7%BD%AE" rel="nofollow">1.access的配置</a></p> 
<p id="2.TRUNK%20%E4%BD%9C%E7%94%A8-toc" style="margin-left:40px;"><a href="#2.TRUNK%20%E4%BD%9C%E7%94%A8" rel="nofollow">2.TRUNK 作用</a></p> 
<p id="3.TRUNK%E7%9A%84%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#3.TRUNK%E7%9A%84%E9%85%8D%E7%BD%AE" rel="nofollow">3.TRUNK的配置</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2>一：VLAN</h2> 
<h3 id="1.VLAN%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%8A%E4%BC%98%E5%8A%BF">1.VLAN的概念及优势</h3> 
<p>VLAN（Virtual Local Area Network）即虚拟局域网，是将一个物理的LAN在逻辑上划分成多个广播域的通信技术。VLAN分割广播域：物理分割和逻辑分割。VLAN的优势：控制广播，增强网络安全性，简化网络管理。只能在交换机使用。</p> 
<p><img alt="" height="406" src="https://images2.imgbox.com/a6/60/k1KMvxS0_o.png" width="810"></p> 
<p><img alt="" height="372" src="https://images2.imgbox.com/9f/7e/FECZA55c_o.png" width="841"></p> 
<h3 id="%C2%A02.VLAN%E7%9A%84%E7%A7%8D%E7%B1%BB"> 2.VLAN的种类</h3> 
<p> 静态VLAN：基于端口划分静态VLAN，在实际工作中应用最多。动态VLAN：基于MAC地址划分动态VLAN。 </p> 
<h3 id="3.VLAN%E7%9A%84%E8%8C%83%E5%9B%B4">3.VLAN的范围</h3> 
<p><u><span style="color:#fe2c24;">VLAN的ID范围：0-4095    一共4096个VLAN ID，其中0和4095为系统保留，可以的ID范围：1-4094,1为默认VLAN ID。</span></u></p> 
<p><img alt="" height="574" src="https://images2.imgbox.com/b5/2b/2WHwuwZj_o.png" width="1101"></p> 
<h3 id="%C2%A04.VLAN%E7%9A%84%E9%85%8D%E7%BD%AE"> 4.VLAN的配置</h3> 
<p>添加vlan</p> 
<p>[SW1]vlan 10</p> 
<p>[SW1-vlan10] q</p> 
<p>批量添加vlan</p> 
<p>[SW1]vlan batch 20  30  40</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/c2/a0/LBo1a5Wu_o.png" width="1107"></p> 
<p>删除：[SW1] undo vlan 10</p> 
<p><img alt="" height="807" src="https://images2.imgbox.com/96/05/dxRO4Vdt_o.png" width="1001"></p> 
<h3 id="5.VLAN%E8%B7%A8%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B">5.VLAN跨交换机通信过程</h3> 
<p>交换机给往其他交换机的数据帧打上VLAN标识</p> 
<p><img alt="" height="419" src="https://images2.imgbox.com/f9/ee/rI0E7zHN_o.png" width="952"></p> 
<p> </p> 
<p>在以太网上实现中继，由两种封装类型：ISL（Cisco私有标准），IEEE 802.1q。</p> 
<h3 id="6.IEEE%20802.1q%E5%B8%A7%E6%A0%BC%E5%BC%8F">6.IEEE 802.1q帧格式</h3> 
<p><img alt="" height="327" src="https://images2.imgbox.com/02/4e/KRCjBK0M_o.png" width="788"></p> 
<p>IEEE 802.1q的帧格式（4字节）：</p> 
<p>2字节标识协议标识符（TPID）包含一个0x8100 的固定值，这个特定的TPID值指明了该帧带有IEEE 802.1q的标识信息。</p> 
<p>2字节标识控制信息（TCI）包含了以下3个元素：</p> 
<p>3位的用户优先级（Priority）：IEEE 802.1q不使用该字段。</p> 
<p>1位的规范格式标识符（CFI）：CFI 常用以太网和令牌环网。在以太网中，CFI 的值通常设置为 0.</p> 
<p>12位VLAN标识符（VLAN ID）：该字段唯一标识了帧所属的VLAN。VLAN ID 可以唯一的标识4096个VLAN,但VLAN 0和 VLAN 4095是被保留的。</p> 
<h3 id="7.%20IEEE%C2%A0%20802.1q%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">7. IEEE  802.1q工作原理</h3> 
<p><img alt="" height="180" src="https://images2.imgbox.com/8f/79/HoaVYmfi_o.png" width="755"></p> 
<p>VLAN 20的主机将数据转发出，交换机链路接口access接收到数据，交换机将VLAN标记封装在数据上。在路由器发出的节点trunk模式发出，下一个路由器接收节点查看该VLAN是否接收，在规定范围内接收数据，将数据传输给VLAN 20的主机。若没在规定范围内，将丢弃该数据。</p> 
<h2 id="%E4%BA%8C%EF%BC%9A%E5%8D%8E%E4%B8%BA%E4%BA%A4%E6%8D%A2%E6%9C%BA">二：华为交换机</h2> 
<p>华为交换机链路类型：access      trunk       hybrid(华为/华3默认的链路接口）</p> 
<h3 id="1.access%E7%9A%84%E9%85%8D%E7%BD%AE">1.access的配置</h3> 
<p>将端口加入VLAN， Access口只能属于1个VLAN，般用于连接计算机端口。<br> [Huaweilint e0/o/o(进入接口模式)</p> 
<p>[Huawei-Ethernet0/0/0]port link-type access        定义二层端口为access模式</p> 
<p>[Huawei-Ethernet0/0/0] port default vlan 10     将端口加入到vlan中<br> [Huawei-Ethernet0/0/0]  undo shutdown   将端口从vlan删除<br> [Huawei-Ethernet0/0/0]undo port default vlan</p> 
<p>[Huawei-Ethernet0/0/0]port link-type hybrid    将端口类型恢复成默认的hybrid模式<br> [Huawei-Etherneto/o/o]diis this   查看当前端口模式、状态</p> 
<p><img alt="" height="918" src="https://images2.imgbox.com/55/ac/YYOsQhTz_o.png" width="954"></p> 
<h3 id="2.TRUNK%20%E4%BD%9C%E7%94%A8">2.TRUNK 作用</h3> 
<p>为每一个VLAN提供一条链路，交换网络中的链路类型。</p> 
<p><img alt="" height="286" src="https://images2.imgbox.com/db/01/vbJeyTtx_o.png" width="723"></p> 
<p>接入链路（access）：交换机链接计算机/路由器的端口</p> 
<p>中继链路(trunk)：交换机连接交换机的端口</p> 
<h3 id="3.TRUNK%E7%9A%84%E9%85%8D%E7%BD%AE">3.TRUNK的配置</h3> 
<p>Trunk类型端口:可以允许多个VLAN通过，可以接收和发送多个VLAN 报文，一般用于交换机与交换机相关的接口.</p> 
<p>[Huawei]int e0/0/0<br> [Huawei-Etherneto/o/o]port link-type trunk        (定义二层端口为trunk模式) </p> 
<p>[Huawei-Ethernet0/0/0]port trunk allow-pass vlan 10 20 30           (配置Trunk端口允许通过的vlan)<br> [Huawei-Ethernet0/0/0]undo shutdown   禁止Trunk传送某个VLAN的数据，删除这个VLAN<br> [Huawei-Ethernet0/0/0]undo port trunk allow-pass lan 10</p> 
<p><img alt="" height="211" src="https://images2.imgbox.com/fa/6c/bDT8BoIf_o.png" width="755"></p> 
<p> </p> 
<p>总结：VLAN的优势：控制广播，增强网络安全性，简化网络管理。只能在交换机使用。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ec15e72e2ca72a95df76feefd7e06b78/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android系统启动流程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0b8372b195df606b04f9da631c78ba1b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">华为OD机试考押题卷，题解用C语言完成，收藏必看系列</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
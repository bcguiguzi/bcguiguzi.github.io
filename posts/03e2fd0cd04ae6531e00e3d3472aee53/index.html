<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用BurpSuite进行APP抓包如何绕过代理检测 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用BurpSuite进行APP抓包如何绕过代理检测" />
<meta property="og:description" content=" 文章目录 使用BurpSuite进行APP抓包如何绕过代理检测场景描述如果绕过呢？总结与思考 使用BurpSuite进行APP抓包如何绕过代理检测 场景描述 最近接手到一个项目，对某客户的iosAPP进行渗透测试，虽然说客户发过来的是测试包，但是开了代理检测，我是怎么知道的呢，当然是先猜到了，后面尝试验证了的。因为开了代理检测，所以我在WIFI属性处设置代理就被检测到了。一设置代理打开APP就提示网络，点击前端功能点皆提示网络错误。代理关闭，APP就可以正常使用。
关于APP抓不到包可能是以下问题：
SSL证书没配置好客户端开启了代理检测客户端使用了双向证书校验客户端内嵌了自己的VPN 看到自己遇到的情况，我就猜测可能是前端做了代理检测了。
如果绕过呢？ 有没有思考过一个问题？
客户端禁止你使用代理，会不会禁止你使用VPN呢？说到代理，作为一个合格的安全人员你应该会联想到中间人流量劫持、中间人攻击。那么VPN也会有这些吗，有时会有但是安全性相对较高。VPN可以走全局的流量，接入远程内网。一个APP你禁止我的流量走代理，但是你总不能不让我用VPN吧。
于是便有了以下的操作。
BurpSuite开启8080端口http代理，绑定地址为0.0.0.0或者局域网ip。在苹果手机上安装小飞机（SS），选择协议为http，连接信息填写BurpSuite的。
开启小飞机走全局流量到BurpSuite，然后APP就可以抓包了。 附加：在这样的流量转发的情况下，某些应用是使用异常的，例如QQ。因为http只能走某些协议的流量，另外的走不了。
总结与思考 SSL证书没配置好
解决：重新配置证书。客户端开启了代理检测
解决：走“正规”的流量转发，走全局流量转发。ios可以用小飞机，ios的小飞机支持多种协议协议类型。Android的小飞机貌似只能他自己的协议吧，暂时还没又找到好的软件。PC端当然可以用Proxifier了，具体怎么操作百度去吧，这个神器在内网渗透也可能会用到。除了流量转发也可以用Hook的方式，Hook怎么理解？可以简单的理解为对代码执行的修改与拦截。客户端使用了双向证书校验
解决：安卓上是有前人造好的轮子（插件和工具）可以解决双向证书校验的问题，ios暂时不了解，有时间再查查资料。大佬操作，逆向拿出证书，一招通杀所有。客户端内嵌了自己的VPN
解决：这个或许只用逆向了吧，改代码重新打包，其他的我暂时也不知道了。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/03e2fd0cd04ae6531e00e3d3472aee53/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-15T00:26:18+08:00" />
<meta property="article:modified_time" content="2020-12-15T00:26:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用BurpSuite进行APP抓包如何绕过代理检测</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#BurpSuiteAPP_1" rel="nofollow">使用BurpSuite进行APP抓包如何绕过代理检测</a></li><li><ul><li><a href="#_2" rel="nofollow">场景描述</a></li><li><a href="#_12" rel="nofollow">如果绕过呢？</a></li><li><a href="#_22" rel="nofollow">总结与思考</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="BurpSuiteAPP_1"></a>使用BurpSuite进行APP抓包如何绕过代理检测</h2> 
<h3><a id="_2"></a>场景描述</h3> 
<p>最近接手到一个项目，对某客户的iosAPP进行渗透测试，虽然说客户发过来的是测试包，但是开了代理检测，我是怎么知道的呢，当然是先猜到了，后面尝试验证了的。因为开了代理检测，所以我在WIFI属性处设置代理就被检测到了。一设置代理打开APP就提示网络，点击前端功能点皆提示网络错误。代理关闭，APP就可以正常使用。<br> 关于APP抓不到包可能是以下问题：</p> 
<ol><li>SSL证书没配置好</li><li>客户端开启了代理检测</li><li>客户端使用了双向证书校验</li><li>客户端内嵌了自己的VPN</li></ol> 
<p>看到自己遇到的情况，我就猜测可能是前端做了代理检测了。</p> 
<h3><a id="_12"></a>如果绕过呢？</h3> 
<p>有没有思考过一个问题？<br> 客户端禁止你使用代理，会不会禁止你使用VPN呢？说到代理，作为一个合格的安全人员你应该会联想到中间人流量劫持、中间人攻击。那么VPN也会有这些吗，有时会有但是安全性相对较高。VPN可以走全局的流量，接入远程内网。一个APP你禁止我的流量走代理，但是你总不能不让我用VPN吧。<br> 于是便有了以下的操作。</p> 
<ol><li>BurpSuite开启8080端口http代理，绑定地址为0.0.0.0或者局域网ip。</li><li>在苹果手机上安装小飞机（SS），选择协议为http，连接信息填写BurpSuite的。<br> <img src="https://images2.imgbox.com/50/60/KX48V3dW_o.png" alt="fly -w50"></li><li>开启小飞机走全局流量到BurpSuite，然后APP就可以抓包了。</li></ol> 
<p>附加：在这样的流量转发的情况下，某些应用是使用异常的，例如QQ。因为http只能走某些协议的流量，另外的走不了。</p> 
<h3><a id="_22"></a>总结与思考</h3> 
<ol><li>SSL证书没配置好<br> 解决：重新配置证书。</li><li>客户端开启了代理检测<br> 解决：走“正规”的流量转发，走全局流量转发。ios可以用小飞机，ios的小飞机支持多种协议协议类型。Android的小飞机貌似只能他自己的协议吧，暂时还没又找到好的软件。PC端当然可以用Proxifier了，具体怎么操作百度去吧，这个神器在内网渗透也可能会用到。除了流量转发也可以用Hook的方式，Hook怎么理解？可以简单的理解为对代码执行的修改与拦截。</li><li>客户端使用了双向证书校验<br> 解决：安卓上是有前人造好的轮子（插件和工具）可以解决双向证书校验的问题，ios暂时不了解，有时间再查查资料。大佬操作，逆向拿出证书，一招通杀所有。</li><li>客户端内嵌了自己的VPN<br> 解决：这个或许只用逆向了吧，改代码重新打包，其他的我暂时也不知道了。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/71cbe14637404aaf8291a1ea95c49415/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Flutter之自定义顶部Tab——Flutter基础系列</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0919770d7e853169264e65f425b76563/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">web前端行业调研报告_独家 | 2017年环保行业薪酬调研报告</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
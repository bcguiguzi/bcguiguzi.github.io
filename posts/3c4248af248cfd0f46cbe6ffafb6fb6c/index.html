<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>android自定义Toast——让你应用别具一格 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="android自定义Toast——让你应用别具一格" />
<meta property="og:description" content="简化Toast 简化为两参简化为一参 自定义toast 改变字的大小和背景样式自定义布局增加不同颜色标识不同的toast 总结 实际上，在github上层看到这种toast，但我的感觉是：用起来太麻烦了！我需要的要求是越简单越好！
简化Toast 原toast形式： Toast.makeText(this,”t”,Toast.LENGTH_LONG).show();或Toast.makeText(this,”t”,Toast.LENGTH_SHORT).show(); - 简化后： ToastUtil.shorts(“t”); ToastUtil.longs(“t”); 这样才方便简单。 1.简化为两参 这一步很简单，只需要这样：
public class ToastUtil{ public static void shorts(Context context,String msg){ Toast.makeText(context,msg,Toast.LENGTH_SHORT).show(); } public static void longs(Context context,String msg){ Toast.makeText(context,msg,Toast.LENGTH_LONG).show(); } } 2.简化为一参 自定义Application 这个需要自定义application，假设为MyApp: manifest中设置： &lt;application android:name=&#34;.MyApp&#34; &gt; &lt;/application&gt; 在项目根目录创建类：
public class MyApp extends Application{ private static MyApp mApp; @Override public void onCreate() { super.onCreate(); mApp = this; } public static void getApp(){ return mApp; } } 更改ToastUtil public class ToastUtil{ public static void shorts(String msg){ Toast." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3c4248af248cfd0f46cbe6ffafb6fb6c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-11T11:32:41+08:00" />
<meta property="article:modified_time" content="2018-01-11T11:32:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">android自定义Toast——让你应用别具一格</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <div class="toc"> 
  <ul><li> 
    <ul><li> 
      <ul><li><a href="#%E7%AE%80%E5%8C%96toast" rel="nofollow">简化Toast</a> 
        <ul><li><a href="#1%E7%AE%80%E5%8C%96%E4%B8%BA%E4%B8%A4%E5%8F%82" rel="nofollow">简化为两参</a></li><li><a href="#2%E7%AE%80%E5%8C%96%E4%B8%BA%E4%B8%80%E5%8F%82" rel="nofollow">简化为一参</a></li></ul> </li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89toast" rel="nofollow">自定义toast</a> 
        <ul><li><a href="#1%E6%94%B9%E5%8F%98%E5%AD%97%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%92%8C%E8%83%8C%E6%99%AF%E6%A0%B7%E5%BC%8F" rel="nofollow">改变字的大小和背景样式</a></li><li><a href="#2%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B8%83%E5%B1%80" rel="nofollow">自定义布局</a></li><li><a href="#3%E5%A2%9E%E5%8A%A0%E4%B8%8D%E5%90%8C%E9%A2%9C%E8%89%B2%E6%A0%87%E8%AF%86%E4%B8%8D%E5%90%8C%E7%9A%84toast" rel="nofollow">增加不同颜色标识不同的toast</a></li></ul> </li><li><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></li></ul> </li></ul> </li></ul> 
 </div> 
</div> 
<p></p> 
<p>实际上，在github上层看到这种toast，但我的感觉是：用起来太麻烦了！我需要的要求是越简单越好！</p> 
<h4 id="简化toast">简化Toast</h4> 
<ul><li>原toast形式： <br> Toast.makeText(this,”t”,Toast.LENGTH_LONG).show();或Toast.makeText(this,”t”,Toast.LENGTH_SHORT).show();</li></ul> 
<p> - 简化后： ToastUtil.shorts(“t”); ToastUtil.longs(“t”); 这样才方便简单。 </p> 
<h5 id="1简化为两参">1.简化为两参</h5> 
<p>这一步很简单，只需要这样：</p> 
<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> ToastUtil{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shorts</span>(Context context,String msg){
        Toast.makeText(context,msg,Toast.LENGTH_SHORT).show();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">longs</span>(Context context,String msg){
        Toast.makeText(context,msg,Toast.LENGTH_LONG).show();
    }
}</code></pre> 
<h5 id="2简化为一参">2.简化为一参</h5> 
<ul><li>自定义Application <br> 这个需要自定义application，假设为MyApp: <br> manifest中设置：</li></ul> 
<pre class="prettyprint"><code class="language-xml hljs "><span class="hljs-tag">&lt;<span class="hljs-title">application
</span>    <span class="hljs-attribute">android:name</span>=<span class="hljs-value">".MyApp"</span>
&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">application</span>&gt;</span></code></pre> 
<p>在项目根目录创建类：</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span>{<!-- --></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> MyApp mApp;
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>() {
        <span class="hljs-keyword">super</span>.onCreate();
        mApp = <span class="hljs-keyword">this</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getApp</span>(){
        <span class="hljs-keyword">return</span> mApp;
    }
}</code></pre> 
<ul><li><p>更改ToastUtil <br> public class ToastUtil{ <br> public static void shorts(String msg){ <br> Toast.makeText(MyApp.getApp(),msg,Toast.LENGTH_SHORT).show(); <br> }</p> <p>public static void longs(String msg){ <br> Toast.makeText(MyApp.getApp(),msg,Toast.LENGTH_LONG).show(); <br> } <br> }</p></li></ul> 
<h4 id="自定义toast">自定义toast</h4> 
<p>然后你会发现，系统提供的toast又没特色，字又小，不使用图标确实又不好看，用户很可能在还没有关注到的时候，信息已经消失了，这个时候我们就要自定义toast.</p> 
<h5 id="1改变字的大小和背景样式">1.改变字的大小和背景样式</h5> 
<p>修改前： <br> <img src="https://images2.imgbox.com/53/d9/vSm5tx9g_o.png" alt="这里写图片描述" title=""> <br> 修改后： <br> <img src="https://images2.imgbox.com/b5/19/14nlDAv8_o.png" alt="这里写图片描述" title=""></p> 
<h5 id="2自定义布局">2.自定义布局</h5> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">LinearLayout</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attribute">xmlns:app</span>=<span class="hljs-value">"http://schemas.android.com/apk/res-auto"</span>
    <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/linear_outter"</span>
    <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
    <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
    <span class="hljs-attribute">android:minHeight</span>=<span class="hljs-value">"18dp"</span>
    <span class="hljs-attribute">android:background</span>=<span class="hljs-value">"@drawable/bg_toast"</span>
    <span class="hljs-attribute">android:padding</span>=<span class="hljs-value">"10dp"</span>
    <span class="hljs-attribute">android:orientation</span>=<span class="hljs-value">"vertical"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">TextView
</span>        <span class="hljs-attribute">android:id</span>=<span class="hljs-value">"@+id/txt_toast"</span>
        <span class="hljs-attribute">android:layout_width</span>=<span class="hljs-value">"wrap_content"</span>
        <span class="hljs-attribute">android:layout_height</span>=<span class="hljs-value">"wrap_content"</span>
        <span class="hljs-attribute">android:textSize</span>=<span class="hljs-value">"18sp"</span>
        <span class="hljs-attribute">android:textColor</span>=<span class="hljs-value">"@color/white"</span>
        <span class="hljs-attribute">android:gravity</span>=<span class="hljs-value">"center_vertical"</span>
        /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">LinearLayout</span>&gt;</span></code></pre> 
<p>背景：</p> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">shape</span> <span class="hljs-attribute">xmlns:android</span>=<span class="hljs-value">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attribute">android:shape</span>=<span class="hljs-value">"rectangle"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">corners</span> <span class="hljs-attribute">android:radius</span>=<span class="hljs-value">"30dp"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">solid</span> <span class="hljs-attribute">android:color</span>=<span class="hljs-value">"#88000000"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">shape</span>&gt;</span></code></pre> 
<p>自定义类，用于修改toast显示效果</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomToast</span>{<!-- --></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">longs</span>(String message){
        <span class="hljs-comment">//加载Toast布局</span>
        View toastRoot = LayoutInflater.from(AppUtils.getSuperContext()).inflate(R.layout.view_toast, <span class="hljs-keyword">null</span>);
        <span class="hljs-comment">//初始化布局控件</span>
        mTextView = (TextView) toastRoot.findViewById(R.id.txt_toast);
        <span class="hljs-comment">//为控件设置属性</span>
        mTextView.setText(message);
        <span class="hljs-comment">//Toast的初始化</span>
        Toast toastStart = <span class="hljs-keyword">new</span> Toast(AppUtils.getSuperContext());
        <span class="hljs-comment">//获取屏幕高度</span>
        WindowManager wm = (WindowManager) AppUtils.getSuperContext().getSystemService(Context.WINDOW_SERVICE);
        <span class="hljs-keyword">int</span> height = wm.getDefaultDisplay().getHeight();
        <span class="hljs-comment">//Toast的Y坐标是屏幕高度的2/3，不会出现不适配的问题</span>
        toastStart.setGravity(Gravity.TOP, <span class="hljs-number">0</span>, height / <span class="hljs-number">3</span>*<span class="hljs-number">2</span>);
        toastStart.setDuration(Toast.LENGTH_LONG);
        toastStart.setView(toastRoot);
        toastStart.show();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shorts</span>(String message){
        <span class="hljs-comment">//加载Toast布局</span>
        View toastRoot = LayoutInflater.from(AppUtils.getSuperContext()).inflate(R.layout.view_toast, <span class="hljs-keyword">null</span>);
        <span class="hljs-comment">//初始化布局控件</span>
        mTextView = (TextView) toastRoot.findViewById(R.id.txt_toast);
        <span class="hljs-comment">//为控件设置属性</span>
        mTextView.setText(message);
        <span class="hljs-comment">//Toast的初始化</span>
        Toast toastStart = <span class="hljs-keyword">new</span> Toast(AppUtils.getSuperContext());
        <span class="hljs-comment">//获取屏幕高度</span>
        WindowManager wm = (WindowManager) AppUtils.getSuperContext().getSystemService(Context.WINDOW_SERVICE);
        <span class="hljs-keyword">int</span> height = wm.getDefaultDisplay().getHeight();
        <span class="hljs-comment">//Toast的Y坐标是屏幕高度的2/3，不会出现不适配的问题,这个比例可根据喜好更改</span>
        toastStart.setGravity(Gravity.TOP, <span class="hljs-number">0</span>, height / <span class="hljs-number">3</span>*<span class="hljs-number">2</span>);
        toastStart.setDuration(Toast.LENGTH_SHORT);
        toastStart.setView(toastRoot);
        toastStart.show();
    }
}</code></pre> 
<p>好吧，这段代码冗余的太多了，我们合并一下：</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomToast</span>{<!-- --></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">longs</span>(String message){
        message(<span class="hljs-keyword">true</span>,message);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shorts</span>(String message){
        message(<span class="hljs-keyword">false</span>,message);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">message</span>(<span class="hljs-keyword">boolean</span> isLong,String message){
        <span class="hljs-comment">//加载Toast布局</span>
        View toastRoot = LayoutInflater.from(AppUtils.getSuperContext()).inflate(R.layout.view_toast, <span class="hljs-keyword">null</span>);
        <span class="hljs-comment">//初始化布局控件</span>
        mTextView = (TextView) toastRoot.findViewById(R.id.txt_toast);
        <span class="hljs-comment">//为控件设置属性</span>
        mTextView.setText(message);
        <span class="hljs-comment">//Toast的初始化</span>
        Toast toastStart = <span class="hljs-keyword">new</span> Toast(AppUtils.getSuperContext());
        <span class="hljs-comment">//获取屏幕高度</span>
        WindowManager wm = (WindowManager) AppUtils.getSuperContext().getSystemService(Context.WINDOW_SERVICE);
        <span class="hljs-keyword">int</span> height = wm.getDefaultDisplay().getHeight();
        <span class="hljs-comment">//Toast的Y坐标是屏幕高度的2/3，不会出现不适配的问题</span>
        toastStart.setGravity(Gravity.TOP, <span class="hljs-number">0</span>, height / <span class="hljs-number">3</span>*<span class="hljs-number">2</span>);
        toastStart.setDuration(isLong?Toast.LENGTH_LONG:Toast.LENGTH_SHORT);
        toastStart.setView(toastRoot);
        toastStart.show();
    }
}</code></pre> 
<p>修改一下ToastUtil的代码：</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToastUtil</span> {<!-- --></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shorts</span>(String msg){
            CustomToast.shorts(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">longs</span>(String msg){
        CustomToast.longs(msg);
    }
 }</code></pre> 
<p>这样就可以了，原有外部调用ToastUtil的代码可以不用变，这是我使用这个ToastUtil中间类而非直接使用CustomToast的原因，以后修改CustomToast可以不用影响主程序代码。</p> 
<h5 id="3增加不同颜色标识不同的toast">3.增加不同颜色标识不同的toast</h5> 
<p><img src="https://images2.imgbox.com/9e/1e/gD2e9sht_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/28/62/MclqgjLf_o.png" alt="这里写图片描述" title=""></p> 
<p><img src="https://images2.imgbox.com/66/66/yQ0tKjgQ_o.png" alt="这里写图片描述" title=""></p> 
<p>可以看到，这些和普通toast的区别是背景变了，左侧的icon也有变化，图标大家可以在<a href="http://www.iconfont.cn/" rel="nofollow">iconfont</a>自己下载,这里写一下三个颜色供读者参考：红-E75427 橙-FF8800 绿-1DB34A <br> 贴一下新的CustomToast和ToastUtil: <br> CustomToast.java</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomToast</span> {<!-- --></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> DrawTextView mTextView;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">longs</span>(String message) {
        message(<span class="hljs-keyword">true</span>,message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shorts</span>(String message) {
        message(<span class="hljs-keyword">false</span>,message);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">message</span>(<span class="hljs-keyword">boolean</span> longMsg,String message){
        message(longMsg,MSG_NORMAL,message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">info</span>(String message) {
        message(<span class="hljs-keyword">true</span>,MSG_INFO,message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sucess</span>(String message) {
        message(<span class="hljs-keyword">true</span>,MSG_SUCESS,message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">error</span>(String message) {
        message(<span class="hljs-keyword">true</span>,MSG_ERROR,message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shortInfo</span>(String message){
        message(<span class="hljs-keyword">false</span>,MSG_INFO,message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shortSuccess</span>(String message){
        message(<span class="hljs-keyword">false</span>,MSG_SUCESS,message);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shortError</span>(String message){
        message(<span class="hljs-keyword">false</span>,MSG_ERROR,message);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MSG_NORMAL = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MSG_INFO = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MSG_SUCESS = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MSG_ERROR = <span class="hljs-number">4</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">message</span>(<span class="hljs-keyword">boolean</span> longMsg,<span class="hljs-keyword">int</span> mode,String message){
        <span class="hljs-comment">//加载Toast布局</span>
        View toastRoot = LayoutInflater.from(AppUtils.getSuperContext()).inflate(R.layout.view_toast, <span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">if</span>(mode!=MSG_NORMAL){
            toastRoot.setBackgroundResource(getBGIdByMode(mode));
        }
        <span class="hljs-comment">//初始化布局控件</span>
        mTextView = (DrawTextView) toastRoot.findViewById(R.id.txt_toast);
        <span class="hljs-comment">//为控件设置属性</span>
        mTextView.setText(message);
        <span class="hljs-keyword">if</span>(mode!=MSG_NORMAL){
            mTextView.setDraw(getIconByMode(mode));
        }
        <span class="hljs-comment">//Toast的初始化</span>
        Toast toastStart = <span class="hljs-keyword">new</span> Toast(AppUtils.getSuperContext());
        <span class="hljs-comment">//获取屏幕高度</span>
        WindowManager wm = (WindowManager) AppUtils.getSuperContext().getSystemService(Context.WINDOW_SERVICE);
        <span class="hljs-keyword">int</span> height = wm.getDefaultDisplay().getHeight();
        <span class="hljs-comment">//Toast的Y坐标是屏幕高度的2/3，不会出现不适配的问题</span>
        toastStart.setGravity(Gravity.TOP, <span class="hljs-number">0</span>, height / <span class="hljs-number">3</span>*<span class="hljs-number">2</span>);
        toastStart.setDuration(longMsg?Toast.LENGTH_LONG:Toast.LENGTH_SHORT);
        toastStart.setView(toastRoot);
        toastStart.show();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getIconByMode</span>(<span class="hljs-keyword">int</span> mode) {
        <span class="hljs-keyword">switch</span> (mode){
            <span class="hljs-keyword">case</span> MSG_INFO:
                <span class="hljs-keyword">return</span> R.drawable.ic_toast_info;
            <span class="hljs-keyword">case</span> MSG_SUCESS:
                <span class="hljs-keyword">return</span> R.drawable.ic_toast_pass;
            <span class="hljs-keyword">case</span> MSG_ERROR:
                <span class="hljs-keyword">return</span> R.drawable.ic_toast_fail;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getBGIdByMode</span>(<span class="hljs-keyword">int</span> mode) {
        <span class="hljs-keyword">switch</span> (mode){
            <span class="hljs-keyword">case</span> MSG_INFO:
                <span class="hljs-keyword">return</span> R.drawable.bg_toast_info;
            <span class="hljs-keyword">case</span> MSG_SUCESS:
                <span class="hljs-keyword">return</span> R.drawable.bg_toast_success;
            <span class="hljs-keyword">case</span> MSG_ERROR:
                <span class="hljs-keyword">return</span> R.drawable.bg_toast_error;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
}</code></pre> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToastUtil</span> {<!-- --></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shorts</span>(String msg){
            CustomToast.shorts(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">longs</span>(String msg){
        CustomToast.longs(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">info</span>(String msg){
        CustomToast.info(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">success</span>(String msg){
        CustomToast.sucess(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">error</span>(String msg){
        CustomToast.error(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sInfo</span>(String msg){
        CustomToast.shortInfo(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sSuccess</span>(String msg){
        CustomToast.shortSuccess(msg);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sError</span>(String msg){
        CustomToast.shortError(msg);
    }
}</code></pre> 
<p>使用：</p> 
<pre class="prettyprint"><code class="language-java hljs ">ToastUtil.shorts(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//普通短消息</span>
ToastUtil.longs(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//普通长消息</span>
ToastUtil.info(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//提醒短消息</span>
ToastUtil.sInfo(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//提醒长消息</span>
ToastUtil.success(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//操作成功短消息</span>
ToastUtil.sSucess(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//操作成功长消息</span>
ToastUtil.error(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//操作失败短消息</span>
ToastUtil.sError(<span class="hljs-string">"xx"</span>);<span class="hljs-comment">//操作失败长消息</span></code></pre> 
<p>是不是超超超简单呢？然而很好用！在一个应用内，我们的toast只需要一种风格足够。在开发中我往往纠结于为什么每次想着增加灵活度的时候，都意味着更复杂的代码。实际上，很多时候我们只需要一种风格，这种灵活度却增加了代码冗余。比如使用Glide进行图片显示，实际上我并不想每次都这样写：</p> 
<pre class="prettyprint"><code class="language-java hljs ">Glide.with(context)
                        .load(url)
                        .diskCacheStrategy(DiskCacheStrategy.SOURCE)
                        .placeholder(R.drawable.place)
                        .into(holder.img_product);</code></pre> 
<p>真的相当的麻烦，进行图片处理一个应用实际上只需要2-3种调用形式就足够了：</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PicUtil</span>{<!-- --></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> defaultDraw = R.drawable.place;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showCachePic</span>(String url,View target){
        Glide.with(MyApp.getApp())
                .load(url)
                .diskCacheStrategy(DiskCacheStrategy.SOURCE)
                .placeholder(defaultDraw )
                .into(target);
   }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">showPic</span>(String url,View target){
        Glide.with(MyApp.getApp())
                .load(url)
                .placeholder(defaultDraw)
                .into(target);
   }
}</code></pre> 
<p>于是，我下次可以直接写：PicUtil.showCachePic(url,target);</p> 
<h4 id="总结">总结</h4> 
<p>第三方框架为了灵活多样式往往会增加设计的复杂度，自己的应用可以不用这样灵活【应用有自己的风格，往往风格比较固定】，甚至在项目中牺牲一定的灵活性降低复杂度，更加简洁，方便修改（比如如果替换占位图）。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5b24683e5faaa710ce7dcbd80568eff1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">next.js、nuxt.js等服务端渲染框架构建的项目部署到服务器，并用PM2守护程序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/420041e2fbada74a2a5447e9048e2c39/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">&#39;numpy.int64&#39; object has no attribute &#39;startswith&#39;解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
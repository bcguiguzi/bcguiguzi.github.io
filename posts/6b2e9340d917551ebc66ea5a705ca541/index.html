<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JS中浅拷贝和深拷贝 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JS中浅拷贝和深拷贝" />
<meta property="og:description" content="本篇文章咱们一起来学习下JS中的浅拷贝和深拷贝，了解它们在内存上的区别，并掌握浅拷贝和深拷贝的常用实现方法。
引用赋值 在学习拷贝之前，咱们先来看一个常见的情景，如下图：
大家觉得这是深拷贝还是浅拷贝，或者是其他的？
答案是这种方式是引用赋值，它既不是深拷贝，也不是浅拷贝。在内存上的体现是person1和person2的内存指针都指向同一个堆内存对象，验证方式如下图：
从输出结果可以看到修改person1和surname属性，person2的surname属性也发生了更改。
浅拷贝 浅拷贝比较常见的实现方法是通过展开运算符（展开运算符被允许使用在对象字面量声明的时候），如下图：
在内存上的体现是person1和person2分别指向不同的堆内存对象，验证方式如下图：
从输出结果可以看到person2的surname属性并没有因为person1的surname属性发生改变而改变。
深拷贝 通常用于复杂类型的拷贝，同时咱们也可以用来反向证明一下展开运算符是浅拷贝，代码如下图：
从输出结果可以看到，1号小人的朋友从钱姓朋友变成了孙姓朋友，而2号小人的朋友姓氏也随之改变，这就说明person1和person2的friend指向的是同一个堆内存对象，而深拷贝需要将嵌套的每一层的对象都拷贝成全新的堆内存对象，常用的实现方法如下图：
通过JSON.stringify方法将person1对象转为JSON，再通过JSON.parse方法将JSON字符串转化为全新的JS对象，从而实现深拷贝，验证方式如下图：
从输出结果可以看到，1号小人的朋友从钱姓朋友变成了孙姓朋友，2号小人的朋友仍然是钱姓朋友。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6b2e9340d917551ebc66ea5a705ca541/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-17T22:06:12+08:00" />
<meta property="article:modified_time" content="2023-12-17T22:06:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JS中浅拷贝和深拷贝</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>  本篇文章咱们一起来学习下JS中的浅拷贝和深拷贝，了解它们在内存上的区别，并掌握浅拷贝和深拷贝的常用实现方法。</p> 
<h3>引用赋值</h3> 
<p>  在学习拷贝之前，咱们先来看一个常见的情景，如下图：</p> 
<p><img alt="" height="220" src="https://images2.imgbox.com/fa/13/yCeNoyUI_o.png" width="1184"></p> 
<p>  大家觉得这是深拷贝还是浅拷贝，或者是其他的？</p> 
<p>  答案是这种方式是引用赋值，它既不是深拷贝，也不是浅拷贝。在内存上的体现是person1和person2的内存指针都指向同一个堆内存对象，验证方式如下图：</p> 
<p><img alt="" height="333" src="https://images2.imgbox.com/f7/d2/Srf2bQJ8_o.png" width="1072"></p> 
<p>  从输出结果可以看到修改person1和surname属性，person2的surname属性也发生了更改。</p> 
<h3>浅拷贝</h3> 
<p>  浅拷贝比较常见的实现方法是通过展开运算符（展开运算符被允许使用在对象字面量声明的时候），如下图：</p> 
<p><img alt="" height="313" src="https://images2.imgbox.com/69/d3/GAX7RJWS_o.png" width="1200"></p> 
<p>  在内存上的体现是person1和person2分别指向不同的堆内存对象，验证方式如下图：</p> 
<p><img alt="" height="389" src="https://images2.imgbox.com/14/fb/Ds6CUI2P_o.png" width="1028"></p> 
<p>  从输出结果可以看到person2的surname属性并没有因为person1的surname属性发生改变而改变。</p> 
<h3>深拷贝</h3> 
<p>  通常用于复杂类型的拷贝，同时咱们也可以用来反向证明一下展开运算符是浅拷贝，代码如下图：</p> 
<p><img alt="" height="498" src="https://images2.imgbox.com/2c/2d/Qo6h6NAF_o.png" width="1200"></p> 
<p>  从输出结果可以看到，1号小人的朋友从钱姓朋友变成了孙姓朋友，而2号小人的朋友姓氏也随之改变，这就说明person1和person2的friend指向的是同一个堆内存对象，而深拷贝需要将嵌套的每一层的对象都拷贝成全新的堆内存对象，常用的实现方法如下图：</p> 
<p><img alt="" height="364" src="https://images2.imgbox.com/d2/ba/fK8UJLkI_o.png" width="1173"></p> 
<p>  通过JSON.stringify方法将person1对象转为JSON，再通过JSON.parse方法将JSON字符串转化为全新的JS对象，从而实现深拷贝，验证方式如下图：</p> 
<p><img alt="" height="461" src="https://images2.imgbox.com/fd/b4/N2RJE611_o.png" width="1130"></p> 
<p>  从输出结果可以看到，1号小人的朋友从钱姓朋友变成了孙姓朋友，2号小人的朋友仍然是钱姓朋友。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0fcb9d3a9b5d57aae9b51a656f5f65f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">新建vue3项目</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/60e1cb44373eca3207bf2c4a36cbfcc1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实验记录：深度学习模型收敛速度慢有哪些原因</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
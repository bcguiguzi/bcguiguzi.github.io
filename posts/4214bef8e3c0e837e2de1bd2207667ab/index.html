<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>深入解析UUID及其应用 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="深入解析UUID及其应用" />
<meta property="og:description" content="原文地址: http://www.blogjava.net/feelyou/archive/2008/10/14/234320.html 讨论UUID的定义、分类、应用及生成工具。 什么是UUID？
UUID是Universally Unique Identifier的缩写，它是在一定的范围内（从特定的名字空间到全球）唯一的机器生成的标识符。UUID具有以下涵义：
经由一定的算法机器生成为了保证UUID的唯一性，规范定义了包括网卡MAC地址、时间戳、名字空间（Namespace）、随机或伪随机数、时序等元素，以及从这些元素生成UUID的算法。UUID的复杂特性在保证了其唯一性的同时，意味着只能由计算机生成。
非人工指定，非人工识别UUID是不能人工指定的，除非你冒着UUID重复的风险。UUID的复杂性决定了“一般人“不能直接从一个UUID知道哪个对象和它关联。
在特定的范围内重复的可能性极小UUID的生成规范定义的算法主要目的就是要保证其唯一性。但这个唯一性是有限的，只在特定的范围内才能得到保证，这和UUID的类型有关（参见UUID的版本）。
UUID是16字节128位长的数字，通常以36字节的字符串表示，示例如下：
3F2504E0-4F89-11D3-9A0C-0305E82C3301
其中的字母是16进制表示，大小写无关。
GUID（Globally Unique Identifier）是UUID的别名；但在实际应用中，GUID通常是指微软实现的UUID。
UUID的版本
UUID具有多个版本，每个版本的算法不同，应用范围也不同。
首先是一个特例－－Nil UUID－－通常我们不会用到它，它是由全为0的数字组成，如下：
00000000-0000-0000-0000-000000000000
UUID Version 1：基于时间的UUID
基于时间的UUID通过计算当前时间戳、随机数和机器MAC地址得到。由于在算法中使用了MAC地址，这个版本的UUID可以保证在全球范围的唯一性。但与此同时，使用MAC地址会带来安全性问题，这就是这个版本UUID受到批评的地方。如果应用只是在局域网中使用，也可以使用退化的算法，以IP地址来代替MAC地址－－Java的UUID往往是这样实现的（当然也考虑了获取MAC的难度）。
UUID Version 2：DCE安全的UUID
DCE（Distributed Computing Environment）安全的UUID和基于时间的UUID算法相同，但会把时间戳的前4位置换为POSIX的UID或GID。这个版本的UUID在实际中较少用到。
UUID Version 3：基于名字的UUID（MD5）
基于名字的UUID通过计算名字和名字空间的MD5散列值得到。这个版本的UUID保证了：相同名字空间中不同名字生成的UUID的唯一性；不同名字空间中的UUID的唯一性；相同名字空间中相同名字的UUID重复生成是相同的。
UUID Version 4：随机UUID
根据随机数，或者伪随机数生成UUID。这种UUID产生重复的概率是可以计算出来的，但随机的东西就像是买彩票：你指望它发财是不可能的，但狗屎运通常会在不经意中到来。
UUID Version 5：基于名字的UUID（SHA1）
和版本3的UUID算法类似，只是散列值计算使用SHA1（Secure Hash Algorithm 1）算法。
UUID的应用
从UUID的不同版本可以看出，Version 1/2适合应用于分布式计算环境下，具有高度的唯一性；Version 3/5适合于一定范围内名字唯一，且需要或可能会重复生成UUID的环境下；至于Version 4，我个人的建议是最好不用（虽然它是最简单最方便的）。
通常我们建议使用UUID来标识对象或持久化数据，但以下情况最好不使用UUID：
映射类型的对象。比如只有代码及名称的代码表。人工维护的非系统生成对象。比如系统中的部分基础数据。对于具有名称不可重复的自然特性的对象，最好使用Version 3/5的UUID。比如系统中的用户。如果用户的UUID是Version 1的，如果你不小心删除了再重建用户，你会发现人还是那个人，用户已经不是那个用户了。（虽然标记为删除状态也是一种解决方案，但会带来实现上的复杂性。）
UUID生成器
我没想着有人看完了这篇文章就去自己实现一个UUID生成器，所以前面的内容并不涉及算法的细节。下面是一些可用的Java UUID生成器：
Java UUID Generator (JUG)：开源UUID生成器，LGPL协议，支持MAC地址。UUID：特殊的License，有源码。Java 5以上版本中自带的UUID生成器：好像只能生成Version 3/4的UUID。
此外，Hibernate中也有一个UUID生成器，但是，生成的不是任何一个（规范）版本的UUID，强烈不建议使用。
延伸阅读
UUID规范：rfc4122
DCE 1.1中的UUID" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/4214bef8e3c0e837e2de1bd2207667ab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2008-10-20T09:57:00+08:00" />
<meta property="article:modified_time" content="2008-10-20T09:57:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">深入解析UUID及其应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span class="Apple-style-span" style="color: rgb(0, 0, 0); font-family: Verdana; font-size: 13px; line-height: 19px; "> 
 <div>
   原文地址: 
  <a href="http://www.blogjava.net/feelyou/archive/2008/10/14/234320.html" rel="nofollow">http://www.blogjava.net/feelyou/archive/2008/10/14/234320.html</a> 
 </div> 
 <div>
   讨论UUID的定义、分类、应用及生成工具。 
 </div><br>什么是UUID？<br><br>UUID是Universally Unique Identifier的缩写，它是在一定的范围内（从特定的名字空间到全球）唯一的机器生成的标识符。UUID具有以下涵义：<br><br> 
 <ul><li>经由一定的算法机器生成</li></ul>为了保证UUID的唯一性，规范定义了包括网卡MAC地址、时间戳、名字空间（Namespace）、随机或伪随机数、时序等元素，以及从这些元素生成UUID的算法。UUID的复杂特性在保证了其唯一性的同时，意味着只能由计算机生成。<br> 
 <ul><li>非人工指定，非人工识别</li></ul>UUID是不能人工指定的，除非你冒着UUID重复的风险。UUID的复杂性决定了“一般人“不能直接从一个UUID知道哪个对象和它关联。<br> 
 <ul><li>在特定的范围内重复的可能性极小</li></ul>UUID的生成规范定义的算法主要目的就是要保证其唯一性。但这个唯一性是有限的，只在特定的范围内才能得到保证，这和UUID的类型有关（参见UUID的版本）。<br><br>UUID是16字节128位长的数字，通常以36字节的字符串表示，示例如下：<br><br>3F2504E0-4F89-11D3-9A0C-0305E82C3301<br><br>其中的字母是16进制表示，大小写无关。<br><br>GUID（Globally Unique Identifier）是UUID的别名；但在实际应用中，GUID通常是指微软实现的UUID。<br><br>UUID的版本<br><br>UUID具有多个版本，每个版本的算法不同，应用范围也不同。<br><br>首先是一个特例－－Nil UUID－－通常我们不会用到它，它是由全为0的数字组成，如下：<br><br>00000000-0000-0000-0000-000000000000<br><br>UUID Version 1：基于时间的UUID<br><br>基于时间的UUID通过计算当前时间戳、随机数和机器MAC地址得到。由于在算法中使用了MAC地址，这个版本的UUID可以保证在全球范围的唯一性。但与此同时，使用MAC地址会带来安全性问题，这就是这个版本UUID受到批评的地方。如果应用只是在局域网中使用，也可以使用退化的算法，以IP地址来代替MAC地址－－Java的UUID往往是这样实现的（当然也考虑了获取MAC的难度）。<br><br>UUID Version 2：DCE安全的UUID<br><br>DCE（Distributed Computing Environment）安全的UUID和基于时间的UUID算法相同，但会把时间戳的前4位置换为POSIX的UID或GID。这个版本的UUID在实际中较少用到。<br><br>UUID Version 3：基于名字的UUID（MD5）<br><br>基于名字的UUID通过计算名字和名字空间的MD5散列值得到。这个版本的UUID保证了：相同名字空间中不同名字生成的UUID的唯一性；不同名字空间中的UUID的唯一性；相同名字空间中相同名字的UUID重复生成是相同的。<br><br>UUID Version 4：随机UUID<br><br>根据随机数，或者伪随机数生成UUID。这种UUID产生重复的概率是可以计算出来的，但随机的东西就像是买彩票：你指望它发财是不可能的，但狗屎运通常会在不经意中到来。<br><br>UUID Version 5：基于名字的UUID（SHA1）<br><br>和版本3的UUID算法类似，只是散列值计算使用SHA1（<strong>Secure Hash Algorithm 1</strong>）算法。<br><br>UUID的应用<br><br>从UUID的不同版本可以看出，Version 1/2适合应用于分布式计算环境下，具有高度的唯一性；Version 3/5适合于一定范围内名字唯一，且需要或可能会重复生成UUID的环境下；至于Version 4，我个人的建议是最好不用（虽然它是最简单最方便的）。<br><br>通常我们建议使用UUID来标识对象或持久化数据，但以下情况最好不使用UUID：<br><br> 
 <ul><li>映射类型的对象。比如只有代码及名称的代码表。</li><li>人工维护的非系统生成对象。比如系统中的部分基础数据。</li></ul>对于具有名称不可重复的自然特性的对象，最好使用Version 3/5的UUID。比如系统中的用户。如果用户的UUID是Version 1的，如果你不小心删除了再重建用户，你会发现人还是那个人，用户已经不是那个用户了。（虽然标记为删除状态也是一种解决方案，但会带来实现上的复杂性。）<br><br>UUID生成器<br><br>我没想着有人看完了这篇文章就去自己实现一个UUID生成器，所以前面的内容并不涉及算法的细节。下面是一些可用的Java UUID生成器：<br><br> 
 <ul><li>Java UUID Generator (JUG)：<span class="style9">开源UUID生成器，LGPL协议，支持MAC地址。</span></li><li><span class="style9"><a href="http://johannburkard.de/blog/programming/java/Java-UUID-generators-compared.html" rel="nofollow" style="text-decoration: none; color: rgb(29, 88, 209); ">UUID</a>：特殊的License，有源码。</span></li><li><span class="style9">Java 5以上版本中自带的UUID生成器：好像只能生成Version 3/4的UUID。<br></span></li></ul>此外，Hibernate中也有一个UUID生成器，但是，生成的不是任何一个（规范）版本的UUID，强烈不建议使用。<br><br>延伸阅读<br><br>UUID规范：<a href="http://tools.ietf.org/html/rfc4122" rel="nofollow" style="text-decoration: none; color: rgb(29, 88, 209); ">rfc4122</a><br>DCE 1.1中的<a href="http://www.opengroup.org/onlinepubs/9629399/apdxa.htm" rel="nofollow" style="text-decoration: none; color: rgb(29, 88, 209); ">UUID</a><br><br><p class="technorati-tags" style="margin-top: 0px; margin-right: 0px; margin-left: 0px; margin-bottom: 14px; "><a href="http://technorati.com/tag/UUID" rel="tag" style="text-decoration: none; color: rgb(29, 88, 209); ">UUID</a>, <a href="http://technorati.com/tag/GUID" rel="tag" style="text-decoration: none; color: rgb(29, 88, 209); ">GUID</a></p></span>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0c1cd09db76355dd2f42a1e1135d9c00/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PhotoshopCS中的CS是什么意思？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/92623290e8ccf82f9d465cd0fc7989e8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一位Erlang程序员的自白</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
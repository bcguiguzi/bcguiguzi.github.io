<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ARIMA基本概念和流程讲解 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ARIMA基本概念和流程讲解" />
<meta property="og:description" content="基本概念 p: 自回归阶数
q: 滑动平均阶数
d: 时间序列成为平稳时所做的差分次数
AR - Auto Regression, 自回归模型：AR可以解决当前数据与后期数据之间的关系；表示为自回归模型 AR( p )
MA - Moving Average，移动平均模型：MA则可以解决随机变动也就是噪声的问题；表示为移动平均模型 MA(q)
ARMA - Auto Regression and Moving Average，自回归移动平均模型。自回归移动平均模型(ARMA)是与自回归(AR)和移动平均模型(MA)两部分组成；表示为ARMA(p, d)。(以上三类模型可以直接应用于平稳时间序列模型)
ARIMA - Auto Regression Integreate Moving Average，差分自回归移动平均模型。同前面的三种模型，ARIMA模型也是基于平稳的时间序列的或者差分化后是稳定的，另外前面的几种模型都可以看作ARIMA的某种特殊形式。表示为ARIMA(p, d, q)。(前面三种模型，d=0，即平稳时间序列模型不需要做差分)
ARIMA模型是在ARMA模型演变出来的，它实际上是先对数据做了差分，之后再使用ARMA模型；换句话说，ARIMA模型是先将非平稳数据变得平稳（用差分），之后再用ARMA模型处理平稳数据
基本流程 导入模型 import sys import os import warnings warnings.filterwarnings(&#34;ignore&#34;) import pandas as pd import numpy as np from arch.unitroot import ADF import matplotlib.pylab as plt %matplotlib inline from matplotlib.pylab import style style." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f8d1c48d00a1d97c000c68b815ca677c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-07T21:12:04+08:00" />
<meta property="article:modified_time" content="2022-02-07T21:12:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ARIMA基本概念和流程讲解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>基本概念</h2> 
<p><img src="https://images2.imgbox.com/55/92/z2r5y5I5_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/22/f1/DfXsAFXw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/08/a7/bGNwXTUC_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>p: 自回归阶数<br> q: 滑动平均阶数<br> d: 时间序列成为平稳时所做的差分次数</p> 
</blockquote> 
<blockquote> 
 <p>AR - Auto Regression, 自回归模型：AR可以解决当前数据与后期数据之间的关系；表示为自回归模型 AR( p )<br> <img src="https://images2.imgbox.com/ec/3c/vBQOwqiN_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/1c/b7/zAs4CeaD_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>MA - Moving Average，移动平均模型：MA则可以解决随机变动也就是噪声的问题；表示为移动平均模型 MA(q)<br> <img src="https://images2.imgbox.com/9b/9a/l986h4uY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5a/23/TB7pSSFv_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>ARMA - Auto Regression and Moving Average，自回归移动平均模型。自回归移动平均模型(ARMA)是与自回归(AR)和移动平均模型(MA)两部分组成；表示为ARMA(p, d)。(以上三类模型可以直接应用于平稳时间序列模型)<br> <img src="https://images2.imgbox.com/35/16/t2WbSxu9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/76/60/QXLzDlvh_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/19/96/qns5Lwwy_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>ARIMA - Auto Regression Integreate Moving Average，差分自回归移动平均模型。同前面的三种模型，ARIMA模型也是基于平稳的时间序列的或者差分化后是稳定的，另外前面的几种模型都可以看作ARIMA的某种特殊形式。表示为ARIMA(p, d, q)。(前面三种模型，d=0，即平稳时间序列模型不需要做差分)<br> <strong><font color="red">ARIMA模型是在ARMA模型演变出来的，它实际上是先对数据做了差分，之后再使用ARMA模型；换句话说，ARIMA模型是先将非平稳数据变得平稳（用差分），之后再用ARMA模型处理平稳数据</font></strong><img src="https://images2.imgbox.com/67/e9/N0cB8nwt_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/bd/21/v0zSnR9o_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/97/ed/EE1ZSK0T_o.png" alt="在这里插入图片描述"></p> 
<p><br><br><br><br></p> 
<h2><a id="_37"></a>基本流程</h2> 
<h3><a id="_39"></a>导入模型</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">import</span> os
<span class="token keyword">import</span> warnings
warnings<span class="token punctuation">.</span>filterwarnings<span class="token punctuation">(</span><span class="token string">"ignore"</span><span class="token punctuation">)</span>
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> arch<span class="token punctuation">.</span>unitroot <span class="token keyword">import</span> ADF
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pylab <span class="token keyword">as</span> plt
<span class="token operator">%</span>matplotlib inline
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pylab <span class="token keyword">import</span> style
style<span class="token punctuation">.</span>use<span class="token punctuation">(</span><span class="token string">'ggplot'</span><span class="token punctuation">)</span>
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>api <span class="token keyword">as</span> sm
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>formula<span class="token punctuation">.</span>api <span class="token keyword">as</span> smf
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>api <span class="token keyword">as</span> smt
<span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>stattools <span class="token keyword">import</span> adfuller 
<span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>stats<span class="token punctuation">.</span>diagnostic <span class="token keyword">import</span> acorr_ljungbox 
<span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>api <span class="token keyword">import</span> qqplot
pd<span class="token punctuation">.</span>set_option<span class="token punctuation">(</span><span class="token string">'display.float_format'</span><span class="token punctuation">,</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token string">'%.5f'</span> <span class="token operator">%</span> x<span class="token punctuation">)</span> 
np<span class="token punctuation">.</span>set_printoptions<span class="token punctuation">(</span>precision<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> suppress<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> 
<span class="token triple-quoted-string string">"""中文显示问题"""</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'sans-serif'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/15/0f/o9vXcFSv_o.png" alt="在这里插入图片描述"><br> <br><br><br><br><br><br><br><br></p> 
<blockquote> 
 <p><strong><font color="red">AR、MA和ARMA模型都必须是 “平稳非白噪声序列”，所以需要 “平稳性检验“ 和 “白噪声检验” </font></strong></p> 
</blockquote> 
<h3><a id="1_71"></a>1.平稳性检验</h3> 
<h4><a id="1_72"></a>1）什么是序列平稳</h4> 
<p><img src="https://images2.imgbox.com/13/75/Cyde7hXG_o.png" alt="在这里插入图片描述"></p> 
<p><br><br><br><br></p> 
<h4><a id="2_83"></a>2）检验是否平稳</h4> 
<blockquote> 
 <p><strong><font color="red">第一和第二种方式很直观，但也很主观。它们全靠肉眼的判断和判断人的经验，不同的人看到同样的图形，很可能会给出不同的判断。<br> 大部分情况选择第三种方法：单位根检验</font></strong></p> 
</blockquote> 
<p><br><br><br></p> 
<h5><a id="font_colorredfont_88"></a>方法一:观察序列图:若个体值要围绕<font color="red">序列均值</font>上下波动，没有明显的上升或下降趋势，则是平稳序列。</h5> 
<blockquote> 
 <p><strong><font color="red">如果出现上升或下降趋势，需要对原始序列进行差分平稳化处理在 3）不平稳序列转平稳序列部分，会讲如何差分平稳化</font></strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/2d/6e/AksrWvKs_o.png" alt="在这里插入图片描述"></p> 
<p><br><br><br><br><br></p> 
<h5><a id="font_colorredACFfont_font_colorredPACFfont_101"></a>方法二:观察自相关图:平稳的序列的<font color="red">自相关图（ACF）</font>和 <font color="red">偏相关图（PACF）</font>不是拖尾就是截尾。</h5> 
<blockquote> 
 <p><strong><font color="red">拖尾:始终有非零取值，不会在k大于某个常数后就恒等于零(或在0附近随机波动)，顾名思义，就是序列缓慢衰减，“尾巴”慢慢拖着滑下来，</font></strong>:<br> <strong><font color="red">截尾:在大于某个常数k后快速趋于0为k阶截尾，突然截断了，像个悬崖</font></strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/87/25/kGRIZ08f_o.png" alt="在这里插入图片描述"><br> <strong>这张图可以看出，左图（自相关函数图）呈现出拖尾特征（2阶拖尾），而右图（偏自相关函数图）呈现出截尾特征（2阶截尾）</strong></p> 
<p><img src="https://images2.imgbox.com/0d/fb/MviiFcgZ_o.png" alt="在这里插入图片描述"><br> <strong>这张图可以看出，左图（自相关函数图）呈现出截尾特征（1阶截尾），而右图（偏自相关函数图）呈现出拖尾特征（1阶拖尾）</strong></p> 
<p><img src="https://images2.imgbox.com/bc/83/gn1ESAip_o.png" alt="在这里插入图片描述"><br> <strong>这张图可以看出，左图（自相关函数图）呈现出拖尾特征（2阶拖尾），右图（偏自相关函数图）也呈现出拖尾特征（1阶拖尾）</strong><br> <br><br><br><br><br><br><br></p> 
<h5><a id="httpsimgblogcsdnimgcn6450e06f3c524d36bf33ca2ed778ebc3pngxossprocessimagewatermarktype_d3F5LXplbmhlaQshadow_50text_Q1NETiBA5pep6aSQ5qC45qGD54mb5aW2size_16color_FFFFFFt_70g_sex_16_124"></a>方法三：单位根检验：当一个时间序列的滞后算子多项式方程存在单位根时，我们认为该时间序列是非平稳的；反之，当该方程不存在单位根时，我们认为该时间序列是平稳的。<img src="https://images2.imgbox.com/d3/65/BGbh9Skk_o.png" alt="在这里插入图片描述"></h5> 
<blockquote> 
 <p><strong>常见的单位根检验方法有<font color="red">DF检</font>、<font color="red">ADF检验</font>和<font color="red">PP检验</font>，今天我们会用ADF检验来为大家演示</strong><br> 在Python中，有两个常用的包提供了ADF检验，分别是statsmodel和arch。</p> 
</blockquote> 
<h6><a id="statsmodel_129"></a>第一种方法：使用statsmodel的方法为：</h6> 
<pre><code class="prism language-python"><span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>stats<span class="token punctuation">.</span>diagnostic <span class="token keyword">import</span> unitroot_adf

unitroot_adf<span class="token punctuation">(</span>df<span class="token punctuation">.</span>pct_chg<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-powershell">输出为：
这里包含了检验值、p<span class="token operator">-</span>value、滞后阶数、自由度等信息。
我们看到了检验统计量为<span class="token operator">-</span>14<span class="token punctuation">.</span>46，远小于1<span class="token operator">%</span>的临界值<span class="token operator">-</span>3<span class="token punctuation">.</span>47，即p值远小于0<span class="token punctuation">.</span>01，因此我们拒绝原假设，认为该时间序列是平稳的。（这里原假设是存在单位根，即时间序列为非平稳的。<span class="token punctuation">)</span>
</code></pre> 
<p><br><br></p> 
<h6><a id="arch_142"></a>第二种方法：使用arch的方法为：</h6> 
<pre><code class="prism language-python"><span class="token keyword">from</span> arch<span class="token punctuation">.</span>unitroot <span class="token keyword">import</span> ADF

ADF<span class="token punctuation">(</span>df<span class="token punctuation">.</span>pct_chg<span class="token punctuation">)</span>
</code></pre> 
<p><strong>其输出信息与statsmodel基本是一致的。</strong></p> 
<p><strong>或</strong></p> 
<p><strong>其他案例使用方法二</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"单位根检验:\n"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ADF<span class="token punctuation">(</span>data<span class="token punctuation">.</span>diff1<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
</code></pre> 
<pre><code class="prism language-powershell">单位根检验:

   Augmented Dickey<span class="token operator">-</span>Fuller Results   
=====================================
Test Statistic                 <span class="token operator">-</span>3<span class="token punctuation">.</span>156
P<span class="token operator">-</span>value                         0<span class="token punctuation">.</span>023
Lags                                0
<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">-</span>

Trend: Constant
Critical Values: <span class="token operator">-</span>3<span class="token punctuation">.</span>63 <span class="token punctuation">(</span>1<span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>2<span class="token punctuation">.</span>95 <span class="token punctuation">(</span>5<span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span>2<span class="token punctuation">.</span>61 <span class="token punctuation">(</span>10<span class="token operator">%</span><span class="token punctuation">)</span>
Null Hypothesis: The <span class="token keyword">process</span> contains a unit root<span class="token punctuation">.</span>
Alternative Hypothesis: The <span class="token keyword">process</span> is weakly stationary<span class="token punctuation">.</span>
</code></pre> 
<blockquote> 
 <p><strong>单位根检验: 对其一阶差分进行单位根检验，得到：1%、%5、%10不同程度拒绝原假设的统计值和ADF Test result的比较，本数据中，P-value 为 0.023,接近0，ADF Test result同时小于5%、10%即说明很好地拒绝该假设，本数据中，ADF结果为-3.156，拒绝原假设，即一阶差分后数据是平稳的。</strong></p> 
</blockquote> 
<p><br><br><br><br></p> 
<blockquote> 
 <p><strong><font color="red">方法四：以上几个方法融合，即几种方法都做：结果更具有说服力</font></strong><br> <strong>1.绘制时序图，观察是否存在波动和向上或向下的趋势<br> 2.做相关系数图，若随时间间隔 k 增大，自相关系数迅速衰减则序列平稳；若随时间间隔 k 增大，自相关系数衰减缓慢则序列不平稳<br> 3.进行单位根检验，P-值&lt;α时，拒绝存在单位根的原假设，序列平稳。</strong></p> 
</blockquote> 
<p><br><br><br><br></p> 
<h4><a id="3_187"></a>3）不平稳序列转为平稳序列</h4> 
<blockquote> 
 <p><strong><font color="red">取对数</font>可以消除数据波动<font color="red">变大趋势</font><br> 对数列进行<font color="red">差分</font>，可以消除数据增长<font color="red">趋势性</font>和<font color="red">季节性</font>。</strong></p> 
</blockquote> 
<blockquote> 
 <p><strong><font color="red">对于非平稳序列，如果先进行差分后的结果不满足要求，则需要在原有基础上继续进行差分，直到差分后的结果属于平稳性序列</font></strong></p> 
</blockquote> 
<p>方法：<strong><font color="red">差分变换</font></strong></p> 
<pre><code class="prism language-python">fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax1<span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>
diff1 <span class="token operator">=</span> dta<span class="token punctuation">.</span>diff<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
diff1<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>ax<span class="token operator">=</span>ax1<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c7/57/kOhnGdu4_o.png" alt="在这里插入图片描述"><br> <strong>从下图可以看出，预测数列取对数并作一阶差分后的图形</strong><br> <img src="https://images2.imgbox.com/d0/7d/Xu91VNro_o.png" alt="在这里插入图片描述"></p> 
<p><strong>选择其中一个检验方法，检验之后发现：<br> <font color="red">预测数列取对数并作一阶差分后的图形显示基本消除了长期趋势性的影响，趋于平稳化，满足ARIMA模型建模的基本要求。</font></strong></p> 
<p><br><br><br><br></p> 
<h3><a id="2_211"></a>2.白噪声检验</h3> 
<p><img src="https://images2.imgbox.com/ff/6f/wDwJlFVQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0c/dc/ULaleVRb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7c/b0/vqa6CwnI_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>stats<span class="token punctuation">.</span>diagnostic <span class="token keyword">import</span> acorr_ljungbox
acorr_ljungbox<span class="token punctuation">(</span>data<span class="token punctuation">.</span>diff1<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lags <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>boxpierce<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-powershell"><span class="token punctuation">(</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>11<span class="token punctuation">.</span>30402<span class="token punctuation">,</span> 13<span class="token punctuation">.</span>03896<span class="token punctuation">,</span> 13<span class="token punctuation">.</span>37637<span class="token punctuation">,</span> 14<span class="token punctuation">.</span>24184<span class="token punctuation">,</span> 14<span class="token punctuation">.</span>6937 <span class="token punctuation">,</span> 15<span class="token punctuation">.</span>33042<span class="token punctuation">,</span>
        16<span class="token punctuation">.</span>36099<span class="token punctuation">,</span> 16<span class="token punctuation">.</span>76433<span class="token punctuation">,</span> 18<span class="token punctuation">.</span>15565<span class="token punctuation">,</span> 18<span class="token punctuation">.</span>16275<span class="token punctuation">,</span> 18<span class="token punctuation">.</span>21663<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 array<span class="token punctuation">(</span><span class="token punctuation">[</span>0<span class="token punctuation">.</span>00077<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>00147<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>00389<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>00656<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>01175<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>01784<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>02202<span class="token punctuation">,</span>
        0<span class="token punctuation">.</span>03266<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>03341<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>05228<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>07669<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 array<span class="token punctuation">(</span><span class="token punctuation">[</span>10<span class="token punctuation">.</span>4116 <span class="token punctuation">,</span> 11<span class="token punctuation">.</span>96391<span class="token punctuation">,</span> 12<span class="token punctuation">.</span>25693<span class="token punctuation">,</span> 12<span class="token punctuation">.</span>98574<span class="token punctuation">,</span> 13<span class="token punctuation">.</span>35437<span class="token punctuation">,</span> 13<span class="token punctuation">.</span>85704<span class="token punctuation">,</span>
        14<span class="token punctuation">.</span>64353<span class="token punctuation">,</span> 14<span class="token punctuation">.</span>94072<span class="token punctuation">,</span> 15<span class="token punctuation">.</span>92929<span class="token punctuation">,</span> 15<span class="token punctuation">.</span>93415<span class="token punctuation">,</span> 15<span class="token punctuation">.</span>9696 <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 array<span class="token punctuation">(</span><span class="token punctuation">[</span>0<span class="token punctuation">.</span>00125<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>00252<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>00655<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>01135<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>02027<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>03127<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>04085<span class="token punctuation">,</span>
        0<span class="token punctuation">.</span>06031<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>06837<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>10153<span class="token punctuation">,</span> 0<span class="token punctuation">.</span>14226<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p><strong><font color="red">通过P&lt;αP&lt;α（α通常为0.05）,拒绝原假设，故差分后的序列是平稳的非白噪声序列，可以进行下一步建模</font></strong></p> 
</blockquote> 
<p><br><br><br><br><br><br><br></p> 
<h3><a id="3ACF__PACF_236"></a>3.模型定阶：计算自相关函数ACF 和 偏自相关函数PACF</h3> 
<p><strong><font color="red">若你检验方法选择方法二，则你已经得到了ACF和PACF，但检验方法最好还是选择单位根检验</font></strong></p> 
<blockquote> 
 <p><strong><font size="4">流程：</font><br> <font color="red"><br> 1.根据ACF图和PACF图判断，序列平稳化后，使用AR、MA、ARMA中哪种模型<br> 2.判断p，q阶数是多少</font><br> （前两步都是看ACF和PACF图来判断）<br> <font color="red">3.可能ARMA有多个p，q决定的模型（因为可能ACF和PACF图可以看出多个p和q），这时要通过信息标准AIC和BIC来协助选择模型<br> 选择AIC、BIC值最小的，因为AIC、BIC越小，模型越好</font></strong></p> 
</blockquote> 
<blockquote> 
 <p><strong><font color="red">但要注意的是，这些准则不能说明某一个模型的精确度，也即是说，对于三个模型Ａ，Ｂ，Ｃ，我们能够判断出Ｃ模型是最好的，但不能保证Ｃ模型能够很好地刻画数据，因为有可能三个模型都是糟糕的。</font></strong></p> 
</blockquote> 
<blockquote> 
 <p><strong>赤池信息准则 (akaike information criterion) :<font color="red">AIC鼓励数据拟合的优良性但是尽量避免出现过度拟合(Overfitting)的情况。所以优先考虑的模型应是AIC值最小的那一个</font></strong><br> <img src="https://images2.imgbox.com/ad/a1/usJeO2GU_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p><strong>贝叶斯信息准则 (bayesian information criterion) :<font color="red"></font></strong><br> <img src="https://images2.imgbox.com/da/4e/S4D9pbx0_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p><strong><font color="red">其中 L 是该模型下的最大似然, n 是数据数量， k 是模型的变量个数。</font></strong></p> 
<p><br><br><br></p> 
<p><img src="https://images2.imgbox.com/d0/38/Y4pDESyC_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/89/b2/WBphw9PW_o.png" alt="在这里插入图片描述"><br> <br><br><br><br> <img src="https://images2.imgbox.com/2a/4a/BQUjDAyF_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th>模型</th><th>ACF</th><th>PACF</th></tr></thead><tbody><tr><td>AR</td><td>拖尾</td><td>截尾</td></tr><tr><td>MA</td><td>截尾</td><td>拖尾</td></tr><tr><td>ARMA</td><td>拖尾</td><td>拖尾</td></tr></tbody></table> 
<p><br><br><br><br><br><br></p> 
<blockquote> 
 <p><strong>检查平稳时间序列的自相关图和偏自相关图。<br> 通过<font color="red">sm.graphics.tsa.plot_acf</font>和<font color="red">sm.graphics.tsa.plot_pacf</font>得到图形<br> 其中 lags 表示滞后的阶数，以上分别得到 ACF 图和 PACF 图</strong></p> 
</blockquote> 
<h4><a id="font_colorred1font_285"></a><font color="red">例子1:</font></h4> 
<h4><a id="1_ACFPACF_287"></a>1) 观察ACF和PACF图，判断是哪种模型</h4> 
<pre><code class="prism language-python">dta<span class="token operator">=</span> dta<span class="token punctuation">.</span>diff<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">#我们已经知道要使用一阶差分的时间序列，之前判断差分的程序可以注释掉</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax1<span class="token operator">=</span>fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">211</span><span class="token punctuation">)</span>
fig <span class="token operator">=</span> sm<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>plot_acf<span class="token punctuation">(</span>dta<span class="token punctuation">,</span>lags<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span>ax<span class="token operator">=</span>ax1<span class="token punctuation">)</span>
ax2 <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">212</span><span class="token punctuation">)</span>
fig <span class="token operator">=</span> sm<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>plot_pacf<span class="token punctuation">(</span>dta<span class="token punctuation">,</span>lags<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span>ax<span class="token operator">=</span>ax2<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/47/70/S2pYsYpI_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>通过两图观察得到：</p> 
 <ul><li>自相关图显示滞后有三个阶超出了置信边界；</li><li>偏相关图显示在滞后1至7阶（lags 1,2,…，7）时的偏自相关系数超出了置信边界，从lag 7之后偏自相关系数值缩小至0 则有以下模型可以供选择：</li></ul> 
 <ol><li>ARMA(0,1)模型：即自相关图在滞后1阶之后缩小为0，且偏自相关缩小至0，则是一个阶数q=1的移动平均模型；</li><li>ARMA(7,0)模型：即偏自相关图在滞后7阶之后缩小为0，且自相关缩小至0，则是一个阶层p=3的自回归模型；</li><li>ARMA(7,1)模型：即使得自相关和偏自相关都缩小至零。则是一个混合模型。</li></ol> 
</blockquote> 
<p><br><br><br></p> 
<h4><a id="2_AIC_BIC_308"></a>2) AIC BIC选择其中最佳模型</h4> 
<blockquote> 
 <p><strong><font color="red">dta是差分后的序列</font><br> 因为使用的是ARMA模型</strong></p> 
</blockquote> 
<pre><code class="prism language-python">arma_mod20 <span class="token operator">=</span> sm<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>ARMA<span class="token punctuation">(</span>dta<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># dta是差分后的序列</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arma_mod20<span class="token punctuation">.</span>aic<span class="token punctuation">,</span>arma_mod20<span class="token punctuation">.</span>bic<span class="token punctuation">,</span>arma_mod20<span class="token punctuation">.</span>hqic<span class="token punctuation">)</span>
arma_mod30 <span class="token operator">=</span> sm<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>ARMA<span class="token punctuation">(</span>dta<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arma_mod30<span class="token punctuation">.</span>aic<span class="token punctuation">,</span>arma_mod30<span class="token punctuation">.</span>bic<span class="token punctuation">,</span>arma_mod30<span class="token punctuation">.</span>hqic<span class="token punctuation">)</span>
arma_mod40 <span class="token operator">=</span> sm<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>ARMA<span class="token punctuation">(</span>dta<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arma_mod40<span class="token punctuation">.</span>aic<span class="token punctuation">,</span>arma_mod40<span class="token punctuation">.</span>bic<span class="token punctuation">,</span>arma_mod40<span class="token punctuation">.</span>hqic<span class="token punctuation">)</span>
arma_mod50 <span class="token operator">=</span> sm<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>ARMA<span class="token punctuation">(</span>dta<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>arma_mod50<span class="token punctuation">.</span>aic<span class="token punctuation">,</span>arma_mod50<span class="token punctuation">.</span>bic<span class="token punctuation">,</span>arma_mod50<span class="token punctuation">.</span>hqic<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c8/f3/65jzitMH_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong><font color="red">可以看到ARMA(7,0)的AIC，BIC，HQIC均最小，因此是最佳模型。</font></strong></p> 
</blockquote> 
<p><br><br><br></p> 
<h4><a id="font_colorred2font_328"></a><font color="red">例子2:</font></h4> 
<h4><a id="1_ACFPACF_329"></a>1) 观察ACF和PACF图，判断是哪种模型</h4> 
<p><img src="https://images2.imgbox.com/31/1a/SDjJeO8q_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>从一阶差分序列的自相关图和偏自相关图可以发现:</p> 
</blockquote> 
<ul><li>自相关图拖尾或一阶截尾</li><li>偏自相关图一阶截尾,</li><li>所以我们可以建立ARIMA(1,1,0)、ARIMA(1,1,1)、ARIMA(0,1,1)模型。</li></ul> 
<p><br><br><br></p> 
<h4><a id="2_AIC_BIC_342"></a>2) AIC BIC选择其中最佳模型</h4> 
<blockquote> 
 <p><strong><font color="red">data[“xt”]是没有差分的序列</font><br> 因为使用的是ARIMA模型</strong></p> 
</blockquote> 
<pre><code class="prism language-python">arma_mod20 <span class="token operator">=</span> sm<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>ARIMA<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">"xt"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># data["xt"]是没有差分的数据</span>
arma_mod30 <span class="token operator">=</span> sm<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>ARIMA<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">"xt"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>
arma_mod40 <span class="token operator">=</span> sm<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>ARIMA<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">"xt"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>
values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>arma_mod20<span class="token punctuation">.</span>aic<span class="token punctuation">,</span>arma_mod20<span class="token punctuation">.</span>bic<span class="token punctuation">,</span>arma_mod20<span class="token punctuation">.</span>hqic<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>arma_mod30<span class="token punctuation">.</span>aic<span class="token punctuation">,</span>arma_mod30<span class="token punctuation">.</span>bic<span class="token punctuation">,</span>arma_mod30<span class="token punctuation">.</span>hqic<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>arma_mod40<span class="token punctuation">.</span>aic<span class="token punctuation">,</span>arma_mod40<span class="token punctuation">.</span>bic<span class="token punctuation">,</span>arma_mod40<span class="token punctuation">.</span>hqic<span class="token punctuation">]</span><span class="token punctuation">]</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>values<span class="token punctuation">,</span>index<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"AR(1,1,0)"</span><span class="token punctuation">,</span><span class="token string">"MA(0,1,1)"</span><span class="token punctuation">,</span><span class="token string">"ARMA(1,1,1)"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"AIC"</span><span class="token punctuation">,</span><span class="token string">"BIC"</span><span class="token punctuation">,</span><span class="token string">"hqic"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df
</code></pre> 
<br> 
<table><thead><tr><th></th><th>AIC</th><th>BIC</th><th>hqic</th></tr></thead><tbody><tr><td><strong>AR(1,1,0)</strong></td><td>253.09159</td><td>257.84215</td><td>254.74966</td></tr><tr><td><strong>MA(0,1,1)</strong></td><td>251.97340</td><td>256.72396</td><td>253.63147</td></tr><tr><td><strong>ARMA(1,1,1)</strong></td><td>254.09159</td><td>258.84535</td><td>259.74966</td></tr></tbody></table> 
<blockquote> 
 <p><strong>选择模型MA(0, 1, 1),即ARIMA(0, 1, 1)</strong></p> 
</blockquote> 
<p><br><br><br></p> 
<h3><a id="4_367"></a>4.参数估计</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>tsa<span class="token punctuation">.</span>arima_model <span class="token keyword">import</span> ARIMA
model <span class="token operator">=</span> ARIMA<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">"xt"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> order<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
result <span class="token operator">=</span> model<span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>summary<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-powershell">                             ARIMA Model Results                              
==============================================================================
Dep<span class="token punctuation">.</span> Variable:                   D<span class="token punctuation">.</span>xt   No<span class="token punctuation">.</span> Observations:                   36
Model:                 ARIMA<span class="token punctuation">(</span>0<span class="token punctuation">,</span> 1<span class="token punctuation">,</span> 1<span class="token punctuation">)</span>   Log Likelihood                <span class="token operator">-</span>122<span class="token punctuation">.</span>987
Method:                       css<span class="token operator">-</span>mle   S<span class="token punctuation">.</span>D<span class="token punctuation">.</span> of innovations              7<span class="token punctuation">.</span>309
Date:                Tue<span class="token punctuation">,</span> 22 Dec 2020   AIC                            251<span class="token punctuation">.</span>973
Time:                        09:11:55   BIC                            256<span class="token punctuation">.</span>724
Sample:                    01<span class="token operator">-</span>01<span class="token operator">-</span>1953   HQIC                           253<span class="token punctuation">.</span>631
                         <span class="token operator">-</span> 01<span class="token operator">-</span>01<span class="token operator">-</span>1988                                         
==============================================================================
                 coef    std err          z      P&gt;<span class="token punctuation">|</span>z<span class="token punctuation">|</span>      <span class="token punctuation">[</span>0<span class="token punctuation">.</span>025      0<span class="token punctuation">.</span>975<span class="token punctuation">]</span>
<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span><span class="token operator">-</span>
const          4<span class="token punctuation">.</span>9956      2<span class="token punctuation">.</span>014      2<span class="token punctuation">.</span>481      0<span class="token punctuation">.</span>013       1<span class="token punctuation">.</span>048       8<span class="token punctuation">.</span>943
ma<span class="token punctuation">.</span>L1<span class="token punctuation">.</span>D<span class="token punctuation">.</span>xt     0<span class="token punctuation">.</span>6710      0<span class="token punctuation">.</span>165      4<span class="token punctuation">.</span>071      0<span class="token punctuation">.</span>000       0<span class="token punctuation">.</span>348       0<span class="token punctuation">.</span>994
                                    Roots                                    
=============================================================================
                  Real          Imaginary           Modulus         Frequency
<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>
MA<span class="token punctuation">.</span>1           <span class="token operator">-</span>1<span class="token punctuation">.</span>4902           <span class="token operator">+</span>0<span class="token punctuation">.</span>0000j            1<span class="token punctuation">.</span>4902            0<span class="token punctuation">.</span>5000
<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>-<span class="token operator">--</span>
</code></pre> 
<p><br><br><br><br></p> 
<h3><a id="5_399"></a>5.模型检验</h3> 
<p><img src="https://images2.imgbox.com/5c/ea/GnzIN3Wg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1__401"></a>1) 参数的显著性检验</h4> 
<p><img src="https://images2.imgbox.com/b8/a4/i0nbJVlt_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5f/de/vVcWqZHO_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>P&lt;α（α通常为0.05），拒绝原假设，，认为该参数显著非零MA(2)模型拟合该序列，<font color="red">残差序列</font>已实现白噪声</strong></p> 
</blockquote> 
<p><br><br><br></p> 
<h4><a id="2_408"></a>2）模型的显著性检验</h4> 
<p><img src="https://images2.imgbox.com/8c/79/1ls36WBp_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">resid <span class="token operator">=</span> result<span class="token punctuation">.</span>resid<span class="token comment">#残差</span>
fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>
fig <span class="token operator">=</span> qqplot<span class="token punctuation">(</span>resid<span class="token punctuation">,</span> line<span class="token operator">=</span><span class="token string">'q'</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">,</span> fit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/61/6b/5jKJMnzt_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>qq图显示，我们看到红色的KDE线与N(0,1)平行，这是残留物正太分布的良好指标，说明残差序列是白噪声序列，模型的信息的提取充分，当让大家也可以使用前面介绍的检验白噪声的方法LB统计量来检验</strong></p> 
</blockquote> 
<blockquote> 
 <p><strong>ARIMA(0,1,1)模型拟合该序列，残差序列已实现白噪声，且参数均显著非零。说明ARIMA(0,1,1)模型是该序列的有效拟合模型</strong></p> 
</blockquote> 
<p><br><br><br><br></p> 
<h3><a id="6_423"></a>6.模型预测</h3> 
<pre><code class="prism language-python">pred <span class="token operator">=</span> result<span class="token punctuation">.</span>predict<span class="token punctuation">(</span><span class="token string">'1988'</span><span class="token punctuation">,</span> <span class="token string">'1990'</span><span class="token punctuation">,</span>dynamic<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> typ<span class="token operator">=</span><span class="token string">'levels'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span> <span class="token punctuation">(</span>pred<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token number">1988</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>   <span class="token number">278.35527</span>
<span class="token number">1989</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>   <span class="token number">283.35088</span>
<span class="token number">1990</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>   <span class="token number">288.34649</span>
Freq<span class="token punctuation">:</span> AS<span class="token operator">-</span>JAN<span class="token punctuation">,</span> dtype<span class="token punctuation">:</span> float64
</code></pre> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>pred<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>data<span class="token punctuation">.</span>xt<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/75/1b/dxH3tHD5_o.png" alt="在这里插入图片描述"></p> 
<p><br><br><br><br><br></p> 
<h3><a id="7_458"></a>7.预测结果分析</h3> 
<p><img src="https://images2.imgbox.com/6d/a1/V23AzDEf_o.png" alt="在这里插入图片描述"><br> <strong><font color="red">平均绝对误差：</font></strong><br> <img src="https://images2.imgbox.com/6e/52/2zHP4cvO_o.png" alt="在这里插入图片描述"><br> <strong><font color="red">平均相对误差：</font></strong><br> <img src="https://images2.imgbox.com/ad/99/ScFXeljy_o.png" alt="在这里插入图片描述"><br> <strong><font color="red">预测均方差：</font></strong><br> <img src="https://images2.imgbox.com/19/66/OqRJybdp_o.png" alt="在这里插入图片描述"><br> 其中，y_i为序列的实际数据，<img src="https://images2.imgbox.com/1b/ee/FiggKRk9_o.png" alt="\widehat{y}_i">为模型预测数据。</p> 
<p>例如：<br> <img src="https://images2.imgbox.com/62/d1/QAUoPOmc_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>由上表预测结果及各项评价指标的对比可知，ARIMA模型预测结果明显优于移动平均法，从平均相对误差上来看，ARIMA模型为6.93％，比移动平均法提高了将近15％，且预测的均方差也较小，仅0.4298。由此可见：该模型能较准确地预测出备件消耗的变化趋势，可为备件消耗量的预测提供依据。</p> 
</blockquote> 
<p><br><br><br><br></p> 
<p><br><br><br><br><br> 引用：<br> <a href="https://blog.csdn.net/qixizhuang/article/details/86716149">https://blog.csdn.net/qixizhuang/article/details/86716149</a><br> <a href="https://zhidao.baidu.com/question/288273884.html" rel="nofollow">https://zhidao.baidu.com/question/288273884.html</a><br> <a href="https://zhuanlan.zhihu.com/p/343617191" rel="nofollow">https://zhuanlan.zhihu.com/p/343617191</a><br> <a href="https://blog.csdn.net/qq_43613793/article/details/109908418">https://blog.csdn.net/qq_43613793/article/details/109908418</a><br> <a href="https://blog.csdn.net/qq_45176548/article/details/116771331">https://blog.csdn.net/qq_45176548/article/details/116771331</a><br> <a href="https://blog.csdn.net/weixin_41555408/article/details/117218457">https://blog.csdn.net/weixin_41555408/article/details/117218457</a><br> <a href="https://blog.csdn.net/weixin_41636030/article/details/89138638">https://blog.csdn.net/weixin_41636030/article/details/89138638</a><br> <a href="https://www.zhihu.com/question/48447779/answer/112330897" rel="nofollow">https://www.zhihu.com/question/48447779/answer/112330897</a><br> <a href="https://blog.csdn.net/u010414589/article/details/49622625">https://blog.csdn.net/u010414589/article/details/49622625</a><br> <a href="https://wiki.mbalib.com/wiki/ARIMA%E6%A8%A1%E5%9E%8B" rel="nofollow">https://wiki.mbalib.com/wiki/ARIMA%E6%A8%A1%E5%9E%8B</a><br> <a href="https://blog.csdn.net/qq_45176548/article/details/111504846">https://blog.csdn.net/qq_45176548/article/details/111504846</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/abe8d4a500e563159746b06109b7a631/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何在Intellij IDEA中设置sout、psvm快捷键输入</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ba91e749962cb28f8cf5ca55384eec80/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基础排序方法总结与C&#43;&#43;实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于单片机的家庭防盗报警系统 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于单片机的家庭防盗报警系统" />
<meta property="og:description" content="摘 要 随着社会的发展，人们生活水平的不断提高和家居用品的高档化，家庭安全隐患也随之增加，所以人们便进一步提高了对家庭的保护意识。因此，这就不得不促使安全防盗报警系统的普及与推广。
然而传统的防盗措施难以实现人们的需求，所以本设计根据要求设计了一款基于GSM网络的家庭防盗系统。设计以STC89C52单片机为核心，采用红外传感器作为前端探测器，通过GSM移动网络，将报警信息直接发送给用户，使用户能够及时作出相应的措施减少甚至防止受到损失。
随着无线通讯网络在世界范围内的发展，本设计采用的GSM模块充分体现了它的存在价值，比只采用声光报警系统更具有实用性和智能化，拥有较好的应用前景。本文详细介绍了防盗报警器的设计过程，对主要硬件电路和软件功能的实现做了深入的研究分析。本设计所实现的安防功能具有性价比高、隐蔽性强、能耗低、灵敏度高、抗干扰能力强等优点。
关 键 词 :防盗报警；智能家居；GSM网络；短信息
ABSTRACT
With the development of society, people’s living standards continue to improve and the high-end home appliances, family security risks also increase, so people will further enhance the awareness of the protection of the family. Therefore, this will have to promote the popularization and promotion of security alarm system.
However, the traditional security measures are difficult to achieve the needs of people, so the design according to the requirements of the design of a network based on the GSM home security system." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6c8754d70b21f19a10d0e2d06389bc0f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-14T16:20:52+08:00" />
<meta property="article:modified_time" content="2024-03-14T16:20:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于单片机的家庭防盗报警系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="__0"></a>摘 要</h3> 
<p>随着社会的发展，人们生活水平的不断提高和家居用品的高档化，家庭安全隐患也随之增加，所以人们便进一步提高了对家庭的保护意识。因此，这就不得不促使安全防盗报警系统的普及与推广。<br> 然而传统的防盗措施难以实现人们的需求，所以本设计根据要求设计了一款基于GSM网络的家庭防盗系统。设计以STC89C52单片机为核心，采用红外传感器作为前端探测器，通过GSM移动网络，将报警信息直接发送给用户，使用户能够及时作出相应的措施减少甚至防止受到损失。<br> 随着无线通讯网络在世界范围内的发展，本设计采用的GSM模块充分体现了它的存在价值，比只采用声光报警系统更具有实用性和智能化，拥有较好的应用前景。本文详细介绍了防盗报警器的设计过程，对主要硬件电路和软件功能的实现做了深入的研究分析。本设计所实现的安防功能具有性价比高、隐蔽性强、能耗低、灵敏度高、抗干扰能力强等优点。</p> 
<p>关 键 词 :防盗报警；智能家居；GSM网络；短信息</p> 
<p>ABSTRACT</p> 
<p>With the development of society, people’s living standards continue to improve and the high-end home appliances, family security risks also increase, so people will further enhance the awareness of the protection of the family. Therefore, this will have to promote the popularization and promotion of security alarm system.<br> However, the traditional security measures are difficult to achieve the needs of people, so the design according to the requirements of the design of a network based on the GSM home security system. Design with STC89C52 microcontroller as the core, using infrared sensor as the detector front-end, through the GSM mobile network alarm information is sent directly to the user, the user can timely make corresponding measures to reduce or even prevent damage.<br> With the development of wireless communication networks in the world, this design uses the GSM module fully embodies the its existence value, the sound and light alarm system is more practical and intelligent, has good application prospects. This paper introduces the design process of anti-theft alarm, the main hardware circuit and software functions to do a deep research and analysis. The security function of this design has the advantages of high cost performance, strong concealment, low energy consumption, high sensitivity, strong anti-interference ability and so on.</p> 
<p>Key words: Burglar alarm; smart home; GSM network; short message</p> 
<h3><a id="_20"></a>目录</h3> 
<p>第一章绪论 8<br> 1.1引言 8<br> 1.2选题背景与意义 10<br> 1.3研究现状 11<br> 1.4本文结构 12<br> 第二章 系统总体方案设计 13<br> 2.1基于GSM家庭防盗报警系统设计方案 13<br> 2.1.1.设计要求 13<br> 2.1.2 系统功能描述 13<br> 2.1.3 系统方案的对比与选择 14<br> 2.2系统总体框图 15<br> 2.2.1 系统各部分组成 16<br> 2.3 本章小结 16<br> 第三章 基于STC89C52单片机系统硬件电路设计 17<br> 3.1系统硬件组成 17<br> 3.2各部分器件的选型 17<br> 3.2.1蜂鸣器方案选择 17<br> 3.2.2传感器的选择 18<br> 3.2.3GSM模块的选择 18<br> 3.3各模块电路的设计 19<br> 3.3.1 STC89C52单片机最小系统 19<br> 3.3.2 GSM无线通讯模块 21<br> 3.3.3电源电路模块 22<br> 3.3.4按键控制电路 22<br> 3.3.5声光报警电路 23<br> 3.3.6 热释电红外传感器 24<br> 3.3.7程序下载口 27<br> 3.5本章小结 29<br> 第四章 基于单片机系统软件设计 30<br> 4.1 系统软件流程图 30<br> 4.2 各模块软件设计 31<br> 4.2.1信号采集程序流程图 32<br> 4.2.2报警电路子程序 33<br> 4.2.3中断程序流程图 34<br> 4.2.4发短消息子程序 35<br> 4.3本章小结 36<br> 第五章 系统调试与分析 37<br> 5.1 调试过程 37<br> 5.1.1 硬件调试 37<br> 5.1.2软件测试 38<br> 5.1.３调试过程中遇到的问题及解决方法 39<br> 5.2 调试结果 39<br> 5.2.1 系统运行效果图 39<br> 5.2.2调试结果与分析 39<br> 5.3 本章小结 39<br> 第六章总结 39<br> 6.1主要工作及结论 39<br> 6.2存在的问题 40<br> 6.3感想与收获 41<br> 参考文献 43<br> 附录1：原理图与PCB图 43<br> 附录2：原程序代码 43</p> 
<h3><a id="_86"></a>第一章绪论</h3> 
<p>1.1引言<br> GSM移动通讯模块上面各个模块，如芯片，存储器等在一块线路板上，有独立的操基带处理、提供标准接口、GSM射频处理等功能。所以，GSM移动通讯模块具有基于GSM网络进行通信的所有基本功能，最重要的还有独立的操作系统，例如：可以发送短信、语音通话、GPRS数据传输等。就上述而言，如果GSM模块加上了键盘、显示屏和电池的话，其功能就相当于一部手机的功能。<br> 目前，不仅在工业领域中广泛地应用GSM模块，而且在其他许多行业中都能看到GSM模块应用的产品。比如说：在车辆上装有监控系统，想要将车辆行驶的GPS数据传输到车辆管理中心，就可以利用GSM模块来实现；在居民用电用水检测系统中，通过使用GSM模块，就可以实现远程智能抄表，可以实时地将用户的用电和用水量反馈到户主那里；在测绘领域，可以在测绘点尤其是在很偏僻或者环境恶劣的测绘点安装GSM模块实，这样便可以实现实时监控测绘点数据，因而不需要人工来收集数据；在家居安全防范中，可以安装基于GSM模块的远程无线报警系统，一旦家中发生了火灾、煤气泄漏或者盗贼闯入等情况，可以通过无线网络立即通知户主和报警。其作用不止如此，在其他一些国家，为行为能力偏弱的老人和小孩佩戴带个人跟踪器，这样可以在一定程度上防止老人和小孩走失或者以外的发生，也在防止儿童被拐卖上起到一定作用，这些追踪器中也是包含了GSM模块。可以说，随着无线通讯网络建设的完善，GSM模块的应用领域将会越来越广。<br> 由此可见，GSM系统是基于无线移动通讯体制中比较成熟、完善、应用最为广泛的一种系统。目前，我国人们所用的移动通信网的主要形式就是GSM系统，并且在全国基本上已经覆盖了GSM数字蜂窝移动通信网。这个庞大的通讯网可以提供语音通话、收发信息、数据传输等多种业务和功能。基于GSM通讯功能可以做成各种检测、监控数据信号和控制命令的数据通讯系统，这个数据通讯系统在远程监控、个人通讯终端、定位导航等领域发挥了极其重要的作用。因为无线通讯网络在全球范围内实现了联网和漫游，建立公众GSM网络也就不需再建设专用的通讯网络，所以这有力地推动了实时传输数据功能的短信息应用在全球的迅速发展和人们的青睐。<br> 伴随着信息技术飞速发展，科技技术也在日新月异的进步，人们对安全防范的要求也越来越高，这就不得不促使着安全防范系数需要进一步地提升。当今社会再也不能仅仅依靠以前的简单的、局部的报警器了，而是要向智能、集成的安全防范系统方向看齐。目前，市场上的报警器形形色色，种类很多，像以太网、集群系统还有固话拨号等等，虽然它们都能达到防盗报警的功能，但是其所暴露的缺点也很明显，因此人们也逐渐不能接受这些报警器所带来的不利和缺陷。它们各自的缺点如下：<br> （1）固话拨号，电话线易被切断或故意占线。这样一来，报警系统或是失去信号或是被占用网络都会使其不能够发挥报警通讯的作用，这样就使固定电话拨号在关键时刻失灵。<br> （2）与固定电话拨号所呈现的缺点类似，而且以太网造价高，不易在公众中普及推广。<br> （3）集群系统的缺点更加明显，首先其功耗很大，浪费能源；其次，刚开始建设成本很高，在以后的一长段时间内都要对其经常维护，而且维护费用不菲，而且频点要自费。。<br> 通过上面几种报警方式的描述与对比，不难发现各自的优点和缺点，为了更廉价，更优质、也更方便的实现家庭防盗报警。本次设计的基于GSM的家庭防盗报警系统不像固定电话拨号或者以太网那样依赖电缆线来执行报警，也不用集群系统那样繁冗而庞大的系统，而是依靠GSM网络，直接在事主手机上就能收到报警信息，这种方式对比而言，更直观，更有效。本次设计不仅没有上述出现的各种问题和弊端，还可以达到实时监控的功能，这对于防盗报警的功能来说是一大进步，对用户来说也是非常实用的。它采用红热释传感器进行检测，取代了传统防盗网防盗窗，将有形化为无形，这样不至于在火灾、地震等灾难时阻挡了生命的绿色通道。该系统的功能还不仅如此，此设计还可以作为火灾、烟雾等报警器的母版，只要配备相应的传感器和相应的系统程序就可以了，这样就进一步提升了该系统的实用性和功能的强大性。<br> 1.2选题背景与意义<br> 随着经济的不断发展，人们生活水平的不断提升，特别是物质水平的不断提高，人们家中的高档电子产品及有价值的物品越来越多，因此人们越来越注重自身的安全和财产安全，为了保护自身和家庭财产，人们会通过各种办法尤其是购买报警产品来挺高家庭的安全系数，所以家庭安全的防范已然成为一种市场需求；同时伴随着城市人口流动的急剧增加，也提高了家庭安全防范的难度。然而，目前仍有很多人依赖于传统的机械式安全防范系统，比如安装防盗网，防盗窗等等。纵然这些传统安防措施能够起到一定的安防作用，但是随之而产生的各种弊端也相应而生，给他人、环境和公共安全等带来了诸多困扰。例如：安装价格挺高，影响城市环境尤其是给高层建筑安装防盗窗更显凌乱不堪，发生火灾地震的时候不易逃生、而且与之临近的楼层如果没有安装这些防盗措施的话会更容易招致盗窃的可能等。因此，传统的安防系统因为拥有上述逐项弊端，已经越来越不适应时代的发展需求。在这种情况下更需要新一代的安防系统，随着科学技术的迅猛发展和越来越广泛的应用，家居智能化也正走向每一个家庭，科学技术推动者家庭安全防范系统一步步向着从本地向远程监控发展，从周边防范向内部防控靠拢，在人们对美好生活的追求中，家庭防盗报警系统迅速崛起。然而以闭路电视为首的高端防盗系统虽然能够非常有效的进行防盗，但是因其安装成本过高而不同普遍应用于普通家庭安全防盗中。在市场上还可以看到很多其他类型的防盗传感器，有压力触发式、开关电子式、遮光触发式等原理制作成的报警器，虽然这些传感器得到了部分用户的认同，但它们的缺点也让更多的用户望而却步：（1）压力触发式：该报警器的工作原理是当有人因走动触发压力传感器时，报警系统会工作，这就很容易因主人的走动而被震动传感器检测到，从而导致误报的发生，或者因为主机停机而带来失报的可能，这样一来，安防系统的可靠性能会大大降低。（2）开关式电子防盗报警器的缺点也很明显，因为其多数只有一个定点的缘故，只有在定点那极小的范围内很有效，一但超过那个小范围就很容易出现失报现象，另外，其开关的容易损坏也会增加失报率。（3）遮光触发式：此类报警器较之两者者而言，性能稍好，但是如果放置位置不够好的话，也很容易引起误报，例如阳光和其他物体的干扰在所难免，这样就会很容易引起系统的误报，所以这种报警器的工作性能也不是很可靠。<br> 这样一来，就迫切需要一款既经济又有效的安全防盗系统，那便是基于GSM短信模块的家庭无线防盗报警系统。<br> 1.3研究现状<br> 1）在我国，智能小区中实现安全管理的重中之重就是家庭安全防范报警系统，智能小区的防范系统可以有多重形式，其中像防火防盗报警、家庭煤气泄漏报警等，这些报警装置可以在接收到各自检测到的信号之后，通过信号处理，利用无线网络将报警信息传送到相关人员的手机上，这样便可以及时了解灾情信息，然后针对各种灾情做出相应的挽救及处理措施。另外还需要配备一定数量的摄像监控装置，这也是我国建设部规定的，因为这可以再整体上系统地保护人们和财产的安全，也对不法分子起到一定的震慑作用。随着人们对安全防范要求的进一步提高，因此这方面的技术也在不停地发展，尤其是建立在GSM无线移动网络下的远程报警方面的发展尤为迅速。像被动红外、超声波和微波三种不同的探测技术是探测器的发展主要表现方向，随之而产生的各种不同类型的探测器也不断展现在世人面前。复合式探测器，可以说是在这方面最有前途的。发展前景最好是将检测器进行组合，组合后的探测效果将会远远提高报警系统的工作性能，同时降低报警系统存在的失报和误报率。复合式探测器可以两个探测器组合，也可以三个及以上探测器进行组合，当然后者报警效果更好，也更为复杂。复合式探测器可以有很多种，但是常见的主要是将超声波或微波探测器与红外探测器进行组合。伴随着网络的发展和普及，报警系统也逐渐向着远程报警的方向飞速发展，报警方式也在潜移默化的发生着，从有线到无线再到联防网络的报警模式已经成为势不可挡的趋势，这也促使着相关产品的换代更新、丰富多彩。<br> 2）按照规模，报警系统有小/中/大三种规模。根据市场需求和小规模报警产品所呈现的简易价廉等优点，小规模防盗报警受到多数用户的认可，其产品也很容易就能购买到。小规模报警系统主要适合于家庭或是要求不高的地方，例如无线式系统就很有吸引力。中规模防盗报警系统，在结构和功能上较之小规模系统更为成熟优越，目前市场上已经出现的中规模报警系统主要有闭路电视监控系统。中规模报警系统存在的问题是系统性能比真正的报警系统差，缺少人机界面和管理等功能，但是相对大规模系统而言，其价格方面较低，能得到众多用户的认可，不少此类产品已经出现在市场上了。对于大规模防盗报警系统来说，它能实现的功能非常强大，微机系统非常完善，监控软件也很丰富，能够满足人们对智能化所需要的绝大多数需求，该系统能够充分发挥微机的作用，它可监控数或控制的分机多达十几个甚至上百个，其性能也比较好。尤其是国外在这方面研究得较早也做得很出色，做得比较好的是美国C&amp;K 公司，相比之下，国内在这方面稍显不足。不过随着国内科技的飞速发展，借鉴国外优秀产品研发的经验，一定可以创造出优秀的防盗产品。<br> 3）目前，国外品牌的防盗报警系统在我国市场上占据主导地位，国外的好多产品是国内产品无法企及的，客观原因主要是国内起步时间比较滞后，从2000年开始，国内一些研发生产厂商开始长足发展，防盗产品的生产厂商的迅速发展极大地促进了安防报警系统的发展。但是相比之下，国外的一些厂商做得还是非常出色的，比如美国棋诺亚公司，在世界上排名第一，是北美最大的国际安防公司，它的发展时间很早，差不多从上世纪就开始了对防盗报警系统的研究，其当时业务和水平很低， 70年代初，为了更好地适应社会的发展，该公司在很大程度上调整了产业的整体发展方向，引用网管技术，建立网管中心、开发集成技术，其规模开始愈发壮大，技术水平飞速进步，联网服务平台水平已在世界上遥遥领先，这些都是值得我国效仿和追赶的。<br> 另外，大部分工程安装防盗报警产品因为其需求品质较高，而像美、日、韩等国家的一些品牌品质能够达到要求，其产品性能完善，工作运行稳定，技术成熟，所以大都倾向于国外品牌。<br> 1.4本文结构<br> 第一章绪论分别讲解了系统的开发背景，国内外研究的现状，又介绍了本文主要研究内容与结构。<br> 第二章系统总体框架，首先对GSM家庭报警系统的设计要求做了阐述，其次根据要求，提出了本课程设计要达到的目标，最后给出了总的设计方案，并阐明了设计系统的工作流程。<br> 第三章系统硬件设计，分别对单片机最小系统，GSM模块，主动式红外线检测模块，MQ-5可燃气泄漏检测模块，声光报警模块做了详细的介绍，包括其主要功能芯片的讲解，硬件电路图及工作原理。<br> 第四章系统软件介绍，对GSM短信模块，TLC1543模数转换，外部中断及整机的软件流程图的分析。<br> 第五章主要描述了系统的实现和调试，并对PCB的制作进行了讲述。<br> 第六章中对本文进行了总结，并对将来的系统进行了展望。</p> 
<h3><a id="__113"></a>第二章 系统总体方案设计</h3> 
<p>2.1基于GSM家庭防盗报警系统设计方案<br> 2.1.1.设计要求<br> （1）能够对不法分子入室盗窃的行为进行检测报警，并具要求报警装置具有一定的隐蔽性。<br> （2）系统检测到非法入室人员可以进行声光报警，同时能够将信息以短消息的形式发送到事主的手机上，以便事主及时处理。<br> （3）用户能够自由地控制系统的开、关机。<br> （4）尽量采用合适且性价比高的元器件，节省制作成本并使设计电路尽量简单。<br> 2.1.2 系统功能描述<br> 基于GSM短信的家庭防盗报警系统组成如图2-1所示。该系统主要由几个模块组成，这些模块主要是前端探测器、单片机、GSM模块还有用户终端。最小系统处理器采的是STC89C52单片机，由单片机最小控制各个模块进行相应的工作，整个系统由软件来控制驱动。整个系统实现的功能是：当家庭人员外出的时候，报警器处在布防状态，探测器持续检测是否有人体红外线；因为没有检测到人体红外线，因此锁相环输出低电平，报警只是处于监控状态；当有人闯入时，处在监测点上的红外线传感器将会检测到人体发出的红外线，传感器模块会将检测到的信号转换成电信号，这个电信号经过放大后经相应的引脚传送到单片机中。系统软件会识别传送进来的电信号，然后经过判断之后，若确定为报警信号后就将进行下一步决策。单片机通过引脚发出控制信号，这些信号经放大后控制相应的报警模块进行报警，就是声光报警和短信报警。短信的具体内容是在 软件中事先设定好的报警内容，从而实现安全防盗实时报警的功能。本系统带有复位和解除报警按键，通过按下这两个按键都可以消除报警，不同的是按下复位键之后系统是重新进入布防状态，等待下一次触发报警；而按下撤防键后系统不会进入布防状态，即使有人也不会触发报警系统。另外报警时间可以自己来设定。</p> 
<p><img src="https://images2.imgbox.com/0a/39/3w8qTzgw_o.png" alt="在这里插入图片描述"></p> 
<p>图2-1 基于GSM短信模块的家庭防盗报警系统</p> 
<p>2.1.3 系统方案的对比与选择<br> 方案一：基于8031单片机的防盗报警系统<br> 该系统由单片机最小系统、 检测装置、寄存器、报警模块、数码管等部分组成，其中8031/74LS373、EPROM2764组成了8031单片机最小系统。8031单片机的P1 ：P1.0——P1.7口可以将报警信号输入P1口的8位开关，每一个I/O口对应一个报警位置。经过处理后的报警信号会变成电信号，这个电信号经过与P3.5连同的同相放大器放大之后用来驱动蜂鸣器发出报警声音。8031的串行口用来连接移位寄存器以便连接数码管，并控制数码管的显示功能。该系统的功能是通过8路报警位置的检测，判断是否接受到报警信号，如果有一路存在报警信息，就会通过对应的I/O口将信息传送到单片机中去，在通过单片机控制相应的声光报警模块和数码管显示的功能。<br> 报警系统采用8031单片机作为最小控制系统，其优点有很多，但是缺点也比较明显。相比较以往所用的逻辑电路控制系统，8031单片机最小系统在功能的优越性上和系统的灵活程度上都有很大的优势。但是随着时代的不断发展与科技的进步，目前所使用的安全防盗监控系统也要紧跟时代的步伐，因为传统的防盗报警器存在很多缺点。例如用来采集信号的传感器想要工作的话就要为其单独布线，这样就降低了系统的隐蔽性。另外，各种模块都集成在一个板子上，这样不仅限制了报警信号采集覆盖面，而且各个模块之间还可能会有干扰，降低了系统的可靠性，同时因为没有远程监控系统的功能，这样即使报警系统已经工作了，事主也无法及时了解家中的情况，这样一来，所谓的防盗报警系统也就形同虚设。<br> 方案二：基于GSM网络的家庭防盗报警系统设计<br> STC89C52单片机为该家庭防盗报警系统核心，相当于控制中枢系统的模块组成有STC89C52单片机最小系统、声光报警、GSM无线通信模块、红热释传感器数据信息采集四大部分组成。当有不法分子入室的时候，系统通过红热释传感器采集人体红外线，再将采集到的信息传送给单片机，经过单片机的处理后，单片机会通过控制发光二极管和蜂鸣器，令它们发出声光报警信息，与此同时GSM无线通信模块会给相关人员发送报警短信，以此来及时的通知事主家中报警信息，这样事主便能根据报警信息及时作出相应措施。<br> 如今，随着移动通信网络的普及，已经在全世界范围内迅速发展，可以连接到世界上绝大多数地方。因此，GSM的短信息系统已经拥有广泛的用户，不仅因为其快捷方便,而且价格比较便宜。本设计就是因为GSM网络所呈现出的优点而选定其作为报警系统的载体，来实现远程家庭防盗报警系统。通过GSM网络，将事主的手机作为终端来接收报警短信，这样即使事主不在家或者不能及时赶回也能对家中发生非法入侵情况了如指掌。另外，本设计还有很多比方案一更多的优点，例如装置的隐蔽性好、检测范围广、可远程监控等，经过对比分析这两种方案，最终选择方案二作为本次设计的选择。<br> 2.2系统总体框图<br> 根据设计任务的要求来分析，系统的总体框图如图2-2所示：</p> 
<p><img src="https://images2.imgbox.com/02/01/jUiqAyXn_o.png" alt="在这里插入图片描述"></p> 
<p>图2-2系统总体框图<br> 2.2.1 系统各部分组成<br> 本次家庭防盗报警系统包括硬件和软件设计两个部分。根据系统整体框图，可以清楚明了地看出该系统的硬件部分主要有：传感器模块、单片机模块、GSM模块、声光报警模块及相关电路，另外还有输入/输出设备、以及外围应用电路等。对于此设计的核心来说，单片机就是整个防盗报警系统最主要的部分，相当于控制中枢，通过单片机才能对收集来的信息进行判断，然后进行处理，进而去控制其他各模块的工作，所以此次设计的家庭防盗报警系统也就相当于单片机在应用中的一种体现。单片机软件系统包含了各个工作程序，是由各个子程序和主程序组合而成，用来实现整个报警系统的运行工作。<br> 2.3 本章小结<br> 本章通过介绍毕业设计的设计要求和目的，让我们大体了解了研究的方向。另外，也对系统整体功能进行了介绍与描述，通过系统总体框图可以直观的看出各模块之间的联系与相互作用。通过比较8031单片机和STC89C52单片机的优缺点，明确指出了系统选中STC89C52单片机的优越性和必要性。大体介绍了系统的软件和硬件的组成，明确了单片机应用系统的研制过程等。</p> 
<h3><a id="_STC89C52_171"></a>第三章 基于STC89C52单片机系统硬件电路设计</h3> 
<p>3.1系统硬件组成<br> 根据设计任务书要求及系统设计功能要求，确定本次毕业设计系统由5大模块组成<br> 1、核心控制单元STC89C52单片机最小系统模块;<br> 2、红外传感器信息采集模块<br> 3、声光报警模块<br> 4、GSM无线通信模块<br> 5、电源供电模块<br> 3.2各部分器件的选型<br> 3.2.1蜂鸣器方案选择<br> 方案一：压电式蜂鸣器<br> （1）压电式蜂鸣器在早期应用非常广泛，其主要材料是由锆钛酸铅或铌镁酸铅压电陶瓷材料制成。在陶瓷片的两面镀上银电极，然后需要对其进行极化和老化处理，处理之后再用黄铜片或者不锈钢片粘在一起。多谐振荡器、阻抗匹配器是压电式蜂鸣器的主要组成部分，另外还有压电蜂鸣片和共鸣壳等部分，有些特殊的压电式蜂鸣器会在外壳上装发光二极管来显示蜂鸣器的工作状态。<br> （2）压电式蜂鸣器的工作原理：当接通电源后，电路中产生电流，驱动多谐振荡器起振，然后阻抗匹配器就会推动蜂鸣片使之与共鸣壳产生共鸣而发出声音。<br> 方案二：电磁式蜂鸣器<br> （1）电磁式蜂鸣器的结构与压电式蜂鸣器大不相同，它主要是由振荡器、电磁线圈、振动膜片、磁铁以及外壳组成。<br> （2）电磁式蜂鸣器的工作原理为：接通电源后，电磁线圈有电流通过，电磁线圈就会产生磁场，振荡器会产生的音频信号。振动膜片因为在电磁线圈和磁铁的同时作用下而产生周期性的振动，从而发出声音。<br> 经过上述对比分析，方案二优于方案一，且更易于理解和掌握其原理，所以选择用电磁式蜂鸣器作为声音报警装置。但是想要驱动电磁式蜂鸣器工作，必须使得电流达到一定值，而单片机所输出的电平太小，所以需要一个同向放大电路来实现对电流的放大作用，通过查阅相关资料，最终选择三极管C8550，通过它来实现放大电流用于驱动蜂鸣器工作。<br> 3.2.2传感器的选择<br> 传感器通常由敏感元件和转换元件组成，并把检测到的被测量通过转换元件按照一定的规律转换成所需要信号，我们把能实现这类功能的器件或装置称为传感器。传感器是能够感受到被测量的一种装置，并将检测感受到的信息按一定规律变换成为电信号或其他所需形式的信息输出、传送给单片机，由单片机进行下一步的判断、处理、控制功能。传感器检测环节是整个系统信息的来源，是实现自动控制的前提。<br> 为实现防盗报警系统的功能，本次设计采用被动式红外探测器。被动红外探测器主要是探测和接收外界的红外辐射，而它本身并不会发出能量，这种被动式红外探测器，因为接收的红外波长是8～14μm，而人体所发出的波长中有一半是在这种传感器的接收范围之内，所以这种传感器基本上只对人体发出的红外线波段敏感，因此，此款红外线探测器更适合检测人体信息。<br> 通过了解各种类型的传感器，分析各类传感器的优缺点和合理性，加上本次设计的要求及而且本次设计主要检测的是是否有外来入侵居所的不法分子，所以，最终确定本设计选择的传感器是热释红外传感器。<br> 3.2.3GSM模块的选择<br> 本设计选用了应用十分广泛的SIM900A无线通讯模块，SIM900A是一个双频的GSM/GPRS模块，该模块非常省电，正常情况下耗流仅在1毫安。用户可以很容易使用TCP/IP协议，这就非常方便于数据的传输。由于尺寸只有24mmx24mmx3mm,所以SIM900A几乎可以满足所有用户对其空间尺寸的要求。基于这些优点和为了达到报警系统无线通讯的功能，选择SIM900A作为GSM模块。<br> 3.3各模块电路的设计<br> 3.3.1 STC89C52单片机最小系统<br> STC89C52 单片机是新一代单片机，它的主要引脚功能有：<br> 40/20 引脚：接电源/接地。<br> P0 端口：P0 口是双向I/O口，本次设计中没有用到P0口，这里就不多做介绍了。<br> P1 端口（P1.0～P1.7，1～8 引脚）：P1口是8位双向 I/O 口，它的内部带有上拉电阻，所以外面就没有必要在接上拉电阻了。P1口作输入口使用时，首先要将引脚内的输出锁存器置1。本次设计共用到了P1.0到P1.6端口，其中P1.0、P1.1、P1.2分别接了三个按键，按键按下会使相应的I/O口置低，促使其使能，然后控制相应的功能。P1.3口作为传感器信号输入端口，外部传感器将采集到的红外线信号处理后变为相应的电信号，然后输送到P1.3口，以便作为单片机执行下一步骤的前提。P1.4到P1.6连接下载端口，作为程序烧入的通道。<br> P2 端口（P2.0～P2.7，21～28 引脚）：P2 口也是一个8位双向I/O端口，内部也带有上拉电阻。本次设计主要用到了P2.0到P2.3口，其中P2.3口作为蜂鸣器的控制端口，当单片机接收到报警信号并确认之后，会通过P2.3端口控制蜂鸣器电路。<br> P3 端口：P3端口同样搭载一个8 位双向I/O端口，内部也带上拉电阻。它的P3.0端口作为串行口的出入端，P3.1口作为串行口的输出端，通过这两个端口与GSM模块进行相连，达到传输控制信息的功能。通过这个串行口通信可以控制GSM模块发送报警信息到终端。<br> RST（9 引脚）：复位输入。与复位按键相连，用来完成单片机的复位初始化操作。<br> ALE/ ROG：地址锁存控制信号，，双功能引脚。<br> PSEN(29引脚)：外部程序存储器选通信号。<br> XTAL1/ XTAL2：通过这两个引脚来外接晶振电路。<br> EA/APP：双功能引脚，允许访问外程序存储器，EA=0/1：片外/片内存储器有效。<br> 由单片机和基本的电路构成为单片机最小系统，如图3-1所示。<br> <img src="https://images2.imgbox.com/59/90/Nj74tKPI_o.png" alt="在这里插入图片描述"></p> 
<p>图3-1 单片机最小系统电路接口图<br> STC89C52 单片机的供电为5V直流电源，直流电源由三节干电池提供。<br> 复位电路是单片机最小系统中的一部分，本次设计采用的是通过外部的复位按钮来实现手动复位。根据需要，复位电路外部接了一个阻值为10K的上拉电阻，通过这个上拉电阻的作用，可以提高输出电平，输出的高电平可以驱动外部蜂鸣器报警电路的工作。电容C1的值根据时钟频率的不同来选择，根据经验或实验可以确定它的值在10uF左右。本设计方案使用的晶振频率为12MHz，进过计算之后可得到复位信号时间至少为2us。复位电路用来确定工作的起始状态，相当于对单片机完成重启的工作，使之能够完成再一次设防检测报警的功能，说白了复位电路就是让单片机内部数据从0000H位置开始运行。在单片机系统工作时，在所难免的会遇到外界不明因素的干扰或者是线路板上自带的一些干扰，这些都有可能导致程序跑飞或者系统无法工作的现象发生，为了解决这个问题 ，就需要将单片机控制回到起始工作状态，这时只要按下复位按钮，内部的程序就会自动从头开始执行，另外也可以采用屏蔽的方法来解决这一问题。<br> 时钟电路则相当于单片机的心脏就像单片机最小系统相当于整个系统的心脏一样，时钟电路的作用有很多，像此次用到的时钟电路可以用来完成延时功能，可以在通讯时进行调频，另外还有用作计时器的功能还有就是用来对键盘消抖等功能。时钟电路对单片机的工作有引导作用，可以控制其工作节奏，时钟电路也可以控制单片机的执行速度。XTAL1是反向放大器的输入，XTAL2则是输出，因为采用的是片内振荡器，，所以两个引脚都要外接。本次采用的晶振频率为12MHz，即振荡周期为1/12us，一个机器周期等于一个振荡周期乘以12，,所以一个机器周期为1us。<br> 3.3.2 GSM无线通讯模块<br> GSM无线通讯模块选型是SIM900A，因为它的尺寸为24x24x3mm，对空间的要求很小，因此可以满足大多数用户的再空间体积上的要求。提供的硬件接口有：键盘、显示、串口、编程、音频等接口。该模块的这些接口几乎可以和所有的客户电路板相连接。下图3-2为该模块的功能框图。<br> <img src="https://images2.imgbox.com/c8/ee/QCFdL78C_o.png" alt="在这里插入图片描述"></p> 
<p>图3-2 SIM900A的功能框图<br> SIM900A只需要电压范围3.4V到4.5V的单电源供电，SIM900A在猝发模式时电流会高达2A，这就需要电源在供电的时候能够保证足够的电流。从电池电压输入端来看，最好使用一个旁路电容，可以使用多层陶瓷片电容，但因其价格比较昂贵，这里使用比较廉价的470uF的电解电容，以降低成本，另外在布PCB板时，该电容要尽可能的靠近VBAT引脚。<br> SIM900A在与3.3V-4V单片机通信时可以直接将串口对应连接，将单片机的TXD端口连接到SIM900A的RXD端口上,将单片机的RXD端口连接到SIM900A的TXD端口上，GND端口与GND端口相连。若想采用5V的单片机，需要另加电平转换电路。在对SIM900A模块进行上电之后，LED指示灯会亮，这时该模块系统开始工作，接下来的几秒钟之内，信号指示灯一直处在快闪状态，这时说明在寻找网络，差不多会在5S钟之后，指示灯会变成慢闪即3秒灭1秒亮，此时说明已经连接到网络，可以对模块进行操作，实现收发短信，数据传输等功能。该模块的引脚功能为GND：电源地端。RXD：从DTE设备的TXD信号线上接收数据。TXD：发送数据到DTE设备的RXD信号线上。具体如图3-3所示：<br> <img src="https://images2.imgbox.com/a2/13/T9ztTK4U_o.png" alt="在这里插入图片描述"><br> 图3-3GSM无线通讯模块电路接口<br> 3.3.3电源电路模块<br> 电路在整个设计中起着很重要的作用，是提供器械运转的原动力。本系统供电采用三节并联干电池供电，供电电压为4.5V，电源模块电路为电源开关、电阻和指示灯组成。SW1是电源自锁开关，按下自锁开关后，系统会通电，电源指示灯即发光二极管D4会指示电源是否接通。设计图如图3-4所示：<br> <img src="https://images2.imgbox.com/e7/41/GJupjPpL_o.png" alt="在这里插入图片描述"><br> 图3-4 电源电路</p> 
<p>3.3.4按键控制电路<br> 按键控制电路总共有三个独立按键，分别接到单片机的三个I/O接口上，这三个按键的功能分别是手动紧急报警键、布防键、取消报警键。<br> 紧急报警键：当遇到紧急情况或想直接实现报警功能的时候，直接按下紧急报警键，这时整个报警系统就会开始发挥作用，蜂鸣器会发出报警声，报警指示灯会不停的闪烁同时GSM模块会向手机终端发送报警信息，完成报警功能。<br> 按下布防键的时候：布防指示灯会一直处在闪烁状态，说明此刻正在布防，30秒之后，布防指示灯便由闪烁状态变为常亮，说明已经布防结束。布放结束后如果有人体经过传感器的监测范围之内的话，红外热释电就会将采集到的信号转换为电平信号，输出到单片机的P1．3口，这时会将该端口电平置高，这时黄色灯会被点亮，这时就会触发报警系统，表示家里有非法入侵者进入。<br> 当按下取消报警键的时候：正在报警的蜂鸣器和报警指示灯将会进入初始状态。按键原理图如图3-5所示。<br> <img src="https://images2.imgbox.com/59/b0/0t194oBK_o.png" alt="在这里插入图片描述"><br> 图3-5　按键原理图<br> 3.3.5声光报警电路<br> 指示灯电路由3个不同颜色的发光二极管串联电阻后连接到单片机的双向I/O端口，外接VCC电源，当单片机I/O引脚被置低电平时，发光二极管两端就会产生电压差，形成的电流点亮发光二极管，起到报警和指示的作用。如图3-6所示。</p> 
<p><img src="https://images2.imgbox.com/b1/24/Of3BaFLx_o.png" alt="在这里插入图片描述"></p> 
<p>图3-6　指示灯电路<br> 蜂鸣器报警电路是由S8550三极管和蜂鸣器模块组成。因为单片机提供的电压太小，无法驱动蜂鸣器工作，所以采用ＰＮＰ型的功率驱动三极管S8550来驱动蜂鸣器发声。当单片机P2．3 口为低电平时，触发三极管饱和导通，驱动蜂鸣器发出声音；当单片机P2．3 口为高电平时，三极管截止，蜂鸣器就会停止报警。<br> 将蜂鸣器正极通过三极管接到VCC电源上，负极直接接地，三极管的基极B串联一个限流电阻R3（2K）后接到单片机的P2.3引脚上并由该引脚来控制，当P2.3输出低电平时，三极管就会导通，这时由电源经过三极管到蜂鸣器再到地形成一个回路，这样一来，回路电流就会驱动蜂鸣器发出声音。<br> 另外，如果想控制蜂鸣器的音色音调，对单片机引脚P2.3所对应的程序进行改动来改变P2.3端口的输出波形的频率来实现；如果想要控制蜂鸣器的声音大小，则可以通过改变P2.3输出高低电平的占空比来实现。<br> <img src="https://images2.imgbox.com/92/d3/TObXygyJ_o.png" alt="在这里插入图片描述"></p> 
<p>图3-7　蜂鸣器报警电路<br> 3.3.6 热释电红外传感器<br> (1)热释电红外线传感器简介<br> 其原理是：红外线传感器安装在固定的检测点上，在以检测点为圆心，7米左右范围为半径，角度为100度所形成的扇区检测范围内，当防区有人体移动时，传感器就能检测到相应的红外线信号，这个红外线信号经过红外传感器模块的电路转换将其转换成电信号，但是这个电信号一般会有很多干扰信号在里面，而且转换而来的电信号非常微弱、因此为了过滤掉这些干扰的杂波信号和放大热电信号就要设计出特殊的电信号处理电路。<br> 红外线传感器能以非接触的形式检测出人体辐射的红外线，它在80年代开始发展起来的，其灵敏度很高而且是很新型的元件。本次使用的便是新型的双元件型红外传感器，它能更好地实现探测移动的人体，因为里面装有两个敏感元件，在这两个敏感元件的相互作用下，可以通过两个元件极化程度的相同与否和净输出电压是否为零，来判断在检测区域内是否有人体的移动。<br> 本次设计中的探测器采用被动式红外探测器，所谓“被动”是指只接收外界的能量变化来完成探测目的，但是探测器本身并不会发出任何形式的能量。实物图如图3-7，电路接口如图3-8所示。<br> <img src="https://images2.imgbox.com/57/59/JLfguTrO_o.png" alt="在这里插入图片描述"></p> 
<p>图3-7红外传感器实物图 3-8传感器电路接口<br> (2) PIR的原理特性<br> 热释电红外线传感器主要是由热电系数都很高的材料制成。探测器将探测到的人体红外辐射信号转变成电压信号，这个电压信号很微弱，可以在将电压信号输出前加上一个场效应管，经过场效应管的作用可以将电信号放大以达到系统的要求。单纯靠两个检测元件本身来对红外线信号进行检测的话，因为其能检测的范围和灵敏度都不是很高，这样就需要外加装备来实现探测器检测效果的提升，目前较为常用的方法就是装菲涅尔透镜，把菲涅尔透镜装在检测元件的正前方，由于该透镜是由塑料材料制成，将透镜可分成若干等份，这样就将半球形的透明塑料制成一种特殊透镜。通过折射红外线等光学原理并与放大电路的配合作用下，可以很容易的实现信号放大的作用，并且其检测距离也会提升数倍，这样就大大提高了该红外探测器的工作性能和实用性。<br> 菲涅尔透镜将半球形的透明塑料分成若干等分之后，在透镜的作用下产生交替的“盲区”和“灵敏区”。当人体在检测范围内移动时，人体所发出的红外线也在这两个区域内交替变化，这样就形成了脉冲式的信号输入，将大大有利于检测信号的强化作用，从而更容易的检测到人体红外线，提高了它的探测接收的灵敏度。<br> 人体辐射的红外线中心波长主要在9到10um左右，为了适合于人体红外辐射的探测，可以在传感器顶端开设了窗口，这个窗口中装有滤光镜片，波长范围为7-10um的可以通过这个滤光片，而其它的波长会被吸收，因此这个传感器就会更加符合人们的需要。所以，这种传感器便可以作为专门探测人体辐射的红外线传感器。<br> （3）传感器安装时要注意的问题<br> 在安装传感器的过程中，要将传感器的方向安装正确。安装方向反掉的话，系统会毫无检测报警的作用；安装方向偏差大的话的话，会影响影响传感器的正常工作和灵敏度，因为该传感器探头对横切探测区域更为敏感，所以要想发挥传感器的最佳功能，就要注意安装的角度，最好成90度垂直，这样就可以保证有人入侵时能最有效地检测到人体红外线。<br> 3.3.7程序下载口<br> 　　通过程序下载口将源程序烧入单片机内，从而实现系统功能，如图3-12所示<br> <img src="https://images2.imgbox.com/8e/99/IBuNHoFW_o.png" alt="在这里插入图片描述"></p> 
<p>图3-12程序下载口<br> 3.4原理图的绘制及PCB图的生成<br> 原理图的绘制方法：首先进入Protel软件，新建原理图并保存之后，根据设计要求，在原理图元件库中将所需要的元件放置到绘图板上（元件库中没有的话自行加载），按照模块将原理图合理布局并编辑元件标号的属性，最后按照要求进行封装，正确完成以上步骤便基本完成原理图的绘制。特别要注意的是，图中所有电器元件和符号都要采用国家统一标准。如图3-13所示。<br> <img src="https://images2.imgbox.com/c3/a8/Gfl1t08a_o.png" alt="在这里插入图片描述"></p> 
<p>图3-13系统电路原理图<br> PCB图的生成：在保证每个元器件封装正确的情况下便可以进行PCB的生成，首先创建一个PCB项目文件和PCB文件，将PCB文件和原理图文件添加到项目文件下的文件夹里，然后执行“Design”、“Update PCB．．．”命令，软件就会自动生成一个后缀为PCB的文件，然后就可以自己调整排版各个元器件的位置，可以手动布线，也可以自动布线。注意事项主要哦有：走线转角尽量大于120度，减少走线长度，电源线加粗，电容晶振尽可能靠近，微处理器数据线和地址线尽量平行布置等等。绘制的PCB图如3-14所示。<br> <img src="https://images2.imgbox.com/a9/00/AgrMI25q_o.png" alt="在这里插入图片描述"></p> 
<p>图3-14PCB图<br> 3.5本章小结<br> 本章总体介绍了系统电路的硬件模块，以及对各个模块的具体介绍。通过这些介绍，明确了各个模块的原理、功能、实现方法等。每个模块中的元器件也要进行选型，例如传感器的选择，蜂鸣器的选择，无线通讯模块的选择等，这些都需要根据设计任务的要求以及所需要完成的各项功能来确定。本章重点介绍了单片机最小系统和传感器模块，其中单片机最小系统是本次设计的核心，基本上都是靠单片机来控制系统的各个功能，应用场合也非常的多。另外，传感器是就是系统的前端探测器，只有通过它采集信号，单片机才能做出下一步动作。设计硬件电路的时候所花的时间和经历都是蛮多的，因为想要做好硬件部分，就要全面了解各个模块的功能以及它们之间的内在联系，这样才会形成一个整体的方案，一但整体的方案确定之后才会方便后面的工作。</p> 
<h3><a id="__300"></a>第四章 基于单片机系统软件设计</h3> 
<p>4.1 系统软件流程图</p> 
<p><img src="https://images2.imgbox.com/8a/ec/td24Ppom_o.png" alt="在这里插入图片描述"></p> 
<p>图4-1 系统软件流程图<br> 通过对系统各模块功能和系统整体功能的分析，可以画出系统主程序的工作流程图，如图４－１所示：<br> 程序首先进行初始化，在初始化中需要对各模块连接单片机端口进行定义，设置定时器，开中断。然后，判断是否采集到红外报警信号，如果没有采集到则继续采集，如果采集到红外报警信号则进行声光报警，并向用户发送报警短消息，若有紧急按键按下则直接启动报警，若有撤防按键按下则直接结束。<br> 4.2 各模块软件设计<br> 软件通过配合硬件来实现系统的功能，软件贯穿于整个系统的正常工作中，因此，软件的正确性决定着防盗报警系统的功能是否能够完成。要完成本次设计就要先逐步地先完成硬件的各个部分，只有在硬件部分确定好之后，才好根据硬件的引脚、驱动电路、实现功能等写出相应的程序。为方便程序的编写和检查，最好将程序也模块化，根据硬件所写的子程序模块就可以互相串接起来，从而完成整个系统的功能。软件从功能上分为：监控软件和执行软件。所谓监控软件也就是主程序，用来协调和连接各个执行模块和操作者的关系，它相当于控制系统的心脏，是整个控制系统的核心。执行软件也就是子程序，它是根据各硬件模块写出来的用来完成各模块所要完成的实质性功能。<br> 每一个子系统也就相当于一个小的功能执行模块。下面会分别说明如何编写每个子程序。短信报警子程序：传感器检测到信号后会产生相应的报警信号，到这个报警信号被搜索到好，就会直接调用报警子程序，报警子程序即可完成报警功能的程序。它的报警原理很简单，就是控制三极管的导通和关断时间来驱动GSM模块，然后再通过GSM无线通讯模块来向用户发送预先设定好的报警短信，同时输出高电平信号，这样发光二极管也会随之发光报警。串行口通信子程序：单片机想要完成与微机的通信，就要对串行口的波特率进行设置，可以设置波特率为9600,1位停止位，无奇偶校验。串口通信程序可以采用查询和中断方式，对于本次设计来说，可以发送程序采用查询，接收子程序采用中断。<br> 4.2.1信号采集程序流程图<br> 本设计所要采集的目标信号很明确，就是入室盗窃人员所发出的红外线信号，检测点可以放置在盗贼可以出入家庭的任何通道。系统初始化后，判断是否有人进入监测区域，通过热释电红外传感器对检测区域进行采集。当没有人经过的时候，传感器继续工作进行下一才的信息采集；当有人进过检测区域时，红外传感器就会采集到红外线信号，这个信号会交由相应的电路进行处理，转换成可以输送的电信号，电信号经单片机相应的Ｉ／Ｏ传送给单片机，然后剩下的工作交由单片机进行处理。这样，一个简单的信号采集程序就完成了，相应的流程图如图４－２所示。</p> 
<p><img src="https://images2.imgbox.com/c4/47/oOnwRTjc_o.png" alt="在这里插入图片描述"></p> 
<p>图4-2信号采集流程图<br> 4.2.2报警电路子程序<br> 红外传感器检测到的信号经过处理之后变成相应的电信号，该电信号会被直接输送到单片机的P2.3端口，P2.3端口是STC89C52单片机的外部中断I/O口，这时因为红外传感器接收信号后输出的是低电平信号，因此P2.3端口的电平会被拉低。这时便会进入中断服务子程序，然后报警子程序就会工作起来，控制系统声光报警并向用户发送报警信息，达到报警的功能。报警电路子程序流程如图4-3所示。<br> <img src="https://images2.imgbox.com/17/8c/9AYxGcPD_o.png" alt="在这里插入图片描述"><br> 图4-3报警电路子程序流程图<br> 4.2.3中断程序流程图<br> 主程序功能是：当红外热释电传感器检测到信息后，会以脉冲信号的形式传送到单片机上，这时就表示有人进入了传感器检测区域，然后通过单片机的处理驱动报警模块的工作。这时，如果想要取消声光报警，就要按下撤防键来停止报警。按下撤防键的同时就用到了中断系统。此时向系统发出中断请求，内部系统就会关中断并保护现场，转而执行撤防按键所要实现的功能，停止报警之后，系统主程序恢复现场，中断返回。中断服务程序程图，如下图4-４所示；</p> 
<p><img src="https://images2.imgbox.com/c0/06/ONwhqjPw_o.png" alt="在这里插入图片描述"></p> 
<p>图4-4中断服务程序流程图</p> 
<p>4.2.4发短消息子程序<br> 发送短信子程序完成的功能如图4-５所示，传感器采集到报警信号后，通过相应的电路转换后将报警信号发送给单片机，单片机对报警信息进行判断后对GSM模块进行控制，控制其发送AT指令，对所要发送的信息的格式进行设置，另外还要设置的是TE字符集、文本参数和接受消息的号码。最后，通告在程序中用Unicode码来设置所发送短消息的具体内容，这个短消息内容就将作为报警信息发送到事主手机上。<br> <img src="https://images2.imgbox.com/6a/bf/3sTqygZK_o.png" alt="在这里插入图片描述"></p> 
<p>图4-5发短消息的子程序流程图<br> 4.3本章小结<br> 软件的作用是赋予硬件系统灵魂，可以指使硬件模块做预定的事情，所以软件的正确性与实用性是前提，然后加以优化，使程序简化易懂。编写程序时最好分模块来写，根据硬件的各个模块所要实现的功能进行相应的程序编写，形成一个个子程序，然后再用主程序调用子程序，这样不但思路清晰而且相对来说比较简单。如果整个源程序一次性写过来的话会很困难，不过仍要做到心中有整个程序的框架，按部就班地编写。本章的主要内容便是介绍各个子程序的流程图以及编写程序的思路，将各个子程序整合后，便得到了附录２的源程序代码。</p> 
<h3><a id="__370"></a>第五章 系统调试与分析</h3> 
<p>5.1 调试过程<br> 每个成品的成功完成自己的功能，都需要在软件、硬件完成后对它们进行调试，本次设计方案的调试过程有：硬件调试、软件调试、还有联调。硬件调试要先按模块对电路各个部分进行逐个调试，当每个模块都正确之后才能进行联调。软件调试的程序可以先在最小系统板上调试，语法编译等没有错误之后，再进行软硬联调。<br> 5.1.1 硬件调试<br> 硬件调试又分为静态调试和联机调试。<br> （1）对于静态调试来说，主要包括线路检查、核对元器件、检查电源系统等工作。具体如下：<br> 线路的检查：可以通过最直观的目测来先检查一遍，根据设计的电路原理图和PCB图来检查线路的连接有无明显的错误，以及各模块之间的连接有无错误。对于线路比较复杂或者不容易看出来的地方就要使用万用表了，使用万用表可以检查线路之间的断路或者是短路问题，造成断路的可能是因为虚焊或者脱焊。造成短路问题的有可能是因为焊点过近而且焊接工艺不好、用焊锡过多而导致两个相邻的管脚连到了一起。另外，有些元器件不耐高温，在对这些元器件进行焊接的时候，很有可能会因为长时间加热引脚而导致元器件的损坏，因为对于有些元器件的检查比较困难，所以在焊接的时候就要格外的注意，对于另外容易检查好坏的元器件，可以进行逐一检查，确保可以正常使用。<br> 核对元件：主要检查元件位置是否安装合理正确，检查元器件的封装类型是否符合，更重要的是需要分清正负极的元器件，不能颠倒其正负极的连接顺序，否则很容易造成元器件的烧坏。要知晓并熟悉各个元器件的使用方法，和各自的功能，检查元器件能否正常使用。<br> 检查电源系统：电源为整个系统提供动力，它的品质的好坏也影响着系统性能的稳定性，因此在对系统进行上电前对电源模块的检查是非常必要的。本次的电源供电采用的是三节干电池进行供电，可以选择电源品质较好的南孚电池，三节电池并联后的电压约为4.5V，可以用万用表来测试其电压的大小和稳定性是否符合要求，在检测好电源后才可以对系统进行上电调试。<br> （2）联机进行调试主要是对晶振电路、复位电路进行测试，还有就是对存储器和I/O口与I/O设备进行测试。<br> 联机调试是硬件调试过程中比较重要的环节，因为虽然对系统进行了静态调试，但是由于静态调试所固有的局限性，并不能进行全面的检查，这样就很容易漏掉一些硬件故障，所以只能采用联机调试的方法来检查这些“隐形”的故障。联机调试相当于查漏补缺的作用，使系统其它没有被检查到的部分进行再一次的检查，以达到整的系统的硬件都能正常工作的目的，对电路进行联机调试的方法如下：<br> 检测晶振和复位电路：作为单片机最小系统的复位功能和振荡功能，晶振和复位电路都是单片机能够正常工作的最基本条件，最简单的检测该电路部分是否正常的方法就是用示波器检查它们的波形是否正确，还可以使用逻辑笔来检查。<br> 存储器的检测：存储器作为存储单元，关系着信息和数据的记忆，要对其进行检测的话，可以将数据写入并读回存储单元，然后比较写入前和读回后的数据，如果相同的话就说明存储器能够正常工作，而如果写入与读出的数据是不一致的话就说明电路有异常情况，或是短/断路。<br> I/O口及其相关设备的测试：可以自己编写一个单独支持某一I/O口和相关设备的简单程序，这段小程序若能自由地支配或控制，就说明I/O口能够正常工作。将GSM模块插上SIM卡，可以是移动或者联通卡，然后接上电源后，用USB线连接电脑，测试GSM模块能否发送短信，要是能够发送短信的话就说明可以正常工作了。<br> 通过以上几个部分的检测，如果各个部分的检测都正常或者问题都解决了的话就可以等待软件测试完成后进行联调了。<br> 5.1.2软件测试<br> 本设计主要采用的是Keil编程软件，在此简单的介绍一下软件的使用。<br> 进入keil后，出现编辑界面，之后，选择工程按钮新建，选择要保存的路径，输入工程文件名，保存。在软件编程界面进行编写程序，编写完成后可以对其进行错误检查，没有语法等错误后进行编译，生成hex文件，然后就可以下载到单片机中进行软硬件联调。<br> 5.1.３调试过程中遇到的问题及解决方法<br> 在对硬件进行调试的时候，会因为线路飞线等情况造成漏查情况，这就需要耐心和细心，可以通过找到每个模块之间的联系来逐步检查，这样就避免了重查的浪费时间和漏查的风险。在进行软件测试的时候，因为对Keil编程软件还不够熟悉，而且编写的软件也有许多问题，造成进度比较慢，不过在老师及同学的帮助下还是顺利的完成了软件的检测。<br> 5.2 调试结果<br> 5.2.1 系统运行效果图</p> 
<p>5.2.2调试结果与分析<br> 通过软件与硬件的联调，本次设计的作品可以成功的完成声光报警和发送短信的功能。<br> 5.3 本章小结<br> 在本设计的硬件和软件完成时，为了保证最后软硬联调的顺利进行，就必须要对硬件部分和软件部分进行调试。其中，在软件和硬件的调试过程中出现了很多难题，不过在老师和同学的帮助下都顺利的解决了。最后介绍了实物调试的结果，能够达到预期的效果。</p> 
<h3><a id="_399"></a>第六章总结</h3> 
<p>6.1主要工作及结论<br> 本次毕业设计研究的是基于单片机家庭防盗报警系统，该系统硬件部分主要有：STC89C52单片机、电源模块、红外传感器模块、GSM模块、声光报警模块和按键模块组成。软件采用C语言进行编写。本设计采用的核心控制单元为STC89C52单片机，蜂鸣器采用电磁式蜂鸣器，前端探测器采用红外热释电传感器。红热释传感器监测距离为5到7m，监测角度为小于100度，上电之后需要一定时间进行系统的稳定，稳定后才能进行下一步工作，高电平有效，传感器外部电路不需要另接上拉电阻。共设计了三个颜色的led指示灯，红灯指示报警信号，黄色灯用来指示布防信号，绿色灯用来指示红外热释电传感器信号的输入。该系统共有四个按键和一个电源自锁开关，这四个按键中有一个是属于单片机最小系统部分的复位键，另外三个分别是布防键、撤防键、紧急报警键。当直接按下紧急报警键的时候，蜂鸣器会发出报警声音，红色led信号指示灯也会闪烁报警，同时有报警短信发送到事主手机上。按下布防键后，黄色led灯会闪烁，这代表布防开始，经过30秒钟的布防时间后黄色led灯会常亮，这就代表布防结束，进入防盗报警状态。此时，如果有人体经过传感器的监测范围区时，红热释传感器就会感测到人体红外线，并将信号经处理后发送到单片机P1.3,P1.3口此时检测到高电平，单片机就会控制点亮绿色led指示灯，同时蜂鸣器发出报警声，并控制GSM模块发送报警信息提醒事主有贼入侵。当按下撤防键的时候，系统的报警状态就会被取消，想要系统进行再次工作的话就要重新按下布防键。本次设计的报警器优点很明显，就是电路简单，安装方便，隐蔽性高，智能性高，操作简单、灵活等。随着社会的发展，人们对安全防范的意识也在不断的增强，此款防盗报警系统正能满足当下人们的需求，相信智能化报警器会在将来应用到更广阔的领域。<br> 6.2存在的问题<br> 本次设计虽然展现了它很多独特的一面，但是也存在一些短板，比如说电源部分，干电池供电虽然在前期电压较为稳定，但是随着时间的推移，电池的续航能力会逐渐减弱，不过好在系统的耗能非常低，一次性装电池可以持续数月。另外，本次设计还存在另一个问题，就是主人回家时的撤防问题，因为之前没有考虑到这个问题，所以成为了设计的一个缺陷，日后可以通过增加一个遥控装置来进行整个系统的控制，这样就可以解决这一问题了。<br> 6.3感想与收获<br> 离毕业的日子越来越近了，我的毕业设计也基本成型，即将为大学四年画上圆满的句号。毕业设计算是四年来做得最系统，最综合的一次设计了，不仅考验我们对所学基础知识和专业知识的应用，更是对我们学以致用的考验。因为平时在课堂上只是单纯的学习理论知识，要想将理论知识应用到实践中去就要着手去完成一个项目。而平时的实验或是课程设计因为其时间较短而且内容片面，所以不容易形成整体的作品。而毕业设计就给我们提供了一个良好的完成整个作品的平台。<br> 在完成设计的过程中，从刚开始的各种查阅相关资料，了解系统构成，到确定系统框架对软件和硬件进行设计，再到对作品的调试，这里的每一个环节都让我学到了很多东西。一个毕业设计就基本上能够用到平时所学的许多东西，这就不得不促使我们对之前所学的专业知识进行温习回顾，然后运用到设计中去，这样不仅加深了自己对理论知识的理解，也提高了自己学以致用的能力。总体而言，对于本次设计，虽然不是那么完美，但是是我辛勤劳动的成果。不仅是在这次设计要努力制作，在以后的工作过程中更要刻苦努力，精益求精。<br> 总之，毕业设计是大学生毕业前必不可少的环节，可以在设计中了解到自身的不足，培养独立思考的能力，提高自己在发现问题和解决问题的能力。理论与实践的有机结合，能够提高自身的能力，提高自己的综合素质，使我们更好的适应这个快速发展的时代。只有学会学习，学会创新，学会解决问题，提高自身水平才能让我们在迈出校园走上社会的时候，更好的实现自己的梦想。</p> 
<h3><a id="_410"></a>致谢</h3> 
<p>毕业设计，应该是大学的最后一个作品了，匆匆忙碌了两个多月的时间，终于将毕业设计完成了，在这个过程中尤其要感谢的是我的指导老师。在一次次遇到困难不知所措时，在对程序的编写迷茫时，都是老师在背后给我精心的指导和帮助，没有老师的悉心指导和严格要求，我的毕业设计也不会那么顺利的完成。<br> 在设计的过程中在所难免的会遇到各种自己无法解决的难题，这时我便想到了寻求老师的帮助，虽然她平时工作很忙，但是每当我们有困难需要帮助的时候，老师总会在百忙之中抽出时间来指导我们，商量解决问题的办法，扫清遇到的障碍。比如在前期确定设计的总体方向时，老师给我提了好多关键性的建议，使得我的设计路线不至于走弯路。在对中期论文进行检查的时候，老师也是帮我们把关论文的格式、内容，详细的提出来修改意见。施老师只是渊博，教学态度严谨，又平易近人，所以我们都喜欢与她沟通。在学术上，通过老师的指导，我学到了好多知识，像关于红外传感器的工作原理、GSM模块的工作原理、元器件的工作性能等等；在生活上，更加懂得了如何为人处世，如何应对困难，如何提升自己的价值等等。这些都使我受益匪浅，因此在这里我要向我的指导老师道一声真挚的感谢。<br> 此外，还要感谢的是身边的各位同学，尤其是我的几位舍友。在设计的过程中遇到一些小问题，而又没必要请教老师的时候，是他们帮助我解决问题。还要感谢的是我们自动化学院的领导和辅导员，是他们在毕业设计期间帮助我们解决生活上和工作上的各种问题，让我们有一个良好的做设计的环境。同时还要感谢我的家人，是她们在精神上给我莫大的支持和鼓励。<br> 回想大学四年的时光，仿佛尽在昨天，这一路走来有付出辛酸也有收获的喜悦，这些经历伴随着我的成长，激励着我的前行。最后，我要向所用关心、帮助我的各位师长和朋友表示衷心地感谢！是你们不断给与我鼓励、帮助和悉心的关怀，是你们帮我度过一个个难关，让我在人生中一次次坚强地走下去。总之，感谢在我生命中出现的你们！</p> 
<h3><a id="_417"></a>参考文献</h3> 
<p>[1] 李瑜芳．传感器原理及其应用[M]．成都：电子科技大学出版社，2008.<br> [2] 付家才.传感器与检测技术原理及实践[M].北京：中国电力出版社,2008.<br> [3] 潘雪涛，温秀兰.传感器原理与检测技术[M].北京：国防工业出版社,<br> 2015,2.<br> [4] Integrated Circuits Data Handbook 80C51-based 8-bitmicrocontrollers<br> Philips[J].Computer,2012,11(02):24-25.<br> [5] 陈海霞，徐智.基于Proteus的单片机串口通信的实例设计与仿真[J].科技<br> 信息，2011，（09）：457-458.<br> [6] 李升.单片机原理与接口技术[M].北京：北京大学出版社，2011,7.<br> [7] 林立,张俊亮.单片机原理及应用－基于Proteus和Keil C[M],北京：电子工业出版社，2012.<br> [8] 周向红．51单片机课程设计[M]．武汉：华中科技大学出版社,2011.<br> [9] 赵海兰, 邱茂盛, 高金存. 基于GSM短信控制的应用与研究[J]. 电子世<br> 界, 2013(17):11-12.<br> [10]王开，刘美，曾宪桥.基于Proteus的单片机控制系统的仿真设计[J].电子<br> 设计工程，2015，（04）：180-184.<br> [11]赵建领,薛园园.51单片机开发与应用技术详解[M].北京：电子工业出版<br> 社,2012-1-1.<br> [12]刘辉,罗浩. 浅论单片机的应用与发展[J]. 中小企业管理与科技(上旬<br> 刊),2015:168-197.<br> [13]赵建周. 单片机及其发展综述[J]. 安阳工学院学报, 2011, 10(6):50-54<br> [14]卢宪友．智能远程家电控制及安防系统的研究[D]．曲阜：曲<br> 阜师范大学，2010,1-3.<br> [15]蒸燕春.智能化住宅小区安防电子系统的常用手段[J].现代电子技<br> 术.2002,(06):39-41.<br> [16]刘辉.智能小区防盗报警系统的可靠性设计[J].电器时代.2002,(13):74-75.<br> [17]雷旭,何万强.新型家用防盗报警系统[J].现代电子技术.2003,(03):82-83</p> 
<p>附录1：原理图与PCB图<br> <img src="https://images2.imgbox.com/0f/a4/j32ZMclU_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a7/00/DSToVa7D_o.png" alt="在这里插入图片描述"></p> 
<p>附录2：原程序代码</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/83f0f6d1e110d02bd1e977f8b9ec0546/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">蓝桥杯算法基础（15）：十大排序算法（堆排序）c语言版</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/66eeb6b67f0a547529735a5c00a38f8a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构入门篇 之 【双链表】的实现讲解（附完整实现代码及顺序表与线性表的优缺点对比）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
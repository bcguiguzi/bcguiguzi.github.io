<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>记一次ARM架构下centos7的环境配置经历 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="记一次ARM架构下centos7的环境配置经历" />
<meta property="og:description" content="本来centos的系统，用着挺不错的，毕竟稳定，奈何公司最近接了一个项目，要求使用Cortex A55内核，Linux系统，本质实际上使用arm架构，而通常的centos系统默认情况下都是X86的。
初次拿到系统，发现装的是ubuntu的，试了下后发现有点不习惯的，怕后续的配置下还会遇到不一样的地方，所以让系统厂商重新装了centos7。
接下来拿到新系统后，正式开始配置，结果也遇到了很多坑，下面说一些关键性的东西，也为自己留个备注：
目录
1.IP配置
2.java配置
3.mysql配置
4.fastDFS及nginx配置
5.串口配置
6.浏览器配置
7.触摸屏及虚拟键盘配置
1.IP配置 正常修改完IP之后，重启服务，报错：
code=exited status=6
Failed to start LSB: Bring up/down networking
网上搜索一番之后，大多数的方法都是大同小异，但是状态码都不是6，后面终于找到一个关于status=6的说明。
解释如下：
如果不存在特定的文件，即/etc/sysconfig/network，那么运行的/etc/rc.d/init.d/network脚本将立即出错，状态为6，即network可以为空 但是必须存在。
所以手动创建一个空的network之后，问题解决。
2.java配置 修改完IP之后，使用远程工具，开始配置java。
一开始没注意，拿以前的包解压，配置环境变量之后验证：java -version，直接报错。
后面才反映过来是内核不同，然后又是一番搜索，找到了支持arm64的包
替换掉之后，java环境可正常使用。
附jdk历史版本下载地址：Java Archive | Oracle
3.mysql配置 这次有了防备，直接下了aarch64支持的包，和arm64是一样的。
附mysql下载地址：MySQL :: Download MySQL Community Server (Archived Versions)
附安装连接：arm架构安装mysql5.7 - 码农教程
远程使用Navicat的时候报了个错10060，防火墙的原因，关闭即可。
4.fastDFS及nginx配置 按照正常流程安装下来之后，发现fastDFS不可用，最后找到一篇说明：
按照说明中的指定版本和对应配置文件的修改之后，fastDFS可正常使用
nginx常规配置即可
5.串口配置 因为项目上会使用到串口通信，所以需要配置串口环境，之前一直使用的都是RXTX，按照正常流程配置：
RXTXcomm.jar放在$JAVA_HOME/jre/lib/ext中
librxtxSerial.so放在$JAVA_HOME/jre/lib/amd64中
结果程序启动之后，报错。
网上的解释是需要重新在arm架构下编译RXTX。
附编译连接一：【linux】Ubuntu aarch64编译安装RXTX进行串口通信_arm rxtx_svt_井木的博客-CSDN博客
结果编译完成后，仍然报错，最后发现是版本原因，之前用的2.1.7，后面使用2.2，编译完成后，可用。
附编译连接二：
银河麒麟龙芯mips64架构集成RXTX串口通讯兼容问题_十年一梦惊觉醒的博客-CSDN博客
附RXTX下载地址：Download - Rxtx" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/a1376cc27e0fa53f9d5d015077a7e923/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-21T10:47:44+08:00" />
<meta property="article:modified_time" content="2023-07-21T10:47:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">记一次ARM架构下centos7的环境配置经历</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>本来centos的系统，用着挺不错的，毕竟稳定，奈何公司最近接了一个项目，要求使用<span style="background-color:#FFFFFF;"><span style="color:#000000;">Cortex A55</span></span><span style="background-color:#FFFFFF;"><span style="color:#000000;">内核，Linux系统，本质实际上使用arm架构，而通常的centos系统默认情况下都是X86的。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">初次拿到系统，发现装的是</span></span><span style="color:#000000;"><span style="background-color:#ffffff;">ubuntu的，试了下后发现有点不习惯的，怕后续的配置下还会遇到不一样的地方，所以让系统厂商重新装了centos7。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">接下来拿到新系统后，正式开始配置，结果也遇到了很多坑，下面说一些关键性的东西，也为自己留个备注：</span></span></p> 
<p></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1.IP%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#1.IP%E9%85%8D%E7%BD%AE" rel="nofollow">1.IP配置</a></p> 
<p id="2.java%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#2.java%E9%85%8D%E7%BD%AE" rel="nofollow">2.java配置</a></p> 
<p id="3.mysql%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#3.mysql%E9%85%8D%E7%BD%AE" rel="nofollow">3.mysql配置</a></p> 
<p id="4.fastDFS%E5%8F%8Anginx%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#4.fastDFS%E5%8F%8Anginx%E9%85%8D%E7%BD%AE" rel="nofollow">4.fastDFS及nginx配置</a></p> 
<p id="5.%E4%B8%B2%E5%8F%A3%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#5.%E4%B8%B2%E5%8F%A3%E9%85%8D%E7%BD%AE" rel="nofollow">5.串口配置</a></p> 
<p id="6.%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#6.%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E7%BD%AE" rel="nofollow">6.浏览器配置</a></p> 
<p id="7.%E8%A7%A6%E6%91%B8%E5%B1%8F%E5%8F%8A%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#7.%E8%A7%A6%E6%91%B8%E5%B1%8F%E5%8F%8A%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98%E9%85%8D%E7%BD%AE" rel="nofollow">7.触摸屏及虚拟键盘配置</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.IP%E9%85%8D%E7%BD%AE" style="background-color:transparent;"><span style="color:#000000;"><span style="background-color:#ffffff;">1.IP配置</span></span></h2> 
<p>正常修改完IP之后，重启服务，报错：</p> 
<p style="margin-left:0;">code=exited <span style="color:#fe2c24;">status=6</span></p> 
<p style="margin-left:0;">Failed to start LSB: Bring up/down networking</p> 
<p style="margin-left:0;">网上搜索一番之后，大多数的方法都是大同小异，但是状态码都不是6，后面终于找到一个关于status=6的说明。</p> 
<p style="margin-left:0;"><img alt="" height="67" src="https://images2.imgbox.com/2f/ca/grdzcOFR_o.png" width="1045"></p> 
<p style="margin-left:0;">解释如下：</p> 
<p style="margin-left:0;">如果不存在特定的文件，即/etc/sysconfig/network，那么运行的/etc/rc.d/init.d/network脚本将立即出错，状态为6，即network可以为空 但是必须存在。</p> 
<p style="margin-left:0;">所以手动创建一个空的network之后，问题解决。</p> 
<h2 id="2.java%E9%85%8D%E7%BD%AE" style="background-color:transparent;margin-left:0px;">2.java配置</h2> 
<p>修改完IP之后，使用远程工具，开始配置java。</p> 
<p>一开始没注意，拿以前的包解压，配置环境变量之后验证：java -version，直接报错。</p> 
<p>后面才反映过来是内核不同，然后又是一番搜索，找到了支持arm64的包</p> 
<p>替换掉之后，java环境可正常使用。</p> 
<p>附jdk历史版本下载地址：<a href="https://www.oracle.com/java/technologies/downloads/archive/" rel="nofollow" title="Java Archive | Oracle">Java Archive | Oracle</a></p> 
<h2 id="3.mysql%E9%85%8D%E7%BD%AE" style="background-color:transparent;">3.mysql配置</h2> 
<p>这次有了防备，直接下了aarch64支持的包，和arm64是一样的。</p> 
<p>附mysql下载地址：<a href="https://downloads.mysql.com/archives/community/" rel="nofollow" title="MySQL :: Download MySQL Community Server (Archived Versions)">MySQL :: Download MySQL Community Server (Archived Versions)</a></p> 
<p>附安装连接：<a href="http://www.manongjc.com/detail/40-nfagihqeveuvvzi.html" rel="nofollow" title="arm架构安装mysql5.7 - 码农教程">arm架构安装mysql5.7 - 码农教程</a></p> 
<p>远程使用Navicat的时候报了个错10060，防火墙的原因，关闭即可。</p> 
<h2 id="4.fastDFS%E5%8F%8Anginx%E9%85%8D%E7%BD%AE" style="background-color:transparent;">4.fastDFS及nginx配置</h2> 
<p>按照正常流程安装下来之后，发现fastDFS不可用，最后找到一篇说明：</p> 
<p><img alt="" height="399" src="https://images2.imgbox.com/b6/4e/GPkFqSUn_o.png" width="877"></p> 
<p>按照说明中的指定版本和对应配置文件的修改之后，fastDFS可正常使用</p> 
<p>nginx常规配置即可</p> 
<h2 id="5.%E4%B8%B2%E5%8F%A3%E9%85%8D%E7%BD%AE" style="background-color:transparent;">5.串口配置</h2> 
<p>因为项目上会使用到串口通信，所以需要配置串口环境，之前一直使用的都是RXTX，按照正常流程配置：</p> 
<p style="margin-left:0;">RXTXcomm.jar放在$JAVA_HOME/jre/lib/ext中</p> 
<p style="margin-left:0;">librxtxSerial.so放在$JAVA_HOME/jre/lib/amd64中</p> 
<p style="margin-left:0;">结果程序启动之后，报错。</p> 
<p style="margin-left:0;">网上的解释是需要重新在arm架构下编译RXTX。</p> 
<p style="margin-left:0;">附编译连接一：<a href="https://blog.csdn.net/qq_43622777/article/details/130126891" title="【linux】Ubuntu aarch64编译安装RXTX进行串口通信_arm rxtx_svt_井木的博客-CSDN博客">【linux】Ubuntu aarch64编译安装RXTX进行串口通信_arm rxtx_svt_井木的博客-CSDN博客</a></p> 
<p style="margin-left:0;">结果编译完成后，仍然报错，最后发现是版本原因，之前用的2.1.7，后面使用2.2，编译完成后，可用。</p> 
<p style="margin-left:0;">附编译连接二：</p> 
<p style="margin-left:0;"><a href="https://blog.csdn.net/mokeily99/article/details/127881559" title="银河麒麟龙芯mips64架构集成RXTX串口通讯兼容问题_十年一梦惊觉醒的博客-CSDN博客">银河麒麟龙芯mips64架构集成RXTX串口通讯兼容问题_十年一梦惊觉醒的博客-CSDN博客</a></p> 
<p style="margin-left:0;">附RXTX下载地址：<a href="http://rxtx.qbang.org/wiki/index.php/Download" rel="nofollow" title="Download - Rxtx">Download - Rxtx</a></p> 
<p style="margin-left:0;">这里还遇到一个问题，关于串口名称的，通常情况下，linux下的串口名称都是ttyS开头的，但是本次拿到的系统下的名称不是这个。</p> 
<p style="margin-left:0;">网上找到一段说明：</p> 
<p style="margin-left:0;"><img alt="" height="60" src="https://images2.imgbox.com/46/04/MBbcFPhx_o.png" width="1200"></p> 
<p><img alt="" height="98" src="https://images2.imgbox.com/45/c4/pq2eMe6f_o.png" width="1195"></p> 
<p>于是给所有的串口名称，配置了名为ttyS开头的软连接，问题解决。</p> 
<h2 id="6.%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E7%BD%AE" style="background-color:transparent;margin-left:0px;">6.浏览器配置</h2> 
<p>以上环境配置好之后，因为项目上使用的是谷歌chrome，但是centos自带的是火狐Firefox，兼容性上有差异，尝试安装该内核下支持centos7的chrome，无果。</p> 
<p>最后想到了360浏览器，内核也是chromium。而且cpu占用率在top命令下看，也确实比Firefox低不少。</p> 
<p>附360浏览器下载地址：<a href="https://browser.360.net/gc/index.html?src=se" rel="nofollow" title="360安全浏览器">360安全浏览器</a></p> 
<p>选择其它版本的arm架构下的包即可。 </p> 
<p><img alt="" height="581" src="https://images2.imgbox.com/07/91/Puk51wdu_o.png" width="1186"></p> 
<h2 id="7.%E8%A7%A6%E6%91%B8%E5%B1%8F%E5%8F%8A%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98%E9%85%8D%E7%BD%AE" style="background-color:transparent;">7.触摸屏及虚拟键盘配置</h2> 
<p>因为项目上需要使用到触摸屏，还需要配置一番，心累……</p> 
<p>触摸屏，使用厂商提供的校准软件在windows下校准一下，在Linux上可直接用。</p> 
<p>虚拟键盘，网上搜了一下之后，发现常用的ibus（支持输入法切换，貌似不带虚拟键盘功能），fcitx5（不支持），florence（安装成功，使用的时候崩溃）</p> 
<p>附linux安装包下载地址一：<a href="https://pkgs.org/" rel="nofollow" title="https://pkgs.org/">https://pkgs.org/</a></p> 
<p>附liunx安装包下载地址二：<a href="http://rpmfind.net/linux/RPM/index.html" rel="nofollow" title="Welcome to the RPM repository on fr2.rpmfind.net">Welcome to the RPM repository on fr2.rpmfind.net</a></p> 
<p>最后想到一个办法，在360浏览器上安装扩展软件，结果发现在linux下扩展商店自带的都不可用。</p> 
<p>然后去chrome插件商店搜寻，找到之后，添加到360上，可用。</p> 
<p>附chrome插件商店地址：<a href="https://crx.bysjb.cn/" rel="nofollow" title="小羽插件 - Chrome扩展插件商店,优质crx应用下载,提供Chrome浏览器离线安装包">小羽插件 - Chrome扩展插件商店,优质crx应用下载,提供Chrome浏览器离线安装包</a></p> 
<p></p> 
<p>至此，整个环境基本搭建完成。</p> 
<p>总结，arm架构下，对<span style="color:#000000;"><span style="background-color:#ffffff;">ubuntu熟悉的还是用ubuntu吧，支持较好，对ubuntu不熟的，也可以参考下本篇文章。</span></span></p> 
<p><span style="color:#000000;"><span style="background-color:#ffffff;">另外，centos的话，能用x86的一定要用X86，省很多事儿。</span></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9263f9c356e3bf025d6f47b34f4fd370/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">充电协议介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ade9d7cdee7fdcee2ec3d8e5a65c83d0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">csv文件中出现乱码的解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
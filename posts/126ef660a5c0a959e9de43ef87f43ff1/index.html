<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>js已知文件路径得到file对象_Node之文件流与文件路径操作 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="js已知文件路径得到file对象_Node之文件流与文件路径操作" />
<meta property="og:description" content="流的基本概念 用途 | 使用异步方式 | 使用同步方式1 ---|--- |--- 将文件完整写入缓存区 | readFile | readFileSync 将文件部分读入缓存区 | read | readSync 将数据完整写入文件 | writeFile | writeFileSync 将缓存区中的部分内容写入文件 | write | writeSync
在一个应用程序中，流是一组有序的、有起点和终点的字节数据的传输手段。在应用程序中各种对象之间交换与传输数据的时候，总是先将该对象中所包含的数据转换为各种形式的流数据（即字节数据），再通过流的传输，到达目的对象后再将流数据转换为该对象中可以使用的数据。
Node.js中的各种用于读取数据的对象 各种用于读取数据的对象将会触发的事件 各种用于读取数据的对象所拥有的方法 Node.js中的各种用于写入数据的对象 各种用于写入数据的对象将会触发的事件 各种用于写入数据的对象所拥有的方法 使用ReadStream对象读取文件 在fs模块中，可以使用createReadStream方法创建一个将文件内容读取为流数据的ReadStream对象
fs.createReadStream(path,[options]) path：用于指定需要被读取的文件的完整路径及文件名。options： flags：用于指定对该文件采取什么操作，默认值为&#39;r&#39;，可指定属性值与readFile方法中所使用的options参数对象中所使用的flags属性的可指定属性值相同。encoding：用于指定使用什么编码格式来读取该文件，可指定属性值为“utf8”、“ascii”与“base64”。默认值为null。autoClose：用于指定是否关闭在读取文件时操作系统内部使用的文件描述符。如果属性值设定为false，则文件不会自动关闭，即使在读取文件过程中产生了错误，开发者也必须通过使用close方法或closeSync方法来手动关闭文件。如果属性值设定为true，当文件读取完毕或读取文件过程中产生错误时文件将自动关闭。autoClose属性的默认属性值为true。start：使用整数值来指定文件的开始读取位置（单位为字节数）。end：使用整数值来指定文件的结束读取位置（单位为字节数）。 示例：
var fs = require(&#39;fs&#39;); var file = fs.createReadStream(&#39;./message.txt&#39;,{start:3,end:12}); file.on(&#39;open&#39;,function(fd) { console.log(&#39;开始读取文件。&#39;); }); file.on(&#39;data&#39;, function(data) { console.log(&#39;读取到数据：&#39;); console.log(data); }); file.on(&#39;end&#39;, function(){ console.log(&#39;文件已全部读取完毕。&#39;); }); file.on(&#39;close&#39;, function(){ console.log(&#39;文件被关闭。&#39;); }); file.on(&#39;error&#39;, function(err) { console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/126ef660a5c0a959e9de43ef87f43ff1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-03T13:21:04+08:00" />
<meta property="article:modified_time" content="2020-12-03T13:21:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">js已知文件路径得到file对象_Node之文件流与文件路径操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <h4>流的基本概念</h4> 
 <p>用途 | 使用异步方式 | 使用同步方式1 ---|--- |--- 将文件完整写入缓存区 | readFile | readFileSync 将文件部分读入缓存区 | read | readSync 将数据完整写入文件 | writeFile | writeFileSync 将缓存区中的部分内容写入文件 | write | writeSync</p> 
 <p>在一个应用程序中，流是一组有序的、有起点和终点的字节数据的传输手段。在应用程序中各种对象之间交换与传输数据的时候，总是先将该对象中所包含的数据转换为各种形式的流数据（即字节数据），再通过流的传输，到达目的对象后再将流数据转换为该对象中可以使用的数据。</p> 
 <h4>Node.js中的各种用于读取数据的对象</h4> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/af/fc/l43p0z2V_o.png" alt="f1ba1d90f20b2e00ebcc358361ca47e4.png"> 
 </div> 
 <h4>各种用于读取数据的对象将会触发的事件</h4> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/ac/8d/tj35Ahqi_o.png" alt="8fc4bc2fe2d2c17c49c5aaffe3a642a7.png"> 
 </div> 
 <h4>各种用于读取数据的对象所拥有的方法</h4> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/41/e4/7s8NN99Z_o.png" alt="a30938d9f6f5740b034734c08a3ecdbf.png"> 
 </div> 
 <h4>Node.js中的各种用于写入数据的对象</h4> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/af/61/PjrGfcud_o.png" alt="2353091c5a822ca5cd3168cfa325ca1d.png"> 
 </div> 
 <h4>各种用于写入数据的对象将会触发的事件</h4> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/c2/12/ijPG5HOk_o.png" alt="827ea4b5a2188435dcfe836ed58d48cc.png"> 
 </div> 
 <h4>各种用于写入数据的对象所拥有的方法</h4> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/f3/8a/wbILjy4r_o.png" alt="5354f74b08914de6d5a028890659bf07.png"> 
 </div> 
 <h4>使用ReadStream对象读取文件</h4> 
 <p>在fs模块中，可以使用createReadStream方法创建一个将文件内容读取为流数据的ReadStream对象</p> 
 <div class="has"> 
  <pre><code>fs.createReadStream(path,[options])</code></pre> 
 </div> 
 <ul><li>path：用于指定需要被读取的文件的完整路径及文件名。</li><li>options： 
   <ul><li>flags：用于指定对该文件采取什么操作，默认值为'r'，可指定属性值与readFile方法中所使用的options参数对象中所使用的flags属性的可指定属性值相同。</li><li>encoding：用于指定使用什么编码格式来读取该文件，可指定属性值为“utf8”、“ascii”与“base64”。默认值为null。</li><li>autoClose：用于指定是否关闭在读取文件时操作系统内部使用的文件描述符。如果属性值设定为false，则文件不会自动关闭，即使在读取文件过程中产生了错误，开发者也必须通过使用close方法或closeSync方法来手动关闭文件。如果属性值设定为true，当文件读取完毕或读取文件过程中产生错误时文件将自动关闭。autoClose属性的默认属性值为true。</li><li>start：使用整数值来指定文件的开始读取位置（单位为字节数）。</li><li>end：使用整数值来指定文件的结束读取位置（单位为字节数）。</li></ul></li></ul> 
 <p>示例：</p> 
 <div class="has"> 
  <pre><code>var fs = require('fs');
var file = fs.createReadStream('./message.txt',{start:3,end:12});
file.on('open',function(fd) {
    console.log('开始读取文件。');
});
file.on('data', function(data) {
    console.log('读取到数据：');
    console.log(data);
});
file.on('end', function(){
    console.log('文件已全部读取完毕。');
});
file.on('close', function(){
    console.log('文件被关闭。');
});
file.on('error', function(err) {
    console.log('读取文件失败。');
});</code></pre> 
 </div> 
 <h4>使用WriteStream对象写入文件</h4> 
 <p>在fs模块中，可以使用createWriteStream方法创建一个将流数据写入文件中的WriteStream对象</p> 
 <div class="has"> 
  <pre><code>fs.createWriteStream(path,[options])</code></pre> 
 </div> 
 <ul><li>path：数用于指定需要被写入的文件的完整路径及文件名。</li><li>options： 
   <ul><li>options：用于指定对该文件采取什么操作，默认值为'w'，可指定属性值与readFile方法中options参数对象的flags属性的可指定属性值相同。</li><li>encoding：用于指定使用什么编码格式来读取该文件，可指定属性值为“utf8”、“ascii”与“base64”。默认值为null。</li><li>start：使用整数值来指定文件的开始写入位置（单位为字节数）。如果要在文件中追加写入数据，需要将flags属性值设置为'a'。</li></ul></li></ul> 
 <p>WriteStream对象具有一个write方法，用于将流数据写入到目标对象中，该方法的使用方式如下所示（代码中的writable代表一个WriteStream对象）。</p> 
 <div class="has"> 
  <pre><code>writable.write(chunk,[encoding],[callback])</code></pre> 
 </div> 
 <ul><li>chunk：为一个Buffer对象或一个字符串，用于指定需要写入的数据，当参数值为Buffer对象时表示将Buffer对象中的数据写入目标对象，参数值为字符串时表示将字符串写入目标对象。</li><li>encoding：编码方式</li><li>callback：当数据被写入完毕时所要调用的回调函数，在该回调函数中不使用任何参数。</li></ul> 
 <p>WriteStream对象具有一个end方法，在写入文件的场合中，当没有数据再被写入流中时可调用该方法关闭文件。这将迫使操作系统缓存区中的剩余数据被立即写入文件中。可以在该方法的回调函数中指定在文件被关闭之前所要执行的处理。该方法的使用方式如下所示（代码中的writable代表一个WriteStream对象）。</p> 
 <div class="has"> 
  <pre><code>writable.end([chunk],[encoding],[callback])</code></pre> 
 </div> 
 <ul><li>chunk：为一个Buffer对象或一个字符串，用于指定在文件关闭之前需要在文件中追加写入的数据，当参数值为Buffer对象时表示将Buffer对象中的数据追加写入目标对象，参数值为字符串时表示将字符串追加写入目标对象。</li><li>encoding：编码</li><li>callback：指定当数据被追加写入完毕时所要调用的回调函数，在该回调函数中不使用任何参数。</li></ul> 
 <h4>对路径进行操作</h4> 
 <p>在Node.js中，提供了一个path模块，在这个模块中，提供了许多实用的、可被用来处理与转换路径的方法及属性。</p> 
 <h4>normalize方法</h4> 
 <p>该方法将非标准路径字符串转换为标准路径字符串，在转换过程中执行以下处理： - 解析路径字符串中的“..”字符串与“.”字符串，返回解析后的标准路径。 - 将多个斜杠字符串转换为一个斜杠字符串，例如将“”转换为“”。 - 将Windows操作系统中的反斜杠字符串转换为正斜杠字符串。 - 如果路径字符串以斜杠字符串结尾，则在转换后的完整路径字符串末尾保留该斜杠字符串。</p> 
 <div class="has"> 
  <pre><code>path.normalize(p)</code></pre> 
 </div> 
 <h4>join方法</h4> 
 <p>该方法将多个参数值字符串结合为一个路径字符串，使用方式如下所示</p> 
 <div class="has"> 
  <pre><code>path.join([path1], [path2], [...])</code></pre> 
 </div> 
 <p>示例：</p> 
 <div class="has"> 
  <pre><code>var fs=require('fs');
var path=require('path');
var myPath=path.join(__dirname,'a','b','c');
console.log(myPath);
var file = fs.createReadStream(myPath+'/message.txt');
file.on('data', function(data) {
    console.log(data.toString());
});</code></pre> 
 </div> 
 <h4>resolve方法</h4> 
 <div class="has"> 
  <pre><code>path.resolve(path1, [path2], [...])</code></pre> 
 </div> 
 <p>resolve方法的具体解析过程如下所示： - 以应用程序根目录为起点，解析第一个参数值字符串。 - 如果该参数值字符串不以“..”、“.”或“/”开头，则将参数值字符串解析为应用程序根目录下的某个子目录，将当前参考目录定为该子目录的绝对路径。例如应用程序根目录为Windows操作系统的“d:ab”，第一个参数值字符串为“c”，则将当前参考目录定为“d:abc”。 - 如果该参数值字符串以“..”开头，则将“..”解析为应用程序根目录的上级目录，然后将“..”后的字符串解析为该目录下的某个子目录，将当前参考目录定为该子目录的绝对路径。例如应用程序根目录为Windows操作系统中的“d:ab”，第一个参数值字符串为“../c”，则将当前参考目录定为“d:ac”。 - 如果该参数值字符串以“..”开头，则将“..”解析为应用程序根目录的上级目录，然后将“..”后的字符串解析为该目录下的某个子目录，将当前参考目录定为该子目录的绝对路径。例如应用程序根目录为Windows操作系统中的“d:ab”，第一个参数值字符串为“../c”，则将当前参考目录定为“d:ac”。 - 如果该参数值字符串以“/”开头，表示指定了一个绝对路径，则将当前参考目录定为该绝对路径，例如应用程序根目录为Windows操作系统中的“d:ab”，第一个参数值字符串为“/c”，则将当前参考目录定为“d:c”。 - 如果没有下一个参数值字符串，则resolve方法返回当前参考目录的绝对路径。 - 如果存在下一个参数值字符串，则以当前参考目录为起点，解析下一个参数值字符串。 - 如果下一个参数值字符串不以“..”、“.”或“/”开头，则将参数值字符串解析为当前参考目录下的某个子目录，将当前参考目录转变为该子目录的绝对路径。例如当前参考目录为Windows操作系统中的“d:abc”，下一个参数值字符串为“d”，则将当前参考目录转变为“d:abcd”。 - 如果下一个参数值字符串不以“..”、“.”或“/”开头，则将参数值字符串解析为当前参考目录下的某个子目录，将当前参考目录转变为该子目录的绝对路径。例如当前参考目录为Windows操作系统中的“d:abc”，下一个参数值字符串为“d”，则将当前参考目录转变为“d:abcd”。 - 如果下一个参数值字符串以“.”开头，则将“.”解析为当前参考目录的当前目录，即当前参考目录，然后将“.”后的字符串解析为当前参考目录下的某个子目录，将当前参考目录转变为该子目录的绝对路径。例如当前参考目录为Windows操作系统中的“d:abc”，下一个参数值字符串为“./d”，则将当前参考目录转变为“d:abcd”。 - 如果下一个参数值字符串以“/”开头，表示指定了一个绝对路径，则将当前参考目录转变为该绝对路径，例如当前参考目录为Windows操作系统中的“d:c”，第一个参数值字符串为“/d”，则将当前参考目录转变为“d:d”。 - 如果没有下一个参数值字符串，则resolve方法返回当前参考目录的绝对路径。 - 如果存在下一个参数值字符串，则继续执行步骤7～步骤13。</p> 
 <h4>relative方法</h4> 
 <p>该方法用于获取两个路径之间的相对关系</p> 
 <div class="has"> 
  <pre><code>path.relative(from,to)</code></pre> 
 </div> 
 <h4>dirname方法</h4> 
 <p>该方法用于获取一个路径中的目录名</p> 
 <div class="has"> 
  <pre><code>path.dirname(p)</code></pre> 
 </div> 
 <h4>basename方法</h4> 
 <p>basename方法用于获取一个路径中的文件名</p> 
 <div class="has"> 
  <pre><code>path.basename(p,[ext])</code></pre> 
 </div> 
 <ul><li>p：路径</li><li>etx：去除扩展名</li></ul> 
 <h4>extname方法</h4> 
 <p>extname方法用于获取一个路径中的扩展名</p> 
 <div class="has"> 
  <pre><code>path.extname(p</code></pre> 
 </div> 
 <h4>path.sep属性</h4> 
 <p>属性值为操作系统指定的文件分隔符，可能的属性值为“”（在Windows操作系统中）或“/”（在UNIX操作系统中）。</p> 
 <h4>path.delimiter属性</h4> 
 <p>属性值为操作系统指定的路径分隔符，可能的属性值为“；”（在Windows操作系统中）或“：”（在UNIX操作系统中）。在Windows操作系统的REPL运行环境中获取path.delimiter属性值</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a3b496196f9e05ff1eb1f434cb77c656/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【国际化】vue element 国际化 切换语言 中英文  i18n</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b15b601d5b1dc866e35888f7e25cbd12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">最全解决方案：提示Flutter plugin not installed，实际已安装插件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
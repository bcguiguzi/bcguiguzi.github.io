<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>大数据环境生态搭建 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="大数据环境生态搭建" />
<meta property="og:description" content="文章目录 大数据环境生态搭建一、通用操作1、更改三台节点的主机名2、关闭三台机器 linux 的安全模式3、关闭三台机器的防火墙4、设置三台机器的免密的登录5、创建用户组和用户 二、安装 JDK1.8三、Hadoop 完全分布式1、配置 core-site.xml2、配置 hdfs-site.xml3、配置 yarn-site.xml4、配置 mapred-site.xml5、配置 hadoop-env.sh6、进行 hadoop 初始化 四、scala2.12 版本五、Spark On Yarn1、配置 yarn-site.xml2、配置 spark-env.sh 六、Flink On Yarn1、配置 flink-conf.yaml 七、Hive1、安装mysql2、Hive 元数据配置到mysql3、配置 hive-site.xml 文件 八、zookeeper九、kafka十、flume十一、sqoop1、配置 sqoop-env.sh 大数据环境生态搭建 一、通用操作 1、更改三台节点的主机名 输入命令： hostnamectl set-hostname master 更改master节点的名字
输入命令：hostnamectl set-hostname slave1 更改 slave1 节点的名字
输入命令：hostnamectl set-hostname slave2 更改slave2 节点的名字
2、关闭三台机器 linux 的安全模式 输入命令：vim /etc/sysconfig/selinux 改为 disabled
3、关闭三台机器的防火墙 输入命令：systemctl stop firewalld 关闭防火墙
输入命令：systemctl disable firewalld 防止开机自启
输入命令：systemctl status firewalld 查看防火墙状态" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/54147c77b3ec2ba0c1897ac26d7dfef0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-09T19:59:35+08:00" />
<meta property="article:modified_time" content="2023-11-09T19:59:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">大数据环境生态搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">大数据环境生态搭建</a></li><li><ul><li><a href="#_2" rel="nofollow">一、通用操作</a></li><li><ul><li><a href="#1_3" rel="nofollow">1、更改三台节点的主机名</a></li><li><a href="#2_linux__7" rel="nofollow">2、关闭三台机器 linux 的安全模式</a></li><li><a href="#3_10" rel="nofollow">3、关闭三台机器的防火墙</a></li><li><a href="#4_15" rel="nofollow">4、设置三台机器的免密的登录</a></li><li><a href="#5_23" rel="nofollow">5、创建用户组和用户</a></li></ul> 
   </li><li><a href="#_JDK18_30" rel="nofollow">二、安装 JDK1.8</a></li><li><a href="#Hadoop__56" rel="nofollow">三、Hadoop 完全分布式</a></li><li><ul><li><a href="#1_coresitexml_74" rel="nofollow">1、配置 core-site.xml</a></li><li><a href="#2_hdfssitexml_98" rel="nofollow">2、配置 hdfs-site.xml</a></li><li><a href="#3_yarnsitexml_117" rel="nofollow">3、配置 yarn-site.xml</a></li><li><a href="#4_mapredsitexml_143" rel="nofollow">4、配置 mapred-site.xml</a></li><li><a href="#5_hadoopenvsh_160" rel="nofollow">5、配置 hadoop-env.sh</a></li><li><a href="#6_hadoop__175" rel="nofollow">6、进行 hadoop 初始化</a></li></ul> 
   </li><li><a href="#scala212__181" rel="nofollow">四、scala2.12 版本</a></li><li><a href="#Spark_On_Yarn_196" rel="nofollow">五、Spark On Yarn</a></li><li><ul><li><a href="#1_yarnsitexml_210" rel="nofollow">1、配置 yarn-site.xml</a></li><li><a href="#2_sparkenvsh_226" rel="nofollow">2、配置 spark-env.sh</a></li></ul> 
   </li><li><a href="#Flink_On_Yarn_241" rel="nofollow">六、Flink On Yarn</a></li><li><ul><li><a href="#1__flinkconfyaml_256" rel="nofollow">1、配置 flink-conf.yaml</a></li></ul> 
   </li><li><a href="#Hive_261" rel="nofollow">七、Hive</a></li><li><ul><li><a href="#1mysql_274" rel="nofollow">1、安装mysql</a></li><li><a href="#2Hive_mysql_303" rel="nofollow">2、Hive 元数据配置到mysql</a></li><li><a href="#3_hivesitexml__307" rel="nofollow">3、配置 hive-site.xml 文件</a></li></ul> 
   </li><li><a href="#zookeeper_377" rel="nofollow">八、zookeeper</a></li><li><a href="#kafka_402" rel="nofollow">九、kafka</a></li><li><a href="#flume_432" rel="nofollow">十、flume</a></li><li><a href="#sqoop_440" rel="nofollow">十一、sqoop</a></li><li><ul><li><a href="#1_sqoopenvsh_444" rel="nofollow">1、配置 sqoop-env.sh</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>大数据环境生态搭建</h2> 
<h3><a id="_2"></a>一、通用操作</h3> 
<h4><a id="1_3"></a>1、更改三台节点的主机名</h4> 
<p>输入命令：<code> hostnamectl set-hostname master</code> 更改master节点的名字<br> 输入命令：<code>hostnamectl set-hostname slave1</code> 更改 slave1 节点的名字<br> 输入命令：<code>hostnamectl set-hostname slave2</code> 更改slave2 节点的名字</p> 
<h4><a id="2_linux__7"></a>2、关闭三台机器 linux 的安全模式</h4> 
<p>输入命令：<code>vim /etc/sysconfig/selinux</code> 改为 disabled<br> <img src="https://images2.imgbox.com/8a/58/rygLHMOF_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_10"></a>3、关闭三台机器的防火墙</h4> 
<p>输入命令：<code>systemctl stop firewalld</code> 关闭防火墙<br> 输入命令：<code>systemctl disable firewalld</code> 防止开机自启<br> 输入命令：<code>systemctl status firewalld</code> 查看防火墙状态<br> <img src="https://images2.imgbox.com/cb/89/NP5yMQ9A_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_15"></a>4、设置三台机器的免密的登录</h4> 
<p>输入命令：<code>ssh-keygen -t rsa</code> 然后连续按三个回车<br> <img src="https://images2.imgbox.com/34/5e/rGL8pegD_o.png" alt="在这里插入图片描述"><br> 三条命令都在 master 节点上直接执行<br> 输入命令：<code>ssh-copy-id master</code> 秘钥分发给master节点<br> 输入命令：<code>ssh-copy-id slave1</code> 秘钥分发给slave1节点<br> 输入命令：<code>ssh-copy-id slave2</code> 秘钥分发给slave2节点<br> <img src="https://images2.imgbox.com/9f/41/IFSe4uif_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5_23"></a>5、创建用户组和用户</h4> 
<p>输入命令：<code>groupadd aex</code> 创建aex用户组<br> 输入命令：<code> useradd -m aex -g aex</code> 创建aex用户属于aex组<br> 要是想给创建的用户添加所有的权限，包括文件系统的<br> 输入命令：<code>sudo visudo</code> 在下面添加 aex ALL=(ALL) ALL 就添加了所有的权限了<br> <img src="https://images2.imgbox.com/df/9c/LB7uiooA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_JDK18_30"></a>二、安装 JDK1.8</h3> 
<p>在 master 节点 /opt 目录下建一个 /opt/software 目录，用来存放所有的安装包<br> <img src="https://images2.imgbox.com/bc/ca/3xf0VGm8_o.png" alt="在这里插入图片描述"><br> 将 jdk1.8 安装包放进去<br> <img src="https://images2.imgbox.com/cf/70/k8siImMA_o.png" alt="在这里插入图片描述"><br> 在建立一个 module 目录，解压好的包都放这里面<br> <img src="https://images2.imgbox.com/f2/5a/UT1DCywo_o.png" alt="在这里插入图片描述"><br> 输入命令：<code> tar -zxvf jdk-8u212-linux-x64.tar.gz -C /opt/module/</code><br> <img src="https://images2.imgbox.com/08/1d/KJxjBfct_o.png" alt="在这里插入图片描述"><br> 输入命令：<code> mv jdk1.8.0_212/ jdk1.8</code> 把名字改为 jdk1.8<br> 接下来配置jdk环境<br> 输入命令：<code>vim /etc/profile</code> 添加下面的配置<br> <img src="https://images2.imgbox.com/80/8f/5GQaaQ9l_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export JAVA_HOME=/opt/module/jdk1.8
export PATH=$PATH:$JAVA_HOME/bin
</code></pre> 
<p>输入命令：<code>source /etc/profile</code> 配置好了保存一下配置<br> <img src="https://images2.imgbox.com/9b/16/kIIEhwsT_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>java -version</code> 可以看到 java 的版本了<br> <img src="https://images2.imgbox.com/7e/75/mLio1ggL_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim hello.java</code> 创建一个java类<br> <img src="https://images2.imgbox.com/25/12/kcwG2OdD_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>javac hello.java</code> 编译java类<br> 输入命令：<code>java hello</code> 运行 java 程序 <br> <img src="https://images2.imgbox.com/a8/c1/Vzl8cTI1_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Hadoop__56"></a>三、Hadoop 完全分布式</h3> 
<p>将 hadoop3.1.3 解压到 /opt/module 目录下<br> 输入命令·： <code>tar -zxvf hadoop-3.1.3.tar.gz -C /opt/module/ </code><br> <img src="https://images2.imgbox.com/5a/0b/w1dugdQl_o.png" alt="请添加图片描述"><br> 然后分发给其他的两个节点<br> 输入命令：<code> scp -r hadoop-3.1.3/ root@slave1:/opt/module/</code> 分发到 slave1 节点<br> 输入命令：<code>scp -r hadoop-3.1.3/ root@slave1:/opt/module/</code> 分发到 slave2 节点<br> 配置环境变量<br> 输入命令：<code>vim /etc/profile</code> 添加下面的配置</p> 
<pre><code class="prism language-xml">export HADOOP_HOME=/opt/hadoop-3.1.3
export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH
export HDFS_NAMENODE_USER=root
export HDFS_DATANODE_USER=root
export HDFS_SECONDARYNAMENODE_USER=root
</code></pre> 
<p>可以看到安装成功了<br> <img src="https://images2.imgbox.com/bb/53/stIFrJq2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1_coresitexml_74"></a>1、配置 core-site.xml</h4> 
<p>输入命令：<code>cd $HADOOP_HOME/etc/hadoop</code> 进入hadoop的配置目录<br> 输入命令：<code>vim core-site</code> 配置 core-site 文件<br> 添加如下的配置<br> <img src="https://images2.imgbox.com/55/cd/oZF8ljhC_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定 NameNode 的地址 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://hadoop102:8020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- 指定 hadoop 数据的存储目录 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/opt/module/hadoop-3.1.3/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- 配置 HDFS 网页登录使用的静态用户为 atguigu --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.http.staticuser.user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>aex<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="2_hdfssitexml_98"></a>2、配置 hdfs-site.xml</h4> 
<p>输入命令：<code>vim hdfs-site.xml</code> 配置hdfs<br> 添加4如下配置<br> <img src="https://images2.imgbox.com/7c/cb/yCI4hegV_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- nn web 端访问地址--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>master:9870<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 2nn web 端访问地址--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.secondary.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>slave2:9868<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="3_yarnsitexml_117"></a>3、配置 yarn-site.xml</h4> 
<p>输入命令：<code>vim yarn-site.xml</code><br> 添加如下配置<br> <img src="https://images2.imgbox.com/ff/53/xGV7TpAw_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- 指定 MR 走 shuffle --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- 指定 ResourceManager 的地址--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>slave1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token comment">&lt;!-- 环境变量的继承 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.env-whitelist<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CO
NF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAP
RED_HOME<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="4_mapredsitexml_143"></a>4、配置 mapred-site.xml</h4> 
<p>输入命令：<code>mapred-site.xml</code><br> <br> 添加以下配置<br> <img src="https://images2.imgbox.com/54/39/JfnVvrv5_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 指定 MapReduce 程序运行在 Yarn 上 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>输入命令：<code> scp -r $HADOOP_HOME root@slave1:$HADOOP_HOME</code> hadoop 配置分发给 slave1<br> 输入命令：<code> scp -r $HADOOP_HOME root@slave2$HADOOP_HOME</code> hadoop 配置分发给 slave2</p> 
<h4><a id="5_hadoopenvsh_160"></a>5、配置 hadoop-env.sh</h4> 
<p>输入命令：<code>vim hadoop-env.sh</code> 在里面添加 jdk 的路径，不然hdfs找不到jdk<br> <img src="https://images2.imgbox.com/28/06/OQoLfFVB_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export JAVA_HOME=/opt/module/jdk1.8
</code></pre> 
<p>然后在 hadoop /sbin 目录下 start-yarn.sh 和 stop-yarn.sh 的第一行 添加下面内容<br> 输入命令：<code>vim /opt/hadoop3.1.3/sbin/start-yarn.sh</code><br> 输入命令：<code>vim /opt/hadoop3.1.3/sbin/stop-yarn.sh</code></p> 
<pre><code class="prism language-xml">YARN_RESOURCEMANAGER_USER=root
HADOOP_SECURE_DN_USER=yarn
YARN_NODEMANAGER_USER=root
</code></pre> 
<h4><a id="6_hadoop__175"></a>6、进行 hadoop 初始化</h4> 
<p>输入命令：<code>hdfs namenode -format</code> 初始化hadoop<br> 输入命令：<code>start-all.sh</code> 可以看到节点已经启动起来了<br> <img src="https://images2.imgbox.com/82/fe/m5Oa4G1Z_o.png" alt="在这里插入图片描述">-<br> 进入webUI界面<br> <img src="https://images2.imgbox.com/47/55/RfcRWRdE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="scala212__181"></a>四、scala2.12 版本</h3> 
<p>先安装 scala 才能安装 spark<br> scala下载地址：<a href="https://www.scala-lang.org/download/all.html" rel="nofollow">https://www.scala-lang.org/download/all.html</a><br> 将<code>/opt/software</code> 目录的 scala2.12 的压缩包解压到<code>/opt/module</code> 目录下<br> 输入命令：<code>tar -zxvf scala-2.12.11.tgz -C /opt/module/</code><br> 输入命令：<code> mv scala-2.12.11/ scala</code> 改个名字，改为scala<br> <img src="https://images2.imgbox.com/95/73/Sqsj7CXb_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim /etc/profile</code> 添加 scala 环境变量<br> <img src="https://images2.imgbox.com/dc/71/2JsrYpsQ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export SCALA_HOME=/opt/module/scala
export PATH=$PATH:$SCALA_HOME/bin
</code></pre> 
<p>输入命令：<code>scala -version</code> 查看scala 是否安装成功<br> <img src="https://images2.imgbox.com/fe/43/f8NGqfra_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Spark_On_Yarn_196"></a>五、Spark On Yarn</h3> 
<p>将 spark3.2 的压缩包上传到 <code>/opt/software</code> 目录下<br> <img src="https://images2.imgbox.com/56/e8/h4OjekVz_o.png" alt="在这里插入图片描述"><br> 输入命令：<code> tar -zxvf spark-3.2.3-bin-hadoop3.2-scala2.13.tgz -C /opt/module/</code> 解压到 <code>/opt/module</code> 目录下<br> 输入命令：<code>mv spark-3.2.3-bin-hadoop3.2-scala2.13/ spark</code> 改名为spark<br> <img src="https://images2.imgbox.com/c1/d2/prKIoUkQ_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim /etc/profile</code> 添加下面的配置<br> <img src="https://images2.imgbox.com/11/14/FLZ4JI1T_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export SPARK_HOME=/opt/module/spark
export PATH=$PATH:$SPARK_HOME/bin
</code></pre> 
<p>输入命令：<code>spark-submit --version</code> 查看是否安装成功<br> <img src="https://images2.imgbox.com/9f/d4/P03TJZie_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1_yarnsitexml_210"></a>1、配置 yarn-site.xml</h4> 
<p>输入命令：<code>vim $HADOOP_HOME/etc/hadoop/yarn-site.xml</code> 配置 yarn-site.xml 文件，添加下面内容<br> <img src="https://images2.imgbox.com/e8/41/OkuGHuJ1_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml"> <span class="token comment">&lt;!--是否启动一个线程检查每个任务正使用的物理内存量，如果任务超出分配值，则直接将其杀掉，默认是 true --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.pmem-check-enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--是否启动一个线程检查每个任务正使用的虚拟内存量，如果任务超出分配值，则直接将其杀掉，默认是 true --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.vmem-check-enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="2_sparkenvsh_226"></a>2、配置 spark-env.sh</h4> 
<p>输入命令：<code>vim /opt/module/spark/spark-env.sh</code> 添加JAVA_HOME 和 YARN_CONF_DIR<br> 输入命令：<code>spark-env.sh.template spark-env.sh</code> 先改个名，配置文件才能生效<br> <img src="https://images2.imgbox.com/a7/26/kDsjGs60_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim spark-env.sh</code> 添加以下内容<br> <img src="https://images2.imgbox.com/71/4b/sz5jusei_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export JAVA_HOME=/opt/module/jdk1.8
export YARN_CONF_DIR=/opt/module/hadoop-3.1.3/etc/hadoop
</code></pre> 
<p>输入命令：<code> spark-submit \ --class org.example.hive_targer1.hive01_provinceeverymonth \ /opt/jars/job2.jar</code> 提交任务到 spark on yarn<br> 运行结果：<br> <img src="https://images2.imgbox.com/cb/4f/4SEip2HT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Flink_On_Yarn_241"></a>六、Flink On Yarn</h3> 
<p>将 flink1.13 的压缩包上传到 <code>/opt/software </code>目录<br> 输入命令：<code>tar -zxvf flink-1.13.0-bin-scala_2.12.tgz -C /opt/module/</code> 解压到 /opt/module 目录<br> 输入命令：<code>mv flink-1.13.0/ flink</code> 我们改个名<br> <img src="https://images2.imgbox.com/4b/f4/4gdlqkQL_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim /etc/profile</code> 增加环境变量<br> <img src="https://images2.imgbox.com/ce/f3/y4tGtxWx_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export HADOOP_CONF_DIR=${HADOOP_HOME}/etc/hadoop
export HADOOP_CLASSPATH=`hadoop classpath`
export FLINK_HOME=/opt/module/flink
export PATH=$PATH:$FLINK_HOME/bin
</code></pre> 
<p>输入命令：<code>flink version</code> 查看版本<br> <img src="https://images2.imgbox.com/f5/6c/KGKruH6O_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1__flinkconfyaml_256"></a>1、配置 flink-conf.yaml</h4> 
<p>输入命令：<code>vim /opt/module/flink/conf/flink-conf.yaml</code> 添加以下配置，只需要将这个值改为8，其他不变<br> <img src="https://images2.imgbox.com/1a/cb/EFKSgm80_o.png" alt="在这里插入图片描述"><br> Per Job（Job 分离模式提交）：<code> bin/flink run -d -t yarn-per-job -c com.atguigu.wc.StreamWordCount FlinkTutorial-1.0-SNAPSHOT.jar</code></p> 
<h3><a id="Hive_261"></a>七、Hive</h3> 
<p>将 Hive3.13 的压缩包上传到 /opt/software 目录下<br> 输入命令：<code> tar -zxvf apache-hive-3.1.3-bin.tar.gz -C /opt/module/</code> 解压到/opt/module 目录下<br> 输入命令：<code> mv apache-hive-3.1.3-bin/ hive</code> 改名为hive<br> <img src="https://images2.imgbox.com/e7/77/apzV7ZAw_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim /etc/profile</code> 添加下面的配置<br> <img src="https://images2.imgbox.com/f8/7a/4aJSXSwq_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export HIVE_HOME=/opt/module/hive
export PATH=$PATH:$HIVE_HOME/bin
</code></pre> 
<p>输入命令：<code>hive --version</code><br> <img src="https://images2.imgbox.com/6b/63/RvnzU89l_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1mysql_274"></a>1、安装mysql</h4> 
<p>输入命令：<code>rpm -qa|grep mariadb mariadb-libs-5.5.56-2.el7.x86_64</code> 检查系统是否安装过mysql<br> <img src="https://images2.imgbox.com/9d/33/yz0y8som_o.png" alt="在这里插入图片描述"><br> 将 mysql 5.7 的压缩包上传到 /opt/module/<br> 输入命令：<code>tar -xvf mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar -C /opt/module/</code> 解压到 /opt/module 目录下<br> <img src="https://images2.imgbox.com/e7/a2/A6xSUnEs_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>yum install -y libaio</code> 安装这个依赖，下面的安装命令依次执行<br> 输入命令：<code> rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code>rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code> rpm -ivh mysql-community-devel-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code> rpm -ivh mysql-community-embedded-compat-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code> rpm -ivh mysql-community-embedded-devel-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code> rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code>rpm -ivh mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code> rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code> rpm -ivh mysql-community-test-5.7.28-1.el7.x86_64.rpm --force --nodeps</code><br> 输入命令：<code>vim my.cnf</code> 删除datadir的值，如果这个目录下有内容的话，全部删除<br> <img src="https://images2.imgbox.com/78/7c/n7cd1CzN_o.png" alt="在这里插入图片描述"><br> 可以看到我们没有<br> <img src="https://images2.imgbox.com/0b/00/Aut4Bzsn_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>sudo mysqld --initialize --user=mysql</code> 初始化数据库<br> 输入命令：<code>sudo cat /var/log/mysqld.log </code> 查看临时密码，<code>root@localhost </code> 后面那个<br> <img src="https://images2.imgbox.com/f7/30/peEHP2iS_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>sudo systemctl start mysqld</code> 启动mysql服务<br> 输入命令：<code>mysql -uroot -p&gt;&amp;5tqKZA4fFt</code> 这是刚刚那个临时密码<br> 输入命令：<code>set password = password("p@ssw0rd");</code> 密码修改为p@ssw0rd<br> <img src="https://images2.imgbox.com/a0/77/FL809m6d_o.png" alt="在这里插入图片描述"><br> 修改 mysql 库下的 user 表中的 root 用户允许任意 ip 连接<br> 输入命令：<code>update mysql.user set host='%' where user='root';</code> <img src="https://images2.imgbox.com/13/8e/cumKZ20a_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2Hive_mysql_303"></a>2、Hive 元数据配置到mysql</h4> 
<p>将 MySQL 的 JDBC 驱动拷贝到 Hive 的 lib 目录下<br> 输入命令：<code> cp mysql-connector-java-5.1.37.jar $HIVE_HOME/lib</code><br> <img src="https://images2.imgbox.com/e6/1c/gZg8x0GJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_hivesitexml__307"></a>3、配置 hive-site.xml 文件</h4> 
<p>在 $HIVE_HOME/conf 目录下 新建 hive-site.xml 文件<br> 输入命令：<code>vim $HIVE_HOME/conf/hive-site.xml</code> 添加下面的内容</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0"?&gt;</span>
<span class="token prolog">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- jdbc 连接的 URL --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>jdbc:mysql://master:3306/metastore?useSSL=false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- jdbc 连接的 Driver--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- jdbc 连接的 username--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- jdbc 连接的 password --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>p@ssw0rd<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Hive 元数据存储版本的验证 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.schema.verification<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--元数据存储授权--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.event.db.notification.api.auth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Hive 默认在 HDFS 的工作目录 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/user/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.uris<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>thrift://master:9083<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>输入命令：<code> hdfs dfs -mkdir -p /user/hive/warehouse</code> 创建hive在hdfs的工作目录<br> 输入命令：<code>mysql -uroot -pp@ssw0rd</code> 进入mysql<br> 输入命令：<code>create database metastore</code> 新建hive元数据库<br> <img src="https://images2.imgbox.com/36/42/RNLrESmX_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>schematool -initSchema -dbType mysql - verbose</code><br> <img src="https://images2.imgbox.com/82/b4/b58cngzh_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim $HIVE_HOME/conf/hive-site.xml</code> 以元数据方式访问hive，添加以下内容<br> <img src="https://images2.imgbox.com/2f/c4/2gqtcFX8_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hive.metastore.uris<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>thrift://master:9083<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>输入命令：<code>nohup /opt/module/hive/bin/hive --service hiveserver2 &amp;</code> 启动hiveserver2 服务<br> 输入命令：<code>hive --service metastoew &amp;</code> 启动hive服务</p> 
<h3><a id="zookeeper_377"></a>八、zookeeper</h3> 
<p>将zookeeper3.5.7 的压缩包上传到 /opt/module 目录下<br> 输入命令：<code> tar -zxvf apache-zookeeper-3.5.7-bin.tar.gz -C /opt/module/</code> 解压到 /opt/module 目录<br> 输入命令：<code>mv apache-zookeeper-3.5.7-bin/ zookeeper</code> 改名为 zookeeper<br> <img src="https://images2.imgbox.com/0f/3e/tmgifllp_o.png" alt="在这里插入图片描述"><br> 输入命令：<code> mkdir /opt/module/zookeeper/zkDate</code> 创建一个zkDate 目录<br> 输入命令：<code>vim myid</code> 在zkDate 目录下，新建一个这个文件,里面就添加一个2，这个是与server相对应的编号<br> <img src="https://images2.imgbox.com/14/c8/vdJ2tzrF_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>scp -r zookeeper/ root@slave1:/opt/module/ </code> 分发给slave1<br> 输入命令：<code>scp -r zookeeper/ root@slave2:/opt/module/</code> 分发给slave2<br> 输入命令：<code>cd /opt/module/zookeeper/conf</code> 进入这个目录<br> 输入命令：<code> mv zoo_sample.cfg zoo.cfg</code> 给这个文件名改个名字<br> <img src="https://images2.imgbox.com/aa/db/USdN8iPx_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim zoo.cfg</code> 添加下面的配置<br> <img src="https://images2.imgbox.com/b7/57/mccExcE2_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">dataDir=/opt/zookeeper/zkDate

server.2=master:2888:3888
server.3=slave1:2888:3888
server.4=slave2:2888:3888
</code></pre> 
<p>输入命令：<code> scp -r zoo.cfg root@slave1:/opt/module/zookeeper/conf/</code> 分发给slave1<br> 输入命令：<code> scp -r zoo.cfg root@slave1:/opt/module/zookeeper/conf/</code> 分发给slave2<br> 输入命令：<code> bin/zkServer.sh start</code> 三台机器启动 zookeeper</p> 
<h3><a id="kafka_402"></a>九、kafka</h3> 
<p>将 kafka2.12 压缩包上传到 /opt/module 目录下<br> 输入命令：<code>tar -zxvf kafka_2.12-3.0.0.tgz -C /opt/module/</code> 解压到 /opt/module 目录下<br> 输入命令：<code> mv kafka_2.12-3.0.0/ kafka</code> 改名为kafka<br> <img src="https://images2.imgbox.com/5d/84/sMf3fmpQ_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim /opt/module/kafka/config/server.properties </code> 修改里面的配置，只更改这两个</p> 
<pre><code class="prism language-xml">log.dirs=/opt/module/kafka/datas
zookeeper.connect=master:2181,slave1:2181,slave2:2181/kafka
</code></pre> 
<p>输入命令：<code>mkdir datas</code> kafka 下面创建一个 datas 目录，这回事kafka的日志存放的目录<br> <img src="https://images2.imgbox.com/21/22/vT1UDbH7_o.png" alt="在这里插入图片描述"><br> 输入命令：<code> scp -r kafka/ root@slave1:/opt/module/</code> 将kafka分发给slave1<br> 输入命令：<code> scp -r kafka/ root@slave2:/opt/module/</code> 将kafka分发给slave2<br> 分别在 slave1和slave2修改配置文件 vim /opt/module/kafka/config/server.properties 里面的<br> <code>broker.id=1、broker.id=2</code><br> <code>broker.id 不得重复，整个集群中唯一。</code> 所以要修改一下是id唯一的<br> 输入命令：<code>vim /etc/profile</code> 添加 kafka 的环境变量</p> 
<pre><code class="prism language-xml">#KAFKA_HOME
export KAFKA_HOME=/opt/module/kafka
export PATH=$PATH:$KAFKA_HOME/bin
</code></pre> 
<p>输入命令：<code>scp -r /etc/profile root@slave1:/etc/profile</code> 分发给 slave1<br> 输入命令：<code>scp -r /etc/profile root@slave2:/etc/profile</code> 分发给slave2<br> 输入命令：<code> zkServer.sh start</code> 先在三个节点启动 zookeeper 集群<br> 输入命令：<code>bin/kafka-server-start.sh -daemon config/server.properties</code> 在三个节点依次启动kafka<br> 创建主题：<strong>installtopic</strong><br> 输入命令：<code>bin/kafka-topics.sh --bootstrap-server hadoop102:9092 --create --partitions 2 --replication-factor 2 --topic installtopic</code><br> 输入命令：<code>bin/kafka-topics.sh --bootstrap-server master:9092 --list</code> 查看服务器中所有的主题</p> 
<h3><a id="flume_432"></a>十、flume</h3> 
<p>将 flume1.9.0 压缩包上传到 /opt/module 目录下<br> 输入命令：<code> tar -zxvf apache-flume-1.9.0-bin.tar.gz -C /opt/module/</code> 解压到 /opt/module 目录下<br> 输入命令：<code>mv apache-flume-1.9.0-bin/ flume</code> 改名为flume<br> <img src="https://images2.imgbox.com/b7/f5/lPpJFkdI_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>cd flume/lib/</code> 将 lib 文件夹下的 guava-11.0.2.jar 删除以兼容 Hadoop 3.1.3<br> 输入命令：<code>rm -rf guava-11.0.2.jar </code> 删除这个依赖<br> 输入命令：<code>bin/flume-ng agent -n a1 -c conf/ -f job/file_to_kafka</code> flume 启动命令</p> 
<h3><a id="sqoop_440"></a>十一、sqoop</h3> 
<p>将 sqoop1.4.7 的压缩包上传到 /opt/software 目录下<br> 输入命令：<code> tar -zxvf spark-3.2.3-bin-hadoop3.2-scala2.13.tgz -C /opt/module/</code> 解压到 /opt/module 目录<br> 输入命令：<code> mv sqoop-1.4.7.bin__hadoop-2.6.0/ sqoop</code> 改名为 sqoop</p> 
<h4><a id="1_sqoopenvsh_444"></a>1、配置 sqoop-env.sh</h4> 
<p>输入命令：<code>cd /opt/module/sqoop/conf</code> 进入这个目录<br> 输入命令：<code> mv sqoop-env-template.sh sqoop-env-sh</code> 改为 sqoop-env.sh<br> <img src="https://images2.imgbox.com/61/18/inx3ySYa_o.png" alt="在这里插入图片描述"><br> 输入命令：<code>vim sqoop-env.sh</code> 添加下面的内容<br> <img src="https://images2.imgbox.com/5e/57/S0eaDRqe_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-xml">export ZOOKEEPER_HOME=/opt/module/zookeeper
export HADOOP_COMMON_HOME=/opt/module/hadoop-3.1.3
export HADOOP_MAPRED_HOME=/opt/module/hadoop-3.1.3
export HIVE_HOME=/opt/module/hive
export ZOOKEEPER_HOME=/opt/module/zookeeper
export ZOOCFGDIR=/opt/module/zookeeper
</code></pre> 
<p>把mysql的驱动拷贝到 /opt/module/sqoop/lib 目录下<br> 输入命令：<code> cp mysql-connector-java-5.1.37.jar /opt/module/sqoop/lib/</code> 将mysql 驱动拷贝到 lib 目录下<br> 输入命令：<code>bin/sqoop help</code> 查看命令提示<br> <img src="https://images2.imgbox.com/76/94/Sd8OFAuA_o.png" alt="在这里插入图片描述"><br> 连接mysql数据库，可以看到已经连接成功了<br> 输入命令：<code>bin/sqoop list-databases --connect jdbc:mysql://master:3306/ --username root --password p@ssw0rd</code><br> <img src="https://images2.imgbox.com/5c/af/G7Qp6TH3_o.png" alt="在这里插入图片描述"><br> 下面是sqoop 导入数据的语法格式</p> 
<pre><code class="prism language-xml">bin/sqoop import \   --导入
--connect jdbc:mysql://hadoop102:3306/shtd_store \  --mysql数据库连接
--username root \			-- 用户
--password p@ssw0rd \       --密码
--table user_info \         --表名
--target-dir /user/dates \	--hdfs 文件地址
--delete-target-dir \   --如果有这个文件就删除,在公司里就不要用了，测试的时候还可以
--num-mappers 1 \			--mappers 数量 
--fields-terminated-by "\t"  --数据的分割符
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4a1df57b2226a609c021f86843c30661/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">spring事件监听机制Event 详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/060f89a3069f57bca948434ac7752ed8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue2前端使用axios发起post请求，后端(springboot)拿不到值解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
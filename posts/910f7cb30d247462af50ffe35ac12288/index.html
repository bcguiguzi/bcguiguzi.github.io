<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>树莓派使用c&#43;&#43; qt 编译opencv流程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="树莓派使用c&#43;&#43; qt 编译opencv流程" />
<meta property="og:description" content="1、安装qt。
我是用的是bullseye版本的树莓派，32位和64位的都用过，均只能使用下述命令来安装。
$ sudo apt-get update
$ sudo apt-get upgrade
$ sudo apt-get install qtbase5-dev qtchooser
$ sudo apt-get install qt5-qmake qtbase5-dev-tools
$ sudo apt-get install qtcreator
$ sudo apt-get install qtdeclarative5-dev
上述命令来自下面这条博客
(85条消息) 树莓派bullseye 系统安装QT5_bullseye安装pyqt5_Li丶Chong的博客-CSDN博客
（另一种常见的方法使用下面这个命令：
sudo apt-get install qt5-default
但是我使用这条命令始终显示没有下载候选选项，更换了下载源后依旧无法找到，因此应该是树莓派版本问题。）
2、编译opencv。
这个烦得很。
（a）首先去opencv官网下载源码（即sources选项），然后放到树莓派中。进入opencv文件夹，创建build文件，进入build文件，输入cmake .. ，再输入make -j4（若这一过程中突然停掉，可能是swap空间不够，按照网上的方式开辟一块就可以了），最后再输入sudo make install。（其实这一段都是很常规的步骤，网上这样讲的方法也很多，可参考这个博客(85条消息) 树莓派安装使用 opencv c&#43;&#43;版本_Lin_QC的博客-CSDN博客）
此外，如果(96条消息) 为什么OpenCV4 “pkg-config --modversion opencv”显示“ No package ‘opencv‘ found”？解决方法！_no package &#39;opencv&#39; found_疯狂的蕉尼基的博客-CSDN博客
（b）重点讲接下来可能出现的报错怎么整。首先就是在使用qt过程中引入opencv的话可能会报错找不到opencv的各种头文件（其实4.几的版本只需要一个#include&lt;opencv2/opencv.hpp&gt;就够了），那我们首先需要配置一下opencv.conf。首先输入如下命令：
sudo nano /etc/ld.so.conf.d/opencv.conf" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/910f7cb30d247462af50ffe35ac12288/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-06T15:01:54+08:00" />
<meta property="article:modified_time" content="2023-04-06T15:01:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">树莓派使用c&#43;&#43; qt 编译opencv流程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1、安装qt。</p> 
<p>我是用的是bullseye版本的树莓派，32位和64位的都用过，均只能使用下述命令来安装。</p> 
<p>$ sudo apt-get update<br> $ sudo apt-get upgrade<br> $ sudo apt-get install qtbase5-dev qtchooser<br> $ sudo apt-get install qt5-qmake qtbase5-dev-tools<br> $ sudo apt-get install qtcreator<br> $ sudo apt-get install qtdeclarative5-dev</p> 
<p>上述命令来自下面这条博客<br><a href="https://blog.csdn.net/qq_40116098/article/details/125747562" title="(85条消息) 树莓派bullseye 系统安装QT5_bullseye安装pyqt5_Li丶Chong的博客-CSDN博客">(85条消息) 树莓派bullseye 系统安装QT5_bullseye安装pyqt5_Li丶Chong的博客-CSDN博客</a></p> 
<p>（另一种常见的方法使用下面这个命令：</p> 
<p>        sudo apt-get install qt5-default</p> 
<p>但是我使用这条命令始终显示没有下载候选选项，更换了下载源后依旧无法找到，因此应该是树莓派版本问题。）</p> 
<p>2、编译opencv。</p> 
<p>        这个烦得很。</p> 
<p>        （a）首先去opencv官网下载源码（即sources选项），然后放到树莓派中。进入opencv文件夹，创建build文件，进入build文件，输入cmake .. ，再输入make -j4（若这一过程中突然停掉，可能是swap空间不够，按照网上的方式开辟一块就可以了），最后再输入sudo make install。（其实这一段都是很常规的步骤，网上这样讲的方法也很多，可参考这个博客<a href="https://blog.csdn.net/Lin_QC/article/details/104392936" title="(85条消息) 树莓派安装使用 opencv c++版本_Lin_QC的博客-CSDN博客">(85条消息) 树莓派安装使用 opencv c++版本_Lin_QC的博客-CSDN博客</a>）</p> 
<p>        此外，如果<a href="https://blog.csdn.net/qq_38505858/article/details/117780774" title="(96条消息) 为什么OpenCV4 “pkg-config --modversion opencv”显示“ No package ‘opencv‘ found”？解决方法！_no package 'opencv' found_疯狂的蕉尼基的博客-CSDN博客">(96条消息) 为什么OpenCV4 “pkg-config --modversion opencv”显示“ No package ‘opencv‘ found”？解决方法！_no package 'opencv' found_疯狂的蕉尼基的博客-CSDN博客</a></p> 
<p>        （b）重点讲接下来可能出现的报错怎么整。首先就是在使用qt过程中引入opencv的话可能会报错找不到opencv的各种头文件（其实4.几的版本只需要一个#include&lt;opencv2/opencv.hpp&gt;就够了），那我们首先需要配置一下opencv.conf。首先输入如下命令：</p> 
<p>                        sudo nano /etc/ld.so.conf.d/opencv.conf</p> 
<p>         然后输入如下内容： /usr/local/lib</p> 
<p>         保存退出，输入 sudo ldconfig 命令以更新动态链接库。</p> 
<p>        再配置一下bash.bashrc。首先输入如下命令：</p> 
<p>                          sudo nano /etc/bash.bashrc</p> 
<p>  然后拉到最下面输入如下内容：                   PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig                          </p> 
<p>      export PKG_CONFIG_PATH</p> 
<p>        保存并退出，重启一下树莓派。  </p> 
<p>        </p> 
<p></p> 
<p></p> 
<p>最后，在你的qt工程文件里添加如下代码：</p> 
<p>INCLUDEPATH += /home/pi/opencv-4.5.2/include/     （这行主要是要包含opencv.hpp文件）</p> 
<p><br> LIBS += /home/pi/opencv-4.5.2/build/lib/libopencv_calib3d.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_core.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_features2d.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_flann.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_highgui.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_imgcodecs.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_imgproc.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_ml.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_objdetect.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_photo.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_shape.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_stitching.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_superres.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_videoio.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_video.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_videostab.so.4.5 \<br>         /home/pi/opencv-4.5.2/build/lib/libopencv_imgcodecs.so.4.5<br> （每人所使用的动态链接库即路径是不完全一样的，有的是在/usr/local/lib/arm-linux-gnueabihf路径下，所以大家可以按需写，或者像我这个菜鸟一样写很多）</p> 
<p>        （c）好了吗？并没有。可能还会提示 error: 'opencv2/opencv_modules.hpp' 。</p> 
<p>我的opencv_modules.hpp文件在/usr/local/include/opencv4/opencv2目录下，估计是树莓派没找到，树莓派默认能够看到的是/usr/include/，因此我们用一条命令给它链接一下：</p> 
<p>        sudo ln -s /usr/local/include/opencv4/opencv2 /usr/include/</p> 
<p></p> 
<p>3、下载clang。</p> 
<p>        在使用你的C++ qt5前，还需要下载clang，输入如下命令：</p> 
<p>                sudo apt-get install clang</p> 
<p></p> 
<p></p> 
<p>终于，我的qt代码终于不会报错了！</p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a94474475f44ebb6829def357d16f5f3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">两步轻松实现ChatGPT联网</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5e85ee3cfae66ba8901a49053e29aba7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何进行最小二乘法，并且附加条件呢？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
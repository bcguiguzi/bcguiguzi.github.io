<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Macbook Pro å¤–æ¥æ˜¾å¡å®ç°Tensorflow GPUè¿è¡Œä¹‹ç¯å¢ƒé…ç½®ï¼ˆé‡ç‚¹ï¼‰ - ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Macbook Pro å¤–æ¥æ˜¾å¡å®ç°Tensorflow GPUè¿è¡Œä¹‹ç¯å¢ƒé…ç½®ï¼ˆé‡ç‚¹ï¼‰" />
<meta property="og:description" content="Macbook Pro å¤–æ¥æ˜¾å¡å®ç°Tensorflow GPUè¿è¡Œâ€“ç¯å¢ƒé…ç½® MacOS é‡è£…å¤–æ¥æ˜¾å¡ï¼ˆå†…å±è¾“å‡ºï¼‰ç¯å¢ƒé…ç½®ï¼ˆé‡ç‚¹ï¼‰ğŸ‘†Tensorflow GPU é…ç½® ç¯å¢ƒé…ç½® å‡†å¤‡å·¥ä½œ æ˜¾å¡ï¼šGTX 1080TI 11Gæ˜¾å¡åï¼šMantiz ï¼ˆæŠ€å˜‰çš„Gamingboxåº”è¯¥ä¹Ÿå¯ä»¥ï¼‰æ˜¾å¡æ¬ºéª—å™¨ï¼ˆæœ‰æ¡ä»¶çš„é…ä¸ªå¤–å±å§ï¼Œæ¯•ç«Ÿå¤–å±è½¬å†…å±è¾“å‡ºæŸè€—è¿˜æ˜¯æŒºå¤§çš„ï¼‰MacOSï¼šé›·ç”µ3æ¥å£ å®‰è£…æ­¥éª¤ macOS ç³»ç»Ÿå®‰è£…ï¼ˆè§blog1ï¼‰CUDAé…ç½®cuDNNé…ç½®Tensorflowé…ç½®ï¼ˆè§blog4ï¼‰ CUDAåŠ é€Ÿ å‡†å¤‡åˆ—è¡¨ èµ„æºç‰ˆæœ¬å·MacOS10.13. 6ï¼ˆ17G65ï¼‰GPU driverNIVIDIA Web Driver 387.10.10.40.105CUDA driver9.2ï¼ˆ396.148 ï¼‰cuDNNcudnn-9.2-osx-x64-v7.2.1.38Xcode9.2 æ³¨æ„âš ï¸ï¼šç›¸å…³é©±åŠ¨ç‰ˆæœ¬ä»¥åŠç¼–è¯‘ç¯å¢ƒå·¥å…·å¿…é¡»é…å¥—å¯¹åº”ï¼
æ­¥éª¤
å…³é—­SIPï¼šé‡æ–°å¯åŠ¨macOSï¼Œå¹¶åŒæ—¶æŒ‰ä½Commandå’ŒRè¿›å…¥Recovery OSï¼›
åœ¨Utilitiesèœå•ä¸­å¯åŠ¨Terminalï¼›
åœ¨Terminalä¸­æ‰§è¡Œå‘½ä»¤ï¼š
$ csrutil disable;
é‡æ–°å¯åŠ¨åè¿›å…¥Recovery OS åœ¨Utilitiesä¸­å¯åŠ¨Terminal æ‰§è¡Œå‘½ä»¤ï¼š
$ csrutil status
ç¡®è®¤çŠ¶æ€ä¸ºdisable
å®‰è£…GPUé©±åŠ¨
åœ¨Terminalä¸­æ‰§è¡Œï¼š
sudo curl -s &#34;https://api.github.com/repos/mayankk2308/purge-wrangler/releases/latest&#34; | grep &#39;&#34;browser_download_url&#34;:&#39; | sed -E &#39;s/.*&#34;([^&#34;]&#43;)&#34;.*/\1/&#39; | xargs curl -L -s -0 &gt; purge-wrangler.sh &amp;&amp; chmod &#43;x purge-wrangler.sh &amp;&amp; ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/be1651a42c88254ecd6f630282e9f746/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-31T12:01:55+08:00" />
<meta property="article:modified_time" content="2020-05-31T12:01:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Macbook Pro å¤–æ¥æ˜¾å¡å®ç°Tensorflow GPUè¿è¡Œä¹‹ç¯å¢ƒé…ç½®ï¼ˆé‡ç‚¹ï¼‰</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Macbook_Pro_Tensorflow_GPU_0"></a>Macbook Pro å¤–æ¥æ˜¾å¡å®ç°Tensorflow GPUè¿è¡Œâ€“ç¯å¢ƒé…ç½®</h2> 
<ol><li><a href="https://blog.csdn.net/weixin_38250514/article/details/106453383">MacOS é‡è£…</a></li><li><a href="https://blog.csdn.net/weixin_38250514/article/details/106453419">å¤–æ¥æ˜¾å¡ï¼ˆå†…å±è¾“å‡ºï¼‰</a></li><li>ç¯å¢ƒé…ç½®ï¼ˆé‡ç‚¹ï¼‰ğŸ‘†</li><li><a href="https://blog.csdn.net/weixin_38250514/article/details/106453555">Tensorflow GPU é…ç½®</a></li></ol> 
<hr> 
<h2><a id="_6"></a>ç¯å¢ƒé…ç½®</h2> 
<h3><a id="_7"></a>å‡†å¤‡å·¥ä½œ</h3> 
<ul><li>æ˜¾å¡ï¼šGTX 1080TI 11G</li><li>æ˜¾å¡åï¼šMantiz ï¼ˆæŠ€å˜‰çš„Gamingboxåº”è¯¥ä¹Ÿå¯ä»¥ï¼‰</li><li>æ˜¾å¡æ¬ºéª—å™¨ï¼ˆæœ‰æ¡ä»¶çš„é…ä¸ªå¤–å±å§ï¼Œæ¯•ç«Ÿå¤–å±è½¬å†…å±è¾“å‡ºæŸè€—è¿˜æ˜¯æŒºå¤§çš„ï¼‰</li><li>MacOSï¼š</li><li>é›·ç”µ3æ¥å£</li></ul> 
<h3><a id="_13"></a>å®‰è£…æ­¥éª¤</h3> 
<ul><li>macOS ç³»ç»Ÿå®‰è£…ï¼ˆè§blog1ï¼‰</li><li>CUDAé…ç½®</li><li>cuDNNé…ç½®</li><li>Tensorflowé…ç½®ï¼ˆè§blog4ï¼‰</li></ul> 
<h4><a id="CUDA_18"></a>CUDAåŠ é€Ÿ</h4> 
<ul><li>å‡†å¤‡åˆ—è¡¨</li></ul> 
<table><thead><tr><th>èµ„æº</th><th>ç‰ˆæœ¬å·</th></tr></thead><tbody><tr><td>MacOS</td><td>10.13. 6ï¼ˆ17G65ï¼‰</td></tr><tr><td>GPU driver</td><td>NIVIDIA Web Driver 387.10.10.40.105</td></tr><tr><td>CUDA driver</td><td>9.2ï¼ˆ396.148 ï¼‰</td></tr><tr><td>cuDNN</td><td>cudnn-9.2-osx-x64-v7.2.1.38</td></tr><tr><td>Xcode</td><td>9.2</td></tr></tbody></table> 
<p>æ³¨æ„âš ï¸ï¼šç›¸å…³é©±åŠ¨ç‰ˆæœ¬ä»¥åŠç¼–è¯‘ç¯å¢ƒå·¥å…·å¿…é¡»é…å¥—å¯¹åº”ï¼</p> 
<ul><li> <p>æ­¥éª¤</p> </li><li> <p>å…³é—­SIPï¼šé‡æ–°å¯åŠ¨macOSï¼Œå¹¶åŒæ—¶æŒ‰ä½Commandå’ŒRè¿›å…¥Recovery OSï¼›<br> åœ¨Utilitiesèœå•ä¸­å¯åŠ¨Terminalï¼›<br> åœ¨Terminalä¸­æ‰§è¡Œå‘½ä»¤ï¼š<br> <code>$ csrutil disable;</code><br> é‡æ–°å¯åŠ¨åè¿›å…¥Recovery OS åœ¨Utilitiesä¸­å¯åŠ¨Terminal æ‰§è¡Œå‘½ä»¤ï¼š<br> <code>$ csrutil status</code><br> ç¡®è®¤çŠ¶æ€ä¸ºdisable</p> </li><li> <p>å®‰è£…GPUé©±åŠ¨<br> åœ¨Terminalä¸­æ‰§è¡Œï¼š<br> <code>sudo curl -s "https://api.github.com/repos/mayankk2308/purge-wrangler/releases/latest" | grep '"browser_download_url":' | sed -E 's/.*"([^"]+)".*/\1/' | xargs curl -L -s -0 &gt; purge-wrangler.sh &amp;&amp; chmod +x purge-wrangler.sh &amp;&amp; ./purge-wrangler.sh &amp;&amp; rm purge-wrangler.sh</code><br> é€‰æ‹©å¯¹åº”çš„æ˜¾å¡å³å¯</p> </li><li> <p>å®‰è£…CUDAï¼š</p> 
  <ol><li>âš ï¸ï¼šCUDA driverå¿…é¡»ä¸GPU driverç‰ˆæœ¬ä¸€è‡´ï¼ç‰ˆæœ¬å·å¯¹åº”æŸ¥æ‰¾ï¼š<a href="http://www.macvidcards.com/drivers.html" rel="nofollow">http://www.macvidcards.com/drivers.html</a></li><li>åœ¨CUDA driveré‡Œæ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬å·ä¸‹è½½å®‰è£… <a href="http://www.nvidia.com/object/mac-driver-archive.html" rel="nofollow">http://www.nvidia.com/object/mac-driver-archive.html</a></li><li>å®‰è£…CUDA Toolkit<br> âš ï¸ï¼š CUDA Toolkitå¿…é¡»ä¸CUDA driverç‰ˆæœ¬å·ä»¥åŠmacOSå¯¹åº”ï¼<br> ä¸‹è½½å®‰è£…é¡ºåºï¼šå…ˆå®‰è£…åŸºç¡€å®‰è£…åŒ…å†è£…è¡¥ä¸ï¼Œä¸€å®šæ³¨æ„é¡ºåºï¼<br> <a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow">https://developer.nvidia.com/cuda-toolkit-archive</a></li></ol> </li><li> <p>é…ç½®CUDAç¯å¢ƒå‰çš„å·¥ä½œ</p> 
  <ol><li>Xcode å®‰è£…<br> CUDAç¯å¢ƒé…ç½®æ—¶ï¼Œéœ€è¦Xcode command line toolsçš„æ”¯æŒã€‚macOS 10.13.6 ä¸€èˆ¬å¯¹åº”çš„æ˜¯Xcode 9.2ã€‚å¦‚æœæœ‰Xcodeç‰ˆæœ¬è¾ƒé«˜çš„åŒå­¦å»ºè®®é‡æ–°å®‰è£…Xcode<br> ä¸‹è½½åœ°å€ï¼š <a href="https://developer.apple.com/downloads/" rel="nofollow">https://developer.apple.com/downloads/</a><br> å¦‚æœXcode å’ŒCommand Line Toolsä¸CUDAçš„ç‰ˆæœ¬å¯¹åº”ä¸ä¸€è‡´ï¼Œåé¢åœ¨éªŒè¯CUDAç¯å¢ƒæ—¶å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹âŒé”™è¯¯ï¼š<br> <code>nvcc fatal : The version ('10.0') of the host compiler ('Apple clang') is not supported</code><br> æ­¤æ—¶éœ€è¦é‡æ–°å®‰è£…Xcodeä»¥åŠCLT<br> å®‰è£…ååˆ‡æ¢åˆ°å½“å‰<code>sudo xcode-select --switch /Library/Developer/CommandLineTools</code></li><li>å¤–æ¥æ˜¾å¡è¿æ¥<br> å‚è€ƒå¦ä¸€ç¯‡</li></ol> </li><li> <p>æ­£å¼é…ç½®CUDAç¯å¢ƒ</p> 
  <ol><li> <p>åœ¨Terminalä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š<br> <code>cd ~ open -e .bash_profile</code></p> <p>ç¼–è¾‘ï½/.bash_profile æ–‡ä»¶</p> </li><li> <p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š<br> <code>export CUDA_HOME=/usr/local/cuda export DYLD_LIBRARY_PATH="$CUDA_HOME/lib:$CUDA_HOME/extras/CUPTI/lib" export LD_LIBRARY_PATH=$DYLD_LIBRARY_PATH export PATH=$DYLD_LIBRARY_PATH:$PATH export flags="--config=cuda --config=opt"</code><br> æ·»åŠ å®Œæ¯•ï¼Œä¿å­˜æ–‡ä»¶åå…³é—­</p> </li><li> <p>æ‰§è¡Œå‘½ä»¤é‡å¯bash_profile<br> <code>.~/.bash_profile</code></p> </li><li> <p>ç¡®è®¤CUDAç¯å¢ƒï¼Œåœ¨Terminalä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š<br> <code>cs /usr/local/cuda/samples</code><br> <code>sudo make -C 1_Utilities/deviceQuery</code><br> <code>./bin/x86_64/darwin/release/deviceQuery</code><br> æ‰§è¡Œåå¦‚æœå¾—åˆ°æ˜¾ç¤º Result = PASS åˆ™CUDAç¯å¢ƒé…ç½®æˆåŠŸ</p> </li></ol> </li><li> <p>å®‰è£…cuDNN<br> ä¸‹è½½å®‰è£…ï¼š<a href="https://developer.nvidia.com/rdp/cudnn-archive" rel="nofollow">https://developer.nvidia.com/rdp/cudnn-archive</a><br> ä¾æ—§æ³¨æ„ç‰ˆæœ¬å·çš„å¯¹åº”ï¼<br> å®˜æ–¹å®‰è£…æŒ‡å¯¼ï¼šhttps://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#install-mac<br> æ‰‹åŠ¨å‚»ç“œå¼å®‰è£…ï¼š<br> ä¹‹å‰é…ç½®CUDAç¯å¢ƒæ—¶ï¼Œåœ¨ç³»ç»Ÿä¸Šä¼šç”Ÿæˆä¸€ä¸ªåä¸ºDeveloperçš„æ–‡ä»¶å¤¹<br> å°†ä¸‹è½½å¥½çš„cuDNNå‹ç¼©æ–‡ä»¶æ‹–è‡³è¯¥æ–‡ä»¶å¤¹<br> å¯åŠ¨Terminalï¼Œæ‰§è¡Œè§£å‹æ“ä½œï¼š<br> <code>$ tar -xzvf cudnn-9.0-osx-x64-v7.tgz</code><br> è§£å‹åå¤åˆ¶ä»¥ä¸‹æ–‡ä»¶è‡³è¦æ±‚è·¯å¾„ï¼š<br> <code>$ sudo cp cuda/include/cudnn.h /usr/local/cuda/include</code><br> <code>$ sudo cp cuda/lib/libcudnn* /usr/local/cuda/lib</code><br> <code>$ sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib/libcudnn*</code><br> æœ€åæ·»åŠ ç¯å¢ƒå˜é‡ï¼š<br> <code>$ export DYLD_LIBRARY_PATH=/usr/local/cuda/lib:$DYLD_LIBRARY_PATH</code></p> </li></ul> 
<p>è‡³æ­¤é…ç½®ç»“æŸã€‚<br> åœ¨é…ç½®è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä»¥ä¸‹åšæ–‡ï¼š</p> 
<ol><li>é—®é¢˜ï¼š# xcode-select: error: tool â€˜xcodebuildâ€™ requires Xcode<br> è§£å†³ï¼š<a href="https://www.jianshu.com/p/07a281ff57d3" rel="nofollow">https://www.jianshu.com/p/07a281ff57d3</a></li><li>é—®é¢˜ï¼š# CUDA driver version is insufficient for CUDA runtime version<br> è§£å†³ï¼š<a href="https://blog.csdn.net/nijun1992/article/details/80446226%20https://www.cnblogs.com/liaohuiqiang/archive/2018/10/15/9791365.html">https://blog.csdn.net/nijun1992/article/details/80446226<br> https://www.cnblogs.com/liaohuiqiang/archive/2018/10/15/9791365.html</a></li><li>é—®é¢˜ï¼šnvcc fatal : The version (â€˜10.0â€™) of the host compiler (â€˜Apple clangâ€™) is not supported<br> è§£å†³ï¼š <a href="https://github.com/colmap/colmap/issues/296#ref-issue-290211077">https://github.com/colmap/colmap/issues/296#ref-issue-290211077</a></li></ol> 
<h3><a id="_106"></a>âš ï¸æ³¨æ„</h3> 
<ol><li>å¤–æ¥æ˜¾å¡ä¸æ”¯æŒçƒ­æ’æ‹”ï¼å¼€æœºè¿›å…¥ç™»å½•ç•Œé¢åå†æ¥å…¥æ˜¾å¡ï¼Œå…³æœºé»‘å±åå†æ‹”æ‰æ˜¾å¡ã€‚</li><li>å¤–æ¥æ˜¾å¡å¿…é¡»æ¥å¤–å±æˆ–è€…æ˜¾å¡æ¬ºéª—å™¨æ‰èƒ½å·¥ä½œï¼Œä¸ç„¶CUDAç¯å¢ƒé…ç½®ä¸ä¼šæˆåŠŸã€‚</li><li>å¦‚æœæœ‰MacOS 10.13.6ï¼ˆ17G66ï¼‰çš„åŒå­¦ï¼Œå¼ºçƒˆå»ºè®®é‡è£…ç³»ç»Ÿã€‚è¿™ä¸ªç³»ç»Ÿç‰ˆæœ¬æ‰¾ä¸åˆ°å¯¹åº”NIVIDA web driverï¼ŒCUDAç­‰ï¼Œå°½ç®¡GitHubä¸Šæœ‰è‡ªåŠ¨ç¼–è¯‘çš„æ–¹å¼å¯ä»¥å®‰è£…CUDAä½†æ˜¯ä¹‹åçš„Xcode CTLï¼ŒcuDNNéƒ½ä¼šå‡ºç°é—®é¢˜ã€‚âš ï¼šä¸è¦ä»è‹¹æœå®˜ç½‘è·å¾—High Sierra 10.13.6ï¼Œå› ä¸ºå®˜ç½‘çš„éƒ½æ˜¯è¿™ä¸ª17G66çš„ç‰ˆæœ¬ï¼</li></ol> 
<h3><a id="_111"></a>å‚è€ƒèµ„æ–™</h3> 
<ol><li><a href="https://blog.csdn.net/ignoreyou/article/details/85132738">https://blog.csdn.net/ignoreyou/article/details/85132738</a></li><li><a href="https://blog.csdn.net/wz22881916/article/details/78807993">https://blog.csdn.net/wz22881916/article/details/78807993</a></li><li><a href="https://www.cnblogs.com/didda/p/9065387.html" rel="nofollow">https://www.cnblogs.com/didda/p/9065387.html</a></li><li><a href="https://blog.csdn.net/u014475479/article/details/81702392">https://blog.csdn.net/u014475479/article/details/81702392</a></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ac88e6f354c24583ce5b8e18fd0254a8/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">haspMapæºç åˆ†æä¹‹-é“¾è¡¨æ‹†åˆ†é—®é¢˜</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e33a9eb9f4662b3642dcc8fa0d94095/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Andriod P DNSè§£æä¸äº†é—®é¢˜è§£å†³</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
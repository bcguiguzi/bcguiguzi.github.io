<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python量化数据获取：综合指数介绍及如何获取数据 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python量化数据获取：综合指数介绍及如何获取数据" />
<meta property="og:description" content="通常综合指数指的是一个市场全部股票按照一定的权重进行加权和，并且以某一个交易日为基准计算出来的数值。这个数值反映了整个市场的走向和趋势，能反映系统性的信息。A股市场比较常用的综合性指数就是有名的上证指数sh.000001和深证综指sz.399106。
其它的综合指数还包括，B股指数，工业指数，商业指数等。
可以通过BaoStock获取历史的数据，包括价格和成交量信息，以此来分析市场的热度，趋势和活跃程度。获取指数数据的方式和获取个股的数据方式一样，使用同一个函数接口。
import baostock as bs
import pandas as pd
#### 登陆系统####
lg = bs.login()
# 显示登陆返回信息
print(&#39;login respond error_code:&#39;&#43;lg.error_code)
print(&#39;login respond error_msg:&#39;&#43;lg.error_msg)
#### 获取指数(综合指数、规模指数、一级行业指数、二级行业指数、策略指数、成长指数、价值指数、主题指数)K线数据 ####
##综合指数，例如：sh.000001 上证指数，sz.399106 深证综指 等；
# 详细指标参数，参见“历史行情指标参数”章节
rs = bs.query_history_k_data(&#34;sh.600000&#34;,
&#34;date,code,open,high,low,close,preclose,volume,amount,pctChg&#34;,
start_date=&#39;2017-01-01&#39;, end_date=&#39;2017-06-30&#39;, frequency=&#34;d&#34;,adjustflag=&#34;3&#34;)
print(&#39;query_history_k_data responderror_code:&#39;&#43;rs.error_code)
print(&#39;query_history_k_data respond error_msg:&#39;&#43;rs.error_msg)
#### 打印结果集 ####
data_list = []
while (rs.error_code == &#39;0&#39;) &amp; rs.next():
# 获取一条记录，将记录合并在一起
data_list.append(rs.get_row_data())
result = pd.DataFrame(data_list, columns=rs.fields)
#### 结果集输出到csv文件 #### result.to_csv(&#34;D:\\history_Index_k_data.csv&#34;,index=False)
print(result)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d8b6de4201b7329f5dbc836fa5d232c6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-04T17:18:55+08:00" />
<meta property="article:modified_time" content="2018-07-04T17:18:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python量化数据获取：综合指数介绍及如何获取数据</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="color:#1A1A1A;background:#FFFFFF;">      通常综合指数指的是一个市场全部股票按照一定的权重进行加权和，并且以某一个交易日为基准计算出来的数值。这个数值反映了整个市场的走向和趋势，能反映系统性的信息。A</span>股市场比较常用的综合性指数就是有名的上证指数sh.000001和深证综指sz.399106。</p> 
<p><span style="color:#1A1A1A;background:#FFFFFF;">       </span><span style="color:#1A1A1A;background:#FFFFFF;">其它的综合指数还包括，B</span>股指数，工业指数，商业指数等。</p> 
<p><span style="color:#1A1A1A;background:#FFFFFF;">可以通过BaoStock</span>获取历史的数据，包括价格和成交量信息，以此来分析市场的热度，趋势和活跃程度。获取指数数据的方式和获取个股的数据方式一样，使用同一个函数接口。</p> 
<p><span style="color:#1A1A1A;background:#FFFFFF;"> </span></p> 
<div style="background:#F8F9FA;"> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">import baostock as bs</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">import pandas as pd</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;"> </span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">#### </span><span style="color:#1A1A1A;background:#FFFFFF;">登陆系统####</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">lg = bs.login()</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;"># </span><span style="color:#1A1A1A;background:#FFFFFF;">显示登陆返回信息</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">print('login respond error_code:'+lg.error_code)</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">print('login respond error_msg:'+lg.error_msg)</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;"> </span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">#### </span><span style="color:#1A1A1A;background:#FFFFFF;">获取指数(</span>综合指数、规模指数、一级行业指数、二级行业指数、策略指数、成长指数、价值指数、主题指数)K线数据 ####</p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">##</span><span style="color:#1A1A1A;background:#FFFFFF;">综合指数，例如：sh.000001 </span>上证指数，sz.399106 深证综指 等；</p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;"> </span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;"># </span><span style="color:#1A1A1A;background:#FFFFFF;">详细指标参数，参见“</span>历史行情指标参数”章节</p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">rs = bs.query_history_k_data("sh.600000",</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">   "date,code,open,high,low,close,preclose,volume,amount,pctChg",</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">   start_date='2017-01-01', end_date='2017-06-30', </span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">    frequency="d",adjustflag="3")</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">print('query_history_k_data responderror_code:'+rs.error_code)</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">print('query_history_k_data respond  error_msg:'+rs.error_msg)</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;"> </span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">#### </span><span style="color:#1A1A1A;background:#FFFFFF;">打印结果集 ####</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">data_list = []</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">while (rs.error_code == '0') &amp; rs.next():</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">    # </span><span style="color:#1A1A1A;background:#FFFFFF;">获取一条记录，将记录合并在一起</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">    data_list.append(rs.get_row_data())</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">result = pd.DataFrame(data_list, columns=rs.fields)</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">#### </span><span style="color:#1A1A1A;background:#FFFFFF;">结果集输出到csv</span>文件 ####  </p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">result.to_csv("D:\\history_Index_k_data.csv",index=False)</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">print(result)</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;"> </span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">#### </span><span style="color:#1A1A1A;background:#FFFFFF;">登出系统####</span></p> 
 <p align="left"><span style="color:#1A1A1A;background:#FFFFFF;">bs.logout()</span></p> 
</div> 
<p><span style="color:#1A1A1A;background:#FFFFFF;"> </span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/814851906a20a07b27a5dc154750211d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">编程题目：到底买不买</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6744c34fc3c5aa037f9e29e0f8e6ac56/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">以太坊中ERC20交易的检测</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>链表复习——《C语言程序设计》浙江大学mooc翁恺 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="链表复习——《C语言程序设计》浙江大学mooc翁恺" />
<meta property="og:description" content="链表——《C语言程序设计》浙江大学mooc翁恺 从数组到链表一、可变长度数组缺点：二、指针复习 理解最初的链表一、理解最初的链表二、 链表的函数 链表的基本操作 从数组到链表 代码和思路来自中国大学慕课网站的《数据结构》——浙江大学，翁恺老师的公开课程。学数据结构的时候总是学不明白链表，而可变长度数组的学习有助于后面链表的学习，来总结一下。
非常啰嗦的一篇笔记开始了
一、可变长度数组 数组按道理都是不可变长度，这里也不是说真的能让数组一会儿长一会儿短，而是通过自定义结构体和函数实现让人直观感受无需声明新的长度数组来实现数组长度的变化。这里特别注意要和链表区分开。
图示：
（将数组a增长为a’）
函数：
//the interface:
Array array_create(int init_size);//初始化
void array_free(Array *a);//释放
int array_size(const Array a);//数组大小计算
int array_at(Array *a, int index);//访问数组某个位置的元素
void array_inflate(Array *a,int more_size);//变长
结构体：
typedef struct {
int size;
int* array;
}Array;
函数和结构体的声明放在array.h文件中
array.h
//可变长度数组代码练习 //《C语言程序设计（mooc）》 浙江大学 翁恺 #ifndef _ARRAY_H_ #define _ARRAY_H_ typedef struct { int size; int* array; }Array; //the interface: Array array_create(int init_size);//初始化 void array_free(Array *a);//释放 int array_size(const Array *a);//数组大小计算 int* array_at(Array *a, int index);//访问数组某个位置的元素 void array_inflate(Array *a,int more_size);//变长 #endif **" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/2a27ec1dfe02992f7b4ee34ee2e110ef/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-21T10:42:19+08:00" />
<meta property="article:modified_time" content="2022-05-21T10:42:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">链表复习——《C语言程序设计》浙江大学mooc翁恺</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>链表——《C语言程序设计》浙江大学mooc翁恺</h4> 
 <ul><li><a href="#_1" rel="nofollow">从数组到链表</a></li><li><ul><li><a href="#_5" rel="nofollow">一、可变长度数组</a></li><li><a href="#_181" rel="nofollow">缺点：</a></li><li><a href="#_187" rel="nofollow">二、指针复习</a></li></ul> 
  </li><li><a href="#_219" rel="nofollow">理解最初的链表</a></li><li><ul><li><a href="#_222" rel="nofollow">一、理解最初的链表</a></li><li><a href="#__328" rel="nofollow">二、 链表的函数</a></li></ul> 
  </li><li><a href="#_496" rel="nofollow">链表的基本操作</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>从数组到链表</h2> 
<p>代码和思路来自中国大学慕课网站的《数据结构》——浙江大学，翁恺老师的公开课程。学数据结构的时候总是学不明白链表，而可变长度数组的学习有助于后面链表的学习，来总结一下。</p> 
<p>非常啰嗦的一篇笔记开始了</p> 
<h3><a id="_5"></a>一、可变长度数组</h3> 
<p>数组按道理都是不可变长度，<strong>这里也不是说真的能让数组一会儿长一会儿短</strong>，而是通过自定义结构体和函数实现让人直观感受无需声明新的长度数组来实现数组长度的变化。这里<strong>特别注意要和链表区分开。</strong><br> <strong>图示：</strong><br> <img src="https://images2.imgbox.com/0e/61/0ha7zc1o_o.jpg" alt="">（将数组a增长为a’）</p> 
<p><strong>函数：</strong></p> 
<blockquote> 
 <p>//the interface:<br> Array array_create(int init_size);//初始化<br> void array_free(Array *a);//释放<br> int array_size(const Array <em>a);//数组大小计算<br> int</em> array_at(Array *a, int index);//访问数组某个位置的元素<br> void array_inflate(Array *a,int more_size);//变长</p> 
</blockquote> 
<p><strong>结构体：</strong></p> 
<blockquote> 
 <p>typedef struct {<!-- --><br> int size;<br> int* array;<br> }Array;</p> 
</blockquote> 
<p>函数和结构体的声明放在array.h文件中<br> <strong>array.h</strong></p> 
<pre><code class="prism language-javascript"><span class="token comment">//可变长度数组代码练习</span>
<span class="token comment">//《C语言程序设计（mooc）》 浙江大学 翁恺</span>

#ifndef _ARRAY_H_
#define _ARRAY_H_

typedef struct <span class="token punctuation">{<!-- --></span>
	int size<span class="token punctuation">;</span>
	int<span class="token operator">*</span> array<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Array<span class="token punctuation">;</span>

<span class="token comment">//the interface:</span>
Array <span class="token function">array_create</span><span class="token punctuation">(</span>int init_size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//初始化</span>
<span class="token keyword">void</span> <span class="token function">array_free</span><span class="token punctuation">(</span>Array <span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//释放</span>
int <span class="token function">array_size</span><span class="token punctuation">(</span><span class="token keyword">const</span> Array <span class="token operator">*</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//数组大小计算</span>
int<span class="token operator">*</span> <span class="token function">array_at</span><span class="token punctuation">(</span>Array <span class="token operator">*</span>a<span class="token punctuation">,</span> int index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//访问数组某个位置的元素</span>
<span class="token keyword">void</span> <span class="token function">array_inflate</span><span class="token punctuation">(</span>Array <span class="token operator">*</span>a<span class="token punctuation">,</span>int more_size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//变长</span>


#endif
</code></pre> 
<p>**</p> 
<p><strong>具体函数功能实现：array.cpp</strong></p> 
<pre><code class="prism language-javascript">#include <span class="token string">"array.h"</span>
#include <span class="token operator">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token operator">&gt;</span>
#include <span class="token operator">&lt;</span>stdlib<span class="token punctuation">.</span>h<span class="token operator">&gt;</span>

<span class="token keyword">const</span> int <span class="token constant">BLOCK_SIZE</span> <span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token comment">/*typedef struct {
	int size;
	int* array;
}Array;*/</span>


<span class="token comment">//初始化</span>
Array <span class="token function">array_create</span><span class="token punctuation">(</span><span class="token parameter">int init_size</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Array a<span class="token punctuation">;</span>
	a<span class="token punctuation">.</span>size <span class="token operator">=</span> init_size<span class="token punctuation">;</span>
	a<span class="token punctuation">.</span>array <span class="token operator">=</span> <span class="token punctuation">(</span>int<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token function">sizeof</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">*</span> init_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*对比：
* Array* array_create(Array* a, int init_size)
* {
* ---------------------------------------
*	潜在风险：
*	a==NULL?
*	a已经指向了有意义的，要先free
* ---------------------------------------
*	a-&gt;size = init_size;
*	a-&gt;array = ...;
*	return a;
* }

*/</span>


<span class="token comment">//释放</span>
<span class="token keyword">void</span> <span class="token function">array_free</span><span class="token punctuation">(</span><span class="token parameter">Array<span class="token operator">*</span> a</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//a是个本地变量，离开main的时候，a会被回收</span>
	<span class="token comment">//但同时还有a结构中的array，所以free的对象其实时结构体中的array</span>
	<span class="token function">free</span><span class="token punctuation">(</span>a<span class="token operator">-</span><span class="token operator">&gt;</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
	a<span class="token operator">-</span><span class="token operator">&gt;</span>array <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	a<span class="token operator">-</span><span class="token operator">&gt;</span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//数组大小计算</span>
<span class="token comment">//封装</span>
int <span class="token function">array_size</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">const</span> Array<span class="token operator">*</span> a</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a<span class="token operator">-</span><span class="token operator">&gt;</span>size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//访问数组某个位置的元素</span>
int<span class="token operator">*</span> <span class="token function">array_at</span><span class="token punctuation">(</span><span class="token parameter">Array<span class="token operator">*</span> a<span class="token punctuation">,</span> int index</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> a<span class="token operator">-</span><span class="token operator">&gt;</span>size<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//array_inflate(a, index - a-&gt;size + 1);做法不经济</span>
		<span class="token comment">//block:</span>
		<span class="token function">array_inflate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">(</span>index <span class="token operator">/</span> <span class="token constant">BLOCK_SIZE</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token constant">BLOCK_SIZE</span> <span class="token operator">-</span> a<span class="token operator">-</span><span class="token operator">&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span>a<span class="token operator">-</span><span class="token operator">&gt;</span>array<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//另一种方法，通过get和set实现赋值（instead of array_at）</span>
int <span class="token function">array_get</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">const</span> Array<span class="token operator">*</span> a<span class="token punctuation">,</span> int index</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a<span class="token operator">-</span><span class="token operator">&gt;</span>array<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">array_set</span><span class="token punctuation">(</span><span class="token parameter">Array<span class="token operator">*</span> a<span class="token punctuation">,</span> int index<span class="token punctuation">,</span> int value</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	a<span class="token operator">-</span><span class="token operator">&gt;</span>array<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">//变长</span>
<span class="token keyword">void</span> <span class="token function">array_inflate</span><span class="token punctuation">(</span><span class="token parameter">Array<span class="token operator">*</span> a<span class="token punctuation">,</span> int more_size</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	int<span class="token operator">*</span> p <span class="token operator">=</span> <span class="token punctuation">(</span>int<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token function">sizeof</span><span class="token punctuation">(</span>a<span class="token operator">-</span><span class="token operator">&gt;</span>size <span class="token operator">+</span> more_size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	int i<span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> a<span class="token operator">-</span><span class="token operator">&gt;</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token operator">-</span><span class="token operator">&gt;</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">free</span><span class="token punctuation">(</span>a<span class="token operator">-</span><span class="token operator">&gt;</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//换掉</span>
	a<span class="token operator">-</span><span class="token operator">&gt;</span>array <span class="token operator">=</span> p<span class="token punctuation">;</span><span class="token comment">//更新1</span>
	a<span class="token operator">-</span><span class="token operator">&gt;</span>size <span class="token operator">+=</span> more_size<span class="token punctuation">;</span><span class="token comment">//更新2</span>

<span class="token punctuation">}</span>


int <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Array a <span class="token operator">=</span> <span class="token function">array_create</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//更灵活的使用array_create()返回的东西</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"size=%d\n"</span><span class="token punctuation">,</span><span class="token function">array_size</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//封装了</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//没封装</span>

	<span class="token operator">*</span><span class="token function">array_at</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token function">array_at</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	int number<span class="token punctuation">;</span><span class="token comment">//读取变量</span>
	int cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//计数器</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"input :\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">scanf_s</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token function">array_at</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> cnt<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"size= %d\n"</span><span class="token punctuation">,</span> <span class="token function">array_size</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//封装了</span>
	<span class="token function">array_free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>**</p> 
<h3><a id="_181"></a>缺点：</h3> 
<ol><li><li><li><li>复制时间、malloc要时间。多考虑当规模很大时候的情况。引出linked list</li></ol> 
<h3><a id="_187"></a>二、指针复习</h3> 
<p><strong>运算符&amp;</strong></p> 
<ol><li>获得变量的地址，它的操作数必须是变量</li><li>地址的大小是否于int相同取决于编译器</li><li>&amp;不能对没有地址的东西取地址</li></ol> 
<blockquote> 
 <p>for example:<br> &amp;(a+b)<br> &amp;(a++)<br> &amp;(++a)</p> 
</blockquote> 
<pre><code class="prism language-javascript">int i<span class="token punctuation">;</span>
<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-javascript">#include <span class="token operator">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token operator">&gt;</span>
int <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">void</span></span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	int i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	int p<span class="token punctuation">;</span>
	p <span class="token operator">=</span> <span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token operator">&amp;</span>i<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"0x%x\n"</span><span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lu\n"</span><span class="token punctuation">,</span><span class="token function">sizeof</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%lu\n"</span><span class="token punctuation">,</span><span class="token function">sizeof</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/51/67/JWA8oeiM_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_219"></a>理解最初的链表</h2> 
<p>一开始的代码：</p> 
<h3><a id="_222"></a>一、理解最初的链表</h3> 
<p>定义节点：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_node</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> data<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">_node</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Node<span class="token punctuation">;</span> 
</code></pre> 
<p>注：<br> 不可以这么写：</p> 
<pre><code class="prism language-c"> <span class="token number">1.</span> <span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_node</span><span class="token punctuation">{<!-- --></span>
 <span class="token number">2.</span> 	<span class="token keyword">int</span> data<span class="token punctuation">;</span>
 <span class="token number">3.</span> 	Node <span class="token operator">*</span>next<span class="token punctuation">;</span>
 <span class="token number">4.</span> Node<span class="token punctuation">;</span>
 <span class="token comment">//此时第3行使用的Node在第4行才完成声明定义！！！！</span>
</code></pre> 
<p>main函数中实现添加新的结点</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node <span class="token operator">*</span>head <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> num<span class="token punctuation">;</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"input to expend linklist:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//测试语句</span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//以num=-1作为结尾 </span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//add to linked-list:</span>
			Node <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span>Node<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>Node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			p<span class="token operator">-&gt;</span>data <span class="token operator">=</span> num<span class="token punctuation">;</span>
			p<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
			<span class="token comment">//find the last:</span>
			Node <span class="token operator">*</span>last <span class="token operator">=</span> head<span class="token punctuation">;</span>
			<span class="token keyword">while</span><span class="token punctuation">(</span>last<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				last <span class="token operator">=</span> last<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//attach</span>
			last<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"updated p:%d\n"</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//测试语句</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这里缺少了考虑一开始head就指向NULL的情况。</p> 
<p>修改代码：<strong>添加对last是否为空的判断</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_node</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> data<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">_node</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Node<span class="token punctuation">;</span> 

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node <span class="token operator">*</span>head <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> num<span class="token punctuation">;</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"input to expend linklist:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//以num=-1作为结尾 </span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//add to linked-list:</span>
			Node <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span>Node<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>Node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			p<span class="token operator">-&gt;</span>data <span class="token operator">=</span> num<span class="token punctuation">;</span>
			p<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
			<span class="token comment">//find the last:</span>
			Node <span class="token operator">*</span>last <span class="token operator">=</span> head<span class="token punctuation">;</span>
			<span class="token comment">//修改：</span>
			<span class="token comment">//判断last是否为空</span>
 <span class="token number">1.</span> 			<span class="token keyword">if</span> <span class="token punctuation">(</span>last<span class="token punctuation">)</span>
 <span class="token number">2.</span> 			<span class="token punctuation">{<!-- --></span>
 <span class="token number">3.</span> 			<span class="token keyword">while</span><span class="token punctuation">(</span>last<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span>
 <span class="token number">4.</span> 			<span class="token punctuation">{<!-- --></span>
 <span class="token number">5.</span> 				last <span class="token operator">=</span> last<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
 <span class="token number">6.</span> 			<span class="token punctuation">}</span>			
 <span class="token number">7.</span> 			<span class="token comment">//attach</span>
 <span class="token number">8.</span> 			last<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span>
 <span class="token number">9.</span> 		<span class="token punctuation">}</span>			
 <span class="token number">10.</span> 		<span class="token keyword">else</span> 
 <span class="token number">11.</span> 		<span class="token comment">//last为空，改last-&gt;next = p为head = p</span>
 <span class="token number">12.</span> 			head <span class="token operator">=</span> p<span class="token punctuation">;</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"updated p:%d\n"</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="__328"></a>二、 链表的函数</h3> 
<p>（以链表的插入add函数为例）</p> 
<ol><li>函数原型声明</li></ol> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//参数：链表的头节点head、 要添加的int型数据num</span>
</code></pre> 
<ol start="2"><li>add函数使用</li></ol> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Node <span class="token operator">*</span>head <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> num<span class="token punctuation">;</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"input to expend linklist:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//以num=-1作为结尾 </span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>	
	<span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>函数定义</li></ol> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//add to linked-list:</span>
	Node <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span>Node<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>Node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	p<span class="token operator">-&gt;</span>data <span class="token operator">=</span> num<span class="token punctuation">;</span>
	p<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token comment">//find the last:</span>
	Node <span class="token operator">*</span>last <span class="token operator">=</span> head<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>last<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>last<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			last <span class="token operator">=</span> last<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//attach</span>
		last<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> head <span class="token operator">=</span> p<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"updated p:%d\n"</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
	
</code></pre> 
<p>存在一个问题，在add函数中只是对形参head进行了修改，<strong>没法对main函数中实际的head产生影响。</strong><br> 对于这个问题又有好几个做法：</p> 
<p><strong>1. 全局变量</strong><br> 在函数体外加一行：</p> 
<pre><code class="prism language-c">Node<span class="token operator">*</span> head<span class="token punctuation">;</span>
</code></pre> 
<p>缺点：<br> 全局变量是有害的，使得函数只能对这个全局变量产生影响。当程序里有不止一个链表时，就很麻烦了。显然是不可取的。</p> 
<p><strong>2. 修改函数返回值</strong></p> 
<p>（1） 修改返回值</p> 
<pre><code class="prism language-c">Node<span class="token operator">*</span> <span class="token function">add</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>（2） 赋值变量</p> 
<pre><code class="prism language-c">head <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span>head<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>缺点：需要程序员知道要将函数赋值给要改变的变量。如果程序员不知道，对空链表的操作就会错误。</p> 
<p><strong>3. 指针的指针</strong></p> 
<pre><code class="prism language-c">Node<span class="token operator">*</span> <span class="token function">add</span><span class="token punctuation">(</span>Node<span class="token operator">*</span><span class="token operator">*</span> pHead<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span><span class="token comment">//参数传入指针的指针</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//find the last:</span>
	Node <span class="token operator">*</span>last <span class="token operator">=</span> head<span class="token punctuation">;</span><span class="token comment">//原本</span>
	Node <span class="token operator">*</span>last <span class="token operator">=</span> <span class="token operator">*</span>pHead<span class="token punctuation">;</span><span class="token comment">//修改</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">return</span> head<span class="token punctuation">;</span><span class="token comment">//return不return没什么关系</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>4. 定义结构链表</strong></p> 
<p>他来了他来了</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_list</span><span class="token punctuation">{<!-- --></span>
	Node<span class="token operator">*</span> head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>List<span class="token punctuation">;</span>
</code></pre> 
<p>优点：<br> 自己定义一个结构能够直接表示整个链表。<br> 给将来改进、升级带来了可能</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_node</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> data<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">_node</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Node<span class="token punctuation">;</span> 

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_list</span><span class="token punctuation">{<!-- --></span>
	Node head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>List<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	List list<span class="token punctuation">;</span>
	<span class="token comment">//Node *head = NULL;</span>
	List<span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> num<span class="token punctuation">;</span>
	<span class="token keyword">do</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"input to expend linklist:\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//以num=-1作为结尾 </span>
		<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		<span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>List<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span>num <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>List <span class="token operator">*</span>pList<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//add to linked-list:</span>
	Node <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span>Node<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>Node<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	p<span class="token operator">-&gt;</span>data <span class="token operator">=</span> num<span class="token punctuation">;</span>
	p<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token comment">//find the last:</span>
	Node <span class="token operator">*</span>last <span class="token operator">=</span> pList<span class="token operator">-&gt;</span>head<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>last<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">while</span><span class="token punctuation">(</span>last<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			last <span class="token operator">=</span> last<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//attach</span>
		last<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> 
		pList<span class="token operator">-&gt;</span>head <span class="token operator">=</span> p<span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"updated p:%d\n"</span><span class="token punctuation">,</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
	
</code></pre> 
<h2><a id="_496"></a>链表的基本操作</h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fe12142cbc50a273943b92f3c68c4935/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决latex 出现File ended while scanning use of \BR@@bibitem.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/582070288cfa9923109623e890597d54/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">学习笔记7-STM32官方库.c/.h文件功能（汇总）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>javascript ajax for,通过javascript中的ajax保护JSON响应（for（;;）;） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="javascript ajax for,通过javascript中的ajax保护JSON响应（for（;;）;）" />
<meta property="og:description" content="我一直在阅读，我知道有类似的问题，但我找不到我想要的答案。
因此，在ajax响应输出JSON字符串之前，它是关于(；)；while(1)；的。
现在我想知道的是这将如何工作？我想尝试使用和许多著名网站一样的技术，比如facebook with for(；；)；
所以在ajax.php文件中，我认为必须这样做：
阿贾克斯.php
$arr = array(&#34;value&#34; =&gt;&#34;something&#34;,&#34;moreValues&#34; =&gt;&#34;moreSomething&#34;);
die(&#34;for(;;);&#34;.json_encode($arr));
现在的答案是：
for(;;);{&#34;value&#34;:&#34;something&#34;,&#34;moreValues&#34;:&#34;moreSomething&#34;}
号
我现在该怎么处理这根绳子？我是否应该删除(；)；用一个子字符串或其他东西，然后使用json.parse(string)；(那么，如果我要直接删除它，为什么还要在响应中发送for(；)。？
这将如何帮助我解决安全问题，如果出现问题，&#34;用户&#34;将如何进入(；；)的无限循环？
我知道我遗漏了一些东西，而且我还没有找到任何演示如何执行此操作的示例。有人吗？如果你发现这个问题是重复的，请参考一个例子，它是用代码而不是文字来演示的。谢谢！
stackoverflow.com/questions/2669690/&amp;hellip；和stackoverflow.com/questions/6339790/&amp;hellip；
我已经读了这些文章20遍了，我想用更多的无代码单词来更好的演示。
如果你读过这些问题并回答了20次，你就不会问像What shall I do with this string now?、Then why did I even send the for(;;); in the response if i&#39;m going to remove it directly..?、And how will this help me with security issues, and how will a&#34;user&#34; enter the infinity loop for(;;); if something is wrong?这样的问题了。
如果你知道答案，你能用代码告诉我这是如何工作的吗？
你已经解决了-shall i remove for(;;); with a substr or something and then use JSON." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/db2922cfd16d1408311538d558ed0bbd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T13:58:17+08:00" />
<meta property="article:modified_time" content="2021-08-05T13:58:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">javascript ajax for,通过javascript中的ajax保护JSON响应（for（;;）;）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>我一直在阅读，我知道有类似的问题，但我找不到我想要的答案。</p> 
 <p>因此，在ajax响应输出JSON字符串之前，它是关于(；)；while(1)；的。</p> 
 <p>现在我想知道的是这将如何工作？我想尝试使用和许多著名网站一样的技术，比如facebook with for(；；)；</p> 
 <p>所以在ajax.php文件中，我认为必须这样做：</p> 
 <p>阿贾克斯.php</p> 
 <p>$arr = array("value" =&gt;"something","moreValues" =&gt;"moreSomething");</p> 
 <p>die("for(;;);".json_encode($arr));</p> 
 <p>现在的答案是：</p> 
 <p>for(;;);{"value":"something","moreValues":"moreSomething"}</p> 
 <p>号</p> 
 <p>我现在该怎么处理这根绳子？我是否应该删除(；)；用一个子字符串或其他东西，然后使用json.parse(string)；(那么，如果我要直接删除它，为什么还要在响应中发送for(；)。？</p> 
 <p>这将如何帮助我解决安全问题，如果出现问题，"用户"将如何进入(；；)的无限循环？</p> 
 <p>我知道我遗漏了一些东西，而且我还没有找到任何演示如何执行此操作的示例。有人吗？如果你发现这个问题是重复的，请参考一个例子，它是用代码而不是文字来演示的。谢谢！</p> 
 <p>stackoverflow.com/questions/2669690/&amp;hellip；和stackoverflow.com/questions/6339790/&amp;hellip；</p> 
 <p>我已经读了这些文章20遍了，我想用更多的无代码单词来更好的演示。</p> 
 <p>如果你读过这些问题并回答了20次，你就不会问像What shall I do with this string now?、Then why did I even send the for(;;); in the response if i'm going to remove it directly..?、And how will this help me with security issues, and how will a"user" enter the infinity loop for(;;); if something is wrong?这样的问题了。</p> 
 <p>如果你知道答案，你能用代码告诉我这是如何工作的吗？</p> 
 <p>你已经解决了-shall i remove for(;;); with a substr or something and then use JSON.parse(string);。所有事情的推理都在我链接的问题/答案中，代码由您决定，您希望如何实现它。回答只是一根绳子，所以我觉得没问题</p> 
 <p>您缺少的是，当一个通过标记引用一个URL时，您没有能力修改返回数据的内容，而是按照给定的方式执行。但是，如果通过Ajax检索数据，则可以删除前缀。安全性来自Ajax对Ajax的跨源代码检查。</p> 
 <p>好吧，开始有点道理了，但我还是被卡住了，你能给我举个例子吗？</p> 
 <p>它只会重复伊恩链接到的问题中的例子。</p> 
 <p>我用一些简单的javascript解决了这个问题，可以这样使用：</p> 
 <p>$.ajax({<!-- --></p> 
 <p>url: mylink',</p> 
 <p>type: 'post',</p> 
 <p>complete: function(){<!-- --></p> 
 <p>self.removeAttr('disabled');</p> 
 <p>removeLoading();</p> 
 <p>},</p> 
 <p>success: function(data){<!-- --></p> 
 <p>s1 = new handleData(data);</p> 
 <p>if(s1.getError()){<!-- --></p> 
 <p>return setMsgPopup(s1.getError(),1);</p> 
 <p>}</p> 
 <p>arr = s1.getResult();</p> 
 <p>}</p> 
 <p>});</p> 
 <p>以下是handledata类：</p> 
 <p>var handleData = (function(){<!-- --></p> 
 <p>var result=false;</p> 
 <p>var error=false;</p> 
 <p>var objSize=0;</p> 
 <p>var handleData = function(data){<!-- --></p> 
 <p>fixedData = data;</p> 
 <p>arr = data.split('for (;;);');</p> 
 <p>if(!arr[1]){<!-- --></p> 
 <p>this.result = false;</p> 
 <p>}else{<!-- --></p> 
 <p>fixedData = arr[1];</p> 
 <p>}</p> 
 <p>try{<!-- --></p> 
 <p>this.result = JSON.parse(fixedData);</p> 
 <p>}catch(e){<!-- --></p> 
 <p>this.result = false;</p> 
 <p>}</p> 
 <p>if(this.result){<!-- --></p> 
 <p>if(this.result['t'] == undefined){<!-- --></p> 
 <p>if(this.result['error'] != undefined)</p> 
 <p>this.setError(this.result['msg']);</p> 
 <p>else</p> 
 <p>this.setError("An error have occured.");</p> 
 <p>}</p> 
 <p>if(this.result['error'] != undefined)</p> 
 <p>this.setError(this.result['msg']);</p> 
 <p>if(this.result['t'])</p> 
 <p>delete this.result['t'];</p> 
 <p>}else</p> 
 <p>this.setError("An error have occured.");</p> 
 <p>this.setSize();</p> 
 <p>};</p> 
 <p>handleData.prototype.setError = function(msgError){<!-- --></p> 
 <p>this.error = msgError;</p> 
 <p>};</p> 
 <p>handleData.prototype.getError = function(){<!-- --></p> 
 <p>return this.error;</p> 
 <p>};</p> 
 <p>handleData.prototype.getResult = function(){<!-- --></p> 
 <p>return this.result;</p> 
 <p>};</p> 
 <p>handleData.prototype.setSize = function(){<!-- --></p> 
 <p>if(!this.result)</p> 
 <p>return;</p> 
 <p>var size =0;</p> 
 <p>for(key in this.result) {<!-- --></p> 
 <p>if(this.result.hasOwnProperty(key))</p> 
 <p>size++;</p> 
 <p>}</p> 
 <p>this.objSize = size;</p> 
 <p>}</p> 
 <p>handleData.prototype.getSize = function(){<!-- --></p> 
 <p>return this.objSize;</p> 
 <p>};</p> 
 <p>return handleData;</p> 
 <p>})();</p> 
 <p>号</p> 
 <p>注意，这个代码和问题本身一样古老。它可以做得更好，但这是我如何修复它的时间。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/890440bffcea88fb1f55fd02384f928f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">100台电脑无盘服务器配置,100台机子建立一个无盘工作站，用什么结构什么配置..... 爱问知识人...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6fa490417eec44713eb3c55f844199e7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ajax怎么解决报414,如何解决HTTP 414“请求URI太长”错误？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ospf多区配置与原理 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ospf多区配置与原理" />
<meta property="og:description" content="ospf多区域的生成
生成ospf多区域的原因
改善网络的可扩展性
快速收敛
ospf的路由器类型
area 0内部路由器 只保存本区域内的链路状态信息
abr区域边界路由器 用来连接区域0和其他区域
asbr自治系统边界路由器 用来连接ospf的as与外部其他的路由
ospf的区域类型
骨干区域 area 0
非骨干区域分类
标准区域
末梢区域（stub）
完全末梢区域(totally stubby)
非纯末梢区域（nssa)
链路状态数据库的组成
每个路由器都创建了由每个接口、对应的相邻节点和接口速度组成的数据库
链路状态数据库中每个条目称为LSA（链路状态通告），常见的有六种LSA类型
链路状态通告（LSA）类型
Type 1路由器LSA由区域内的路由器发出的
Type 2网络LSA 由区域内的DR发出的
Type 3网络汇总LSAABR发出的，其他区域的汇总链路通告
Type 4ASBR汇总LSAABR发出的，用于通告ASBR信息
Type 5AS外部LSAASBR发出的，用于通告外部路由
Type 7NSSA外部LSANSSA区域内的ASBR发出的，用于通告本区域连接的外部路由
OSPF常用检查命令
show ip route查看路由表信息（直连/学习）
show ip route ospf只查看OSPF学习到的路由
show ip protocol查看OSPF协议配置信息
show ip ospf查看OSPF是如何配置的以及ABR的信息
show ip ospf database查看LSDB内的所有LSA数据信息
show ip ospf interface查看接口上OSPF配置的信息
show ip ospf neighbor查看OSPF邻居和邻接的状态
show ip ospf neighbor detail 查看OSPF邻居的详细信息（包括DR/BDR）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/fb178c29c02c0290f668f2f414220b8f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-09T14:18:57+08:00" />
<meta property="article:modified_time" content="2023-10-09T14:18:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ospf多区配置与原理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <p>ospf多区域的生成</p> 
 <p>生成ospf多区域的原因</p> 
 <p>改善网络的可扩展性</p> 
 <p>快速收敛</p> 
 <p></p> 
 <p>ospf的路由器类型</p> 
 <p>area 0内部路由器 只保存本区域内的链路状态信息</p> 
 <p>abr区域边界路由器 用来连接区域0和其他区域</p> 
 <p>asbr自治系统边界路由器 用来连接ospf的as与外部其他的路由</p> 
 <p></p> 
 <p>ospf的区域类型</p> 
 <p>骨干区域 area 0</p> 
 <p>非骨干区域分类</p> 
 <p>标准区域</p> 
 <p>末梢区域（stub）</p> 
 <p>完全末梢区域(totally stubby)</p> 
 <p>非纯末梢区域（nssa)</p> 
 <p></p> 
 <p></p> 
 <p>链路状态数据库的组成</p> 
 <p>每个路由器都创建了由每个接口、对应的相邻节点和接口速度组成的数据库</p> 
 <p>链路状态数据库中每个条目称为LSA（链路状态通告），常见的有六种LSA类型</p> 
 <p></p> 
 <p>链路状态通告（LSA）类型</p> 
 <p>Type 1路由器LSA由区域内的路由器发出的</p> 
 <p>Type 2网络LSA 由区域内的DR发出的</p> 
 <p>Type 3网络汇总LSAABR发出的，其他区域的汇总链路通告</p> 
 <p>Type 4ASBR汇总LSAABR发出的，用于通告ASBR信息</p> 
 <p>Type 5AS外部LSAASBR发出的，用于通告外部路由</p> 
 <p>Type 7NSSA外部LSANSSA区域内的ASBR发出的，用于通告本区域连接的外部路由</p> 
 <p></p> 
 <p></p> 
 <p>OSPF常用检查命令</p> 
 <p>show ip route查看路由表信息（直连/学习）</p> 
 <p>show ip route ospf只查看OSPF学习到的路由</p> 
 <p>show ip protocol查看OSPF协议配置信息</p> 
 <p>show ip ospf查看OSPF是如何配置的以及ABR的信息</p> 
 <p>show ip ospf database查看LSDB内的所有LSA数据信息</p> 
 <p>show ip ospf interface查看接口上OSPF配置的信息</p> 
 <p>show ip ospf neighbor查看OSPF邻居和邻接的状态</p> 
 <p>show ip ospf neighbor detail 查看OSPF邻居的详细信息（包括DR/BDR）</p> 
 <p>debug ip ospf adj查看路由器“邻接”的整个过程</p> 
 <p>debug ip ospf packet查看每个OSPF数据包的信息</p> 
 <p>clear ip route清空路由表</p> 
 <p></p> 
 <p>OSPF路由表</p> 
 <p>区域内路径（Intra-area path）</p> 
 <p>区域间路径（Inter-area path）</p> 
 <p></p> 
 <p></p> 
 <p>路由器对路由条目的选择</p> 
 <p>路由器只把最优的路由条目添加到路由表</p> 
 <p>选择路由条目的依据</p> 
 <p>管理距离</p> 
 <p>度量值</p> 
 <p></p> 
 <p>OSPF链路状态通告LSA4</p> 
 <p>ASBR汇总LSA（ASBR Summary LSA）</p> 
 <p>OSPF链路状态通告LSA5</p> 
 <p>自治系统外部LSA（Autonomous System External LSA）</p> 
 <p></p> 
 <p></p> 
 <p>末梢区域和完全末梢区域</p> 
 <p>满足以下条件的区域</p> 
 <p>只有一个默认路由作为其区域的出口</p> 
 <p>区域不能作为虚链路的穿越区域</p> 
 <p>Stub区域里无自治系统边界路由器ASBR</p> 
 <p>不是骨干区域Area 0</p> 
 <p></p> 
 <p>末梢区域</p> 
 <p>末梢区域是一个不允许AS外部LSA通告在其内部进行泛洪的区域.没有LSA4 ,5 , 7通告</p> 
 <p></p> 
 <p>完全末梢区域</p> 
 <p>完全末梢区域不仅使用默认路由到达OSPF的AS外部的目的地址,而且使用默认路由到达这个区域外部的所有目的地址. 除一条LSA3的默认路由通告外,没有LSA3, 4, 5, 7通告</p> 
 <p></p> 
 <p>相同点：</p> 
 <p>路由器的链路状态数据库被减小了,提高了路由器的性能,节省了内存</p> 
 <p></p> 
 <p>描述路由表中， 标记为O 和标记为 O IA 路由的区别。</p> 
 <p>在路由条目前的O 代表OSPF区域内的路由,而O IA 代表 OSPF区域间的路由</p> 
 <p></p> 
 <p>OSPF 在描述一条路径优劣时 使用什么参数。</p> 
 <p>Metrics(度量值)和Distance Metric(管理距离)</p> 
 <p></p> 
 <p>7、写出直连路由、静态路由、RIP 及 OSPF分别对应得管理距离</p> 
 <p>路由类型管理距离</p> 
 <p>直连路由0</p> 
 <p>静态路由1</p> 
 <p>RIP120</p> 
 <p>OSPF110</p> 
 <p></p> 
 <p>路由重分发</p> 
 <p>一个单一IP路由协议是管理网络中IP路由的首选方案</p> 
 <p>Cisco IOS能执行多个路由协议，每一个路由协议和该路由协议所服务的网络属于同一个自治系统</p> 
 <p>Cisco IOS使用路由重分发特性以交换由不同协议创建的路由信息</p> 
 <p></p> 
 <p>路由重分发的考虑</p> 
 <p>度量值</p> 
 <p>管理距离</p> 
 <p></p> 
 <p></p> 
 <p>OSPF虚链路</p> 
 <p>虚链路</p> 
 <p>指一条通过一个非骨干区域连接到骨干区域的链路</p> 
 <p></p> 
 <p></p> 
 <p>虚链路的目的</p> 
 <p>通过一个非骨干区域连接一个区域到骨干区域</p> 
 <p>通过一个非骨干区域连接一个分段的骨干区域</p> 
 <p></p> 
 <p>配置虚链路的规则及特点</p> 
 <p>虚链路必须配置在两台ABR路由器之间</p> 
 <p>传送区域不能是一个末梢区域</p> 
 <p>虚链路的稳定性取决于其经过的区域的稳定性</p> 
 <p>虚链路有助于提供逻辑冗余</p> 
 <p></p> 
 <p></p> 
 <p>NSSA、完全非纯末梢区域，各具的特点</p> 
 <p>NSSA是非纯末梢区域，作用：减少链路状态数据库的LSA条目4和5，生成7，减少CPU和内存的占用，优化路由器性能。</p> 
 <p>完全非纯末梢具备非纯末梢的特点，同时对LSA3进行了优化，只剩下一条LSA3的默认路由</p> 
 <p></p> 
 <p></p> 
 <p>LSA 7 的作用</p> 
 <p>LSA7的作用：NSSA区域内的ASBR发出的，用于通告本区域连接的外部路由。替代了类型4和5。</p> 
 <p></p> 
 <p></p> 
 <p>地址汇总的作用和汇总的种类</p> 
 <p>作用：1地址汇总通过减少泛洪的LSA数量节省资源</p> 
 <p>2可以通过屏蔽一些网络不稳定的细节来节省资源</p> 
 <p>3减少路由表中的路由条目</p> 
 <p>汇总种类：区域间路由汇总和外部路由汇总</p> 
 <p></p> 
 <p></p> 
 <p>LSA7 转 LSA5 的过程</p> 
 <p>设置成NSSA区域之前，区域内是类型4和类型5的通告。设置成NSSA区域后，使用类型7代替了类型4和类型5的通告，经过ABR转发到内部的时候变成类型5.</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9561cf2cda0cd6d3e0b6c852b17d6baf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">6443 was refused - did you specify the right host or port?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9697bee2a020908ad9927783cd6a6d58/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">眼图的形成原理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
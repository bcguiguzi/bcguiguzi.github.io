<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>virtualbox安装centos7，共享文件夹及其正确的挂载，网络与IP设置完整教程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="virtualbox安装centos7，共享文件夹及其正确的挂载，网络与IP设置完整教程" />
<meta property="og:description" content="1、迅雷下载virtualbox-6.1.6
http://download.virtualbox.org/virtualbox/6.1.6/VirtualBox-6.1.6-137129-Win.exe
2、迅雷下载centos7-64.iso 镜像
http://mirrors.aliyun.com/centos/7.7.1908/isos/x86_64/CentOS-7-x86_64-Minimal-1908.iso
3、使用virtualbox创建虚拟机
4、虚拟机设置
创建好虚拟机之后先别急着打开，先要做一些配置。
choose a disk file 选择下载的iso镜像文件
设置端口转发，用以 xshell 连接
设置共享文件夹
以上配置就差不多了。
5、启动虚拟机
双击左侧虚拟机，报错了，启动不了，点击&#34;无界面方式启动&#34;，启动成功了，然后再双击左侧的虚拟机打开虚拟机界面，界面上提示选择一个镜像文件，但是实际上虚拟机已经在安装着centos7，因为前面我们已经指定了启动镜像，此处就不需要了。
开始安装。。。
设置语言
设置 root 账号的密码 raoxiaoya
使用 rignt &#43; ctrl 退出键盘独占
虚拟机装好之后，使用root账号登录进去。
6、网络设置
ping www.baidu.com 显然网不通。编辑 /etc/sysconfig/network-scripts/ifcfg-enp0s3文件。设置 ONBOOT=yes
重启网卡 service network start
再次 ping www.baidu.com，发现已经可以了。
此时可以使用 xshell 连接虚拟机了，使用的是前面设置的端口转发。
127.0.0.1:2222 root / raoxiaoya 既然xshell已经可以连了，那么整个设置好以后只需要“无界面启动”虚拟机就可以了，免得多开一个窗口。
7、要让共享文件夹生效，必须安装增强功能
在虚拟机界面顶部菜单，设备 -&gt; 安装增强功能
所以需要手动来安装，
// 先安装必要的程序 yum update kernel -y yum install wget lrzsz bzip2 kernel-headers kernel-devel gcc make -y // 关闭防火墙 systemctl stop firewalld // 关闭防火墙 systemctl disable firewalld // 开机禁用 // 重启 reboot // 创建目录，并赋予权限，这一点很重要，且要先做。 mkdir -p /data/www chmod 777 /data chmod 777 /data/www // 上传文件 cd /media rz 找到 E:\Program Files\Oracle\VirtualBox\VBoxGuestAdditions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/ef91286e483b81a6241d8796f4d5e24b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-30T17:44:46+08:00" />
<meta property="article:modified_time" content="2022-10-30T17:44:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">virtualbox安装centos7，共享文件夹及其正确的挂载，网络与IP设置完整教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>1、迅雷下载virtualbox-6.1.6</strong><br> http://download.virtualbox.org/virtualbox/6.1.6/VirtualBox-6.1.6-137129-Win.exe</p> 
<p><strong>2、迅雷下载centos7-64.iso 镜像</strong><br> http://mirrors.aliyun.com/centos/7.7.1908/isos/x86_64/CentOS-7-x86_64-Minimal-1908.iso</p> 
<p><strong>3、使用virtualbox创建虚拟机</strong><br> <img src="https://images2.imgbox.com/73/1d/T27oWOFc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ee/66/39v9WuFj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/14/7e/XAfkb786_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d0/8b/vWhbbV7X_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b8/c6/kgdtbiFg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/29/11/N1kgKeeZ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>4、虚拟机设置</strong><br> 创建好虚拟机之后先别急着打开，先要做一些配置。<br> <img src="https://images2.imgbox.com/b7/23/5XZy2GR1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/09/8f/NtfXvER7_o.png" alt="在这里插入图片描述"><br> choose a disk file 选择下载的iso镜像文件<br> <img src="https://images2.imgbox.com/6e/f9/U0tXAlqF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2a/e3/DTJAXLRx_o.png" alt="在这里插入图片描述"><br> 设置端口转发，用以 xshell 连接<br> <img src="https://images2.imgbox.com/64/c1/K83vMHDl_o.png" alt="在这里插入图片描述"><br> 设置共享文件夹<br> <img src="https://images2.imgbox.com/d9/39/DZQilsMe_o.png" alt="在这里插入图片描述"><br> 以上配置就差不多了。</p> 
<p><strong>5、启动虚拟机</strong><br> 双击左侧虚拟机，报错了，启动不了，点击"无界面方式启动"，启动成功了，然后再双击左侧的虚拟机打开虚拟机界面，界面上提示选择一个镜像文件，但是实际上虚拟机已经在安装着centos7，因为前面我们已经指定了启动镜像，此处就不需要了。</p> 
<p>开始安装。。。</p> 
<p>设置语言<br> 设置 root 账号的密码 raoxiaoya</p> 
<p>使用 rignt + ctrl 退出键盘独占</p> 
<p>虚拟机装好之后，使用root账号登录进去。</p> 
<p><strong>6、网络设置</strong></p> 
<pre><code class="prism language-bash"><span class="token function">ping</span> www.baidu.com
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/04/WUdgxWmf_o.png" alt="在这里插入图片描述"><br> 显然网不通。编辑 <code>/etc/sysconfig/network-scripts/ifcfg-enp0s3</code>文件。设置 <code>ONBOOT=yes</code></p> 
<p>重启网卡 <code>service network start</code><br> 再次 <code>ping www.baidu.com</code>，发现已经可以了。</p> 
<p>此时可以使用 xshell 连接虚拟机了，使用的是前面设置的端口转发。</p> 
<pre><code class="prism language-bash"><span class="token number">127.0</span>.0.1:2222  root / raoxiaoya
</code></pre> 
<p>既然xshell已经可以连了，那么整个设置好以后只需要“无界面启动”虚拟机就可以了，免得多开一个窗口。</p> 
<p><strong>7、要让共享文件夹生效，必须安装增强功能</strong></p> 
<p>在虚拟机界面顶部菜单，设备 -&gt; 安装增强功能<br> <img src="https://images2.imgbox.com/6a/ed/V0gg7xNY_o.png" alt="在这里插入图片描述"><br> 所以需要手动来安装，</p> 
<pre><code class="prism language-bash">// 先安装必要的程序
yum update kernel -y
yum <span class="token function">install</span> <span class="token function">wget</span> lrzsz <span class="token function">bzip2</span> kernel-headers kernel-devel gcc <span class="token function">make</span> -y

// 关闭防火墙
systemctl stop firewalld // 关闭防火墙
systemctl disable firewalld // 开机禁用

// 重启
<span class="token function">reboot</span>

// 创建目录，并赋予权限，这一点很重要，且要先做。
<span class="token function">mkdir</span> -p /data/www
<span class="token function">chmod</span> <span class="token number">777</span> /data
<span class="token function">chmod</span> <span class="token number">777</span> /data/www

// 上传文件
<span class="token builtin class-name">cd</span> /media
rz 找到 E:<span class="token punctuation">\</span>Program Files<span class="token punctuation">\</span>Oracle<span class="token punctuation">\</span>VirtualBox<span class="token punctuation">\</span>VBoxGuestAdditions.iso文件
<span class="token function">ls</span>

// 将镜像文件映射到一个目录
<span class="token function">mkdir</span> VBoxGuestAdditionsISO
<span class="token function">mount</span> -o loop VBoxGuestAdditions.iso ./VBoxGuestAdditionsISO

// 执行安装
./VBoxGuestAdditionsISO/VBoxLinuxAdditions.run
</code></pre> 
<p><img src="https://images2.imgbox.com/44/85/p9izer05_o.png" alt="在这里插入图片描述"><br> cd /<br> ls<br> 就可以看到 data/www 目录。</p> 
<p>关于共享文件夹的<code>自动挂载</code>，有三种方式。</p> 
<p><code>不管哪种方式，确保 /data/www 的权限为 777 非常重要，否则在使用的过程中会遇到一些问题！！！</code></p> 
<p>方法1：如上图所示，在设置共享文件夹的时候，勾选自动挂载，在每次启动的时候就会被自动加载，但是<code>极度不推荐</code>，因为这种挂载方式的www目录是在 vboxsf 权限组，而且其他组没有任何权限，也无法修改目录权限，如果你需要使用nginx和php-fpm的话，将会很沮丧，怎么设置都不行，你还不一定知道原因在哪里，从而盲目的去操作权限。<br> <img src="https://images2.imgbox.com/cb/57/GL7J3Hpi_o.png" alt="在这里插入图片描述"><br> 方法2：<code>手动挂载</code>，每次启动后都需要手动操作，显得有点麻烦。<br> www目录的权限将变得可操控了，操作步骤如下：</p> 
<p>注意server为共享文件夹的名称<br> <img src="https://images2.imgbox.com/d7/50/REb9yNar_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token function">mount</span> -t vboxsf server /data/www

server 就是上图中的<span class="token variable"><span class="token variable">`</span>文件夹名称<span class="token variable">`</span></span>，注意不是路径；
www 为虚拟机上的目录的<span class="token variable"><span class="token variable">`</span>路径<span class="token variable">`</span></span>
</code></pre> 
<p>查看权限<br> <img src="https://images2.imgbox.com/26/6a/IIgkv7gf_o.png" alt="在这里插入图片描述"><br> 方法3：设置开机自动挂载（<code>推荐</code>）</p> 
<p>使系统在启动后自动执行一个命令来实现挂载。</p> 
<pre><code class="prism language-bash">在centos7中，/etc/rc.d/rc.local的权限被降低了，所以需要执行如下命令赋予其可执行权限
<span class="token function">chmod</span> +x /etc/rc.d/rc.local

<span class="token function">vi</span>  /etc/rc.d/rc.local
添加
<span class="token function">mount</span> -t vboxsf server /data/www

重启虚拟机，发现挂载成功。
</code></pre> 
<p>更新yum源为阿里云源，方便以后安装程序。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> /etc/yum.repos.d
<span class="token function">mv</span> CentOS-Base.repo CentOS-Base.repo.backup
<span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
yum clean all
yum makecache
yum <span class="token function">install</span> -y epel-release
</code></pre> 
<p><strong>8、IP设置</strong></p> 
<p>虽然网络通了，但是虚拟机还没有自己的IP，后面要安装什么服务的话，不可能总是添加端口转发，因此需要固定虚拟机的局域网IP。</p> 
<p>查看ip<br> <img src="https://images2.imgbox.com/5a/76/Zd754mrl_o.png" alt="在这里插入图片描述"><br> 需要安装 <code>sudo yum install net-tools</code><br> <img src="https://images2.imgbox.com/91/ab/JaWYaT7R_o.png" alt="在这里插入图片描述"><br> 关闭虚拟机</p> 
<p>在本机cmd执行ipconfig，可以看到本机和虚拟机的ip地址。<br> <img src="https://images2.imgbox.com/92/29/dGxshZCH_o.png" alt="在这里插入图片描述"><br> 设置网卡2<br> <img src="https://images2.imgbox.com/23/ad/f7dCQtyt_o.png" alt="在这里插入图片描述"><br> 管理 -&gt; 主机网络管理器<br> <img src="https://images2.imgbox.com/91/04/unN0c7Pn_o.png" alt="在这里插入图片描述"><br> 启动虚拟机<br> <img src="https://images2.imgbox.com/b8/26/PaOO13Q0_o.png" alt="在这里插入图片描述"><br> 校验此IP可连接 <code>192.168.56.101</code><br> 前面我们已经通过本机端口转发的方式使用xshell连上了虚拟机，现在虚拟机已经暴露了IP，那么我们应该可以通过 <code>192.168.56.101:22 root / raoxiaoya</code> 连上虚拟机的，在xshell新建一个连接，可以连接。</p> 
<p>保存一下快照，以便快速回复系统。</p> 
<p>至此，虚拟机已配置好了，我们可以将其导出作为种子，存到网盘，方便以后使用。</p> 
<p>先关闭虚拟机。<br> <img src="https://images2.imgbox.com/4e/22/jpv9vN2t_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0a/83/XsCKg6fq_o.png" alt="在这里插入图片描述"><br> 选择<code>包含所有网卡</code>，导入虚拟机的时候也要选择<code>包含所有网卡</code>。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cb6ef4040022fe4a3a6e1fc77e3c1f08/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Clickhouse与Doris的区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/19f26aec183e795206c4907f07a3e435/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">（亲自实践）解决安装weditor报错UnicodeDecodeError: ‘gbk‘ codec can‘t decode byte 0xad in position 825</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
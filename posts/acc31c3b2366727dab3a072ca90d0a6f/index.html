<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>《Python数据分析基础教程：NumPy学习指南（第2版）》笔记17：第七章 专用函数3——窗函数 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="《Python数据分析基础教程：NumPy学习指南（第2版）》笔记17：第七章 专用函数3——窗函数" />
<meta property="og:description" content="当前Numpy版本为：1.20
第七章 专用函数 7.23 窗函数 窗函数（window function）是信号处理领域常用的数学函数，相关应用包括谱分析和滤波器设计等。这些窗函数除在给定区间之外取值均为0。NumPy中有很多窗函数，如bartlett、blackman、hamming、 hanning和kaiser。关于hanning函数的例子可以在第4章和第3章中找到。
7.24 动手实践：绘制巴特利特窗 巴特利特窗（Bartlett window）是一种三角形平滑窗。按如下步骤绘制巴特利特窗。
(1) 调用NumPy中的bartlett函数，以计算巴特利特窗。
import numpy as np window = np.bartlett(42) (2) 使用Matplotlib绘制巴特利特窗，非常简单。
from matplotlib.pyplot import plot, show plot(window) show() 绘制结果如下图所示，形状确实为三角形。
7.25 布莱克曼窗 布莱克曼窗（Blackman window）形式上为三项余弦值的加和，如下所示：
NumPy中的blackman函数返回布莱克曼窗。该函数唯一的参数为输出点的数量。如果数量为0或小于0，则返回一个空数组。
7.26 动手实践：使用布莱克曼窗平滑股价数据 我们对AAPL股价的小数据文件中的收盘价数据进行平滑处理。完成如下步骤。
(1) 将数据载入NumPy数组。调用blackman函数生成一个平滑窗并用它来平滑股价数据。
import numpy as np from matplotlib.pyplot import plot, show, legend from matplotlib.dates import datestr2num import sys closes=np.loadtxt(&#39;AAPL.csv&#39;, delimiter=&#39;,&#39;, usecols=(6,), converters={1:datestr2num}, unpack=True) N = 5 window = np.blackman(N) smoothed = np." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/acc31c3b2366727dab3a072ca90d0a6f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-27T17:02:02+08:00" />
<meta property="article:modified_time" content="2021-07-27T17:02:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">《Python数据分析基础教程：NumPy学习指南（第2版）》笔记17：第七章 专用函数3——窗函数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-kimbie-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>当前Numpy版本为：1.20</p> 
<h2><a id="__2"></a>第七章 专用函数</h2> 
<h3><a id="723__4"></a>7.23 窗函数</h3> 
<p>窗函数（window function）是信号处理领域常用的数学函数，相关应用包括谱分析和滤波器设计等。这些窗函数除在给定区间之外取值均为<code>0</code>。<code>NumPy</code>中有很多窗函数，如<code>bartlett</code>、<code>blackman</code>、<code>hamming</code>、 <code>hanning</code>和<code>kaiser</code>。关于<code>hanning</code>函数的例子可以在第4章和第3章中找到。</p> 
<h3><a id="724__6"></a>7.24 动手实践：绘制巴特利特窗</h3> 
<p>巴特利特窗（Bartlett window）是一种<strong>三角形平滑窗</strong>。按如下步骤绘制巴特利特窗。</p> 
<ul><li> <p>(1) 调用<code>NumPy</code>中的<code>bartlett</code>函数，以计算巴特利特窗。</p> <pre><code>import numpy as np
window = np.bartlett(42)
</code></pre> </li><li> <p>(2) 使用Matplotlib绘制巴特利特窗，非常简单。</p> <pre><code>from matplotlib.pyplot import plot, show
plot(window)
show()
</code></pre> </li></ul> 
<p>绘制结果如下图所示，形状确实为三角形。<br> <img src="https://images2.imgbox.com/bc/fa/pMWlJKkY_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="725__27"></a>7.25 布莱克曼窗</h3> 
<p>布莱克曼窗（Blackman window）形式上为<strong>三项余弦值的加和</strong>，如下所示：<br> <img src="https://images2.imgbox.com/0a/ed/WN5UEodh_o.png" alt="在这里插入图片描述"><br> <code>NumPy</code>中的<code>blackman</code>函数返回布莱克曼窗。该函数唯一的参数为<strong>输出点的数量</strong>。如果数量为0或小于0，则返回一个空数组。</p> 
<h3><a id="726__31"></a>7.26 动手实践：使用布莱克曼窗平滑股价数据</h3> 
<p>我们对AAPL股价的小数据文件中的收盘价数据进行平滑处理。完成如下步骤。</p> 
<ul><li> <p>(1) 将数据载入NumPy数组。调用<code>blackman</code>函数生成一个平滑窗并用它来平滑股价数据。</p> <pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">import</span> plot<span class="token punctuation">,</span> show<span class="token punctuation">,</span> legend
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>dates <span class="token keyword">import</span> datestr2num
<span class="token keyword">import</span> sys
closes<span class="token operator">=</span>np<span class="token punctuation">.</span>loadtxt<span class="token punctuation">(</span><span class="token string">'AAPL.csv'</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">,</span> usecols<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
converters<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">:</span>datestr2num<span class="token punctuation">}</span><span class="token punctuation">,</span> unpack<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
N <span class="token operator">=</span> <span class="token number">5</span>
window <span class="token operator">=</span> np<span class="token punctuation">.</span>blackman<span class="token punctuation">(</span>N<span class="token punctuation">)</span>
smoothed <span class="token operator">=</span> np<span class="token punctuation">.</span>convolve<span class="token punctuation">(</span>window<span class="token operator">/</span>window<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> closes<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'same'</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>(2) 使用Matplotlib绘制平滑后的股价图。在这个例子中，<strong>我们将省略最前面5个和最后面5个数据点</strong>。这是由于存在很强的边界效应。</p> <pre><code class="prism language-python">plot<span class="token punctuation">(</span>smoothed<span class="token punctuation">[</span>N<span class="token punctuation">:</span><span class="token operator">-</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> lw<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"smoothed"</span><span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>closes<span class="token punctuation">[</span>N<span class="token punctuation">:</span><span class="token operator">-</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"closes"</span><span class="token punctuation">)</span>
legend<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token string">'best'</span><span class="token punctuation">)</span>
show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li></ul> 
<p>经过布莱克曼窗平滑后的AAPL收盘价数据如下所示。</p> 
<p><img src="https://images2.imgbox.com/34/c1/YEdOh8oB_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="727__61"></a>7.27 汉明窗</h3> 
<p>汉明窗（Hamming window）形式上是一个加权的余弦函数。公式如下所示。<br> <img src="https://images2.imgbox.com/f8/77/umh8NeRx_o.png" alt="在这里插入图片描述"></p> 
<p>NumPy中的hamming函数返回汉明窗。该函数唯一的参数为输出点的数量。如果数量为0或小于0，则返回一个空数组。</p> 
<h3><a id="728__66"></a>7.28 动手实践：绘制汉明窗</h3> 
<p>我们来绘制汉明窗。完成如下步骤。</p> 
<ul><li> <p>(1) 调用<code>hamming</code>函数，以计算汉明窗：</p> <pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">import</span> plot<span class="token punctuation">,</span> show

window <span class="token operator">=</span> np<span class="token punctuation">.</span>hamming<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>(2) 使用Matplotlib绘制汉明窗：</p> <pre><code class="prism language-python">plot<span class="token punctuation">(</span>window<span class="token punctuation">)</span>
show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <p>绘制结果如下图所示。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/82/19/HIR0to5U_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="729__89"></a>7.29 凯泽窗</h3> 
<p>凯泽窗（Kaiser window）是以贝塞尔函数（Bessel function）定义的，公式如下所示。<br> <img src="https://images2.imgbox.com/33/eb/F70Dy1Xl_o.png" alt="在这里插入图片描述"></p> 
<p>这里的<em>I</em><sub>0</sub>即为零阶的贝塞尔函数。 <code>NumPy</code>中的<code>kaiser</code>函数返回凯泽窗。该函数的第一个参数为<strong>输出点的数量</strong>。如果数量为0或小于0，则返回一个空数组。第二个参数为<code>β</code>值。</p> 
<h3><a id="730__94"></a>7.30 动手实践：绘制凯泽窗</h3> 
<p>我们来绘制凯泽窗。完成如下步骤。</p> 
<ul><li> <p>(1) 调用<code>kaiser</code>函数，以计算凯泽窗：</p> <pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">import</span> plot<span class="token punctuation">,</span> show

window <span class="token operator">=</span> np<span class="token punctuation">.</span>kaiser<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>(2) 使用Matplotlib绘制凯泽窗：</p> <pre><code class="prism language-python">plot<span class="token punctuation">(</span>window<span class="token punctuation">)</span>
show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li></ul> 
<p>绘制结果如下图所示。<br> <img src="https://images2.imgbox.com/c3/8e/uTX8B13A_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="731__113"></a>7.31 专用数学函数</h3> 
<p>贝塞尔函数（Bessel function）是贝塞尔微分方程的标准解函数（详见https://baike.baidu.com/item/贝塞尔函数）。在<code>NumPy</code>中，<strong>以<code>i0</code>表示第一类修正的零阶贝塞尔函数。</strong></p> 
<h3><a id="732__115"></a>7.32 动手实践：绘制修正的贝塞尔函数</h3> 
<p>我们来看看第一类修正的零阶贝塞尔函数绘制出来是什么形状。</p> 
<ul><li> <p>(1) 使用<code>NumPy</code>的<code>linspace</code>函数生成一组均匀分布的数值。</p> <pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">import</span> plot<span class="token punctuation">,</span> show
x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>(2) 调用<code>i0</code>函数进行计算：</p> <pre><code class="prism language-python">vals <span class="token operator">=</span> np<span class="token punctuation">.</span>i0<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> </li><li> <p>(3) 使用Matplotlib绘制修正的贝塞尔函数：</p> <pre><code class="prism language-python">plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> vals<span class="token punctuation">)</span>
show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li></ul> 
<p>绘制结果如下图所示。<br> <img src="https://images2.imgbox.com/d8/82/GJeb338w_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="733_sinc__143"></a>7.33 sinc 函数</h3> 
<p><code>sinc</code>函数在数学和信号处理领域被广泛应用。 <strong><code>NumPy</code>中有同名函数<code>sinc</code>，并且也存在一个二维版本<code>sinc2d</code></strong>。 <code>sinc</code>是一个三角函数，更多详细内容请访问https://baike.baidu.com/item/sinc函数。</p> 
<h3><a id="734__sinc__145"></a>7.34 动手实践：绘制 sinc 函数</h3> 
<p>我们将绘制<code>sinc</code>函数。完成如下步骤。</p> 
<ul><li> <p>(1) 使用NumPy的<code>linspace</code>函数生成一组均匀分布的数值。</p> <pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">import</span> plot<span class="token punctuation">,</span> show
x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>(2) 调用<code>sinc</code>函数进行计算：</p> <pre><code class="prism language-python">vals <span class="token operator">=</span> np<span class="token punctuation">.</span>sinc<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre> </li><li> <p>(3) 使用Matplotlib绘制<code>sinc</code>函数：</p> <pre><code class="prism language-python">plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> vals<span class="token punctuation">)</span>
show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </li></ul> 
<p>绘制结果如下图所示。<br> <img src="https://images2.imgbox.com/f6/f0/5Us4052C_o.png" alt="在这里插入图片描述"></p> 
<p><code>sinc2d</code>函数需要输入一个二维数组。我们可以用<code>outer</code>函数生成二维数组，便得到下图。<br> <img src="https://images2.imgbox.com/87/1b/OZZjdyhI_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">import</span> imshow<span class="token punctuation">,</span> show

x <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
xx <span class="token operator">=</span> np<span class="token punctuation">.</span>outer<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
vals <span class="token operator">=</span> np<span class="token punctuation">.</span>sinc<span class="token punctuation">(</span>xx<span class="token punctuation">)</span>

imshow<span class="token punctuation">(</span>vals<span class="token punctuation">)</span>
show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/128a135e13da76d1523403a89ae2827c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">零基础到底适不适合转行前端？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6dc1599b07f097c24fccfeaf0cb26301/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">标准型计算机窗口截图快捷键,Windows系统打开计算器的快捷键 计算器快捷键大全...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
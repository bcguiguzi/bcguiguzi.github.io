<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>常用的pytest的assert断言操作(个人笔记) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="常用的pytest的assert断言操作(个人笔记)" />
<meta property="og:description" content="pytest 提供了一系列常用的断言函数，用于在测试中进行各种断言操作。以下是一些常用的 pytest 断言操作的示例：
相等性断言：
assert result == expected 不相等性断言：
assert result != unexpected 包含性断言：
assert item in collection 不包含性断言：
assert item not in collection 真值断言：
assert condition 假值断言：
assert not condition 异常断言：
with pytest.raises(ExpectedException): # 执行可能引发异常的代码 比较断言：
assert x &gt; y assert x &lt; y assert x &gt;= y assert x &lt;= y 类型断言：
assert isinstance(obj, expected_type) 属性断言：
assert hasattr(obj, &#39;attribute&#39;) assert not hasattr(obj, &#39;attribute&#39;) 这些是一些常见的 pytest 断言操作，您可以根据具体的测试需求选择适当的断言函数进行使用。断言操作可以帮助您验证测试的预期结果，确保代码的正确性和可靠性。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/30eb97bd3541a4d3b0852a7e485c1b0a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-23T09:48:45+08:00" />
<meta property="article:modified_time" content="2023-08-23T09:48:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">常用的pytest的assert断言操作(个人笔记)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>pytest 提供了一系列常用的断言函数，用于在测试中进行各种断言操作。以下是一些常用的 pytest 断言操作的示例：</p> 
<ol><li> <p>相等性断言：</p> <pre><code class="language-python">assert result == expected
</code></pre> </li><li> <p>不相等性断言：</p> <pre><code class="language-python">assert result != unexpected
</code></pre> </li><li> <p>包含性断言：</p> <pre><code class="language-python">assert item in collection
</code></pre> </li><li> <p>不包含性断言：</p> <pre><code class="language-python">assert item not in collection
</code></pre> </li><li> <p>真值断言：</p> <pre><code class="language-python">assert condition
</code></pre> </li><li> <p>假值断言：</p> <pre><code class="language-python">assert not condition
</code></pre> </li><li> <p>异常断言：</p> <pre><code class="language-python">with pytest.raises(ExpectedException):
    # 执行可能引发异常的代码
</code></pre> </li><li> <p>比较断言：</p> <pre><code class="language-python">assert x &gt; y
assert x &lt; y
assert x &gt;= y
assert x &lt;= y
</code></pre> </li><li> <p>类型断言：</p> <pre><code class="language-python">assert isinstance(obj, expected_type)
</code></pre> </li><li> <p>属性断言：</p> <pre><code class="language-python">assert hasattr(obj, 'attribute')
assert not hasattr(obj, 'attribute')
</code></pre> </li></ol> 
<p>这些是一些常见的 pytest 断言操作，您可以根据具体的测试需求选择适当的断言函数进行使用。断言操作可以帮助您验证测试的预期结果，确保代码的正确性和可靠性。</p> 
<p></p> 
<p>除了上面提到的常用断言操作外，还有一些其他功能和技巧可以在 pytest 中使用：</p> 
<ol><li> <p>自定义断言函数：您可以编写自己的自定义断言函数，以便在测试中重复使用。这样可以提高测试代码的可重用性和可维护性。</p> <pre><code class="language-python">def assert_custom(condition, message=None):
    assert condition, message or '自定义断言失败'

def test_custom_assert():
    assert_custom(2 + 2 == 4)
</code></pre> </li><li> <p>断言消息：在断言语句中添加可选的消息参数，以便在断言失败时提供更详细的错误信息。</p> <pre><code class="language-python">assert result == expected, '结果与预期不符'
</code></pre> </li><li> <p>多重断言：使用 pytest 提供的 <code>pytest.assume()</code> 函数可以在一个测试用例中进行多个断言，即使前面的断言失败，也会继续执行后面的断言。</p> <pre><code class="language-python">def test_multiple_assertions():
    pytest.assume(2 + 2 == 4)
    pytest.assume(3 * 3 == 9)
    pytest.assume('hello'.startswith('h'))
</code></pre> </li><li> <p>参数化测试断言：结合 pytest 的参数化功能，可以在单个测试函数中执行多组输入和预期输出的断言。</p> <pre><code class="language-python">import pytest

@pytest.mark.parametrize('input, expected', [
    (2 + 2, 4),
    (3 * 3, 9),
    ('hello', 'hello')
])
def test_parameterized_assertions(input, expected):
    assert input == expected
</code></pre> </li></ol> 
<p>这些技巧和功能可以帮助您更灵活和高效地编写测试用例，并提供更丰富的断言操作和错误信息。根据具体的测试需求，您可以选择适当的断言方式和技巧来优化您的测试代码。</p> 
<p>还有一些其他的 pytest 断言功能和技巧可以提升您的测试效率和代码质量：</p> 
<ol><li> <p>近似断言：使用 <code>pytest.approx()</code> 函数进行浮点数的近似比较。</p> <pre><code class="language-python">def test_float_approx():
    assert pytest.approx(0.1 + 0.2) == 0.3
</code></pre> </li><li> <p>自定义断言消息：在断言失败时，通过使用 <code>--tb=short</code> 参数可以只显示简短的错误信息，使得失败报告更加简洁。</p> <pre><code class="language-python">pytest --tb=short
</code></pre> </li><li> <p>断言失败时截图：使用插件如 <code>pytest-selenium</code> 可以在断言失败时自动截图，方便查看测试环境和失败的页面状态。</p> <pre><code class="language-python">pytest --html=report.html --self-contained-html
</code></pre> </li></ol> 
<p>这些是一些额外的 pytest 断言功能和技巧，可以根据您的具体需求选择合适的断言操作和工具来提升测试的质量和可维护性。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2264b26a595cb5fb30d03fef24b9a4fa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端与后端交互中需要注意的要点和解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ee7eacb7b80b9d237343a307e990a583/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ubuntu18.04安装之后没有网络，不显示网络图标</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
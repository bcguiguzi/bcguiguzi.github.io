<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>推荐一家GPU平台部署Stable Diffusion - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="推荐一家GPU平台部署Stable Diffusion" />
<meta property="og:description" content="最近一年，扩散模型太火了，已经成为重要的生产力工具，在AI研究领域也不断有新的工作出现，成为产业界和学术界的热点。
本文将在趋动云平台部署扩散模型中广受关注的stable-diffusion-webui项目，手把手教程！
有需要算力跑模型的小伙伴，可以在趋动云领取一下168元算力金
创建项目 首先创建项目SD-webui-部署（名称可自拟），选择合适的镜像Pytorch2.0_miniconda3（由趋动云用户superx创建，感谢分享！）和数据集stable-diffusion-webui（由趋动云用户梦落创建，感谢分享！）。在相应的位置根据关键词搜索即可。
选择镜像
选择数据集
创建项目
请注意，创建项目时选择不上传代码，代码和资源已经在数据集中了。
初始化开发环境 创建好项目后，进入到运行代码，需要进行资源配置。
运行代码
算力君选择的是P1.small机型（价格便宜而且已经够用了），同时我们要开放一个端口，算力君这里填了9527，最长运行时间可根据个人所需选择（按照本文教程，整个过程应该在10分钟内），点击确定，如下图所示。
选择计算资源及开放端口
选择好之后点击确定后系统即开始分配资源，等待不到一分钟的时间，硬件配置、系统环境、数据资源即可配置完成。
资源分配
出现如上截图即代表配置完成，此时点击进入开发环境，即可进入一台完全准备好的机器进行开发了。
进入开发环境 点击进入开发环境后，我们可以在Jupyterlab进行数据和文件的查看、代码的编辑，也可以通过网页终端执行命令行操作。
开发环境
本文的 Stable Diffusion 部署后续过程，可以完全在网页终端进行操作完成。
第一步，切换成趋动云apt和pip源。
在网页终端输入
cp /etc/apt/sources.list /etc/apt/sources.listBak &amp;&amp; \ sed -i &#34;s#http://archive.ubuntu.com/ubuntu/#https://mirrors.virtaicloud.com/repository/ubuntu/#g&#34; /etc/apt/sources.list &amp;&amp; \ sed -i &#34;s#http://security.ubuntu.com/ubuntu/#https://mirrors.virtaicloud.com/repository/security/#g&#34; /etc/apt/sources.list &amp;&amp; \ apt update pip config set global.index-url https://pypi.virtaicloud.com/repository/pypi/simple 这一步可以加速python包和apt软件工具的安装，推荐每一个趋动云项目开始均换源。
第二步，准备模型数据和需要安装的软件。
解压数据：
unzip /gemini/data-1/stable-diffusion-webui.zip -d /gemini/code 拷贝要安装的软件：
cp /gemini/data-1/install /gemini/code/ -r 拷贝stable diffusion模型文件：
cp /gemini/data-1/models /gemini/code/stable-diffusion-webui/ -r 第三步，安装软件并发起SD-webui项目。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6315b6857fcc6c017149fd5852039314/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-08T14:41:51+08:00" />
<meta property="article:modified_time" content="2023-11-08T14:41:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">推荐一家GPU平台部署Stable Diffusion</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近一年，扩散模型太火了，已经成为重要的生产力工具，在AI研究领域也不断有新的工作出现，成为产业界和学术界的热点。</p> 
<p>本文将在趋动云平台部署扩散模型中广受关注的stable-diffusion-webui项目，手把手教程！</p> 
<p>有需要算力跑模型的小伙伴，可以在趋动云领取一下168元算力金</p> 
<h3><strong>创建项目</strong></h3> 
<p>首先创建项目<code>SD-webui-部署</code>（名称可自拟），选择合适的镜像<code>Pytorch2.0_miniconda3</code>（由趋动云用户superx创建，感谢分享！）和数据集<code>stable-diffusion-webui</code>（由趋动云用户梦落创建，感谢分享！）。在相应的位置根据关键词搜索即可。</p> 
<p></p> 
<p class="img-center"><img alt="" height="323" src="https://images2.imgbox.com/23/04/dfaJDNxC_o.png" width="870"></p> 
<p>选择镜像</p> 
<p></p> 
<p class="img-center"><img alt="" height="395" src="https://images2.imgbox.com/4b/66/lHa7K6no_o.png" width="724"></p> 
<p>选择数据集</p> 
<p></p> 
<p class="img-center"><img alt="" height="690" src="https://images2.imgbox.com/89/59/oRDmhUOx_o.png" width="679"></p> 
<p>创建项目</p> 
<p>请注意，创建项目时选择不上传代码，代码和资源已经在数据集中了。</p> 
<h3><strong>初始化开发环境</strong></h3> 
<p>创建好项目后，进入到<code>运行代码</code>，需要进行资源配置。</p> 
<p></p> 
<p class="img-center"><img alt="" height="340" src="https://images2.imgbox.com/e8/1b/zs8zs0iq_o.png" width="1080"></p> 
<p>运行代码</p> 
<p>算力君选择的是<code>P1.small</code>机型（价格便宜而且已经够用了），同时我们要开放一个端口，算力君这里填了<code>9527</code>，最长运行时间可根据个人所需选择（按照本文教程，整个过程应该在10分钟内），点击确定，如下图所示。</p> 
<p></p> 
<p class="img-center"><img alt="" height="591" src="https://images2.imgbox.com/dc/e8/Ho0ttuHg_o.png" width="1080"></p> 
<p>选择计算资源及开放端口</p> 
<p>选择好之后点击确定后系统即开始分配资源，等待不到一分钟的时间，硬件配置、系统环境、数据资源即可配置完成。</p> 
<p></p> 
<p class="img-center"><img alt="" height="383" src="https://images2.imgbox.com/f7/da/RbIPlrzQ_o.png" width="1080"></p> 
<p>资源分配</p> 
<p>出现如上截图即代表配置完成，此时点击<code>进入开发环境</code>，即可进入一台完全准备好的机器进行开发了。</p> 
<h3><strong>进入开发环境</strong></h3> 
<p>点击<code>进入开发环境</code>后，我们可以在<code>Jupyterlab</code>进行数据和文件的查看、代码的编辑，也可以通过<code>网页终端</code>执行命令行操作。</p> 
<p></p> 
<p class="img-center"><img alt="" height="454" src="https://images2.imgbox.com/79/62/YoD0iJWD_o.png" width="1080"></p> 
<p>开发环境</p> 
<p>本文的 Stable Diffusion 部署后续过程，可以完全在网页终端进行操作完成。</p> 
<p>第一步，切换成趋动云apt和pip源。</p> 
<p>在<code>网页终端</code>输入</p> 
<pre><code>cp /etc/apt/sources.list /etc/apt/sources.listBak &amp;&amp; \
sed -i "s#http://archive.ubuntu.com/ubuntu/#https://mirrors.virtaicloud.com/repository/ubuntu/#g" /etc/apt/sources.list &amp;&amp; \
sed -i "s#http://security.ubuntu.com/ubuntu/#https://mirrors.virtaicloud.com/repository/security/#g" /etc/apt/sources.list &amp;&amp; \
apt update

pip config set global.index-url https://pypi.virtaicloud.com/repository/pypi/simple
</code></pre> 
<p>这一步可以加速python包和apt软件工具的安装，推荐每一个趋动云项目开始均换源。</p> 
<p>第二步，准备模型数据和需要安装的软件。</p> 
<p>解压数据：</p> 
<pre><code>unzip /gemini/data-1/stable-diffusion-webui.zip -d /gemini/code
</code></pre> 
<p>拷贝要安装的软件：</p> 
<pre><code>cp /gemini/data-1/install /gemini/code/ -r
</code></pre> 
<p>拷贝stable diffusion模型文件：</p> 
<pre><code>cp /gemini/data-1/models /gemini/code/stable-diffusion-webui/ -r
</code></pre> 
<p>第三步，安装软件并发起SD-webui项目。</p> 
<p>安装软件：</p> 
<pre><code>bash /gemini/data-1/install.sh
</code></pre> 
<p>配置环境：</p> 
<pre><code>bash
conda activate sd-webui
</code></pre> 
<p>发起SD-webui项目：</p> 
<pre><code>cd /gemini/code/stable-diffusion-webui
bash start.sh
</code></pre> 
<p>模型加载和SD项目运行需要一段时间，当出现公网链接，即代表运行成功：</p> 
<p></p> 
<p class="img-center"><img alt="" height="541" src="https://images2.imgbox.com/ad/88/KaCIOlb4_o.png" width="1080"></p> 
<p>运行成功</p> 
<p>此时可以将上述公网链接拷贝到本地浏览器打开。这个公网链接有72小时的有效期。</p> 
<p>请注意，访问上述公网地址，需要登录，登录的用户名和密码分别是mengluo和111111，是由数据集创建者<code>梦落</code>设置的，如果想要改动，可以在/gemini/code/stable-diffusion-webui/start.sh文件里修改。</p> 
<p></p> 
<p class="img-center"><img alt="" height="480" src="https://images2.imgbox.com/49/54/k3ea9uzA_o.png" width="1080"></p> 
<p>修改webui项目用户名和密码</p> 
<p>有需要算力跑模型的小伙伴，可以领取一下</p> 
<h3><strong>Stable Diffusion 小试牛刀！</strong></h3> 
<p>登录后，进入SD-webui项目，如下所示：</p> 
<p></p> 
<p class="img-center"><img alt="" height="430" src="https://images2.imgbox.com/cd/30/hmP49sBg_o.png" width="1080"></p> 
<p>可以在左上角两个输入框分别输入正向提示词和反向提示词，右下角为生成的结果。</p> 
<p>算力君先使用简单的语句进行测试。</p> 
<p>仅使用正向提示词：</p> 
<pre><code>two black ducks
</code></pre> 
<p>得到结果：</p> 
<p></p> 
<p class="img-center"><img alt="" height="512" src="https://images2.imgbox.com/81/2f/aKwoSd2i_o.png" width="512"></p> 
<p>数量和颜色都对。</p> 
<p>仅使用正向提示词：</p> 
<pre><code>Three guards, armed with spears
</code></pre> 
<p>得到结果：</p> 
<p></p> 
<p class="img-center"><img alt="" height="512" src="https://images2.imgbox.com/4e/96/Arhw9zmK_o.png" width="512"></p> 
<p>数量、场景、人物都对，感觉用它画画太简单了！</p> 
<p>算力君在网上找了一些复杂提示词测试了一下。</p> 
<p>正向提示词：</p> 
<pre><code>space girl， standing alone on hill， centered， detailed gorgeous face， anime style， key visual， intricate detail， highly detailed， breathtaking， vibrant， panoramic， cinematic， Carne Griffiths， Conrad Roset， ghibli
</code></pre> 
<p>反向提示词：</p> 
<pre><code>easynegative,,badhandv4,nfixer, nartfixer, nrealfixer, (jewelry),(big breasts, large breasts), CGI, 3d, doll, octane, render, cartoon, anime, illustration, drawing, digital art, digital painting, sketch, lowres, text, cropped, worst quality, low quality, jpeg artifacts, ugly, duplicate, poorly drawn hands, poorly drawn face, deformed, blurry, logo, big hands, ugly mouth, ugly eyes, missing teeth, crooked teeth, close up, out of frame, morbid, mutilated, extra fingers, mutation, dehydration, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck, (more than two arms per body:1.5),(more than two legs per body:1.5),(more than five fingers on one hand:1.5)
</code></pre> 
<p>得到结果：</p> 
<p></p> 
<p class="img-center"><img alt="" height="480" src="https://images2.imgbox.com/6b/5b/ljXaUcnC_o.png" width="1080"></p> 
<p>效果的确很惊艳！细节也非常美！</p> 
<p>有需要算力跑模型的小伙伴，可以领取一下</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00e9e237a41754e9ed6c7dca0809459a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">进销存管理系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3c785e3db0fb76c729d6350351703c15/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">〔002〕虚幻 UE5 发送 get、post 请求、读取 json 文件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
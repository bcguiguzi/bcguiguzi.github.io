<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算机基础---＞数据结构（8）【B树、B&#43;树＜超详细图文＞】 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="计算机基础---＞数据结构（8）【B树、B&#43;树＜超详细图文＞】" />
<meta property="og:description" content="文章目录 B树(B-Tree)B树的查询操作B树的几种插入删除情况 B&#43;树B&#43;树的主要特点插入操作删除操作 B树(B-Tree) B树（B-Tree）是一种自平衡的搜索树，又称平衡多路查找树，主要用于系统中大量数据的读和写操作。B树的特点是能保持数据有序，这使得在B树中进行查找、顺序访问、插入和删除等操作都非常高效。
B树中单一节点拥有的最多子结点的数量称为B树的阶，一个m阶B树的主要特点如下：
所有叶子节点都在同一层每个节点中的元素都按照升序排列，每个元素的左子树中的所有关键字都小于它，右子树中所有元素都大于它若根节点不是叶子节点，则至少有两颗子树（2&lt;=子树个数&lt;=m）除根结点和叶子节点外，节点至少有ceil(m/2)棵子树有k个孩子的非叶子节点包含k-1个元素（ceil(m/2)&lt;=k&lt;=m，当m=3时，2&lt;=k&lt;=3） 在B树中，插入和删除操作可能涉及节点的分裂和合并，以保持树的平衡性。当插入数据时，如果节点已满，会触发节点的分裂操作；当删除数据时，如果节点过于空闲，会触发节点的合并操作。
B树的查询操作 上图是一个三阶的B树，如果我们要查找元素5，需要进行如下步骤
与根节点元素9进行比较，5&lt;9进入左子树与左子树元素2和6进行比较，发现2&lt;5&lt;6，进入中间子树与中间子树3和5进行比较，找到5 B树的几种插入删除情况 如果插入10，没有打破规则，直接插入 如果插入4，这时候可以看到叶子节点元素过多，超过了m-1，因此需要对节点进行分裂将ceil(m/2)位置的元素上升到父结点此时父结点的元素个数同样不满足B树规则，因此继续对父结点进行分裂 删除元素13，没有改变规则 删除元素8，剩余元素不足，相邻的兄弟节点没有多余元素，这时候就需要与相邻兄弟节点进行合并操作首先移动父结点中的元素【该元素在两个需要合并的两个结点元素之间】下移到其子结点中，然后将这两个结点进行合并成一个结点删除元素11，剩余元素不足，相邻兄弟节点有多余元素删除后，父节点（9，12）就少一个子节点。此时可以向兄弟节点“借”一个元素。但6不可以直接放在元素11的位置，需要上升到到父节点中，再把元素6和12之间的元素9移动到元素11的位置 删除2 删除元素6使用9替代6，删除9之后相邻兄弟没有多余元素，需要从父结点去借一个元素，然后进行合并 B&#43;树 是B树的一种变体，主要用于数据库和文件系统，
B&#43;树的主要特点 有k个子树的中间节点包含k个元素（B树是k-1），每个元素不保存数据，数据都保存在叶子节点。所有的叶子节点包含了全部元素，依照元素的大小升序排列，叶子节点之间用双向指针链接所有中间节点的元素都同时存在于子结点，在子结点元素中是最大或最小元素B&#43;树叶子节点中元素个数为（ceil(m/2)~m），添加第一个节点除外 在上图的B&#43;树中，根节点元素8在子节点（2，5，8）中是最大元素，也是叶子节点（6，8）的最大元素；根节点元素15在子节点（11，15）中是最大元素，在叶子结点（13，15）中也是最大元素。
B&#43;树的好处
方便进行范围查询，比如我要查询3~11区间的元素
首先自顶向下，查找区间的最小值3所在的叶子结点通过链表指针，遍历到相邻叶子节点(6,8)继续通过链表指针，遍历到相邻叶子结点（9，11） 插入操作 情况1. 若被插入元素所在的结点，其含有元素数目小于阶数 m，则直接插入
情况2. 若被插入关键字所在的结点，其含有关键字数目等于阶数 m，则需要将该结点分裂为两个结点，一个结点包含 ⌈m/2⌉ 。同时，将⌈m/2⌉的关键字上移至其双亲结点。假设其双亲结点中包含的关键字个数小于 m，则插入操作完成
情况3. 若插入的关键字比当前结点中的最大值还大，破坏了B&#43;树中从根结点到当前结点的所有索引值，此时需要及时修正后，再做其他操作。
情况4. 在第 2 情况中，如果上移操作导致其双亲结点中关键字个数大于 m，则应继续分裂其双亲结点。插入元素20
删除操作 情况1：找到存储有该关键字所在的结点时，由于该结点中关键字个数大于⌈M/2⌉，做删除操作不会破坏 B&#43;树，则可以直接删除。
情况2： 当删除该关键字时，导致当前结点中关键字个数小于 ⌈M/2⌉，若其兄弟结点中含有多余的关键字，可以从兄弟结点中借关键字完成删除操作。
情况3： 情况2中，如果其兄弟结点没有多余的关键字，则需要同其兄弟结点进行合并。
情况4： 当删除某结点中最大的关键字时，就会涉及到更改其双亲结点一直到根结点中所有索引值的更改。
情况5： 当进行合并时，可能会产生因合并使其双亲结点破坏 B&#43;树的结构，需要依照以上规律处理其双亲结点。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/a30554fc796e37038bbeab3ab9b363ab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-07T17:18:04+08:00" />
<meta property="article:modified_time" content="2023-07-07T17:18:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机基础---＞数据结构（8）【B树、B&#43;树＜超详细图文＞】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#BBTree_1" rel="nofollow">B树(B-Tree)</a></li><li><ul><li><a href="#B_17" rel="nofollow">B树的查询操作</a></li><li><a href="#B_28" rel="nofollow">B树的几种插入删除情况</a></li></ul> 
  </li><li><a href="#B_88" rel="nofollow">B+树</a></li><li><ul><li><a href="#B_92" rel="nofollow">B+树的主要特点</a></li><li><a href="#_118" rel="nofollow">插入操作</a></li><li><a href="#_146" rel="nofollow">删除操作</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="BBTree_1"></a>B树(B-Tree)</h2> 
<blockquote> 
 <p>B树（B-Tree）是一种自平衡的搜索树，又称平衡多路查找树，主要用于系统中大量数据的读和写操作。B树的特点是能保持数据有序，这使得在B树中进行查找、顺序访问、插入和删除等操作都非常高效。</p> 
</blockquote> 
<blockquote> 
 <p><strong>B树中单一节点拥有的最多子结点的数量称为B树的阶，一个m阶B树的主要特点如下：</strong></p> 
 <ol><li>所有叶子节点都在同一层</li><li>每个节点中的元素都按照升序排列，每个元素的左子树中的所有关键字都小于它，右子树中所有元素都大于它</li><li>若根节点不是叶子节点，则至少有两颗子树（2&lt;=子树个数&lt;=m）</li><li>除根结点和叶子节点外，节点至少有<code>ceil(m/2)</code>棵子树</li><li>有k个孩子的非叶子节点包含k-1个元素（ceil(m/2)&lt;=k&lt;=m，当m=3时，2&lt;=k&lt;=3）</li></ol> 
 <p><strong>在B树中，插入和删除操作可能涉及节点的分裂和合并，以保持树的平衡性。当插入数据时，如果节点已满，会触发节点的分裂操作；当删除数据时，如果节点过于空闲，会触发节点的合并操作。</strong></p> 
</blockquote> 
<h3><a id="B_17"></a>B树的查询操作</h3> 
<p><img src="https://images2.imgbox.com/cf/14/d30xhn5T_o.png" alt="在这里插入图片描述"></p> 
<p>上图是一个三阶的B树，如果我们要查找元素5，需要进行如下步骤</p> 
<ol><li>与根节点元素9进行比较，5&lt;9进入左子树</li><li>与左子树元素2和6进行比较，发现2&lt;5&lt;6，进入中间子树</li><li>与中间子树3和5进行比较，找到5</li></ol> 
<h3><a id="B_28"></a>B树的几种插入删除情况</h3> 
<p><img src="https://images2.imgbox.com/3b/7c/0n2vZm7x_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果插入10，没有打破规则，直接插入</li></ul> 
<hr> 
<p><img src="https://images2.imgbox.com/d2/ca/ZN7KSS6h_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果插入4，这时候可以看到叶子节点元素过多，超过了m-1，因此需要对节点进行分裂</li><li>将ceil(m/2)位置的元素上升到父结点</li><li>此时父结点的元素个数同样不满足B树规则，因此继续对父结点进行分裂</li></ul> 
<hr> 
<p><img src="https://images2.imgbox.com/77/9d/jqy7yX57_o.png" alt="在这里插入图片描述"></p> 
<ul><li>删除元素13，没有改变规则</li></ul> 
<hr> 
<p><img src="https://images2.imgbox.com/09/0a/BR4z3qBp_o.png" alt="在这里插入图片描述"></p> 
<ul><li>删除元素8，剩余元素不足，相邻的兄弟节点没有多余元素，这时候就需要与相邻兄弟节点进行合并操作</li><li>首先移动父结点中的元素【该元素在两个需要合并的两个结点元素之间】下移到其子结点中，然后将这两个结点进行合并成一个结点</li><li>删除元素11，剩余元素不足，相邻兄弟节点有多余元素</li><li>删除后，父节点（9，12）就少一个子节点。此时可以向兄弟节点“借”一个元素。但6不可以直接放在元素11的位置，需要上升到到父节点中，再把元素6和12之间的元素9移动到元素11的位置</li></ul> 
<hr> 
<p><img src="https://images2.imgbox.com/8d/44/wPcq3fta_o.png" alt="在这里插入图片描述"></p> 
<ul><li>删除2</li></ul> 
<hr> 
<p><img src="https://images2.imgbox.com/07/28/ohn32p47_o.png" alt="在这里插入图片描述"></p> 
<ul><li>删除元素6</li><li>使用9替代6，删除9之后相邻兄弟没有多余元素，需要从父结点去借一个元素，然后进行合并</li></ul> 
<h2><a id="B_88"></a>B+树</h2> 
<blockquote> 
 <p>是B树的一种变体，主要用于数据库和文件系统，</p> 
</blockquote> 
<h3><a id="B_92"></a>B+树的主要特点</h3> 
<ol><li>有k个子树的中间节点包含k个元素（B树是k-1），每个元素不保存数据，数据都保存在叶子节点。</li><li>所有的叶子节点包含了全部元素，依照元素的大小升序排列，叶子节点之间用双向指针链接</li><li>所有中间节点的元素都同时存在于子结点，在子结点元素中是最大或最小元素</li><li>B+树叶子节点中元素个数为<code>（ceil(m/2)~m）</code>，添加第一个节点除外</li></ol> 
<p><img src="https://images2.imgbox.com/01/63/Cysmdc4e_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>在上图的B+树中，根节点元素8在子节点（2，5，8）中是最大元素，也是叶子节点（6，8）的最大元素；根节点元素15在子节点（11，15）中是最大元素，在叶子结点（13，15）中也是最大元素。</p> 
</blockquote> 
<blockquote> 
 <p><strong>B+树的好处</strong></p> 
 <p>方便进行范围查询，比如我要查询3~11区间的元素</p> 
 <ol><li>首先自顶向下，查找区间的最小值3所在的叶子结点</li><li>通过链表指针，遍历到相邻叶子节点(6,8)</li><li>继续通过链表指针，遍历到相邻叶子结点（9，11）</li></ol> 
</blockquote> 
<h3><a id="_118"></a>插入操作</h3> 
<p><strong>情况1. 若被插入元素所在的结点，其含有元素数目小于阶数 m，则直接插入</strong></p> 
<p><img src="https://images2.imgbox.com/89/6b/7Iq6NCzZ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>情况2. 若被插入关键字所在的结点，其含有关键字数目等于阶数 m，则需要将该结点分裂为两个结点，一个结点包含 ⌈m/2⌉ 。同时，将⌈m/2⌉的关键字上移至其双亲结点。假设其双亲结点中包含的关键字个数小于 m，则插入操作完成</strong></p> 
<p><img src="https://images2.imgbox.com/e2/91/iwaqfh7i_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>情况3. 若插入的关键字比当前结点中的最大值还大，破坏了B+树中从根结点到当前结点的所有索引值，此时需要及时修正后，再做其他操作。</strong></p> 
<p><img src="https://images2.imgbox.com/78/cd/Q0REbaVk_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>情况4. 在第 2 情况中，如果上移操作导致其双亲结点中关键字个数大于 m，则应继续分裂其双亲结点。插入元素20</strong></p> 
<p><img src="https://images2.imgbox.com/dd/46/IVI0kqgr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_146"></a>删除操作</h3> 
<p><strong>情况1：找到存储有该关键字所在的结点时，由于该结点中关键字个数大于⌈M/2⌉，做删除操作不会破坏 B+树，则可以直接删除。</strong></p> 
<p><img src="https://images2.imgbox.com/04/86/B30pd2uV_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>情况2： 当删除该关键字时，导致当前结点中关键字个数小于 ⌈M/2⌉，若其兄弟结点中含有多余的关键字，可以从兄弟结点中借关键字完成删除操作。</strong></p> 
<p><img src="https://images2.imgbox.com/ff/79/x9d6gg8n_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>情况3： 情况2中，如果其兄弟结点没有多余的关键字，则需要同其兄弟结点进行合并。</strong></p> 
<p><img src="https://images2.imgbox.com/c1/02/1TeU6YYv_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>情况4： 当删除某结点中最大的关键字时，就会涉及到更改其双亲结点一直到根结点中所有索引值的更改。</strong></p> 
<p><img src="https://images2.imgbox.com/78/37/ccnojZfm_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>情况5： 当进行合并时，可能会产生因合并使其双亲结点破坏 B+树的结构，需要依照以上规律处理其双亲结点。</strong></p> 
<p><img src="https://images2.imgbox.com/d1/6c/OXimKsHi_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b0276318027e49178153926f5efa0cbb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言课程设计------食品仓库管理系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/661b13ad866b6bbd8bc8ef82e6f6f839/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mmap函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
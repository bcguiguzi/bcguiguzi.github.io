<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>滚动轴承故障检测---基于希尔伯特变换解调（python实现） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="滚动轴承故障检测---基于希尔伯特变换解调（python实现）" />
<meta property="og:description" content="一、基本原理 请转向这里查看
二、方法实现 2.1 加载故障数据 下面先以轴承外圈故障数据进行分析。原始数据为mat文件，是matlab文件，定义一个函数进行数据读取
from scipy.io import loadmat import matplotlib.pyplot as plt import math import numpy as np import scipy plt.rcParams[&#39;font.sans-serif&#39;]=[&#39;SimHei&#39;] plt.rcParams[&#39;axes.unicode_minus&#39;]=False def data_acquision(file_path): &#34;&#34;&#34; fun: 从cwru mat文件读取加速度数据 param file_path: mat文件绝对路径 return accl_data: 加速度数据，array类型 &#34;&#34;&#34; file = loadmat(file_path) # 加载mat数据 file_keys = file.keys() for key in file_keys: if &#39;DE&#39; in key: files = file[key].ravel() return files if __name__ == &#34;__main__&#34;: # step1: 获取测试数据 path = r&#39;D:\360安全浏览器下载\轴承故障检测\数据源\西储大学\CWRU轴承数据\cwru_data\0HP\12k_Drive_End_OR007@6_0_130.mat&#39; data = data_acquision(path) #获取原始数据 plt." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/b1a6db64ab745456a44a6c1c7efa07fc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-28T21:16:42+08:00" />
<meta property="article:modified_time" content="2023-10-28T21:16:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">滚动轴承故障检测---基于希尔伯特变换解调（python实现）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>一、基本原理</strong></h2> 
<p><strong>        请转向这里查看</strong></p> 
<h2><strong>二、方法实现</strong></h2> 
<h3>2.1 加载故障数据</h3> 
<p>        下面先以轴承外圈故障数据进行分析。原始数据为<a href="https://so.csdn.net/so/search?q=mat%E6%96%87%E4%BB%B6&amp;spm=1001.2101.3001.7020" title="mat文件">mat文件</a>，是matlab文件，定义一个函数进行数据读取</p> 
<pre><code class="language-python">from scipy.io import loadmat
import matplotlib.pyplot as plt
import math
import numpy as np
import scipy


plt.rcParams['font.sans-serif']=['SimHei']
plt.rcParams['axes.unicode_minus']=False


def data_acquision(file_path):
    """
    fun: 从cwru mat文件读取加速度数据
    param file_path: mat文件绝对路径
    return accl_data: 加速度数据，array类型
    """
    file = loadmat(file_path)  # 加载mat数据
    file_keys = file.keys()
    for key in file_keys:
        if 'DE' in key:
            files = file[key].ravel()
    return files


if __name__ == "__main__":
    # step1: 获取测试数据
    path = r'D:\360安全浏览器下载\轴承故障检测\数据源\西储大学\CWRU轴承数据\cwru_data\0HP\12k_Drive_End_OR007@6_0_130.mat'
    data = data_acquision(path) #获取原始数据
    plt.figure(figsize=(12,3))
    plt.title('原始数据')
    plt.plot(data)
    print(data)
</code></pre> 
<p class="img-center"><img alt="" height="207" src="https://images2.imgbox.com/c8/a8/H02SGMFV_o.png" width="701"></p> 
<p></p> 
<h3>2.2 包络谱分析</h3> 
<pre><code class="language-python">    # step2: 截取数据 符合实际检测要求
    xt = data[:2000]
    plt.figure(figsize=(12,3))
    plt.title('截取数据')
    plt.plot(xt)
    print(xt)
    
    # step3: 做希尔伯特变换
    ht = scipy.fftpack.hilbert(xt)
    plt.figure(figsize=(12,3))
    plt.title('希尔伯特变换')
    plt.plot(ht)
    print(ht)
    
    # step4: 获取包络信号  
    # z(t)=x(t)+jh(t)=a(t)ejφt
    # 对z(t)取模，得到其幅值a(t). a(t)即为包络信号，也叫解析信号
    at = np.sqrt(ht**2+xt**2)   # at = sqrt(xt^2 + ht^2)  实部
    plt.figure(figsize=(12,3))
    plt.title('包络信号')
    plt.plot(at)
    print(at)
    
    # step5: 获取包络谱 
    sampling_rate = 12000
    at = at - np.mean(at)  # 去直流分量
    am = np.fft.fft(at)    # 对希尔伯特变换后的at做fft变换获得幅值
    am = np.abs(am)        # 对幅值求绝对值（此时的绝对值很大）
    am = am/len(am)*2
    am = am[0: int(len(am)/2)]
    freq = np.fft.fftfreq(len(at), d=1 / sampling_rate)  # 获取fft频率，此时包括正频率和负频率
    freq = freq[0:int(len(freq)/2)]  # 获取正频率
    plt.figure(figsize=(12,3))
    plt.title('包络谱')
    plt.plot(freq, am)
    plt.xlim(0,500)</code></pre> 
<p></p> 
<p class="img-center"><img alt="" height="207" src="https://images2.imgbox.com/96/cd/1J1aqNwx_o.png" width="701"></p> 
<p class="img-center"><img alt="" height="207" src="https://images2.imgbox.com/d9/82/nxs7Wdwc_o.png" width="701"></p> 
<p></p> 
<p class="img-center"><img alt="" height="207" src="https://images2.imgbox.com/c6/10/P4kKFz8c_o.png" width="706"></p> 
<p></p> 
<h3>2.3 特征频率计算</h3> 
<h4>        2.3.1 轴承故障的特征频率</h4> 
<p><br>                 内圈故障特征频率：<img alt="F_{BPFI} = \tfrac{nf_{r}}{2} (1+ \tfrac{d}{D} Cos\alpha )" class="mathcode" src="https://images2.imgbox.com/06/a1/cptkRKUx_o.png"></p> 
<p>                外圈故障特征频率：<img alt="F_{BPFO} = \tfrac{nf_{r}}{2} (1- \tfrac{d}{D} Cos\alpha )" class="mathcode" src="https://images2.imgbox.com/00/f9/VsDlxqVK_o.png"></p> 
<p>                滚动体故障特征频率：<img alt="F_{BSF} = \tfrac{Df_{r}}{2d} (1- (\tfrac{d}{D} Cos\alpha) ^{2})" class="mathcode" src="https://images2.imgbox.com/f2/7d/Du5Aon9V_o.png"></p> 
<p>                保持架故障特涨频率：<img alt="F_{FTF} = \tfrac{f_{r}}{2}(1-\tfrac{d}{D}Cos\alpha )" class="mathcode" src="https://images2.imgbox.com/48/7a/oE3UOKkL_o.png"></p> 
<p>                其中， <img alt="n" class="mathcode" src="https://images2.imgbox.com/21/53/sgJe6Rn2_o.png">: 滚动体个数；<img alt="f_{r}" class="mathcode" src="https://images2.imgbox.com/9d/98/M7kTlJbK_o.png">轴转速；<img alt="d" class="mathcode" src="https://images2.imgbox.com/37/0a/DHrFZxZj_o.png">: 滚珠(子)直径；<img alt="D" class="mathcode" src="https://images2.imgbox.com/db/b1/tHUoXlCS_o.png">: 轴承节径</p> 
<h4>        2.3.2 轴承故障特征频率计算函数</h4> 
<pre><code class="language-python">def bearing_fault_freq_cal(n, d, D, alpha, fr=None):
    '''
    基本描述：
        计算滚动轴承的故障特征频率
    详细描述：
        输入4个参数 n, fr, d, D, alpha
    return C_bpfi, C_bpfo, C_bsf, C_ftf,  fr
           内圈    外圈    滚针   保持架  转速

    Parameters
    ----------
    n: integer
        滚珠数量
    fr: float(r/min)
        转速
    d: float(mm)
        滚珠直径
    D: float(mm)
        轴承直径
    alpha: float(°)
        接触角
    fr:：float(r/min)
        转速
    Returns
    -------
    BPFI: float(Hz)
        内圈故障频率
    BPFO: float(Hz)
       外圈故障频率
    BSF: float(Hz)
        球体故障频率
    FTF: float(Hz)
        保持架频率
    '''
    C_bpfi = n*(1/2)*(1+d/D*np.math.cos(alpha))
    C_bpfo = n*(1/2)*(1-(d/D)*np.math.cos(alpha))
    C_bsf = D*(1/(2*d))*(1-np.square(d/D*np.math.cos(alpha)))
    C_ftf = (1/2)*(1-(d/D)*np.math.cos(alpha))
    if fr!=None:
        return C_bpfi*fr/60, C_bpfo*fr/60, C_bsf*fr/60, C_ftf*fr/60, fr/60
    else:
        return C_bpfi, C_bpfo, C_bsf, C_ftf, fr</code></pre> 
<h4>        2.3.3 轴承特征频率计算</h4> 
<p>        轴承型号为：6205-2RSL JME SKF 深沟球滚珠轴承<br>         <img alt="d = 7.94mm, D = 39.04mm, \alpha = 0, n = 9" class="mathcode" src="https://images2.imgbox.com/c1/9c/6xXUisE6_o.png"></p> 
<p>        下面计算CWRU在转速1797rpm时的故障特征频率</p> 
<pre><code class="language-python">    # step 6 
    bpfi, bpfo, bsf, ftf, fr = bearing_fault_freq_cal(n=9, alpha=0, d=7.94, D=39.04, fr=1797)
    print('内圈故障特征频率',bpfi)
    print('外圈故障特征频率',bpfo)
    print('滚动体故障特征频率',bsf)
    print('保持架故障特征频率',ftf)
    print('当前转速',fr)</code></pre> 
<h3>2.4 理论与实际验证</h3> 
<pre><code class="language-python">    plt.vlines(x=bpfo, ymin=0, ymax=0.2, colors='r')  # 一倍频
    plt.vlines(x=bpfo*2, ymin=0, ymax=0.2, colors='r')  # 二倍频</code></pre> 
<p class="img-center"><img alt="" height="207" src="https://images2.imgbox.com/cd/83/mAbOpWrD_o.png" width="713"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/57869671a1e1c11d6b3d8e0b6a0ddcf4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【图像边缘检测】基于matlab CNN灰度图像边缘提取【含Matlab源码 490期】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/063f8e68a253592bc3f29c626ccf4fa4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【论文复现：Active Learning via Local Structure Recontruction】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
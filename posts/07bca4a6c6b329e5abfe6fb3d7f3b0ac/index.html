<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Flutter基础（八）手势相关Widget：GestureDetector和Dismissible - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Flutter基础（八）手势相关Widget：GestureDetector和Dismissible" />
<meta property="og:description" content="本文首发于公众号「刘望舒」
ReactNative入门系列 React Native组件 Flutter基础系列
前言 移动开发中，用户交互是一个重要的环节，在Android中的触摸、点击、滑动等事件处理都提供了相关的Api，在Flutter中也是一样的，是由Widget来实现的。 Flutter中的手势系统有两个独立的层。第一层是原始指针事件（pointer events），它描述了屏幕上指针，比如触摸、鼠标、触控笔的位置和移动。 第二层是手势，由一个或多个指针移动组成的动作会被识别为不同的手势。
1.指针事件 指针表示用户与设备屏幕交互的原始数据。有四种类型的指针事件：
PointerDownEvent：指针接触到屏幕的特定位置。PointerMoveEvent： 指针已从屏幕上的一个位置移动到另一个位置。PointerUpEvent： 指针已停止接触屏幕。PointerCancelEvent：此指针的输入不再指向此应用，通俗来讲就是事件取消。 在指针按下时，Flutter框架会对当前应用程序执行命中测试，以确定指针与屏幕接触的位置存在哪个Widget上，然后将PointerDownEvent事件（以及该指针的后续事件）调度到命中测试找到的最内部的Widget，事件的分配路径为：从最里面的Widget到树的根路径上的所有Widget。
2.手势 手势表示由一个或多个指针移动组成的动作。主要有以下几种：
点击
onTapDown：指针已经在特定位置与屏幕接触。 onTapUp：指针停止在特定位置与屏幕接触。 onTap ：点击事件触发。 onTapCancel： 先前指针触发的onTapDown不会再触发点击事件。
双击
onDoubleTap：用户快速连续两次在同一位置轻敲屏幕。
长按
onLongPress：指针在相同位置长时间保持与屏幕接触。
垂直拖动
onVerticalDragStart：指针已经与屏幕接触并可能开始垂直移动。 onVerticalDragUpdate 指针与屏幕接触并已沿垂直方向移动。 onVerticalDragEnd 先前与屏幕接触并垂直移动的指针不再与屏幕接触，并且在停止接触屏幕时以特定速度移动。
水平拖动
onHorizontalDragStart：指针已经接触到屏幕并可能开始水平移动 onHorizontalDragUpdate：指针与屏幕接触并已沿水平方向移动 onHorizontalDragEnd：先前与屏幕接触并水平移动的指针不再与屏幕接触，并在停止接触屏幕时以特定速度移动。
如何对这些手势进行检测呢？可以使用GestureDetector。
3.使用GestureDetector 要想检测单击、双击、垂直拖动等手势，只要用GestureDetector嵌套要检测手势Widget并实现想要监听的手势的方法就行。
import &#39;package:flutter/material.dart&#39;; void main() =&gt; runApp(GestureDetectorWidget()); class GestureDetectorWidget extends StatelessWidget { @override Widget build(BuildContext context) { return MaterialApp( title: &#34;Flutter&#34;, home: Scaffold( appBar: AppBar( title: Text(&#34;GestureDetector示例&#34;), ), body: Center( child: GestureDetector( child: Text(&#39;手势识别&#39;), onTap: () { print(&#39;点击&#39;); }, onDoubleTap: () { print(&#39;双击&#39;); }, onLongPress: () { print(&#39;长按&#39;); }, onHorizontalDragStart: (DragStartDetails details) { print(&#39;水平拖动&#39;); }, ), ), ), ); } } 复制代码 只需要在手势识别这个文字上进行操作，那么对应的手势就会被打印出来。 4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/07bca4a6c6b329e5abfe6fb3d7f3b0ac/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-15T15:47:09+08:00" />
<meta property="article:modified_time" content="2019-07-15T15:47:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Flutter基础（八）手势相关Widget：GestureDetector和Dismissible</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="article-content"> 
 <blockquote> 
  <p><strong>本文首发于公众号「刘望舒」</strong></p> 
 </blockquote> 
 <p><a href="https://link.juejin.im?target=http%3A%2F%2Fliuwangshu.cn%2Ftags%2FReact-Native%25E5%2585%25A5%25E9%2597%25A8%2F" rel="nofollow">ReactNative入门系列</a> <a href="https://link.juejin.im?target=http%3A%2F%2Fliuwangshu.cn%2Ftags%2FReact-Native%25E7%25BB%2584%25E4%25BB%25B6%2F" rel="nofollow">React Native组件</a> <a href="https://link.juejin.im?target=http%3A%2F%2Fliuwangshu.cn%2Ftags%2FFlutter%25E5%259F%25BA%25E7%25A1%2580%2F" rel="nofollow">Flutter基础系列</a></p> 
 <h4 class="heading"><strong>前言</strong></h4> 
 <p>移动开发中，用户交互是一个重要的环节，在Android中的触摸、点击、滑动等事件处理都提供了相关的Api，在Flutter中也是一样的，是由Widget来实现的。 Flutter中的手势系统有两个独立的层。第一层是原始指针事件（pointer events），它描述了屏幕上指针，比如触摸、鼠标、触控笔的位置和移动。 第二层是手势，由一个或多个指针移动组成的动作会被识别为不同的手势。</p> 
 <h4 class="heading"><strong>1.指针事件</strong></h4> 
 <p>指针表示用户与设备屏幕交互的原始数据。有四种类型的指针事件：</p> 
 <ul><li>PointerDownEvent：指针接触到屏幕的特定位置。</li><li>PointerMoveEvent： 指针已从屏幕上的一个位置移动到另一个位置。</li><li>PointerUpEvent： 指针已停止接触屏幕。</li><li>PointerCancelEvent：此指针的输入不再指向此应用，通俗来讲就是事件取消。</li></ul> 
 <p>在指针按下时，Flutter框架会对当前应用程序执行命中测试，以确定指针与屏幕接触的位置存在哪个Widget上，然后将PointerDownEvent事件（以及该指针的后续事件）调度到命中测试找到的最内部的Widget，事件的分配路径为：从最里面的Widget到树的根路径上的所有Widget。</p> 
 <h4 class="heading"><strong>2.手势</strong></h4> 
 <p>手势表示由一个或多个指针移动组成的动作。主要有以下几种：</p> 
 <p><strong>点击</strong></p> 
 <p>onTapDown：指针已经在特定位置与屏幕接触。 onTapUp：指针停止在特定位置与屏幕接触。 onTap ：点击事件触发。 onTapCancel： 先前指针触发的onTapDown不会再触发点击事件。</p> 
 <p><strong>双击</strong></p> 
 <p>onDoubleTap：用户快速连续两次在同一位置轻敲屏幕。</p> 
 <p><strong>长按</strong></p> 
 <p>onLongPress：指针在相同位置长时间保持与屏幕接触。</p> 
 <p><strong>垂直拖动</strong></p> 
 <p>onVerticalDragStart：指针已经与屏幕接触并可能开始垂直移动。 onVerticalDragUpdate 指针与屏幕接触并已沿垂直方向移动。 onVerticalDragEnd 先前与屏幕接触并垂直移动的指针不再与屏幕接触，并且在停止接触屏幕时以特定速度移动。</p> 
 <p><strong>水平拖动</strong></p> 
 <p>onHorizontalDragStart：指针已经接触到屏幕并可能开始水平移动 onHorizontalDragUpdate：指针与屏幕接触并已沿水平方向移动 onHorizontalDragEnd：先前与屏幕接触并水平移动的指针不再与屏幕接触，并在停止接触屏幕时以特定速度移动。</p> 
 <p>如何对这些手势进行检测呢？可以使用GestureDetector。</p> 
 <h4 class="heading"><strong>3.使用GestureDetector</strong></h4> 
 <p>要想检测单击、双击、垂直拖动等手势，只要用GestureDetector嵌套要检测手势Widget并实现想要监听的手势的方法就行。</p> 
 <pre><code class="hljs java copyable"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>=&gt; runApp(GestureDetectorWidget());

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GestureDetectorWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-function">Widget <span class="hljs-title">build</span><span class="hljs-params">(BuildContext context)</span> </span>{
    <span class="hljs-keyword">return</span> MaterialApp(
      title: <span class="hljs-string">"Flutter"</span>,
      home: Scaffold(
        appBar: AppBar(
          title: Text(<span class="hljs-string">"GestureDetector示例"</span>),
        ),
        body: Center(
          child: GestureDetector(
            child: Text(<span class="hljs-string">'手势识别'</span>),
            onTap: () {
              print(<span class="hljs-string">'点击'</span>);
            },
            onDoubleTap: () {
              print(<span class="hljs-string">'双击'</span>);
            },
            onLongPress: () {
              print(<span class="hljs-string">'长按'</span>);
            },
            onHorizontalDragStart: (DragStartDetails details) {
              print(<span class="hljs-string">'水平拖动'</span>);
            },
          ),
        ),
      ),
    );
  }
}
<span class="copy-code-btn">复制代码</span></code></pre> 
 <p>只需要在手势识别这个文字上进行操作，那么对应的手势就会被打印出来。 </p> 
 <figure> 
  <figcaption></figcaption> 
 </figure> 
 <p></p> 
 <h4 class="heading"><strong>4.使用Dismissible</strong></h4> 
 <p>滑动删除这个操作很常见，比如在一个列表中，我们向左滑动，就会直接删除一个条目或者给出删除提示选项。Flutter提供了Dismissible来帮助我们实现滑动删除。</p> 
 <pre><code class="hljs java copyable"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>=&gt; runApp(DismissibleWidget(
      items: <span class="hljs-keyword">new</span> List&lt;String&gt;.generate(<span class="hljs-number">300</span>, (i) =&gt; <span class="hljs-string">"第$i行"</span>),
    ));

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DismissibleWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> List&lt;String&gt; items;

  DismissibleWidget({<!-- --><span class="hljs-meta">@required</span> <span class="hljs-keyword">this</span>.items});

  <span class="hljs-meta">@override</span>
  <span class="hljs-function">Widget <span class="hljs-title">build</span><span class="hljs-params">(BuildContext context)</span> </span>{
    <span class="hljs-keyword">return</span> MaterialApp(
      title: <span class="hljs-string">'Flutter'</span>,
      home: Scaffold(
        appBar: AppBar(
          title: Text(<span class="hljs-string">'Dismissible示例'</span>),
        ),
        body: ListView.builder(
          itemCount: items.length,
          itemBuilder: (context, index) {
            <span class="hljs-keyword">final</span> item = items[index];
            <span class="hljs-keyword">return</span> Dismissible(
              key: Key(item),
              onDismissed: (direction) {
                items.removeAt(index);
                print(index);
              },
              child: ListTile(
                leading: Icon(Icons.access_time),
                title: Text(<span class="hljs-string">'${items[index]}'</span>),
              ),
            );
          },
        ),
      ),
    );
  }
}

<span class="copy-code-btn">复制代码</span></code></pre> 
 <p>这个例子和ListView的例子类似，主要的变化就是用Dismissible来嵌套ListTile。当执行删除操作时，ListView中的onDismissed方法会被回调，我们可以直接在onDismissed方法中将被删除的item从List中移除。 </p> 
 <figure> 
  <figcaption></figcaption> 
 </figure> 
 <p></p> 
 <p>我们向左滑动第一个和第二个item，会出现删除的动画，结果如下图所示。 </p> 
 <figure> 
  <figcaption></figcaption> 
 </figure> 
 <p></p> 
 <hr> 
 <div align="center">
   这里不仅分享大前端、Android、Java等技术，还有程序员成长类文章。 
 </div> 
 <div align="center"></div> 
</div> 
<p>转载于:https://juejin.im/post/5d2c9e9ce51d454fbe24a732</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f6a3f980f007593d799c4ac597f12310/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MATLAB中对tif格式栅格影像读取-保存</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a24e1eb59686f875cd6480ccea50b9db/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python学习笔记--项目的组织结构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
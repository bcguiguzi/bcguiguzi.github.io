<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Zabbix监控服务详解&#43;实战 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Zabbix监控服务详解&#43;实战" />
<meta property="og:description" content="目录
一、监控体系概述
1. 为什么需要监控
2. 监控目标与流程
（1）监控的目标
（2） 监控的流程
3. 监控的对象
（1）CPU监控
（2）磁盘监控
（3）内存监控
（4）网络监控
（5） 系统重要进程监控
（6）应用服务监控
（7）硬件设备监控
（8）安全监控
（9）API接口监控
（10）业务监控 二、Zabbix 简介
1. 概述
2. Zabbix 的功能
（1）数据收集
（2）数据存储
（3）灵活的阈值定义
（4）可配置的报警
（5）实时的而可视化图形展示
3. Zabbix 的工作原理
三、Zabbix 服务的部署与配置
1. 安装基础环境
（1）安装MySQL
（2）安装 Apache
（3）安装 PHP
2. 部署 Zabbix
（1）安装 Zabbix 存储库
（2）安装Zabbix服务器，前端，代理
（3）安装 Zabbix 前端
（4）编辑文件 /etc/yum.repos.d/zabbix.repo
（5）安装 Zabbix 前端包
（6）初始化数据库
（7）导入sql数据
（8）导入数据库架构后禁用log_bin_trust_function_creators选项 （9）为 Zabbix 服务器配置数据库
（10）为 Zabbix 前端配置 PHP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f17f709275b2267aef14d5832c99dce6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-11T14:06:07+08:00" />
<meta property="article:modified_time" content="2023-01-11T14:06:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Zabbix监控服务详解&#43;实战</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%A6%82%E8%BF%B0-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%A6%82%E8%BF%B0" rel="nofollow">一、监控体系概述</a></p> 
<p id="1.%20%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%9B%91%E6%8E%A7-toc" style="margin-left:40px;"><a href="#1.%20%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%9B%91%E6%8E%A7" rel="nofollow">1. 为什么需要监控</a></p> 
<p id="2.%20%E7%9B%91%E6%8E%A7%E7%9B%AE%E6%A0%87%E4%B8%8E%E6%B5%81%E7%A8%8B-toc" style="margin-left:40px;"><a href="#2.%20%E7%9B%91%E6%8E%A7%E7%9B%AE%E6%A0%87%E4%B8%8E%E6%B5%81%E7%A8%8B" rel="nofollow">2. 监控目标与流程</a></p> 
<p id="%EF%BC%881%EF%BC%89%E7%9B%91%E6%8E%A7%E7%9A%84%E7%9B%AE%E6%A0%87-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E7%9B%91%E6%8E%A7%E7%9A%84%E7%9B%AE%E6%A0%87" rel="nofollow">（1）监控的目标</a></p> 
<p id="%EF%BC%882%EF%BC%89%20%E7%9B%91%E6%8E%A7%E7%9A%84%E6%B5%81%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%20%E7%9B%91%E6%8E%A7%E7%9A%84%E6%B5%81%E7%A8%8B" rel="nofollow">（2） 监控的流程</a></p> 
<p id="3.%20%E7%9B%91%E6%8E%A7%E7%9A%84%E5%AF%B9%E8%B1%A1-toc" style="margin-left:40px;"><a href="#3.%20%E7%9B%91%E6%8E%A7%E7%9A%84%E5%AF%B9%E8%B1%A1" rel="nofollow">3. 监控的对象</a></p> 
<p id="%EF%BC%881%EF%BC%89CPU%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89CPU%E7%9B%91%E6%8E%A7" rel="nofollow">（1）CPU监控</a></p> 
<p id="%EF%BC%882%EF%BC%89%E7%A3%81%E7%9B%98%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E7%A3%81%E7%9B%98%E7%9B%91%E6%8E%A7" rel="nofollow">（2）磁盘监控</a></p> 
<p id="%EF%BC%883%EF%BC%89%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7" rel="nofollow">（3）内存监控</a></p> 
<p id="%EF%BC%884%EF%BC%89%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7" rel="nofollow">（4）网络监控</a></p> 
<p id="%EF%BC%885%EF%BC%89%20%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A6%81%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%20%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A6%81%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7" rel="nofollow">（5） 系统重要进程监控</a></p> 
<p id="%EF%BC%886%EF%BC%89%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%886%EF%BC%89%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7" rel="nofollow">（6）应用服务监控</a></p> 
<p id="%EF%BC%887%EF%BC%89%E7%A1%AC%E4%BB%B6%E8%AE%BE%E5%A4%87%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%887%EF%BC%89%E7%A1%AC%E4%BB%B6%E8%AE%BE%E5%A4%87%E7%9B%91%E6%8E%A7" rel="nofollow">（7）硬件设备监控</a></p> 
<p id="%EF%BC%888%EF%BC%89%E5%AE%89%E5%85%A8%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%EF%BC%888%EF%BC%89%E5%AE%89%E5%85%A8%E7%9B%91%E6%8E%A7" rel="nofollow">（8）安全监控</a></p> 
<p id="%C2%A0%EF%BC%889%EF%BC%89API%E6%8E%A5%E5%8F%A3%E7%9B%91%E6%8E%A7-toc" style="margin-left:80px;"><a href="#%C2%A0%EF%BC%889%EF%BC%89API%E6%8E%A5%E5%8F%A3%E7%9B%91%E6%8E%A7" rel="nofollow"> （9）API接口监控</a></p> 
<p id="%EF%BC%8810%EF%BC%89%E4%B8%9A%E5%8A%A1%E7%9B%91%E6%8E%A7%C2%A0-toc" style="margin-left:80px;"><a href="#%EF%BC%8810%EF%BC%89%E4%B8%9A%E5%8A%A1%E7%9B%91%E6%8E%A7%C2%A0" rel="nofollow">（10）业务监控 </a></p> 
<p id="%E4%BA%8C%E3%80%81Zabbix%20%E7%AE%80%E4%BB%8B-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81Zabbix%20%E7%AE%80%E4%BB%8B" rel="nofollow">二、Zabbix 简介</a></p> 
<p id="1.%20%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px;"><a href="#1.%20%E6%A6%82%E8%BF%B0" rel="nofollow">1. 概述</a></p> 
<p id="2.%20Zabbix%20%E7%9A%84%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px;"><a href="#2.%20Zabbix%20%E7%9A%84%E5%8A%9F%E8%83%BD" rel="nofollow">2. Zabbix 的功能</a></p> 
<p id="%EF%BC%881%EF%BC%89%E6%95%B0%E6%8D%AE%E6%94%B6%E9%9B%86-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E6%95%B0%E6%8D%AE%E6%94%B6%E9%9B%86" rel="nofollow">（1）数据收集</a></p> 
<p id="%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8" rel="nofollow">（2）数据存储</a></p> 
<p id="%EF%BC%883%EF%BC%89%E7%81%B5%E6%B4%BB%E7%9A%84%E9%98%88%E5%80%BC%E5%AE%9A%E4%B9%89-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E7%81%B5%E6%B4%BB%E7%9A%84%E9%98%88%E5%80%BC%E5%AE%9A%E4%B9%89" rel="nofollow">（3）灵活的阈值定义</a></p> 
<p id="%EF%BC%884%EF%BC%89%E5%8F%AF%E9%85%8D%E7%BD%AE%E7%9A%84%E6%8A%A5%E8%AD%A6-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E5%8F%AF%E9%85%8D%E7%BD%AE%E7%9A%84%E6%8A%A5%E8%AD%A6" rel="nofollow">（4）可配置的报警</a></p> 
<p id="%EF%BC%885%EF%BC%89%E5%AE%9E%E6%97%B6%E7%9A%84%E8%80%8C%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B1%95%E7%A4%BA-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E5%AE%9E%E6%97%B6%E7%9A%84%E8%80%8C%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B1%95%E7%A4%BA" rel="nofollow">（5）实时的而可视化图形展示</a></p> 
<p id="3.%20Zabbix%20%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#3.%20Zabbix%20%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">3. Zabbix 的工作原理</a></p> 
<p id="%E4%B8%89%E3%80%81Zabbix%20%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81Zabbix%20%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE" rel="nofollow">三、Zabbix 服务的部署与配置</a></p> 
<p id="1.%20%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#1.%20%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83" rel="nofollow">1. 安装基础环境</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%AE%89%E8%A3%85MySQL-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%AE%89%E8%A3%85MySQL" rel="nofollow">（1）安装MySQL</a></p> 
<p id="%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85%20Apache-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85%20Apache" rel="nofollow">（2）安装 Apache</a></p> 
<p id="%EF%BC%883%EF%BC%89%E5%AE%89%E8%A3%85%20PHP-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E5%AE%89%E8%A3%85%20PHP" rel="nofollow">（3）安装 PHP</a></p> 
<p id="2.%20%E9%83%A8%E7%BD%B2%20Zabbix-toc" style="margin-left:40px;"><a href="#2.%20%E9%83%A8%E7%BD%B2%20Zabbix" rel="nofollow">2. 部署 Zabbix</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%AD%98%E5%82%A8%E5%BA%93-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%AD%98%E5%82%A8%E5%BA%93" rel="nofollow">（1）安装 Zabbix 存储库</a></p> 
<p id="%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%89%8D%E7%AB%AF%EF%BC%8C%E4%BB%A3%E7%90%86-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%89%8D%E7%AB%AF%EF%BC%8C%E4%BB%A3%E7%90%86" rel="nofollow">（2）安装Zabbix服务器，前端，代理</a></p> 
<p id="%EF%BC%883%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%89%8D%E7%AB%AF-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%89%8D%E7%AB%AF" rel="nofollow">（3）安装 Zabbix 前端</a></p> 
<p id="%EF%BC%884%EF%BC%89%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6%20%2Fetc%2Fyum.repos.d%2Fzabbix.repo-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6%20%2Fetc%2Fyum.repos.d%2Fzabbix.repo" rel="nofollow">（4）编辑文件 /etc/yum.repos.d/zabbix.repo</a></p> 
<p id="%EF%BC%885%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%89%8D%E7%AB%AF%E5%8C%85-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%89%8D%E7%AB%AF%E5%8C%85" rel="nofollow">（5）安装 Zabbix 前端包</a></p> 
<p id="%EF%BC%887%EF%BC%89%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:80px;"><a href="#%EF%BC%887%EF%BC%89%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">（6）初始化数据库</a></p> 
<p id="%EF%BC%888%EF%BC%89%E5%AF%BC%E5%85%A5sql%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px;"><a href="#%EF%BC%888%EF%BC%89%E5%AF%BC%E5%85%A5sql%E6%95%B0%E6%8D%AE" rel="nofollow">（7）导入sql数据</a></p> 
<p id="%EF%BC%889%EF%BC%89%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%B6%E6%9E%84%E5%90%8E%E7%A6%81%E7%94%A8log_bin_trust_function_creators%E9%80%89%E9%A1%B9%C2%A0-toc" style="margin-left:80px;"><a href="#%EF%BC%889%EF%BC%89%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%B6%E6%9E%84%E5%90%8E%E7%A6%81%E7%94%A8log_bin_trust_function_creators%E9%80%89%E9%A1%B9%C2%A0" rel="nofollow">（8）导入数据库架构后禁用log_bin_trust_function_creators选项 </a></p> 
<p id="%EF%BC%8810%EF%BC%89%E4%B8%BA%20Zabbix%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:80px;"><a href="#%EF%BC%8810%EF%BC%89%E4%B8%BA%20Zabbix%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">（9）为 Zabbix 服务器配置数据库</a></p> 
<p id="%EF%BC%8811%EF%BC%89%E4%B8%BA%20Zabbix%20%E5%89%8D%E7%AB%AF%E9%85%8D%E7%BD%AE%20PHP-toc" style="margin-left:80px;"><a href="#%EF%BC%8811%EF%BC%89%E4%B8%BA%20Zabbix%20%E5%89%8D%E7%AB%AF%E9%85%8D%E7%BD%AE%20PHP" rel="nofollow">（10）为 Zabbix 前端配置 PHP</a></p> 
<p id="%C2%A0%EF%BC%8812%EF%BC%89%E5%90%AF%E5%8A%A8Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E4%BB%A3%E7%90%86%E8%BF%9B%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%C2%A0%EF%BC%8812%EF%BC%89%E5%90%AF%E5%8A%A8Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E4%BB%A3%E7%90%86%E8%BF%9B%E7%A8%8B" rel="nofollow"> （11）启动Zabbix服务器和代理进程</a></p> 
<p id="%EF%BC%8813%EF%BC%89Web%E7%AB%AF%E5%AE%89%E8%A3%85-toc" style="margin-left:80px;"><a href="#%EF%BC%8813%EF%BC%89Web%E7%AB%AF%E5%AE%89%E8%A3%85" rel="nofollow">（12）Web端安装</a></p> 
<p id="%C2%A0%E5%9B%9B%E3%80%81Zabbix%E7%9B%B8%E5%85%B3%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%A6%82%E5%BF%B5-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%9B%9B%E3%80%81Zabbix%E7%9B%B8%E5%85%B3%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%A6%82%E5%BF%B5" rel="nofollow"> 四、Zabbix相关组件与概念</a></p> 
<p id="1.%20Zibbx%E7%9A%84%E7%BB%84%E4%BB%B6-toc" style="margin-left:40px;"><a href="#1.%20Zibbx%E7%9A%84%E7%BB%84%E4%BB%B6" rel="nofollow">1. Zibbx的组件</a></p> 
<p id="%EF%BC%881%EF%BC%89Zabbix%20Server-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89Zabbix%20Server" rel="nofollow">（1）Zabbix Server</a></p> 
<p id="%EF%BC%882%EF%BC%89Database%20Storage-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89Database%20Storage" rel="nofollow">（2）Database Storage</a></p> 
<p id="%EF%BC%883%EF%BC%89Web%20interface-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89Web%20interface" rel="nofollow">（3）Web interface</a></p> 
<p id="%EF%BC%884%EF%BC%89Agent-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89Agent" rel="nofollow">（4）Agent</a></p> 
<p id="%EF%BC%885%EF%BC%89Proxy-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89Proxy" rel="nofollow">（5）Proxy</a></p> 
<p id="2.%20Zabbix%20%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#2.%20Zabbix%20%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5%E7%AE%80%E4%BB%8B" rel="nofollow">2. Zabbix 重要概念简介</a></p> 
<p id="%EF%BC%881%EF%BC%89%E4%B8%BB%E6%9C%BA%EF%BC%88host%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E4%B8%BB%E6%9C%BA%EF%BC%88host%EF%BC%89" rel="nofollow">（1）主机（host）</a></p> 
<p id="%EF%BC%882%EF%BC%89%E4%B8%BB%E6%9C%BA%E7%BB%84%EF%BC%88host%20group%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E4%B8%BB%E6%9C%BA%E7%BB%84%EF%BC%88host%20group%EF%BC%89" rel="nofollow">（2）主机组（host group）</a></p> 
<p id="%EF%BC%883%EF%BC%89%E7%9B%91%E6%8E%A7%E9%A1%B9%EF%BC%88item%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E7%9B%91%E6%8E%A7%E9%A1%B9%EF%BC%88item%EF%BC%89" rel="nofollow">（3）监控项（item）</a></p> 
<p id="%EF%BC%884%EF%BC%89%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88trigger%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88trigger%EF%BC%89" rel="nofollow">（4）触发器（trigger）</a></p> 
<p id="%EF%BC%885%EF%BC%89%E4%BA%8B%E4%BB%B6%EF%BC%88event%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E4%BA%8B%E4%BB%B6%EF%BC%88event%EF%BC%89" rel="nofollow">（5）事件（event）</a></p> 
<p id="%EF%BC%886%EF%BC%89%E5%8A%A8%E4%BD%9C%EF%BC%88action%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%886%EF%BC%89%E5%8A%A8%E4%BD%9C%EF%BC%88action%EF%BC%89" rel="nofollow">（6）动作（action）</a></p> 
<p id="%EF%BC%887%EF%BC%89%E5%AA%92%E4%BB%8B%EF%BC%88media%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%887%EF%BC%89%E5%AA%92%E4%BB%8B%EF%BC%88media%EF%BC%89" rel="nofollow">（7）媒介（media）</a></p> 
<p id="%EF%BC%888%EF%BC%89%E6%A8%A1%E6%9D%BF%EF%BC%88template%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%888%EF%BC%89%E6%A8%A1%E6%9D%BF%EF%BC%88template%EF%BC%89" rel="nofollow">（8）模板（template）</a></p> 
<p id="%EF%BC%889%EF%BC%89%E9%80%9A%E7%9F%A5%EF%BC%88notification%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%889%EF%BC%89%E9%80%9A%E7%9F%A5%EF%BC%88notification%EF%BC%89" rel="nofollow">（9）通知（notification）</a></p> 
<p id="%EF%BC%8810%EF%BC%89%E6%8A%A5%E8%AD%A6%E5%8D%87%E7%BA%A7%EF%BC%88escalation%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%8810%EF%BC%89%E6%8A%A5%E8%AD%A6%E5%8D%87%E7%BA%A7%EF%BC%88escalation%EF%BC%89" rel="nofollow">（10）报警升级（escalation）</a></p> 
<p id="%EF%BC%8811%EF%BC%89%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%EF%BC%88remote%20command%EF%BC%89-toc" style="margin-left:80px;"><a href="#%EF%BC%8811%EF%BC%89%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%EF%BC%88remote%20command%EF%BC%89" rel="nofollow">（11）远程命令（remote command）</a></p> 
<p id="3.%20Zabbix%E7%9B%91%E6%8E%A7%E5%AE%9E%E6%88%98%E6%93%8D%E4%BD%9C-toc" style="margin-left:0px;"><a href="#3.%20Zabbix%E7%9B%91%E6%8E%A7%E5%AE%9E%E6%88%98%E6%93%8D%E4%BD%9C" rel="nofollow">五、Zabbix监控实战操作</a></p> 
<p id="%EF%BC%881%EF%BC%89Agent%E7%AB%AF%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89Agent%E7%AB%AF%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE" rel="nofollow">1. Agent端的部署与配置</a></p> 
<p id="%EF%BC%881%EF%BC%89%E9%83%A8%E7%BD%B2Agent%E7%AB%AF-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E9%83%A8%E7%BD%B2Agent%E7%AB%AF" rel="nofollow">（1）部署Agent端</a></p> 
<p id="%EF%BC%882%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A" rel="nofollow">（2）修改配置文件：</a></p> 
<p id="%EF%BC%883%EF%BC%89%E5%90%AF%E5%8A%A8%20Agent%20%E6%9C%8D%E5%8A%A1%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E5%90%AF%E5%8A%A8%20Agent%20%E6%9C%8D%E5%8A%A1%EF%BC%9A" rel="nofollow">（3）启动 Agent 服务：</a></p> 
<p id="%EF%BC%882%EF%BC%89Web%20%E7%AB%AF%E6%B7%BB%E5%8A%A0%E8%A2%AB%E7%9B%91%E6%8E%A7%E4%B8%BB%E6%9C%BA-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89Web%20%E7%AB%AF%E6%B7%BB%E5%8A%A0%E8%A2%AB%E7%9B%91%E6%8E%A7%E4%B8%BB%E6%9C%BA" rel="nofollow">2. Web 端添加被监控主机</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E4%B8%BB%E6%9C%BA-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E4%B8%BB%E6%9C%BA" rel="nofollow">（1）创建主机</a></p> 
<p id="%EF%BC%882%EF%BC%89%E5%A1%AB%E5%86%99%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E5%A1%AB%E5%86%99%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF" rel="nofollow">（2）填写主机信息</a></p> 
<p id="%EF%BC%883%EF%BC%89%E9%80%89%E6%8B%A9%E6%A8%A1%E6%9D%BF%C2%A0-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E9%80%89%E6%8B%A9%E6%A8%A1%E6%9D%BF%C2%A0" rel="nofollow">（3）选择模板 </a></p> 
<p id="%C2%A0%EF%BC%884%EF%BC%89%E6%9F%A5%E7%9C%8B%E4%B8%BB%E6%9C%BA%E5%88%97%E8%A1%A8-toc" style="margin-left:80px;"><a href="#%C2%A0%EF%BC%884%EF%BC%89%E6%9F%A5%E7%9C%8B%E4%B8%BB%E6%9C%BA%E5%88%97%E8%A1%A8" rel="nofollow">（4）查看主机列表</a></p> 
<p id="%EF%BC%883%EF%BC%89%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2%E5%B1%95%E7%A4%BA-toc" style="margin-left:40px;"><a href="#%EF%BC%883%EF%BC%89%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2%E5%B1%95%E7%A4%BA" rel="nofollow">3. 绘制图形展示</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E8%81%9A%E5%90%88%E5%9B%BE%E5%BD%A2-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E8%81%9A%E5%90%88%E5%9B%BE%E5%BD%A2" rel="nofollow">（1）创建聚合图形</a></p> 
<p id="%C2%A0%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%80%9A%E7%9F%A5-toc" style="margin-left:80px;"><a href="#%C2%A0%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%80%9A%E7%9F%A5" rel="nofollow">（2）解决乱码问题</a></p> 
<p id="4.%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E6%8E%A7%E5%86%85%E5%AE%B9(key)-toc" style="margin-left:40px;"><a href="#4.%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E6%8E%A7%E5%86%85%E5%AE%B9%28key%29" rel="nofollow">4. 创建自定义监控内容(key)</a></p> 
<p id="%EF%BC%881%EF%BC%89%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%88%9B%E5%BB%BAkey-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%88%9B%E5%BB%BAkey" rel="nofollow">（1）命令行创建key</a></p> 
<p id="%EF%BC%882%EF%BC%89Web%E7%AB%AF%E5%88%9B%E5%BB%BA-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89Web%E7%AB%AF%E5%88%9B%E5%BB%BA" rel="nofollow">（2）Web端创建</a></p> 
<p id="%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%80%9A%E7%9F%A5-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%80%9A%E7%9F%A5" rel="nofollow">（3）配置邮件报警通知</a></p> 
<p id="5.%20%E8%87%AA%E5%8A%A8%E5%8F%91%E7%8E%B0%EF%BC%88agent%E5%B1%9E%E4%BA%8E%E8%A2%AB%E5%8A%A8%E6%A8%A1%E5%BC%8F%EF%BC%89-toc" style="margin-left:40px;"><a href="#5.%20%E8%87%AA%E5%8A%A8%E5%8F%91%E7%8E%B0%EF%BC%88agent%E5%B1%9E%E4%BA%8E%E8%A2%AB%E5%8A%A8%E6%A8%A1%E5%BC%8F%EF%BC%89" rel="nofollow">5. 自动发现（agent属于被动模式）</a></p> 
<p id="6.%20%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%86%8C%EF%BC%88agent%E5%B1%9E%E4%BA%8E%E4%B8%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F%EF%BC%89-toc" style="margin-left:40px;"><a href="#6.%20%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%86%8C%EF%BC%88agent%E5%B1%9E%E4%BA%8E%E4%B8%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F%EF%BC%89" rel="nofollow">6. 自动注册（agent属于主动模式）</a></p> 
<hr id="hr-toc"> 
<h2>一、监控体系概述</h2> 
<h3 id="1.%20%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%9B%91%E6%8E%A7">1. 为什么需要监控</h3> 
<p>        服务器系统安装完成，部署完所需的服务之后，随着数据量、访问量的增大，随之带来的就是故障问题，为了快速有效、及时的发现问题，并第一时间得到报警信息，就引入了监控服务。对主机的监控、对系统的监控、对服务的监控，都是生产环境的日常需求。</p> 
<h3 id="2.%20%E7%9B%91%E6%8E%A7%E7%9B%AE%E6%A0%87%E4%B8%8E%E6%B5%81%E7%A8%8B">2. 监控目标与流程</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E7%9B%91%E6%8E%A7%E7%9A%84%E7%9B%AE%E6%A0%87">（1）监控的目标</h4> 
<ul><li>对系统、服务或平台实行不间断监控</li><li>实时反映系统、服务或平台的运行状态信息</li><li>提前预知可能存在的故障风险</li><li>实现故障预警报警功能</li></ul> 
<h4 id="%EF%BC%882%EF%BC%89%20%E7%9B%91%E6%8E%A7%E7%9A%84%E6%B5%81%E7%A8%8B">（2） 监控的流程</h4> 
<ul><li>配置、收集监控数据</li><li>存储监控数据</li><li>分析、展示监控数据</li><li>阈值报警（短信报警、微信报警、邮件报警等）</li></ul> 
<h3 id="3.%20%E7%9B%91%E6%8E%A7%E7%9A%84%E5%AF%B9%E8%B1%A1">3. 监控的对象</h3> 
<h4 id="%EF%BC%881%EF%BC%89CPU%E7%9B%91%E6%8E%A7">（1）CPU监控</h4> 
<ul><li> <p>监控CPU整体使用情况：用户态与内核态、空闲率等</p> </li><li> <p>监控单个CPU的使用情况         </p> </li></ul> 
<h4 id="%EF%BC%882%EF%BC%89%E7%A3%81%E7%9B%98%E7%9B%91%E6%8E%A7">（2）磁盘监控</h4> 
<ul><li> <p>监控磁盘容量：分区使用量（已用和可用）</p> </li><li> <p>监控磁盘IO</p> </li><li> <p>监控磁盘的数据读写 </p> </li></ul> 
<h4 id="%EF%BC%883%EF%BC%89%E5%86%85%E5%AD%98%E7%9B%91%E6%8E%A7">（3）内存监控</h4> 
<p>        监控内存使用量（可用、已用）</p> 
<h4 id="%EF%BC%884%EF%BC%89%E7%BD%91%E7%BB%9C%E7%9B%91%E6%8E%A7">（4）网络监控</h4> 
<ul><li> <p>监控内网卡出入流量</p> </li><li> <p>监控外网卡出入流量</p> </li><li> <p>监控TCP状态 </p> </li></ul> 
<h4 id="%EF%BC%885%EF%BC%89%20%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A6%81%E8%BF%9B%E7%A8%8B%E7%9B%91%E6%8E%A7">（5） 系统重要进程监控</h4> 
<ul><li> <p>监控系统进程状态</p> </li><li> <p>监控系统服务进程开销</p> </li></ul> 
<h4 id="%EF%BC%886%EF%BC%89%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E7%9B%91%E6%8E%A7">（6）应用服务监控</h4> 
<ul><li> <p>监控应用的进程状态</p> </li><li> <p>监控应用的端口状态</p> </li><li> <p>监控一些个性化的需求 </p> </li></ul> 
<h4 id="%EF%BC%887%EF%BC%89%E7%A1%AC%E4%BB%B6%E8%AE%BE%E5%A4%87%E7%9B%91%E6%8E%A7">（7）硬件设备监控</h4> 
<ul><li> <p>监控网络设备：路由器、交换机、网关设备等</p> </li><li> <p>监控服务器状态 </p> </li></ul> 
<h4 id="%EF%BC%888%EF%BC%89%E5%AE%89%E5%85%A8%E7%9B%91%E6%8E%A7">（8）安全监控</h4> 
<p>        安全监控在生产环境中用的比较多，一般会使用第三方监控产品，主要监控内容：</p> 
<ul><li>恶意攻击</li><li>程序漏洞</li><li>异常流量 </li></ul> 
<h4 id="%C2%A0%EF%BC%889%EF%BC%89API%E6%8E%A5%E5%8F%A3%E7%9B%91%E6%8E%A7"> （9）API接口监控</h4> 
<p>        在一些复杂、大型的系统中，API的调用非常频繁，因此对API接口的监控非常重要，重点是监控其GET、POST、PUT等请求的相关指标，主要监控内容如下：</p> 
<ul><li>API接口的可用性</li><li>API接口的正确率</li><li>API接口的响应时间</li></ul> 
<h4 id="%EF%BC%8810%EF%BC%89%E4%B8%9A%E5%8A%A1%E7%9B%91%E6%8E%A7%C2%A0">（10）业务监控 </h4> 
<p>        对于一些电商平台，业务监控是重中之重。</p> 
<h2 id="%E4%BA%8C%E3%80%81Zabbix%20%E7%AE%80%E4%BB%8B">二、Zabbix 简介</h2> 
<h3 id="1.%20%E6%A6%82%E8%BF%B0">1. 概述</h3> 
<p>        Zabbix由Alexei Vladishev 创建，目前由Zabbix SIA开发与维护。</p> 
<p>        Zabbix的功能非常强大，能保证服务器系统安全、稳定的运行。Zabbix提供灵活的报警机制，可以使系统管理员能够及时得知故障，并快速定位。Zabbix还可以提供友好的<span style="color:#ff9900;">数据可视化</span>功能，使你关心的数据和指标一目了然。</p> 
<p>        Zabbix 由两部分组成：Zabbix Server 与可选组件 Zabbix Agent。</p> 
<ul><li>Zabbix Server：通过收集Agent传递过来的数据，写入数据库（MySQL等），最终通过PHP+Apache在web页面进行展示。</li><li>Zabbix Agent：通过被监控主机安装Agent的方式来采集数据（需要监控的数据）。</li></ul> 
<h3 id="2.%20Zabbix%20%E7%9A%84%E5%8A%9F%E8%83%BD">2. Zabbix 的功能</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E6%95%B0%E6%8D%AE%E6%94%B6%E9%9B%86">（1）数据收集</h4> 
<ul><li> <p>具有可用性和性能检查功能</p> </li><li> <p>支持SNMP（捕获和轮询） </p> </li></ul> 
<h4 id="%EF%BC%882%EF%BC%89%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8">（2）数据存储</h4> 
<ul><li> <p>可以存储历史数据</p> </li><li> <p>可以存储配置数据</p> </li><li> <p>可以存储监控数据 </p> </li></ul> 
<h4 id="%EF%BC%883%EF%BC%89%E7%81%B5%E6%B4%BB%E7%9A%84%E9%98%88%E5%80%BC%E5%AE%9A%E4%B9%89">（3）灵活的阈值定义</h4> 
<p>        用户可以非常灵活的定义监控阈值，Zabbix 也成为触发器。</p> 
<h4 id="%EF%BC%884%EF%BC%89%E5%8F%AF%E9%85%8D%E7%BD%AE%E7%9A%84%E6%8A%A5%E8%AD%A6">（4）可配置的报警</h4> 
<p>        如短信、微信、邮件报警。 </p> 
<h4 id="%EF%BC%885%EF%BC%89%E5%AE%9E%E6%97%B6%E7%9A%84%E8%80%8C%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B1%95%E7%A4%BA">（5）实时的而可视化图形展示</h4> 
<ul><li> <p>使用自带的图形工具，实时展示被监控的项目</p> </li><li> <p>具有多种Web可视化功能选择</p> </li></ul> 
<h3 id="3.%20Zabbix%20%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">3. Zabbix 的工作原理</h3> 
<p>        Zabbix 监控系统运行的大概流程如下。</p> 
<p>        Zabbix Agent 安装在被监控的主机上，负责收集需要的各项数据，并将数据发送到Zabbix Server端，Zabbix Server 将传递过来的数据存储到数据库中，Zabbix Web端根据数据来展示和绘图。</p> 
<h2 id="%E4%B8%89%E3%80%81Zabbix%20%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE">三、Zabbix 服务的部署与配置</h2> 
<h3 id="1.%20%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83">1. 安装基础环境</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E5%AE%89%E8%A3%85MySQL">（1）安装MySQL</h4> 
<p>将安装包放在 /download 目录下：</p> 
<pre><code>#解压
[root@zy-host download]# tar -zxvf mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz -C /usr/local/

#改名
[root@zy-host local]# mv mysql-5.7.26-linux-glibc2.12-x86_64 mysql

#创建用户组
[root@zy-host local]# groupadd mysql
[root@zy-host local]# useradd -g mysql mysql

#创建data目录
[root@zy-host msyql]# mkdir data

#修改用户组权限
[root@zy-host local]#  chown -R mysql:mysql ./

#创建my.cnf文件
[root@zy-host local]# touch /etc/my.cnf

#写入内容
[root@zy-host local]# vim /etc/my.cnf
[root@zy-host local]# cat /etc/my.cnf 
[mysql]
# 设置mysql客户端默认字符集
default-character-set=utf8
socket=/var/lib/mysql/mysql.sock
[mysqld]
skip-name-resolve
#设置3306端⼝
port = 3306
socket=/var/lib/mysql/mysql.sock
# 设置mysql的安装⽬录
basedir=/usr/local/mysql
# 设置mysql数据库的数据的存放⽬录
datadir=/usr/local/mysql/data
# 允许最⼤连接数
max_connections=200
# 服务端使⽤的字符集默认为8⽐特编码的latin1字符集
character-set-server=utf8
# 创建新表时将使⽤的默认存储引擎
default-storage-engine=INNODB
lower_case_table_names=1
max_allowed_packet=16M

#创建目录 修改权限
[root@zy-host local]# mkdir /var/lib/mysql
[root@zy-host local]# chmod 777 /var/lib/mysql

#正式安装
[root@zy-host mysql]# cd /usr/local/mysql/
[root@zy-host mysql]# ./bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --
2023-01-10T05:14:37.706178Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
2023-01-10T05:14:38.817683Z 0 [Warning] InnoDB: New log files created, LSN=45790
2023-01-10T05:14:38.940767Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.
2023-01-10T05:14:39.013507Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: ae825853-90a5-11ed-aee7-00163e0a8efb.
2023-01-10T05:14:39.026483Z 0 [Warning] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
2023-01-10T05:14:39.026961Z 1 [Note] A temporary password is generated for root@localhost: aq4BxwQUat/C

#复制启动脚本到资源目录
[root@zy-host mysql]# cp ./support-files/mysql.server /etc/init.d/mysqld

#修改mysqld内容 修改其 basedir 和 datadir 为实际对应⽬录
[root@zy-host mysql]# vim /etc/init.d/mysqld
basedir=/usr/local/mysql
datadir=/usr/local/mysql/data

#⾸先增加 mysqld 服务控制脚本执⾏权限
[root@zy-host mysql]# chmod +x /etc/init.d/mysqld

#同时将 mysqld 服务加⼊到系统服务
[root@zy-host mysql]# chkconfig --add mysqld

#最后检查 mysqld 服务是否已经⽣效
[root@zy-host mysql]# chkconfig --list mysqld

Note: This output shows SysV services only and does not include native
      systemd services. SysV configuration data might be overridden by native
      systemd configuration.

      If you want to list systemd services use 'systemctl list-unit-files'.
      To see services enabled on particular target use
      'systemctl list-dependencies [target]'.

mysqld         	0:off	1:off	2:on	3:on	4:on	5:on	6:off


#启动服务  如果启动不起来 检查是否有已经启动的
[root@zy-host mysql]# service mysqld start
Starting MySQL. SUCCESS! 

#加入环境变量 （最后一行）
[root@zy-host mysql]# vim ~/.bash_profile 
[root@zy-host mysql]# cat ~/.bash_profile 
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
	. ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin

export PATH
export PATH=$PATH:/usr/local/mysql/bin

#刷新文件
[root@zy-host mysql]# source ~/.bash_profile

#登录MySQL
[root@zy-host mysql]# mysql -u root -p

#修改密码
mysql&gt; alter user user() identified by "123456";
mysql&gt; flush privileges;

[root@zy-host ~]# mysql -V
mysql  Ver 14.14 Distrib 5.7.26, for linux-glibc2.12 (x86_64) using  EditLine wrapper
</code></pre> 
<h4 id="%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85%20Apache">（2）安装 Apache</h4> 
<pre><code>[root@zy-host ~]# yum install httpd -y</code></pre> 
<h4 id="%EF%BC%883%EF%BC%89%E5%AE%89%E8%A3%85%20PHP">（3）安装 PHP</h4> 
<pre><code>[root@zy-host ~]# yum install php -y</code></pre> 
<h3 id="2.%20%E9%83%A8%E7%BD%B2%20Zabbix">2. 部署 Zabbix</h3> 
<p>官方文档：<a href="https://www.zabbix.com/download?zabbix=5.0&amp;os_distribution=centos&amp;os_version=7&amp;components=server_frontend_agent&amp;db=mysql&amp;ws=apache" rel="nofollow" title="下载并安装 Zabbix 5.0 LTS for CentOS 7、MySQL、Apache">下载并安装 Zabbix 5.0 LTS for CentOS 7、MySQL、Apache</a></p> 
<h4 id="%EF%BC%881%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%AD%98%E5%82%A8%E5%BA%93">（1）安装 Zabbix 存储库</h4> 
<pre><code>[root@zy-host ~]# rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm
[root@zy-host ~]# yum clean all
</code></pre> 
<h4 id="%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E5%89%8D%E7%AB%AF%EF%BC%8C%E4%BB%A3%E7%90%86">（2）安装Zabbix服务器，前端，代理</h4> 
<pre><code>[root@zy-host ~]# yum install zabbix-server-mysql zabbix-agent</code></pre> 
<h4 id="%EF%BC%883%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%89%8D%E7%AB%AF">（3）安装 Zabbix 前端</h4> 
<pre><code>[root@zy-host ~]# yum install centos-release-scl</code></pre> 
<h4 id="%EF%BC%884%EF%BC%89%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6%20%2Fetc%2Fyum.repos.d%2Fzabbix.repo">（4）编辑文件 /etc/yum.repos.d/zabbix.repo</h4> 
<pre><code>[root@zy-host ~]# vim /etc/yum.repos.d/zabbix.repo</code></pre> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="241" src="https://images2.imgbox.com/8e/60/L8nMXBkq_o.png" width="1079"></h4> 
<h4 id="%EF%BC%885%EF%BC%89%E5%AE%89%E8%A3%85%20Zabbix%20%E5%89%8D%E7%AB%AF%E5%8C%85">（5）安装 Zabbix 前端包</h4> 
<pre><code>[root@zy-host ~]# yum install zabbix-web-mysql-scl zabbix-apache-conf-scl</code></pre> 
<h4 id="%EF%BC%887%EF%BC%89%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93">（6）初始化数据库</h4> 
<pre><code>#建库，创建用户并分配权限，刷新权限
# mysql -uroot -p
mysql&gt; create database zabbix character set utf8 collate utf8_bin;
mysql&gt; create user zabbix@localhost identified by 'Zabbix';
mysql&gt; grant all privileges on zabbix.* to zabbix@localhost;
mysql&gt; set global log_bin_trust_function_creators = 1;
mysql&gt; quit;</code></pre> 
<h4 id="%EF%BC%888%EF%BC%89%E5%AF%BC%E5%85%A5sql%E6%95%B0%E6%8D%AE">（7）导入sql数据</h4> 
<pre><code>[root@zy-host ~]# zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix</code></pre> 
<p> 可以看到表已经导入进去： </p> 
<h4><img alt="" height="529" src="https://images2.imgbox.com/40/e6/Jse4CKvD_o.png" width="1061"></h4> 
<h4 id="%EF%BC%889%EF%BC%89%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9E%B6%E6%9E%84%E5%90%8E%E7%A6%81%E7%94%A8log_bin_trust_function_creators%E9%80%89%E9%A1%B9%C2%A0">（8）导入数据库架构后禁用log_bin_trust_function_creators选项 </h4> 
<pre><code># mysql -uroot -p
mysql&gt; set global log_bin_trust_function_creators = 0;
mysql&gt; quit;</code></pre> 
<h4 id="%EF%BC%8810%EF%BC%89%E4%B8%BA%20Zabbix%20%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93">（9）为 Zabbix 服务器配置数据库</h4> 
<p>编辑文件 /etc/zabbix/zabbix_server.conf，在最后一行加入：</p> 
<pre><code>DBPassword=password</code></pre> 
<h4 id="%EF%BC%8811%EF%BC%89%E4%B8%BA%20Zabbix%20%E5%89%8D%E7%AB%AF%E9%85%8D%E7%BD%AE%20PHP">（10）为 Zabbix 前端配置 PHP</h4> 
<p>编辑文件 /etc/opt/rh/rh-php72/php-fpm.d/zabbix.conf 取消注释并为您设置正确的时区</p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/63/37/3LvfuK1i_o.png" width="464"></p> 
<h4 id="%C2%A0%EF%BC%8812%EF%BC%89%E5%90%AF%E5%8A%A8Zabbix%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E4%BB%A3%E7%90%86%E8%BF%9B%E7%A8%8B"> （11）启动Zabbix服务器和代理进程</h4> 
<pre><code>[root@zy-host ~]# systemctl restart zabbix-server zabbix-agent httpd rh-php72-php-fpm
[root@zy-host ~]# systemctl enable zabbix-server zabbix-agent httpd rh-php72-php-fpm
</code></pre> 
<h4 id="%EF%BC%8813%EF%BC%89Web%E7%AB%AF%E5%AE%89%E8%A3%85">（12）Web端安装</h4> 
<p>1. 打开浏览器，访问 http://服务器IP/zabbix  即可进入安装界面：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/2d/64/5epieFVP_o.png" width="1200"></p> 
<p> 2. 点击下一步，进入依赖组件检测界面：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/82/09/bOgYguBD_o.png" width="1200"></p> 
<p> 3. 检测完成后，点击下一步， 进入数据库信息填写界面：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/01/2b/XHAAafpk_o.png" width="1200"></p> 
<p> <span style="color:#fe2c24;">注意1：</span></p> 
<p>这里如果提示连接不上，是因为没有在mysql里开启远程主机登录：</p> 
<p><img alt="" height="416" src="https://images2.imgbox.com/1e/71/btTqG8OX_o.png" width="1200"></p> 
<p> 需要进入数据库执行以下命令：</p> 
<pre><code>mysql&gt;  use mysql;
mysql&gt; update user set user.Host='%' where user.User='zabbix';
mysql&gt; flush privileges;
</code></pre> 
<p><span style="color:#fe2c24;">注意2：</span></p> 
<p> 如果提示错误：The Zabbix database version does not match current requirements. Your database version: 5020000. </p> 
<p>进入数据库，执行以下命令：</p> 
<pre><code>mysql&gt; use zabbix;
mysql&gt; update dbversion set mandatory=4000000;
mysql&gt; flush privileges;
</code></pre> 
<p>4. 填写完之后，继续点击下一步，进入Zibbix Server配置界面： </p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/25/28/NwG9fagm_o.png" width="1200"></p> 
<p> 5. 点击下一步，进入安装配置汇总界面：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/0f/94/0GtbP3Kz_o.png" width="1200"></p> 
<p>6. 点击下一步，进入安装界面</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/de/64/sPvLHWBu_o.png" width="1200"></p> 
<p>7.  点击完成按钮，进入 Zibbx Web 登录界面：</p> 
<p>默认用户为<span style="background-color:#a2e043;"> Admin</span>，密码为 <span style="background-color:#a2e043;">zabbix</span>。</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/f2/e1/dy5uWGoN_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/a8/a7/E9VtypgB_o.png" width="1200"></p> 
<p>将界面改为中文：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/2a/9b/uolKbdw8_o.png" width="1200"></p> 
<p><img alt="" height="725" src="https://images2.imgbox.com/ac/66/sffHlX44_o.png" width="1200"></p> 
<p> 至此，整个安装过程结束。</p> 
<h2 id="%C2%A0%E5%9B%9B%E3%80%81Zabbix%E7%9B%B8%E5%85%B3%E7%BB%84%E4%BB%B6%E4%B8%8E%E6%A6%82%E5%BF%B5"> 四、Zabbix相关组件与概念</h2> 
<h3 id="1.%20Zibbx%E7%9A%84%E7%BB%84%E4%BB%B6">1. Zibbx的组件</h3> 
<h4 id="%EF%BC%881%EF%BC%89Zabbix%20Server">（1）Zabbix Server</h4> 
<p>        Zabbix Server负责接收Agent发送的数据及报告信息，并负责组织所有的配置、统计数据、操作数据。</p> 
<h4 id="%EF%BC%882%EF%BC%89Database%20Storage">（2）Database Storage</h4> 
<p>        Database Storage用于存储所有的配置信息以及收集的数据信息。</p> 
<h4 id="%EF%BC%883%EF%BC%89Web%20interface">（3）Web interface</h4> 
<p>        Web interface 是Zabbix GUI的接口</p> 
<h4 id="%EF%BC%884%EF%BC%89Agent">（4）Agent</h4> 
<p>        Agent 安装部署在被监控的主机上，负责接收被监控主机的数据，并发往 Zabbix Server端或Proxy端。</p> 
<h4 id="%EF%BC%885%EF%BC%89Proxy">（5）Proxy</h4> 
<p>        Proxy是一个可选组件，用在分布式监控环境中，负责代理Zabbix Server收集被监控主机的相关监控数据，并统一发往 Zabbix Server端。</p> 
<h3 id="2.%20Zabbix%20%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5%E7%AE%80%E4%BB%8B">2. Zabbix 重要概念简介</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E4%B8%BB%E6%9C%BA%EF%BC%88host%EF%BC%89">（1）主机（host）</h4> 
<p>        主机是指被监控的网络设备，可以是设备的IP地址，也可以是设备的主机名。</p> 
<h4 id="%EF%BC%882%EF%BC%89%E4%B8%BB%E6%9C%BA%E7%BB%84%EF%BC%88host%20group%EF%BC%89">（2）主机组（host group）</h4> 
<p>        主机组是主机的逻辑容器，包含主机和模板，但在同一个组内的主机和模板之间不能互链接，主机组通常用于给指定用户或用户组分配指定监控权限。</p> 
<h4 id="%EF%BC%883%EF%BC%89%E7%9B%91%E6%8E%A7%E9%A1%B9%EF%BC%88item%EF%BC%89">（3）监控项（item）</h4> 
<p>        监控项是一个指定监控指标的相关数据，这些数据来自于被监控的对象。<span style="color:#ff9900;">监控项是Zabbix进行数据收集的核心组件</span>，对于特定的某个监控对象来讲，每个监控项都由“key”标识。</p> 
<h4 id="%EF%BC%884%EF%BC%89%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88trigger%EF%BC%89">（4）触发器（trigger）</h4> 
<p>        触发器是一个表达式，用于评估被监控对象指定的<strong>item</strong>内接收到的数据是否在指定的合理范围内，也就是阈值。当接受的数据值大于指定阈值时，触发器的状态将从 OK 变为 Problem。当数据恢复到合理范围，状态又会变回 OK。</p> 
<h4 id="%EF%BC%885%EF%BC%89%E4%BA%8B%E4%BB%B6%EF%BC%88event%EF%BC%89">（5）事件（event）</h4> 
<p>        Agent宕机，重新上线，自动注册，触发器状态改变，都属于事件。</p> 
<h4 id="%EF%BC%886%EF%BC%89%E5%8A%A8%E4%BD%9C%EF%BC%88action%EF%BC%89">（6）动作（action）</h4> 
<p>        动作时对于指定的事件预先定义的处理方法，例如，发送通知或报警邮件。</p> 
<h4 id="%EF%BC%887%EF%BC%89%E5%AA%92%E4%BB%8B%EF%BC%88media%EF%BC%89">（7）媒介（media）</h4> 
<p>        媒介是发送通知或报警信息的介质，如短信、微信、邮件。</p> 
<h4 id="%EF%BC%888%EF%BC%89%E6%A8%A1%E6%9D%BF%EF%BC%88template%EF%BC%89">（8）模板（template）</h4> 
<p>        模板是用于快速配置被监控主机的预设条目的集合，通常包括 item、trigger、graph、screen等。</p> 
<h4 id="%EF%BC%889%EF%BC%89%E9%80%9A%E7%9F%A5%EF%BC%88notification%EF%BC%89">（9）通知（notification）</h4> 
<p>        通知是通过指定的媒介向用户发送相关的事件的信息。</p> 
<h4 id="%EF%BC%8810%EF%BC%89%E6%8A%A5%E8%AD%A6%E5%8D%87%E7%BA%A7%EF%BC%88escalation%EF%BC%89">（10）报警升级（escalation）</h4> 
<p>        报警升级是指发送报警或执行远程命令的自定义文案，例如，每隔30秒发送一次报警信息，一共发送5次。</p> 
<h4 id="%EF%BC%8811%EF%BC%89%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%EF%BC%88remote%20command%EF%BC%89">（11）远程命令（remote command）</h4> 
<p>        远程命令是自定义的命令，在被监控的主机处于某个特定的条件时执行此命令。</p> 
<h2 id="3.%20Zabbix%E7%9B%91%E6%8E%A7%E5%AE%9E%E6%88%98%E6%93%8D%E4%BD%9C">五、Zabbix监控实战操作</h2> 
<h3 id="%EF%BC%881%EF%BC%89Agent%E7%AB%AF%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E9%85%8D%E7%BD%AE">1. Agent端的部署与配置</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E9%83%A8%E7%BD%B2Agent%E7%AB%AF"><strong>（1）部署Agent端</strong></h4> 
<pre><code>[root@node1 ~]# rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm
[root@node1 ~]# yum clean all
[root@node1 ~]# yum install zabbix-agent -y
</code></pre> 
<h4 id="%EF%BC%882%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%9A"><strong>（2）修改配置文件：</strong></h4> 
<p> 在文件末尾添加以下内容</p> 
<pre><code>[root@node1 ~]# vim /etc/zabbix/zabbix_agentd.conf
Server=39.107.232.89           #Zabbix服务端IP
ServerActive=39.107.232.89     #Zabbix服务端IP
Hostname=node1                 #客户端主机名
</code></pre> 
<h4 id="%EF%BC%883%EF%BC%89%E5%90%AF%E5%8A%A8%20Agent%20%E6%9C%8D%E5%8A%A1%EF%BC%9A"><strong>（3）启动 Agent 服务：</strong></h4> 
<pre><code>[root@node1 ~]# systemctl start zabbix-agent
</code></pre> 
<h3 id="%EF%BC%882%EF%BC%89Web%20%E7%AB%AF%E6%B7%BB%E5%8A%A0%E8%A2%AB%E7%9B%91%E6%8E%A7%E4%B8%BB%E6%9C%BA">2. Web 端添加被监控主机</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E4%B8%BB%E6%9C%BA">（1）创建主机</h4> 
<p>登录Web端页面，点击 配置-主机-创建主机：</p> 
<p><img alt="" height="1108" src="https://images2.imgbox.com/7d/40/6fdiyGpG_o.png" width="1200"></p> 
<h4 id="%EF%BC%882%EF%BC%89%E5%A1%AB%E5%86%99%E4%B8%BB%E6%9C%BA%E4%BF%A1%E6%81%AF">（2）填写主机信息</h4> 
<p>填写要监控的主机信息后点击添加： </p> 
<p><img alt="" height="945" src="https://images2.imgbox.com/17/87/8nB0ofJg_o.png" width="1200"></p> 
<h4 id="%EF%BC%883%EF%BC%89%E9%80%89%E6%8B%A9%E6%A8%A1%E6%9D%BF%C2%A0">（3）选择模板 </h4> 
<p><img alt="" height="445" src="https://images2.imgbox.com/3e/e0/4ywrvAsQ_o.png" width="1200"></p> 
<h4 id="%C2%A0%EF%BC%884%EF%BC%89%E6%9F%A5%E7%9C%8B%E4%B8%BB%E6%9C%BA%E5%88%97%E8%A1%A8"> （4）查看主机列表</h4> 
<h4><img alt="" height="503" src="https://images2.imgbox.com/9b/88/VEyEsHlo_o.png" width="1200"></h4> 
<h3 id="%EF%BC%883%EF%BC%89%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2%E5%B1%95%E7%A4%BA">3. 绘制图形展示</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E8%81%9A%E5%90%88%E5%9B%BE%E5%BD%A2">（1）创建聚合图形</h4> 
<p>在Web端界面选择 检测——聚合图形，进入创建图形初始界面：</p> 
<p><img alt="" height="821" src="https://images2.imgbox.com/ff/09/Aks4MMo9_o.png" width="1200"></p> 
<p>点击创建聚合图形：</p> 
<p><img alt="" height="175" src="https://images2.imgbox.com/b3/56/TRSqZbbG_o.png" width="536"></p> 
<p><img alt="" height="623" src="https://images2.imgbox.com/7d/7f/GeMRdwTC_o.png" width="1200"> 点击右上角创建聚合图形：</p> 
<p><img alt="" height="798" src="https://images2.imgbox.com/37/e7/RLeO8bVT_o.png" width="1200"></p> 
<p> 创建好如图所示：</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/59/f6/irtkBgvm_o.png" width="1200"></p> 
<h4 id="%C2%A0%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%80%9A%E7%9F%A5">（2）解决乱码问题</h4> 
<pre><code>[root@zy-host ~]# yum -y install wqy-microhei-fonts
[root@zy-host ~]# \cp /usr/share/fonts/wqy-microhei/wqy-microhei.ttc /usr/share/fonts/dejavu/DejaVuSans.ttf</code></pre> 
<p> 可以看到乱码问题已解决：</p> 
<p><img alt="" height="635" src="https://images2.imgbox.com/89/33/v9b1wH7b_o.png" width="1200"></p> 
<h3 id="4.%20%E5%88%9B%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E6%8E%A7%E5%86%85%E5%AE%B9(key)">4. 创建自定义监控内容(key)</h3> 
<blockquote> 
 <p>需求：限制登录人数不超过3个，超过3个就发出报警信息。</p> 
</blockquote> 
<h4 id="%EF%BC%881%EF%BC%89%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%88%9B%E5%BB%BAkey">（1）命令行创建key</h4> 
<p>        1）服务端安装 <span style="background-color:#a2e043;">zabbix-get</span></p> 
<pre><code>#安装zabbix-get，用于服务端查看客户端信息
[root@zy-host ~]# yum install zabbix-get -y
</code></pre> 
<p>         2）自定义key需要执行的 linux 命令：</p> 
<p>该命令含义是：查看登录当前主机的用户有几个</p> 
<pre><code>#查看当前有谁登录了这台主机
[root@node1 ~]# who
root     pts/0        2023-01-11 10:08 (116.179.246.116)
root     pts/1        2023-01-11 10:39 (116.179.246.116)
#查看登录这台主机的人数
[root@node1 ~]# who | wc -l
2
</code></pre> 
<p>        3）在<strong>node1</strong>主机上创建自定义<strong>key</strong></p> 
<pre><code>[root@node1 ~]# cd /etc/zabbix/zabbix_agentd.d/

#在配置文件中创建自定义key为 login.user
[root@node1 zabbix_agentd.d]# vim user_login.conf
UserParameter=login.user,who | wc -l

#重启agent服务
[root@node1 zabbix_agentd.d]# systemctl restart zabbix-agent</code></pre> 
<p>         4）在服务端检查key是否可用</p> 
<pre><code>[root@zy-host ~]# zabbix_get -s '47.104.160.180' -p 10050 -k 'login.user'
3
</code></pre> 
<h4 id="%EF%BC%882%EF%BC%89Web%E7%AB%AF%E5%88%9B%E5%BB%BA">（2）Web端创建</h4> 
<p>        <span style="background-color:#a2e043;">分为以下几步：</span></p> 
<p><strong>        1）创建模板</strong></p> 
<p></p> 
<p><img alt="" height="412" src="https://images2.imgbox.com/21/00/qEJyt3w3_o.png" width="1200"></p> 
<p><img alt="" height="636" src="https://images2.imgbox.com/e8/7a/xyh0LYud_o.png" width="1200"></p> 
<p>找到创建的模板</p> 
<p><img alt="" height="226" src="https://images2.imgbox.com/f0/f1/oSY55toL_o.png" width="1200"></p> 
<p><strong>        2）创建应用集</strong>（就像是文件夹，里面放入一堆监控项）</p> 
<p><img alt="" height="557" src="https://images2.imgbox.com/79/45/PM7ZJ7FU_o.png" width="1200"></p> 
<p><img alt="" height="281" src="https://images2.imgbox.com/00/2b/3subphMS_o.png" width="1200"></p> 
<p><strong>         3）创建监控项</strong>，自定义 item</p> 
<p><img alt="" height="718" src="https://images2.imgbox.com/5c/15/T5bEUTQW_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/d8/69/S4qBkWWe_o.png" width="1200"></p> 
<p><strong>        4）创建触发器</strong></p> 
<p>当监控项获取到值时，和触发器比较，判断是否报警</p> 
<p><img alt="" height="792" src="https://images2.imgbox.com/f1/83/9vhL9EOo_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/d1/b5/QyqtwHuZ_o.png" width="1200"></p> 
<p><img alt="" height="425" src="https://images2.imgbox.com/d9/c6/YENOTGre_o.png" width="1169"></p> 
<p><strong>        5）创建图形展示</strong></p> 
<p><img alt="" height="617" src="https://images2.imgbox.com/ee/19/fpoFdUJ5_o.png" width="1200"></p> 
<p><img alt="" height="1088" src="https://images2.imgbox.com/c5/10/gyRWgJBr_o.png" width="1200"></p> 
<p><strong>        6）将具体主机与该模板关联</strong></p> 
<p>        这里将node1主机与该模板关联</p> 
<p><img alt="" height="752" src="https://images2.imgbox.com/99/28/WkEMxXli_o.png" width="1200"></p> 
<p><strong>         7）查看图形</strong></p> 
<p>        查看node1主机的图形：</p> 
<p><img alt="" height="621" src="https://images2.imgbox.com/56/66/fXfOuFxt_o.png" width="1200"></p> 
<p><strong>        8）触发报警</strong></p> 
<p>        在node1主机上登录4个用户，查看仪表板是否报警 </p> 
<p>        可以看到在仪表盘以及出现提示：</p> 
<p><img alt="" height="841" src="https://images2.imgbox.com/84/be/MEnWOc2z_o.png" width="1200"></p> 
<p> <img alt="" height="614" src="https://images2.imgbox.com/7e/6e/PpfsfK2Q_o.png" width="1200"></p> 
<hr> 
<h4 id="%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6%E9%80%9A%E7%9F%A5">（3）配置邮件报警通知</h4> 
<p>          1）登录网易邮箱获取授权码</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/02/37/W6bjGqk9_o.png" width="1200"></p> 
<p>         2）添加报警媒介类型</p> 
<p><img alt="" height="1129" src="https://images2.imgbox.com/c2/0c/gYevE5BN_o.png" width="1200"></p> 
<p>         3）点击用户设置，添加报警媒介</p> 
<p><img alt="" height="406" src="https://images2.imgbox.com/19/fb/rMY4HYoR_o.png" width="1200"></p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/4d/e2/EyJkWVIQ_o.png" width="1103"></p> 
<p>         4）启用动作：</p> 
<p><img alt="" height="856" src="https://images2.imgbox.com/f0/95/uQNIkwIb_o.png" width="1200"></p> 
<p>         这样一来，如果有问题，就会触发这个动作，给管理员发送邮件。</p> 
<h3 id="5.%20%E8%87%AA%E5%8A%A8%E5%8F%91%E7%8E%B0%EF%BC%88agent%E5%B1%9E%E4%BA%8E%E8%A2%AB%E5%8A%A8%E6%A8%A1%E5%BC%8F%EF%BC%89">5. 自动发现（agent属于被动模式）</h3> 
<p>        Zabbix server主动的去发现所有的客户端，然后将客户端的信息登记在服务端的机器上。缺点时 server 端压力比较大。</p> 
<h3 id="6.%20%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%86%8C%EF%BC%88agent%E5%B1%9E%E4%BA%8E%E4%B8%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F%EF%BC%89">6. 自动注册（agent属于主动模式）</h3> 
<p>        Zabbix agent 主动上报自己的信息，发给 zabbix-server。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9515e8ed8de7002c9ea702494baea658/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">自定义启动器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4098117335bd777623e7c7497f7ff4dd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【复现笔记】Iterative Corresponding Geometry</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
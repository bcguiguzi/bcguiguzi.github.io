<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker镜像常用管理命令 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker镜像常用管理命令" />
<meta property="og:description" content="关注公众号：“DevOps实战派”，获取更多DevOps和运维的精彩内容。
在容器的世界中，镜像是一切的基础。为了有效地管理和利用这些镜像，Docker提供了一系列强大的镜像管理命令。
本文将深入探讨这些命令，帮助你更好地使用容器镜像。
一. 搜索镜像 Docker默认会从Docker Hub的网站下载镜像，在下载之前我们可以使用docker search 命令搜索该站点上的镜像仓库，该命令会列出相关的仓库信息。
例如，要搜索所有与Nginx相关的镜像，可以运行以下命令：
$ docker search nginx NAME DESCRIPTION STARS OFFICIAL AUTOMATED nginx Official build of Nginx. 16272 [OK] jwilder/nginx-proxy Automated Nginx reverse proxy for docker con… 2115 [OK] richarvey/nginx-php-fpm Container running Nginx &#43; PHP-FPM capable of… 822 [OK] jc21/nginx-proxy-manager Docker container for managing Nginx proxy ho… 324 ...... 注：NAME字段为镜像仓库名称，搜索结果会列出网站上包括Docker官方以及第三方的镜像仓库，其中第一个带nginx关键字的为官方仓库，其他第三方镜像仓库会在前面带上名称空间信息；DESCRIPTION为仓库的描述；STARS可以理解为镜像的受欢迎程度，一般优先选择START多的镜像；OFFICIAL表示该镜像是否为官方镜像；AUTOMATED代表为自动构建；
命令支持以下选项：
-f, --filter filter ：根据条件过滤输出内容；
--format string :格式化输出内容；
--limit int :限制显示结果数量，默认为25个；
--no-trunc：显示完整信息；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/dec4133a8604c7328041664f903c8658/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-29T14:22:43+08:00" />
<meta property="article:modified_time" content="2024-02-29T14:22:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker镜像常用管理命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>关注公众号：“<a href="https://so.csdn.net/so/search?q=DevOps&amp;spm=1001.2101.3001.7020" title="DevOps">DevOps</a>实战派”，获取更多DevOps和运维的精彩内容。</p> 
</blockquote> 
<p></p> 
<p>在容器的世界中，镜像是一切的基础。为了有效地管理和利用这些镜像，Docker提供了一系列强大的镜像管理命令。</p> 
<p>本文将深入探讨这些命令，帮助你更好地使用容器镜像。</p> 
<h2>一. 搜索镜像</h2> 
<p>Docker默认会从Docker Hub的网站下载镜像，在下载之前我们可以使用<strong>docker search </strong>命令搜索该站点上的镜像仓库，该命令会列出相关的仓库信息。</p> 
<p>例如，要搜索所有与Nginx相关的镜像，可以运行以下命令：</p> 
<pre><code>$ docker search nginx
NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
nginx                             Official build of Nginx.                        16272     [OK]       
jwilder/nginx-proxy               Automated Nginx reverse proxy for docker con…   2115                 [OK]
richarvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   822                  [OK]
jc21/nginx-proxy-manager          Docker container for managing Nginx proxy ho…   324                  
......
</code></pre> 
<p><strong>注</strong>：NAME字段为镜像仓库名称，搜索结果会列出网站上包括Docker官方以及第三方的镜像仓库，其中第一个带nginx关键字的为官方仓库，其他第三方镜像仓库会在前面带上名称空间信息；DESCRIPTION为仓库的描述；STARS可以理解为镜像的受欢迎程度，一般优先选择START多的镜像；OFFICIAL表示该镜像是否为官方镜像；AUTOMATED代表为自动构建；</p> 
<p>命令支持以下选项：</p> 
<ul><li> <p>-f, --filter filter ：根据条件过滤输出内容；</p> </li><li> <p>--format string :格式化输出内容；</p> </li><li> <p>--limit int :限制显示结果数量，默认为25个；</p> </li><li> <p>--no-trunc：显示完整信息；</p> </li></ul> 
<p>例如：只搜索官方的Nginx镜像，可以使用<strong>--filter</strong> 进行过滤。</p> 
<pre><code>$ docker search --filter=is-official=true nginx
NAME      DESCRIPTION                STARS     OFFICIAL   AUTOMATED
nginx     Official build of Nginx.   16272     [OK]</code></pre> 
<h2></h2> 
<h2>二. 下载镜像</h2> 
<p><strong>docker pull </strong>命令用于从Docker 镜像仓库中拉取镜像到本地计算机。</p> 
<p>命令的格式为：</p> 
<pre><code>docker pull &lt;image_name:tag&gt;
</code></pre> 
<p>示例：</p> 
<pre><code>$ docker pull nginx:1.20
1.20: Pulling from library/nginx
5eb5b503b376: Pull complete 
cdfeb356c029: Pull complete 
d86da7454448: Pull complete 
7976249980ef: Pull complete 
8f66aa6726b2: Pull complete 
c004cabebe76: Pull complete 
Digest: sha256:02923d65cde08a49380ab3f3dd2f8f90aa51fa2bd358bd85f89345848f6e6623
Status: Downloaded newer image for nginx:1.20
docker.io/library/nginx:1.20
</code></pre> 
<p><strong>注：</strong>如果在命令中不指定tag，则默认会下载标签为latest 的最新稳定版本镜像。</p> 
<p><strong>docker pull </strong>命令支持的选项主要包括：</p> 
<ul><li> <p>-a, --all-tags :拉取所有 tagged 镜像</p> </li><li> <p>--disable-content-trust :跳过镜像校验阶段，默认为开启</p> </li><li> <p>-q, --quiet：静默输出</p> </li></ul> 
<h2></h2> 
<h2>三. 查看镜像信息</h2> 
<p>在下载镜像后，我们可以通过 <strong>docker images </strong>或<strong> docker image ls </strong>命令查看本地已有镜像信息。这个命令可以帮助你查看已有镜像的大小、标签、ID等信息。</p> 
<p>如：</p> 
<pre><code>$ docker images              
REPOSITORY   TAG        IMAGE ID       CREATED         SIZE
nginx        1.20       d6c9558ba445   2 weeks ago     141MB
nginx        1.21       c316d5a335a5   2 weeks ago     142MB
</code></pre> 
<p><strong>注：</strong>REPOSITORY显示镜像来源于哪个仓库；TAG为镜像的标签信息，通常会使用TAG来区分镜像版本；IMAGE ID 为镜像的唯一标识ID；CREATED表示镜像创建时间；SIZE为镜像大小；</p> 
<p>命令主要有以下几个选项：</p> 
<ul><li> <p>-a, --all : 显示包括临时镜像在内的所有镜像，默认为不显示；</p> </li><li> <p>-f, --filter filter： 根据条件过滤镜像；</p> </li><li> <p> --no-trunc ：是否对输出结果较长部分进行截断，true为是，false为否；</p> </li></ul> 
<p>假如需要查看单个镜像的详细信息，使用<strong>docker image inspect</strong> 命令，可看到镜像的启动命令、变量等更多配置信息。</p> 
<p>示例：</p> 
<pre><code>$ docker image inspect nginx:1.20
[
    {
        "Id": "sha256:c316d5a335a5cf324b0dc83b3da82d7608724769f6454f6d9a621f3ec2534a5a",
        "RepoTags": [
            "nginx:1.21"
],
......</code></pre> 
<h2>四. 删除镜像</h2> 
<p>在使用较长时间后，系统中往往会因为各种原因而下载了各式各样的镜像文件。对此，可以定期进行镜像清理，避免占用过多存储空间。删除镜像可以使用docker rmi 或docker image rm 命令。</p> 
<p>如：</p> 
<pre><code>$ docker rmi nginx:1.21
</code></pre> 
<p>需要注意的是，如果有容器正在使用该镜像的话，那么镜像将无法删除，并且系统将会出现报错提示。</p> 
<p>如下：</p> 
<pre><code>$ docker rmi nginx:1.21
Error response from daemon: conflict: unable to remove repository reference "nginx:1.21" (must force) - container dbd5d4bdbd6d is using its referenced image c316d5a335a5
</code></pre> 
<p>在这种情况下 ，虽然可以使用加 <strong>-f</strong> 参数的方式强制删除，但不建议这样操作。正确的做法是找到该容器，在确认不再使用后停止并删除，然后再进行镜像的清理。</p> 
<p><strong>docker image prune</strong> 命令也可用于清理镜像，使用该命令的好处在于不需要用户指定镜像，命令会自动清理所有未被使用的镜像。</p> 
<p>命令支持以下参数：</p> 
<ul><li> <p>  -a, --all             删除所有未使用镜像（默认只删除临时镜像）</p> </li><li> <p>  --filter filter       根据条件筛选镜像</p> </li><li> <p>  -f, --force          强制删除镜像</p> </li></ul> 
<p>如下：</p> 
<pre><code>$ docker image prune -a
WARNING! This will remove all images without at least one container associated to them.
Are you sure you want to continue? [y/N] y
Deleted Images:
untagged: nginx:1.20
untagged: nginx@sha256:02923d65cde08a49380ab3f3dd2f8f90aa51fa2bd358bd85f89345848f6e6623
deleted: sha256:d6c9558ba4456741fc4ee304e1a75a561e1c8d92f5107a715b6224bb7844f507
......

Total reclaimed space: 61.08MB
</code></pre> 
<p>当清理完成后，显示结果会在最后提示释放的空间。</p> 
<p></p> 
<h2><strong>五. 归档与导入镜像</strong></h2> 
<p>在某些情况下，我们可能需要将机器中的镜像导出，作为备份保存起来，或者将其导入到另一台机器中使用。此时，我们可以使用Docker 的镜像归档和导入命令。</p> 
<p><strong>docker save</strong> 命令用于将镜像保存为一个tar归档文件，格式如下：</p> 
<pre><code>docker save -o &lt;file_name.tar&gt; &lt;image_name:tag&gt;
</code></pre> 
<p>示例：</p> 
<pre><code>$ docker save -o /tmp/nginx_1.21.tar nginx:1.21
</code></pre> 
<p>在镜像导出后，可以通过网络或拷贝等方式文件同步到其他机器上。此时，使用<strong>docker load </strong>命令即可将文件导入到该机器的镜像库中。</p> 
<p>示例：</p> 
<pre><code>$ docker load -i /tmp/nginx_1.21.tar
</code></pre> 
<p></p> 
<h2>六. 结语</h2> 
<p>通过使用Docker镜像管理命令，你可以轻松地查找、下载、查看、删除和分享镜像，从而更好地管理Docker环境。</p> 
<p>希望本文能够帮助你更好地理解和利用Docker镜像管理命令，使你的容器化应用程序开发和部署更加高效和可靠。</p> 
<p></p> 
<p></p> 
<p><strong><span style="color:#fe2c24;">公众号好文推荐：</span></strong></p> 
<p><a href="https://mp.weixin.qq.com/s?__biz=MzU2OTc4NDI2MQ==&amp;mid=2247488182&amp;idx=1&amp;sn=9fc8bce36897ad7c1b1c555bdb8ceec0&amp;chksm=fcf8301ccb8fb90aba6e8093191964c16a43ce5c517ea3a82b52c9963a082eb64b735af5cf4d&amp;token=1855629823&amp;lang=zh_CN#rd" rel="nofollow" title="虚拟化与容器化：哪个更适合你？">虚拟化与容器化：哪个更适合你？</a></p> 
<p><a href="https://mp.weixin.qq.com/s?__biz=MzU2OTc4NDI2MQ==&amp;mid=2247485803&amp;idx=1&amp;sn=bb0c022643be3296b093f1cd990f9c0b&amp;chksm=fcf82bc1cb8fa2d7f6f7fcf890a7fe41f22a0da77eae2f36d3b7c11f2bddfbc029f194a12678&amp;token=1855629823&amp;lang=zh_CN#rd" rel="nofollow" title="Prometheus如何监控容器">Prometheus如何监控容器</a></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/001b3f5a657914c2c4eeb9e41b312c0e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">QTableWidget实现复制粘贴</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53da2e4a8c9650654a03f4ad3a1c4d38/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">车载以太网协议的架构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
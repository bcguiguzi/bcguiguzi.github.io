<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python3.8 安装缺少ssl、_ctypes模块解决办法 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python3.8 安装缺少ssl、_ctypes模块解决办法" />
<meta property="og:description" content="问题 安装pyhton3.8安装默认不依赖ssl
运行Flask项目时报错：
Traceback (most recent call last): File &#34;/usr/local/python3/bin/flask&#34;, line 8, in &lt;module&gt; sys.exit(main()) File &#34;/usr/local/python3/lib/python3.8/site-packages/flask/cli.py&#34;, line 967, in main cli.main(args=sys.argv[1:], prog_name=&#34;python -m flask&#34; if as_module else None) File &#34;/usr/local/python3/lib/python3.8/site-packages/flask/cli.py&#34;, line 586, in main return super(FlaskGroup, self).main(*args, **kwargs) File &#34;/usr/local/python3/lib/python3.8/site-packages/click/core.py&#34;, line 1078, in main rv = self.invoke(ctx) File &#34;/usr/local/python3/lib/python3.8/site-packages/click/core.py&#34;, line 1686, in invoke sub_ctx = cmd.make_context(cmd_name, args, parent=ctx) File &#34;/usr/local/python3/lib/python3.8/site-packages/click/core.py&#34;, line 943, in make_context self.parse_args(ctx, args) File &#34;/usr/local/python3/lib/python3.8/site-packages/click/core.py&#34;, line 1408, in parse_args value, args = param." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/e34660202256c0dca4d8bb26a5eac60e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-29T23:55:43+08:00" />
<meta property="article:modified_time" content="2024-01-29T23:55:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python3.8 安装缺少ssl、_ctypes模块解决办法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>问题</h4> 
<p>安装pyhton3.8安装默认不依赖ssl</p> 
<p>运行Flask项目时报错：</p> 
<pre><code class="language-python">Traceback (most recent call last):
  File "/usr/local/python3/bin/flask", line 8, in &lt;module&gt;
    sys.exit(main())
  File "/usr/local/python3/lib/python3.8/site-packages/flask/cli.py", line 967, in main
    cli.main(args=sys.argv[1:], prog_name="python -m flask" if as_module else None)
  File "/usr/local/python3/lib/python3.8/site-packages/flask/cli.py", line 586, in main
    return super(FlaskGroup, self).main(*args, **kwargs)
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1078, in main
    rv = self.invoke(ctx)
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1686, in invoke
    sub_ctx = cmd.make_context(cmd_name, args, parent=ctx)
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 943, in make_context
    self.parse_args(ctx, args)
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 1408, in parse_args
    value, args = param.handle_parse_result(ctx, opts, args)
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 2400, in handle_parse_result
    value = self.process_value(ctx, value)
  File "/usr/local/python3/lib/python3.8/site-packages/click/core.py", line 2362, in process_value
    value = self.callback(ctx, self, value)
  File "/usr/local/python3/lib/python3.8/site-packages/flask/cli.py", line 742, in _validate_key
    is_context = isinstance(cert, ssl.SSLContext)
AttributeError: 'NoneType' object has no attribute 'SSLContext'</code></pre> 
<p>查看文件../site-packages/flask/cli.py，导入ssl包失败会捕获异常并将ssl赋值为None</p> 
<p>自己import ssl也报错找不到ssl模块，确认是缺少ssl模块</p> 
<p><img alt="" height="176" src="https://images2.imgbox.com/ff/84/ixJEgJQp_o.png" width="502"></p> 
<h4>解决</h4> 
<p>在编译<a href="https://so.csdn.net/so/search?q=%E5%AE%89%E8%A3%85python&amp;spm=1001.2101.3001.7020" title="安装python">安装python</a>时候安装ssl模块<br> 文件中 Modules/Setup去掉注释这五行</p> 
<p><img alt="" height="809" src="https://images2.imgbox.com/7d/a5/KhR3EGc1_o.png" width="1200"></p> 
<p>重新编译安装python</p> 
<pre><code class="language-python">./configure --with-ssl --prefix=/usr/local/python3
make &amp;&amp; make install</code></pre> 
<p>如果编译python过程中报错：</p> 
<pre><code class="language-bash">gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I./Include/internal  -I. -I./Include    -DPy_BUILD_CORE_BUILTIN  -DUSE_SSL -I/usr/local/ssl/include -I/usr/local/ssl/include/openssl -c ./Modules/_ssl.c -o Modules/_ssl.o
./Modules/_ssl.c:57:10: fatal error: openssl/rsa.h: No such file or directory
 #include "openssl/rsa.h"
          ^~~~~~~~~~~~~~~
compilation terminated.
make: *** [Makefile:1932: Modules/_ssl.o] Error 1</code></pre> 
<p><img alt="" height="709" src="https://images2.imgbox.com/22/9f/MJssc79G_o.png" width="1200"></p> 
<p>则需要安装openssl:</p> 
<h4 id="heading-2">下载地址</h4> 
<blockquote> 
 <p>参见https://www.openssl.org/，包括以下版本：<br> https://www.openssl.org/source/openssl-3.1.0-alpha1.tar.gz<br> https://www.openssl.org/source/openssl-1.1.1s.tar.gz<br> https://www.openssl.org/source/openssl-3.0.7.tar.gz</p> 
</blockquote> 
<h4 id="heading-3">编译安装</h4> 
<blockquote> 
 <p>注：编译之前请先确保系统中安装了make以及gcc的软件包。，编译安装前确认/usr/include/openssl/为空</p> 
</blockquote> 
<pre><code class="language-bash">tar -zxf openssl-1.1.1s.tar.gz
cd openssl-1.1.1s/
./config -fPIC --prefix=/usr/include/openssl enable-shared
make
make install</code></pre> 
<p>其中：</p> 
<ul><li>l -fPIC: 位置无关代码</li><li>l --prefix=: 路径 一般选 /usr/include/openssl</li><li>l enbale-shared: 动态库</li></ul> 
<p></p> 
<p>要在Debian、Ubuntu或者其他衍生版上安装OpenSSL：</p> 
<pre><code class="language-bash">sudo apt-get install libssl-dev
</code></pre> 
<p>要在[Fedora][CentOS]或者RHEL上安装OpenSSL开发包：</p> 
<pre><code class="language-bash">sudo yum install openssl-devel
</code></pre> 
<p><img alt="" height="818" src="https://images2.imgbox.com/56/df/VC8ssJOj_o.png" width="1200"></p> 
<p>安装完后，尝试重新编译程序。</p> 
<p></p> 
<p>验证ssl模块安装成功：</p> 
<p><img alt="" height="517" src="https://images2.imgbox.com/43/14/EfU7pGyQ_o.png" width="1200"></p> 
<p><span style="color:#fe2c24;"><strong>使用pip安装bson的时候报错：”ModuleNotFoundError:No module named _ctypes“ 的解决方案</strong></span></p> 
<p>1、执行如下命令：</p> 
<p>yum install libffi-devel <br> 2、从"./configure ..."重新安装</p> 
<p>问题二：pip3 install时报错“pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.”</p> 
<p>先安装openssl-dev，然后重新编译安装，只是在编译的过程中加入 --enable-optimizations</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2482096560855c51402200de57870bab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ubuntu下faster-whisper安装、基于faster-whisper的语音识别示例、同步生成srt字幕文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6a7e60d237ff6d30012ef39d1baa4371/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VUE:实现随鼠标移动旋转的3D卡片</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux无线网络管理命令(ip/iw/iwconfig/iwlist/ifconfig/wpa_supplicant) 运维 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux无线网络管理命令(ip/iw/iwconfig/iwlist/ifconfig/wpa_supplicant) 运维" />
<meta property="og:description" content="Linux无线网络管理命令(ip/iw/iwconfig/iwlist/ifconfig/wpa_supplicant) 运维
https://blog.csdn.net/DXCyber409/article/details/80574111
Linux无线网络管理命令(ip/iw/iwconfig/iwlist/ifconfig/wpa_supplicant)
原创DXCyber409 最后发布于2018-06-05 22:14:27 阅读数 3313 收藏
展开
前言
以下各小节的前半部分介绍无线网络相关的各种命令的背景以及适用范围。
后半部分演示常用命令搭配和相关操作。
iw命令
man手册中可以找到说明 iw - show / manipulate wireless devices and their configuration
这意味着iw既可以查看信息，又可以管理无线网络设备，还能更改配置，属于比较全能的命令。
缺点：实测对USB网卡支持性很差，几乎只适用于物理接入设备（PCI板载设备）。
常用命令列表： iw list # 查看本机支持的无线特性，such as band information (2.4 GHz, and 5 GHz), and 802.11n information
iw dev wlan0 scan # 扫描无线网络，列表的内容都是实时更新的
iw dev wlan0 link # 获取设备连接状态信息（实测不包含IP地址）
iw wlan0 info # 获取设备工作状态信息
iw event # 获取所有网络设备的工作日志信息
英文原文介绍：https://wireless.wiki.kernel.org/en/users/Documentation/iw
译文：https://blog.csdn.net/robertsong2004/article/details/40044947
ifconfig命令
ifconfig - configure a network interface 配置网络接口命令" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5ac680cabbad1e073988a60be3d26647/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-15T11:15:45+08:00" />
<meta property="article:modified_time" content="2020-02-15T11:15:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux无线网络管理命令(ip/iw/iwconfig/iwlist/ifconfig/wpa_supplicant) 运维</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> </p> 
<p> </p> 
<p>Linux无线网络管理命令(ip/iw/iwconfig/iwlist/ifconfig/wpa_supplicant) 运维<br> https://blog.csdn.net/DXCyber409/article/details/80574111</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>Linux无线网络管理命令(ip/iw/iwconfig/iwlist/ifconfig/wpa_supplicant)<br> 原创DXCyber409 最后发布于2018-06-05 22:14:27 阅读数 3313  收藏<br> 展开<br> 前言<br> 以下各小节的前半部分介绍无线网络相关的各种命令的背景以及适用范围。</p> 
<p>后半部分演示常用命令搭配和相关操作。</p> 
<p>iw命令<br> man手册中可以找到说明 iw - show / manipulate wireless devices and their configuration</p> 
<p>这意味着iw既可以查看信息，又可以管理无线网络设备，还能更改配置，属于比较全能的命令。</p> 
<p>缺点：实测对USB网卡支持性很差，几乎只适用于物理接入设备（PCI板载设备）。</p> 
<p>常用命令列表：   </p> 
<p>iw list  # 查看本机支持的无线特性，such as band information (2.4 GHz, and 5 GHz), and 802.11n information<br> iw dev wlan0 scan # 扫描无线网络，列表的内容都是实时更新的<br> iw dev wlan0 link # 获取设备连接状态信息（实测不包含IP地址）<br> iw wlan0 info # 获取设备工作状态信息<br> iw event # 获取所有网络设备的工作日志信息<br> 英文原文介绍：https://wireless.wiki.kernel.org/en/users/Documentation/iw</p> 
<p>译文：https://blog.csdn.net/robertsong2004/article/details/40044947</p> 
<p>ifconfig命令<br> ifconfig - configure a network interface 配置网络接口命令</p> 
<p>通用的接口操作命令，但通用意味着只能做一些少量配置，例如打开关闭设备接口，配置IP、子网掩码，查看IP地址等。</p> 
<p>ifconfig eth0 down # 关闭eth0接口<br> ifconfig wlan0 up  # 打开wlan0接口<br> ifconfig eth0 192.168.1.3 netmask 255.255.255.0 # 设置IP地址和子网掩码<br> route add default gw 192.168.1.1 # 顺便附带设置网关命令<br> man ifconfig 可以看到详情。</p> 
<p>ip命令<br> ip - show / manipulate routing, devices, policy routing and tunnels</p> 
<p>ip命令用于显示/操作路由、设备、策略路由和隧道，和iw一样是较为综合而强大的命令，与之相似的原型命令可以看作是ifconfig。</p> 
<p>[root@localhost ~]# ip --help<br> Usage: ip [ OPTIONS ] OBJECT { COMMAND | help }<br>        ip [ -force ] -batch filename<br> where  OBJECT := { link | address | addrlabel | route | rule | neigh | ntable |<br>                    tunnel | tuntap | maddress | mroute | mrule | monitor | xfrm |<br>                    netns | l2tp | macsec | tcp_metrics | token }<br>        OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] |<br>                     -h[uman-readable] | -iec |<br>                     -f[amily] { inet | inet6 | ipx | dnet | bridge | link } |<br>                     -4 | -6 | -I | -D | -B | -0 |<br>                     -l[oops] { maximum-addr-flush-attempts } |<br>                     -o[neline] | -t[imestamp] | -ts[hort] | -b[atch] [filename] |<br>                     -rc[vbuf] [size] | -n[etns] name | -a[ll] }<br> 最最常用搭配</p> 
<p>ip link set wlan0 [up] [down]  # 设置网络接口的开启关闭</p> 
<p>其他常用命令格式搭配可以参阅此文：https://blog.csdn.net/radkitty/article/details/3022181</p> 
<p>iwlist命令<br> iwlist  - Get more detailed wireless information from a wireless interface</p> 
<p>DXCyber409@DXCyber409:/etc/wpa_supplicant$ iwlist --help<br> Usage: iwlist [interface] scanning [essid NNN] [last]<br>               [interface] frequency <br>               [interface] channel <br>               [interface] bitrate <br>               [interface] rate <br>               [interface] encryption <br>               [interface] keys <br>               [interface] power <br>               [interface] txpower <br>               [interface] retry <br>               [interface] ap <br>               [interface] accesspoints <br>               [interface] peers <br>               [interface] event <br>               [interface] auth <br>               [interface] wpakeys <br>               [interface] genie <br>               [interface] modulation </p> 
<p>可以通过该命令来获取最后一次扫描的缓存信息：iwlist wlan0 scanning</p> 
<p>对于USB网卡，要扫描周围的SSID广播，该命令几乎是唯一选项，因为iw支持不好。</p> 
<p>iwconfig命令<br> 和ifconfig是同级别的用户级管理工具，但专注于无线网络管理。</p> 
<p>DXCyber409@DXCyber409:/etc/wpa_supplicant$ iwconfig --help<br> Usage: iwconfig [interface]<br>                 interface essid {NNN|any|on|off}<br>                 interface mode {managed|ad-hoc|master|...}<br>                 interface freq N.NNN[k|M|G]<br>                 interface channel N<br>                 interface bit {N[k|M|G]|auto|fixed}<br>                 interface rate {N[k|M|G]|auto|fixed}<br>                 interface enc {NNNN-NNNN|off}<br>                 interface key {NNNN-NNNN|off}<br>                 interface power {period N|timeout N|saving N|off}<br>                 interface nickname NNN<br>                 interface nwid {NN|on|off}<br>                 interface ap {N|off|auto}<br>                 interface txpower {NmW|NdBm|off|auto}<br>                 interface sens N<br>                 interface retry {limit N|lifetime N}<br>                 interface rts {N|auto|fixed|off}<br>                 interface frag {N|auto|fixed|off}<br>                 interface modulation {11g|11a|CCK|OFDMg|...}<br>                 interface commit <br>        Check man pages for more details.<br> 可以使用此命令来连接开放（未加密）的WI-FI网络，和查看接入点的情况。</p> 
<p>iwconfig wlan0 essid "WIFI名称" # 连接开放的WI-FI网络<br> iwconfig wlan0 # 查看wlan0连接情况，如果成功连接，将在Access Point显示下一路由的MAC地址，否则表示尚未连接。<br> wpa_supplicant命令<br> wpa_supplicant  - Wi-Fi Protected Access client and IEEE 802.1X supplicant</p> 
<p>该命令可用于WPA/WPA2-PSK/WEP加密网络的连接管理，现代WI-FI环境必备。</p> 
<p>DXCyber409@DXCyber409:/etc/wpa_supplicant$ wpa_supplicant --help<br> wpa_supplicant: invalid option -- '-'<br> wpa_supplicant v2.6<br> Copyright (c) 2003-2016, Jouni Malinen &lt;j@w1.fi&gt; and contributors</p> 
<p>This software may be distributed under the terms of the BSD license.<br> See README for more details.</p> 
<p>This product includes software developed by the OpenSSL Project<br> for use in the OpenSSL Toolkit (http://www.openssl.org/)</p> 
<p>usage:<br>   wpa_supplicant [-BddhKLqqstuvW] [-P&lt;pid file&gt;] [-g&lt;global ctrl&gt;] \<br>         [-G&lt;group&gt;] \<br>         -i&lt;ifname&gt; -c&lt;config file&gt; [-C&lt;ctrl&gt;] [-D&lt;driver&gt;] [-p&lt;driver_param&gt;] \<br>         [-b&lt;br_ifname&gt;] [-e&lt;entropy file&gt;] [-f&lt;debug file&gt;] \<br>         [-o&lt;override driver&gt;] [-O&lt;override ctrl&gt;] \<br>         [-N -i&lt;ifname&gt; -c&lt;conf&gt; [-C&lt;ctrl&gt;] [-D&lt;driver&gt;] \<br>         [-m&lt;P2P Device config file&gt;] \<br>         [-p&lt;driver_param&gt;] [-b&lt;br_ifname&gt;] [-I&lt;config file&gt;] ...]</p> 
<p>drivers:<br>   nl80211 = Linux nl80211/cfg80211<br>   wext = Linux wireless extensions (generic)<br>   wired = Wired Ethernet driver<br>   none = no driver (RADIUS server/WPS ER)<br> options:<br>   -b = optional bridge interface name<br>   -B = run daemon in the background<br>   -c = Configuration file<br>   -C = ctrl_interface parameter (only used if -c is not)<br>   -d = increase debugging verbosity (-dd even more)<br>   -D = driver name (can be multiple drivers: nl80211,wext)<br>   -e = entropy file<br>   -f = log output to debug file instead of stdout<br>   -g = global ctrl_interface<br>   -G = global ctrl_interface group<br>   -h = show this help text<br>   -i = interface name<br>   -I = additional configuration file<br>   -K = include keys (passwords, etc.) in debug output<br>   -L = show license (BSD)<br>   -m = Configuration file for the P2P Device interface<br>   -N = start describing new interface<br>   -o = override driver parameter for new interfaces<br>   -O = override ctrl_interface parameter for new interfaces<br>   -p = driver parameters<br>   -P = PID file<br>   -q = decrease debugging verbosity (-qq even less)<br>   -s = log output to syslog instead of stdout<br>   -t = include timestamp in debug messages<br>   -T = record to Linux tracing in addition to logging<br>        (records all messages regardless of debug verbosity)<br>   -u = enable DBus control interface<br>   -v = show version<br>   -W = wait for a control interface monitor before starting<br> example:<br>   wpa_supplicant -Dnl80211 -iwlan0 -c/etc/wpa_supplicant.conf<br> 接下来演示如何通过wpa_supplicant连接加密的Wi-Fi网络，详细的解释以及配套的CLI交互程序使用，如有需要请详见参考文献。</p> 
<p>博主所使用的Linux环境为Kali-Rolling，开机是会自己启动好wpa_supplicant的，因此已经提前kill掉相关进程用于演示。</p> 
<p>首先按照手机等连接Wi-Fi的习惯，我们需要知道扫描无线网络广播并记录需要连接的SSID名称(iw命令和iwlist命令都可以完成，请查阅本文小关小节)。</p> 
<p>根据手册我们需要一个配置文件，填入连接配置信息，sudo vim /etc/wpa_supplicant.conf</p> 
<p>ctrl_interface=/var/run/wpa_supplicant</p> 
<p>network={<!-- --><br>     ssid="Wifi Network 1" <br>     psk="12345678"<br> }<br> network={<!-- --><br>     ssid="Wifi Network 2"<br>     psk="87654321"<br> }<br> 随后启动wpa_supplicant<br> sudo wpa_supplicant -B -i wlan0 -c /etc/wpa_supplicant.conf </p> 
<p>其中守护进程启动的-B参数如果不使用，可以看到连接过程用于监控错误的发生，例如密码输入错误。</p> 
<p>启动后通过iwconfig命令可以看到wlan0接口已经有了Access Point地址，证明已经连接。</p> 
<p>但ifconfig wlan0没有显示IP，此时需要获取IP地址才能上网。</p> 
<p>dhclient wlan0 之后即可打开网页测试。</p> 
<p>补充：USB无线网卡使用wpa_supplicant时出现错误信息</p> 
<p>DXCyber409@DXCyber409:~$ sudo wpa_supplicant -i wlan1 -c /etc/wpa_supplicant.conf<br> Successfully initialized wpa_supplicant<br> nl80211: Could not configure driver mode<br> nl80211: deinit ifname=wlan1 disabled_11b_rates=0<br> wlan1: Failed to initialize driver interface<br> 在wpa_supplicant启动参数中补充 -D wext 参数即可。</p> 
<p>同时在wpa_supplicant的输出中可以看到</p> 
<p>Successfully initialized wpa_supplicant<br> rfkill: Cannot get wiphy information<br> 博主的USB网卡驱动并没有使用默认的n80211驱动模式，而是换成了扩展驱动wext模式。因此并没有被归纳入系统支持设备中，这也正是iw命令不能很好的支持USB网卡的原因。</p> 
<p>参考文献</p> 
<p>wpa_cli命令解析：https://blog.csdn.net/jy1075518049/article/details/51015141</p> 
<p>linux下连接无线网出现nl80211: Could not configure driver mode nl80211：</p> 
<p>http://www.cnblogs.com/dakewei/p/7750433.html<br> ————————————————<br> 版权声明：本文为CSDN博主「DXCyber409」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：https://blog.csdn.net/DXCyber409/article/details/80574111</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>iwlist/iwconfig/iw命令 - 文刀文刀 - 博客园<br> https://www.cnblogs.com/liuliu-word/p/9646060.html</p> 
<p> </p> 
<p>1、iwlist 命令：用于对/proc/net/wireless文件进行分析，得出无线网卡相关信息</p> 
<p># iwlist wlan0 scanning 搜索当前无线网络</p> 
<p># iwlist wlan0 frequen 显示频道信息</p> 
<p># iwlist wlan0 rate 显示连接速度</p> 
<p># iwlist wlan0 power 显示电源模式</p> 
<p># iwlist wlan0 txpower 显示功耗</p> 
<p># iwlist wlan0 retry 显示重试连接次数(网络不稳定查看)</p> 
<p># iwlist wlan0 ap 显示热点信息</p> 
<p># iwlist --help 显示帮助信息</p> 
<p># iwlist --version 显示版本信息</p> 
<p>2、iwconfig 系统配置无线网络设备或显示无线网络设备信息。iwconfig 命令类似于ifconfig命令，但是他配置对象是无线网卡，它对网络设备进行无线操作，如设置无线通信频段</p> 
<p> </p> 
<p>auto 自动模式</p> 
<p>essid 设置ESSID</p> 
<p>nwid 设置网络ID</p> 
<p>freq 设置无线网络通信频段</p> 
<p>chanel 设置无线网络通信频段</p> 
<p>sens 设置无线网络设备的感知阀值</p> 
<p>mode 设置无线网络设备的通信设备</p> 
<p>ap 强迫无线网卡向给定地址的接入点注册</p> 
<p>nick&lt;名字&gt; 为网卡设定别名</p> 
<p>rate&lt;速率&gt; 设定无线网卡的速率</p> 
<p>rts&lt;阀值&gt; 在传输数据包之前增加一次握手，确信信道在正常的</p> 
<p>power 无线网卡的功率设置</p> 
<p>3、iw 是一种新的基于 nl80211 的用于无线设备的CLI配置实用程序。它支持最近已添加到内核所有新的驱动程序。采用无线扩展接口的旧工具iwconfig已被废弃，强烈建议切换到 iw 和 nl80211。</p> 
<p>Linux内核的其余部分，iw 仍处于开发阶段。功能被随时添加。 iw 的唯一文档就是此页和“iw help”的输出。 请帮助扩大这个页面。</p> 
<p>有一个页面列出iwconfig和iw的用例：替换 iwconfig.</p> 
<p># iw help # 帮助</p> 
<p># iw ibss leave # 查看WiFi是否打开状态</p> 
<p># iw list # 获得所有设备的功能，如带宽信息（2.4GHz，和5GHz），和802.11n的信息</p> 
<p># iw dev wlan0 scan # 扫描</p> 
<p># iw event # 监听事件</p> 
<p># iw dev wlan0 link # 获得链路状态</p> 
<p># iw wlan0 connect foo # 连接到已禁用加密的AP，这里它的SSID是foo</p> 
<p># iw wlan0 connect foo 2432 # 假设你有两个AP SSID 都是 foo ，你知道你要连接的是在 2432 频道</p> 
<p># iw wlan0 connect foo keys 0:abcde d:1:0011223344 # 连接到使用WEP的AP</p> 
<p># iw dev wlan1 station dump # 获取station 的统计信息</p> 
<p># iw dev wlan1 station get # 获得station对应的peer统计信息</p> 
<p># iw wlan0 set bitrates legacy-2.4 12 18 24 # 修改传输比特率</p> 
<p># iw dev wlan0 set bitrates mcs-5 4 # 修改tx HT MCS的比特率</p> 
<p># iw dev wlan0 set bitrates mcs-2.4 10</p> 
<p># iw dev wlan0 set bitrates mcs-5 # 清除所有 tx 比特率和设置的东西来恢复正常</p> 
<p># iw dev set txpower [] #设置传输功率</p> 
<p># iw phy set txpower [] #设置传输功率</p> 
<p># iw dev wlan0 set power_save on #设置省电模式</p> 
<p># iw dev wlan0 get power_save #查询当前的节电设定</p> 
<p># iw phy phy0 interface add moni0 type monitor #添加一个 monitor 接口</p> 
<p>分类: <a href="https://www.cnblogs.com/liuliu-word/category/1117982.html" rel="nofollow">Android sdk adb 命令</a></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8b608c94ace490d29ab8a59876f3a3b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">element-ui中弹框dialog不显示</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f208e9e51678ac4d615efd864cf71d09/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RuntimeWarning: Glyph 20108 missing from current font.   font.set_text(s, 0.0, flags=flags)解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
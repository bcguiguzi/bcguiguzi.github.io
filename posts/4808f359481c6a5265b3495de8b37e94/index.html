<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Golang编码规范 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Golang编码规范" />
<meta property="og:description" content="文章目录 1. 前言1.1. 一般信息【重要必读】1.2. 如何使用本编程规范1.3. 说明 2. 语言规范2.1 true/false 求值2.2 Receiver2.3 类型申明2.4 Error Handler2.5 自定义类型的String循环问题2.6 Typical Data Races-数据竞争2.7 引用第三包需要验证2.8 字符串使用注意事项2.9 embedding 的使用2.10 完善单元测试和性能测试2.11 业务需要梳理接口IO消耗 3. 风格规范3.1 Go 文件 Layout3.2 General Documentation Layout3.3 import 规范3.5 程序规模3.6 命名规范3.7 缩进3.8 空格3.9 括号3.10 注释 4. 编程实践4.1 error string4.2 Don&#39;t panic, Do Recover4.3 关于 lock 的保护4.4 日志的处理4.5 unsafe package4.6 避免Golang函数传参引发的值拷贝4.7 业务代码中禁止使用直接开协程，管道4.8 Slice使用的注意事项4.9 类型断言4.10 代码复用及抽象化设计4.11 定义静态变量替换代码硬编码4.12 这份文档存在的意义是让大家写出统一风格的代码，让模块可维护性和可读性更好； 1. 前言 1.1. 一般信息【重要必读】 文档内容可能会与您的喜好冲突， 请尽量用包容的心态来接受; 不合理之处， 请评论指出。 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/4808f359481c6a5265b3495de8b37e94/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-23T12:55:10+08:00" />
<meta property="article:modified_time" content="2020-12-23T12:55:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Golang编码规范</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1___1" rel="nofollow">1. 前言</a></li><li><ul><li><a href="#11__3" rel="nofollow">1.1. 一般信息【重要必读】</a></li><li><a href="#12__7" rel="nofollow">1.2. 如何使用本编程规范</a></li><li><a href="#13__27" rel="nofollow">1.3. 说明</a></li></ul> 
  </li><li><a href="#2__35" rel="nofollow">2. 语言规范</a></li><li><ul><li><a href="#21__truefalse__37" rel="nofollow">2.1 true/false 求值</a></li><li><a href="#22_Receiver_66" rel="nofollow">2.2 Receiver</a></li><li><a href="#23___119" rel="nofollow">2.3 类型申明</a></li><li><a href="#24__Error_Handler_149" rel="nofollow">2.4 Error Handler</a></li><li><a href="#25__String_190" rel="nofollow">2.5 自定义类型的String循环问题</a></li><li><a href="#26__Typical_Data_Races_208" rel="nofollow">2.6 Typical Data Races-数据竞争</a></li><li><a href="#27___276" rel="nofollow">2.7 引用第三包需要验证</a></li><li><a href="#28___284" rel="nofollow">2.8 字符串使用注意事项</a></li><li><a href="#29__embedding__291" rel="nofollow">2.9 embedding 的使用</a></li><li><a href="#210___324" rel="nofollow">2.10 完善单元测试和性能测试</a></li><li><a href="#211__IO_338" rel="nofollow">2.11 业务需要梳理接口IO消耗</a></li></ul> 
  </li><li><a href="#3___342" rel="nofollow">3. 风格规范</a></li><li><ul><li><a href="#31__Go__Layout_344" rel="nofollow">3.1 Go 文件 Layout</a></li><li><a href="#32__General_Documentation_Layout_406" rel="nofollow">3.2 General Documentation Layout</a></li><li><a href="#33__import__443" rel="nofollow">3.3 import 规范</a></li><li><a href="#35___596" rel="nofollow">3.5 程序规模</a></li><li><a href="#36___608" rel="nofollow">3.6 命名规范</a></li><li><a href="#37___718" rel="nofollow">3.7 缩进</a></li><li><a href="#38___728" rel="nofollow">3.8 空格</a></li><li><a href="#39___757" rel="nofollow">3.9 括号</a></li><li><a href="#310___782" rel="nofollow">3.10 注释</a></li></ul> 
  </li><li><a href="#4___810" rel="nofollow">4. 编程实践</a></li><li><ul><li><a href="#41__error_string_812" rel="nofollow">4.1 error string</a></li><li><a href="#42__Dont_panic_Do_Recover_827" rel="nofollow">4.2 Don't panic, Do Recover</a></li><li><a href="#43___lock__832" rel="nofollow">4.3 关于 lock 的保护</a></li><li><a href="#44___890" rel="nofollow">4.4 日志的处理</a></li><li><a href="#45__unsafe_package_894" rel="nofollow">4.5 unsafe package</a></li><li><a href="#46__Golang_925" rel="nofollow">4.6 避免Golang函数传参引发的值拷贝</a></li><li><a href="#47___929" rel="nofollow">4.7 业务代码中禁止使用直接开协程，管道</a></li><li><a href="#48__Slice_937" rel="nofollow">4.8 Slice使用的注意事项</a></li><li><a href="#49___945" rel="nofollow">4.9 类型断言</a></li><li><a href="#410___952" rel="nofollow">4.10 代码复用及抽象化设计</a></li><li><a href="#411___961" rel="nofollow">4.11 定义静态变量替换代码硬编码</a></li><li><a href="#412__985" rel="nofollow">4.12 这份文档存在的意义是让大家写出统一风格的代码，让模块可维护性和可读性更好；</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1___1"></a>1. 前言</h2> 
<h3><a id="11__3"></a>1.1. 一般信息【重要必读】</h3> 
<ul><li>文档内容可能会与您的喜好冲突， 请尽量用包容的心态来接受; 不合理之处， 请评论指出。</li></ul> 
<h3><a id="12__7"></a>1.2. 如何使用本编程规范</h3> 
<p>本规范的层次结构</p> 
<ul><li>本规范可分为三大部分，分别对 Go 语法、风格、编程实践作出规定与建议。</li><li>每一部分有若干专题，每一专题下有若干条目。</li><li>条目是规范的基本组成部分，每一条目由规定、定义、解释、示例、参考等项组成。</li></ul> 
<p>条目的级别和编号</p> 
<ul><li>本规范的条目分两个级别 
  <ul><li>RULE：要求所有程序必须遵守，不得违反</li><li>ADVICE：建议遵守，除非确有特殊情况</li><li>本规范所有条目都有编号，用来标识单条规范并用于自动化检查工具错误提示。 
    <ul><li>标号由"RULE"或"ADVICE"和三位数字标识，例如 RULE001, ADVICE001</li></ul> </li></ul> </li></ul> 
<h3><a id="13__27"></a>1.3. 说明</h3> 
<p>参考下列规范并结合自己的业务场景</p> 
<ul><li>参考 “百度 Golang 编程规范V1.1”</li><li>参考 https://golang.org/doc/effective_go.html</li><li>参考 https://github.com/golang/go/wiki/CodeReviewComments</li></ul> 
<h2><a id="2__35"></a>2. 语言规范</h2> 
<h3><a id="21__truefalse__37"></a>2.1 true/false 求值</h3> 
<ul><li> <p>{RULE001} 当明确 expr 为 bool 类型时，禁止使用 == 或 != 与 true/false 比较，应该使用 expr 或 !expr</p> </li><li> <p>{RULE002} 判断某个整数表达式 expr 是否为零时，禁止使用 !expr，应该使用 expr == 0</p> </li></ul> 
<p>示例：</p> 
<pre><code class="prism language-go"><span class="token comment">// GOOD:</span>
<span class="token keyword">var</span> isWhiteCat <span class="token builtin">bool</span>
<span class="token keyword">var</span> num <span class="token builtin">int</span>
<span class="token keyword">if</span> isWhiteCat <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> num <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">//BAD:</span>
<span class="token keyword">var</span> isWhiteCat <span class="token builtin">bool</span>
<span class="token keyword">var</span> num <span class="token builtin">int</span>
<span class="token keyword">if</span> isWhite <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token operator">!</span>num <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="22_Receiver_66"></a>2.2 Receiver</h3> 
<p>2.2.1 Receiver Type</p> 
<ul><li>{RULE003} 如果 receiver 是 map、函数或者 chan 类型，类型不可以是指针</li><li>{RULE004} 如果 receiver 是 slice，并且方法不会进行 reslice 或者重新分配 slice，类型不可以是指针</li><li>{RULE005} 如果 receiver 是 struct，且包含 sync.Mutex 类型字段，则必须使用指针避免拷贝。</li><li>{RULE006} 如果 receiver 是比较大的 struct/array，建议使用指针，这样会更有效率</li><li>{ADVICE001} 如果 receiver 是 struct、array 或 slice，其中指针元素所指的内容可能在方法内被修改，建议使用指针类型</li><li>{ADVICE002} 如果 receiver 是比较小的 struct/array，建议使用 value 类型</li></ul> 
<p>解释</p> 
<ul><li> <p>关于 receiver 的定义详见 Receiver 定义：The receiver is specified via an extra parameter section preceeding the method name. That parameter section must declare a single parameter, the receiver. Its type must be of the form T or *T (possibly using parentheses) where T is a type name. The type denoted by T is called the receiver base type; it must not be a pointer or interface type and it must be declared in the same package as the method. The method is said to be bound to the base type and the method name is visible only within selectors for that type.</p> </li><li> <p>struct 或者 array 中的元素个数超过 3 个，则认为比较大，反之，则认为比较小</p> </li></ul> 
<p>2.2.2 receiver 命名</p> 
<ul><li>{ADVICE003} 尽量简短并有意义。</li><li>{RULE007} 禁止使用“this"、”self“等面向对象语言中特定的叫法。</li><li>{ADVICE004} receiver 的命名要保持一致性</li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token comment">// call()和 done()都使用了在上下文中有意义的"c"进行 receiver 命名</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c Client<span class="token punctuation">)</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c Client<span class="token punctuation">)</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">//BAD：</span>
<span class="token comment">// 1. "c"和"client"命名不一致：done()用了 c，call()用了 client</span>
<span class="token comment">// 2. client 命名过于冗余</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c Client<span class="token punctuation">)</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>client Client<span class="token punctuation">)</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 不允许使用 self</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>self Server<span class="token punctuation">)</span> <span class="token function">rcv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 不允许使用 this</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>this Server<span class="token punctuation">)</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="23___119"></a>2.3 类型申明</h3> 
<ul><li>{RULE008} 申明 slice 时，建议使用 var 方式申明，不建议使用大括号的方式，如果使用make方式，最好能够预估slice的大小和容量<br> 解释：var 方式申明在 slice 不被 append 的情况下避免了内存分配示例，make指定容量会避免append扩容</li><li>{RULE009} struct声明和初始化格式采用多行</li><li>{RULE010} map,chan 均使用make方式初始化，可以理解返回的是个指针，slice有点区别，在扩容时，地址会变化</li></ul> 
<pre><code class="prism language-go"><span class="token comment">//GOOD:</span>
<span class="token keyword">var</span> t <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token comment">// 指定容量 </span>
res <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">//定义如下：</span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span><span class="token punctuation">{<!-- --></span>
  Username <span class="token builtin">string</span>
  Email   <span class="token builtin">string</span>
<span class="token punctuation">}</span>
u <span class="token operator">:=</span> User<span class="token punctuation">{<!-- --></span>
  Username<span class="token punctuation">:</span> <span class="token string">"astaxie"</span><span class="token punctuation">,</span>
  Email<span class="token punctuation">:</span>   <span class="token string">"webben@gmail.com"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//BAD:</span>
t <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
res <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="24__Error_Handler_149"></a>2.4 Error Handler</h3> 
<ul><li> <p>{RULE011} 对于返回值中的 error，一定要进行判断和处理，不可以使用 ”_“ 变量忽略 error</p> </li><li> <p>{RULE012} 逻辑处理中禁用panic，对于其他的package对外的接口不能有panic，只能在包内采用。</p> </li><li> <p>{RULE012} 错误描述如果是英文必须为小写，不需要标点结尾</p> </li><li> <p>{RULE013} error的处理采用独立的错误流进行处理</p> </li></ul> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token keyword">if</span> inputIo<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Body<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// handling</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// error handling</span>
  <span class="token keyword">return</span> <span class="token comment">// or continue, etc.</span>
<span class="token punctuation">}</span>
<span class="token comment">// normal code</span>
<span class="token comment">// 如果返回值需要初始化，则采用下面的方式</span>
x<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// error handling</span>
  <span class="token keyword">return</span>
<span class="token punctuation">}</span>
<span class="token comment">// use x</span>
<span class="token comment">//BAD：</span>
<span class="token comment">// 忽略err不可采取</span>
inputIo<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// error handling</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// normal code</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="25__String_190"></a>2.5 自定义类型的String循环问题</h3> 
<ul><li>{RULE014} 自定义的类型定义了String方法，那么在打印的时候会产生隐藏的一些bug</li></ul> 
<pre><code class="prism language-go"><span class="token keyword">type</span> MyInt <span class="token builtin">int</span> 
<span class="token comment">// GOOD：</span>
<span class="token keyword">func</span><span class="token punctuation">(</span>m MyInt<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprint</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//这是安全的,因为我们内部进行了类型转换</span>
<span class="token punctuation">}</span>
<span class="token comment">//BAD：</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>m MyInt<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprint</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>   <span class="token comment">//BUG:死循环</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="26__Typical_Data_Races_208"></a>2.6 Typical Data Races-数据竞争</h3> 
<p>​ 参考：http://golang.org/doc/articles/race_detector.html#Race_on_loop_counter</p> 
<ul><li> <p>{RULE015} Race on loop counter：注意闭包的调用，在循环中调用函数或者goroutine方法，一定要采用显示的变量调用，不要再闭包函数里面调用循环的参数，</p> </li><li> <p>{RULE016} Accidentally shared variable：协程中外层共享变量的使用，如外层中使用的err，协程中依然使用</p> </li><li> <p>{RULE017} Unprotected global variable：全局变量如果有修改的操作，需要进行加锁，如Map</p> </li></ul> 
<pre><code class="prism language-go"><span class="token comment">//GOOD:</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup 
  wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> 
  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>j <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>     
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>  <span class="token comment">// Good. Read local copy of the loop counter.     </span>
      wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> 
  wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> 
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>   
  f1<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">"file1"</span><span class="token punctuation">)</span> 
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span> 
    res <span class="token operator">&lt;-</span> err 
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>      
      <span class="token comment">// This err is shared with the main goroutine,      </span>
      <span class="token comment">// so the write races with the write below.     </span>
      <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> f1<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>     
      res <span class="token operator">&lt;-</span> err     
      f1<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
<span class="token comment">//BAD:</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup 
  wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> 
  <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>     
      fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>  
      <span class="token comment">// Not the 'i' you are looking for.     </span>
      wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> 
  wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> 
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  f1<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">"file1"</span><span class="token punctuation">)</span> 
  <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span> 
    res <span class="token operator">&lt;-</span> err 
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// This err is shared with the main goroutine,</span>
      <span class="token comment">// so the write races with the write below. </span>
      <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> f1<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      res <span class="token operator">&lt;-</span> err
      f1<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="27___276"></a>2.7 引用第三包需要验证</h3> 
<ul><li> <p><code>{RULE018}业务中引入任何第三包之前，需要调研对比各个包之间的性能差异，使用范围（如star数量）</code></p> <p>如json包：官方包encoding/json的性能较差，选用： jsoniter “<a href="http://github.com/json-iterator/go">github.com/json-iterator/go</a>” 效率更高</p> </li></ul> 
<h3><a id="28___284"></a>2.8 字符串使用注意事项</h3> 
<ul><li>{RULE019} 避免循环内进行字符串拼接时，如果避免不了，采用bytes.Buffer方式，预估内部的Grow次数，避免内存的频繁申请</li><li>{RULE020} 字符串的传值是传引用，任何修改都会导致重新分配空间</li><li>{RULE021} 少量字符串可使用+或string包操作，尽量少用fmt.Sprintf</li><li>{RULE022} 大量字符串的传参要传指针</li></ul> 
<h3><a id="29__embedding__291"></a>2.9 embedding 的使用</h3> 
<ul><li>{ADVICE005} embedding 只用于"is a"的语义下，而不用于"has a"的语义下</li><li>{ADVICE006} 一个定义内，多于一个的 embedding 尽量少用</li></ul> 
<p>解释</p> 
<ul><li>语义上 embedding 是一种“继承关系“，而不是”成员关系“</li><li>一个定义内有多个 embedding，则很难判断某个成员变量或函数是从哪里继承得到的</li><li>一个定义内有多个 embedding，危害和在 python 中使用”from xxx import *"是类似的</li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD:</span>
<span class="token keyword">type</span> Automobile <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token keyword">type</span> Engine <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ....</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 正确的定义</span>
<span class="token keyword">type</span> Car <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  Automobile     <span class="token comment">//  Car is a Automobile engine engine   </span>
  Engine  <span class="token comment">// Car has a Engine</span>
<span class="token punctuation">}</span>
<span class="token comment">//BAD:</span>
<span class="token keyword">type</span> Car <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  Automobile  <span class="token comment">//  Car is a Automobile </span>
  Engine    <span class="token comment">//  Car has a Engine, but Car is NOT a Engine</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="210___324"></a>2.10 完善单元测试和性能测试</h3> 
<ul><li>测试应该会失败，并提供有用的消息，说明错误，输入内容，实际内容以及预期结果。gotest</li><li>公共功能函数应该做下性能测试，了解关键节点的IO代价，benchmark</li></ul> 
<pre><code class="prism language-go"><span class="token keyword">if</span> got <span class="token operator">!=</span> tt<span class="token punctuation">.</span>want <span class="token punctuation">{<!-- --></span>
  t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Foo(%q) = %d; want %d"</span><span class="token punctuation">,</span> tt<span class="token punctuation">.</span>in<span class="token punctuation">,</span> got<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>want<span class="token punctuation">)</span> 
  <span class="token comment">// or Fatalf, if test can't test anything more past this point</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="211__IO_338"></a>2.11 业务需要梳理接口IO消耗</h3> 
<ul><li>在访问stored，redis，da等资源时，需要梳理业务接口的IO代价，及时调整设计实现，实现IO最小化</li></ul> 
<h2><a id="3___342"></a>3. 风格规范</h2> 
<h3><a id="31__Go__Layout_344"></a>3.1 Go 文件 Layout</h3> 
<ul><li> <p>{RULE023} 建议文件按以下顺序进行布局</p> </li><li> 
  <ul><li>General Documentation： 对整个模块和功能的完整描述注释，写在文件头部。</li><li>package：当前 package 定义</li><li>imports：包含的头文件</li><li>Constants：常量</li><li>Typedefs： 类型定义</li><li>Globals：全局变量定义</li><li>functions：函数实现 
    <ul><li>public functions ：首字符大写的函数</li><li>private functions：首字母小写的函数</li></ul> </li></ul> </li><li> <p>{RULE024} 对于以上的各个部分，采用单个空行分割，同时：</p> 
  <ul><li>多个类型定义采用单个空行分割</li><li>多个函数采用单个空行分割</li></ul> </li><li> <p>{ADVICE007} 函数内不同的业务逻辑处理建议采用单个空行分割</p> </li><li> <p>{ADVICE008} 常量或者变量如果较多，建议按照业务进行分组，组间用单个空行分割</p> </li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD: </span>
<span class="token comment">/* Copyright 2015  Webben Inc. All Rights Reserved. */</span>
<span class="token comment">/* bfe_server.go - the main structure of bfe-server */</span> 
<span class="token comment">/* modification history -------------------- 2014/6/5, by Zhang San, create*/</span>
<span class="token comment">/* DESCRIPTION This file contains the most important struct 'BfeServer' of go- bfe and new/init method of the struct.*/</span> 
<span class="token keyword">package</span> bfe_server 

<span class="token comment">// imports</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span> 
  <span class="token string">"fmt"</span> 
  <span class="token string">"time"</span>
  
  <span class="token string">"code.google.com/p/log4go"</span>
  
  <span class="token string">"bfe_config/bfe_conf"</span>
  <span class="token string">"bfe_module"</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
  version <span class="token operator">=</span> <span class="token string">"1.0.0.0"</span>
<span class="token punctuation">)</span> 

<span class="token comment">// typedefs</span>
<span class="token keyword">type</span> BfeModule <span class="token keyword">interface</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token function">Init</span><span class="token punctuation">(</span>cfg bfe_conf<span class="token punctuation">.</span>BfeConfig<span class="token punctuation">,</span> cbs <span class="token operator">*</span>BfeCallbacks<span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token punctuation">}</span> 
<span class="token keyword">type</span> BfeModules <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span>
  modules <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>BfeModule
<span class="token punctuation">}</span>

<span class="token comment">// vars</span>
<span class="token keyword">var</span> errTooLarge <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"http: request too large"</span><span class="token punctuation">)</span> 

<span class="token comment">//functions</span>
<span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="32__General_Documentation_Layout_406"></a>3.2 General Documentation Layout</h3> 
<ul><li>{ADVICE009} 建议每个文件开头部分包括文件 copyright 说明（copyright）</li><li>{ADVICE010} 建议每个文件开头部分包括文件标题（Title）</li><li>{ADVICE011} 建议每个文件开头部分包括修改记录（Modification History）</li><li>{ADVICE012} 建议每个文件开头部分包括文件描述（Description）</li></ul> 
<p>解释</p> 
<ul><li> <p>Title 中包括文件的名称和文件的简单说明</p> 
  <ul><li>Title 应该在一行内完成</li></ul> </li><li> <p>Modification History 记录文件的修改过程，并且只记录最主要的修改</p> 
  <ul><li>当书写新的函数模块时，只需要使用形如"Add func1()"这样的说明</li><li>如果后面有对函数中的算法进行了修改，需要指出修改的具体位置和修改方法</li><li>Modification History 的具体格式为：&lt;修改时间&gt;, &lt;修改人&gt;, &lt;修改动作 &gt;</li></ul> </li><li> <p>Description 详细描述文件的功能和作用</p> </li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD: </span>
<span class="token comment">/* Copyright 2015  Webben Inc. All Rights Reserved. */</span>
<span class="token comment">/* bfe_server.go - the main structure of bfe-server  */</span> 
<span class="token comment">/* modification history -------------------- 2014/6/5, by Zhang San, create*/</span> 
<span class="token comment">/* DESCRIPTION This file contains the most important struct 'BfeServer' of go- bfe and new/init method of the struct.*/</span>
<span class="token keyword">package</span> bfe_server <span class="token keyword">func</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">//BAD:</span>
<span class="token keyword">package</span> bfe_server <span class="token keyword">func</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="33__import__443"></a>3.3 import 规范</h3> 
<ul><li>{RULE025} 需要按照如下顺序进行头文件 import，并且每个 import 部分内的 package 需按照字母升序排列 
  <ul><li>系统 package</li><li>第三方的 package</li><li>程序自己的 package</li></ul> </li><li>{RULE026} 每部分 import 间用单个空行进行分隔</li></ul> 
<p>示例：</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span> 
  <span class="token string">"fmt"</span> 
  <span class="token string">"time"</span>
<span class="token punctuation">)</span> 

<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">"code.google.com/p/log4go"</span>
<span class="token punctuation">)</span> 
<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">"bfe_config/bfe_conf"</span>
  <span class="token string">"bfe_module"</span>
<span class="token punctuation">)</span>

<span class="token comment">//GOOD：</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">"fmt"</span>
  <span class="token string">"time"</span>
  
  <span class="token string">"code.google.com/p/log4go"</span>
  
  <span class="token string">"bfe_config/bfe_conf"</span>
  <span class="token string">"bfe_module"</span>
<span class="token punctuation">)</span> 
<span class="token comment">//BAD： </span>
<span class="token comment">// 同一类 package 内 import 顺序需按字母升序排序</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">"time"</span>
  <span class="token string">"fmt"</span>
<span class="token punctuation">)</span> 
<span class="token comment">// 不同类的 package import 顺序出错（先第三方 package，再程序自己的 package）</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">"bfe_config/bfe_conf"</span>
  <span class="token string">"bfe_module"</span>
<span class="token punctuation">)</span> 
<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token string">"code.google.com/p/log4go"</span>
<span class="token punctuation">)</span> 
<span class="token comment">//BAD：</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
  <span class="token comment">// 同一类 package 内 import 顺序出错</span>
  <span class="token string">"time"</span>
  <span class="token string">"fmt"</span>      
  <span class="token comment">// 不同类的 package import 顺序出错（先第三方 package，再程序自己的 package）   </span>
  <span class="token string">"bfe_config/bfe_conf"</span>
  <span class="token string">"bfe_module"</span>
  <span class="token string">"code.google.com/p/log4go"</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>3.4 Go 函数 Layout</p> 
<p>3.4.1 函数注释</p> 
<ul><li>{ADVICE013} 函数的注释，建议包括以下内容 
  <ul><li>Description：对函数的完整描述，主要包括函数功能和使用方法</li><li>Params：对参数的说明</li><li>Returns：对返回值的说明</li></ul> </li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">/**  
 Init - initialize log lib
 **  PARAMS:
 *  - levelStr: "DEBUG", "TRACE", "INFO", "WARNING", "ERROR", "CRITICAL"
 *  - when: "M", minute*           "H", hour*           "D", day
 *           "MIDNIGHT", roll over at midnight
 *  - backupCount: If backupCount is &gt; 0, when rollover is done, no more than
 *           backupCount files are kept - the oldest ones are deleted.
 **  RETURNS:
 *     nil, if succeed
 *     error, if fail
 **/</span>
<span class="token keyword">func</span> <span class="token function">Init</span><span class="token punctuation">(</span>levelStr <span class="token builtin">string</span><span class="token punctuation">,</span> when <span class="token builtin">string</span><span class="token punctuation">,</span> backupCount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>3.4.2 函数参数和返回值</p> 
<ul><li>{ADVICE014} 对于“逻辑判断型”的函数，返回值的意义代表“真”或“假”，返回值类型定义为 bool</li><li>{ADVICE015} 对于“操作型”的函数，返回值的意义代表“成功”或“失败”，返回值类型定义为 error 
  <ul><li>如果成功，则返回 nil</li><li>如果失败，则返回对应的 error 值</li></ul> </li><li>{ADVICE016} 对于“获取数据型”的函数，返回值的意义代表“有数据”或“无数据/获取数据失败”，返回值类型定义为（data, error） 
  <ul><li>正常情况下，返回为：（data, nil）</li><li>异常情况下，返回为：（data, error）</li></ul> </li><li>{RULE027} 函数返回值小于等于 3 个，大于 3 个时必须通过 struct 进行包装</li><li>{ADVICE017} 函数参数不建议超过 3 个，大于 3 个时建议通过 struct 进行包装</li></ul> 
<p>示例：</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token keyword">type</span> student <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  name     <span class="token builtin">string</span> 
  email     <span class="token builtin">string</span> 
  id        <span class="token builtin">int</span> 
  class <span class="token builtin">string</span>
<span class="token punctuation">}</span> 
<span class="token comment">// bool 作为逻辑判断型函数的返回值</span>
<span class="token keyword">func</span> <span class="token function">isWhiteCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">// error 作为操作型函数的返回值</span>
<span class="token keyword">func</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 利用多返回值的语言特性</span>
<span class="token keyword">func</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>student<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>     
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// BAD：</span>
<span class="token keyword">type</span> student <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  name     <span class="token builtin">string</span> 
  email     <span class="token builtin">string</span> 
  id        <span class="token builtin">int</span> 
  class <span class="token builtin">string</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 使用 int 而非 bool 作为逻辑判断函数的返回值</span>
<span class="token keyword">func</span> <span class="token function">isWhiteCat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 操作型函数没有返回值</span>
<span class="token keyword">func</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 没有充分利用 go 多返回值的特点</span>
<span class="token keyword">func</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> student <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 返回值&gt;3</span>
<span class="token keyword">func</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="35___596"></a>3.5 程序规模</h3> 
<ul><li>{RULE028} 每行代码不超过 100 个字符。</li><li>{RULE029} 每行注释不超过 100 个字符。</li><li>{ADVICE018} 函数不超过 100 行。</li><li>{ADVICE019} 文件不超过 2000 行。</li></ul> 
<p>解释</p> 
<ul><li>现在宽屏比较流行，所以从传统的 80 个字符限制扩展到 100 个字符</li><li>函数/文件太长一般说明函数定义不明确/程序结构划分不合理，不利于维护</li></ul> 
<h3><a id="36___608"></a>3.6 命名规范</h3> 
<p>3.6.1 文件名</p> 
<ul><li>{RULE030} 文件名都使用小写字母，如果需要，可以使用下划线分割</li><li>{RULE031} 文件名的后缀使用小写字母</li></ul> 
<p>示例：</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD： </span>
<span class="token comment">// 可以使用下划线分割文件名web_server.go </span>
<span class="token comment">// 文件名全部小写http.go </span>
<span class="token comment">//BAD： </span>
<span class="token comment">// 文件名不允许出现大写字符webServer.go </span>
<span class="token comment">// 文件名后缀不允许出现大写字符http.GO</span>
</code></pre> 
<p>3.6.2 函数名/变量名</p> 
<ul><li>{RULE032} 采用驼峰方式命名，禁止使用下划线命名。首字母是否大写，根据是否需要外部访问来决定</li></ul> 
<p>示例：</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD： </span>
<span class="token comment">// 本 package 可以访问的函数</span>
<span class="token keyword">func</span> <span class="token function">innerFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 其余 package 可以访问的函数</span>
<span class="token keyword">func</span> <span class="token function">OuterFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">//BAD： // 禁止用下划线分割</span>
<span class="token keyword">func</span> <span class="token function">inner_Func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token keyword">var</span> srv_name <span class="token builtin">string</span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">// 禁止用下划线分割 </span>
<span class="token comment">// 其余 package 可以访问的函数</span>
<span class="token keyword">func</span> <span class="token function">Outer_Func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>3.6.3 常量</p> 
<ul><li>{ADVICE020} 建议都使用大写字母，如果需要，可以使用下划线分割</li><li>{ADVICE021} 尽量不要在程序中直接写数字，特殊字符串，全部用常量替代</li></ul> 
<p>解释</p> 
<ul><li>go 标准库中常量也有驼峰的命名方式，故这里不做强制限制。</li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD： </span>
<span class="token comment">// 大写字母</span>
<span class="token keyword">const</span> METHOD <span class="token operator">=</span> <span class="token string">"Get"</span> 
<span class="token comment">// 下划线分割</span>
<span class="token keyword">const</span> HEADER_USER_AGENT <span class="token operator">=</span> <span class="token string">"User-Agent"</span> 
<span class="token comment">// go 标准库中的命名方式</span>
<span class="token keyword">const</span> defaultUserAgent <span class="token operator">=</span> <span class="token string">"Go 1.1 package http"</span> 
<span class="token comment">//BAD： </span>
<span class="token comment">// 全部为下划线分割的小写字母</span>
<span class="token keyword">const</span> header_user_agent <span class="token operator">=</span> <span class="token string">"User-Agent"</span>
</code></pre> 
<p>3.6.4 缩写词</p> 
<ul><li>{RULE033} 缩写词要保持命名的一致性。 
  <ul><li>同一变量字母大小写的一致性</li><li>不同变量间的一致性</li></ul> </li></ul> 
<p>示例：</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token keyword">var</span> URL <span class="token builtin">string</span> 
<span class="token keyword">var</span> ID <span class="token builtin">int</span>
<span class="token keyword">var</span> appID <span class="token builtin">int</span> 
<span class="token keyword">type</span> ServeURL <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
<span class="token comment">//BAD：</span>
<span class="token keyword">var</span> Url <span class="token builtin">string</span> 
<span class="token comment">// not consistent</span>
<span class="token keyword">var</span> ID <span class="token builtin">int</span>
<span class="token keyword">var</span> appid <span class="token builtin">int</span> 
<span class="token keyword">type</span> ServUrl <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="37___718"></a>3.7 缩进</h3> 
<ul><li>{RULE034} 使用 tab 进行缩进。</li><li>{RULE035} 跨行的缩进使用 gofmt 的缩进方式。</li><li>{RULE036} 设置 tabstop=4</li></ul> 
<p>解释</p> 
<ul><li>要求设置 tabstop=4 是考虑到不同编辑器跨行字符串对齐显示的一致性</li></ul> 
<h3><a id="38___728"></a>3.8 空格</h3> 
<ul><li>{RULE037} 圆括号、方括号、花括号内侧都不加空格</li><li>{RULE038} 逗号、冒号（slice 中冒号除外）前不加空格，后边加一个空格</li><li>{RULE039} 所有二元运算符前后各加一个空格（作为函数参数时除外）</li></ul> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span> 
  s <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> 
<span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{<!-- --></span><span class="token string">"language"</span><span class="token punctuation">:</span> <span class="token string">"golang"</span><span class="token punctuation">}</span> 
  r <span class="token operator">:=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> 
  <span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span> 
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token string">"language"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> 
<span class="token comment">//BAD：</span>
<span class="token keyword">var</span> <span class="token punctuation">(</span> s <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token keyword">func</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{<!-- --></span> <span class="token string">"language"</span> <span class="token punctuation">:</span> <span class="token string">"golang"</span> <span class="token punctuation">}</span> 
  r <span class="token operator">:=</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span> 
  <span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> 
  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span> <span class="token string">"language"</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="39___757"></a>3.9 括号</h3> 
<ul><li>{ADVICE022} 除非用于明确算术表达式优先级，否则尽量避免冗余的括号</li></ul> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token keyword">if</span> x <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span> 
<span class="token keyword">func</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token keyword">var</span> num <span class="token builtin">int</span> 
  <span class="token keyword">return</span> num
<span class="token punctuation">}</span> 
<span class="token comment">//BAD：</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  
<span class="token punctuation">}</span>
<span class="token keyword">func</span> func1 <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token keyword">var</span> num <span class="token builtin">int</span> 
  <span class="token keyword">return</span> <span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="310___782"></a>3.10 注释</h3> 
<ul><li>{ADVICE023} 单行注释，采取"//“或者”/<em>…</em>/"的注释方式。</li><li>{ADVICE024} 多行注释，采取每行开头“//“或者用”/* … <em>/“包括起来的注释（”/</em>“和”*/"作为独立的行）</li><li>{ADVICE025} 紧跟在代码之后的注释，使用"//"</li></ul> 
<p>解释</p> 
<ul><li>大多数情况下，使用”//"更方便</li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD: </span>
<span class="token comment">/* This is the correct format for a single-line comment */</span> 
<span class="token comment">// This is the correct format for a single-line comment </span>
<span class="token comment">/**  This is the correct format for a multiline comment*  in a section of code.*/</span> 
<span class="token comment">// This is the correct format for a multiline comment </span>
<span class="token comment">// in a section of code. var a int </span>
<span class="token comment">// this is the correct format for a        </span>
<span class="token comment">// multiline comment in a declaration  </span>
<span class="token comment">//BAD： </span>
<span class="token comment">/* This is an incorrect format for a multiline comment*  in a section of code.*/</span> 
<span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token comment">/* this is an incorrect comment format */</span>
</code></pre> 
<h2><a id="4___810"></a>4. 编程实践</h2> 
<h3><a id="41__error_string_812"></a>4.1 error string</h3> 
<ul><li>{ADVICE026} error string 尽量使用小写字母，并且结尾不带标点符号解释</li><li>因为可能 error string 会用于其它上下文中示例</li></ul> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"something bad"</span><span class="token punctuation">)</span> 

<span class="token comment">//BAD：</span>
fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Something bad"</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="42__Dont_panic_Do_Recover_827"></a>4.2 Don’t panic, Do Recover</h3> 
<ul><li>{RULE040} 除非出现不可恢复的程序错误，不要使用 panic，用多返回值和 error。</li><li>{RULE041} 避免大量使用Recover，在比较重要的代码中增加 recover 代码，将错误截获到并自己处理，如gin框架中Render数据的时候会抛出panic，这时候需要捕获panic，避免服务宕机</li></ul> 
<h3><a id="43___lock__832"></a>4.3 关于 lock 的保护</h3> 
<ul><li> <p>{ADVICE026} 如果临界区内的逻辑较复杂、无法完全避免 panic 的发生，则要求适用 defer 来调用Unlock，即使在临界区过程中发生了 panic，也会在函数退出时调用 Unlock 释放锁</p> <p>解释：go 提供了 recover，可以对 panic 进行捕获，但如果 panic 发生在临界区内，则可能导致对锁的使用没有释放</p> </li></ul> 
<p>​ 这种情况下，即使 panic 不会导致整个程序的奔溃，也会由于”锁不释放“的问题而使临界区无法被后续的调用访问</p> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">//GOOD：</span>
<span class="token keyword">func</span> <span class="token function">doDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token keyword">defer</span> lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// 访问临界区</span>
<span class="token punctuation">}</span> 
<span class="token comment">//BAD:</span>
<span class="token keyword">func</span> <span class="token function">doDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// 访问临近区 </span>
  lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li> <p>{ADVICE027} 上述操作如果造成临界区扩大后，需要建立单独的一个函数访问临界区。</p> <p>对于如下的代码：</p> </li></ul> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">doDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// step1: 临界区内的操作 </span>
  lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// step2: 临界区外的操作</span>
<span class="token punctuation">}</span> 
<span class="token comment">//如果改造为 defer 的方式，变为如下代码，实际上扩大了临界区的范围（step2 的操作也被放置在临界区了）</span>
<span class="token keyword">func</span>  <span class="token function">doDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token keyword">defer</span>  lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// step1: 临界区内的操作 </span>
  <span class="token comment">// step2: 临界区外的操作</span>
<span class="token punctuation">}</span> 
  <span class="token comment">//优化：需要使用单独的匿名函数，专门用于访问临界区：</span>
<span class="token keyword">func</span>  <span class="token function">doDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>        
    lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        
    <span class="token keyword">defer</span> lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         
    <span class="token comment">// step1: 临界区内的操作操作 </span>
  <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// step2: 临界区外的操作</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="44___890"></a>4.4 日志的处理</h3> 
<ul><li>{ADVICE028} 日志打印会损耗性能，在关键节点上打印信息，区分Warn和Error，强制需要立即报错的使用Error，Warn用于一段时间内累计的错误报警</li></ul> 
<h3><a id="45__unsafe_package_894"></a>4.5 unsafe package</h3> 
<ul><li>{ADVICE029} 除非特殊原因，不建议使用 unsafe package 
  <ul><li>比如进行指针和数值 uintptr 之间转换就是一个特殊原因</li><li>临时变量使用，并且内存占用很大，代码逻辑上不会修改和传入未知的三方包进行任何的修改和访问，如string和[]byte的转换，go-common基础组件中封装utils/extend方法，用于操作这类情况的处理，具体使用看业务场景</li></ul> </li></ul> 
<p>示例</p> 
<pre><code class="prism language-go"><span class="token comment">// ToString 把 []byte 转换为 string 没有多余的内存开销。 </span>
<span class="token comment">// 使用该方法需要了解到 []byte 将和 string 公用一块内存， 修改 []byte 的数据将导致 string 发生变化， </span>
<span class="token comment">// 这打破了字符串不可以修改的特性，如果你恰恰需要这么做，可能非常的有用。 </span>
<span class="token comment">// 要保证字符串不可变的特性，就必须保证 []byte 不会发生变化，或者立即消费 string,</span>
<span class="token keyword">func</span> <span class="token function">ToString</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> 
<span class="token comment">//使用该函数要明确两个事情： </span>
<span class="token comment">//  - 确定字符串是否是字面量，或者内存被分配在只读空间上。 </span>
<span class="token comment">//  - 确保访问该函数结果的函数是否会按照你的意愿访问或修改数据。</span>
<span class="token keyword">func</span> <span class="token function">UnsafeToBytes</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span> <span class="token punctuation">{<!-- --></span> 
  strHeader <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">*</span>reflect<span class="token punctuation">.</span>StringHeader<span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> 
  <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>reflect<span class="token punctuation">.</span>SliceHeader<span class="token punctuation">{<!-- --></span> 
    Data<span class="token punctuation">:</span> strHeader<span class="token punctuation">.</span>Data<span class="token punctuation">,</span> 
    Len<span class="token punctuation">:</span> strHeader<span class="token punctuation">.</span>Len<span class="token punctuation">,</span> 
    Cap<span class="token punctuation">:</span> strHeader<span class="token punctuation">.</span>Len<span class="token punctuation">,</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="46__Golang_925"></a>4.6 避免Golang函数传参引发的值拷贝</h3> 
<ul><li>{RULE042} 遵守 2.2 receiver 规则，对于大字符串，使用指针传参，对于大的struct切片，使用[]*struct声明使用方式，避免拷贝</li></ul> 
<h3><a id="47___929"></a>4.7 业务代码中禁止使用直接开协程，管道</h3> 
<ul><li> <p>{RULE043} 业务代码中禁止直接使用go关键字，避免启动的协程不可控，使用 go-common 包提供的协程池进行相关的操作，限制收敛协程的数量，协程池使用说明：[gouroutine使用说明]</p> </li><li> <p>{RULE044} 业务代码中禁止使用chan管道，避免造成死锁和性能损失，有需要使用管道的地方，向基础组件同学提相关的需求</p> </li></ul> 
<h3><a id="48__Slice_937"></a>4.8 Slice使用的注意事项</h3> 
<ul><li> <p>{RULE045} 使用常量值做为slice的索引取值时，要注意越界问题，需要判断len(arr) &gt; index</p> </li><li> <p>{RULE046} 了解slice的append底层原理，容量不够时会另开空间，在函数传递时使用slice，注意函数内部使用append后，另开空间，函数外层无感知</p> </li></ul> 
<h3><a id="49___945"></a>4.9 类型断言</h3> 
<ul><li>{RULE047} 对interface进行类型的断言时，必须先进行判断</li></ul> 
<pre><code class="prism language-go"></code></pre> 
<h3><a id="410___952"></a>4.10 代码复用及抽象化设计</h3> 
<ul><li>{ADVICE030}进行代码复用，提炼抽象公共模块设计实现复杂功能</li></ul> 
<p>BAD：</p> 
<pre><code class="prism language-go"></code></pre> 
<h3><a id="411___961"></a>4.11 定义静态变量替换代码硬编码</h3> 
<ul><li>{RULE}多定义静态变量，取代代码中的硬编码，增强代码的可以阅读性，</li></ul> 
<pre><code class="prism language-go"><span class="token comment">//GOOD:</span>
<span class="token keyword">type</span> cacheLevel <span class="token builtin">int</span>
<span class="token keyword">const</span> <span class="token punctuation">(</span> 
  <span class="token comment">//多级缓存开启策略配置 </span>
  USE_ONLY_STORED cacheLevel <span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment">//仅仅开启第二层stored分布式缓存，关闭第三层redis缓存 </span>
  USE_ONLY_REDIS  cacheLevel <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment">//仅仅开启第三层redis缓存，关闭第二层stored分布式缓存 </span>
  USE_STORED_REDIS cacheLevel <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">//开启第二层stored，第三层redis缓存</span>
<span class="token punctuation">)</span> 
<span class="token keyword">if</span> level <span class="token operator">==</span> USE_ONLY_STORED <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">//...</span>
<span class="token punctuation">}</span> 
<span class="token comment">//BAD: </span>
<span class="token keyword">if</span> level <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="412__985"></a>4.12 这份文档存在的意义是让大家写出统一风格的代码，让模块可维护性和可读性更好；</h3>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3d830a3df4dff954d8b243a0d6c7b30d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">n平方的求和公式_求∑n^2的求和公式，谢谢</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0d81a23dfd77af5d79db94afb14f65b7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">怎么冻结表格前几行和前几列_如何冻结表格前几列</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
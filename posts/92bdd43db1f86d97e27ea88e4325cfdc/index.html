<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>çˆ¬è™«å®æˆ˜ï¼šä»å¤–åœ°å¤©æ°”åˆ°ç¾é£Ÿæ¨èï¼Œæ¢ç´¢å¹²é¥­äººçš„ä¸–ç•Œ - ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="çˆ¬è™«å®æˆ˜ï¼šä»å¤–åœ°å¤©æ°”åˆ°ç¾é£Ÿæ¨èï¼Œæ¢ç´¢å¹²é¥­äººçš„ä¸–ç•Œ" />
<meta property="og:description" content="ä»Šå¤©æ˜¯ç¬¬äºŒå ‚è¯¾ï¼Œæˆ‘ä»¬å°†ç»§ç»­å­¦ä¹ çˆ¬è™«æŠ€æœ¯ã€‚åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚ä½•çˆ¬å–å¹²é¥­æ•™ç¨‹ã€‚æ­£å¦‚é²è¿…æ‰€è¯´ï¼ˆæˆ‘æ²¡è¯´è¿‡ï¼‰ï¼Œå½“åœ°åƒå®Œé¥­å°±å»å¤–åœ°åƒï¼Œè¿™å¯å‘äº†æˆ‘å»çˆ¬å–åŸå¸‚å¤©æ°”ä¿¡æ¯ï¼Œå¹¶é¡ºä¾¿äº†è§£å½“åœ°ç¾é£Ÿã€‚è¿™ä¸ªæƒ³æ³•æ°¸è¿œæ˜¯å¹²é¥­äººçš„çµé­‚æ‰€åœ¨ã€‚
ä»Šå¤©æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å­¦ä¹ å¦‚ä½•çˆ¬å–åŸå¸‚å¤©æ°”ä¿¡æ¯ï¼Œå› ä¸ºè¦è®¡åˆ’å»å“ªé‡Œç©è€ï¼Œé¦–å…ˆå¾—äº†è§£å¤©æ°”æƒ…å†µã€‚è™½ç„¶æˆ‘ä»¬çš„æ‰‹æœºå·²ç»è£…æœ‰è®¸å¤šå…è´¹å¤©æ°”è½¯ä»¶ï¼Œä½†æ˜¯ä¹Ÿä¸å¦¨ç¢æˆ‘ä»¬å­¦ä¹ ã€‚
åœ¨æˆ‘ä»¬å¼€å§‹å­¦ä¹ çˆ¬è™«æŠ€æœ¯ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°ä¸€ä¸ªå®¹æ˜“çˆ¬å–æ•°æ®çš„å¤©æ°”ç½‘ç«™ã€‚å¹¶ä¸è¦æ±‚ç‰¹å®šç½‘ç«™ï¼Œåªè¦æ˜“äºçˆ¬å–çš„ç½‘ç«™å³å¯ã€‚æ¯•ç«Ÿæˆ‘ä»¬ç›®å‰å¹¶ä¸éœ€è¦çˆ¬å–ç‰¹å®šç½‘ç«™æ¥æŠ¢ç¥¨æˆ–æŠ¢è´­å•†å“ï¼Œæˆ‘ä»¬çš„ä¸»è¦ç›®çš„æ˜¯å­¦ä¹ çˆ¬è™«æŠ€æœ¯ã€‚
å¤©æ°”çˆ¬è™« åœ¨è¿›è¡Œçˆ¬è™«æ“ä½œæ—¶ï¼Œå¦‚æœä¸ç¡®å®šä¸€ä¸ªç½‘ç«™æ˜¯å¦æ˜“äºçˆ¬å–ï¼Œå¯ä»¥å…ˆå°è¯•è¾“å…¥è¯¥ç½‘ç«™çš„é¦–é¡µåœ°å€ï¼ŒæŸ¥çœ‹èƒ½å¦æˆåŠŸè§£æå‡ºHTMLç½‘é¡µã€‚å¦‚æœè§£æå‡ºæ¥çš„é¡µé¢ä¸å®é™…æµè§ˆçš„é¡µé¢ä¸€è‡´ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥ç½‘ç«™å¯èƒ½æ²¡æœ‰è®¾ç½®åçˆ¬è™«æœºåˆ¶ï¼›åä¹‹ï¼Œå¦‚æœè§£æå‡ºæ¥çš„é¡µé¢ä¸å®é™…ä¸åŒï¼Œé‚£ä¹ˆè¯¥ç½‘ç«™å¾ˆå¯èƒ½è®¾ç½®äº†åçˆ¬è™«æªæ–½ã€‚åœ¨å­¦ä¹ é˜¶æ®µï¼Œå»ºè®®é€‰æ‹©è¾ƒä¸ºå®¹æ˜“çˆ¬å–çš„ç½‘ç«™è¿›è¡Œç»ƒä¹ ï¼Œé¿å…è¿‡æ—©æŒ‘æˆ˜éš¾åº¦è¿‡å¤§çš„ç½‘ç«™ã€‚
å¥½çš„ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç°åœ¨å°±å¼€å§‹æŠ“å–è¯¥ç½‘ç«™ä¸Šçš„æ‰€æœ‰åŸå¸‚ä¿¡æ¯ã€‚
åŸå¸‚åˆ—è¡¨ å¤©æ°”ä¿¡æ¯è‚¯å®šä¸åŸå¸‚ç›¸å…³ï¼Œå› æ­¤å‡ ä¹æ¯ä¸ªå¤©æ°”ç½‘ç«™éƒ½ä¼šæœ‰åŸå¸‚åˆ—è¡¨ã€‚è®©æˆ‘ä»¬å…ˆæ¥æŠ“å–è¿™äº›åŸå¸‚åˆ—è¡¨å¹¶ä¿å­˜èµ·æ¥ï¼Œä»¥å¤‡åç»­ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ç›¸åº”çš„ä»£ç ï¼š
# å¯¼å…¥urllibåº“çš„urlopenå‡½æ•° from urllib.request import urlopen,Request # å¯¼å…¥BeautifulSoup from bs4 import BeautifulSoup as bf headers = {&#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0&#39;} req = Request(&#34;https://www.tianqi.com/chinacity.html&#34;,headers=headers) # å‘å‡ºè¯·æ±‚ï¼Œè·å–html # è·å–çš„htmlå†…å®¹æ˜¯å­—èŠ‚ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸² html = urlopen(req) html_text = bytes.decode(html.read()) obj = bf(html_text,&#39;html.parser&#39;) # ä½¿ç”¨find_allå‡½æ•°è·å–æ‰€æœ‰å›¾ç‰‡çš„ä¿¡æ¯ province_tags = obj.find_all(&#39;h2&#39;) for province_tag in province_tags: province_name = province_tag.text.strip() cities = [] print(province_name) next_sibling = province_tag." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/92bdd43db1f86d97e27ea88e4325cfdc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-14T09:34:24+08:00" />
<meta property="article:modified_time" content="2024-03-14T09:34:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">çˆ¬è™«å®æˆ˜ï¼šä»å¤–åœ°å¤©æ°”åˆ°ç¾é£Ÿæ¨èï¼Œæ¢ç´¢å¹²é¥­äººçš„ä¸–ç•Œ</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>ä»Šå¤©æ˜¯ç¬¬äºŒå ‚è¯¾ï¼Œæˆ‘ä»¬å°†ç»§ç»­å­¦ä¹ çˆ¬è™«æŠ€æœ¯ã€‚åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚ä½•çˆ¬å–å¹²é¥­æ•™ç¨‹ã€‚æ­£å¦‚é²è¿…æ‰€è¯´ï¼ˆæˆ‘æ²¡è¯´è¿‡ï¼‰ï¼Œå½“åœ°åƒå®Œé¥­å°±å»å¤–åœ°åƒï¼Œè¿™å¯å‘äº†æˆ‘å»çˆ¬å–åŸå¸‚å¤©æ°”ä¿¡æ¯ï¼Œå¹¶é¡ºä¾¿äº†è§£å½“åœ°ç¾é£Ÿã€‚è¿™ä¸ªæƒ³æ³•æ°¸è¿œæ˜¯å¹²é¥­äººçš„çµé­‚æ‰€åœ¨ã€‚</p> 
<p>ä»Šå¤©æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å­¦ä¹ å¦‚ä½•çˆ¬å–åŸå¸‚å¤©æ°”ä¿¡æ¯ï¼Œå› ä¸ºè¦è®¡åˆ’å»å“ªé‡Œç©è€ï¼Œé¦–å…ˆå¾—äº†è§£å¤©æ°”æƒ…å†µã€‚è™½ç„¶æˆ‘ä»¬çš„æ‰‹æœºå·²ç»è£…æœ‰è®¸å¤šå…è´¹å¤©æ°”è½¯ä»¶ï¼Œä½†æ˜¯ä¹Ÿä¸å¦¨ç¢æˆ‘ä»¬å­¦ä¹ ã€‚</p> 
<p>åœ¨æˆ‘ä»¬å¼€å§‹å­¦ä¹ çˆ¬è™«æŠ€æœ¯ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°ä¸€ä¸ªå®¹æ˜“çˆ¬å–æ•°æ®çš„å¤©æ°”ç½‘ç«™ã€‚å¹¶ä¸è¦æ±‚ç‰¹å®šç½‘ç«™ï¼Œåªè¦æ˜“äºçˆ¬å–çš„ç½‘ç«™å³å¯ã€‚æ¯•ç«Ÿæˆ‘ä»¬ç›®å‰å¹¶ä¸éœ€è¦çˆ¬å–ç‰¹å®šç½‘ç«™æ¥æŠ¢ç¥¨æˆ–æŠ¢è´­å•†å“ï¼Œæˆ‘ä»¬çš„ä¸»è¦ç›®çš„æ˜¯å­¦ä¹ çˆ¬è™«æŠ€æœ¯ã€‚</p> 
<h2><a id="_8"></a>å¤©æ°”çˆ¬è™«</h2> 
<p>åœ¨è¿›è¡Œçˆ¬è™«æ“ä½œæ—¶ï¼Œå¦‚æœä¸ç¡®å®šä¸€ä¸ªç½‘ç«™æ˜¯å¦æ˜“äºçˆ¬å–ï¼Œå¯ä»¥å…ˆå°è¯•è¾“å…¥è¯¥ç½‘ç«™çš„é¦–é¡µåœ°å€ï¼ŒæŸ¥çœ‹èƒ½å¦æˆåŠŸè§£æå‡ºHTMLç½‘é¡µã€‚å¦‚æœè§£æå‡ºæ¥çš„é¡µé¢ä¸å®é™…æµè§ˆçš„é¡µé¢ä¸€è‡´ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥ç½‘ç«™å¯èƒ½æ²¡æœ‰è®¾ç½®åçˆ¬è™«æœºåˆ¶ï¼›åä¹‹ï¼Œå¦‚æœè§£æå‡ºæ¥çš„é¡µé¢ä¸å®é™…ä¸åŒï¼Œé‚£ä¹ˆè¯¥ç½‘ç«™å¾ˆå¯èƒ½è®¾ç½®äº†åçˆ¬è™«æªæ–½ã€‚åœ¨å­¦ä¹ é˜¶æ®µï¼Œå»ºè®®é€‰æ‹©è¾ƒä¸ºå®¹æ˜“çˆ¬å–çš„ç½‘ç«™è¿›è¡Œç»ƒä¹ ï¼Œé¿å…è¿‡æ—©æŒ‘æˆ˜éš¾åº¦è¿‡å¤§çš„ç½‘ç«™ã€‚</p> 
<p>å¥½çš„ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç°åœ¨å°±å¼€å§‹æŠ“å–è¯¥ç½‘ç«™ä¸Šçš„æ‰€æœ‰åŸå¸‚ä¿¡æ¯ã€‚</p> 
<h3><a id="_15"></a>åŸå¸‚åˆ—è¡¨</h3> 
<p>å¤©æ°”ä¿¡æ¯è‚¯å®šä¸åŸå¸‚ç›¸å…³ï¼Œå› æ­¤å‡ ä¹æ¯ä¸ªå¤©æ°”ç½‘ç«™éƒ½ä¼šæœ‰åŸå¸‚åˆ—è¡¨ã€‚è®©æˆ‘ä»¬å…ˆæ¥æŠ“å–è¿™äº›åŸå¸‚åˆ—è¡¨å¹¶ä¿å­˜èµ·æ¥ï¼Œä»¥å¤‡åç»­ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ç›¸åº”çš„ä»£ç ï¼š</p> 
<pre><code># å¯¼å…¥urllibåº“çš„urlopenå‡½æ•°
from urllib.request import urlopen,Request
# å¯¼å…¥BeautifulSoup
from bs4 import BeautifulSoup as bf

headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0'}
req = Request("https://www.tianqi.com/chinacity.html",headers=headers)
# å‘å‡ºè¯·æ±‚ï¼Œè·å–html
# è·å–çš„htmlå†…å®¹æ˜¯å­—èŠ‚ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
html = urlopen(req)
html_text = bytes.decode(html.read())
obj = bf(html_text,'html.parser')
# ä½¿ç”¨find_allå‡½æ•°è·å–æ‰€æœ‰å›¾ç‰‡çš„ä¿¡æ¯
province_tags = obj.find_all('h2')
for province_tag in province_tags:
    province_name = province_tag.text.strip()
    cities = []
    print(province_name)
    next_sibling = province_tag.find_next_sibling()
    city_tags = next_sibling.find_all('a')
    for city_tag in city_tags:
        city_name = city_tag.text.strip()
        cities.append(city_name)
        print(city_name)

</code></pre> 
<p>åœ¨ä¸Šè¿°æ“ä½œä¸­ï¼Œä¸»è¦çš„æ­¥éª¤æ˜¯ä»åŸå¸‚åœ°å€é¡µé¢ä¸­è·å–ä¿¡æ¯ï¼Œå¯¹å…¶è¿›è¡Œè§£æä»¥è·å–çœä»½å’ŒåŸå¸‚ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚ç›®å‰ä»…ä»…è¿›è¡Œäº†ç®€å•çš„æ‰“å°è¾“å‡ºã€‚</p> 
<h3><a id="_50"></a>åŸå¸‚å¤©æ°”</h3> 
<p>åœ¨è·å–åŸå¸‚ä¿¡æ¯ä¹‹åï¼Œæ¥ä¸‹æ¥çš„æ­¥éª¤æ˜¯æ ¹æ®åŸå¸‚ä¿¡æ¯è·å–å¤©æ°”ä¿¡æ¯ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»…è€ƒè™‘ç›´è¾–å¸‚çš„å¤©æ°”æƒ…å†µï¼Œè€Œçœä»½çš„å¤©æ°”ä¿¡æ¯è·å–ç›¸æ¯”ç›´è¾–å¸‚å¤šäº†ä¸€æ­¥çœä»½çš„è·³è½¬ã€‚æˆ‘ä»¬æš‚æ—¶ä¸è¿›è¡Œçœä»½å¤©æ°”ä¿¡æ¯çš„æ¼”ç¤ºã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ä»£ç ï¼š</p> 
<pre><code># å¯¼å…¥urllibåº“çš„urlopenå‡½æ•°
from urllib.request import urlopen,Request
# å¯¼å…¥BeautifulSoup
from bs4 import BeautifulSoup as bf

headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0'}
req = Request(f"https://www.tianqi.com/beijing/",headers=headers)
# å‘å‡ºè¯·æ±‚ï¼Œè·å–html
# è·å–çš„htmlå†…å®¹æ˜¯å­—èŠ‚ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
html = urlopen(req)
html_text = bytes.decode(html.read())
obj = bf(html_text,'html.parser')
city_tags = obj.find_all('div',class_='mainWeather')
for city_tag in city_tags:
    a_tags = city_tag.find_all('a', class_=lambda value: value != 'd15')
    for a_tag in a_tags:
        title = a_tag.get('title')
        print(title)
foods = obj.find_all('ul',class_='paihang_good_food')
for food in foods:
    a_tags = food.find_all('a')
    for a_tag in a_tags:
        href = a_tag.get('href')
        print(href)
        title = a_tag.get('title')
        print(title)
weather_info = obj.find_all('dl', class_='weather_info')
for info in weather_info:
    city_name = info.find('h1').text
    date = info.find('dd', class_='week').text
    temperature = info.find('p', class_='now').text
    humidity = info.find('dd', class_='shidu').text
    air_quality = info.find('dd', class_='kongqi').h5.text
    print(f"åœ°ç‚¹:{city_name}")
    print(f"æ—¶é—´:{date}")
    print(f"å½“å‰æ¸©åº¦:{temperature}")
    print(humidity)
    print(air_quality)   

</code></pre> 
<p>ä»¥ä¸Šä»£ç ä¸ä»…ä»…æŠŠå¤©æ°”è§£æå‡ºæ¥ï¼Œè€Œä¸”å°†å½“å‰åœ°å€çš„å¤©æ°”å’Œå„ä¸ªåŸåŒº çš„å¤©æ°”ä»¥åŠå½“åœ°ç¾é£Ÿéƒ½è§£æäº†å‡ºæ¥ã€‚å½“åœ°ç¾é£Ÿå› ä¸ºé“¾æ¥æ˜¯å˜åŠ¨çš„ï¼Œæ‰€ä»¥å°†é“¾æ¥å’Œç¾é£Ÿåšäº†å“åº”çš„æ˜ å°„å…³ç³»ä¿å­˜ã€‚</p> 
<h3><a id="_99"></a>åŸå¸‚ç¾é£Ÿ</h3> 
<p>åœ¨ç¡®å®šå¤©æ°”é€‚å®œçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½ä¼šæƒ³äº†è§£å½“åœ°æœ‰å“ªäº›ç‰¹è‰²ç¾é£Ÿï¼Œæ¯•ç«Ÿä¸èƒ½æ€»æ˜¯åƒå¿«é¤ï¼Œç‰¹è‰²ç¾é£Ÿæ‰æ˜¯æˆ‘ä»¬åƒè´§çš„çµé­‚æ‰€åœ¨ã€‚</p> 
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š</p> 
<pre><code># å¯¼å…¥urllibåº“çš„urlopenå‡½æ•°
from urllib.request import urlopen,Request
# å¯¼å…¥BeautifulSoup
from bs4 import BeautifulSoup as bf

headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0'}
req = Request(f"https://www.tianqi.com/meishi/1737.html",headers=headers)
# å‘å‡ºè¯·æ±‚ï¼Œè·å–html
# è·å–çš„htmlå†…å®¹æ˜¯å­—èŠ‚ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
html = urlopen(req)
html_text = bytes.decode(html.read())
obj = bf(html_text,'html.parser')
span_tag = obj.find('span', class_='traffic')
text_content = ''.join(span_tag.stripped_strings)
print(text_content)

</code></pre> 
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä¸»è¦è§£æäº†å½“å‰ç¾é£Ÿæ¨èçš„åŸå› ã€‚å®é™…ä¸Šï¼Œé“¾æ¥åº”è¯¥ä¸ä¹‹å‰è§£æçš„å¤©æ°”ä¿¡æ¯ç›¸å…³è”ï¼Œä½†ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œæˆ‘åœ¨ç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨äº†å›ºå®šå€¼ã€‚</p> 
<h2><a id="_127"></a>åŒ…è£…ä¸€ä¸‹</h2> 
<p>å°†ä»¥ä¸Šå†…å®¹å•ç‹¬åˆ¶ä½œæˆå°æ¡ˆä¾‹ç¡®å®æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹å¼ï¼Œä½†å°†å…¶æ•´åˆæˆä¸€ä¸ªç®€å•çš„å°åº”ç”¨åˆ™æ›´å…·å®ç”¨æ€§ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥å®ç°æ›´çµæ´»çš„äº¤äº’ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹æœ€ç»ˆçš„ä»£ç ï¼š</p> 
<pre><code># å¯¼å…¥urllibåº“çš„urlopenå‡½æ•°
from urllib.request import urlopen,Request
import urllib,string
# å¯¼å…¥BeautifulSoup
from bs4 import BeautifulSoup as bf
from random import choice,sample
from colorama import init
from os import system
from termcolor import colored
from readchar import  readkey
from xpinyin import Pinyin

p = Pinyin()

city_province_mapping = []

province_sub_weather = []

good_foods = []
FGS = ['green', 'yellow', 'blue', 'cyan', 'magenta', 'red']

def clear():
    system("CLS")

def get_city_province_mapping():
    print(colored('å¼€å§‹æœç´¢åŸå¸‚',choice(FGS)))
    headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0'}
    req = Request("https://www.tianqi.com/chinacity.html",headers=headers)
    # å‘å‡ºè¯·æ±‚ï¼Œè·å–html
    # è·å–çš„htmlå†…å®¹æ˜¯å­—èŠ‚ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
    html = urlopen(req)
    html_text = bytes.decode(html.read())
    obj = bf(html_text,'html.parser')
    # ä½¿ç”¨find_allå‡½æ•°è·å–æ‰€æœ‰å›¾ç‰‡çš„ä¿¡æ¯
    province_tags = obj.find_all('h2')
    for province_tag in province_tags:
        province_name = province_tag.text.strip()
        cities = []

        next_sibling = province_tag.find_next_sibling()
        city_tags = next_sibling.find_all('a')
        for city_tag in city_tags:
            city_name = city_tag.text.strip()
            cities.append(city_name)

        city_province_mapping.append((province_name,cities))

def get_province_weather(province):
    print(colored(f'å·²é€‰æ‹©ï¼š{province}',choice(FGS)))
    headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0'}
    req = Request(f"https://www.tianqi.com/{province}/",headers=headers)
    # å‘å‡ºè¯·æ±‚ï¼Œè·å–html
    # è·å–çš„htmlå†…å®¹æ˜¯å­—èŠ‚ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
    html = urlopen(req)
    html_text = bytes.decode(html.read())
    obj = bf(html_text,'html.parser')
    city_tags = obj.find_all('div',class_='mainWeather')
    # city_tags = obj.find_all('ul',class_='raweather760')
    province_sub_weather.clear()
    print(colored('è§£æä¸»è¦åŸå¸‚ä¸­',choice(FGS)))
    for city_tag in city_tags:
        a_tags = city_tag.find_all('a', class_=lambda value: value != 'd15')
        for a_tag in a_tags:
            title = a_tag.get('title')
            province_sub_weather.append(title)
    foods = obj.find_all('ul',class_='paihang_good_food')
    print(colored('è§£æçƒ­æœç¾é£Ÿä¸­',choice(FGS)))
    for food in foods:
        a_tags = food.find_all('a')
        for a_tag in a_tags:
            href = a_tag.get('href')
            title = a_tag.get('title')
            good_foods.append((href, title))
    weather_info = obj.find_all('dl', class_='weather_info')
    print(colored('è§£æå®Œæ¯•',choice(FGS)))
    for info in weather_info:
        city_name = info.find('h1').text
        date = info.find('dd', class_='week').text
        temperature = info.find('p', class_='now').text
        humidity = info.find('dd', class_='shidu').text
        air_quality = info.find('dd', class_='kongqi').h5.text

        print(colored(f"åœ°ç‚¹:{city_name}",choice(FGS)))
        print(colored(f"æ—¶é—´:{date}",choice(FGS)))
        print(colored(f"å½“å‰æ¸©åº¦:{temperature}",choice(FGS)))
        print(colored(humidity,choice(FGS)))
        print(colored(air_quality,choice(FGS)))   
def search_food(link):
    headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0'}
    req = Request(f"https://www.tianqi.com{link}",headers=headers)
    # å‘å‡ºè¯·æ±‚ï¼Œè·å–html
    # è·å–çš„htmlå†…å®¹æ˜¯å­—èŠ‚ï¼Œå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²
    html = urlopen(req)
    html_text = bytes.decode(html.read())
    obj = bf(html_text,'html.parser')
    span_tag = obj.find('span', class_='traffic')
    text_content = ''.join(span_tag.stripped_strings)
    print(colored(text_content,choice(FGS)))

def print_menu():
    for i in range(0, 4, 3):
        names = [f'{i + j}:{city_province_mapping[i + j][0]}' for j in range(3) if i + j &lt; 4]
        print(colored('\t\t'.join(names),choice(FGS)))

def print_food():
    if not good_foods:
        print(colored('è¯·é€‰æ‹©åŸå¸‚ï¼Œæ‰å¯æŸ¥çœ‹',choice(FGS)))
        return
    for i in range(0, len(good_foods), 3):
        names = [f'{i + j}:{good_foods[i + j][1]}' for j in range(3) if i + j &lt; len(good_foods)]
        print(colored('\t\t'.join(names),choice(FGS)))

def print_hot(weather):
    if not weather:
        print(colored('è¯·é€‰æ‹©åŸå¸‚ï¼Œæ‰å¯æŸ¥çœ‹',choice(FGS)))
        return
    for i in range(0,len(weather), 3):
        names = [f'{i + j}:{weather[i + j]}' for j in range(3) if i + j &lt; len(weather)]
        print(colored('\t\t'.join(names),choice(FGS)))

get_city_province_mapping()

# get_province_weather('beijing')
# search_food(good_foods[1][0])
init() ## å‘½ä»¤è¡Œè¾“å‡ºå½©è‰²æ–‡å­—
print(colored('å·²æœç´¢å®Œæ¯•ï¼',choice(FGS)))
print(colored('m:è¿”å›é¦–é¡µ',choice(FGS)))
print(colored('h:æŸ¥çœ‹å½“å‰åŸåŒºå¤©æ°”',choice(FGS)))
print(colored('f:æŸ¥çœ‹å½“åœ°ç¾é£Ÿ',choice(FGS)))
print(colored('q:é€€å‡ºå¤©æ°”',choice(FGS)))
my_key = ['q','m','c','h','f']
while True:
    while True:
        move = readkey()
        if move in my_key:
            break
    if move == 'q': ## é”®ç›˜â€˜Qâ€™æ˜¯é€€å‡º
        break 
    if move == 'c': ## é”®ç›˜â€˜Câ€™æ˜¯æ¸…ç©ºæ§åˆ¶å°
        clear()
    if move == 'h':  
        print_hot(province_sub_weather)
    if move == 'f':  
        print_food()
        num = int(input('è¯·è¾“å…¥ç¾é£Ÿç¼–å·ï¼š=====&gt;'))
        if num &lt;= len(good_foods):
            search_food(good_foods[num][0])
    if move == 'm':
        print_menu()
        num = int(input('è¯·è¾“å…¥åŸå¸‚ç¼–å·ï¼š=====&gt;'))
        if num &lt;= len(city_province_mapping):
            pinyin_without_tone = p.get_pinyin(city_province_mapping[num][0],'')
            get_province_weather(pinyin_without_tone)

</code></pre> 
<p>æŒ‰ç…§æˆ‘çš„ä¹ æƒ¯ï¼Œæˆ‘é€šå¸¸å–œæ¬¢åœ¨æ§åˆ¶å°ä¸­è¿›è¡Œæ‰“å°è¾“å‡ºï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸å¿…è¦çš„UIä¾èµ–ã€‚è™½ç„¶æ•´ä¸ªè¿‡ç¨‹å¹¶ä¸ç®—å¤ªå¤æ‚ï¼Œä½†è§£ææ•°æ®ç¡®å®éœ€è¦èŠ±è´¹ä¸€äº›æ—¶é—´ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æ˜¯æˆåŠŸå®Œæˆäº†å¤©æ°”ä¿¡æ¯çš„çˆ¬å–ä»»åŠ¡ã€‚</p> 
<h2><a id="_291"></a>æ€»ç»“</h2> 
<p>åœ¨ä»Šå¤©çš„å­¦ä¹ ä¸­ï¼Œæ‰€æ¶‰åŠçš„çŸ¥è¯†ç‚¹åŸºæœ¬å»¶ç»­äº†ä¸Šä¸€æ¬¡çš„å†…å®¹ï¼Œå¹¶æ²¡æœ‰å¤ªå¤šæ–°çš„æ‹“å±•ã€‚ä¸»è¦æ˜¯å¯¹ç½‘é¡µè¿›è¡Œè§£æï¼Œæå–ä¿¡æ¯å¹¶ä¿å­˜ï¼Œæœ€åæ ¹æ®è¿™äº›ä¿¡æ¯æ¥åŠ¨æ€æ”¹å˜é“¾æ¥åœ°å€ï¼Œæœ€ç»ˆå®Œæˆäº†ä¸€ä¸ªç®€å•çš„ä¸ç”¨æˆ·äº¤äº’çš„æ¼”ç¤ºé¡¹ç›®ã€‚æˆ‘å¸Œæœ›ä½ ä¹Ÿèƒ½è·Ÿç€åŠ¨æ‰‹å®è·µï¼Œå°½ç®¡è¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šæœ‰äº›ç—›è‹¦ï¼Œä¸è¿‡è™½ç„¶å¹¶æ²¡æœ‰ç»™ä½ çš„æŠ€æœ¯æ°´å¹³å¸¦æ¥å®è´¨æ€§æå‡ï¼Œä½†è‡³å°‘å¯ä»¥æ‹“å±•ä½ çš„æŠ€æœ¯å¹¿åº¦ã€‚</p> 
<center> 
 <b>---------------------------END--------------------------- </b> 
</center> 
<h3><a id="_304"></a>é¢˜å¤–è¯</h3> 
<p>æ„Ÿè°¢ä½ èƒ½çœ‹åˆ°æœ€åï¼Œç»™å¤§å®¶å‡†å¤‡äº†ä¸€äº›ç¦åˆ©ï¼</p> 
<p><font face="å¹¼åœ†" size="4" color="red">æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ï¼Œèµ é€å…¨å¥—Pythonå­¦ä¹ èµ„æ–™ï¼ŒåŒ…å«é¢è¯•é¢˜ã€ç®€å†èµ„æ–™ç­‰å…·ä½“çœ‹ä¸‹æ–¹ã€‚<br> </font></p> 
<img src="https://images2.imgbox.com/0d/7c/7A3rdXAj_o.png"> 
<p>ğŸ‘‰<font color="red">CSDNå¤§ç¤¼åŒ…ğŸï¼š</font><a href="https://blog.csdn.net/weixin_68789096/article/details/132275547?spm=1001.2014.3001.5502">å…¨ç½‘æœ€å…¨ã€ŠPythonå­¦ä¹ èµ„æ–™ã€‹å…è´¹èµ é€ğŸ†“ï¼</a><font color="#66cc66">ï¼ˆå®‰å…¨é“¾æ¥ï¼Œæ”¾å¿ƒç‚¹å‡»ï¼‰</font></p> 
<p><strong>ä¸€ã€Pythonæ‰€æœ‰æ–¹å‘çš„å­¦ä¹ è·¯çº¿</strong></p> 
<p>Pythonæ‰€æœ‰æ–¹å‘çš„æŠ€æœ¯ç‚¹åšçš„æ•´ç†ï¼Œå½¢æˆå„ä¸ªé¢†åŸŸçš„çŸ¥è¯†ç‚¹æ±‡æ€»ï¼Œå®ƒçš„ç”¨å¤„å°±åœ¨äºï¼Œä½ å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„çŸ¥è¯†ç‚¹å»æ‰¾å¯¹åº”çš„å­¦ä¹ èµ„æºï¼Œä¿è¯è‡ªå·±å­¦å¾—è¾ƒä¸ºå…¨é¢ã€‚</p> 
<p><img src="https://images2.imgbox.com/c1/d7/1TqhQpVB_o.png" alt="img"></p> 
<p><strong>äºŒã€Pythonå…¼èŒæ¸ é“æ¨è</strong>*</p> 
<p>å­¦çš„åŒæ—¶åŠ©ä½ åˆ›æ”¶ï¼Œæ¯å¤©èŠ±1-2å°æ—¶å…¼èŒï¼Œè½»æ¾ç¨¿å®šç”Ÿæ´»è´¹.<br> <img src="https://images2.imgbox.com/be/23/MvI3ySzJ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>ä¸‰ã€æœ€æ–°Pythonå­¦ä¹ ç¬”è®°</strong></p> 
<p>å½“æˆ‘å­¦åˆ°ä¸€å®šåŸºç¡€ï¼Œæœ‰è‡ªå·±çš„ç†è§£èƒ½åŠ›çš„æ—¶å€™ï¼Œä¼šå»é˜…è¯»ä¸€äº›å‰è¾ˆæ•´ç†çš„ä¹¦ç±æˆ–è€…æ‰‹å†™çš„ç¬”è®°èµ„æ–™ï¼Œè¿™äº›ç¬”è®°è¯¦ç»†è®°è½½äº†ä»–ä»¬å¯¹ä¸€äº›æŠ€æœ¯ç‚¹çš„ç†è§£ï¼Œè¿™äº›ç†è§£æ˜¯æ¯”è¾ƒç‹¬åˆ°ï¼Œå¯ä»¥å­¦åˆ°ä¸ä¸€æ ·çš„æ€è·¯ã€‚</p> 
<p><img src="https://images2.imgbox.com/22/e9/R1Q6oKMj_o.png" alt="img"></p> 
<p><strong>å››ã€å®æˆ˜æ¡ˆä¾‹</strong></p> 
<p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œè¦å­¦ä¼šè·Ÿç€è§†é¢‘ä¸€èµ·æ•²ï¼Œè¦åŠ¨æ‰‹å®æ“ï¼Œæ‰èƒ½å°†è‡ªå·±çš„æ‰€å­¦è¿ç”¨åˆ°å®é™…å½“ä¸­å»ï¼Œè¿™æ—¶å€™å¯ä»¥æç‚¹å®æˆ˜æ¡ˆä¾‹æ¥å­¦ä¹ ã€‚</p> 
<p><img src="https://images2.imgbox.com/32/a4/40NR7Stv_o.png" alt="img"></p> 
<img src="https://images2.imgbox.com/63/1b/F0Ignnkc_o.png"> 
<p>ğŸ‘‰<font color="red">CSDNå¤§ç¤¼åŒ…ğŸï¼š</font><a href="https://blog.csdn.net/weixin_68789096/article/details/132275547?spm=1001.2014.3001.5502">å…¨ç½‘æœ€å…¨ã€ŠPythonå­¦ä¹ èµ„æ–™ã€‹å…è´¹èµ é€ğŸ†“ï¼</a><font color="#66cc66">ï¼ˆå®‰å…¨é“¾æ¥ï¼Œæ”¾å¿ƒç‚¹å‡»ï¼‰</font></p> 
<p>è‹¥æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/806297c251f03cddeaa3b2298e918fbf/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ç”Ÿäº§å®è·µï½œè…¾è®¯æ¬§æ‹‰å¹³å°æ•°æ®è¡€ç¼˜æ¶æ„</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c759a400b19a070d617d979b686807be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">å¤§ç±³è‡ªåŠ¨åŒ–ç”Ÿäº§çº¿çš„è¿ä½œåŸç†ä¸ç§‘æŠ€åˆ›æ–°</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹é¬¼è°·å­çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
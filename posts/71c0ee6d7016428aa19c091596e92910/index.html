<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot学习笔记 (图文详解) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot学习笔记 (图文详解)" />
<meta property="og:description" content="​
快速搭建SpringBoot工程 搭建工具：IDEA
目标：创建Controller,在网页输出 “hello controller!”
(1) 新建项目: File -&gt; New -&gt; Project
(2) 按照图中选择文件类型，点击Next
注意：该创建项目的前提下是需要联网
(3) 为目标文件编辑相关信息，可参考下图
(4) 选择Web -&gt;Spring Web
(5) 文件进行加载，加载后目录如下图所示
(5) 点击右上角运行图标，若出现下列图标，说明启动没有问题
(6) 在 com.example.demo 包下新建 HelloController.java文件，编辑代码
代码如下:
package com.example.demo; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; @RestController public class HelloController { @RequestMapping(&#34;hello&#34;) public String hello(){ return &#34;hello controller!&#34;; } } (7) 在任意一个浏览器输入 http://localhost:8080/hello，运行结果如图所示
SpringBoot起步依赖原理分析 spring-boot-starter-parent:
在 spring-boot-starter-parent 中定义了各种技术的版本信息，组合了一套最优搭配的技术版本在各种 starter 中，定义了完成该功能需要的坐标合集，其中大部分版本信息来自父工程工程继承 parent ，引入starter后，通过依赖传递，就可以简单方便的获得需要的jar包，并且不会存在版本冲突问题。 SpringBoot 配置 配置文件分类： SpringBoot是基于约定的，很多配置都有默认值，可以使用 application.properties 或者 application." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/71c0ee6d7016428aa19c091596e92910/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T11:00:21+08:00" />
<meta property="article:modified_time" content="2023-04-24T11:00:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot学习笔记 (图文详解)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>​</p> 
<h3><a id="SpringBoot_2"></a>快速搭建SpringBoot工程</h3> 
<p>搭建工具：IDEA</p> 
<p>目标：创建Controller,在网页输出 “hello controller!”</p> 
<p>(1) 新建项目: File -&gt; New -&gt; Project<br> <img src="https://images2.imgbox.com/4c/87/E9FL5gvd_o.png" alt="在这里插入图片描述"></p> 
<p>(2) 按照图中选择文件类型，点击Next</p> 
<p>注意：该创建项目的前提下是需要联网<br> <img src="https://images2.imgbox.com/de/d5/5kLGnoVl_o.png" alt="[点击并拖拽以移动]"><br> (3) 为目标文件编辑相关信息，可参考下图<br> <img src="https://images2.imgbox.com/62/c4/THwxQF7X_o.png" alt="[点击并拖拽以移动]"><br> (4) 选择Web -&gt;Spring Web<br> <img src="https://images2.imgbox.com/39/2d/pKPOWGN2_o.png" alt="在这里插入图片描述"><br> (5) 文件进行加载，加载后目录如下图所示<br> <img src="https://images2.imgbox.com/de/16/z1NKcCXB_o.png" alt="在这里插入图片描述"><br> (5) 点击右上角运行图标，若出现下列图标，说明启动没有问题<br> <img src="https://images2.imgbox.com/58/b6/9g5J0qJo_o.png" alt="在这里插入图片描述"></p> 
<p>(6) 在 com.example.demo 包下新建 HelloController.java文件，编辑代码<br> <img src="https://images2.imgbox.com/bb/cd/m97THCwG_o.png" alt="在这里插入图片描述"><br> 代码如下:</p> 
<pre><code>package com.example.demo;

import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {
    @RequestMapping("hello")
    public String hello(){
        return "hello controller!";
    }
}
</code></pre> 
<p>(7) 在任意一个浏览器输入<code> http://localhost:8080/hello</code>，运行结果如图所示</p> 
<p><img src="https://images2.imgbox.com/4b/4c/5Bh4gPdW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="SpringBoot_47"></a>SpringBoot起步依赖原理分析</h3> 
<p>spring-boot-starter-parent:</p> 
<ul><li>在 spring-boot-starter-parent 中定义了各种技术的版本信息，组合了一套最优搭配的技术版本</li><li>在各种 starter 中，定义了完成该功能需要的坐标合集，其中大部分版本信息来自父工程</li><li>工程继承 parent ，引入starter后，通过依赖传递，就可以简单方便的获得需要的jar包，并且不会存在版本冲突问题。</li></ul> 
<h3><a id="SpringBoot__55"></a>SpringBoot 配置</h3> 
<h4><a id="_56"></a>配置文件分类：</h4> 
<p>SpringBoot是基于约定的，很多配置都有默认值，可以使用 application.properties 或者 application.yml ( application.yaml ) 进行配置。以默认的端口号为例，properties 和 yml 代码如下</p> 
<p>（1）properties:</p> 
<pre><code>server.port = 8080 
</code></pre> 
<p>（2）yml:（注意，port 和 8080之间有空格，且必须）</p> 
<pre><code>server:
  port: 8080
</code></pre> 
<p>​</p> 
<h4><a id="YAML_71"></a>YAML语法</h4> 
<p>特点： 简洁，以数据为中心<br> （1）YAML语法如下：</p> 
<ul><li>使用缩进表示层级关系</li><li>缩进时只允许使用空格键，空格数量无所谓，但同级元素必须左侧对齐</li><li>数据值前面必须有空格，作为分隔符</li><li>大小写敏感</li></ul> 
<h4><a id="YAML_78"></a>YAML数据格式</h4> 
<p>（1）对象（map）：键值对的集合<br> 注意：行内写法<code>person</code>与大括号之间有空格，括号内<code>name</code>与<code>zhangsan</code>之间有空格</p> 
<pre><code>person:
    name: zhangsan 
#行内写法
person: {name: zhangsan}
</code></pre> 
<p>（2）数组：一组按次序排列的值，使用 “-”表示数组每个元素</p> 
<pre><code>address:
   -  beijing
   -  shanghai
 #行内写法
 address： [beijing,shanghai]
</code></pre> 
<p>（3）纯良：单个的，不可再分的值</p> 
<pre><code>msg1:  'hello \n world'  #单引号忽略转义字符
msg2:  "hello \n world"  #双引识别转义字符
</code></pre> 
<p>（4）参数引用：$()</p> 
<pre><code>name: lisi
person:
  name: $(name) #引用上边定义的name值
</code></pre> 
<h4><a id="_106"></a>代码演示</h4> 
<p>（1）在resources文件夹下创建application.yaml文件，编辑代码，如图所示：<br> <img src="https://images2.imgbox.com/05/60/oZ6A55j4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="SpringBoot___109"></a>SpringBoot配置 — 获取数据</h3> 
<h4><a id="_110"></a>读取配置内容</h4> 
<p>需要掌握的知识点如下：</p> 
<ul><li>@Value：获取单个值。</li><li>Environment： 当属性较多，单个获取不方便时，可以使用<code>Environment</code>批量获取。</li><li>@ConfigurationProperties： 因为<code>@Value</code>获取将会产生很多重复的代码，<code>Environment</code>获取需要封装，此时我们可以使用<code>ConfigurationProperties</code>,一个SpringBoot已经封装好的注解。</li></ul> 
<h4><a id="_116"></a>数据读取</h4> 
<h5><a id="Value__117"></a>@Value 用例</h5> 
<p>(1) 首先，打开HelloController文件,编辑代码如图所示。<br> <img src="https://images2.imgbox.com/25/c4/qFfX4LAE_o.png" alt="在这里插入图片描述">（2）在网页输入<code>http://localhost:8080/hello2</code>,若是没有运行点击刷新，运行结果如下所示：<br> <img src="https://images2.imgbox.com/87/78/Dfvyzri3_o.png" alt="在这里插入图片描述"></p> 
<p>（3）上述这是对于普通的变量<code>name</code>进行的演示，若要使用<code>@Value</code>获取对象，数组或纯量，<code>HelloController</code>的代码和运行结果如下所示：</p> 
<pre><code>package com.example.demo;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {
    @Value("${name}")
    private String name;
    //对象使用
    @Value("${person.name}")
    private String name2;
    //数组取值: 用中括号取他们的角标
    @Value("${address[0]}")
    private String address1;
    //纯量
    @Value("${msg1}")
    private String msg1;
    @Value("${msg2}")
    private String msg2;
    @RequestMapping("hello2")
    public String hello2(){
        //验证，输出数据
        System.out.println(name);
        System.out.println(name2);
        System.out.println(address1);
        System.out.println(msg1);//不会识别转义字符\n,会原样输出
        System.out.println(msg2);//会识别转义字符
        return "hello world!";
    }
}
</code></pre> 
<p>运行截图如下：<br> <img src="https://images2.imgbox.com/9c/b5/fxfxHjjo_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="Environment__159"></a>Environment 用例</h5> 
<p>（1）<code>Environment</code>：<code>Environment</code> 是<code>import org.springframework.core.env.Environment</code>包下的。<br> （2）<code>Environment</code>对数组和对象的使用过程在<code>HelloController</code>的核心代码如下所示:</p> 
<pre><code>@RestController
public class HelloController {
    @Autowired
    private Environment env;
    @RequestMapping("hello2")
    public String hello2(){
        //要用getProperty()获取属性
        System.out.println(env.getProperty("person.name")); //对象
        System.out.println(env.getProperty("address[0]"));
        return "hello world!";
    }
}

</code></pre> 
<p>运行结果如下：<br> <img src="https://images2.imgbox.com/78/90/LPZscf9w_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ConfigurationProperties__179"></a>@ConfigurationProperties 用例</h5> 
<p>（1）针对application.yaml（配置文件）中的person对象为例，先在包下新建<code>Person</code>类<br> <img src="https://images2.imgbox.com/cb/3e/3Dyl3bJL_o.png" alt="在这里插入图片描述">其中，<code>Person</code>类中核心代码如下：</p> 
<pre><code>@Component //表示下面这个Person类被spring所识别
@ConfigurationProperties(prefix = "person")//prefix 是前缀
public class Person {
    private String name;
    private int age;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getAge() {
        return age;
    }
    public void setAge(int age) {
        this.age = age;
    }
    @Override
    public String toString() {
        return "Person{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
}
</code></pre> 
<p>（2）新建<code>Person</code>类后，在<code>HelloControlle</code>中运行测试。其中<code>HelloController.java</code>的核心代码如下：</p> 
<pre><code>@RestController
public class HelloController {
    @Autowired
    private Person person;
    @RequestMapping("hello2")
    public String hello2(){
        System.out.println(person); //输出对象
        return "hello person!";
    }
}
</code></pre> 
<p>运行结果如图所示：<br> <img src="https://images2.imgbox.com/51/fc/ba57Hoka_o.png" alt="在这里插入图片描述"></p> 
<p>补充（3）：上面那个红条的bug修复,只是用于提示，并不影响运行，但是也可以去除，方法如下：<br> 首先点击按钮如下：<br> <img src="https://images2.imgbox.com/5b/f4/kqe5451z_o.png" alt="在这里插入图片描述"><br> 自动跳转页面如下，补充依赖，加到<code>pom.xml</code>文件中去<img src="https://images2.imgbox.com/4e/fc/MGENzwCO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="SpringBootprofile_229"></a>SpringBoot配置-profile</h3> 
<p>profile: 我们在开发SpringBoot应用时，通常同一套程序会被安装到不同环境，比如开发，测试，生产等。其中数据地址，服务器端口等等配置都不同，比如每次打包时，都要修改配置文件，那么非常麻烦。profile功能就是来进行动态配置切换的。<br> 1）profile配置方式</p> 
<ul><li>多profile文件方式：提供多个配置文件，每个代表一种环境 
  <ul><li>application-dev.properties/yml 开发环境</li><li>application-test.properties/yml 测试环境</li><li>application-pro.properties/yml 生产环境</li></ul> </li><li>yml多文档方式： 
  <ul><li>在yml中使用——分隔不同配置</li></ul> </li></ul> 
<p>2）profile 激活方式</p> 
<ul><li>配置文件：在配置文件中配置：spring.profiles.active = dev</li><li>虚拟机参数：在VM options指定：-Dspring.profiles.active = dev</li><li>命令行参数： java-jar.xxx.jar --spring.profiles.active = dev</li></ul> 
<h3><a id="_244"></a>内部配置加载顺序</h3> 
<p>Springboot程序启动时：会从以下位置加载配置文件：</p> 
<ol><li>file:…/config/ ： 当前项目下的/config目录下</li><li>file:…/ ： 当前项目的根目录</li><li>classpath:/config/ ： classpath的/config目录</li><li>classpath ：classpath的根目录</li></ol> 
<p>加载顺序为上文的排列顺序，高优先级配置的属性会生效</p> 
<h4><a id="_253"></a>演示</h4> 
<p>以下是可以设置配置文件的位置：<br> （1）上述第4个加载文件位置如下图：<br> <img src="https://images2.imgbox.com/3c/90/s4qUnJgn_o.png" alt="在这里插入图片描述"><br> （2）上述第3个配置文件首先需要在<code>resources</code>文件夹下建立<code>config</code>包，其次需要在该包下建立<code>application.properties</code>文件：<br> <img src="https://images2.imgbox.com/b0/cf/1fRNvLs5_o.png" alt="在这里插入图片描述"><br> （3）上述第2个配置文件 首先需要如下图Project—&gt; Project Files, 其次建立<code>application.properties</code>文件（也可以直接复制在下面）<img src="https://images2.imgbox.com/dd/cf/CZPspp9s_o.png" alt="在这里插入图片描述"></p> 
<p>（4）上述第1个配置文件首先如上图roject—&gt; Project Files，其次在下面建立<code>config</code>包在建立<code>application.properties</code>文件</p> 
<h3><a id="SpringBoot_263"></a>SpringBoot原理分析</h3> 
<h4><a id="SpringBootCondition_264"></a>SpringBoot自动配置——Condition</h4> 
<p>（1）Condition：Condition是在Spring 4.0 增加的条件判断功能，通过这个功能可以实现选择性的创建Bean操作。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1299661ba1672e757899b029f309b57f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PHP简易开发的问卷调查系统</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e191b49e836e3ee732610ad84786d14f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux下protobuf保姆级安装教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mybatis generator的简单使用 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mybatis generator的简单使用" />
<meta property="og:description" content="示例环境:Eclipse&#43;Springboot&#43;Mybatis&#43;Mysql
一，pom.xml引入相关依赖
&lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;2.1.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt; &lt;version&gt;1.3.7&lt;/version&gt; &lt;/dependency&gt; 二，测试数据库表
CREATE TABLE `m_user` ( `id` int(11) NOT NULL AUTO_INCREMENT, `username` varchar(50) DEFAULT NULL, `sex` varchar(5) DEFAULT NULL, `address` varchar(100) DEFAULT NULL, `birthday` datetime NOT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8; CREATE TABLE `student` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(200) COLLATE utf8_bin DEFAULT NULL, `age` tinyint(3) unsigned DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 三，数据库连接配置(application." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/083b3c5b98d3cfa4b56bb66891406039/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-28T17:35:02+08:00" />
<meta property="article:modified_time" content="2020-07-28T17:35:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mybatis generator的简单使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>示例环境:<strong>Eclipse+Springboot+Mybatis+Mysql</strong></p> 
<p>一，pom.xml引入相关依赖</p> 
<pre><code>        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;/dependency&gt;
         &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;2.1.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;
            &lt;version&gt;1.3.7&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<p>二，测试数据库表</p> 
<pre><code>CREATE TABLE `m_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) DEFAULT NULL,
  `sex` varchar(5) DEFAULT NULL,
  `address` varchar(100) DEFAULT NULL,
  `birthday` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;


CREATE TABLE `student` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(200) COLLATE utf8_bin DEFAULT NULL,
  `age` tinyint(3) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;</code></pre> 
<p>三，数据库连接配置(application.properties)</p> 
<pre><code>spring.datasource.driverClassName= com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/mybatisdemo?characterEncoding=utf8&amp;serverTimezone=UTC
spring.datasource.username= root
spring.datasource.password= root</code></pre> 
<p>需要说明的是，在springboot中可以有两种类型的配置文件，一种是.properties，另一种是.yml。.properties的优先级高于yml。在加载过程先加载.yml，后加载.properties，如果里面有相同的属性配置，则后者覆盖前者。</p> 
<p>四，generatorConfig.xml的配置</p> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;
&lt;generatorConfiguration&gt;

    &lt;context id="DB2Tables"  targetRuntime="MyBatis3"&gt;
        &lt;commentGenerator&gt;
            &lt;property name="suppressDate" value="true"/&gt;
            &lt;!-- 是否去除所有自动生成的注释 true：是 ： false:否 --&gt;
            &lt;property name="suppressAllComments" value="true"/&gt;
        &lt;/commentGenerator&gt;

        &lt;jdbcConnection driverClass="com.mysql.jdbc.Driver" 
                        connectionURL="jdbc:mysql://localhost:3306/mybatisdemo?serverTimezone=UTC" 
                        userId="root" 
                        password="root"&gt;      
        &lt;/jdbcConnection&gt;
        &lt;javaTypeResolver&gt;
            &lt;property name="forceBigDecimals" value="false"/&gt;
        &lt;/javaTypeResolver&gt;
        &lt;!--  entity存放位置 --&gt;
        &lt;javaModelGenerator targetPackage="com.hsw.sps.entity" targetProject="SST/src/main/java"&gt;
            &lt;property name="enableSubPackages" value="true"/&gt;
            &lt;property name="trimStrings" value="true"/&gt;
        &lt;/javaModelGenerator&gt;

         &lt;!--  mapper存放位置 --&gt;
        &lt;sqlMapGenerator targetPackage="com.hsw.sps.dao" targetProject="SST/src/main/java"&gt;
            &lt;property name="enableSubPackages" value="true"/&gt;
        &lt;/sqlMapGenerator&gt;

        &lt;!-- xml文件存放位置--&gt;
        &lt;javaClientGenerator type="XMLMAPPER" targetPackage="com.hsw.sps.dao" targetProject="SST/src/main/java"&gt;
            &lt;property name="enableSubPackages" value="true"/&gt;
        &lt;/javaClientGenerator&gt;

		&lt;table tableName="m_user"  domainObjectName="User"
		           enableCountByExample="false"
		           enableUpdateByExample="false"
		           enableDeleteByExample="false"
		           enableSelectByExample="false"
		           selectByExampleQueryId="false"/&gt;

    &lt;/context&gt;
&lt;/generatorConfiguration&gt;
</code></pre> 
<p>五，eclipse安装Mybatis generator插件</p> 
<p><img alt="" height="750" src="https://images2.imgbox.com/34/04/1kkqKiW5_o.png" width="1200"></p> 
<p>六，执行generatorConfig.xml，右键选择 Run as &gt; Run Mybatis Generator</p> 
<p><img alt="" height="859" src="https://images2.imgbox.com/7a/be/T2wGeraU_o.png" width="825"></p> 
<p>七，运行结果</p> 
<pre><code>MyBatis Generator Started...
  Buildfile: H:\workspace\.metadata\.plugins\org.mybatis.generator.eclipse.ui\.generatedAntScripts\SST-generatorConfig.xml.xml
  17:06:27.322 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.eclipse.ui.ant.logging.AntLogFactory - Logging initialized using 'org.mybatis.generator.eclipse.ui.ant.logging.slf4j.Slf4jLoggingLogFactory@66aa684d' adapter.
  17:06:27.337 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.logging.LogFactory - Logging initialized using 'org.mybatis.generator.eclipse.ui.ant.logging.AntLogFactory@2e2bf5b8' adapter.
  Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.
  17:06:27.772 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Retrieving column information for table "m_user"
  17:06:27.866 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "id", data type 4, in table "mybatisdemo..m_user"
  17:06:27.866 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "username", data type 12, in table "mybatisdemo..m_user"
  17:06:27.867 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "sex", data type 12, in table "mybatisdemo..m_user"
  17:06:27.867 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "address", data type 12, in table "mybatisdemo..m_user"
  17:06:27.867 [Worker-61: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "birthday", data type 93, in table "mybatisdemo..m_user"
  BUILD SUCCESSFUL
MyBatis Generator Finished</code></pre> 
<p>ps:这里提示com.mysql.jdbc.Driver已经弃用，应该使用com.mysql.cj.jdbc.Driver</p> 
<p>执行成功后，可以看到相关表的entity，mapper，xml 已经创建，如果运行成功相关的包却没有创建的话，项目刷新就可以看见了，如果此时再次运行mybatis genrtator的话，会不断往已经创建的文件内追加内容，也就是说，如果想要再次生成的话，需要把相关文件删除之后，重新生成。</p> 
<p><img alt="" height="570" src="https://images2.imgbox.com/d8/09/MlQv8C7v_o.png" width="325"><img alt="" height="563" src="https://images2.imgbox.com/18/e6/VsV3M6Xj_o.png" width="1200"></p> 
<p>八，刚才的generatorConfig.xml内，只配置了user表的相关映射，所以生成了user表的相关文件，那还有一个student表，需要重新写一遍student表的配置吗？那如果数据库表内有几百张表，难道都需要手动定义吗？答案是否定的，mybatis generator可以自动生成库下的所有表，关键配置如下</p> 
<pre><code>&lt;table schema="mybatisdemo"  tableName="%"  
                   enableCountByExample="false"  
                   enableUpdateByExample="false"   
                   enableDeleteByExample="false" 
                   enableSelectByExample="false"  
                   selectByExampleQueryId="false"/&gt;</code></pre> 
<p>全部的配置文件</p> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;
&lt;generatorConfiguration&gt;

    &lt;context id="DB2Tables"  targetRuntime="MyBatis3"&gt;
        &lt;commentGenerator&gt;
            &lt;property name="suppressDate" value="true"/&gt;
            &lt;!-- 是否去除所有自动生成的注释 true：是 ： false:否 --&gt;
            &lt;property name="suppressAllComments" value="true"/&gt;
        &lt;/commentGenerator&gt;

        &lt;jdbcConnection driverClass="com.mysql.cj.jdbc.Driver" 
                        connectionURL="jdbc:mysql://localhost:3306/mybatisdemo?serverTimezone=UTC" 
                        userId="root" 
                        password="root"&gt;
           &lt;property name="nullCatalogMeansCurrent" value="true"/&gt; 
        &lt;/jdbcConnection&gt;
        &lt;javaTypeResolver&gt;
            &lt;property name="forceBigDecimals" value="false"/&gt;
        &lt;/javaTypeResolver&gt;
        &lt;!--  entity存放位置 --&gt;
        &lt;javaModelGenerator targetPackage="com.hsw.sps.entity" targetProject="SST/src/main/java"&gt;
            &lt;property name="enableSubPackages" value="true"/&gt;
            &lt;property name="trimStrings" value="true"/&gt;
        &lt;/javaModelGenerator&gt;

         &lt;!--  mapper存放位置 --&gt;
        &lt;sqlMapGenerator targetPackage="com.hsw.sps.dao" targetProject="SST/src/main/java"&gt;
            &lt;property name="enableSubPackages" value="true"/&gt;
        &lt;/sqlMapGenerator&gt;

        &lt;!-- xml文件存放位置--&gt;
        &lt;javaClientGenerator type="XMLMAPPER" targetPackage="com.hsw.sps.dao" targetProject="SST/src/main/java"&gt;
            &lt;property name="enableSubPackages" value="true"/&gt;
        &lt;/javaClientGenerator&gt;

		 &lt;!--&lt;table tableName="m_user"  domainObjectName="User"
		            enableCountByExample="false"
		            enableUpdateByExample="false"
		            enableDeleteByExample="false"
		            enableSelectByExample="false"
		            selectByExampleQueryId="false"/&gt;--&gt;
          
            &lt;table schema="mybatisdemo"  tableName="%"  
                   enableCountByExample="false"  
                   enableUpdateByExample="false"   
                   enableDeleteByExample="false" 
                   enableSelectByExample="false"  
                   selectByExampleQueryId="false"/&gt;  
    &lt;/context&gt;
&lt;/generatorConfiguration&gt;
</code></pre> 
<p>将刚才反向生成的文件删除之后，再次运行，得到如下结果</p> 
<pre><code>MyBatis Generator Started...
  Buildfile: H:\workspace\.metadata\.plugins\org.mybatis.generator.eclipse.ui\.generatedAntScripts\SST-generatorConfig.xml.xml
  18:28:25.319 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.eclipse.ui.ant.logging.AntLogFactory - Logging initialized using 'org.mybatis.generator.eclipse.ui.ant.logging.slf4j.Slf4jLoggingLogFactory@6dadd05b' adapter.
  18:28:25.333 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.logging.LogFactory - Logging initialized using 'org.mybatis.generator.eclipse.ui.ant.logging.AntLogFactory@49970f30' adapter.
  18:28:25.723 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Retrieving column information for table "mybatisdemo.%"
  18:28:25.796 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "id", data type 4, in table "mybatisdemo..m_user"
  18:28:25.796 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "username", data type 12, in table "mybatisdemo..m_user"
  18:28:25.796 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "sex", data type 12, in table "mybatisdemo..m_user"
  18:28:25.796 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "address", data type 12, in table "mybatisdemo..m_user"
  18:28:25.796 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "birthday", data type 93, in table "mybatisdemo..m_user"
  18:28:25.797 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "id", data type 4, in table "mybatisdemo..student"
  18:28:25.797 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "name", data type 12, in table "mybatisdemo..student"
  18:28:25.797 [Worker-10: Launching SST-generatorConfig.xml] DEBUG org.mybatis.generator.internal.db.DatabaseIntrospector - Found column "age", data type -6, in table "mybatisdemo..student"
  BUILD SUCCESSFUL
MyBatis Generator Finished
</code></pre> 
<p><img alt="" height="482" src="https://images2.imgbox.com/a7/ca/VhwsJMJR_o.png" width="273"></p> 
<p>可以看到，mybatis generator已经自动扫描了当前数据库下的所有表，并反向生成了相关文件。</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f9fd1d1918b5d3a77dd1e840e54f601e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">动手学机器学习(第二版) 第三章分类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e0819783ec8619186aa2b0a11560729f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">三种基本排序（直接插入，直接选择，直接交换）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
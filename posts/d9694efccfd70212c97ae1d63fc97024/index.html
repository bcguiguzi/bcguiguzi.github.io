<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>命令行启动和停用appium server（兼容Mac和windows） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="命令行启动和停用appium server（兼容Mac和windows）" />
<meta property="og:description" content="命令行启动和停用appium server
1.获取系统类型和命令类型
#获取系统的名称，使用对应的指令 def getsystemstr(): system=platform.system() if system==&#39;Windows&#39;: find_manage=&#39;findstr&#39; else: find_manage=&#39;grep&#39; return [system,find_manage] 2.获取已连接的设备列表：
#获取设备列表 def get_device_list(): devices = [] result = subprocess.Popen(&#34;adb devices&#34;, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE).stdout.readlines() result.reverse() for line in result[1:]: if b&#34;attached&#34; not in line.strip(): devices.append(line.split()[0]) else: break return devices 3.根据系统和端口来启动appium server
def start_appiumServer(port11,port12): port13 = str(port11) port14 = str(port12) systemstr = SystemCheck.getsystemstr()[1] #os.system(&#34;subst w: \&#34;C:\Program Files (x86)\Appium\&#34;&#34;) #cmd1 = &#39;cd C:\\Program Files (x86)\\Appium\\&#39; #cmd2 = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d9694efccfd70212c97ae1d63fc97024/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-22T21:15:00+08:00" />
<meta property="article:modified_time" content="2019-09-22T21:15:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">命令行启动和停用appium server（兼容Mac和windows）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>命令行启动和停用appium server</p> 
 <p>1.获取系统类型和命令类型</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">#获取系统的名称，使用对应的指令
def getsystemstr():
    system=platform.system()
    if system=='Windows':
        find_manage='findstr'
    else:
        find_manage='grep'
    return  [system,find_manage]
</code></pre> 
 </div> 
 <p> 2.获取已连接的设备列表：</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">#获取设备列表
def get_device_list():
    devices = []
    result = subprocess.Popen("adb devices", shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE).stdout.readlines()
    result.reverse()

    for line in result[1:]:
        if b"attached" not in line.strip():
            devices.append(line.split()[0])

        else:
            break
    return devices
</code></pre> 
 </div> 
 <p> 3.根据系统和端口来启动appium server</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">def start_appiumServer(port11,port12):
    port13 = str(port11)
    port14 = str(port12)
    systemstr = SystemCheck.getsystemstr()[1]
    #os.system("subst w: \"C:\Program Files (x86)\Appium\"")
    #cmd1 = 'cd C:\\Program Files (x86)\\Appium\\'

    #cmd2 = "start node C:\\Program Files (x86)\\Appium\\node_modules\\appium\\lib\\server\\main.js " \
           #"--address 127.0.0.1 --port "+port11+"-bp 4724 -U " +deviceuuid
    if systemstr == "Windows":
        os.system("cd C:\\Program Files (x86)\\Appium\\  &amp;&amp; start node node_modules\\appium\\lib\\server\\main.js --address 127.0.0.1 --port "+port13+ " -bp "+port14)

    else:
        os.system("/usr/local/bin/appium -a 127.0.0.1 -p "+ port13 + " -bp " +port14 +" &amp;" )
    time.sleep(2)
    print("appium-server started")
</code></pre> 
 </div> 
 <p> 4.根据系统和端口号关闭appium server</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="language-python">def kill_appiumServer(port13):
    # 查找对应端口的pid
    systemstr = systemstr = SystemCheck.getsystemstr()[1]

    if systemstr == "Windows":
        cmd_find = 'netstat -aon | findstr %s' % port13
        #print(cmd_find)

        result = os.popen(cmd_find)
        text = result.read()
        if text != "":
            pid = text[-5:-1]
            # 执行被占用端口的pid
            cmd_kill = 'taskkill -f -pid %s' % pid
            #print(cmd_kill)
            os.popen(cmd_kill)
            print("apppium-server killed")
        else:
            print("The appium-server port is not occupied and is available")
   else:
        cmd_find = 'lsof -i tcp:%s' % port13
        #print(cmd_find)
        result = os.popen(cmd_find)
        text = result.read()
        #print(text)
        if text != "":
            pid = text.split()[10]
            print (pid)
            # 执行被占用端口的pid
            cmd_kill = 'kill -9 %s' % pid
            print(cmd_kill)
            os.popen(cmd_kill)
            print("apppium-server killed")
        else:
            print("The appium-server port is not occupied and is available")
</code></pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/Sandy-1128/p/sandy1128-appiumserver.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/edcbe4771d7caa745e8270bffaa0526d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">博客重新启用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1542b9d26ebee053aab0f8f2c7671472/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Laravel 图片不显示解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
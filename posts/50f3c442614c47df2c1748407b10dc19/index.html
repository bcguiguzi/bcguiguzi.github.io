<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>服务器显示replace,在SQL服务器查询中用0replaceNULL - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="服务器显示replace,在SQL服务器查询中用0replaceNULL" />
<meta property="og:description" content="在SQL服务器查询中用0replaceNULL
我开发了一个查询，并在前三列的结果我得到NULL 。 我如何用0replace它？
Select c.rundate, sum(case when c.runstatus = &#39;Succeeded&#39; then 1 end) as Succeeded, sum(case when c.runstatus = &#39;Failed&#39; then 1 end) as Failed, sum(case when c.runstatus = &#39;Cancelled&#39; then 1 end) as Cancelled, count(*) as Totalrun from ( Select a.name,case when b.run_status=0 Then &#39;Failed&#39; when b.run_status=1 Then &#39;Succeeded&#39; when b.run_status=2 Then &#39;Retry&#39; Else &#39;Cancelled&#39; End as Runstatus, ---cast(run_date as datetime) cast(substring(convert(varchar(8),run_date),1,4)&#43;&#39;/&#39;&#43;substring(convert(varchar(8),run_date),5,2)&#43;&#39;/&#39; &#43;substring(convert(varchar(8),run_date),7,2) as Datetime) as RunDate from msdb." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/50f3c442614c47df2c1748407b10dc19/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-10T17:38:57+08:00" />
<meta property="article:modified_time" content="2021-08-10T17:38:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">服务器显示replace,在SQL服务器查询中用0replaceNULL</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>在SQL服务器查询中用0replaceNULL</p> 
 <p>我开发了一个查询，并在前三列的结果我得到NULL 。 我如何用0replace它？</p> 
 <p>Select c.rundate, sum(case when c.runstatus = 'Succeeded' then 1 end) as Succeeded, sum(case when c.runstatus = 'Failed' then 1 end) as Failed, sum(case when c.runstatus = 'Cancelled' then 1 end) as Cancelled, count(*) as Totalrun from ( Select a.name,case when b.run_status=0 Then 'Failed' when b.run_status=1 Then 'Succeeded' when b.run_status=2 Then 'Retry' Else 'Cancelled' End as Runstatus, ---cast(run_date as datetime) cast(substring(convert(varchar(8),run_date),1,4)+'/'+substring(convert(varchar(8),run_date),5,2)+'/' +substring(convert(varchar(8),run_date),7,2) as Datetime) as RunDate from msdb.dbo.sysjobs as a(nolock) inner join msdb.dbo.sysjobhistory as b(nolock) on a.job_id=b.job_id where a.name='AI' and b.step_id=0) as c group by c.rundate</p> 
 <p>当你想用别的东西replace一个可能的null列时，使用IsNull 。</p> 
 <p>SELECT ISNULL(myColumn, 0 ) FROM myTable</p> 
 <p>这将把0放在myColumn，如果它是空的第一位。</p> 
 <p>你可以同时使用这两种方法，但有一些区别：</p> 
 <p>SELECT ISNULL(col1, 0 ) FROM table1 SELECT COALESCE(col1, 0 ) FROM table1</p> 
 <p>比较COALESCE()和ISNULL()：</p> 
 <p>ISNULL函数和COALESCEexpression式有相似的目的，但可以有不同的performance。</p> 
 <p>因为ISNULL是一个函数，所以只评估一次。 如上所述，可以多次评估COALESCEexpression式的input值。</p> 
 <p>结果expression式的数据types确定是不同的。 ISNULL使用第一个参数的数据types，COALESCE遵循CASEexpression式规则并返回优先级最高的值的数据types。</p> 
 <p>对于ISNULL和COALESCE，结果expression式的NULLability是不同的。 ISNULL返回值总是被认为不可空(假设返回值是不可空的)，而具有非空参数的COALESCE被认为是NULL。 所以expression式ISNULL(NULL，1)和COALESCE(NULL，1)尽pipe等价的有不同的可空性值。 如果您在计算列中使用这些expression式，则创build关键约束或使标量UDF的返回值具有确定性，以便可以按照以下示例中所示对其进行索引。</p> 
 <p>– 这个语句失败，因为PRIMARY KEY不能接受NULL值 – col2的COALESCEexpression式的可空性 – 求值为NULL。</p> 
 <p>CREATE TABLE #Demo ( col1 integer NULL, col2 AS COALESCE(col1, 0) PRIMARY KEY, col3 AS ISNULL(col1, 0) );</p> 
 <p>– 此语句成功，因为 – ISNULL函数的可空性评估为非空。</p> 
 <p>CREATE TABLE #Demo ( col1 integer NULL, col2 AS COALESCE(col1, 0), col3 AS ISNULL(col1, 0) PRIMARY KEY );</p> 
 <p>ISNULL和COALESCE的validation也不同。 例如，将ISNULL的NULL值转换为int，而对于COALESCE，则必须提供数据types。</p> 
 <p>ISNULL只需要2个参数，而COALESCE则需要可变数量的参数。</p> 
 <p>如果您需要了解更多， 这里是 msdn 的完整文档 。</p> 
 <p>与coalesce ：</p> 
 <p>coalesce(column_name,0)</p> 
 <p>虽然when condition then 1下总结when condition then 1 ，您可以轻松地将sum更改为count – 例如：</p> 
 <p>count(case when c.runstatus = 'Succeeded' then 1 end) as Succeeded,</p> 
 <p>( Count(null)返回0， sum(null)返回null)</p> 
 <p>当你说前三列时，你的意思是你的SUM列吗？ 如果是这样，请在您的CASE语句中添加ELSE 0 。 NULL值的SUM是NULL 。</p> 
 <p>sum(case when c.runstatus = 'Succeeded' then 1 else 0 end) as Succeeded, sum(case when c.runstatus = 'Failed' then 1 else 0 end) as Failed, sum(case when c.runstatus = 'Cancelled' then 1 else 0 end) as Cancelled,</p> 
 <p>SQL小提琴演示</p> 
 <p>用这个代码包装你的专栏。</p> 
 <p>ISNULL(Yourcolumn, 0)</p> 
 <p>也许检查你为什么得到空值</p> 
 <p>使用COALESCE ，它返回第一个非空值，例如</p> 
 <p>SELECT COALESCE(sum(case when c.runstatus = 'Succeeded' then 1 end), 0) as Succeeded</p> 
 <p>如果它返回为NULL将设置成功为0。</p> 
 <p>添加一个else到你的case语句，这样如果testing条件没有被发现，它们默认为零。 此刻如果没​​有发现testing条件NULL正被传递给SUM()函数。</p> 
 <p>Select c.rundate, sum(case when c.runstatus = 'Succeeded' then 1 else 0 end) as Succeeded, sum(case when c.runstatus = 'Failed' then 1 else 0 end) as Failed, sum(case when c.runstatus = 'Cancelled' then 1 else 0 end) as Cancelled, count(*) as Totalrun from ( Select a.name,case when b.run_status=0 Then 'Failed' when b.run_status=1 Then 'Succeeded' when b.run_status=2 Then 'Retry' Else 'Cancelled' End as Runstatus, ---cast(run_date as datetime) cast(substring(convert(varchar(8),run_date),1,4)+'/'+substring(convert(varchar(8),run_date),5,2)+'/' +substring(convert(varchar(8),run_date),7,2) as Datetime) as RunDate from msdb.dbo.sysjobs as a(nolock) inner join msdb.dbo.sysjobhistory as b(nolock) on a.job_id=b.job_id where a.name='AI' and b.step_id=0) as c group by c.rundate</p> 
 <p>一个简单的方法是</p> 
 <p>UPDATE tbl_name SET fild_name = value WHERE fild_name IS NULL</p> 
 <p>sum(case when c.runstatus = 'Succeeded' then 1 else 0 end) as Succeeded, sum(case when c.runstatus = 'Failed' then 1 else 0 end) as Failed, sum(case when c.runstatus = 'Cancelled' then 1 else 0 end) as Cancelled,</p> 
 <p>这里的问题是如果没有else语句，当运行状态不是列描述中规定的状态时，你肯定会收到Null。 向Null添加任何内容都将导致Null，这是此查询的问题。</p> 
 <p>祝你好运！</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/450294f308babe6e3831f0769ddf6f0b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何取消服务器共享root文件夹,共享文件如何取消访问密码 共享文件取消访问密码做法...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9a1ddbe0247c305fdcc45d4c6742d215/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">万维网服务器协议提供web,万维网的HTTP和FTP协议.doc</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
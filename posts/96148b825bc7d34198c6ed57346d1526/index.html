<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PyQt5之信号与槽介绍 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PyQt5之信号与槽介绍" />
<meta property="og:description" content="PyQt的窗口控件类中有很多内置信号，开发者也可以添加自定义信号。在编写一个类时，要先定义该类的信号与槽，在类中信号与槽连接，实现对象之间的数据传输。信号与槽具有如下特点：
一个信号可以连接多个槽；一个信号可以连接另一个信号；信号参数可以是任何Python类型；一个槽可以监听多个信号；信号与槽的连接方式可以是同步连接，也可以是异步连接；信号与槽的连接可能会跨线程；信号可能会断开。 一、定义信号 为QObject对象创建信号： -使用pyqtSignal()函数创建一个或多个重载的未绑定的信号作为类的属性，信号只能在QObject的子类中定义。 -信号必须在类创建时定义，不能在类创建后作为类的属性动态添加进来。 -使用pyqtSignal()函数创建信号时，信号可以传递多个参数，并指定信号传递参数的类型，参数类型是标准的Python数据类型（字符串、日期、布尔类型、数字、列表、元组和字典）。 为控件创建信号： from PyQt5.QtCore import * from PyQt5.QtWidgets import * class WinForm(QMainWindow): btnClickedSignal = pyqtSignal() #为自定义控件WinForm创建了一个btnClickedSignal信号 二、操作信号 使用connect()函数可以把信号绑定到槽函数上；使用disconnect()函数可以解除信号与槽函数的绑定；使用emit()函数可以发射信号。 三、信号与槽的入门应用 内置信号与槽的使用： import sys from PyQt5 import QtCore from PyQt5.QtWidgets import * from PyQt5.QtGui import * from PyQt5.QtCore import * app = QApplication([]) form = QWidget() def showMsg(): QMessageBox.information(form,&#34;信息提示框&#34;,&#34;ok,弹出测试信息&#34;) btn = QPushButton(&#39;测试点击按钮&#39;,form) #将信号与槽绑定，clicked为内置信号，单击按钮会出现提示框 btn.clicked.connect(showMsg) form.show() sys.exit(app.exec_()) 运行效果如下：
自定义信号与槽的使用： import sys from PyQt5 import QtCore from PyQt5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/96148b825bc7d34198c6ed57346d1526/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-07T21:46:17+08:00" />
<meta property="article:modified_time" content="2020-09-07T21:46:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PyQt5之信号与槽介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>PyQt的窗口控件类中有很多内置信号，开发者也可以添加自定义信号。在编写一个类时，要先定义该类的信号与槽，在类中信号与槽连接，实现对象之间的数据传输。信号与槽具有如下特点：</p> 
 <ul><li>一个信号可以连接多个槽；</li><li>一个信号可以连接另一个信号；</li><li>信号参数可以是任何Python类型；</li><li>一个槽可以监听多个信号；</li><li>信号与槽的连接方式可以是同步连接，也可以是异步连接；</li><li>信号与槽的连接可能会跨线程；</li><li>信号可能会断开。</li></ul> 
</blockquote> 
<h3><a id="_11"></a>一、定义信号</h3> 
<ol><li>为QObject对象创建信号：</li></ol> 
<pre><code class="prism language-python"><span class="token operator">-</span>使用pyqtSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>函数创建一个或多个重载的未绑定的信号作为类的属性，信号只能在QObject的子类中定义。
<span class="token operator">-</span>信号必须在类创建时定义，不能在类创建后作为类的属性动态添加进来。
<span class="token operator">-</span>使用pyqtSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>函数创建信号时，信号可以传递多个参数，并指定信号传递参数的类型，参数类型是标准的Python数据类型（字符串、日期、布尔类型、数字、列表、元组和字典）。
</code></pre> 
<ol start="2"><li>为控件创建信号：</li></ol> 
<pre><code class="prism language-python"><span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">class</span> <span class="token class-name">WinForm</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
	btnClickedSignal <span class="token operator">=</span> pyqtSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#为自定义控件WinForm创建了一个btnClickedSignal信号</span>
</code></pre> 
<h3><a id="_32"></a>二、操作信号</h3> 
<ol><li>使用<code>connect()</code>函数可以把信号绑定到槽函数上；</li><li>使用<code>disconnect()</code>函数可以解除信号与槽函数的绑定；</li><li>使用<code>emit()</code>函数可以发射信号。</li></ol> 
<h3><a id="_38"></a>三、信号与槽的入门应用</h3> 
<ol><li>内置信号与槽的使用：</li></ol> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5 <span class="token keyword">import</span> QtCore
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> <span class="token operator">*</span>

app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
form <span class="token operator">=</span> QWidget<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">showMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    QMessageBox<span class="token punctuation">.</span>information<span class="token punctuation">(</span>form<span class="token punctuation">,</span><span class="token string">"信息提示框"</span><span class="token punctuation">,</span><span class="token string">"ok,弹出测试信息"</span><span class="token punctuation">)</span>
btn <span class="token operator">=</span> QPushButton<span class="token punctuation">(</span><span class="token string">'测试点击按钮'</span><span class="token punctuation">,</span>form<span class="token punctuation">)</span>
<span class="token comment">#将信号与槽绑定，clicked为内置信号，单击按钮会出现提示框</span>
btn<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>showMsg<span class="token punctuation">)</span>
form<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行效果如下：</p> 
<p><img src="https://images2.imgbox.com/63/d8/4cajVCWz_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>自定义信号与槽的使用：</li></ol> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5 <span class="token keyword">import</span> QtCore
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token comment">#信号对象</span>
<span class="token keyword">class</span> <span class="token class-name">QTypeSignal</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#生成一个信号</span>
    sendmsg <span class="token operator">=</span> pyqtSignal<span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#发射信号</span>
        self<span class="token punctuation">.</span>sendmsg<span class="token punctuation">.</span>emit<span class="token punctuation">(</span><span class="token string">'Hello Python'</span><span class="token punctuation">)</span>

<span class="token comment">#槽对象</span>
<span class="token keyword">class</span> <span class="token class-name">QTypeSlot</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">#槽函数接收数据</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"QSlot get message =&gt; "</span><span class="token operator">+</span> msg<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    send <span class="token operator">=</span> QTypeSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>
    slot <span class="token operator">=</span> QTypeSlot<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'将信号绑定槽：'</span><span class="token punctuation">)</span>
    <span class="token comment">#将信号绑定到槽函数上</span>
    send<span class="token punctuation">.</span>sendmsg<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>slot<span class="token punctuation">.</span>get<span class="token punctuation">)</span>
    send<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'将信号与槽断开'</span><span class="token punctuation">)</span>
    <span class="token comment">#将信号与槽函数的连接断开</span>
    send<span class="token punctuation">.</span>sendmsg<span class="token punctuation">.</span>disconnect<span class="token punctuation">(</span>slot<span class="token punctuation">.</span>get<span class="token punctuation">)</span>
    send<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行效果如下：</p> 
<p><img src="https://images2.imgbox.com/b5/8f/evdByF4K_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>传递多个参数：</li></ol> 
<pre><code class="prism language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5 <span class="token keyword">import</span> QtCore
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> PyQt5<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token comment">#信号对象</span>
<span class="token keyword">class</span> <span class="token class-name">QTypeSignal</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#生成一个信号</span>
    sendmsg <span class="token operator">=</span> pyqtSignal<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#发射信号</span>
        self<span class="token punctuation">.</span>sendmsg<span class="token punctuation">.</span>emit<span class="token punctuation">(</span><span class="token string">'第一个参数'</span><span class="token punctuation">,</span><span class="token string">'第二个参数'</span><span class="token punctuation">)</span>

<span class="token comment">#槽对象</span>
<span class="token keyword">class</span> <span class="token class-name">QTypeSlot</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">#将槽函数接收数据</span>
    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>msg1<span class="token punctuation">,</span>msg2<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"QSlot get message =&gt; "</span><span class="token operator">+</span> msg1 <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> msg2<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    send <span class="token operator">=</span> QTypeSignal<span class="token punctuation">(</span><span class="token punctuation">)</span>
    slot <span class="token operator">=</span> QTypeSlot<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'将信号绑定槽：'</span><span class="token punctuation">)</span>
    <span class="token comment">#将信号绑定到槽函数上</span>
    send<span class="token punctuation">.</span>sendmsg<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>slot<span class="token punctuation">.</span>get<span class="token punctuation">)</span>
    send<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'将信号与槽断开'</span><span class="token punctuation">)</span>
    <span class="token comment">#将信号与槽函数的连接断开</span>
    send<span class="token punctuation">.</span>sendmsg<span class="token punctuation">.</span>disconnect<span class="token punctuation">(</span>slot<span class="token punctuation">.</span>get<span class="token punctuation">)</span>
    send<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行效果如下：</p> 
<p><img src="https://images2.imgbox.com/94/58/gHmnszxy_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c882f844d50f1d699e0ee97d675b0056/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu18.04分区方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64114c9884e2995253394db3d7abc29b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RSA签名和验签说明</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
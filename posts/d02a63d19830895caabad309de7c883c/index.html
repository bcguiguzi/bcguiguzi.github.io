<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Flutter bugly 傻瓜式操作，上传崩溃日志与符号表解析之IOS - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Flutter bugly 傻瓜式操作，上传崩溃日志与符号表解析之IOS" />
<meta property="og:description" content="1.集成 bugly 在 pod 文件内添加引用,然后在 IOS 目录下打开终端 运行 pod install 命令 2.代码完成日志收集 2.1）先编写 flutter 端代码 main() { AppCatchError().run(App()); } //全局异常的捕捉 class AppCatchError { run(Widget app) { // Flutter 框架异常 FlutterError.onError = (FlutterErrorDetails details) async { // 线上环境 Map map = {}; map[&#34;error&#34;] = details.toString(); MethodManager.invokeCatchedException(map); if (kReleaseMode) { Zone.current.handleUncaughtError(details.exception, details.stack!); } else { // 开发期间 print FlutterError.dumpErrorToConsole(details); } if (EasyLoading.isShow) { EasyLoading.dismiss(); } logger.e(details.toString()); }; runZonedGuarded(() { // 受保护的代码块 runApp(app); }, (error, stack) =&gt; catchError(error, stack)); } ///对搜集的 异常进行处理 上报等等 catchError(Object error, StackTrace stack) { logger." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d02a63d19830895caabad309de7c883c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-25T18:39:16+08:00" />
<meta property="article:modified_time" content="2023-10-25T18:39:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Flutter bugly 傻瓜式操作，上传崩溃日志与符号表解析之IOS</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4><span style="color:#fe2c24;">1.集成 bugly 在 pod 文件内添加引用,然后在 IOS 目录下打开终端 运行 pod install 命令</span></h4> 
<p><img alt="" height="100" src="https://images2.imgbox.com/c7/9d/X6RwTJ8I_o.png" width="350"></p> 
<p></p> 
<h4><strong><span style="color:#fe2c24;">2.代码完成日志收集 </span></strong></h4> 
<h5><span style="color:#fe2c24;">2.1）先编写 flutter 端代码</span></h5> 
<pre><code class="language-Dart">main() {

  AppCatchError().run(App());

}

//全局异常的捕捉

class AppCatchError {

  run(Widget app) {

    // Flutter 框架异常

    FlutterError.onError = (FlutterErrorDetails details) async {

      // 线上环境

      Map map = {};

      map["error"] = details.toString();

      MethodManager.invokeCatchedException(map);

      if (kReleaseMode) {

        Zone.current.handleUncaughtError(details.exception, details.stack!);

      } else {

        // 开发期间 print

        FlutterError.dumpErrorToConsole(details);

      }

      if (EasyLoading.isShow) {

        EasyLoading.dismiss();

      }

      logger.e(details.toString());

    };

    runZonedGuarded(() {

      // 受保护的代码块

      runApp(app);

    }, (error, stack) =&gt; catchError(error, stack));

  }

  ///对搜集的 异常进行处理  上报等等

  catchError(Object error, StackTrace stack) {

    logger.e('错误 message:$error,stack: $stack');

    Map map = {};

    map["error"] = "$error########################### stack$stack”;

    // 此处为 flutter 与原生交互 将 error 传给原生

    MethodManager.invokeCatchedException(map);

    if (EasyLoading.isShow) {

      EasyLoading.dismiss();

    }

  }

}</code></pre> 
<p></p> 
<h5><span style="color:#fe2c24;">2.2）首先在Runner-Bridging-Header文件中引入Bugly头文件</span></h5> 
<p><img alt="" height="186" src="https://images2.imgbox.com/49/b3/ubXLH04i_o.png" width="350"></p> 
<p></p> 
<h5><span style="color:#fe2c24;">2.3）然后编写 flutter 与 ios 交互代码</span></h5> 
<p>注：12 行 打码的是bugly  IOS 应用的 appid</p> 
<p>        15 行为原生交互的通道名 （自定义的 只要与flutter 声明的一致即可）</p> 
<p><img alt="" height="238" src="https://images2.imgbox.com/2b/f1/4spvlXUS_o.png" width="350"></p> 
<p></p> 
<p><span style="color:#fe2c24;"><strong>到目前为止代码即编写完成  然后就是 ios 的符号表上传了</strong></span></p> 
<p></p> 
<h4><span style="color:#fe2c24;">3.在 bugly 官网找到符号表相关栏目</span></h4> 
<p><img alt="" height="504" src="https://images2.imgbox.com/a1/d6/ghRrA747_o.png" width="250"></p> 
<p></p> 
<h4><span style="color:#fe2c24;"><strong>4.下载符号表工具（这里下载对应版本的符号表工具）</strong></span></h4> 
<p><img alt="" height="73" src="https://images2.imgbox.com/8d/56/rhVwHqrR_o.png" width="350"></p> 
<p></p> 
<h4><span style="color:#fe2c24;">5.通过文档找到符号表工具使用的方法</span></h4> 
<pre><code class="language-java">java -jar buglyqq-upload-symbol.jar -appid &lt;bugly应用的appid&gt; -appkey &lt;bugly应用的appkey&gt; -bundleid &lt;android app 的包名&gt; -version &lt;android app 的版本&gt; -platform IOS -inputSymbol &lt;下载下来的符号表&gt;</code></pre> 
<p></p> 
<h4><span style="color:#fe2c24;"><strong>6.接下来就是把命令行需要的这些东西都找出来</strong></span></h4> 
<p>appid和appkey都是在 buylg 官网第一步创建的应用中可以获取</p> 
<p>bundleid在 flutter/android/app/build.gradle文件下的applicationId</p> 
<p>version 同上面目录下的versionName</p> 
<p>inputSymbol 获取就比较麻烦 在下一步操作</p> 
<p></p> 
<h4><span style="color:#fe2c24;">7.先通过命令行获取Engine的 id</span></h4> 
<p><img alt="" height="58" src="https://images2.imgbox.com/b3/42/m2NyQLgr_o.png" width="350"></p> 
<p></p> 
<h4><span style="color:#fe2c24;">8.在flutter_infra中下载对应的符号表解析对照文件</span></h4> 
<p>附上地址 <a href="https://console.cloud.google.com/storage/browser/flutter_infra_release/flutter;tab=objects?prefix=&amp;forceOnObjectsSortingFiltering=false" rel="nofollow" title="https://console.cloud.google.com/storage/browser/flutter_infra_release/flutter;tab=objects?prefix=&amp;forceOnObjectsSortingFiltering=false">https://console.cloud.google.com/storage/browser/flutter_infra_release/flutter;tab=objects?prefix=&amp;forceOnObjectsSortingFiltering=false</a></p> 
<p></p> 
<h4><span style="color:#fe2c24;">9.内容太多 将9 步获取的 id  b20183e040筛选一下 ，就找到对应的符号表了</span></h4> 
<p><img alt="" height="139" src="https://images2.imgbox.com/12/d7/B8uiqzFO_o.png" width="350"></p> 
<p></p> 
<h4><span style="color:#fe2c24;">10.根据实际情况下载ios-release目录下Flutter.dSYM.zip 文件 然后解压出来</span></h4> 
<p><img alt="" height="147" src="https://images2.imgbox.com/cd/90/GhJGx2hA_o.png" width="350"></p> 
<p></p> 
<h4><span style="color:#fe2c24;">11.最终将刚才获取的那些东西替换成下面然后执行即可</span></h4> 
<pre><code class="language-java">java -jar buglyqq-upload-symbol.jar -appid *** -appkey *** -bundleid *** -version *** -platform Android -inputSymbol /Users/***/Downloads/Flutter.dSYM</code></pre> 
<p></p> 
<h4><span style="color:#fe2c24;">12.命令行成功的界面</span></h4> 
<p><img alt="" height="149" src="https://images2.imgbox.com/56/3e/v1UFeKlq_o.png" width="350"></p> 
<p></p> 
<p><strong><span style="color:#fe2c24;">现在上传 flutter 的符号表已经完成  但是 ios 还有一个麻烦的就是原生也需要符号表 接下来拿出原生的符号表</span></strong></p> 
<p></p> 
<h4><span style="color:#fe2c24;">13.在菜单栏的 window -&gt; Organizer 打开编译的包的记录，找到当前包点击 Show in Finder</span></h4> 
<p><img alt="" height="134" src="https://images2.imgbox.com/25/9b/WRWRdFSc_o.png" width="350"></p> 
<p></p> 
<h4><span style="color:#fe2c24;">14.点击显示包内容</span></h4> 
<p><img alt="" height="96" src="https://images2.imgbox.com/27/d3/HenTIAg7_o.png" width="350"></p> 
<p></p> 
<h4><span style="color:#fe2c24;">15.找到需要上传的符号表</span></h4> 
<p><img alt="" height="277" src="https://images2.imgbox.com/90/18/MMBU9TNB_o.png" width="350"></p> 
<p></p> 
<h4><span style="color:#fe2c24;">16.上传符号表跟刚才一致，就是把-inputSymbol的目录换成 Runner.appdSYM。这个 Runner 其实是 flutter 项目中 iOS 项目的名字。</span></h4> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/abf42eea6078eadb01d590da1361bf4d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ARM64启动过程分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/805ab34e1a5fd1203747f1445567aaa7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">字符设备驱动注册的本质及注册注销步骤，struct inode/file结构体作用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一个域名下部署多个vue项目 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="一个域名下部署多个vue项目" />
<meta property="og:description" content="现在有这么一个需求，有两个 vue 项目， vue1和 vue2 ，如何让
http://www.baidu.com/vue1/ 作为 vue1 项目的根路径
http://www.baidu.com/vue2/ 作为 vue2 项目的根路径 也就是说两个项目互相不影响？
现在我们创建一个名为 vue1 的项目
以3.0&#43; 的 vuecli 创建的项目为例，我们需要在根目录创建这个 vue.config.js 文件
// vue.config.js module.exports = { // 假如想在同一个域名下配置多个项目,当前项目前缀是 /vue1 // 基本路径，如果是生产(也就是run build) 那么生成的 index.html 文件，引入的js，css路径前缀会是 /vue1/ publicPath: process.env.NODE_ENV === &#39;production&#39; ? &#39;/vue1&#39; : &#39;/&#39;, // 输出文件目录 outputDir: &#39;vue1&#39;, devServer: { // 是否自动弹出浏览器页面 open: true, // 设置为0.0.0.0则所有的地址均能访问 host: &#39;0.0.0.0&#39;, // 端口 port: &#39;8888&#39;, https: false, hotOnly: false, // 代理配置 proxy: { &#39;/proxyApi_vant&#39;: { // 后端接口地址 target: &#39;http://localhost:8090&#39;, // 代理 websockets ws: true, // 允许跨域 changeOrigin: true, // 重写路径,把 proxyApi 去掉 pathRewrite: { &#39;^/proxyApi_vant&#39;: &#39;&#39; } } }, } } 第一步： 配置 publicPath 里面的重点配置是 publicPath 这个配置，这个三目表达式的意思是， 如果是生产环境，（也就是打包的时候）以 vue1 为根路径， 也就是说通过这个配置 我们打包生成的 index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d5a2f85768cdd3c5e8e334882223deac/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-02T23:19:56+08:00" />
<meta property="article:modified_time" content="2020-05-02T23:19:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一个域名下部署多个vue项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>现在有这么一个需求，有两个 vue 项目， vue1和 vue2 ，如何让</p> 
<p><a href="http://139.196.161.252/myproject2/login" rel="nofollow">http://www.baidu.com/vue1/</a>   作为 vue1 项目的根路径</p> 
<p><a href="http://139.196.161.252/myproject2/login" rel="nofollow">http://www.baidu.com/vue2/</a>   作为 vue2 项目的根路径 </p> 
<p>也就是说两个项目互相不影响？</p> 
<p> </p> 
<p><strong>现在我们创建一个名为 vue1 的项目</strong></p> 
<p>以3.0+ 的 vuecli 创建的项目为例，我们需要在根目录创建这个 vue.config.js 文件</p> 
<pre><code class="language-javascript">// vue.config.js

module.exports = {
    // 假如想在同一个域名下配置多个项目,当前项目前缀是 /vue1
    
    // 基本路径，如果是生产(也就是run build) 那么生成的 index.html 文件，引入的js，css路径前缀会是 /vue1/ 
    publicPath: process.env.NODE_ENV === 'production' ? '/vue1' : '/',
    // 输出文件目录
    outputDir: 'vue1',

    devServer: {
        // 是否自动弹出浏览器页面
        open: true,
        // 设置为0.0.0.0则所有的地址均能访问 
        host: '0.0.0.0',
        // 端口
        port: '8888',
        https: false,
        hotOnly: false,
        // 代理配置
        proxy: {
            '/proxyApi_vant': {
                // 后端接口地址
                target: 'http://localhost:8090',
                // 代理 websockets
                ws: true,
                // 允许跨域 
                changeOrigin: true,
                // 重写路径,把 proxyApi 去掉
                pathRewrite: {
                    '^/proxyApi_vant': ''
                }
            }
        },
    }
}</code></pre> 
<h4>第一步： 配置 <strong>publicPath </strong></h4> 
<p><strong>里面的重点配置是 publicPath 这个配置，这个三目表达式的意思是， 如果是生产环境，（也就是打包的时候）以 vue1 为根路径， 也就是说通过这个配置 我们打包生成的 index.html 文件， 打开会发现里面引入js css 的时候路径是以 /vue1/ 为根路径</strong></p> 
<p><img alt="" height="368" src="https://images2.imgbox.com/a3/14/HbVULiFX_o.png" width="1185"></p> 
<p><br><strong>   outputDir: 'vue1', 这个配置的作用呢，就是打包后生成的文件夹叫啥名字，原来默认都是叫dist，现在为了方便，直接生成和 vue1, 然后直接把 vue1 文件夹上传到nginx 就可以了，为了方便配置一下更好</strong></p> 
<p> </p> 
<h4>第二步： 配置  vueRoueter 的 base 路径</h4> 
<p><img alt="" height="126" src="https://images2.imgbox.com/c2/6d/pYj3aARt_o.png" width="328"></p> 
<p><strong>找到自己项目中创建vueRouter 对象的位置，在这里使用 histroy 路由模式(也就是url不带 # ) , 然后重点是这个 base 属性，一定要配置成  vue1 和 publicPath 中配置的一样。</strong></p> 
<p> </p> 
<h4>第三步： 把打包后的文件夹 （vue1） 上传到 服务器，然后配置 nginx 配置文件</h4> 
<pre><code class="language-bash">  
     location /vue1/ {
        # 注意这里是 alias，然后指向的位置使我们上传的文件夹的具体位置
        # 注意末尾要带上 ‘/’ 哦   
        alias /usr/share/nginx/html/vue1/;
        index  index.html ;
        # 注意这里的url ，不加这个项目刷新会出问题哦，具体原因不展开讲了
        try_files $uri /vue1/index.html ;
    }</code></pre> 
<p> </p> 
<p>至此，配置就完成了总结其实就是配置 <strong>publicPath </strong> 和 <strong>vueRouter </strong>的 <strong>base </strong>属性 ，然后配置 nginx 的配置文件，如果还有 vue2.vue3 项目，按照这种配置，同一个域名下可以随便部署多个 vue 项目。</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c685854b0bd303f9d0aebb93fe036b98/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">思科 计算机网络 第三章测试答案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/578bf1b3141ab4a2d87d896f078f7277/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">win10使用解惑</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
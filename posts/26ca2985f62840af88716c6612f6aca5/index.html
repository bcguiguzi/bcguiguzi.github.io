<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>服务器硬件及RAID配置 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="服务器硬件及RAID配置" />
<meta property="og:description" content="一 RAID磁盘阵列 独立冗余磁盘阵列:
RAID(磁盘阵列)是一种通过将多个硬盘驱动器组合起来以提供更高可靠性和性能的技术。它将多个硬盘驱动器组合在一起，以形成单个逻辑驱动器。
RAID通常用于服务器和数据
存储系统，以提供更高的数据可用性、更高的性能或两者兼而有之。
RAID级别
组成磁盘阵列的不同方式称为RAID级别 (RAID Levels)
常用的RAID级别
RAIDO、 RAID1、 RAID5、 RAID6、 RAID1&#43;0等
raid0:1、读写性能是高的 2、没有数据备份功能 3、最少2块 偶数块
raid1:1、互为备份(镜像存储) 2、写性能差一些，读性能一般3、高可用，换一块不影数据的 4、硬盘偶数
raid5:1、硬盘数量n&gt;=3,2、读性能强，写性能一般 3、可以坏一块硬盘，不影响业务 4、数据的校验机制
raid6:1、硬盘数要大于等于4，最少4个盘 2、奇偶校验，校验位 3、谈性能和raid5相当，但是写性能比raid5更差 4、他可以坏两块盘，但是不影响业务
raid1&#43;0:1、磁盘数N大于等于4，只有一半的磁盘利用率 2、读性能高，写性能档差 3、理论上可以坏三块，分许两个基组中各坏一
奇偶校验 奇偶校验是一种简单的错误检测和纠正技术
简单来说奇偶校验中的0和1 表示校验位，用来使字节中的所有位中1的数量偶数或者奇数
是用来检测数据位是否相同
raid总结 raid级别硬盘数量磁盘利用率读性能写性能高可用性raid0 N N 100% 高 高 无radi1 N(偶数) N/2 50% 低 低 中等
raid5 N &gt;=3 (N-1)/N 高 低 高raid6 N&gt;=4（N-2)/N 高 低 很高raid1&#43;0 N&gt;=4(偶数)N/2 50% 高 中等 中等 特点 raid0：追求最大容量和读写速度，坏一块，数据全部异常" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/26ca2985f62840af88716c6612f6aca5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-09T16:27:12+08:00" />
<meta property="article:modified_time" content="2023-05-09T16:27:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">服务器硬件及RAID配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一   RAID磁盘阵列</h2> 
<p><br> 独立冗余磁盘阵列:<br> RAID(磁盘阵列)是一种通过将多个硬盘驱动器组合起来以提供更高可靠性和性能的技术。它将多个硬盘驱动器组合在一起，以形成单个逻辑驱动器。<br> RAID通常用于服务器和数据</p> 
<p>存储系统，以提供更高的数据可用性、更高的性能或两者兼而有之。</p> 
<p>RAID级别<br> 组成磁盘阵列的不同方式称为RAID级别 (RAID Levels)</p> 
<p>常用的RAID级别<br> RAIDO、 RAID1、 RAID5、 RAID6、 RAID1+0等</p> 
<p>raid0:1、读写性能是高的 2、没有数据备份功能 3、最少2块 偶数块<br> raid1:1、互为备份(镜像存储) 2、写性能差一些，读性能一般3、高可用，换一块不影数据的 4、硬盘偶数</p> 
<p>raid5:1、硬盘数量n&gt;=3,2、读性能强，写性能一般 3、可以坏一块硬盘，不影响业务 4、数据的校验机制</p> 
<p>raid6:1、硬盘数要大于等于4，最少4个盘 2、奇偶校验，校验位 3、谈性能和raid5相当，但是写性能比raid5更差 4、他可以坏两块盘，但是不影响业务</p> 
<p>raid1+0:1、磁盘数N大于等于4，只有一半的磁盘利用率 2、读性能高，写性能档差 3、理论上可以坏三块，分许两个基组中各坏一</p> 
<h3>奇偶校验</h3> 
<p>奇偶校验是一种简单的错误检测和纠正技术</p> 
<p>简单来说奇偶校验中的0和1 表示校验位，用来使字节中的所有位中1的数量偶数或者奇数</p> 
<p>是用来检测数据位是否相同</p> 
<h3>raid总结</h3> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:516px;"><tbody><tr><td style="width:101px;">raid级别</td><td style="width:95px;">硬盘数量</td><td style="width:93px;">磁盘利用率</td><td style="width:80px;">读性能</td><td style="width:66px;">写性能</td><td style="width:75px;">高可用性</td></tr><tr><td style="width:101px;">raid0</td><td style="width:95px;">       N</td><td style="width:93px;">  N 100%</td><td style="width:80px;">     高</td><td style="width:66px;">    高</td><td style="width:75px;">    无</td></tr><tr><td style="width:101px;">radi1 </td><td style="width:95px;">     N(偶数)</td><td style="width:93px;">   N/2 50%</td><td style="width:80px;">     低</td><td style="width:66px;">    低</td><td style="width:75px;"> <p>   中等</p> </td></tr><tr><td style="width:101px;">raid5</td><td style="width:95px;">     N &gt;=3 </td><td style="width:93px;">(N-1)/N</td><td style="width:80px;">     高</td><td style="width:66px;">    低 </td><td style="width:75px;">   高</td></tr><tr><td style="width:101px;">raid6</td><td style="width:95px;">     N&gt;=4</td><td style="width:93px;">（N-2)/N</td><td style="width:80px;">     高</td><td style="width:66px;">    低</td><td style="width:75px;">   很高</td></tr><tr><td style="width:101px;">raid1+0</td><td style="width:95px;"> N&gt;=4(偶数)</td><td style="width:93px;">N/2   50%</td><td style="width:80px;">    高</td><td style="width:66px;">    中等 </td><td style="width:75px;">   中等</td></tr></tbody></table> 
<h2>特点</h2> 
<p>raid0：追求最大容量和读写速度，坏一块，数据全部异常</p> 
<p>raid1：追求安全，只坏一块，不影响使用，数据也不受影响</p> 
<p>radi5：成本控制前提下，追求最大的容量、速度以及可用性，可以坏一块</p> 
<p>raid6：比raid5的数据安全性更高，但是写速度比较低，可以坏两块硬盘</p> 
<p>raid1+0：综raid0和raid1优点，既有速度也有高可用，每个基组可以坏一个，数据不受影响</p> 
<h3>优点</h3> 
<p>1、节省成本，旧称廉价磁盘冗余阵列</p> 
<p>2、提高IO（读写）能力，磁盘并行读写</p> 
<p>3、提高耐用性，磁盘冗余算法来实现</p> 
<p>4、提升高可用</p> 
<p></p> 
<h2>二  RAID6配置</h2> 
<p>首先我们需要先添加几个硬盘，硬盘不会添加的看我往期磁盘与文件管理章节</p> 
<p><img alt="" height="1010" src="https://images2.imgbox.com/e3/4a/KGjuJ6xX_o.png" width="876"></p> 
<p></p> 
<p> 先查看一下信息，使用lsblk命令，可以看到添加的硬盘都在内</p> 
<p><img alt="" height="300" src="https://images2.imgbox.com/47/87/9d0DS6A7_o.png" width="866"></p> 
<p> 创建磁盘主分区，我们现在创建的sdb磁盘主分区，用这个步骤给sdb到sdg都创建一次</p> 
<p>步骤是一样的</p> 
<p><img alt="" height="551" src="https://images2.imgbox.com/30/1f/x55q2hYo_o.png" width="920"></p> 
<p>再用lsblk查看一下我们创建好的每个分区</p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/3d/28/598HSIkl_o.png" width="849"></p> 
<p> 使用rpm -qa | grep “mdadm”查看一下有没有安装，没有的话安装一个</p> 
<p><img alt="" height="44" src="https://images2.imgbox.com/cd/36/itwSadgm_o.png" width="520"></p> 
<p>使用mdadm -Cv /dev/md6 -l6 -n4 /dev/sd[b-e]1 -x1 /dev/sdf1  </p> 
<p>-C标识创建</p> 
<p>-v列出详细信息</p> 
<p>-l 表示raid级别</p> 
<p>-n表示用几块盘</p> 
<p>-x表示用什么盘来做热备份盘</p> 
<p><img alt="" height="156" src="https://images2.imgbox.com/c4/15/unDfbl6l_o.jpg" width="868"></p> 
<p> 使用cat命令查看一下安装进度</p> 
<p></p> 
<p>可以看到现在还在进程中</p> 
<p><img alt="" height="142" src="https://images2.imgbox.com/b0/83/0yT9DxJM_o.png" width="926"></p> 
<p>使用mdadm -D命令查看一下信息</p> 
<p><img alt="" height="719" src="https://images2.imgbox.com/cd/6d/EzoQxVx9_o.png" width="925"></p> 
<p> 创建文件系统mkfs.xfs<img alt="" height="211" src="https://images2.imgbox.com/d8/7e/N3Ce4euu_o.png" width="835"></p> 
<p> 创建/data目录</p> 
<p>将/dev/md6挂载到目录上，然后df -h查看一下 </p> 
<p>可以看到我们的可用容量只有20G，这是因为raid6的磁盘利用率是(N-2)/N，我们用了四个</p> 
<p>所以是（4-2）/4，就只剩一半20G 了</p> 
<p><img alt="" height="301" src="https://images2.imgbox.com/64/bf/VrANnzJR_o.png" width="888"></p> 
<p> 现在我们切换到/data 目录</p> 
<p>创建 1  2 3  5</p> 
<p><img alt="" height="104" src="https://images2.imgbox.com/9a/f5/A7jrfz8q_o.png" width="550"></p> 
<p> 使用mdadm /dev/md6 -f /dev/sdb1命令强制下线sdb1 ，-f就表示强制下线</p> 
<p>可以看到工作设备变成了4个，备用设备顶上去了，下线设备变成了1个<br><img alt="" height="761" src="https://images2.imgbox.com/82/a1/F8HsK0Ov_o.png" width="915"></p> 
<p>现在我们下线了四台设备，可以看到无法读写了 </p> 
<p><img alt="" height="213" src="https://images2.imgbox.com/50/ab/rKwC7dYQ_o.png" width="745"></p> 
<h2>三 删除设备</h2> 
<p>第一步解除挂载</p> 
<p><img alt="" height="42" src="https://images2.imgbox.com/ab/82/lnYKMDIA_o.png" width="494"></p> 
<p> 第二步停止设备</p> 
<p>-S 就是停止设备</p> 
<p><img alt="" height="75" src="https://images2.imgbox.com/fc/ba/K39unjb3_o.png" width="547"></p> 
<p>第三步删除/dev/md6中指定的设备并使用lsblk查看一下信息</p> 
<p>mdadm --misc --zero-superblock /dev/sd[b-f]1</p> 
<p>可以看到已经解除了</p> 
<p><img alt="" height="473" src="https://images2.imgbox.com/f9/1a/atwrFbio_o.png" width="891"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/786949e4b838e4d5647d7b6b71dc4f1d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">StringUtils工具类常用方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c1de08c1bff47f2e0769742a6d8e229d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Django解决AttributeError: ‘tuple‘ object has no attribute ‘startswith‘问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux之watch命令 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux之watch命令" />
<meta property="og:description" content="可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令,watch命令 以周期性的方式执行给定的指令，指令输出以全屏方式显示。watch是一个非常实用的命令，基本所有的Linux发行版都带有这个小工具，如同名字一样，watch可以帮你监测一个命令的运行结果，避免重复手动执行命令
命令格式 watch [参数] [命令]
命令功能 可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令
命令参数 -n或–interval watch缺省每2秒运行一下程序，可以用-n或-interval来指定间隔的时间。-d或–differences 用-d或–differences 选项watch 会高亮显示变化的区域。 而-d=cumulative选项会把变动过的地方(不管最近的那次有没有变动)都高亮显示出来。-t 或-no-title 会关闭watch命令在顶部的时间间隔,命令，当前时间的输出。-h, --help 查看帮助文档 每隔1秒查看系统网络连接情况 &gt; watch -n 1 -d netstat -tunlp 变化部分会着色
退出watch：Ctrl&#43;c 每隔一秒高亮显示http链接数的变化情况 &gt; watch -n 1 -d &#39;pstree|grep http&#39; 隔一秒高亮显示http链接数的变化情况。 后面接的命令若带有管道符，需要加&#39;&#39;将命令区域归整。
实时查看模拟攻击客户机建立起来的连接数 &gt; watch &#39;netstat -an | grep:21 | \ grep&lt;模拟攻击客户机的IP&gt;| wc -l&#39; 监测当前目录变化 &gt; watch -d &#39;ls -l|grep tmp&#39; 5秒一次输出系统的平均负载 &gt; watch -n 5 &#39;cat /proc/loadavg&#39; 实现tail -f实时刷新文件 &gt; watch -n 1 tail /var/log/error." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/65d1eac3af22c5635c30bb5f9252180f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-03T22:55:00+08:00" />
<meta property="article:modified_time" content="2021-08-03T22:55:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux之watch命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令,<code>watch</code>命令 以周期性的方式执行给定的指令，指令输出以全屏方式显示。watch是一个非常实用的命令，基本所有的Linux发行版都带有这个小工具，如同名字一样，watch可以帮你监测一个命令的运行结果，避免重复手动执行命令</p> 
</blockquote> 
<h4><a id="_2"></a>命令格式</h4> 
<p><code>watch [参数] [命令]</code></p> 
<h4><a id="_6"></a>命令功能</h4> 
<blockquote> 
 <p>可以将命令的输出结果输出到标准输出设备，多用于周期性执行命令/定时执行命令</p> 
</blockquote> 
<h4><a id="_10"></a>命令参数</h4> 
<ul><li>-n或–interval watch缺省每2秒运行一下程序，可以用-n或-interval来指定间隔的时间。</li><li>-d或–differences 用-d或–differences 选项watch 会高亮显示变化的区域。 而-d=cumulative选项会把变动过的地方(不管最近的那次有没有变动)都高亮显示出来。</li><li>-t 或-no-title 会关闭watch命令在顶部的时间间隔,命令，当前时间的输出。</li><li>-h, --help 查看帮助文档</li></ul> 
<h4><a id="1_17"></a>每隔1秒查看系统网络连接情况</h4> 
<pre><code>&gt; watch -n 1 -d netstat -tunlp
</code></pre> 
<p><img src="https://images2.imgbox.com/cb/65/q5HSTClt_o.png" alt="image-20210312222340339"></p> 
<blockquote> 
 <p>变化部分会着色</p> 
</blockquote> 
<ul><li>退出watch：Ctrl+c</li></ul> 
<h4><a id="http_29"></a>每隔一秒高亮显示http链接数的变化情况</h4> 
<pre><code>&gt; watch -n 1 -d 'pstree|grep http'
</code></pre> 
<blockquote> 
 <p>隔一秒高亮显示http链接数的变化情况。 后面接的命令若带有管道符，需要加<code>''</code>将命令区域归整。</p> 
</blockquote> 
<h4><a id="_37"></a>实时查看模拟攻击客户机建立起来的连接数</h4> 
<pre><code>&gt; watch 'netstat -an | grep:21 | \ grep&lt;模拟攻击客户机的IP&gt;| wc -l'
</code></pre> 
<h4><a id="_43"></a>监测当前目录变化</h4> 
<pre><code>&gt; watch -d 'ls -l|grep tmp' 
</code></pre> 
<h4><a id="5_49"></a>5秒一次输出系统的平均负载</h4> 
<pre><code>&gt; watch -n 5 'cat /proc/loadavg'
</code></pre> 
<h4><a id="tail_f_55"></a>实现<code>tail -f</code>实时刷新文件</h4> 
<pre><code>&gt; watch -n 1 tail /var/log/error.log
</code></pre> 
<h4><a id="_61"></a>实现一个简单的时钟</h4> 
<pre><code>&gt; watch -n 1 " "
</code></pre> 
<p><img src="https://images2.imgbox.com/f4/73/s41wiQfQ_o.png" alt="image-20210312223901625"></p> 
<blockquote> 
 <p>时间1秒1秒的在刷新</p> 
</blockquote> 
<h4><a id="_71"></a>监视服务器当前用户登录的状况</h4> 
<pre><code>&gt; watch -n 1 -d who
</code></pre> 
<p>原文链接:https://rumenz.com/rumenbiji/linux-watch.html<br> 微信公众号:入门小站</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c38abeb2e478051c850abf788ae9f09f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css多行省略号兼容ie,css超出2行部分省略号……，兼容ie</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8208d8e1b1ce7b32521571fe22b03ad1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">css如何对上边框加阴影,CSS怎么添加阴影边框？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
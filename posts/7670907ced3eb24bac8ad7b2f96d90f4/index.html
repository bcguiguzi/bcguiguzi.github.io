<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>mysql 表的约束 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="mysql 表的约束" />
<meta property="og:description" content="mysql 表的约束 1. 空属性2. 默认值3. 列描述4. zerofill5. 主键6. 自增长7. 唯一键8. 外键 1. 空属性 在数据库中，每个字段都有一个空属性，可以是 NULL（默认）或 NOT NULL（不为空）。一般来说，应尽可能保证字段不为空，因为空值在实际运算中可能会导致问题。
示例：创建一个班级表，其中班级名称不能为空，而教室名称也不能为空。
CREATE TABLE myclass ( class_name VARCHAR(20) NOT NULL, classroom VARCHAR(10) NOT NULL ); 插入示例：
INSERT INTO myclass (class_name, classroom) VALUES (&#39;班级A&#39;, &#39;教室101&#39;);
错误的插入示例：
-- 会导致错误，因为 class_name 不能为空 INSERT INTO myclass (classroom) VALUES (&#39;教室101&#39;); -- 会导致错误，因为 classroom 不能为空 INSERT INTO myclass (class_name) VALUES (&#39;班级A&#39;); 2. 默认值 某些字段的数据经常会出现相同的默认值，可以在表的设计阶段指定默认值，从而在需要时使用该值。
示例：创建一个学生表，其中年龄默认为 0，性别默认为男性。
CREATE TABLE students ( name VARCHAR(50) NOT NULL, age TINYINT UNSIGNED DEFAULT 0, sex CHAR(2) DEFAULT &#39;男&#39; ); 插入示例：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7670907ced3eb24bac8ad7b2f96d90f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-14T18:41:12+08:00" />
<meta property="article:modified_time" content="2024-03-14T18:41:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">mysql 表的约束</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>mysql 表的约束</h4> 
 <ul><li><a href="#1__3" rel="nofollow">1. 空属性</a></li><li><a href="#2__28" rel="nofollow">2. 默认值</a></li><li><a href="#3__54" rel="nofollow">3. 列描述</a></li><li><a href="#4__zerofill_76" rel="nofollow">4. zerofill</a></li><li><a href="#5__126" rel="nofollow">5. 主键</a></li><li><a href="#6__189" rel="nofollow">6. 自增长</a></li><li><a href="#7__257" rel="nofollow">7. 唯一键</a></li><li><a href="#8__292" rel="nofollow">8. 外键</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1__3"></a>1. 空属性</h2> 
<p>在数据库中，每个字段都有一个空属性，可以是 <strong>NULL</strong>（默认）或 <strong>NOT NULL</strong>（不为空）。一般来说，应尽可能保证字段不为空，因为空值在实际运算中可能会导致问题。</p> 
<p>示例：创建一个班级表，其中班级名称不能为空，而教室名称也不能为空。</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">myclass</span> <span class="token punctuation">(</span>
    class_name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span><span class="token punctuation">,</span>
    classroom <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>插入示例：</p> 
<p><code>INSERT INTO myclass (class_name, classroom) VALUES ('班级A', '教室101');</code></p> 
<p>错误的插入示例：</p> 
<pre><code class="prism language-c"><span class="token operator">--</span> 会导致错误，因为 class_name 不能为空
INSERT INTO <span class="token function">myclass</span> <span class="token punctuation">(</span>classroom<span class="token punctuation">)</span> <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token char">'教室101'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">--</span> 会导致错误，因为 classroom 不能为空
INSERT INTO <span class="token function">myclass</span> <span class="token punctuation">(</span>class_name<span class="token punctuation">)</span> <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token char">'班级A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="2__28"></a>2. 默认值</h2> 
<p>某些字段的数据经常会出现相同的默认值，可以在表的设计阶段指定默认值，从而在需要时使用该值。</p> 
<p>示例：创建一个学生表，其中年龄默认为 <strong>0</strong>，性别默认为男性。</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">students</span> <span class="token punctuation">(</span>
    name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span><span class="token punctuation">,</span>
    age TINYINT UNSIGNED DEFAULT <span class="token number">0</span><span class="token punctuation">,</span>
    sex <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> DEFAULT <span class="token char">'男'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>插入示例：</p> 
<p><code>INSERT INTO students (name) VALUES ('李四');</code></p> 
<p>插入数据后:</p> 
<pre><code class="prism language-c"><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span> name <span class="token operator">|</span> age <span class="token operator">|</span> sex  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span> 李四 <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span> 男   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
</code></pre> 
<h2><a id="3__54"></a>3. 列描述</h2> 
<p>列描述提供了一个字段的描述信息，虽然在数据库操作中没有实际意义，但可以帮助程序员和数据库管理员理解字段的含义。</p> 
<p>示例：在表创建语句中添加字段描述信息。</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">students</span> <span class="token punctuation">(</span>
    name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span> COMMENT <span class="token char">'学生姓名'</span><span class="token punctuation">,</span>
    age TINYINT UNSIGNED DEFAULT <span class="token number">0</span> COMMENT <span class="token char">'学生年龄'</span><span class="token punctuation">,</span>
    sex <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> DEFAULT <span class="token char">'男'</span> COMMENT <span class="token char">'学生性别'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>查询表的注释内容，我们可以使用SHOW CREATE TABLE命令：</p> 
<p><code>SHOW CREATE TABLE students\G;</code></p> 
<p><img src="https://images2.imgbox.com/43/82/SD5DQl4C_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4__zerofill_76"></a>4. zerofill</h2> 
<p>在数据库中，对于数字类型的字段，有时候需要对其进行填充以保持一致的显示格式。这时就可以使用 <strong>zerofill</strong> 属性来实现。</p> 
<p><strong>int</strong>类型字段后面的长度常常让人迷惑，如 <strong>int(10)</strong>。但实际上，没有使用 <strong>zerofill</strong> 属性时，括号内的数字对数据存储并无实质影响。</p> 
<p>让我们通过一个例子来说明 <strong>zerofill</strong> 的作用。假设我们有一个表 <strong>tt3</strong>，其中包含两个整型字段 <strong>a</strong> 和 <strong>b</strong>：</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">tt3</span> <span class="token punctuation">(</span>
    a <span class="token function">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> UNSIGNED DEFAULT <span class="token constant">NULL</span><span class="token punctuation">,</span>
    b <span class="token function">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> UNSIGNED DEFAULT <span class="token constant">NULL</span>
<span class="token punctuation">)</span> ENGINE<span class="token operator">=</span>MYISAM DEFAULT CHARSET<span class="token operator">=</span>gbk<span class="token punctuation">;</span>
</code></pre> 
<p>现在，我们向表中插入数据：</p> 
<p><code>INSERT INTO tt3 VALUES (1, 2);</code></p> 
<p>如果我们查询表 tt3，将得到如下结果：</p> 
<pre><code class="prism language-c"><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span> a    <span class="token operator">|</span> b    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span> <span class="token number">1</span>    <span class="token operator">|</span> <span class="token number">2</span>    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
</code></pre> 
<p>现在，让我们给字段 <strong>a</strong> 添加 <strong>zerofill</strong> 属性，并将宽度设为 <strong>5</strong>：</p> 
<p><code>ALTER TABLE tt3 CHANGE a a INT(5) UNSIGNED ZEROFILL;</code></p> 
<p>再次查看表的创建语句，可以看到 <strong>a</strong> 字段现在具有了 <strong>zerofill</strong> 属性：</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">tt3</span> <span class="token punctuation">(</span>
    a <span class="token function">INT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> UNSIGNED ZEROFILL DEFAULT <span class="token constant">NULL</span><span class="token punctuation">,</span>
    b <span class="token function">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> UNSIGNED DEFAULT <span class="token constant">NULL</span>
<span class="token punctuation">)</span> ENGINE<span class="token operator">=</span>MYISAM DEFAULT CHARSET<span class="token operator">=</span>gbk<span class="token punctuation">;</span>
</code></pre> 
<p>现在，如果我们再次查询表 <strong>tt3</strong>，将得到如下结果：</p> 
<pre><code class="prism language-c"><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span> a     <span class="token operator">|</span> b    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
<span class="token operator">|</span> <span class="token number">00001</span> <span class="token operator">|</span> <span class="token number">2</span>    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>
</code></pre> 
<p>可以看到，字段 <strong>a</strong> 的值现在以 <strong>5</strong> 位宽度进行显示，并在不足位数时自动填充 <strong>0</strong>。但需要注意的是，这只是最后的显示结果，在 <strong>MySQL</strong> 中实际存储的仍然是整数值 <strong>1</strong>。可以通过使用 <strong>hex</strong> 函数查看内部存储值：<br> <code>SELECT a, HEX(a) FROM tt3;</code></p> 
<h2><a id="5__126"></a>5. 主键</h2> 
<p>主键（<strong>Primary Key</strong>）是数据库中一种重要的约束，用于唯一标识表中的每一行数据。主键字段的值不能重复，也不能为空。在一张表中，最多只能有一个主键。</p> 
<p>通常情况下，主键所在的列是整数类型，但也可以是其他类型，只要保证能够唯一标识每一行数据即可。</p> 
<p>创建表时指定主键<br> 在创建表的时候，可以直接在字段定义时指定主键。</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">students</span> <span class="token punctuation">(</span>
    id INT UNSIGNED PRIMARY KEY COMMENT <span class="token char">'学号不能为空'</span><span class="token punctuation">,</span>
    name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上面的示例中，<strong>id 字段被指定为主键</strong>，其类型为无符号整数，同时也是不能为空的。</p> 
<p><strong>主键约束</strong>保证了主键字段中的数值是<strong>唯一</strong>的，任何试图插入重复值的操作都会失败。</p> 
<pre><code class="prism language-c">INSERT INTO students <span class="token function">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'John'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
若再次尝试插入相同的主键值，将会收到错误提示：
</code></pre> 
<pre><code class="prism language-c">INSERT INTO students <span class="token function">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'John'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span> ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span><span class="token operator">:</span> Duplicate entry <span class="token char">'1'</span> <span class="token keyword">for</span> key <span class="token char">'PRIMARY'</span>
</code></pre> 
<blockquote> 
 <p><strong>添加和删除主键</strong></p> 
 <p>在表创建完成后，如果没有指定主键，可以通过 ALTER TABLE 语句追加主键或删除主键。</p> 
 <p>添加主键：</p> 
 <p><code>ALTER TABLE students ADD PRIMARY KEY(id);</code></p> 
 <p>删除主键：</p> 
 <p><code>ALTER TABLE students DROP PRIMARY KEY;</code></p> 
</blockquote> 
<p><strong>复合主键</strong></p> 
<p>除了单一字段外，还可以使用多个字段组合成复合主键。</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">exam_scores</span> <span class="token punctuation">(</span>
    student_id INT UNSIGNED<span class="token punctuation">,</span>
    course_code <span class="token function">CHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> COMMENT <span class="token char">'课程代码'</span><span class="token punctuation">,</span>
    score TINYINT UNSIGNED DEFAULT <span class="token number">60</span> COMMENT <span class="token char">'成绩'</span><span class="token punctuation">,</span>
    PRIMARY <span class="token function">KEY</span><span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_code<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上面的示例中，<strong>student_id 和 course_code 组合成了复合主键</strong>，保证了每一行数据的唯一性。</p> 
<pre><code class="prism language-c">INSERT INTO <span class="token function">exam_scores</span> <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_code<span class="token punctuation">)</span> <span class="token function">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'Math'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
INSERT INTO <span class="token function">exam_scores</span> <span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_code<span class="token punctuation">)</span> <span class="token function">VALUES</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'Math'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">--</span> ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span><span class="token operator">:</span> Duplicate entry <span class="token char">'1-Math'</span> <span class="token keyword">for</span> key <span class="token char">'PRIMARY'</span>
</code></pre> 
<p>通过以上示例，我们了解了主键在数据库中的重要性以及如何使用主键来确保数据的唯一性和完整性。</p> 
<h2><a id="6__189"></a>6. 自增长</h2> 
<p>自增长（<strong>Auto Increment</strong>）是一种数据库中常见的特性，用于自动分配唯一的递增值给指定的字段，通常与主键一起使用。</p> 
<p>自增长的特点包括：</p> 
<blockquote> 
 <p>任何一个字段要做自增长，前提是本身是一个索引（即有值）<br> 自增长字段必须是整数类型<br> 一张表最多只能有一个自增长字段</p> 
</blockquote> 
<p>案例：使用自增长字段<br> 在创建表时，可以使用 <strong>AUTO_INCREMENT</strong> 属性来实现自增长：</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">students</span> <span class="token punctuation">(</span>
    id INT UNSIGNED NOT <span class="token constant">NULL</span> PRIMARY KEY AUTO_INCREMENT<span class="token punctuation">,</span>
    name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span> DEFAULT <span class="token char">''</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上面的示例中，id 字段被指定为主键，并设置为自增长。当插入数据时，如果不给 id 字段赋值，系统会自动为其分配一个唯一的递增值。</p> 
<p>– 插入数据，自增长字段 id 会自动分配<br> <code>INSERT INTO students(name) VALUES('John');</code><br> <code>INSERT INTO students(name) VALUES('Alice');</code><br> <code>INSERT INTO students(name) VALUES(100,'Bob');</code><br> <code>INSERT INTO students(name) VALUES('Carol');</code><br> <code>INSERT INTO students(name) VALUES('David');</code></p> 
<p>以上操作将在 students 表中插入两行数据，每行数据的 id 字段会自动递增，生成唯一的值。</p> 
<p>插入两行数据后，表中的数据可能如下所示：</p> 
<pre><code class="prism language-c"><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span>
<span class="token operator">|</span>  <span class="token number">1</span>   <span class="token operator">|</span> John  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span>   <span class="token operator">|</span> Alice <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">100</span> <span class="token operator">|</span> Bob   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> Carol <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> David <span class="token operator">|</span>
<span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">+</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">+</span>

</code></pre> 
<p>在创建表时指定自动增长的初始值：</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">customers</span> <span class="token punctuation">(</span>
    id INT NOT <span class="token constant">NULL</span> PRIMARY KEY AUTO_INCREMENT<span class="token punctuation">,</span>
    tel <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sex <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> AUTO_INCREMENT<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
</code></pre> 
<p>或者创建后修改自动增长的初始值：</p> 
<p><code>ALTER TABLE customers AUTO_INCREMENT=1000;</code></p> 
<p>自增长的注意事项</p> 
<blockquote> 
 <p>一个表中只能有一个字段使用<strong>AUTO_INCREMENT</strong>约束，且该字段必须有唯一索引，通常为主键或主键的一部分。<br> 自增长字段必须具备<strong>NOT NULL</strong>属性。<br> 自增长字段只能是整数类型，例如<strong>TINYINT、SMALLINT、INT、BIGINT</strong>等。<br> 自增长字段的最大值受该字段的数据类型约束，如果达到上限，自增长机制就会失效。</p> 
</blockquote> 
<h2><a id="7__257"></a>7. 唯一键</h2> 
<p>在<strong>MySQL</strong>中，一张表往往有多个字段需要保证唯一性，即数据不能重复。然而，每张表只能有一个主键，这时就需要使用唯键来解决这个问题。唯键类似于主键，但有一些区别：</p> 
<blockquote> 
 <p>允许为空：唯键允许字段为空，且可以有多个空值，空字段不会进行唯一性比较。<br> 多个字段约束：唯键可以约束表中的多个字段，保证组合后的数据在业务上不重复。</p> 
</blockquote> 
<p>主键与唯键的区别</p> 
<p>主键更多地用于标识唯一性，而唯键则更多地用于保证业务上的数据不重复。举个例子来说：</p> 
<p>假设我们有一个商品管理系统，商品表中有商品编号和商品条形码两列信息。我们可以将商品编号作为主键，因为它可以唯一标识一个商品。而商品条形码需要保证在公司的业务上不能重复，但并不一定唯一标识一个商品，因此可以设计成唯一键。</p> 
<p>以下是如何使用主键和唯键设计产品表的示例：</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">Products</span> <span class="token punctuation">(</span>
    ProductID INT PRIMARY KEY<span class="token punctuation">,</span>
    Barcode <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> UNIQUE<span class="token punctuation">,</span>
    ProductName <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    QuantityInStock INT
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在这个示例中，<strong>ProductID</strong> 被设置为主键，因为它唯一标识每个产品。同时，<strong>Barcode</strong> 被设计为唯键，以确保每个产品都有一个唯一的条形码。</p> 
<p><code>INSERT INTO Products VALUES(1, 'ABC123', 'Product A', 100);</code><br> <code>INSERT INTO Products VALUES(2, 'XYZ789', 'Product B', 50);</code><br> <code>INSERT INTO Products VALUES(3, 'ABC123', 'Product C', 75);--唯键约束不允许重复的条形码</code></p> 
<p>删除唯一键：<br> <code>DROP INDEX 唯一键名 ON 表名;</code><br> 添加唯一键：<br> <code>ALTER TABLE 表名 ADD CONSTRAINT 唯一键名 UNIQUE (列名);</code></p> 
<h2><a id="8__292"></a>8. 外键</h2> 
<p>在数据库设计中，表与表之间的关联关系是非常常见的。外键约束（Foreign Key Constraint）就是用来定义表与表之间的关联关系的一种重要约束，它确保了数据的完整性和一致性。</p> 
<p><strong>什么是外键？</strong><br> 外键是一种表的字段，它指向另一个表中的主键或唯一键，从而建立了两个表之间的关系。通常，外键约束主要定义在从表上，从表中的外键列的数据必须在主表的主键列或唯一键列中存在，或者允许为空。</p> 
<p><strong>外键的语法</strong></p> 
<pre><code class="prism language-c">CREATE TABLE 表名 <span class="token punctuation">(</span>
    列名 数据类型<span class="token punctuation">,</span>
    FOREIGN <span class="token function">KEY</span> <span class="token punctuation">(</span>外键列名<span class="token punctuation">)</span> REFERENCES 主表名<span class="token punctuation">(</span>主键列名<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>示例：学生表与班级表的关联</strong><br> 假设我们有一个学生管理系统，其中包含学生表（<strong>students</strong>）和班级表（<strong>classes</strong>）。学生属于某个班级，我们需要通过外键约束来确保学生所属的班级在班级表中存在。</p> 
<p>首先，我们创建班级表：</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">classes</span> <span class="token punctuation">(</span>
    class_id INT PRIMARY KEY<span class="token punctuation">,</span>
    class_name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>接下来，创建学生表，并添加外键约束：</p> 
<pre><code class="prism language-c">CREATE TABLE <span class="token function">students</span> <span class="token punctuation">(</span>
    student_id INT PRIMARY KEY<span class="token punctuation">,</span>
    student_name <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> NOT <span class="token constant">NULL</span><span class="token punctuation">,</span>
    class_id INT<span class="token punctuation">,</span>
    FOREIGN <span class="token function">KEY</span> <span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> REFERENCES <span class="token function">classes</span><span class="token punctuation">(</span>class_id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>示例：插入数据</p> 
<pre><code class="prism language-c"><span class="token operator">--</span> 插入班级数据
INSERT INTO classes <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'C++班'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token char">'Java班'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">--</span> 插入学生数据，包括存在的班级和不存在的班级
INSERT INTO students <span class="token function">VALUES</span> <span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span> <span class="token char">'张三'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">,</span> <span class="token char">'李四'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token char">'王五'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>上述插入数据的最后一条语句会报错，因为学生表中的班级编号 3 在班级表中不存在。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/934b83fdf9cbcc1a48f26ef6dad8463e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Hadoop大数据应用：Yarn 节点实现扩容与缩容</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f11d2b2e61d3eeb4b0931d6c441ef334/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">蓝桥杯算法基础（16）：十大排序算法（计数排序）（基数排序）c语言版</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
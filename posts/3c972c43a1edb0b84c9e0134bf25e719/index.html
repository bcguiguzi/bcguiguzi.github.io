<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringCloud-04 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringCloud-04" />
<meta property="og:description" content="第五天：MybatisPlus&#43;SpringCloud重构User 微服务实践 全新技术栈 2.微服务组件架构图 2.MyBatisPlus 介绍 使用SpringBoot &#43; Mybatis &#43; MybatisPlus(MP) 全新注解方式，自动产生SQL语句，替代旧的通用Mapper。旧的通用Mapper是基于Mybatis拦截器的机制，而新的MybatisPlus是基于注解扫描机制，在启动服务时就进行加载，所以性能比旧的通用Mapper方式高很多。
MyBatisPlus官网：http://mp.baomidou.com
2.实现方式 方案
描述
备注
MyBatis
CartMapper接口
CartMapper.xml映射文件
手写SQL语句
通用Mapper
CartMapper接口
继承SysMapper接口
自动生成SQL语句
MP（MyBatisPlus）
CartMapper接口
继承BaseMapper接口
自动生成SQL语句
3.BaseMapper底层接口 已经封装好了CRUD，单表、批量、分页等19个方法，极大减少开发者的工作量。
4.MybatisPlus注解 Pojo对象上标识，自动驼峰规则
@TableName(&#34;tb_cart&#34;) //类和表的映射 public class Cart extends BasePojo{ private static final long serialVersionUID = 1L; //@TableField(exist=false) //数据库表中不存在的字段要标识 @TableId(value=&#34;id&#34;,type=IdType.AUTO) //主键自增 private Long id; @TableField(&#34;user_id&#34;) //属性和字段的映射 private Long userId; @TableName(&#34;tb_cart&#34;) //类和表的映射
@TableId(value=&#34;id&#34;,type=IdType.AUTO) //主键自增
@TableField(&#34;user_id&#34;) //属性和字段的映射
@TableField(exist=false) //表中不存在的字段要标识
5.条件构造器 Mybatis提供QBC( Query By Criteria)，实现面向对象的查询方式。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3c972c43a1edb0b84c9e0134bf25e719/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-18T22:36:32+08:00" />
<meta property="article:modified_time" content="2022-01-18T22:36:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringCloud-04</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<ol><li> <h2>第五天：MybatisPlus+SpringCloud重构User</h2> 
  <ol><li> <h3>微服务实践</h3> 
    <ol><li> <h4>全新技术栈</h4> </li></ol></li></ol></li></ol> 
<p><img alt="" height="113" src="https://images2.imgbox.com/c2/1e/0i06Bf0I_o.png" width="643"></p> 
<p></p> 
<p></p> 
<h4>2.微服务组件架构图</h4> 
<p><img alt="" height="427" src="https://images2.imgbox.com/2e/db/TjC6y0Pb_o.png" width="638"></p> 
<p></p> 
<h3>2.MyBatisPlus</h3> 
<ol><li> <h4>介绍</h4> </li></ol> 
<p><img alt="" height="113" src="https://images2.imgbox.com/ef/d0/DCdOkaLE_o.png" width="643"></p> 
<p>使用SpringBoot + Mybatis + MybatisPlus(MP) 全新注解方式，自动产生SQL语句，替代旧的通用Mapper。旧的通用Mapper是基于Mybatis拦截器的机制，而新的MybatisPlus是基于注解扫描机制，在启动服务时就进行加载，所以性能比旧的通用Mapper方式高很多。</p> 
<p>MyBatisPlus官网：<a href="http://mp.baomidou.com/" rel="nofollow" title="http://mp.baomidou.com">http://mp.baomidou.com</a></p> 
<p><img alt="" height="480" src="https://images2.imgbox.com/00/88/EkUfOHyw_o.png" width="507"></p> 
<p></p> 
<p></p> 
<h4>2.实现方式</h4> 
<table style="width:555px;"><tbody><tr><td> <p>方案</p> </td><td> <p>描述</p> </td><td> <p>备注</p> </td></tr><tr><td> <p>MyBatis</p> </td><td> <p>CartMapper接口</p> <p>CartMapper.xml映射文件</p> </td><td> <p>手写SQL语句</p> </td></tr><tr><td> <p>通用Mapper</p> </td><td> <p>CartMapper接口</p> <p>继承SysMapper接口</p> </td><td> <p>自动生成SQL语句</p> </td></tr><tr><td> <p>MP（MyBatisPlus）</p> </td><td> <p>CartMapper接口</p> <p>继承BaseMapper接口</p> </td><td> <p>自动生成SQL语句</p> </td></tr></tbody></table> 
<h4>3.BaseMapper底层接口</h4> 
<p>已经封装好了CRUD，单表、批量、分页等19个方法，极大减少开发者的工作量。</p> 
<p><img alt="" height="492" src="https://images2.imgbox.com/a8/05/8SV0lp0o_o.png" width="555"></p> 
<p></p> 
<p></p> 
<h4>4.MybatisPlus注解</h4> 
<p>Pojo对象上标识，自动驼峰规则</p> 
<pre><code class="language-javascript">@TableName("tb_cart")    //类和表的映射
public class Cart extends BasePojo{
private static final long serialVersionUID = 1L;
//@TableField(exist=false)  //数据库表中不存在的字段要标识

@TableId(value="id",type=IdType.AUTO)  //主键自增
private Long id;
@TableField("user_id")   //属性和字段的映射
private Long userId;</code></pre> 
<ul><li> <p>@TableName("tb_cart")                     //类和表的映射</p> </li><li> <p>@TableId(value="id",type=IdType.AUTO)  //主键自增</p> </li><li> <p>@TableField("user_id")                 //属性和字段的映射</p> </li><li> <p>@TableField(exist=false)               //表中不存在的字段要标识</p> </li></ul> 
<p></p> 
<p></p> 
<h4>5.条件构造器</h4> 
<p>Mybatis提供QBC( Query By Criteria)，实现面向对象的查询方式。</p> 
<p>实体包装器 EntityWrapper，用于处理 sql 拼接，排序，实体参数查询等。注意其使用的是数据库字段而不是java属性。</p> 
<p><img alt="" height="838" src="https://images2.imgbox.com/97/67/yjLhBN4U_o.png" width="381"></p> 
<p>例如：翻页查询</p> 
<pre><code class="language-javascript">public Page&lt;T&gt; selectPage(Page&lt;T&gt; page, EntityWrapper&lt;T&gt; entityWrapper) {
if (null != entityWrapper) {
entityWrapper.orderBy(page.getOrderByField(), page.isAsc());
}
page.setRecords(baseMapper.selectPage(page, entityWrapper));
return page;
}</code></pre> 
<p><strong>拼接SQL方式 一:</strong></p> 
<pre><code class="language-javascript">EntityWrapper&lt;User&gt; ew = new EntityWrapper&lt;User&gt;();
ew.setEntity(new User(1));
ew.where("user_name={0}", "'tonychen'").and("id=1")
.orNew("user_status={0}", "0").or("status=1")
.notLike("user_nickname", "tony")
.andNew("new=xx").like("hhh", "ddd")
.andNew("pwd=11").isNotNull("n1,n2").isNull("n3")
.groupBy("x1").groupBy("x2,x3")
.having("x1=11").having("x3=433")
.orderBy("name").orderBy("birthday,address");
System.out.println(ew.getSqlSegment());</code></pre> 
<p><strong>拼接 SQL方式 二:</strong></p> 
<pre><code class="language-javascript">int buyCount = selectCount(Condition.create()
.setSqlSelect("sum(quantity)")
.isNull("order_id")
.eq("user_id", 1)
.eq("type", 1)
.in("status", new Integer[]{0, 1})
.eq("product_id", 1)
.between("created_time", startDate, currentDate);</code></pre> 
<p></p> 
<p></p> 
<h4>6.拓展：MP工作原理</h4> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/df/69/WrT4fo9Y_o.png" width="1200"></p> 
<p></p> 
<h3>3.用户模块</h3> 
<ol><li> <h4>项目结构</h4> </li></ol> 
<p><img alt="" height="137" src="https://images2.imgbox.com/c5/0d/zVdhhQYe_o.png" width="356"></p> 
<p>jt-user-consumer使用hystrix、ribbon、feign。复用之前的eureka和zuul，只在zuul增加映射路径。</p> 
<p>注意feign中传递参数会自动转换成字符类型，如日期类型，所以只能靠字符串接参。</p> 
<p></p> 
<p></p> 
<h4>2.jt-gateway-zuul</h4> 
<p>application.yml</p> 
<pre><code class="language-javascript">server:
port: 8050
spring:
application:
name: gateway-zuul
eureka:
client:
serviceUrl:
defaultZone: http://user:password123@localhost:8761/eureka
zuul:
ignoredServices: '*'
routes:
app-jt-user-consumer:
path: /jt/**
serviceId: jt-user-consumer
app-sidecar:
path: /sidecar/**
serviceId: sidecar</code></pre> 
<p></p> 
<h3>4.提供者</h3> 
<ol><li> <h4>项目结构</h4> </li></ol> 
<p><img alt="" height="630" src="https://images2.imgbox.com/60/74/hGOAKYFx_o.png" width="326"></p> 
<p></p> 
<p></p> 
<h4>2.pom.xml</h4> 
<pre><code class="language-XML">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;groupId&gt;cn.jt&lt;/groupId&gt;
&lt;artifactId&gt;jt-user&lt;/artifactId&gt;
&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

&lt;parent&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
&lt;version&gt;1.5.4.RELEASE&lt;/version&gt;
&lt;relativePath /&gt;
&lt;/parent&gt;
&lt;properties&gt;
&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
&lt;java.version&gt;1.8&lt;/java.version&gt;
&lt;spring-cloud.version&gt;Dalston.SR1&lt;/spring-cloud.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
&lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!-- mybatisplus/mybatis/jdbc/druid --&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
&lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
&lt;version&gt;1.3.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;mysql&lt;/groupId&gt;
&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- mybatisplus与springboot整合 --&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.baomidou&lt;/groupId&gt;
&lt;artifactId&gt;mybatisplus-spring-boot-starter&lt;/artifactId&gt;
&lt;version&gt;1.0.5&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- MP 核心库 --&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.baomidou&lt;/groupId&gt;
&lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;
&lt;version&gt;2.1.8&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;
&lt;artifactId&gt;pagehelper-spring-boot-starter&lt;/artifactId&gt;
&lt;version&gt;1.2.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- alibaba的druid数据库连接池 --&gt;
&lt;dependency&gt;
&lt;groupId&gt;com.alibaba&lt;/groupId&gt;
&lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
&lt;version&gt;1.1.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;dependencyManagement&gt;
&lt;dependencies&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
&lt;version&gt;${spring-cloud.version}&lt;/version&gt;
&lt;type&gt;pom&lt;/type&gt;
&lt;scope&gt;import&lt;/scope&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;/project&gt;</code></pre> 
<p></p> 
<p></p> 
<h4>3.pojo</h4> 
<pre><code class="language-javascript">package cn.jt.pojo;
import com.baomidou.mybatisplus.annotations.TableId;
import com.baomidou.mybatisplus.annotations.TableName;
import com.baomidou.mybatisplus.enums.IdType;
//利用MybatisPlus的注解
@TableName(value="user") //类和数据库表的映射
public class User {
@TableId(type=IdType.AUTO)      //主键，自增
private Integer id;
private String name;

//对日期类型进行格式转换
private String birthday;
private String address;


public Integer getId() {
return id;
}
public void setId(Integer id) {
this.id = id;
}
public String getName() {
return name;
}
public void setName(String name) {
this.name = name;
}
public String getAddress() {
return address;
}
public void setAddress(String address) {
this.address = address;
}
public String getBirthday() {
return birthday;
}
public void setBirthday(String birthday) {
this.birthday = birthday;
}
}</code></pre> 
<p></p> 
<p></p> 
<h4>4.UserMapper</h4> 
<pre><code class="language-javascript">package cn.jt.mapper;
import com.baomidou.mybatisplus.mapper.BaseMapper;
import cn.jt.pojo.User;
//使用MP后，继承BaseMapper接口，实现单表CRUD SQL语句
public interface UserMapper extends BaseMapper&lt;User&gt;{
}</code></pre> 
<p></p> 
<p></p> 
<h4>5.UserServiceImpl</h4> 
<pre><code class="language-Kotlin">package cn.jt.service;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import cn.jt.mapper.UserMapper;
import cn.jt.pojo.User;
@Service
public class UserServiceImpl implements UserService{
@Autowired //注入Mapper
private UserMapper userMapper;

//查询所有
public List&lt;User&gt; find(){
return userMapper.selectList(null);
}

//新增
public void insert(User user){
userMapper.insert(user);
}

//修改
public void update(User user){
userMapper.updateById(user);
}

//批量删除
public void delete(List&lt;Integer&gt; ids){
userMapper.deleteBatchIds(ids);
}
}</code></pre> 
<p></p> 
<p></p> 
<h4>6.UserService</h4> 
<pre><code class="language-javascript">package cn.jt.service;
import java.util.List;
import cn.jt.pojo.User;
public interface UserService {
public List&lt;User&gt; find();
public void insert(User user);
public void update(User user);
public void delete(List&lt;Integer&gt; ids);
}</code></pre> 
<p></p> 
<p></p> 
<h4>7.UserController</h4> 
<pre><code class="language-javascript">package cn.jt.controller;
import java.util.ArrayList;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import cn.jt.pojo.User;
import cn.jt.service.UserService;
@RestController   //微服务调用，返回对象json串
@RequestMapping("/user")
public class UserController {
@Autowired //注入UserService接口
private UserService userService;

@RequestMapping("/find")
public List&lt;User&gt; find(){
return userService.find();
}

@RequestMapping("/insert/{name}/{birthday}/{address}")
public String insert(User user){
try{
userService.insert(user);
return "insert success.";
}catch(Exception e){
return "insert error.";
}
}

@RequestMapping("/update/{name}/{birthday}/{address}/{id}")
public String update(User user){
try{
userService.update(user);
return "update success.";
}catch(Exception e){
return "update error.";
}
}

@RequestMapping("/delete/{id}")
public String delete(@PathVariable Integer id){
try{
List&lt;Integer&gt; ids = new ArrayList&lt;Integer&gt;();
ids.add(id);

userService.delete(ids);
return "delete success.";
}catch(Exception e){
return "delete error.";
}
}

}</code></pre> 
<p></p> 
<p></p> 
<h4>8.application.yml</h4> 
<pre><code class="language-javascript">server:
port: 7900

spring:
application:
name: jt-user
datasource:
type: com.alibaba.druid.pool.DruidDataSource
driver-class-name: com.mysql.jdbc.Driver
url: jdbc:mysql://127.0.0.1:3306/jtdb
username: root
password: root

eureka:
client:
serviceUrl:
defaultZone: http://user:password123@localhost:8761/eureka
mybatis:
mapUnderscoreToCamelCase: true
typeAliasesPackage: cn.jt.pojo
mapperLocations: classpath:mappers/*.xml

mybatis-plus:
configuration:
map-underscore-to-camel-case: true
logging:
level:
cn.jt.mapper: debug   </code></pre> 
<p></p> 
<h3>5.消费者</h3> 
<ol><li> <h4>项目结构</h4> </li></ol> 
<p><img alt="" height="630" src="https://images2.imgbox.com/08/72/sXzQmUp4_o.png" width="326"></p> 
<p></p> 
<p></p> 
<h4>2.pom.xml</h4> 
<pre><code class="language-XML">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;groupId&gt;cn.jt&lt;/groupId&gt;
&lt;artifactId&gt;jt-user-consumer&lt;/artifactId&gt;
&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

&lt;parent&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
&lt;version&gt;1.5.4.RELEASE&lt;/version&gt;
&lt;relativePath /&gt;
&lt;/parent&gt;
&lt;properties&gt;
&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
&lt;java.version&gt;1.8&lt;/java.version&gt;
&lt;spring-cloud.version&gt;Dalston.SR1&lt;/spring-cloud.version&gt;
&lt;/properties&gt;
&lt;dependencies&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
&lt;artifactId&gt;spring-cloud-starter-eureka&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
&lt;artifactId&gt;spring-cloud-starter-hystrix&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
&lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;dependencyManagement&gt;
&lt;dependencies&gt;
&lt;dependency&gt;
&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
&lt;version&gt;${spring-cloud.version}&lt;/version&gt;
&lt;type&gt;pom&lt;/type&gt;
&lt;scope&gt;import&lt;/scope&gt;
&lt;/dependency&gt;
&lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;/project&gt;</code></pre> 
<p></p> 
<p></p> 
<h4>3.pojo</h4> 
<pre><code class="language-javascript">package cn.jt.pojo;
import com.baomidou.mybatisplus.annotations.TableId;
import com.baomidou.mybatisplus.annotations.TableName;
import com.baomidou.mybatisplus.enums.IdType;
//利用MybatisPlus的注解
@TableName(value="user") //类和数据库表的映射
public class User {
@TableId(type=IdType.AUTO)      //主键，自增
private Integer id;
private String name;

//对日期类型进行格式转换
private String birthday;
private String address;


public Integer getId() {
return id;
}
public void setId(Integer id) {
this.id = id;
}
public String getName() {
return name;
}
public void setName(String name) {
this.name = name;
}
public String getAddress() {
return address;
}
public void setAddress(String address) {
this.address = address;
}
public String getBirthday() {
return birthday;
}
public void setBirthday(String birthday) {
this.birthday = birthday;
}
}</code></pre> 
<p></p> 
<p></p> 
<h4>4.UserFeign</h4> 
<pre><code class="language-javascript">package cn.jt.feign;
import java.util.List;
import org.springframework.cloud.netflix.feign.FeignClient;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import cn.jt.pojo.User;
@FeignClient("jt-user")     //指向访问的提供者
public interface UserFeign {
@RequestMapping("/user/find")
public List&lt;User&gt; find();

@RequestMapping("/user/insert/{name}/{birthday}/{address}")
public String insert(@PathVariable("name") String name,
@PathVariable("birthday") String birthday,
@PathVariable("address") String address);

@RequestMapping("/user/update/{name}/{birthday}/{address}/{id}")
public String update(@PathVariable("name") String name,
@PathVariable("birthday") String birthday,
@PathVariable("address") String address,
@PathVariable("id") Integer id);

@RequestMapping("/user/delete/{id}")
public String delete(@PathVariable("id") Integer id);
}</code></pre> 
<p></p> 
<p></p> 
<h4>5.UserController</h4> 
<pre><code class="language-javascript">package cn.jt.controller;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import cn.jt.feign.UserFeign;
import cn.jt.pojo.User;
@RestController
@RequestMapping("/user")
public class UserController {
//注入Feign接口
@Autowired
private UserFeign userFeign;

@RequestMapping("/find")
public List&lt;User&gt; find(){
return userFeign.find();
}

@RequestMapping("/insert/{name}/{birthday}/{address}")
public String insert(User user){

return userFeign.insert(user.getName(), user.getBirthday(), user.getAddress());
}

@RequestMapping("/update/{name}/{birthday}/{address}/{id}")
public String update(User user){
return userFeign.update(user.getName(),user.getBirthday(),user.getAddress(),user.getId());
}

@RequestMapping("/delete/{id}")
public String delete(@PathVariable("id") Integer id){
return userFeign.delete(id);
}
}</code></pre> 
<p></p> 
<p></p> 
<h4>6.RunAppUserConsumer</h4> 
<pre><code class="language-javascript">package cn.jt;
import org.springframework.boot.SpringApplication;
import org.springframework.cloud.client.SpringCloudApplication;
import org.springframework.cloud.netflix.feign.EnableFeignClients;
@SpringCloudApplication
@EnableFeignClients
public class RunAppUserConsumer {
public static void main(String[] args) {
SpringApplication.run(RunAppUserConsumer.class, args);
}
}</code></pre> 
<p></p> 
<p></p> 
<h4>7.application.yml</h4> 
<pre><code class="language-javascript">server:
port: 9001
spring:
application:
name: jt-user-consumer
eureka:
client:
serviceUrl:
defaultZone: http://user:password123@localhost:8761/eureka
logging:
level:
root: INFO</code></pre> 
<hr> 
<h2><span style="color:#9c8ec1;">作者：Darren</span></h2> 
<h2><span style="color:#9c8ec1;">QQ ：603026148</span></h2> 
<h2><span style="color:#9c8ec1;">以上内容归Darren所有，如果有什么错误或者不足的地方请联系我，希望我们共同进步。</span></h2> 
<hr> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/138b939ae733b48bcbf6bb9ff4f8422c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">推荐给大家一个恶搞代码，让你的好友电脑关机----关机代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b62ea08ccfa04acef98032c4f0527ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Bean内所有String类型变量去除前后空格trim</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
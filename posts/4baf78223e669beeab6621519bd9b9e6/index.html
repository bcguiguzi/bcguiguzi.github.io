<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>记录对接京东宙斯API -- 同步订单信息到自身系统 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="记录对接京东宙斯API -- 同步订单信息到自身系统" />
<meta property="og:description" content="记录对接京东宙斯API -- 同步订单信息到自身系统 目录1. 需求2. 准备工作一: 查看官方文档3. 准备工作二: 申请京东云鼎并入驻4. 创建一个新的项目并部署到云鼎.5. 调用订单API代码.6. JdService 目录 1. 需求 根据产品大大的需求描述：
对客户的京东旗舰店里的订单信息同步到自身开发的后台管理中.实现对订单信息简单的搜索功能.实现人工同步的功能.
2. 准备工作一: 查看官方文档 PS: 在寻找AIP时, 可根据需求的不同, 寻找对应的API文档.
找到官方API时, 当时的我感觉调用订单API的方式应该和其他API是一样的, 有了京东宙斯账号就可以, 但…实践调用以后, 很明显我错了.
在调用订单API时, 它返回了一个错误信息给我: 该api是敏感api，请将您的app入驻云鼎平台方可调用
返回的这条信息很明显的告诉我, 要我去申请京东云鼎平台的账号,并且还要入驻.
PS: 入驻云鼎是要钱的, 因为要购买云主机.
3. 准备工作二: 申请京东云鼎并入驻 入驻京东云鼎的具体流程这里我就展开讲述了, 官方有一套很完善的流程.
这是京东官方入驻云鼎的流程, 如果有感兴趣的小伙伴想了解一下可以点击这个链接: 入鼎公告
至此, 准备工作完成.
4. 创建一个新的项目并部署到云鼎. PS: 之所以要创建一个新的项目并部署到云鼎, 是因为订单API是属于敏感类型的, 只能内部调用.
5. 调用订单API代码. 京东官方订单API文档
/** * @Author 蠕动的小蜗牛 * @Description 根据条件检索订单信息 （仅适用于SOP、LBP，SOPL类型，FBP类型请调取FBP订单检索 jingdong.pop.order.search） * @Date 16:45 2019/8/13 * @Param [accessToken, startDateStr, endDateStr] * @Param [accessToken, 开始时间, 结束时间, 订单状态, 返回字段, 查询类型, 当前页, 页大小] * @return com." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/4baf78223e669beeab6621519bd9b9e6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-29T22:59:51+08:00" />
<meta property="article:modified_time" content="2019-12-29T22:59:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">记录对接京东宙斯API -- 同步订单信息到自身系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>记录对接京东宙斯API -- 同步订单信息到自身系统</h4> 
 <ul><li><a href="#_2" rel="nofollow">目录</a></li><li><ul><li><a href="#1__3" rel="nofollow">1. 需求</a></li><li><a href="#2___11" rel="nofollow">2. 准备工作一: 查看官方文档</a></li><li><a href="#3___20" rel="nofollow">3. 准备工作二: 申请京东云鼎并入驻</a></li><li><a href="#4___26" rel="nofollow">4. 创建一个新的项目并部署到云鼎.</a></li><li><a href="#5__API_30" rel="nofollow">5. 调用订单API代码.</a></li><li><a href="#6_JdService_91" rel="nofollow">6. JdService</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>目录</h2> 
<h3><a id="1__3"></a>1. 需求</h3> 
<p>根据产品大大的需求描述：</p> 
<ol><li>对客户的京东旗舰店里的订单信息同步到自身开发的后台管理中.</li><li>实现对订单信息简单的搜索功能.</li><li>实现人工同步的功能.<br> <br></li></ol> 
<h3><a id="2___11"></a>2. 准备工作一: 查看官方文档</h3> 
<p><mark>PS: 在寻找AIP时, 可根据需求的不同, 寻找对应的API文档.</mark><br> <img src="https://images2.imgbox.com/a7/92/h8UZI9Yx_o.png" alt=" 根据条件检索订单信息"><br> 找到官方API时, 当时的我感觉调用订单API的方式应该和其他API是一样的, 有了<mark>京东宙斯账号</mark>就可以, 但…实践调用以后, 很明显我错了.<br> 在调用订单API时, 它返回了一个错误信息给我: <mark>该api是敏感api，请将您的app入驻云鼎平台方可调用</mark><br> 返回的这条信息很明显的告诉我, 要我去申请<mark>京东云鼎平台的账号,并且还要入驻</mark>.<br> <strong><code>PS: 入驻云鼎是要钱的, 因为要购买云主机.</code></strong><br> <br></p> 
<h3><a id="3___20"></a>3. 准备工作二: 申请京东云鼎并入驻</h3> 
<p>入驻京东云鼎的具体流程这里我就展开讲述了, 官方有一套很完善的流程.<br> 这是京东官方入驻云鼎的流程, 如果有感兴趣的小伙伴想了解一下可以点击这个链接: <a href="https://yd.jdcloud.com/#/" rel="nofollow">入鼎公告</a><br> 至此, 准备工作完成.<br> <br></p> 
<h3><a id="4___26"></a>4. 创建一个新的项目并部署到云鼎.</h3> 
<p><mark>PS: 之所以要创建一个新的项目并部署到云鼎, 是因为订单API是属于敏感类型的, 只能内部调用.</mark><br> <br></p> 
<h3><a id="5__API_30"></a>5. 调用订单API代码.</h3> 
<p><a href="http://open.jd.com/home/home#/doc/api?apiCateId=55&amp;apiId=2388&amp;apiName=jingdong.pop.order.enSearch" rel="nofollow">京东官方订单API文档</a></p> 
<pre><code class="prism language-javascript">   <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 根据条件检索订单信息 （仅适用于SOP、LBP，SOPL类型，FBP类型请调取FBP订单检索  jingdong.pop.order.search）
     * @Date 16:45 2019/8/13
     * @Param [accessToken, startDateStr, endDateStr]
     * @Param [accessToken, 开始时间, 结束时间, 订单状态, 返回字段, 查询类型, 当前页, 页大小]
     * @return com.jd.open.api.sdk.domain.order.OrderQueryJsfService.response.enSearch.OrderListResult
     **/</span>
    <span class="token keyword">public</span> OrderListResult <span class="token function">findAllOrderData</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> String startDateStr<span class="token punctuation">,</span> String endDateStr<span class="token punctuation">,</span>
                                            String orderState<span class="token punctuation">,</span> String optionalFields<span class="token punctuation">,</span> Integer dateType<span class="token punctuation">,</span>
                                            String page<span class="token punctuation">,</span> String pageSize<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderEnSearchRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopOrderEnSearchRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** WAIT_SELLER_STOCK_OUT 等待出库，则start_date可以为否（开始时间和结束时间均为空，默认返回前一个月的订单），
            order_state为其他值，则start_date必须为是（开始时间和结束时间，不得相差超过1个月。此时间仅针对订单状态及运单号修改的时间） */</span>
            request<span class="token punctuation">.</span><span class="token function">setStartDate</span><span class="token punctuation">(</span>startDateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/**  WAIT_SELLER_STOCK_OUT 等待出库，则start_date可以为否（开始时间和结束时间均为空，默认返回前一个月的订单），
             order_state为其他值，则start_date必须为是（开始时间和结束时间，不得相差超过1个月。此时间仅针对订单状态及运单号修改的时间） */</span>
            request<span class="token punctuation">.</span><span class="token function">setEndDate</span><span class="token punctuation">(</span>endDateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/**  多订单状态可以用英文逗号隔开,请用英文逗号拼接英文状态传递给jos，而不是数字。
                1）WAIT_SELLER_STOCK_OUT 等待出库
                2）WAIT_GOODS_RECEIVE_CONFIRM 等待确认收货
                3）WAIT_SELLER_DELIVERY 等待发货（只适用于海外购商家，含义为'等待境内发货'标签下的订单,非海外购商家无需使用）
                4) PAUSE 暂停（loc订单可通过此状态获取）
                5）FINISHED_L 完成
                6）TRADE_CANCELED 取消
                7）LOCKED 已锁定
                8）POP_ORDER_PAUSE pop业务暂停，如3c号卡/履约/黄金 可传此状态。*/</span>
            request<span class="token punctuation">.</span><span class="token function">setOrderState</span><span class="token punctuation">(</span>orderState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  测试接口阶段, 查询 已取消的订单</span>
            <span class="token comment">/** 需返回的字段列表。可选值，请参考返回结果集中的对象参数描述：orderInfo结构体中的所有字段；字段之间用,分隔 */</span>
            request<span class="token punctuation">.</span><span class="token function">setOptionalFields</span><span class="token punctuation">(</span>optionalFields<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 查询的页数 */</span>
            request<span class="token punctuation">.</span><span class="token function">setPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 每页的条数（最大page_size 100条） */</span>
            request<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 排序方式，默认升序,1是降序,其它数字都是升序 */</span>
            request<span class="token punctuation">.</span><span class="token function">setSortType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 查询时间类型，默认按修改时间查询。 1为按订单创建时间查询；其它数字为按订单（订单状态、修改运单号）修改时间 */</span>
            request<span class="token punctuation">.</span><span class="token function">setDateType</span><span class="token punctuation">(</span>dateType<span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderEnSearchResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"    京东旗舰店订单信息:    "</span> <span class="token operator">+</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getSearchorderinfoResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"************ 查询京东旗舰店订单信息成功  ************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                OrderListResult searchorderinfoResult <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getSearchorderinfoResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> searchorderinfoResult<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"************ 查询京东旗舰店订单信息失败  ************"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<br> 
<h3><a id="6_JdService_91"></a>6. JdService</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">package</span> <span class="token constant">XXXX</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span>JSONObject<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>DefaultJdClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>JdClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>delivery<span class="token punctuation">.</span>DeliveryCompany<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>order<span class="token punctuation">.</span>OrderNotPayService<span class="token punctuation">.</span>response<span class="token punctuation">.</span>notPayOrderInfo<span class="token punctuation">.</span>OrderDataNotPayInfo<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>order<span class="token punctuation">.</span>OrderNotPayService<span class="token punctuation">.</span>response<span class="token punctuation">.</span>notPayOrderInfo<span class="token punctuation">.</span>PaginatedInfo<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>order<span class="token punctuation">.</span>OrderQueryJsfService<span class="token punctuation">.</span>response<span class="token punctuation">.</span>enSearch<span class="token punctuation">.</span>OrderListResult<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>order<span class="token punctuation">.</span>OrderQueryJsfService<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">.</span>OrderResult<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>order<span class="token punctuation">.</span>OrderQueryJsfService<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">.</span>OrderSearchInfo<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>domain<span class="token punctuation">.</span>order<span class="token punctuation">.</span>OrderShipmentService<span class="token punctuation">.</span>response<span class="token punctuation">.</span>shipment<span class="token punctuation">.</span>OperatorResult<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>request<span class="token punctuation">.</span>delivery<span class="token punctuation">.</span>GetVenderAllDeliveryCompanyRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>request<span class="token punctuation">.</span>imgzone<span class="token punctuation">.</span>ImgzoneCategoryQueryRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>request<span class="token punctuation">.</span>imgzone<span class="token punctuation">.</span>ImgzonePictureUploadRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>request<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderEnSearchRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>request<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderGetRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>request<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderNotPayOrderInfoRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>request<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderShipmentRequest<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>delivery<span class="token punctuation">.</span>GetVenderAllDeliveryCompanyResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>imgzone<span class="token punctuation">.</span>ImgzoneCategory<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>imgzone<span class="token punctuation">.</span>ImgzoneCategoryQueryResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>imgzone<span class="token punctuation">.</span>ImgzonePictureUploadResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderEnSearchResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderGetResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderNotPayOrderInfoResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>jd<span class="token punctuation">.</span>open<span class="token punctuation">.</span>api<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>response<span class="token punctuation">.</span>order<span class="token punctuation">.</span>PopOrderShipmentResponse<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">XXX</span><span class="token punctuation">.</span>Config<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">XXX</span><span class="token punctuation">.</span>JSONUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">XXX</span><span class="token punctuation">.</span>CollectionUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">XXX</span><span class="token punctuation">.</span>DateUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token constant">XXX</span><span class="token punctuation">.</span>HttpUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>digest<span class="token punctuation">.</span>DigestUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span>StringUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>Logger<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>LoggerFactory<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span>

<span class="token keyword">import</span> javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Resource<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>URLEncoder<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @ClassName JdService
 * @Description: 京东API接口相关
 * @Auther: 蠕动的小蜗牛
 * @Date: 2019/4/16 16:05
 * @Version: 1.0
 **/</span>
@Service
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> final Logger <span class="token constant">LOGGER</span> <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>JdService<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * appKey
     */</span>
    <span class="token keyword">private</span> String <span class="token constant">APPKEY</span> <span class="token operator">=</span> <span class="token string">"XXX"</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * AppSecret
     */</span>
    <span class="token keyword">private</span> String <span class="token constant">APPSECRET</span> <span class="token operator">=</span> <span class="token string">"XXX"</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 接口版本
     */</span>
    <span class="token keyword">private</span> String <span class="token constant">V</span> <span class="token operator">=</span> <span class="token string">"2.0"</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * 接口URL(线上)
     */</span>
    <span class="token keyword">private</span> String <span class="token constant">SERVER_URL</span> <span class="token operator">=</span> <span class="token string">"https://api.jd.com/routerjson"</span><span class="token punctuation">;</span>

    @Resource
    <span class="token keyword">private</span> Config config<span class="token punctuation">;</span>


    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description sop出库发货接口 (jingdong.pop.order.shipment)
     * @Date 10:32 2019/8/17
     * @Param [accessToken, orderId, logiCoprId, logiNo, installId]
     * @Param [accessToken, 订单号, 物流公司ID, 运单号, 安装公司]
     * @return 0 发货失败,  1 发货成功
     **/</span>
    <span class="token keyword">public</span> Boolean <span class="token function">doShipment</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> Long orderId<span class="token punctuation">,</span> String logiCoprId<span class="token punctuation">,</span> String logiNo<span class="token punctuation">,</span> Long installId<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderShipmentRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopOrderShipmentRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setOrderId</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 物流公司ID(只可通过获取商家物流公司接口获得),多个物流公司以|分隔。
             如：2100|4700。请注意：如果填写厂家自送（1274），
             则不会保存物流单号，也不会有具体的跟踪信息。 request.setLogiCoprId("2100|4700") */</span>
            request<span class="token punctuation">.</span><span class="token function">setLogiCoprId</span><span class="token punctuation">(</span>logiCoprId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 运单号(当厂家自送时运单号可为空，不同物流公司的运单号用|分隔，
             如果同一物流公司有多个运单号，则用英文逗号分隔) 。
             如：1200458628372,111232|468778814888,323232323
             request.setLogiNo("1200458628372,111232|468778814888,323232323 "); */</span>
            request<span class="token punctuation">.</span><span class="token function">setLogiNo</span><span class="token punctuation">(</span>logiNo<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setInstallId</span><span class="token punctuation">(</span>installId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderShipmentResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"************* sop出库发货接口: "</span> <span class="token operator">+</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            OperatorResult sopjosshipmentResult <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getSopjosshipmentResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sopjosshipmentResult <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">return</span> sopjosshipmentResult<span class="token punctuation">.</span><span class="token function">getSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 获取商家物流公司
     * @Date 11:46 2019/8/17
     * @Param [accessToken]
     * @return void
     **/</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>DeliveryCompany<span class="token operator">&gt;</span> <span class="token function">findAllJdCompanyData</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            GetVenderAllDeliveryCompanyRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GetVenderAllDeliveryCompanyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setFields</span><span class="token punctuation">(</span><span class="token string">"id,name,description"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            GetVenderAllDeliveryCompanyResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"获取商家物流公司: "</span> <span class="token operator">+</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            List<span class="token operator">&lt;</span>DeliveryCompany<span class="token operator">&gt;</span> deliveryList <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getDeliveryList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>CollectionUtils<span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>deliveryList<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> deliveryList<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 输入单个SOP订单id，得到所有相关订单信息 (jingdong.pop.order.get) 拼接URI
     * @Date 16:03 2019/8/14
     * @Param [accessToken, optionalFields, orderId]
     * @Param [accessToken, 返回字段, orderId]
     * @return com.jd.open.api.sdk.domain.order.OrderQueryJsfService.response.get.OrderSearchInfo
     **/</span>
    <span class="token keyword">public</span> JSONObject <span class="token function">findOrderData</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> String optionalFields<span class="token punctuation">,</span> Long orderId<span class="token punctuation">,</span> String pin<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>


        <span class="token comment">// 生成签名</span>
        String method <span class="token operator">=</span> <span class="token string">"jingdong.pop.order.get"</span><span class="token punctuation">;</span>
        String timestamp <span class="token operator">=</span> DateUtils<span class="token punctuation">.</span><span class="token function">convertDate2String</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"optional_fields"</span><span class="token punctuation">,</span> optionalFields<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"order_id"</span><span class="token punctuation">,</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"pin"</span><span class="token punctuation">,</span> pin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        String requestParam <span class="token operator">=</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>


        HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"v"</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"timestamp"</span><span class="token punctuation">,</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"app_key"</span><span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"app_secret"</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"access_token"</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"360buy_param_json"</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        String sign <span class="token operator">=</span> <span class="token function">jdSign</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 拼接URL</span>
            String url <span class="token operator">=</span> <span class="token constant">SERVER_URL</span> <span class="token operator">+</span> <span class="token string">"?v="</span> <span class="token operator">+</span> <span class="token constant">V</span> <span class="token operator">+</span>
                    <span class="token string">"&amp;method="</span> <span class="token operator">+</span> method <span class="token operator">+</span>
                    <span class="token string">"&amp;app_key="</span> <span class="token operator">+</span> <span class="token constant">APPKEY</span> <span class="token operator">+</span>
                    <span class="token string">"&amp;access_token="</span> <span class="token operator">+</span> accessToken <span class="token operator">+</span>
                    <span class="token string">"&amp;360buy_param_json="</span> <span class="token operator">+</span> URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>requestParam<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                    <span class="token string">"&amp;timestamp="</span> <span class="token operator">+</span> URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                    <span class="token string">"&amp;sign="</span> <span class="token operator">+</span> sign<span class="token punctuation">;</span>

            JSONObject jsonObject <span class="token operator">=</span> HttpUtils<span class="token punctuation">.</span><span class="token function">doGetJson</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"===============京东API 输入单个SOP订单id，得到所有相关订单信息: "</span> <span class="token operator">+</span> jsonObject<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"====================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> jsonObject<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"=============== 京东API 输入单个SOP订单id，得到所有相关订单信息!!! ====================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 输入单个SOP订单id，得到所有相关订单信息 (jingdong.pop.order.get)
     * @Date 16:03 2019/8/14
     * @Param [accessToken, optionalFields, orderId]
     * @Param [accessToken, 返回字段, orderId]
     * @return com.jd.open.api.sdk.domain.order.OrderQueryJsfService.response.get.OrderSearchInfo
     **/</span>
    <span class="token keyword">public</span> OrderResult <span class="token function">findOrderDetailsData</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> String optionalFields<span class="token punctuation">,</span> Long orderId<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderGetRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopOrderGetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//            request.setOrderState("WAIT_SELLER_DELIVERY"); // 不是必填</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>StringUtils<span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>optionalFields<span class="token punctuation">)</span><span class="token punctuation">)</span> optionalFields <span class="token operator">=</span> <span class="token string">"pin"</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setOptionalFields</span><span class="token punctuation">(</span>optionalFields<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setOrderId</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 订单号,并且有效的订单号</span>
            PopOrderGetResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"输入单个SOP订单id，得到所有相关订单信息: "</span> <span class="token operator">+</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            OrderResult orderDetailInfo <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getOrderDetailInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>orderDetailInfo <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> orderDetailInfo<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"****************** 输入单个SOP订单id，得到所有相关订单信息失败 *****************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 批量查询未付款订单(jingdong.pop.order.notPayOrderInfo)
     * @Date 15:22 2019/8/14
     * @Param [accessToken, startDateStr, endDateStr, page,  pageSize]
     * @Param [accessToken,  开始时间,     结束时间, 当前页, 页大小]
     * @return java.util.List&lt;com.jd.open.api.sdk.domain.order.OrderNotPayService.response.notPayOrderInfo.OrderDataNotPayInfo&gt;
     **/</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>OrderDataNotPayInfo<span class="token operator">&gt;</span> <span class="token function">findWaitPayOrderData</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> Date startDateStr<span class="token punctuation">,</span> Date endDateStr<span class="token punctuation">,</span>
                                                          Integer page<span class="token punctuation">,</span> Integer pageSize<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderNotPayOrderInfoRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopOrderNotPayOrderInfoRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setStartDate</span><span class="token punctuation">(</span>startDateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setEndDate</span><span class="token punctuation">(</span>endDateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderNotPayOrderInfoResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"***************** 批量查询未付款订单: "</span> <span class="token operator">+</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            PaginatedInfo paginatedInfo <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getPaginatedInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>paginatedInfo <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                List<span class="token operator">&lt;</span>OrderDataNotPayInfo<span class="token operator">&gt;</span> pageList <span class="token operator">=</span> paginatedInfo<span class="token punctuation">.</span><span class="token function">getPageList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>CollectionUtils<span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>pageList<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> pageList<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"***************** 批量查询未付款订单失败 *****************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 根据条件检索订单信息 （仅适用于SOP、LBP，SOPL类型，FBP类型请调取FBP订单检索  jingdong.pop.order.search）
     * @Date 16:45 2019/8/13
     * @Param [accessToken, startDateStr, endDateStr]
     * @Param [accessToken, 开始时间, 结束时间, 订单状态, 返回字段, 查询类型, 当前页, 页大小]
     * @return com.jd.open.api.sdk.domain.order.OrderQueryJsfService.response.enSearch.OrderListResult
     **/</span>
    <span class="token keyword">public</span> OrderListResult <span class="token function">findAllOrderData</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> String startDateStr<span class="token punctuation">,</span> String endDateStr<span class="token punctuation">,</span>
                                            String orderState<span class="token punctuation">,</span> String optionalFields<span class="token punctuation">,</span> Integer dateType<span class="token punctuation">,</span>
                                            String page<span class="token punctuation">,</span> String pageSize<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderEnSearchRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PopOrderEnSearchRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** WAIT_SELLER_STOCK_OUT 等待出库，则start_date可以为否（开始时间和结束时间均为空，默认返回前一个月的订单），
            order_state为其他值，则start_date必须为是（开始时间和结束时间，不得相差超过1个月。此时间仅针对订单状态及运单号修改的时间） */</span>
            request<span class="token punctuation">.</span><span class="token function">setStartDate</span><span class="token punctuation">(</span>startDateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/**  WAIT_SELLER_STOCK_OUT 等待出库，则start_date可以为否（开始时间和结束时间均为空，默认返回前一个月的订单），
             order_state为其他值，则start_date必须为是（开始时间和结束时间，不得相差超过1个月。此时间仅针对订单状态及运单号修改的时间） */</span>
            request<span class="token punctuation">.</span><span class="token function">setEndDate</span><span class="token punctuation">(</span>endDateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/**  多订单状态可以用英文逗号隔开,请用英文逗号拼接英文状态传递给jos，而不是数字。
                1）WAIT_SELLER_STOCK_OUT 等待出库
                2）WAIT_GOODS_RECEIVE_CONFIRM 等待确认收货
                3）WAIT_SELLER_DELIVERY 等待发货（只适用于海外购商家，含义为'等待境内发货'标签下的订单,非海外购商家无需使用）
                4) PAUSE 暂停（loc订单可通过此状态获取）
                5）FINISHED_L 完成
                6）TRADE_CANCELED 取消
                7）LOCKED 已锁定
                8）POP_ORDER_PAUSE pop业务暂停，如3c号卡/履约/黄金 可传此状态。*/</span>
            request<span class="token punctuation">.</span><span class="token function">setOrderState</span><span class="token punctuation">(</span>orderState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  测试接口阶段, 查询 已取消的订单</span>
            <span class="token comment">/** 需返回的字段列表。可选值，请参考返回结果集中的对象参数描述：orderInfo结构体中的所有字段；字段之间用,分隔 */</span>
            request<span class="token punctuation">.</span><span class="token function">setOptionalFields</span><span class="token punctuation">(</span>optionalFields<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 查询的页数 */</span>
            request<span class="token punctuation">.</span><span class="token function">setPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 每页的条数（最大page_size 100条） */</span>
            request<span class="token punctuation">.</span><span class="token function">setPageSize</span><span class="token punctuation">(</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 排序方式，默认升序,1是降序,其它数字都是升序 */</span>
            request<span class="token punctuation">.</span><span class="token function">setSortType</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">/** 查询时间类型，默认按修改时间查询。 1为按订单创建时间查询；其它数字为按订单（订单状态、修改运单号）修改时间 */</span>
            request<span class="token punctuation">.</span><span class="token function">setDateType</span><span class="token punctuation">(</span>dateType<span class="token punctuation">)</span><span class="token punctuation">;</span>
            PopOrderEnSearchResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"    京东旗舰店订单信息:    "</span> <span class="token operator">+</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getSearchorderinfoResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"************ 查询京东旗舰店订单信息成功  ************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                OrderListResult searchorderinfoResult <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getSearchorderinfoResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> searchorderinfoResult<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"************ 查询京东旗舰店订单信息失败  ************"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 上传单张图片
     * @Date 11:29 2019/7/17
     * @Param [accessToken, imageData, pictureCateId, pictureName]
     * @Param [accessToken, 图片二进制文件流，允许png、jpg、gif、jpeg、bmp图片格式，1M以内,
     *                               上传到的图片分类ID，为空上传至 默认分类,
     *                                              图片名称，不超过64字节，为空默认 未命名]
     * @return com.alibaba.fastjson.JSONObject
     **/</span>
    <span class="token keyword">public</span> ImgzonePictureUploadResponse <span class="token function">pictureUpload</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> byte<span class="token punctuation">[</span><span class="token punctuation">]</span> imageData<span class="token punctuation">,</span> Long pictureCateId<span class="token punctuation">,</span> String pictureName<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>


        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ImgzonePictureUploadRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImgzonePictureUploadRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setImageData</span><span class="token punctuation">(</span>imageData<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setPictureCateId</span><span class="token punctuation">(</span>pictureCateId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setPictureName</span><span class="token punctuation">(</span>pictureName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ImgzonePictureUploadResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token constant">LOGGER</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">"===============京东API 上传单张图片: "</span> <span class="token operator">+</span> JSONUtils<span class="token punctuation">.</span><span class="token function">toJsonString</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"====================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 查询图片分类(所有参数为非必填, 不填时查询所有)
     * @Date 14:04 2019/7/17
     * @Param [accessToken, cateId, cateName, parentCateId]
     * @Param [accessToken, 分类ID, 分类名称，不支持模糊查询, 父分类ID，查询二级分类时为对应父分类id，查询一级分类时为0，查询全部分类的时候为空]
     * @return com.jd.open.api.sdk.response.imgzone.ImgzoneCategoryQueryResponse
     **/</span>
    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>ImgzoneCategory<span class="token operator">&gt;</span> <span class="token function">imgzoneCategoryQuery</span><span class="token punctuation">(</span>String accessToken<span class="token punctuation">,</span> Long cateId<span class="token punctuation">,</span> String cateName<span class="token punctuation">,</span> Long parentCateId<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            JdClient client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultJdClient</span><span class="token punctuation">(</span><span class="token constant">SERVER_URL</span><span class="token punctuation">,</span> accessToken<span class="token punctuation">,</span> <span class="token constant">APPKEY</span><span class="token punctuation">,</span> <span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ImgzoneCategoryQueryRequest request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ImgzoneCategoryQueryRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setCateId</span><span class="token punctuation">(</span>cateId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setCateName</span><span class="token punctuation">(</span>cateName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            request<span class="token punctuation">.</span><span class="token function">setParentCateId</span><span class="token punctuation">(</span>parentCateId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ImgzoneCategoryQueryResponse response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
            List<span class="token operator">&lt;</span>ImgzoneCategory<span class="token operator">&gt;</span> cateList <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getCateList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>CollectionUtils<span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>cateList<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> cateList<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment">/**
     * @Author 蠕动的小蜗牛
     * @Description 京东签名规则
     *          1.  所有请求参数按照字母先后顺序排列.  例如: 将access_token,app_key,method,timestamp,v 排序为access_token,app_key,method,timestamp,v
     *          2. 把所有参数名和参数值进行拼装.       例如：access_tokenxxxapp_keyxxxmethodxxxxxxtimestampxxxxxxvx
     *          3. 把appSecret夹在字符串的两端         例如：appSecret+XXXX+appSecret
     *          4. 使用MD5进行加密，再转化成大写
     * @Date 10:24 2019/6/14
     * @Param [params, appSecret]
     * @return java.lang.String
     **/</span>
    <span class="token keyword">public</span> String <span class="token function">jdSign</span><span class="token punctuation">(</span>HashMap<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> params<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        StringBuilder valueSb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        valueSb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 将参数以参数名的字典升序排序</span>
        Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> sortParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Set<span class="token operator">&lt;</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;&gt;</span> entrys <span class="token operator">=</span> sortParams<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 遍历排序的字典,并拼接value1+value2......格式</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>Map<span class="token punctuation">.</span>Entry<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">&gt;</span> entry <span class="token punctuation">:</span> entrys<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            valueSb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 3. 把appSecret夹在字符串的两端</span>
        valueSb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token constant">APPSECRET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        String sign <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 4. 使用MD5进行加密，再转化成大写</span>
            String inStr <span class="token operator">=</span> valueSb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sign <span class="token operator">=</span> DigestUtils<span class="token punctuation">.</span><span class="token function">md5Hex</span><span class="token punctuation">(</span>inStr<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"MD5签名过程中出现错误"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> sign<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>

</code></pre> 
<p><strong>PS: 记录日常开发中的点点滴滴…</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5784048ceed243c7d97ff6f65d9b3bd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">z3库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6f50f8c43cc100d3aa70b0351786f63a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SSD &#43;tensorflow (二）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
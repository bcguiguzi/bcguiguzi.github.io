<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于JAVA对象流写的图书进销存系统管理 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于JAVA对象流写的图书进销存系统管理" />
<meta property="og:description" content="基于JAVA对象流写的图书进销存系统管理 1、用户登录 用户只需一个，即admin管理员，用户密码为123456，用户登录信息保存在属性文件user. properties中，用户登录时输入用户名和密码，如果成功则打印系统菜单，不成功则重新登录，不成功的次数最多3次，超过3次，则系统退出。 （在内存中一行一行读取出来，对字符串进行修改，然后覆盖） 2、系统菜单：1、库存管理 2、销售管理 3、查询库中所有图书信息 4、查询销售信息、5，退出 3、选择不同的菜单，进入不同的管理功能。1、库存管理 ： 使用bookStore.txt文件作为图书数据文件， 进入库存管理后只能进行图书入库操作和退出，既向文件中添加图书信息，如果图书名称在文件中已经存在，则再录入此书的时候，需要在原有的图书的库存基础上添加数据。如果没有此书，则作为新的数据录入。 如果录入信息为： Java基础，则下一步只需要录入进货数量即可。 如果录入信息为：HTML，此书没有，则需要进行详细录入，下一步录入作者名称、进价、售价、库存等信息。 4、销售管理：使用sell.txt文件作为图书销售信息保存， 卖出去之后 用新的集合对象（盈利）
提示：第一次运行可能会抛出异常，因为第一次写入的时候会读到文件末尾流！！！后面运行一切正常！ 第一个文件Book.java
package com.langxikeji.Object; import java.io.Serializable; //创建一个Book类，并且实现Serializable接口 public class Book implements Serializable{ private int bookId; private String bookName; private String auther; private double purprice; private double sellprice; private int stock; private int salecount; private double profit; public int getBookId() { return bookId; } public void setBookId(int bookId) { this.bookId = bookId; } public String getBookName() { return bookName; } public void setBookName(String bookName) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/de8dbf8ac5976afb84350ed2a51e3ff9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-05-14T15:40:40+08:00" />
<meta property="article:modified_time" content="2017-05-14T15:40:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于JAVA对象流写的图书进销存系统管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3 id="基于java对象流写的图书进销存系统管理">基于JAVA对象流写的图书进销存系统管理</h3> 
<p>1、用户登录 <br> 用户只需一个，即admin管理员，用户密码为123456，用户登录信息保存在属性文件user. properties中，用户登录时输入用户名和密码，如果成功则打印系统菜单，不成功则重新登录，不成功的次数最多3次，超过3次，则系统退出。 <br> （在内存中一行一行读取出来，对字符串进行修改，然后覆盖） <br> 2、系统菜单：1、库存管理 2、销售管理 3、查询库中所有图书信息 <br> 4、查询销售信息、5，退出 <br> 3、选择不同的菜单，进入不同的管理功能。1、库存管理 ： 使用bookStore.txt文件作为图书数据文件， <br> 进入库存管理后只能进行图书入库操作和退出，既向文件中添加图书信息，如果图书名称在文件中已经存在，则再录入此书的时候，需要在原有的图书的库存基础上添加数据。如果没有此书，则作为新的数据录入。 <br> 如果录入信息为： Java基础，则下一步只需要录入进货数量即可。 <br> 如果录入信息为：HTML，此书没有，则需要进行详细录入，下一步录入作者名称、进价、售价、库存等信息。 <br> 4、销售管理：使用sell.txt文件作为图书销售信息保存， <br> 卖出去之后 用新的集合对象（盈利）</p> 
<p>提示：第一次运行可能会抛出异常，因为第一次写入的时候会读到文件末尾流！！！后面运行一切正常！ <br> 第一个文件Book.java</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.langxikeji.Object;
<span class="hljs-keyword">import</span> java.io.Serializable;
<span class="hljs-comment">//创建一个Book类，并且实现Serializable接口</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Book</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span>{<!-- --></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> bookId;
    <span class="hljs-keyword">private</span> String bookName;
    <span class="hljs-keyword">private</span> String auther;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> purprice;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> sellprice;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> stock;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> salecount;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> profit;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getBookId</span>() {
        <span class="hljs-keyword">return</span> bookId;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookId</span>(<span class="hljs-keyword">int</span> bookId) {
        <span class="hljs-keyword">this</span>.bookId = bookId;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBookName</span>() {
        <span class="hljs-keyword">return</span> bookName;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookName</span>(String bookName) {
        <span class="hljs-keyword">this</span>.bookName = bookName;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getAuther</span>() {
        <span class="hljs-keyword">return</span> auther;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAuther</span>(String auther) {
        <span class="hljs-keyword">this</span>.auther = auther;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getPurprice</span>() {
        <span class="hljs-keyword">return</span> purprice;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPurprice</span>(<span class="hljs-keyword">double</span> purprice) {
        <span class="hljs-keyword">this</span>.purprice = purprice;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getSellprice</span>() {
        <span class="hljs-keyword">return</span> sellprice;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSellprice</span>(<span class="hljs-keyword">double</span> sellprice) {
        <span class="hljs-keyword">this</span>.sellprice = sellprice;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getStock</span>() {
        <span class="hljs-keyword">return</span> stock;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setStock</span>(<span class="hljs-keyword">int</span> stock) {
        <span class="hljs-keyword">this</span>.stock = stock;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSalecount</span>() {
        <span class="hljs-keyword">return</span> salecount;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSalecount</span>(<span class="hljs-keyword">int</span> salecount) {
        <span class="hljs-keyword">this</span>.salecount = salecount;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getProfit</span>() {
        <span class="hljs-keyword">return</span> profit;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProfit</span>(<span class="hljs-keyword">double</span> profit) {
        <span class="hljs-keyword">this</span>.profit = profit;
    }
  <span class="hljs-comment">//读取和写入sell.txt文件</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">Book</span>(<span class="hljs-keyword">int</span> bookId, String bookName, String auther, <span class="hljs-keyword">double</span> purprice,
            <span class="hljs-keyword">double</span> sellprice, <span class="hljs-keyword">int</span> salecount, <span class="hljs-keyword">double</span> profit) {
        <span class="hljs-keyword">super</span>();
        <span class="hljs-keyword">this</span>.bookId = bookId;
        <span class="hljs-keyword">this</span>.bookName = bookName;
        <span class="hljs-keyword">this</span>.auther = auther;
        <span class="hljs-keyword">this</span>.purprice = purprice;
        <span class="hljs-keyword">this</span>.sellprice = sellprice;
        <span class="hljs-keyword">this</span>.salecount = salecount;
        <span class="hljs-keyword">this</span>.profit = profit;
    }
    <span class="hljs-comment">//读取和写入bookStore.txt文件</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">Book</span>(<span class="hljs-keyword">int</span> bookId, String bookName, String auther, <span class="hljs-keyword">double</span> purprice,
            <span class="hljs-keyword">double</span> sellprice, <span class="hljs-keyword">int</span> stock) {
        <span class="hljs-keyword">super</span>();
        <span class="hljs-keyword">this</span>.bookId = bookId;
        <span class="hljs-keyword">this</span>.bookName = bookName;
        <span class="hljs-keyword">this</span>.auther = auther;
        <span class="hljs-keyword">this</span>.purprice = purprice;
        <span class="hljs-keyword">this</span>.sellprice = sellprice;
        <span class="hljs-keyword">this</span>.stock = stock;
    }
    <span class="hljs-comment">//空的构造方法，初始化变量</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">Book</span>() {
        <span class="hljs-comment">// TODO Auto-generated constructor stub</span>
    }
}</code></pre> 
<p>第二个文件Booksadd.java <br> 使用对象流和集合输入和输出增加库存信息</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.langxikeji.Object;

<span class="hljs-keyword">import</span> java.io.FileInputStream;
<span class="hljs-keyword">import</span> java.io.FileOutputStream;
<span class="hljs-keyword">import</span> java.io.ObjectInputStream;
<span class="hljs-keyword">import</span> java.io.ObjectOutputStream;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BooksAdd</span> {<!-- --></span>
    <span class="hljs-comment">//保存bookStore.txt文件里面的对象</span>
      <span class="hljs-keyword">public</span>  List&lt;Book&gt;booklist=<span class="hljs-keyword">new</span> ArrayList&lt;Book&gt;();
     <span class="hljs-comment">//无参的构造方法，Book对象初始化</span>
     <span class="hljs-keyword">public</span> <span class="hljs-title">BooksAdd</span>(){
      readFile();
         <span class="hljs-keyword">if</span>(booklist.size()==<span class="hljs-number">0</span>){
         Book book=<span class="hljs-keyword">new</span> Book(<span class="hljs-number">1</span>,<span class="hljs-string">"JAVA基础"</span>,<span class="hljs-string">"李刚"</span>,<span class="hljs-number">36.80</span>,<span class="hljs-number">45.50</span>,<span class="hljs-number">50</span>);
            insert(book);
         book=<span class="hljs-keyword">new</span> Book(<span class="hljs-number">2</span>,<span class="hljs-string">"JAVAEE编程"</span>,<span class="hljs-string">"李刚"</span>,<span class="hljs-number">25.50</span>,<span class="hljs-number">36.78</span>,<span class="hljs-number">100</span>);
            insert(book);
         }
     }
     <span class="hljs-comment">//往booklist中传入对象，并且写入bookStore.txt文件中</span>
     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insert</span>(Book book){
             booklist.add(book);
             writeFile();
         }

     <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title">totalBooks</span>(){
         <span class="hljs-keyword">return</span> booklist; 
     }

   <span class="hljs-comment">//对象输出流</span>
     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeFile</span>(){
         String name=<span class="hljs-string">"C:\\Users\\lenovo\\Desktop\\bookStore.txt"</span>;
         <span class="hljs-keyword">try</span>(FileOutputStream ops=<span class="hljs-keyword">new</span> FileOutputStream(name);
                ObjectOutputStream oos=<span class="hljs-keyword">new</span> ObjectOutputStream(ops);){
                oos.writeObject(booklist); 
                oos.flush();
                System.out.println(<span class="hljs-string">"数据保存成功！"</span>);
         }<span class="hljs-keyword">catch</span>(Exception e){
             e.printStackTrace();
         }
     }
     <span class="hljs-comment">//对象输入流</span>
     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readFile</span>(){
         String name=<span class="hljs-string">"C:\\Users\\lenovo\\Desktop\\bookStore.txt"</span>;
         <span class="hljs-keyword">try</span>(FileInputStream ips=<span class="hljs-keyword">new</span> FileInputStream(name);
                 ObjectInputStream ois=<span class="hljs-keyword">new</span> ObjectInputStream(ips)){
                 booklist=(List&lt;Book&gt;)ois.readObject();
         }<span class="hljs-keyword">catch</span>(Exception e){
             e.printStackTrace();
         }
     }
}
</code></pre> 
<p>第三个文件Bookssell.java <br> 输入和输出销售信息</p> 
<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.langxikeji.Object;

<span class="hljs-keyword">import</span> java.io.File;
<span class="hljs-keyword">import</span> java.io.FileInputStream;
<span class="hljs-keyword">import</span> java.io.FileOutputStream;
<span class="hljs-keyword">import</span> java.io.InputStream;
<span class="hljs-keyword">import</span> java.io.ObjectInputStream;
<span class="hljs-keyword">import</span> java.io.ObjectOutputStream;
<span class="hljs-keyword">import</span> java.io.OutputStream;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BooksSell</span> {<!-- --></span>
    <span class="hljs-comment">//保存sell.txt文件里面的对象</span>
    <span class="hljs-keyword">public</span>  List&lt;Book&gt;selllist=<span class="hljs-keyword">new</span> ArrayList&lt;Book&gt;();
    <span class="hljs-keyword">public</span> <span class="hljs-title">BooksSell</span>(){
        readFilesell();
        <span class="hljs-keyword">if</span>(selllist.size()==<span class="hljs-number">0</span>){
            Book book=<span class="hljs-keyword">new</span> Book(<span class="hljs-number">1</span>,<span class="hljs-string">"JAVA基础"</span>,<span class="hljs-string">"李刚"</span>,<span class="hljs-number">36.80</span>,<span class="hljs-number">45.50</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.0</span>);
            insertsell(book);
        }
    }
  <span class="hljs-comment">//往insertsell中传入对象,并且写入sell.txt文件中</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">insertsell</span>(Book book){
     selllist.add(book);
     writeFilesell();
    }
    <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title">sellBooks</span>(){
     <span class="hljs-keyword">return</span> selllist;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readFilesell</span>(){
     String name=<span class="hljs-string">"C:\\Users\\lenovo\\Desktop\\sell.txt"</span>;
     File file=<span class="hljs-keyword">new</span> File(name);
     <span class="hljs-keyword">try</span>(InputStream ips=<span class="hljs-keyword">new</span> FileInputStream(file);
             ObjectInputStream ois=<span class="hljs-keyword">new</span> ObjectInputStream(ips)){
         selllist=(List&lt;Book&gt;)ois.readObject();
     }<span class="hljs-keyword">catch</span>(Exception e){
         e.printStackTrace();
     }
    }
    <span class="hljs-comment">//对象输出流</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeFilesell</span>(){
     String name=<span class="hljs-string">"C:\\Users\\lenovo\\Desktop\\sell.txt"</span>;
     File file=<span class="hljs-keyword">new</span> File(name);
     <span class="hljs-keyword">try</span>(OutputStream ops=<span class="hljs-keyword">new</span> FileOutputStream(file);
            ObjectOutputStream oos=<span class="hljs-keyword">new</span> ObjectOutputStream(ops);){
            oos.writeObject(selllist); 
            oos.flush();
            System.out.println(<span class="hljs-string">"数据保存成功！"</span>);
     }<span class="hljs-keyword">catch</span>(Exception e){
         e.printStackTrace();
     }
    }
}
</code></pre> 
<p>第四个文件， <br> 登录程序，主程序</p> 
<pre class="prettyprint"><code class=" hljs cs">package com.langxikeji.Object;

import java.io.File;
import java.io.FileInputStream;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;
import java.util.Properties;
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Booksmanagement {
        <span class="hljs-comment">//新建一个BooksIO对象</span>
        BooksAdd bio=<span class="hljs-keyword">new</span> BooksAdd();
        BooksSell bis=<span class="hljs-keyword">new</span> BooksSell();
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">welcome</span>(){
         System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"***********************"</span>);
         System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"*******|-------|*******"</span>);
         System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"*******|welcome|*******"</span>);
         System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"*******|-------|*******"</span>);
         System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"***********************"</span>);
         System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"提示:用户名格式为5-10位字母，密码格式为6位数字！"</span>);
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Login</span>(){
        <span class="hljs-keyword">if</span>(Logininfo()){
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"*****欢迎登陆图书进销存管理系统*****"</span>);
                adminLogin();
        }<span class="hljs-keyword">else</span>{
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"登录失败，系统退出"</span>);
            System.exit(<span class="hljs-number">0</span>); 
        }
        }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">adminLogin</span>(){
        Scanner sc=<span class="hljs-keyword">new</span> Scanner(System.<span class="hljs-keyword">in</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入数字选择你需要的功能:"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"1,库存管理。2,销售管理。3,查询书库中的所有书籍。4,查询销售记录5,系统退出"</span>);
        <span class="hljs-keyword">switch</span>(sc.nextInt()){
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            Inmanagement();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
            Outmanagement();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
            polling();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
            sellpolling();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"系统退出！"</span>);
            System.exit(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"输入错误，请从新输入！"</span>);
            <span class="hljs-keyword">break</span>;
        }
    }
    <span class="hljs-comment">//查询书库中所有的书籍信息</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">polling</span>(){
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"序号\t\t书名\t\t作者\t\t进价\t\t售价\t\t库存\t\t"</span>);
        List&lt;Book&gt; booklist=bio.totalBooks() ;
        <span class="hljs-keyword">for</span>(Book book:booklist){
            System.<span class="hljs-keyword">out</span>.print(book.getBookId()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getBookName()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getAuther()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getPurprice()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getSellprice()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getStock()+<span class="hljs-string">"\n"</span>);
        } 
        adminLogin();
    }
    <span class="hljs-comment">//输出销售信息</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sellpolling</span>(){
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"序号\t\t书名\t\t作者\t\t进价\t\t售价\t\t销售数量\t\t盈利\t\t"</span>);
        List&lt;Book&gt;selllist=bis.sellBooks();
        <span class="hljs-keyword">for</span>(Book book:selllist){
            System.<span class="hljs-keyword">out</span>.print(book.getBookId()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getBookName()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getAuther()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getPurprice()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getSellprice()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getSalecount()+<span class="hljs-string">"\t\t"</span>);
            System.<span class="hljs-keyword">out</span>.print(book.getProfit()+<span class="hljs-string">"\n"</span>);
        }
        adminLogin();
    }
    <span class="hljs-comment">//库存管理模块</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Inmanagement</span>(){
        Scanner sc=<span class="hljs-keyword">new</span> Scanner(System.<span class="hljs-keyword">in</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请按照提示输入选择以下功能:"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"1,图书入库。2,退出"</span>);
        <span class="hljs-keyword">switch</span>(sc.nextInt()){
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            jionBook();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
            adminLogin();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"输入错误，请从新输入！"</span>);
            <span class="hljs-keyword">break</span>;
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jionBook</span>(){
        Scanner sc=<span class="hljs-keyword">new</span> Scanner(System.<span class="hljs-keyword">in</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入要入库书籍的名字:"</span>);
        String bookname=sc.nextLine();
        <span class="hljs-comment">//创建一个对象</span>
        List&lt;Book&gt;booklist=bio.totalBooks();
        Book book = <span class="hljs-keyword">new</span> Book();
        <span class="hljs-comment">//遍历booklist数组</span>
     <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;booklist.size();i++){
         book=booklist.<span class="hljs-keyword">get</span>(i);
         <span class="hljs-comment">//判断书库中是否存在该书</span>
         <span class="hljs-keyword">if</span>(book.getBookName().equals(bookname)){
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"库中已经存在该书!"</span>);
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入入库库存数量:"</span>);
                <span class="hljs-keyword">int</span> store=sc.nextInt();
                store+=book.getStock();
                book.setStock(store);
                bio.writeFile();
                adminLogin(); 
         }<span class="hljs-keyword">else</span>{
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"书库中该书不存在!"</span>);
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入增加图书信息:"</span>);
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入书籍序号:"</span>);
             <span class="hljs-keyword">int</span> m=sc.nextInt();
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入书名:"</span>);
             String a=sc.next();
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入作者:"</span>);
             String b=sc.next();
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入书籍进价:"</span>);
             <span class="hljs-keyword">double</span> c=sc.nextDouble();
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入书籍售价:"</span>);
             <span class="hljs-keyword">double</span> d=sc.nextDouble();
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入库存"</span>);
             <span class="hljs-keyword">int</span> e=sc.nextInt();
             Book book1=<span class="hljs-keyword">new</span> Book(m,a,b,c,d,e);
             bio.insert(book1); 
             adminLogin();
         }
     }
    }
    <span class="hljs-comment">//销售管理</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Outmanagement</span>(){
        Scanner sc=<span class="hljs-keyword">new</span> Scanner(System.<span class="hljs-keyword">in</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请按照提示输入选择以下功能:"</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"1,图书销售。2,退出"</span>);
        <span class="hljs-keyword">switch</span>(sc.nextInt()){
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
            outBook();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
            adminLogin();
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">default</span>:
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"输入错误，请从新输入！"</span>);
            <span class="hljs-keyword">break</span>;
        }
    }
    <span class="hljs-comment">//购买书籍改变bookStore中的库存</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">outBook</span>(){
        Scanner sc=<span class="hljs-keyword">new</span> Scanner(System.<span class="hljs-keyword">in</span>);
        System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入要购买书籍的名字:"</span>);
        String bookname=sc.nextLine();
        <span class="hljs-comment">//创建一个对象</span>
        Book book = <span class="hljs-keyword">new</span> Book();
        List&lt;Book&gt;booklist=bio.totalBooks();
        <span class="hljs-comment">//遍历booklist数组</span>
     <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;booklist.size();i++){
         book=booklist.<span class="hljs-keyword">get</span>(i);
         <span class="hljs-comment">//判断书库中是否存在该书</span>
         <span class="hljs-keyword">if</span>(book.getBookName().equals(bookname)){
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"书库中存在该书！"</span>); 
             System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入要购买的数量:"</span>);
             <span class="hljs-keyword">int</span> num=sc.nextInt();
             <span class="hljs-keyword">if</span>(num&gt;book.getStock()){
                 System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"购买数量超过库存！"</span>);
             }<span class="hljs-keyword">else</span>{
                 System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"购买成功!"</span>);
                 <span class="hljs-comment">//剩余库存</span>
                 <span class="hljs-keyword">int</span> sum=book.getStock()-num;
                 <span class="hljs-comment">//改变原有库存</span>
                    book.setStock(sum);
                    <span class="hljs-comment">//写入bookStore.txt文件中</span>
                    bio.writeFile();
                    <span class="hljs-comment">//传入到下一个方法中</span>
                    Outsell(bookname,num);
                    }
                    adminLogin();
             }<span class="hljs-keyword">else</span>{
                 System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"书库中不存在该书,返回主菜单!"</span>);
                 adminLogin();
             }
         }
    }
    <span class="hljs-comment">//链接OutBook方法 改变sell.txt文件里面的值</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Outsell</span>(String bookname,<span class="hljs-keyword">int</span> numbook){
        Scanner sc=<span class="hljs-keyword">new</span> Scanner(System.<span class="hljs-keyword">in</span>);
        Book book=<span class="hljs-keyword">new</span> Book();
        List&lt;Book&gt;selllist=bis.sellBooks();
         BigDecimal num=<span class="hljs-keyword">new</span> BigDecimal(numbook);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;selllist.size();j++){
            book=selllist.<span class="hljs-keyword">get</span>(j);
             <span class="hljs-keyword">if</span>(book.getBookName().equals(bookname)){
                 <span class="hljs-comment">//改变售卖数量</span>
                 <span class="hljs-keyword">int</span> salecount=book.getSalecount()+numbook;
                 book.setSalecount(salecount);
                 <span class="hljs-comment">//改变售卖利润,处理精度丢失问题</span>
                 <span class="hljs-comment">//进价转型</span>
                 BigDecimal purprice=<span class="hljs-keyword">new</span> BigDecimal(book.getPurprice());
                 <span class="hljs-comment">//售价转型</span>
                 BigDecimal sellprice=<span class="hljs-keyword">new</span> BigDecimal(book.getSellprice());
                 <span class="hljs-comment">//原有的利润转型</span>
                 <span class="hljs-keyword">double</span> oldprofit=book.getProfit();
                 BigDecimal oprofit=<span class="hljs-keyword">new</span> BigDecimal(oldprofit);
                 <span class="hljs-comment">//进行计算</span>
                 <span class="hljs-keyword">double</span> bigprofit=(((sellprice.subtract(purprice)).multiply(num)).add(oprofit)).doubleValue();
                 book.setProfit(bigprofit);
                 bis.writeFilesell(); 
             }<span class="hljs-keyword">else</span>{
                 BigDecimal purprice=<span class="hljs-keyword">new</span> BigDecimal(book.getPurprice());
                 <span class="hljs-comment">//售价转型</span>
                 BigDecimal sellprice=<span class="hljs-keyword">new</span> BigDecimal(book.getSellprice());
                 <span class="hljs-comment">//进行计算</span>
                 <span class="hljs-keyword">double</span> bigprofit=((sellprice.subtract(purprice)).multiply(num)).doubleValue();
                 Book book3=<span class="hljs-keyword">new</span> Book(book.getBookId(),book.getBookName(),book.getAuther(),book.getPurprice(),book.getSellprice(),numbook,bigprofit);
                 bis.insertsell(book3);

            }
        }
    }
    <span class="hljs-comment">//系统登录模块</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> boolean <span class="hljs-title">Logininfo</span>(){
        <span class="hljs-keyword">try</span>{
        String adress=<span class="hljs-string">"D:\\JAVA\\Workspaces\\sina\\src\\user.properties"</span>;
        File file=<span class="hljs-keyword">new</span> File(adress);
        Properties p=<span class="hljs-keyword">new</span> Properties();
        <span class="hljs-comment">//使用输入流拿到p的key-value对</span>
        p.load(<span class="hljs-keyword">new</span> FileInputStream(file));
            <span class="hljs-comment">//控制三次循环</span>
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">3</span>;i&gt;<span class="hljs-number">0</span>;i--){
            <span class="hljs-comment">//控制台输入用户名和密码</span>
            Scanner sc=<span class="hljs-keyword">new</span> Scanner(System.<span class="hljs-keyword">in</span>);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入登录用户名:"</span>);
            String name=sc.nextLine();
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"请输入登录密码:"</span>);
            String password=sc.nextLine();
            <span class="hljs-comment">//判断输入格式是否正确和密码是否正确</span>
            <span class="hljs-keyword">if</span>(judge(name,password)&amp;&amp;p.containsKey(name)&amp;&amp;p.containsValue(password)){   
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"登录用户名和密码正确，欢迎您！"</span>);
                   <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">1</span>){
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"警告:用户名或密码错误，今日剩余输入次数为"</span>+(i-<span class="hljs-number">1</span>)+<span class="hljs-string">"次!"</span>);
                System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"---------------------------"</span>);
            }
            }
        }<span class="hljs-keyword">catch</span>(Exception e){
            e.printStackTrace();
        }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-comment">//判断输入用户名和密码格式是否正确</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> boolean <span class="hljs-title">judge</span>(String name,String password){
        Pattern pattern1 =Pattern.compile(<span class="hljs-string">"^[A-Za-z]{5,10}$"</span>);
        Matcher m1=pattern1.matcher(name);
        Pattern pattern2=Pattern.compile(<span class="hljs-string">"^[0-9]{6}$"</span>);
        Matcher m2=pattern2.matcher(password);
        <span class="hljs-keyword">if</span>(!m1.matches()||!m2.matches()){
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"---------------------------"</span>);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"提示:用户名和密码输入格式不正确！"</span>);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"提示:用户名格式为5-10位字母，密码格式为6位数字！"</span>);
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"-----------------------------"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        }<span class="hljs-keyword">else</span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(String[] args)  throws Exception{
        Booksmanagement bs=<span class="hljs-keyword">new</span> Booksmanagement();
        bs.welcome();
        bs.Login();
    }
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b133ef37157c1bf4df7185fb5306364b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Nginx 配置不当造成加载静态资源件提示ERR_CONTENT_LENGTH_MISMATCH解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/392f0a957b2b8c4556a821981856a744/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在Windows上构建V8而不发疯</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
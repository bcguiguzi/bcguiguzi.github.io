<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>hybridCLR热更 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="hybridCLR热更" />
<meta property="og:description" content="多种热更方案：
Lua方案：Lua虚拟机&#43;Lua代码
ILRuntime(.net虚拟机：面临跨域问题需要写适配器等问题)
HybridCLR:不需要像lua一样安装lua虚拟机；AOT代码变成静态代码
原理：
hybridCLR是IL2CPP技术的进一步修改，扩充了il2cpp的代码，使他由纯AOT runtime变成AOT&#43;Interpreter混合runtime，进而原生支持动态加载assembly，使得基于il2cpp backend打包的游戏不进能再android平台，也能再ios、console 等现在的JIT平台上高效地以AOT&#43;interpreter混合模式执行，从底层彻底的支持热更新。其他热更方案是独立的VM，与il2cpp关系本质上相当于mono中嵌入lua的关系。因此类型系统不统一，为了让热更新类型能够继承AOT部分类型，需要写适配器，并且解释器中的类型不能为主工程的类型系统所识别。特性不完整 ，开发麻烦，运行效率低下。
链接：
HybridCLR热更新 原理及示例分析 huatuo之AOT泛型限制及原理介绍 huatuo热更框架安装 GameFramework框架接入HybridCLR热更框架
下载：
gitee/HybridCLR hybridclr_trial工程
关于作者：
walon ：Code Philosophy（代码哲学官网） 创始人
毕业于清华大学物理系，2006年CMO金牌，奥数国家集训队成员，保送清华基科班。专注于游戏技术，擅长开发架构和基础技术设施。
现在已经是比较稳定的beta版本，预计正式版在8月份。目前已经支持pc和安卓及ios。已知有十几个项目在移动平台完整运行起来了。
yoyo工程位置：
百度网盘&gt;工作&gt;me&gt;HybridCLR&gt;My projecthuatuo.zip
unity2020.3.31f1c1
快速上手
报错
报错1：
No ‘git‘ executable was found. Please install Git on your system then restart 问题搜索，重启电脑就可以了
Git下载地址
Project has invalid dependencies No git executable was found
解决1：
未安装点击安装hybridclr
hybridclr-&gt;generate-&gt;all
hybridclr-&gt;build-&gt;buildassetscopytostreamingassets
点击windows上的hybridclr-》build-&gt;win64
报错2：
Building Library\Bee\artifacts\WinPlayerBuildProgram\mpmc6\bt9a_o_vm6.lump.obj failed with output:
xg9o_vm6.lump.cpp原因是vs2022的问题" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7e6ffebdf2021fa464016270b8c0cdd5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-24T16:30:05+08:00" />
<meta property="article:modified_time" content="2023-11-24T16:30:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">hybridCLR热更</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>多种热更方案：</p> 
 <p>Lua方案：Lua虚拟机+Lua代码</p> 
 <p>ILRuntime(.net虚拟机：面临跨域问题需要写适配器等问题)</p> 
 <p>HybridCLR:不需要像lua一样安装lua虚拟机；AOT代码变成静态代码</p> 
 <p>原理：</p> 
 <p>hybridCLR是IL2CPP技术的进一步修改，扩充了il2cpp的代码，使他由纯AOT runtime变成AOT+Interpreter混合runtime，进而原生支持动态加载assembly，使得基于il2cpp backend打包的游戏不进能再android平台，也能再ios、console 等现在的JIT平台上高效地以AOT+interpreter混合模式执行，从底层彻底的支持热更新。其他热更方案是独立的VM，与il2cpp关系本质上相当于mono中嵌入lua的关系。因此类型系统不统一，为了让热更新类型能够继承AOT部分类型，需要写适配器，并且解释器中的类型不能为主工程的类型系统所识别。特性不完整 ，开发麻烦，运行效率低下。</p> 
 <p>链接：</p> 
 <p><a href="https://www.bilibili.com/video/BV1Pg4112778/" rel="nofollow" title="HybridCLR热更新 原理及示例分析">HybridCLR热更新 原理及示例分析</a> <a href="https://zhuanlan.zhihu.com/p/524453671" rel="nofollow" title="huatuo之AOT泛型限制及原理介绍">huatuo之AOT泛型限制及原理介绍</a> <a href="https://www.bilibili.com/video/BV1LZ4y1b7CR/" rel="nofollow" title="huatuo热更框架安装">huatuo热更框架安装</a> <a href="https://blog.csdn.net/final5788/article/details/125965514" title="GameFramework框架接入HybridCLR热更框架">GameFramework框架接入HybridCLR热更框架</a></p> 
 <p>下载：</p> 
 <p><a href="https://gitee.com/zhangkaipeng/HybridCLR" rel="nofollow" title="gitee/HybridCLR">gitee/HybridCLR</a> <a href="https://gitee.com/focus-creative-games/hybridclr_trial" rel="nofollow" title="hybridclr_trial工程">hybridclr_trial工程</a></p> 
 <p>关于作者：</p> 
 <p>walon ：Code Philosophy（<a href="https://code-philosophy.com/" rel="nofollow" title="代码哲学官网">代码哲学官网</a>） 创始人</p> 
 <p>毕业于清华大学物理系，2006年CMO金牌，奥数国家集训队成员，保送清华基科班。专注于游戏技术，擅长开发架构和基础技术设施。</p> 
 <p>现在已经是比较稳定的beta版本，预计正式版在8月份。目前已经支持pc和安卓及ios。已知有十几个项目在移动平台完整运行起来了。</p> 
 <p>yoyo工程位置：</p> 
 <p>百度网盘&gt;工作&gt;me&gt;HybridCLR&gt;My projecthuatuo.zip</p> 
 <p>unity2020.3.31f1c1</p> 
 <p><a href="https://hybridclr.doc.code-philosophy.com/docs/beginner/quickstart" rel="nofollow" title="快速上手">快速上手</a></p> 
</blockquote> 
<p>报错</p> 
<blockquote> 
 <p>报错1：</p> 
 <p>No ‘git‘ executable was found. Please install Git on your system then restart 问题搜索，重启电脑就可以了</p> 
 <p><a href="https://git-scm.com/download/win" rel="nofollow" title="Git下载地址">Git下载地址</a></p> 
 <p><a href="https://blog.csdn.net/baidu_38246836/article/details/106812067" title="Project has invalid dependencies No git executable was found">Project has invalid dependencies No git executable was found</a></p> 
 <p>解决1：</p> 
 <p>未安装点击安装hybridclr</p> 
 <p>hybridclr-&gt;generate-&gt;all</p> 
 <p>hybridclr-&gt;build-&gt;buildassetscopytostreamingassets</p> 
 <p>点击windows上的hybridclr-》build-&gt;win64</p> 
</blockquote> 
<blockquote> 
 <p>报错2：</p> 
 <p>Building Library\Bee\artifacts\WinPlayerBuildProgram\mpmc6\bt9a_o_vm6.lump.obj failed with output:</p> 
 <p>xg9o_vm6.lump.cpp原因是vs2022的问题</p> 
 <p><a href="https://blog.csdn.net/AWNUXCVBN/article/details/127806612" title="HybridCLR 使用流程记录（一）">HybridCLR 使用流程记录（一）</a></p> 
 <p>解决2：</p> 
 <p>用vs2019就好了 或者是在vs2022里写一个脚本直接扔到工程的Assets文件夹下就可以了，脚本如下，就可以打包出来了hybridclr-》build-&gt;win64</p> 
 <p><a href="https://forum.unity.com/threads/workaround-for-building-with-il2cpp-with-visual-studio-2022-17-4.1355570/" rel="nofollow" title="Workaround for building with IL2CPP with Visual Studio 2022 17.4">Workaround for building with IL2CPP with Visual Studio 2022 17.4</a></p> 
</blockquote> 
<p> 快速上手流程</p> 
<blockquote> 
 <ol><li>创建空的Unity项目。</li><li>创建ConsoleToScreen.cs脚本，打印日志到屏幕上，方便定位错误</li><li>场景中创建一个空GameObject，将ConsoleToScreen挂到上面</li><li>创建 Assets/HotUpdate 目录，在目录下 右键 Create/Assembly Definition ，创建一个名为HotUpdate的程序集模块</li><li>Windows/Package Manager &gt; https://github.com/focus-creative-games/hybridclr_unity.git</li><li>HybridCLR/Installer</li><li>打开菜单 HybridCLR/Settings， 在Hot Update Assemblies配置项中添加HotUpdate程序集</li><li>如果你用的hybridclr包低于v4.0.0版本，关闭GC</li><li>Scripting Backend 改 IL2CPP</li><li>Api Compatability Level  .Net 4.x 或者.Net Framework</li><li>创建热更新脚本Hello.cs</li><li>创建Assets/LoadDll.cs脚本，然后在main场景中创建一个GameObject对象，挂载LoadDll脚本。--显然，主工程不能直接引用热更新代码。有多种方式可以从主工程调用热更新程序集中的代码，这里通过反射来调用热更新代码。</li><li>Editor中试运行<a href="https://hybridclr.doc.code-philosophy.com/docs/beginner/quickstart#editor%E4%B8%AD%E8%AF%95%E8%BF%90%E8%A1%8C" rel="nofollow" title="​">​</a>运行main场景，屏幕上会显示 'Hello,HybridCLR'，表示代码工作正常。</li><li>打包运行</li><li>HybridCLR/Generate/All</li><li>{proj}/HybridCLRData/HotUpdateDlls/StandaloneWindows64(MacOS下为StandaloneMacXxx)目录下的HotUpdate.dll复制到Assets/StreamingAssets/HotUpdate.dll.bytes</li><li>Build And Run-&gt;打包到{proj}-&gt;Release-Win64文件夹中</li><li>修改代码Debug.Log("Hello, World");</li><li>HybridCLR/CompileDll/ActiveBulidTarget重新编译热更代码</li><li>从项目中复制HotUpdate.dll到发布的HotUpdate.dll.bytes</li><li>重新运行程序热更新代码生效！</li></ol> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3031256ed1a762d102ec1bec39cb6456/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">nvm安装使用及全局配置node</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e940ac0cdff9ee8ba344597c097ad501/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决Resolving Android Dependencies问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
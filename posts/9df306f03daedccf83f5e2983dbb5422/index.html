<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySql - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySql" />
<meta property="og:description" content="SQL 1.什么是SQL？ Structured Query Language：结构化查询语言 其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。 2.SQL通用语法 1. SQL 语句可以单行或多行书写，以分号结尾。 2. 可使用空格和缩进来增强语句的可读性。 3. MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。 4. 3 种注释 * 单行注释: -- 注释内容 或 # 注释内容(mysql 特有) * 多行注释: /* 注释 */ 3. SQL分类 1) DDL(Data Definition Language)数据定义语言 用来定义数据库对象：数据库，表，列等。关键字：create, drop,alter 等 2) DML(Data Manipulation Language)数据操作语言 用来对数据库中表的数据进行增删改。关键字：insert, delete, update 等 3) DQL(Data Query Language)数据查询语言 用来查询数据库中表的记录(数据)。关键字：select, where 等 4) DCL(Data Control Language)数据控制语言(了解) 用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等 DDL：操作数据库、表 1.操作数据库：CRUD C(Create):创建 * 创建数据库； * create database 数据库名称; * 创建数据库，判断不存在，在创建 * create database if not exists 数据库名称； * 创建数据库，并指定字符集 * create database 数据库名称 character set 字符集名；	* 练习：	创建db4数据库，判断是否存在，并指定字符集为gbk； * create database if not exists db4 character set gbk; R(Retrieve):查询 * 查询所有数据库的名称； * show databases; * 查询某个数据库的字符集：查询某个数据库的创建语句 * show create database 数据库名称； U(Update):修改 * 需改数据库的字符集 * alter database 数据库名称 character set 字符集名； D(Delete):删除 * 删除数据库 * drop database 数据库名称； * 判断数据库存在，存在再删除 * drop database if exists 数据库名称； 使用数据库 * 查询当前正在使用的数据库名称 * select database(); * 使用数据库 * use 数据库名称； 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/9df306f03daedccf83f5e2983dbb5422/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-15T21:31:42+08:00" />
<meta property="article:modified_time" content="2020-09-15T21:31:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySql</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="SQL_0"></a>SQL</h2> 
<pre><code>1.什么是SQL？
	Structured Query Language：结构化查询语言
	其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。
	
2.SQL通用语法
	1. SQL 语句可以单行或多行书写，以分号结尾。
	2. 可使用空格和缩进来增强语句的可读性。
	3. MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。
	4. 3 种注释
		* 单行注释: -- 注释内容 或 # 注释内容(mysql 特有) 
		* 多行注释: /* 注释 */
	
3. SQL分类
	1) DDL(Data Definition Language)数据定义语言
		用来定义数据库对象：数据库，表，列等。关键字：create, drop,alter 等
	2) DML(Data Manipulation Language)数据操作语言
		用来对数据库中表的数据进行增删改。关键字：insert, delete, update 等
	3) DQL(Data Query Language)数据查询语言
		用来查询数据库中表的记录(数据)。关键字：select, where 等
	4) DCL(Data Control Language)数据控制语言(了解)
		用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等
</code></pre> 
<h3><a id="DDL_24"></a>DDL：操作数据库、表</h3> 
<pre><code>1.操作数据库：CRUD

 C(Create):创建
	 * 创建数据库；
		* create database 数据库名称;
	 * 创建数据库，判断不存在，在创建
		* create database if not exists 数据库名称；
	 * 创建数据库，并指定字符集
		* create database 数据库名称 character set 字符集名；	  
	 * 练习：	 创建db4数据库，判断是否存在，并指定字符集为gbk；
		* create database if not exists db4 character set gbk;

 R(Retrieve):查询
  * 查询所有数据库的名称；
		* 	show databases;
  * 查询某个数据库的字符集：查询某个数据库的创建语句
		* show create database 数据库名称；
		
 U(Update):修改
  * 需改数据库的字符集
	 * alter database 数据库名称  character set 字符集名；
	
	
 D(Delete):删除
  * 删除数据库
	 * drop database 数据库名称；
  * 判断数据库存在，存在再删除
	  * drop database if exists 数据库名称；
	
 使用数据库
  * 查询当前正在使用的数据库名称
	  * select database();
  *  使用数据库
	 * use 数据库名称；
	
					
2.操作表
	1.C(Create):创建
		1. 语法：
			create tables 表名 (
					列名1 数据类型1，
					列名2 数据类型2，
					...
					列名n 数据类型n
			);
	* 注意：最后一列，不需要加逗号(,)
	
	* 常用数据类型：
		1.. int :整数类型
			* age int ,
		2. double 小数类型
			* score double(小数位数,保留几位)
		3. date:日期，只包含年月日，yyyy-MM-dd
		4. datatime 日期 包含年月日时分秒 yyy-MM-dd HH:mm:ss
		5. timestamp:时间戳类型 包含年月日时分秒 yyy-MM-dd HH:mm:ss
		
    * 如果不给这个字段赋值，或复制为null,则默认使用当前的系统时间，来自动赋值
					
		   6. varchar:字符串类型
		   	*  name varchar(最大字符个数)
		   	* zhangsan varchar(8)

	* 创建表
		*	create table student(
				id int,
				name varchar(32),
				age int,
				score double(4,1),
				birthday date,
				insert_time timestamp
				); 
	 *  赋值表
	 	* create table 表名 like 被复制的表名； 
	2.R:(Retrieve):查询
		* 查询某个数据库所有的表名称
			*  show tables;
		* 查询表结构
			* desc 表名；
	3.U:(Update):修改
		1. 修改表名
			alter table 表名 rename to 新的表名；
		2. 修改表的字符集
			alter table 表名 character set 字符集名；
		3.  添加一列
			alter table 表名 add 列名 数据类型；
		4. 修改列名称 类型
			alter table 表名 change 列名 新列别 新数据类型；
			alter table 表名 modify 列名 新数据类型；
		5. 删除列
			 alter table 表名 drop 列名 ;
	4.D:(Delete):删除
		*drop table 表名；
		* deop table if exists 表名；
</code></pre> 
<h3><a id="DML_120"></a>DML：增删改表中数据</h3> 
<pre><code>1. 添加数据：
	* 语法：
	 * insert into 表名(列名1,列名2，... 列名n) values(值1,值2,...值n);
	* 注意：
		1. 列名和值要一一对应。
		2. 如果表名后，不定义列名，则默认给所有列添加值
			insert into values(值1,值2,...值n);
		3. 除了数字类型，其他类型需要使用引号（单双都可以）引起来。
2. 删除数据
		* 语法
			* delete from 表名 [where 条件]
		* 注意：
			1. 如果不加条件，则删除表中所有记录
			2. 如果要删除所有记录
				1.delete from 表名；-- 不推荐使用。有多少条记录
				就会执行多少次删除操作
				2. TRUNCATE TABLE 表名; -- 先删除表，然后再创建
				一张一样的表。 推荐使用，效率跟高。
3. 修改数据
	* 语法：
		* update 表名 set 列名1 = 值1，列名2=值2，... [where 条件]；
	* 注意：
		1：   如果不添加任何条件，则会将标准所有记录全部修改。
</code></pre> 
<h3><a id="DQL__147"></a>DQL: 查询表中的记录</h3> 
<pre><code> * select * from	 表名；
 1.  语法：
 		select
 			字段列表
 		from
 	   		表名列表
 	 	where
 	 		条件列表
 		 group by
 	 		分组字段
 		 having
 	 		分组之后的条件
 	 	order by
 	 		排序
 		 limit
 	 		分页限定    	
 2.	基础查询
 	1. 多个字段的查询
 			select 字段名1，字段名2，... from 表名；
 			* 注意：
 				*如果查询所有字段，则可以使用* 来代替字段列表。
 	2. 去除重复
 		* distinct
 	3. 计算列
 		* 一般可以使用四则运算计算一些列的值。(一般只会进行数值型的计算)
 		* ifnull(表达式1，表达式2)；
 			* 表达式1：哪个字段需要判断是否为null
 			* 如果该字段为null后的替换值。 
 	4. 起别名
 		* as: as 也可以省略
 3.条件查询
 	1. where子句后跟条件
 	2. 运算符
 	  	* &gt;、&lt;、&lt;=、&gt;=、=、&lt;&gt; 
 	  		* &lt;&gt;在 SQL 中表示不等于，在 mysql 中也可以使用!= 没有== 
 	  	* BETWEEN...AND
 	  		* 在一个范围之内，如：between 100 and 200 相当于条件在 100 到 200 之间，包头又包尾 
 	  	* IN(集合)
 	  		* 集合表示多个值，使用逗号分隔 
 	  	* LIKE '张%'
 	  		* 模糊查询
 	  			* 占位符
 	  				*  _：单个任意字符
 	  				* %：任意多个字符
 	  	* IS NULL   查询某一列为 NULL 的值，注：不能写=NULL 
</code></pre> 
<h3><a id="DQL_195"></a>DQL：查询语句</h3> 
<pre><code>1. 排序查询
	* 语法 order by 子句
		*  order by 排序字段1 排序方式1， 排序字段2 排序方式2...
		* 排序方式
			* ASC：升序，默认的。
			* DESC：降序
			* 注意：
				* 如果有多个排序条件，则当前边的条件值一样时,才会判断第二条件。	 
2. 聚合函数：将一列数据作为一个整体，进行纵向的计算。
	1. count:计算个数 
		1.一般选择非空的列：主键
		2.count(*)
	
	2.max：计算最大值
	3. min：计算最小值
	4. sum：计算和
	5. avg：计算平均值



	* 注意：聚合函数的计算,排除null值
			* 解决方案：
				1. 选择不包含非空的列进行计算
				2. IFNULL函数 
3. 分组查询:
		1.语法 ： group by 分组字段；
		2. 注意：
			1. 分组之后查询的字段：分组字段，聚合函数
			2. where 和having 的区别
					1. where 在分组之前进行进行限定，如果不满足条件，则不参与分组。having 在分组之后进行限定，如果不满足结果，则不会被查询出来
					2. where 后不可以跟聚合函数，having可以进行聚合函数的判断
					
4. 分页查询
		
		1. 语法：limit 开始的索引，每页查询的条数；
		2. 公式 开始的索引 = （当前的页码-1）*每页的条数
              -- 每页显示3条记录
							
	         SELECT * FROM student LIMIT 0,3;-- 第一页
							
			 SELECT * FROM student LIMIT 3,3; -- 第二页
        3. limit是一个MySQL “方言”
</code></pre> 
<h3><a id="_242"></a>约束</h3> 
<pre><code>* 概念：对表中的数据进行限定，保证数据的正确性、有效性和完整性。
* 分类
	* 1. 主键约束：primary key
	* 2. 非空约束： not null
	* 3. 唯一约束：unique
	* 4.外键约束：foreign key

* 非空约束： not null	 
		1. 创建表时添加约束
			CREATE TABLE stu1(
				id INT,
				NAME VARCHAR(20) NOT NULL -- name为非空
			);
		2. -- 创建表完后，添加非空约束
			ALTER TABLE stu1 MODIFY NAME VARCHAR(20) NOT NULL;
		3.-- 删除name 的非空约		
			ALTER TABLE stu1 MODIFY NAME VARCHAR(20);

*	唯一约束：unique,某一列的值不能重复
	1. 注意：
			* 唯一约束可以有NULL值，但是只能有一条记录为null
	2. 在创建表时，条件唯一约束
		  CREATE TABLE stu(
				id INT,
				phone_number VARCHAR(20) UNIQUE -- 手机号
				);
		3. 删除唯一约束
			ALTER TABLE stu DROP INDEX phone_number;
		4. -- 创建表完之后 添加唯一约束
			ALTER TABLE stu MODIFY  phone_number VARCHAR(20) UNIQUE;

*主键约束：primary key
		1. 注意：
			1. 含义：非空且唯一
			2. 一张表只能有一个字段为主键
			3. 主键就是表中记录的唯一标识
		
		2. 在创建表时，添加主键约束
			 create table stu(
			 	id int primary key, -- 给id 添加主键约束
			 	name varchar(20)
			 	);
		
		3. --  删除主键
  				-- 错误 alter table stu modify id int;
			ALTER TABLE stu DROP PRIMARY KEY;

	    4.-- 创建完表后，添加主键
			ALTER TABLE stu MODIFY id INT PRIMARY KEY;
	
		5. 自动增长：
			1. 概念：如果某一列是数值类型的，使用auto_increment 可以 完成值的自动增长
			2. 在创建表时，添加主键约束，并且完成主键自增长
			 create table stu(
			 	id int primary key atuo_increment, -- 给id 添加主键约束
			 	name varchar(20)
			 	);
                         
			* -- 删除自动增长
			 	 ALTER TABLE stu MODIFY id INT;	 
			*  -- 添加自动增长
				 ALTER TABLE stu MODIFY id INT AUTO_INCREMENT;
		
* 外键约束：foreign key
	* 1. 在创建表时，可以添加外键
			* 语法：
				create table 表名（
					... 
					外键列
					constraint 外键名称 foreign key
				);
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/398d696e869c952b11c7b116938accbc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端QRCode.js生成二维码插件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1514e75b3d94cdd45b2f39d192ef3743/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">常见漏洞原理简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spark安装部署说明(单机) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spark安装部署说明(单机)" />
<meta property="og:description" content="0.环境说明 硬件环境：VMWare虚拟机，内存2GB 操作系统：Ubuntu12.04 32位操作系统 （64位操作系统的话更好，但是虚拟机还是32位吧） 准备安装软件：JDK1.7 , Hadoop2.6.0, Scala2.10.4, Spark1.2.0
1.安装JDK (1) 下载JDK1.7(建议1.7) ，名为jdk-7u79-linux-i586.tar.gz，下载地址http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html (2) 将下载的jdk-7u79-linux-i586.tar.gz复制到/usr/local目录 进入文件所在目录，cp jdk-7u79-linux-i586.tar.gz /usr/local (3) 解压缩 # tar zxvf jdk-7u79-linux-i586.tar.gz， 得到jdk1.7.0_79文件夹，为其创建快捷方式：
# ln –s jdk1.7.0_79 java (4) 修改配置文件~/.bashrc，添加环境变量:
# sudo gedit ~/.bashrc //打开文件 向该文件末尾添加如下语句并保存：
export JAVA_HOME=/usr/local/java export JRE_HOME=${JAVA_HOME}/jre export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib export PATH=${JAVA_HOME}/bin:$PATH 关闭，控制台输入
# source ~/.bashrc激活环境变量 输入 java –version验证是否配置正确
2 配置ssh无密码登陆 （1）安装ssh-server
# apt-get install openssh-server （2）控制台输入
# ssh-keygen -t dsa -P &#39;&#39; -f ~/." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7e6babaf481ffd37d93095c25a0fa345/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-05-22T21:50:47+08:00" />
<meta property="article:modified_time" content="2016-05-22T21:50:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spark安装部署说明(单机)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>0.环境说明 <br> 硬件环境：VMWare虚拟机，内存2GB <br> 操作系统：Ubuntu12.04 32位操作系统 （64位操作系统的话更好，但是虚拟机还是32位吧） <br> 准备安装软件：JDK1.7 , Hadoop2.6.0, Scala2.10.4, Spark1.2.0</p> 
<p>1.安装JDK <br> (1) 下载JDK1.7(建议1.7) ，名为jdk-7u79-linux-i586.tar.gz，下载地址<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html" rel="nofollow">http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html</a> <br> (2) 将下载的jdk-7u79-linux-i586.tar.gz复制到/usr/local目录 <br> 进入文件所在目录，cp jdk-7u79-linux-i586.tar.gz /usr/local <br> (3) 解压缩 <br> <code># tar zxvf jdk-7u79-linux-i586.tar.gz</code>， <br> 得到jdk1.7.0_79文件夹，为其创建快捷方式：</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># ln –s jdk1.7.0_79 java</span></code></pre> 
<p>(4) 修改配置文件~/.bashrc，添加环境变量:</p> 
<pre class="prettyprint"><code class=" hljs ruleslanguage"><span class="hljs-array"># sudo gedit </span>~/.bashrc <span class="hljs-comment">//打开文件</span></code></pre> 
<p>向该文件末尾添加如下语句并保存：</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-keyword">export</span> JAVA_HOME=/usr/local/java
<span class="hljs-keyword">export</span> JRE_HOME=<span class="hljs-variable">${JAVA_HOME}</span>/jre
<span class="hljs-keyword">export</span> CLASSPATH=.:<span class="hljs-variable">${JAVA_HOME}</span>/lib:<span class="hljs-variable">${JRE_HOME}</span>/lib
<span class="hljs-keyword">export</span> PATH=<span class="hljs-variable">${JAVA_HOME}</span>/bin:<span class="hljs-variable">$PATH</span></code></pre> 
<p>关闭，控制台输入</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># source ~/.bashrc激活环境变量</span></code></pre> 
<p>输入 java –version验证是否配置正确</p> 
<p>2 配置ssh无密码登陆 <br> （1）安装ssh-server</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># apt-get install openssh-server</span></code></pre> 
<p>（2）控制台输入</p> 
<pre class="prettyprint"><code class=" hljs javascript"># ssh-keygen -t dsa -P <span class="hljs-string">''</span> -f ~<span class="hljs-regexp">/.ssh/i</span>d_dsa
# cat ~<span class="hljs-regexp">/.ssh/i</span>d_dsa.pub &gt;&gt; ~<span class="hljs-regexp">/.ssh/</span>authorized_keys</code></pre> 
<p>（3）验证ssh，# ssh localhost，如果能直接进入即可（第一次输入需要新建，输入y）</p> 
<p>输入exit可退出</p> 
<p>3 安装hadoop2.6.0 <br> （1） 下载hadoop-2.6.0.tar.gz。Hadoop2.6.0本身是通过64位JDK编译的，如果操作系统和JDK均为64位，可官网直接下载 <br> 32位操作系统也能使用 <br> (2) 将下载的hadoop-2.6.0.tar.gz复制到/usr/local目录 <br> 进入文件所在目录，cphadoop-2.6.0.tar.gz /usr/local <br> (3) 解压缩</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># tar zxvf hadoop-2.6.0.tar.gz，</span></code></pre> 
<p>得到hadoop-2.6.0文件夹 <br> (4) 进入hadoop-2.6.0文件夹的etc/hadoop进行配置，配置以下文件：hadoop-env.sh ； core-site.xml；hdfs-site.xml；mapred-site.xml <br> hadoop-env.sh 找到</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-comment"># The java implementation to use.</span>
<span class="hljs-keyword">export</span> JAVA_HOME=<span class="hljs-variable">${JAVA_HOME}</span></code></pre> 
<p>修改为</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># The java implementation to use.</span>
<span class="hljs-preprocessor">#export JAVA_HOME=${JAVA_HOME}</span>
export JAVA_HOME=/usr/local/java</code></pre> 
<pre class="prettyprint"><code class=" hljs xml">core-site.xml 删除里面所有，写入
<span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>fs.default.name<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>hdfs://localhost:9000<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>hadoop.tmp.dir<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>/usr/local/hadoop-2.6.0/tmp<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span>

hdfs-site.xml删除里面所有，写入
<span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>dfs.name.dir<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>/usr/local/hadoop-2.6.0/hdfs/name<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>dfs.data.dir<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>/usr/local/hadoop-2.6.0/hdfs/data<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>dfs.replication<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span>
注：dfs.replication一定是1，因为我们是单机版本的，正常情况下是3

mapred-site.xml 好像一开始没这个文件，新建（直接输入sudo gedit mapred-site.xml即可，或者touch mapred-site.xml），写入
<span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>mapreduce.framework.name<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>yarn<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span></code></pre> 
<p>(5) 关闭防火墙（防火墙可能会影响到hadoop工作，但是单机版本应该不影响）</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># sudo ufw disable</span></code></pre> 
<p>(6) 创建以下文件夹（在（3）中配置的一些地址） <br> mkdir /usr/local/hadoop-2.6.0/tmp <br> mkdir /usr/local/hadoop-2.6.0/hdfs <br> mkdir /usr/local/hadoop-2.6.0/hdfs/name <br> mkdir /usr/local/hadoop-2.6.0/hdfs/data</p> 
<p>(7) 启动hadoop (在hadoop文件夹目录) <br> 1) 格式化namenode</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># bin/hdfs namenode –format</span></code></pre> 
<p>2) 启动相应进程</p> 
<pre class="prettyprint"><code class=" hljs sql"># sbin/<span class="hljs-operator"><span class="hljs-keyword">start</span>-<span class="hljs-keyword">all</span>.sh</span></code></pre> 
<p>3)输入jps可看到进程</p> 
<p>4）浏览器输入localhost:8088可出现以下UI界面 <br> <img src="https://images2.imgbox.com/c0/02/JrNQXA7H_o.png" alt="这里写图片描述" title=""> <br> 4. 安装scala <br> (1) 下载下载scala-2.10.4.tgz，地址<a href="http://www.scala-lang.org/download/2.10.4.html" rel="nofollow">http://www.scala-lang.org/download/2.10.4.html</a> <br> (2) 拷贝到/usr/local文件夹并解压</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># cp scala-2.10.4.tgz /usr/local</span>
<span class="hljs-preprocessor"># tar zxvf scala-2.10.4.tgz</span></code></pre> 
<p>(3) 配置环境变量，文件~/.bashrc</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># sudo gedit ~/.bashrc</span></code></pre> 
<p>加入以下配置并保存：</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-keyword">export</span> SCALA_HOME=/usr/local/scala-<span class="hljs-number">2.10</span>.<span class="hljs-number">4</span>
<span class="hljs-keyword">export</span> PATH=<span class="hljs-variable">$JAVA_HOME</span>/bin<span class="hljs-variable">$HADOOP_HOME</span>/bin:<span class="hljs-variable">$HIVE_HOME</span>/bin:<span class="hljs-variable">$SCALA_HOME</span>/bin:<span class="hljs-variable">$PATH</span>
<span class="hljs-comment"># source ~/.bashrc激活配置</span></code></pre> 
<p>(4)控制台输入scala验证是否配置成功</p> 
<p>输入exit可退出</p> 
<p>5.安装spark-1.2.0-bin-hadoop2.4 <br> (1)下载spark-1.2.0-bin-hadoop2.4.tgz，解压到/usr/local/spark-1.2.0-bin-hadoop2.4。 <br> 下载地址<a href="http://spark.apache.org/downloads.html" rel="nofollow">http://spark.apache.org/downloads.html</a> <br> <img src="https://images2.imgbox.com/7c/a8/xjZCw6OJ_o.png" alt="这里写图片描述" title=""> <br> (2) 配置环境变量，文件~/.bashrc</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># sudo gedit ~/.bashrc</span></code></pre> 
<p>加入以下配置并保存：</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-keyword">export</span> SPARK_HOME=/usr/local/spark-<span class="hljs-number">1.2</span>.<span class="hljs-number">0</span>-bin-hadoop2.<span class="hljs-number">4</span>
<span class="hljs-keyword">export</span> PATH=<span class="hljs-variable">$JAVA_HOME</span>/bin:<span class="hljs-variable">$HADOOP_HOME</span>/bin:<span class="hljs-variable">$SCALA_HOME</span>/bin:<span class="hljs-variable">$SPARK_HOME</span>/bin:<span class="hljs-variable">$HIVE_HOME</span>/bin:<span class="hljs-variable">$PATH</span>
<span class="hljs-comment"># source ~/.bashrc激活配置</span></code></pre> 
<p>(3) 配置spark <br> 进入spark目录的conf文件夹，输入</p> 
<pre class="prettyprint"><code class=" hljs vala"><span class="hljs-preprocessor"># cd $SPARK_HOME/conf</span>
<span class="hljs-preprocessor"># cp spark-env.sh.template spark-env.sh 复制配置文件</span>
<span class="hljs-preprocessor"># sudo gedit spark-env.sh 文件末尾加入</span>
export JAVA_HOME=/usr/local/java
export SCALA_HOME=/usr/local/scala-<span class="hljs-number">2.10</span><span class="hljs-number">.4</span>
export HADOOP_CONF_DIR=/usr/local/hadoop-<span class="hljs-number">2.6</span><span class="hljs-number">.0</span>/etc/Hadoop
保存
(<span class="hljs-number">4</span>) 进入spark目录启动spark
<span class="hljs-preprocessor"># sbin/start-all.sh</span></code></pre> 
<p>输入jps可看到进程</p> 
<p>(5)在浏览器中输入localhost:8080可看到spark的ui界面</p> 
<p>结束spark进程： <br> Spark目录下sbin/stop-all.sh <br> 结束hadoop进程： <br> Hadoop目录下sbin/stop-all.sh</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ecd6196c02793be4118d0474accf0a85/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">记一次apache访问无响应问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ceaa9ba6379917927c7bcd9bd8cc9739/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Bootstrap 响应式实用工具——visible-xs、visible-sm、hidden-xs、hidden-sm等</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
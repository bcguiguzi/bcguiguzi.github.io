<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hibernate实战之操作MySQL数据库（2024-1-8） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hibernate实战之操作MySQL数据库（2024-1-8）" />
<meta property="og:description" content="Hibernate实战之操作MySQL数据库 2024.1.8 前提环境（Java&#43;MySQL&#43;Navicat&#43;VS Code）1、Hibernate简介1.1 了解HQL 2、MySQL数据库建表2.1 编写SQL脚本2.2 MySQL执行脚本 3、Java操作MySQL实例（Hibernate）3.1 准备依赖的第三方jar包3.2 了解MySQL数据库连接配置信息并配置XML文件3.2.1 新建 hibernate.cfg.xml 文件3.2.2 新建 Row.hbm.xml 文件 3.3 编写Java类实现数据库操作（Row&#43;App）3.3.1 Row.java3.3.2 App.java（含main函数） 3.4 测试执行并利用Navicat查看数据库结果3.4.1 新增3.4.2 修改3.4.3 查询3.4.4 删除 4、小结 前提环境（Java&#43;MySQL&#43;Navicat&#43;VS Code） Java 1.8 Visual Studio Code Navicat Premium MySQL 8.0.20(Company Edition) 1、Hibernate简介 Hibernate是一个以LGPL（Lesser GNU Public License）许可证形式发布的开源项目，它可以直接提供相关支持，底层驱动可以随意切换数据库，快速简洁。使业务层与具体数据库分开，只针对Hibernate 进行开发，完成数据和对象的持久化。如果大家感兴趣想要深入了解，建议参考其官方文档和引导示例学习，如QuickStart和中文文档。
Hibernate英文官网 Hibernate-Github官网 Hibernate-中文网 Hibernate-W3CSchool 1.1 了解HQL HQL是Hibernate Query Language的缩写，它可以提供更加丰富灵活、更为强大的查询能力，HQL更接近SQL语句查询语法，对动态查询参数绑定提供了丰富的支持，提供了类似标准SQL语句的查询方式，同时也提供了更加面向对象的封装。尤其在实体查询、更新、删除方面，一些常见的用法示例如下：
from User user where user age=20; from User user where user age between 20 and 30; from User user where user age in(20,30); from User user where user name is null; from User user where user name like &#39;%zx%&#39;; from User user where (user age%2)=1; from User user where user age=20 and user name like &#39;%zx%&#39;; 此外，具体的语法学习可参考社区文档。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/40e325308b45aea2be54d53a966dcd4e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T01:59:14+08:00" />
<meta property="article:modified_time" content="2024-01-09T01:59:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hibernate实战之操作MySQL数据库（2024-1-8）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Hibernate实战之操作MySQL数据库 2024.1.8</h4> 
 <ul><li><a href="#JavaMySQLNavicatVS_Code_2" rel="nofollow">前提环境（Java+MySQL+Navicat+VS Code）</a></li><li><a href="#1Hibernate_26" rel="nofollow">1、Hibernate简介</a></li><li><ul><li><a href="#11_HQL_52" rel="nofollow">1.1 了解HQL</a></li></ul> 
  </li><li><a href="#2MySQL_75" rel="nofollow">2、MySQL数据库建表</a></li><li><ul><li><a href="#21_SQL_77" rel="nofollow">2.1 编写SQL脚本</a></li><li><a href="#22_MySQL_101" rel="nofollow">2.2 MySQL执行脚本</a></li></ul> 
  </li><li><a href="#3JavaMySQLHibernate_121" rel="nofollow">3、Java操作MySQL实例（Hibernate）</a></li><li><ul><li><a href="#31_jar_123" rel="nofollow">3.1 准备依赖的第三方jar包</a></li><li><a href="#32_MySQLXML_155" rel="nofollow">3.2 了解MySQL数据库连接配置信息并配置XML文件</a></li><li><ul><li><a href="#321__hibernatecfgxml__161" rel="nofollow">3.2.1 新建 hibernate.cfg.xml 文件</a></li><li><a href="#322__Rowhbmxml__202" rel="nofollow">3.2.2 新建 Row.hbm.xml 文件</a></li></ul> 
   </li><li><a href="#33_JavaRowApp_220" rel="nofollow">3.3 编写Java类实现数据库操作（Row+App）</a></li><li><ul><li><a href="#331_Rowjava_222" rel="nofollow">3.3.1 Row.java</a></li><li><a href="#332_Appjavamain_277" rel="nofollow">3.3.2 App.java（含main函数）</a></li></ul> 
   </li><li><a href="#34_Navicat_414" rel="nofollow">3.4 测试执行并利用Navicat查看数据库结果</a></li><li><ul><li><a href="#341__417" rel="nofollow">3.4.1 新增</a></li><li><a href="#342__421" rel="nofollow">3.4.2 修改</a></li><li><a href="#343__425" rel="nofollow">3.4.3 查询</a></li><li><a href="#344__429" rel="nofollow">3.4.4 删除</a></li></ul> 
  </li></ul> 
  </li><li><a href="#4_433" rel="nofollow">4、小结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="JavaMySQLNavicatVS_Code_2"></a>前提环境（Java+MySQL+Navicat+VS Code）</h2> 
<table><tbody><tr><td> <img src="https://images2.imgbox.com/35/7b/NPyQYXDj_o.png" width="100%"> 
    <center> 
     <strong>Java 1.8</strong> 
    </center> </td><td> <img src="https://images2.imgbox.com/d9/1f/gxbPOiJJ_o.png" width="10%"> 
    <center> 
     <strong>Visual Studio Code</strong> 
    </center> </td></tr><tr><td> <img src="https://images2.imgbox.com/55/39/laoxbhZB_o.png" width="100%"> 
    <center> 
     <strong>Navicat Premium</strong> 
    </center> </td><td> <img src="https://images2.imgbox.com/7a/24/BYiivN1Q_o.png" width="90%"> 
    <center> 
     <strong>MySQL 8.0.20(Company Edition)</strong> 
    </center> </td></tr></tbody></table> 
<h2><a id="1Hibernate_26"></a>1、Hibernate简介</h2> 
<p>        <a href="https://hibernate.org/" rel="nofollow">Hibernate</a>是一个以<strong>LGPL</strong>（Lesser GNU Public License）许可证形式发布的开源项目，它可以直接提供相关支持，底层驱动可以随意切换数据库，快速简洁。使业务层与具体数据库分开，只针对<code>Hibernate</code> 进行开发，完成数据和对象的持久化。如果大家感兴趣想要深入了解，建议参考其官方文档和引导示例学习，如<a href="https://docs.jboss.org/hibernate/orm/6.4/quickstart/html_single/" rel="nofollow">QuickStart</a>和<a href="https://hibernate.net.cn/" rel="nofollow">中文文档</a>。</p> 
<table><tbody><tr><td> <img src="https://images2.imgbox.com/49/20/eJSVMOXX_o.png" width="100%"> 
    <center> 
     <strong>Hibernate英文官网</strong> 
    </center> </td><td> <img src="https://images2.imgbox.com/a3/5a/NsnWyMpS_o.png" width="100%"> 
    <center> 
     <strong>Hibernate-Github官网</strong> 
    </center> </td></tr><tr><td> <img src="https://images2.imgbox.com/c8/56/TkOoQ5we_o.png" width="100%"> 
    <center> 
     <strong>Hibernate-中文网</strong> 
    </center> </td><td> <img src="https://images2.imgbox.com/96/8e/PM8VMpWE_o.png" width="90%"> 
    <center> 
     <strong>Hibernate-W3CSchool</strong> 
    </center> </td></tr></tbody></table> 
<h3><a id="11_HQL_52"></a>1.1 了解HQL</h3> 
<p>        <strong>HQL</strong>是<code>Hibernate Query Language</code>的缩写，它可以提供更加<strong>丰富灵活</strong>、更<strong>为强大</strong>的查询能力，<code>HQL</code>更接近<code>SQL</code>语句查询语法，对动态查询参数绑定提供了丰富的支持，提供了类似标准<code>SQL</code>语句的查询方式，同时也提供了<strong>更加面向对象的封装</strong>。尤其在<code>实体查询、更新、删除</code>方面，一些常见的用法示例如下：</p> 
<pre><code class="prism language-scala">from User user where user age<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>

from User user where user age between <span class="token number">20</span> and <span class="token number">30</span><span class="token punctuation">;</span>

from User user where user age in<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

from User user where user name is <span class="token keyword">null</span><span class="token punctuation">;</span>

from User user where user name like <span class="token char">'%zx%'</span><span class="token punctuation">;</span>

from User user where <span class="token punctuation">(</span>user age<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>

from User user where user age<span class="token operator">=</span><span class="token number">20</span> and user name like <span class="token char">'%zx%'</span><span class="token punctuation">;</span>
</code></pre> 
<p>        此外，具体的语法学习可参考<a href="https://docs.jboss.org/hibernate/orm/3.5/reference/zh-CN/html/queryhql.html" rel="nofollow">社区文档</a>。</p> 
<img src="https://images2.imgbox.com/ed/56/qYDnLiVd_o.png" width="60%"> 
<h2><a id="2MySQL_75"></a>2、MySQL数据库建表</h2> 
<p>        为了便于后续使用<code>Java</code>代码操作<code>MySQL</code>数据库，首先需要设计数据表结构，对表中的字段数量、类型、长度、别名、英文名均进行设置，编写好SQL脚本并在数据库中执行，之后在<code>Navicat</code>或<code>MySQL Workbench</code>中进行查看。</p> 
<h3><a id="21_SQL_77"></a>2.1 编写SQL脚本</h3> 
<table><thead><tr><th>字段名</th><th>字段类型</th><th>字段别名</th></tr></thead><tbody><tr><td>id</td><td>文本</td><td>唯一标识</td></tr><tr><td>name</td><td>文本</td><td>名称</td></tr><tr><td>date</td><td>日期</td><td>日期</td></tr><tr><td>income</td><td>小数</td><td>收入</td></tr></tbody></table> 
<center> 
 <strong>test数据表字段设计</strong> 
</center> 
<p>        针对上述表格中的<code>create_Test.sql</code>脚本文件内容如下：</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>my_db<span class="token punctuation">`</span></span> <span class="token keyword">default</span> <span class="token keyword">character</span> <span class="token keyword">set</span> utf8mb4 <span class="token keyword">collate</span> utf8mb4_unicode_ci<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token identifier"><span class="token punctuation">`</span>my_db<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">SET</span> NAMES utf8mb4<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">if</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>test<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
	<span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>date<span class="token punctuation">`</span></span> <span class="token keyword">timestamp</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>income<span class="token punctuation">`</span></span>  float4<span class="token punctuation">,</span>
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">COLLATE</span><span class="token operator">=</span>utf8mb4_unicode_ci<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="22_MySQL_101"></a>2.2 MySQL执行脚本</h3> 
<p>        <strong>第一步</strong>，打开<code>MySQL Workbench</code>或<code>Navicat</code>，新建<code>MySQL</code>数据库连接，输入正确的<mark>用户名</mark>和<mark>密码</mark>后测试连接，连接成功后可以看到其中的数据库；<br>         <strong>第二步</strong>，点击菜单中的新建查询，然后在编辑框中复制<code>SQL</code>语句，当然也可以打开现有的<code>SQL</code>文件，之后点击<strong>执行</strong>按钮即可查看到数据库和数据表已成功创建。</p> 
<img src="https://images2.imgbox.com/fa/79/aUJIuOgA_o.png" width="100%"> 
<center> 
 <strong>MySQL Workbench创建数据库和数据表</strong> 
</center> 
<table><tbody><tr><td> <img src="https://images2.imgbox.com/d9/cf/t9nit9cp_o.png" width="90%"> 
    <center> 
     <strong>MySQL Workbench中查看数据表</strong> 
    </center> </td><td> <img src="https://images2.imgbox.com/43/0f/HkTAKzry_o.png" width="90%"> 
    <center> 
     <strong>Navicat Premium中查看数据表</strong> 
    </center> </td></tr></tbody></table> 
<h2><a id="3JavaMySQLHibernate_121"></a>3、Java操作MySQL实例（Hibernate）</h2> 
<p>        下面具体以一个完整的<code>Java</code>项目为例，来介绍如何利用<code>Hibernate</code>对<code>MySQL</code>进行增删改查等操作。整个过程可能有些繁琐，但都较为基本，按部就班操作即可，具体分为：（1）准备三方依赖<code>jar</code>包；（2）了解<code>MySQL</code>数据库连接配置信息；（3）配置<code>XML</code>文件设置jdbc数据库连接<code>MySQL</code>；（4）编写<code>Java</code>类实现数据库操作;（5）测试执行查看效果。</p> 
<h3><a id="31_jar_123"></a>3.1 准备依赖的第三方jar包</h3> 
<p>        <code>Java</code>项目代码所依赖的三方jar包名称如下，具体可以从<a href="https://mvnrepository.com/" rel="nofollow">Maven官方仓库</a>下载。（注：如果使用<strong>Maven</strong>，也可在pom文件中引入）</p> 
<pre><code class="prism language-powershell">antlr-2<span class="token punctuation">.</span>7<span class="token punctuation">.</span>7<span class="token punctuation">.</span>jar
byte-buddy-1<span class="token punctuation">.</span>11<span class="token punctuation">.</span>22<span class="token punctuation">.</span>jar
classmate-1<span class="token punctuation">.</span>5<span class="token punctuation">.</span>1<span class="token punctuation">.</span>jar
dom4j-2<span class="token punctuation">.</span>1<span class="token punctuation">.</span>1<span class="token punctuation">.</span>jar
hibernate-commons-annotations-5<span class="token punctuation">.</span>0<span class="token punctuation">.</span>4<span class="token punctuation">.</span>Final<span class="token punctuation">.</span>jar
hibernate-core-5<span class="token punctuation">.</span>3<span class="token punctuation">.</span>14<span class="token punctuation">.</span>Final<span class="token punctuation">.</span>jar
javax<span class="token punctuation">.</span>persistence-api-2<span class="token punctuation">.</span>2<span class="token punctuation">.</span>jar
jboss-logging-3<span class="token punctuation">.</span>3<span class="token punctuation">.</span>3<span class="token punctuation">.</span>Final<span class="token punctuation">.</span>jar
jta-1<span class="token punctuation">.</span>1<span class="token punctuation">.</span>jar
mysql-connector-java-8<span class="token punctuation">.</span>0<span class="token punctuation">.</span>18<span class="token punctuation">.</span>jar
</code></pre> 
<table><tbody><tr><td> <img src="https://images2.imgbox.com/32/9f/DoFC7vdo_o.png" width="90%"> 
    <center> 
     <strong>Maven仓库官网（可下载jar包）</strong> 
    </center> </td></tr><tr><td> <img src="https://images2.imgbox.com/2e/1f/xw2yduY9_o.png" width="60%"> 
    <center> 
     <strong>Java工程利用Hibernate操作MySQL所依赖的三方jar包</strong> 
    </center> </td></tr></tbody></table> 
<h3><a id="32_MySQLXML_155"></a>3.2 了解MySQL数据库连接配置信息并配置XML文件</h3> 
<table><thead><tr><th>数据库名称</th><th>ip地址</th><th>端口</th><th>用户名</th><th>密码</th></tr></thead><tbody><tr><td>my_db</td><td>localhost</td><td>3306</td><td>root</td><td>123456</td></tr></tbody></table> 
<center> 
 <strong>MySQL数据库连接配置信息</strong> 
</center> 
<h4><a id="321__hibernatecfgxml__161"></a>3.2.1 新建 hibernate.cfg.xml 文件</h4> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">hibernate-configuration</span> <span class="token name">PUBLIC</span>
          <span class="token string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
          <span class="token string">"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hibernate-configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-factory</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 指定方言 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialect<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            org.hibernate.dialect.MySQLDialect
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 链接数据库url --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>connection.url<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
              jdbc:mysql://localhost:3306/my_db?useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf-8<span class="token entity named-entity" title="&amp;">&amp;amp;</span>serverTimezone=GMT%2B8
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 连接数据库的用户名 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>connection.username<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            root
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 数据库的密码 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>connection.password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            123456
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 数据库驱动 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>connection.driver_class<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            com.mysql.jdbc.Driver
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 显示sql语句 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show_sql<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            true
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 格式化sql语句 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>format_sql<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 映射文件配置 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapping</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com/Row.hbm.xml<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-factory</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hibernate-configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="322__Rowhbmxml__202"></a>3.2.2 新建 Row.hbm.xml 文件</h4> 
<p>        项目<code>src</code>下的<code>Row.hbm.xml</code>文件是对<code>hibernate</code>对数据库<code>my_db</code>中<code>test</code>表做的映射配置，同时<strong>应注意与对应的数据表类放在同一目录</strong>（<strong>package</strong>包）下，因此在编写<code>HQL</code>字符串语句时，需要从<code>Row</code>中查询而非<code>test</code>，实际执行时会从<code>Row</code>映射到<code>test</code>数据表哦！！！</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">hibernate-mapping</span> <span class="token name">PUBLIC</span> <span class="token string">"-//Hibernate/Hibernate Mapping DTD 3.0//EN"</span> <span class="token string">"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hibernate-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.Row<span class="token punctuation">"</span></span> <span class="token attr-name">table</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- &lt;generator class="org.hibernate.id.UUIDGenerator"/&gt; --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>generator</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uuid<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>income<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>income<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hibernate-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="33_JavaRowApp_220"></a>3.3 编写Java类实现数据库操作（Row+App）</h3> 
<p>        编写<code>Row.java</code>类作为对<code>test</code>数据表中每行记录的抽象，编写<code>App</code>类调用main函数连接数据库执行相应的操作实例。</p> 
<h4><a id="331_Rowjava_222"></a>3.3.1 Row.java</h4> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>persistence<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">GenericGenerator</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Row</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//设置主键</span>
    <span class="token annotation punctuation">@Id</span> <span class="token comment">//配置uuid，原本jpa是不支持uuid的，但借用hibernate的方法能够实现。</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>generator <span class="token operator">=</span> <span class="token string">"idGenerator"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GenericGenerator</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"idGenerator"</span><span class="token punctuation">,</span> strategy <span class="token operator">=</span> <span class="token string">"org.hibernate.id.UUIDGenerator"</span><span class="token punctuation">)</span> <span class="token comment">// uuid</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> unique <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> nullable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> length <span class="token operator">=</span> <span class="token number">32</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Date</span> date<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Float</span> income<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Float</span> <span class="token function">getIncome</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> income<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setIncome</span><span class="token punctuation">(</span><span class="token class-name">Float</span> income<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>income <span class="token operator">=</span> income<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="332_Appjavamain_277"></a>3.3.2 App.java（含main函数）</h4> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span></span><span class="token class-name">SessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>cfg<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span></span><span class="token class-name">Session</span></span><span class="token punctuation">;</span>
<span class="token comment">// import org.hibernate.id.UUIDHexGenerator;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span></span><span class="token class-name">Row</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 一、插入数据（新增）</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insertData</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Configuration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建Configuration对象并加载hibernate.cfg.xml配置文件</span>
        <span class="token class-name">SessionFactory</span> sessionFactory <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">buildSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取SessionFactory</span>
        <span class="token class-name">Session</span> session <span class="token operator">=</span> sessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从sessionFactory 获取 Session</span>
        <span class="token class-name">Transaction</span> transaction <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 事务开启</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>count<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Row</span> row <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Row</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//uuid已经自动生成，无须手动添加</span>
            row<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			row<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Float</span> income <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> count <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			row<span class="token punctuation">.</span><span class="token function">setIncome</span><span class="token punctuation">(</span>income<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Object</span> res <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将对象(Row)保存到表test中</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"id:"</span> <span class="token operator">+</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 事务提交</span>
        session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭session &amp; sessionFactory</span>
        sessionFactory<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 二、根据条件删除数据库（删除）</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
		<span class="token class-name">Configuration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建Configuration对象并加载hibernate.cfg.xml配置文件</span>
        <span class="token class-name">SessionFactory</span> sessionFactory <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">buildSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取SessionFactory</span>
        <span class="token class-name">Session</span> session <span class="token operator">=</span> sessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从sessionFactory 获取 Session</span>
		<span class="token keyword">try</span>
        <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">Transaction</span> transaction <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> hql <span class="token operator">=</span> <span class="token string">"delete from Row where "</span> <span class="token operator">+</span> condition<span class="token punctuation">;</span>
			<span class="token keyword">int</span> rowsAffected <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rowsAffected <span class="token operator">+</span> <span class="token string">" rows affected."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"出错: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">finally</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
			    session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭session &amp; sessionFactory</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionFactory <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                sessionFactory<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

    <span class="token comment">// 三、根据条件更新数据库（修改）</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">updateData</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Configuration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建Configuration对象并加载hibernate.cfg.xml配置文件</span>
        <span class="token class-name">SessionFactory</span> sessionFactory <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">buildSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取SessionFactory</span>
        <span class="token class-name">Session</span> session <span class="token operator">=</span> sessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从sessionFactory 获取 Session</span>
		<span class="token keyword">try</span>
        <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">Transaction</span> transaction <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> hql <span class="token operator">=</span> <span class="token string">"update Row "</span> <span class="token operator">+</span> condition<span class="token punctuation">;</span>
			<span class="token keyword">int</span> rowsAffected <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>rowsAffected <span class="token operator">+</span> <span class="token string">" rows affected."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"出错: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">finally</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
			    session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭session &amp; sessionFactory</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionFactory <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                sessionFactory<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

    <span class="token comment">// 四、根据条件查询数据库（查询）</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">queryAllData</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		
        <span class="token class-name">Configuration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 创建Configuration对象并加载hibernate.cfg.xml配置文件</span>
        <span class="token class-name">SessionFactory</span> sessionFactory <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">buildSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取SessionFactory</span>
        <span class="token class-name">Session</span> session <span class="token operator">=</span> sessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 从sessionFactory 获取 Session</span>
		<span class="token keyword">try</span>
        <span class="token punctuation">{<!-- --></span>
			<span class="token class-name">String</span> hql <span class="token operator">=</span> <span class="token string">"from Row where "</span> <span class="token operator">+</span> condition<span class="token punctuation">;</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Row</span><span class="token punctuation">&gt;</span></span> results <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">if</span><span class="token punctuation">(</span>results<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				
				<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"找不到记录！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
				
				<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Row</span> row<span class="token operator">:</span> results<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
					
					<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"编号:"</span> <span class="token operator">+</span> row<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", 名称:"</span> <span class="token operator">+</span> row<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", 日期:"</span> <span class="token operator">+</span> row<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">", 收入:"</span> <span class="token operator">+</span> row<span class="token punctuation">.</span><span class="token function">getIncome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"出错: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">finally</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
			    session<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 关闭session &amp; sessionFactory</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sessionFactory <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                sessionFactory<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">insertData</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// queryAllData("1=1"); // "1=1" "id = '4028896c8cdd6d55018cdd6d56420002'"</span>
        <span class="token comment">// updateData("set name = '12233330000' WHERE 1=1");</span>
        <span class="token comment">// deleteData("1=1"); //  name = 'jing_zhong'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<img src="https://images2.imgbox.com/7f/c3/q2ijmUiv_o.png" width="90%"> 
<center> 
 <strong>整个Java项目文件结构</strong> 
</center> 
<h3><a id="34_Navicat_414"></a>3.4 测试执行并利用Navicat查看数据库结果</h3> 
<p>        分别对常用的四种<mark>增删改查</mark>操作来进行测试执行，<code>VSCode</code>控制台和<code>Navicat</code>数据库结果分别如下图所示。</p> 
<h4><a id="341__417"></a>3.4.1 新增</h4> 
<img src="https://images2.imgbox.com/21/64/V28FsAvV_o.png" width="90%"> 
<img src="https://images2.imgbox.com/a2/47/o1swvwRA_o.png" width="90%"> 
<h4><a id="342__421"></a>3.4.2 修改</h4> 
<img src="https://images2.imgbox.com/06/19/cfb4aF0S_o.png" width="90%"> 
<img src="https://images2.imgbox.com/6a/59/JbMXRfRh_o.png" width="90%"> 
<h4><a id="343__425"></a>3.4.3 查询</h4> 
<img src="https://images2.imgbox.com/a0/a6/1KZVJc7n_o.png" width="90%"> 
<img src="https://images2.imgbox.com/b0/e9/UypAoIZG_o.png" width="90%"> 
<h4><a id="344__429"></a>3.4.4 删除</h4> 
<img src="https://images2.imgbox.com/2b/ad/hUsS15Sv_o.png" width="90%"> 
<img src="https://images2.imgbox.com/cc/26/XQZnhxO6_o.png" width="90%"> 
<h2><a id="4_433"></a>4、小结</h2> 
<p>        <code>MySQL</code>数据库作为极其受欢迎的一种<strong>关系型数据库</strong>，一直以来以其简单快速的优点受到<strong>广大开发者/工程师</strong>的一致好评，尽管市面上流行着各种各样的数据库，无论是<strong>开源</strong>或是<strong>商用</strong>型数据库，从<mark>设计理念</mark>和<mark>查询执行速度和效率</mark>上或多或少会有不同，当然<code>软件、数据库、连接驱动</code>版本也都在随之<s>更新、迭代和升级</s> 。</p> 
<p>        在平常的学习和工作中，熟练地运用数据库，学会利用<code>SQL</code>或<code>HQL</code>等脚本语言友好地与数据库交互，不仅是一种乐趣，而且也是除文件资源管理存储外的不二选择，对前端、后端工程师都会受益匪浅，提高效率，<strong>欢迎大家共同交流和探讨新技术或者遇到的问题，千千万万的开发者通力合作，一同解决技术问题，答疑解惑助力技术升级，共同营造良好生态，拥抱绿色未来</strong>最后希望小伙伴们都能够<strong>学有所成</strong>并<mark>学以致用</mark>哦！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e51d122bd8517edba421c51ad2f50d88/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">轻量级的 Mixed Local Channel Attention (MLCA)-加强通道信息和空间信息提取能力</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bda881fbaa754ec3c57ae866d92d91bf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">全网最详细MVCC讲解，一篇看懂</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
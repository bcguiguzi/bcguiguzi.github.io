<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Plaidml--MAC&#43;A卡的深度学习方案 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Plaidml--MAC&#43;A卡的深度学习方案" />
<meta property="og:description" content="Plaidmi 适合所有显卡的深度学习加速平台 特性 支持Kears（定制版）
支持A卡
基于OpenCL加速
安装 安装环境：macOS 10.15.3(OpenCL1.2)/Anconda3/Python3.7 1. 安装 1.1 安装plaidml-keras 安装官网使用pip安装，但最好指定较低版本，高版本亲测会有莫名的bug。
pip install plaidml-keras==0.6.4 1.2 设置默认配置（选择加速优先使用的硬件） 2 demo 只比正常的kears代码多行代码
os.environ[&#34;KERAS_BACKEND&#34;] = &#34;plaidml.keras.backend&#34; 3 和pytorch对比 显卡不同，不好比较，实验室的N卡是GTX 970 显存4G， 笔记本显卡A卡为Radeon Pro 555X显存4G
DnCNN（patchsize=40x40, batch_size=128, iters=2000）训练1个epoch所需时间分别为1个小时和1.6个小时左右。
4 总结 由于此次疫情，返校时间一推再推，然而大论文提交时间并不会随之延迟。原本计划在家写好大论文的文字部分，等3月开学再补实验。可现实是：并没有如期写完文字部分和返校时间再次延迟。
今天早上起来我一度想买张显卡给家里的台式装上，还好我的口袋并不充裕，暂时打消了这个念头。最后无意中在b站看到标题为”如何在MAC下使用AMDGPU跑神经网络“的科普视频（还以为是标题党）。。。
随后按照plaidml官网安装，跑示例demo没问题，运行自己搭建的网络确发现loss一直为NAN异常值，而用cpu确正常。本来遇到bug再正常不过了，可难顶的是这玩意用的人特别少，相关博客都搜不到几篇。。。
无计可施想问问大佬，可这么冷门大佬估计也没用过，也不好麻烦人家。
几经折腾无果，晚饭后用手机翻到一篇17分钟前发的热乎的博客，正好是讲如何安装plaidml，并重点强调了要指定低版本安装。。。
重装pliaidmi-kears，运行，loss终于正常。
太折腾了，记录下，给需要的人也给自己有个参考。
完" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/a53f76f79492c1a19e4123a3cb8dd944/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-27T20:40:18+08:00" />
<meta property="article:modified_time" content="2020-02-27T20:40:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Plaidml--MAC&#43;A卡的深度学习方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="Plaidmi__0"></a>Plaidmi 适合所有显卡的深度学习加速平台</h4> 
<h5><a id="_2"></a>特性</h5> 
<ul><li> <p>支持Kears（定制版）</p> </li><li> <p>支持A卡</p> </li><li> <p>基于OpenCL加速</p> </li></ul> 
<h4><a id="_11"></a>安装</h4> 
<h5><a id="macOS_10153OpenCL12Anconda3Python37_13"></a>安装环境：macOS 10.15.3(OpenCL1.2)/Anconda3/Python3.7</h5> 
<h4><a id="1__15"></a>1. 安装</h4> 
<h5><a id="11_plaidmlkeras_17"></a>1.1 安装plaidml-keras</h5> 
<p>安装官网使用pip安装，<strong>但最好指定较低版本</strong>，高版本亲测会有莫名的bug。</p> 
<pre><code class="prism language-python">pip install plaidml<span class="token operator">-</span>keras<span class="token operator">==</span><span class="token number">0.6</span><span class="token number">.4</span>
</code></pre> 
<h5><a id="12__25"></a>1.2 设置默认配置（选择加速优先使用的硬件）</h5> 
<p><img src="https://images2.imgbox.com/9e/7a/BqmdssMi_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="2_demo_33"></a>2 demo</h4> 
<p>只比正常的kears代码多行代码</p> 
<pre><code class="prism language-python">os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">"KERAS_BACKEND"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"plaidml.keras.backend"</span>
</code></pre> 
<h5><a id="3_pytorch_41"></a>3 和pytorch对比</h5> 
<p>显卡不同，不好比较，实验室的N卡是<strong>GTX 970</strong> 显存4G， 笔记本显卡A卡为<strong>Radeon Pro 555X</strong>显存4G</p> 
<p>DnCNN（patchsize=40x40, batch_size=128, iters=2000）训练1个epoch所需时间分别为1个小时和1.6个小时左右。</p> 
<h5><a id="4__47"></a>4 总结</h5> 
<p>由于此次疫情，返校时间一推再推，然而大论文提交时间并不会随之延迟。原本计划在家写好大论文的文字部分，等3月开学再补实验。可现实是：并没有如期写完文字部分和返校时间再次延迟。</p> 
<p>今天早上起来我一度想买张显卡给家里的台式装上，还好我的口袋并不充裕，暂时打消了这个念头。最后无意中在b站看到标题为”如何在MAC下使用AMDGPU跑神经网络“的科普视频（还以为是标题党）。。。</p> 
<p>随后按照plaidml官网安装，跑示例demo没问题，运行自己搭建的网络确发现loss一直为NAN异常值，而用cpu确正常。本来遇到bug再正常不过了，可难顶的是这玩意用的人特别少，相关博客都搜不到几篇。。。</p> 
<p>无计可施想问问大佬，可这么冷门大佬估计也没用过，也不好麻烦人家。</p> 
<p>几经折腾无果，晚饭后用手机翻到一篇17分钟前发的热乎的博客，正好是讲如何安装plaidml，并重点强调了要指定低版本安装。。。</p> 
<p>重装pliaidmi-kears，运行，loss终于正常。</p> 
<p>太折腾了，记录下，给需要的人也给自己有个参考。</p> 
<p>完</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/01aeae80c453fcadaf6c372131d3810e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java格式化输出(表格样式)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5223e6e16c520408ca4ef351dbdddf35/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Leetcode 包含min函数的栈</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
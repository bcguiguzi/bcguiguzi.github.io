<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>android 常用查看手机信息命名 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="android 常用查看手机信息命名" />
<meta property="og:description" content="1. adb shell wm size
Physical size: 1600x480
2. adb shell wm density
Physical density: 160
3：打开window 动态调试开关
dumpsys window -d enable a
AMS log开关命令：adb shell dumpsys activity log x on user版本请如下打开AMS log开关:
/frameworks/base/services/core/java/com/android/server/am/ActivityManagerDebugConfig.java
static boolean DEBUG_ALL = false; //置为true
4：readelf -t fingerprint.default.so 读取elf文件段信息
readelf --string-dump=&#34;.sunwave.version&#34; fingerprint.default.so 从版本段获取版本信息
5:打开与关闭mtklog
adb shell am broadcast -a com.mediatek.mtklogger.ADB_CMD -e cmd_name start --ei cmd_target 7
adb shell am broadcast -a com.mediatek.mtklogger.ADB_CMD -e cmd_name stop --ei cmd_target 7 userdebug 抓systrace, 需要打开mtklog" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/0a051379dba758aedef599342bb15f20/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-22T18:03:21+08:00" />
<meta property="article:modified_time" content="2023-08-22T18:03:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">android 常用查看手机信息命名</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1. adb shell wm size</p> 
<p>Physical size: 1600x480</p> 
<p>2. adb shell wm density</p> 
<p>Physical density: 160</p> 
<p>3：打开window 动态调试开关</p> 
<p>dumpsys window -d enable a</p> 
<p><span style="color:#333333;">AMS log开关命令：adb shell dumpsys activity log x on </span><br><span style="color:#333333;">user版本请如下打开AMS log开关:</span><br><span style="color:#333333;">/frameworks/base/services/core/java/com/android/server/am/ActivityManagerDebugConfig.java</span><br><span style="color:#333333;">static boolean DEBUG_ALL = false; //置为true</span></p> 
<p></p> 
<p>4：readelf  -t   fingerprint.default.so  读取elf文件段信息</p> 
<p>     readelf --string-dump=".sunwave.version" fingerprint.default.so     从版本段获取版本信息</p> 
<p>5:打开与关闭mtklog</p> 
<p></p> 
<p>adb shell am broadcast -a com.mediatek.mtklogger.ADB_CMD -e cmd_name start --ei cmd_target 7<br> adb shell am broadcast -a com.mediatek.mtklogger.ADB_CMD -e cmd_name stop --ei cmd_target 7 </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/45/8d/Vu9CxMPZ_o.png"></p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/c3/f3/ccGF1AkL_o.png"></p> 
<p></p> 
<p>userdebug 抓systrace, 需要打开mtklog</p> 
<p>adb shell aee -d coreon<br> adb shell aee -d directon<br> adb reboot</p> 
<p></p> 
<p>启动mtklog    am start  com.mediatek.mtklogger/.MainActivity</p> 
<p>启动sprd log am start com.sprd.engineermode/.EngineerModeActivity</p> 
<p></p> 
<p>外销开机向导是有紧急拨号盘的，进入紧急拨号盘按*#812#可以跳过开机向导，状态栏以及导航键也可以正常使用</p> 
<p>am start com.oppo.logkit/.main.OppoLogkitLoggingActivity</p> 
<p>*#800#</p> 
<p>*#8778#  打开恢复出厂设置</p> 
<p>7、参考settings数据库</p> 
<p>settings list system|grep bri</p> 
<p></p> 
<p>8、关闭odex 编译</p> 
<p></p> 
<p> build/core/dex_preopt.mk<br> # The default value for LOCAL_DEX_PREOPT<br><br> ifeq ($(TARGET_BUILD_VARIANT),eng)<br>     DEX_PREOPT_DEFAULT ?= false<br> else</p> 
<p>    DEX_PREOPT_DEFAULT ?= true<br> endif</p> 
<p></p> 
<p>9、打印函数调用堆栈</p> 
<p>                // Binder.clearCallingIdentity();<br>                 Slog.d(TAG, "_callingPid=" + Binder.getCallingPid() + ", " + "callingUid=" + Binder.getCallingUid());<br>                 //Binder.getCallingPid();<br>                 // Binder.getCallingUid();<br>                 // Binder.clearCallingIdentity();<br>                 // Binder.restoreCallingIdentity();<br>         <br>                 Throwable throwable = new Throwable();<br>                 StackTraceElement[] stackElements = throwable.getStackTrace();<br>         <br>                 if (null != stackElements) {<!-- --><br>                     for (int i = 0; i &lt; stackElements.length; i++) {<!-- --><br>                         String szMethodName = stackElements[i].getMethodName();<br>                         Slog.d(TAG, "dual parsePackageSplitNames: szMethodName = " + szMethodName);<br>                     }</p> 
<p>                }</p> 
<p>Slog.wtf(TAG, "showBouncer ", new Throwable());</p> 
<p></p> 
<pre class="has"><code class="language-html">Slog.d(TAG,"passwordToHash = " + password + ", caller = " + Debug.getCallers(9));</code></pre> 
<p></p> 
<p>10、查看event 事件</p> 
<p> getevent -l /dev/input/event4</p> 
<p>11、列出系统有图标应用</p> 
<p>cmd package  query-activities -a android.intent.action.MAIN -c android.intent.category.LAUNCHER -f 0x00000010</p> 
<p>12、截屏</p> 
<p>adb shell screencap -p | perl -pe 's/\x0D\x0A/\x0A/g' &gt; screen.png </p> 
<p></p> 
<p><strong><strong><strong>13、E</strong></strong><strong><strong>xt4 文件挂载</strong></strong></strong></p> 
<p style="margin-left:0pt;"><span style="color:#000000;">simg2img  $1  $1.ext4</span></p> 
<p style="margin-left:0pt;"><span style="color:#000000;">mkdir tmp</span></p> 
<p style="margin-left:0pt;"><span style="color:#000000;">sudo mount -t ext4 -o loop  $1.ext4 tmp</span></p> 
<p style="margin-left:0pt;"><span style="color:#000000;">mount </span><span style="color:#000000;">–</span><span style="color:#000000;">o remount，rw custpack</span></p> 
<p style="margin-left:0pt;">14、</p> 
<p>adb shell</p> 
<p>    while true;do date &gt;&gt; /sdcard/mtklog/dumpsys_meminfo.txt;dumpsys meminfo &gt;&gt; /sdcard/mtklog/dumpsys_meminfo.txt;sleep 5;done</p> 
<p></p> 
<p>14、设置屏幕背光不熄灭的方法</p> 
<p><a href="https://blog.csdn.net/lebron_wei/article/details/50523147" title="设置屏幕背光不熄灭的方法_jaygodlike的博客-CSDN博客">设置屏幕背光不熄灭的方法_jaygodlike的博客-CSDN博客</a></p> 
<p></p> 
<p>15、根据pid 获取进程名</p> 
<p>再ams 中增加binder 接口再调用</p> 
<p></p> 
<p>    public String[] getPackagesFromPid(int pid) {<!-- --><br>         ProcessRecord pr = null;<br>         synchronized (mPidsSelfLocked) {<!-- --><br>             pr = mPidsSelfLocked.get(pid);<br>         }<br>         return (pr != null) ? pr.getPackageList() : null;<br>     }</p> 
<p></p> 
<p>14、</p> 
<p>netstat   -ano  | findstr 5037<br> tasklist | findstr    6560</p> 
<p><br> taskkill /f /t /im process_name<br> taskkill  /f  /pid  2612</p> 
<p>setprop service.adb.tcp.port 5555</p> 
<p>adb nodaemon server  ####查看5037 是否被占用<br>  </p> 
<p>15、</p> 
<p style="margin-left:0cm;">打开测试机状态栏上秒的功能</p> 
<p style="margin-left:0cm;">adb shell pm enable com.android.systemui/com.android.systemui.tuner.TunerActivity</p> 
<p style="margin-left:0cm;">adb shell am start -n com.android.systemui/com.android.systemui.tuner.TunerActivity</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">16、手机解锁：</p> 
<p style="margin-left:0cm;">adb reboot bootloader<br> fastboot flashing unlock<br> fastboot reboot<br> adb root<br> adb disable-verity<br> adb reboot<br> adb root<br> adb remount</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">17、内存</p> 
<p>android 内存管理<br> prorank<br> memtest  坏点检测、内存填充</p> 
<p>malloc_debug<br> memleak  c/c++  内存泄漏<br> 踩内存 asan</p> 
<p><br> Java的四种引用</p> 
<p>强引用，永远都不会被回收的内存，程序宁愿跑出oom也不回回收<br> 软引用，当内存不足时会进行回收（实际回收时会对内存分类标记，GC第一次运行会按优先级回收弱引用和虚引用，这时若内存还是不足，则GC会再执行一次，将软引用回收）<br> 弱引用，GC一开始工作就回回收<br> 虚引用，任何时候都有可能被回收</p> 
<p>java 静态域持有对象的应用、java 内部非静态类持有外部类引用,导致对象泄漏</p> 
<p>内存优化：开机内存 =》  压缩(zram)、启动控制、应用占用内存<br>                 运行时内存 =》 内存压缩、内存泄漏(java/native)、内存碎片管理</p> 
<p>1、zram <br> 2、unmovable <br> 3、java heap 参数<br> 4、lmk uevent事件上报（lmk native 泄漏不会杀，这样就可以java统计占内存高给到底层杀掉对应native service）<br> 5、微信加载dex 文件</p> 
<p><br> 内存异常<br> 用户态内核态内存异常种类<br> 应用内存泄漏、系统内存泄漏</p> 
<p>1、使用未初始化内存<br> 栈上变量、全局变量、局部静态变量没有初始化<br> 2、使用释放的内存如uaf<br> 已经释放堆内存、返回的局部变量、内存踩踏、null、内核中已经释放的内存（page、vmalloc、slab 等）<br> 3、越界<br> 栈溢出、堆溢出、全局变量buffer 溢出、数组越界、数据类型强制转换导致越界访问<br> 4、内存泄漏<br> 进程内存泄漏：Native heap 内存泄漏，如malloc 、new 、brk 、mmap；java heap 泄漏<br> 系统内存泄漏：slab 内存泄漏、vmalloc内存泄漏、alloc_page 内存泄漏<br> oom 虚拟内存、物理内存</p> 
<p>内存异常检测：<br> 未初始化内存、使用释放的内存、越界访问类型：<br> 用户态：uasan、hwasan、gwp-asan(native内存，集成到app)<br> 内核态：kasan、slub_debug</p> 
<p>内存泄漏：<br> 用户态 1、 LeakCannary/AndroidProfile、mat<br>            2、malloc_debug、mmap_debug(native)<br> 内核态slub_debug、slubtrace<br>           vmallocinfo<br>           page_owner（stackdepot）<br>           kmemleak</p> 
<p>内存管理关键技术<br> 内存管理性能评估<br> 内存优化<br> 内存分配<br> ION cache pool 、mempool 短时间分配次数多，分配慢，3阶内存使用vmalloc<br> 内存碎片<br> kernel stack ，2阶内存，不可以移动页污染大内存快；可移动页移动耗时；<br> 减少大内存分配次数，专用slab<br> 内存压缩、内存回收<br> 在一步kswapd 和 同步direct_reclaim 时会触发shrink_node 进行匿名、shmem 压缩到zram<br> kswapd 场景更深度的内存压缩，direct_reclaim 更快的回收，多回收文件页，kswap回收匿名也较文件页慢</p> 
<p>文件缓存<br> 在低内存时手机卡顿，trace 上面很多blockio 在wait_on_page_bit_common，这个时候filecache 被回收了，需要重新加载，从而文件‘颠簸’<br> 后台查杀</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">malloc_debug 日志解析</p> 
<p style="margin-left:0cm;">google提供了development/scripts/native_heapdump_viewer.py脚本对kill -47抓起的数据进行解析（由于涉及到addr2line等工具和数据，需要测试机器对应版本的编译结果支持）</p> 
<p style="margin-left:0cm;">18、</p> 
<p style="margin-left:0cm;"><img alt="" height="242" src="https://images2.imgbox.com/90/7f/m8HcLMK2_o.png" width="804"></p> 
<p></p> 
<p style="margin-left:0cm;"><a href="https://developer.qualcomm.com/software/snapdragon-profiler" rel="nofollow" title="Snapdragon Profiler - Qualcomm Developer Network">Snapdragon Profiler - Qualcomm Developer Network</a></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">18、</p> 
<p style="margin-left:0cm;">input 传递</p> 
<p>https://mp.weixin.qq.com/s/8WR6YfnJrQmRWTbY4s0b7Q</p> 
<p>LatencyTracker.cpp</p> 
<p>19、知识库</p> 
<p>https://androidperformance.com/2018/05/07/Android-performance-optimization-skills-and-tools/</p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">19、高通开源代码网站</p> 
<p>有许多厂商的源码库会放在CodeAUrora上 ，例如<a href="https://so.csdn.net/so/search?q=NXP&amp;spm=1001.2101.3001.7020" title="NXP">NXP</a></p> 
<p><a href="https://www.ngui.cc/zz/1760711.html" rel="nofollow" title="高通平台开源代码下载">高通平台开源代码下载</a></p> 
<p></p> 
<p style="margin-left:0cm;"><a href="https://github.com/topics/codeaurora" title="codeaurora · GitHub Topics · GitHub">codeaurora · GitHub Topics · GitHub</a></p> 
<p style="margin-left:0cm;">目前在下面git 上</p> 
<p style="margin-left:0cm;"><a href="https://git.codelinaro.org/explore/" rel="nofollow" title="Explore projects · GitLab">Explore projects · GitLab</a></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">20、linux   torvalds github</p> 
<p style="margin-left:0cm;"><a href="https://github.com/torvalds/linux/tree/master/mm" title="linux/mm at master · torvalds/linux (github.com)">linux/mm at master · torvalds/linux (github.com)</a></p> 
<p style="margin-left:0cm;"><a href="https://github.com/torvalds/linux/blob/master/mm" title="https://github.com/torvalds/linux/blob/master/mm">https://github.com/torvalds/linux/blob/master/mm</a></p> 
<p style="margin-left:0cm;"></p> 
<p>18、android 网址</p> 
<p>https://developer.android.google.cn                          -----各个android 版本介绍</p> 
<p><a href="https://source.android.google.cn/" rel="nofollow" title="Android 开源项目  |  Android Open Source Project">Android 开源项目  |  Android Open Source Project</a></p> 
<p>https://source.android.com                                      ------源码</p> 
<p></p> 
<p>19、</p> 
<p>google 提交case 查看：</p> 
<p><a href="http://code.google.com/p/android/issues/list" rel="nofollow" title="http://code.google.com/p/android/issues/list">http://code.google.com/p/android/issues/list</a></p> 
<p>google patch 提交查看</p> 
<p><a href="https://android-review.googlesource.com" rel="nofollow" title="https://android-review.googlesource.comj">https://android-review.googlesource.comj</a></p> 
<p></p> 
<p>20、</p> 
<p>Android 经典</p> 
<p><a href="https://huanle19891345.github.io/en/android/" rel="nofollow" title="android :: 郑欢的学习总结">android :: 郑欢的学习总结</a></p> 
<p>Linux 经典</p> 
<p><a href="https://xinqiu.gitbooks.io/linux-insides-cn/content/MM/linux-mm-1.html" rel="nofollow" title="内存块 · Linux ­Insides­中文">内存块 · Linux ­Insides­中文</a></p> 
<p></p> 
<p></p> 
<p></p> 
<p>数学函数</p> 
<p><a href="https://www.desmos.com/?lang=zh-CN" rel="nofollow" title="Desmos | 免费领略数学之美">Desmos | 免费领略数学之美</a></p> 
<p></p> 
<p><a href="https://cubic-bezier.com/#.17,.67,.83,.67" rel="nofollow" title="cubic-bezier.com">cubic-bezier.com</a></p> 
<p></p> 
<p><a href="https://github.com/oppo-source/" title="oppo-source · GitHub">oppo-source · GitHub</a><br><br> apple</p> 
<p><a href="https://developer.apple.com/documentation/quartzcore/optimizing_promotion_refresh_rates_for_iphone_13_pro_and_ipad_pro?language=objc" rel="nofollow" title="Optimizing ProMotion refresh rates for iPhone 13 Pro and iPad Pro | Apple Developer Documentation">Optimizing ProMotion refresh rates for iPhone 13 Pro and iPad Pro | Apple Developer Documentation</a></p> 
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI1MzYzMjE0MQ==&amp;mid=2247492063&amp;idx=1&amp;sn=8d14644f904b9c7e4dbef8bc728fa94d&amp;chksm=e9d32a3ddea4a32bda3201caad2a278995361a57f62449104335418a4acfecda67396fb9dc9c&amp;mpshare=1&amp;scene=1&amp;srcid=0312xzfDiRrOZqW7V9sIeo9k&amp;sharer_sharetime=1647057640149&amp;sharer_shareid=cf0b773893cdc7fcb1340c4043ccfdcf#rd" rel="nofollow" title="iOS 高刷屏监控 + 优化：从理论到实践全面解析">iOS 高刷屏监控 + 优化：从理论到实践全面解析</a></p> 
<p></p> 
<p>流程图</p> 
<p><a href="https://www.processon.com/view/link/62ec882ae0b34d1fefde9866" rel="nofollow" title="frameboost3.0函数调用关系| ProcessOn免费在线作图,在线流程图,在线思维导图">frameboost3.0函数调用关系| ProcessOn免费在线作图,在线流程图,在线思维导图</a><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1a687cd9214540b95603076857e85d71/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue2中使用Pinia</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2264b26a595cb5fb30d03fef24b9a4fa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端与后端交互中需要注意的要点和解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
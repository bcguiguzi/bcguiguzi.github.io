<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络地址转换协议——NAT（恐怕是最全的版本） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络地址转换协议——NAT（恐怕是最全的版本）" />
<meta property="og:description" content="前天我说第二天要跟大家讲一下NAT的，结果放假有些懒，所以就放在今天更新，希望大家不要凶我，哈哈哈。
目录
一、什么是NAT
1.NAT简介
2.NAT作用
3.NAT内网地址的范围
4.主要应用方向:
5.NAT的优点：
二、NAT的几种类型
三、NAT类型的对应实验
1.静态NAT
代码
PC机设置 ​
ping测试
​ 2.动态NAT--PAT
代码
PC机设置
ping测试
三.Easyip
代码
PC机设置
ping通测试
四.静态PAT
代码
服务器设置
​​ PC机设置
FTP上传测试
总结：
一、什么是NAT 1.NAT简介 NAT（Network Address Translation，网络地址转换）是1994年提出的。当在专用网内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。
这种方法需要在专用网（私网IP）连接到因特网（公网IP）的路由器上安装NAT软件。装有NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址（公网IP地址）。这样，所有使用本地地址（私网IP地址）的主机在和外界通信时，都要在NAT路由器上将其本地地址转换成全球IP地址，才能和因特网连接。
另外，这种通过使用少量的全球IP地址（公网IP地址）代表较多的私有IP地址的方式，将有助于减缓可用的IP地址空间的枯竭。在RFC 2663中有对NAT的说明。
2.NAT作用 将内部（私有）地址转换成外部（共有）地址
3.NAT内网地址的范围 A:10.0.0.0-10.255.255.255
B:172.16.0.0-172.31.255.255
C:192.168.0.0-192.168.255.255
4.主要应用方向: 1.没有足够的公网P连接到Internet
2.当更换ISP需要重新编址
3.合并两个使用重叠地址空间的内部网络
4.使用单个IP地址支持基本的负载分担
5.NAT的优点： 1.节省了公网IP地址
2.能够处理编址方案重叠的情况
3.网络发生改变时不需要重新编址
4.隐藏了真正的IP地址
二、NAT的几种类型 类型特指静态NAT一个内网地址对一个公网地址动态NAT——PAT多个内网地址对多个公网地址easyip多个内网地址对一个接口静态PAT一对一，但是外网映射内网的服务 三、NAT类型的对应实验 出口路由器上需要配置默认路由
iproute0.0.0.0 0.0.0.0指向运营商对接的路由器IP
1.静态NAT 代码 R1： [001]int g0/0/0//进入接口 [001-GigabitEthernet0/0/0]ip add 192.168.1.1 24//配置ip和子网掩码长度 [001-GigabitEthernet0/0/0]un shu//开启接口 [001-GigabitEthernet0/0/0]int g0/0/1//进入接口 [001-GigabitEthernet0/0/1]ip add 202." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7b3c1e4662fd71cd51f881ba0bd77e31/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-30T17:14:06+08:00" />
<meta property="article:modified_time" content="2021-08-30T17:14:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络地址转换协议——NAT（恐怕是最全的版本）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>前天我说第二天要跟大家讲一下NAT的，结果放假有些懒，所以就放在今天更新，希望大家不要凶我，哈哈哈。</strong></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFNAT-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFNAT" rel="nofollow">一、什么是NAT</a></p> 
<p id="1.NAT%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#1.NAT%E7%AE%80%E4%BB%8B" rel="nofollow">1.NAT简介</a></p> 
<p id="2.NAT%E4%BD%9C%E7%94%A8-toc" style="margin-left:40px;"><a href="#2.NAT%E4%BD%9C%E7%94%A8" rel="nofollow">2.NAT作用</a></p> 
<p id="3.NAT%E5%86%85%E7%BD%91%E5%9C%B0%E5%9D%80%E7%9A%84%E8%8C%83%E5%9B%B4-toc" style="margin-left:40px;"><a href="#3.NAT%E5%86%85%E7%BD%91%E5%9C%B0%E5%9D%80%E7%9A%84%E8%8C%83%E5%9B%B4" rel="nofollow">3.NAT内网地址的范围</a></p> 
<p id="4.%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E6%96%B9%E5%90%91%3A-toc" style="margin-left:40px;"><a href="#4.%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E6%96%B9%E5%90%91%3A" rel="nofollow">4.主要应用方向:</a></p> 
<p id="5.NAT%E7%9A%84%E4%BC%98%E7%82%B9%EF%BC%9A-toc" style="margin-left:40px;"><a href="#5.NAT%E7%9A%84%E4%BC%98%E7%82%B9%EF%BC%9A" rel="nofollow">5.NAT的优点：</a></p> 
<p id="%E4%BA%8C%E3%80%81NAT%E7%9A%84%E5%87%A0%E7%A7%8D%E7%B1%BB%E5%9E%8B-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81NAT%E7%9A%84%E5%87%A0%E7%A7%8D%E7%B1%BB%E5%9E%8B" rel="nofollow">二、NAT的几种类型</a></p> 
<p id="%E4%B8%89%E3%80%81NAT%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E5%BA%94%E5%AE%9E%E9%AA%8C-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81NAT%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E5%BA%94%E5%AE%9E%E9%AA%8C" rel="nofollow">三、NAT类型的对应实验</a></p> 
<p id="1.%E9%9D%99%E6%80%81NAT-toc" style="margin-left:40px;"><a href="#1.%E9%9D%99%E6%80%81NAT" rel="nofollow">1.静态NAT</a></p> 
<p id="%C2%A0%E4%BB%A3%E7%A0%81-toc" style="margin-left:80px;"><a href="#%C2%A0%E4%BB%A3%E7%A0%81" rel="nofollow"> 代码</a></p> 
<p id="PC%E6%9C%BA%E8%AE%BE%E7%BD%AE%C2%A0%E2%80%8B-toc" style="margin-left:80px;"><a href="#PC%E6%9C%BA%E8%AE%BE%E7%BD%AE%C2%A0%E2%80%8B" rel="nofollow">PC机设置 ​</a></p> 
<p id="ping%E6%B5%8B%E8%AF%95-toc" style="margin-left:80px;"><a href="#ping%E6%B5%8B%E8%AF%95" rel="nofollow">ping测试</a></p> 
<p id="%E2%80%8B%C2%A02.%E5%8A%A8%E6%80%81NAT--PAT-toc" style="margin-left:40px;"><a href="#%E2%80%8B%C2%A02.%E5%8A%A8%E6%80%81NAT--PAT" rel="nofollow">​ 2.动态NAT--PAT</a></p> 
<p id="%E4%BB%A3%E7%A0%81-toc" style="margin-left:80px;"><a href="#%E4%BB%A3%E7%A0%81" rel="nofollow">代码</a></p> 
<p id="PC%E6%9C%BA%E8%AE%BE%E7%BD%AE-toc" style="margin-left:80px;"><a href="#PC%E6%9C%BA%E8%AE%BE%E7%BD%AE" rel="nofollow">PC机设置</a></p> 
<p id="%C2%A0ping%E6%B5%8B%E8%AF%95-toc" style="margin-left:80px;"><a href="#%C2%A0ping%E6%B5%8B%E8%AF%95" rel="nofollow"> ping测试</a></p> 
<p id="%C2%A0%E4%B8%89.Easyip-toc" style="margin-left:40px;"><a href="#%C2%A0%E4%B8%89.Easyip" rel="nofollow"> 三.Easyip</a></p> 
<p style="margin-left:80px;"><a href="#%C2%A0%E4%BB%A3%E7%A0%81" rel="nofollow"> 代码</a></p> 
<p style="margin-left:80px;"><a href="#PC%E6%9C%BA%E8%AE%BE%E7%BD%AE" rel="nofollow">PC机设置</a></p> 
<p id="%C2%A0ping%E9%80%9A%E6%B5%8B%E8%AF%95-toc" style="margin-left:80px;"><a href="#%C2%A0ping%E9%80%9A%E6%B5%8B%E8%AF%95" rel="nofollow"> ping通测试</a></p> 
<p id="%C2%A0%E5%9B%9B.%E9%9D%99%E6%80%81PAT-toc" style="margin-left:40px;"><a href="#%C2%A0%E5%9B%9B.%E9%9D%99%E6%80%81PAT" rel="nofollow"> 四.静态PAT</a></p> 
<p style="margin-left:80px;"><a href="#%E4%BB%A3%E7%A0%81" rel="nofollow">代码</a></p> 
<p id="%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE" rel="nofollow">服务器设置</a></p> 
<p id="%E2%80%8B%E2%80%8B%C2%A0PC%E6%9C%BA%E8%AE%BE%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E2%80%8B%C2%A0PC%E6%9C%BA%E8%AE%BE%E7%BD%AE" rel="nofollow">​​ PC机设置</a></p> 
<p id="%C2%A0FTP%E4%B8%8A%E4%BC%A0%E6%B5%8B%E8%AF%95-toc" style="margin-left:80px;"><a href="#%C2%A0FTP%E4%B8%8A%E4%BC%A0%E6%B5%8B%E8%AF%95" rel="nofollow"> FTP上传测试</a></p> 
<p id="%E6%80%BB%E7%BB%93%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93%EF%BC%9A" rel="nofollow">总结：</a></p> 
<hr id="hr-toc"> 
<h2 id="%E4%B8%80%E3%80%81%E4%BB%80%E4%B9%88%E6%98%AFNAT">一、什么是NAT</h2> 
<h3 id="1.NAT%E7%AE%80%E4%BB%8B">1.NAT简介</h3> 
<blockquote> 
 <p>NAT<span style="color:#ff9900;"><strong>（Network Address Translation，网络地址转换）</strong></span>是1994年提出的。<span style="color:#0d0016;">当在</span><a href="https://baike.baidu.com/item/%E4%B8%93%E7%94%A8%E7%BD%91/1006818" rel="nofollow"><span style="color:#0d0016;">专用网</span></a><span style="color:#0d0016;">内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。</span></p> 
 <p><span style="color:#0d0016;">这种方法需要在专用网（私网IP）连接到因特网（公网IP）的路由器上安装NAT软件。装有NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址（公网IP地址）。这样，所有使用本地地址（私网IP地址）的主机在和外界通信时，都要在NAT路由器上将其本地地址转换成全球IP地址，才能和因特网连接。</span></p> 
 <p><span style="color:#0d0016;">另外，这种通过使用少量的全球IP地址（公网IP地址）代表较多的私有IP地址的方式，将有助于减缓可用的IP地址空间的枯竭。在</span><a href="https://baike.baidu.com/item/RFC/10718878" rel="nofollow"><span style="color:#0d0016;">RFC</span></a><span style="color:#0d0016;"> 2663中有对NAT的说明。</span></p> 
</blockquote> 
<h3 id="2.NAT%E4%BD%9C%E7%94%A8">2.NAT作用</h3> 
<p>将<strong><span style="color:#ff9900;">内部（私有）地址</span></strong>转换成<strong><span style="color:#ff9900;">外部（共有）地址</span></strong></p> 
<h3 id="3.NAT%E5%86%85%E7%BD%91%E5%9C%B0%E5%9D%80%E7%9A%84%E8%8C%83%E5%9B%B4">3.NAT内网地址的范围</h3> 
<p>A:10.0.0.0-10.255.255.255<br> B:172.16.0.0-172.31.255.255<br> C:192.168.0.0-192.168.255.255</p> 
<h3 id="4.%E4%B8%BB%E8%A6%81%E5%BA%94%E7%94%A8%E6%96%B9%E5%90%91%3A">4.主要应用方向:</h3> 
<p>1.没有足够的公网P连接到Internet<br> 2.当更换ISP需要重新编址<br> 3.合并两个使用重叠地址空间的内部网络<br> 4.使用单个IP地址支持基本的负载分担</p> 
<h3 id="5.NAT%E7%9A%84%E4%BC%98%E7%82%B9%EF%BC%9A">5.NAT的优点：</h3> 
<p>1.节省了公网IP地址<br> 2.能够处理编址方案重叠的情况<br> 3.网络发生改变时不需要重新编址<br> 4.隐藏了真正的IP地址</p> 
<h2 id="%E4%BA%8C%E3%80%81NAT%E7%9A%84%E5%87%A0%E7%A7%8D%E7%B1%BB%E5%9E%8B">二、NAT的几种类型</h2> 
<table border="1" cellpadding="1" cellspacing="1" style="width:600px;"><tbody><tr><td>类型</td><td>特指</td></tr><tr><td>静态NAT</td><td>一个内网地址对一个公网地址</td></tr><tr><td>动态NAT——PAT</td><td>多个内网地址对多个公网地址</td></tr><tr><td>easyip</td><td>多个内网地址对一个接口</td></tr><tr><td>静态PAT</td><td>一对一，但是外网映射内网的服务</td></tr></tbody></table> 
<h2 id="%E4%B8%89%E3%80%81NAT%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%B9%E5%BA%94%E5%AE%9E%E9%AA%8C">三、NAT类型的对应实验</h2> 
<p><span style="color:#fe2c24;"><strong>出口路由器上需要配置默认路由<br> iproute0.0.0.0 0.0.0.0指向运营商对接的路由器IP</strong></span></p> 
<h3 id="1.%E9%9D%99%E6%80%81NAT">1.静态NAT</h3> 
<p><img alt="" src="https://images2.imgbox.com/a6/88/ElUt1B36_o.png"></p> 
<h4 id="%C2%A0%E4%BB%A3%E7%A0%81"> 代码</h4> 
<pre><code>R1：
[001]int g0/0/0//进入接口
[001-GigabitEthernet0/0/0]ip add 192.168.1.1 24//配置ip和子网掩码长度
[001-GigabitEthernet0/0/0]un shu//开启接口
[001-GigabitEthernet0/0/0]int g0/0/1//进入接口
[001-GigabitEthernet0/0/1]ip add 202.10.100.1 24//配置ip和子网掩码长度
[001-GigabitEthernet0/0/1]un shu//开启接口
[001-GigabitEthernet0/0/1]q	
[001]ip route-static 0.0.0.0 0 202.10.100.2//配置默认路由，下一跳入接口 202.10.100.2
[001]int g0/0/1	//进入接口
[001-GigabitEthernet0/0/1]nat static global 15.0.0.10 inside 192.168.1.10 netmask 255.255.255.255 //添加PC1到15.0.0.10的IP映射
ISP服务商：
[ISP]int g0/0/0//进入接口
[ISP-GigabitEthernet0/0/0]ip add 202.10.100.2 24//配置ip和子网掩码长度
[ISP-GigabitEthernet0/0/0]un shu//开启接口
[ISP-GigabitEthernet0/0/0]q
[ISP]ip route-static 15.0.0.10 32 202.10.100.1//配置默认路由，下一跳入接口 202.10.100.1</code></pre> 
<blockquote> 
 <p><span style="color:#0d0016;"><strong>重点部分</strong></span></p> 
 <p>进入出接口nat static global出口公网IP地址(此地址必须不是外网口IP，是另外的租用的公网地址)inside 私网的某台PC的IP地址     netmask 255.255.255. 255</p> 
 <p>查看静态NAT映射情况<br> display nat static<br> ISP段：<br> []ip route-static 15.0.0.10 32 202.10.100.1//ISP回执一条路由指向公司出口网关IP</p> 
</blockquote> 
<h4 id="PC%E6%9C%BA%E8%AE%BE%E7%BD%AE%C2%A0%E2%80%8B">PC机设置 <img alt="" src="https://images2.imgbox.com/a0/5b/hDdqlGkN_o.png"></h4> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/df/af/pLM3YM1R_o.png"></p> 
<h4 id="ping%E6%B5%8B%E8%AF%95">ping测试</h4> 
<p>pc1可以通，pc2是不通的。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/16/45/iN3GUPnH_o.png"> </p> 
<h3 id="%E2%80%8B%C2%A02.%E5%8A%A8%E6%80%81NAT--PAT"><img alt="" src="https://images2.imgbox.com/67/72/m1AMmV1t_o.png"> 2.动态NAT--PAT</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/51/20/M83FKtDq_o.png"></p> 
<h4 id="%E4%BB%A3%E7%A0%81">代码</h4> 
<pre><code>R1：
[001]int g0/0/0//进入接口
[001-GigabitEthernet0/0/0]ip add 192.168.1.1 24//配置ip和子网掩码长度
[001-GigabitEthernet0/0/0]un shu//开启接口
[001-GigabitEthernet0/0/0]int g0/0/1//进入接口
[001-GigabitEthernet0/0/1]ip add 202.10.100.1 24//配置ip和子网掩码长度
[001-GigabitEthernet0/0/1]un shu//开启接口
[001-GigabitEthernet0/0/1]q	
[001]ip route-static 0.0.0.0 0 202.10.100.2//配置默认路由，下一跳入接口 202.10.100.2
[001]nat address-group 1 15.0.0.10 15.0.0.11//配置NAT外网地址池
[001]acl 2000//创建标准访问控制列表2000
[001-acl-basic-2000]rule permit source 192.168.1.0 0.0.0.255//配置ACL抓取内网地址段
[001]int g0/0/1//进入接口
[001-GigabitEthernet0/0/1]nat outbound 2000 address-group 1//在外网口调用acl2000
[001]dis nat outbound//查询出接口信息
 NAT Outbound Information:
 --------------------------------------------------------------------------
 Interface                     Acl     Address-group/IP/Interface      Type
 --------------------------------------------------------------------------
 GigabitEthernet0/0/1         2000                              1       pat
 --------------------------------------------------------------------------
  Total : 1

ISP服务商：
[ISP]int g0/0/0//进入接口
[ISP-GigabitEthernet0/0/0]ip add 202.10.100.2 24//配置ip和子网掩码长度
[ISP-GigabitEthernet0/0/0]un shu//开启接口
[ISP-GigabitEthernet0/0/0]q
[ISP]ip route-static 15.0.0.0 24 202.10.100.1//配置默认路由，下一跳入接口 202.10.100.1</code></pre> 
<blockquote> 
 <p><span style="color:#0d0016;"><strong>重点部分</strong></span></p> 
 <p>1.配置NAT地址池<br> 全局下打nat address-group 1 15.0.0. 10 15.0.0. 11</p> 
 <p>2.配置ACL抓取内网地址段<br> acl 2000<br> rule permit source 192.168.10.0 0.0.0.255</p> 
 <p>3.外网口上调用<br> 接口下打nat outbound 2000 address-group 1 (不加no-pat表示地址可重复使用，建议不加)<br> ISP[]ip route-static 15.0.0.0 32 202.10.100.1<br> [] display  nat outbound </p> 
</blockquote> 
<h4 id="PC%E6%9C%BA%E8%AE%BE%E7%BD%AE">PC机设置</h4> 
<p><img alt="" src="https://images2.imgbox.com/2e/6d/2Kvkd3LM_o.png"></p> 
<p> <img alt="" src="https://images2.imgbox.com/1f/61/BzzNscON_o.png"></p> 
<h4 id="%C2%A0ping%E6%B5%8B%E8%AF%95"> ping测试</h4> 
<p>两个都能测试成功</p> 
<p><img alt="" src="https://images2.imgbox.com/c2/30/7ntkzR8h_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/57/18/IkOCGRYk_o.png"></p> 
<h3 id="%C2%A0%E4%B8%89.Easyip"> 三.Easyip</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/45/a5/Lek4ITCs_o.png"></p> 
<h4> 代码</h4> 
<pre><code>R1：
[R1]int g0/0/0 //进入接口g0/0/0  //进入接口g0/0/0
[R1-GigabitEthernet0/0/0]undo shut  //开启物理接口
[R1-GigabitEthernet0/0/0]ip add 192.168.1.1 24 //配置IP地址及子网掩码长度
[R1-GigabitEthernet0/0/0]int g0/0/1 //进入接口g0/0/1
[R1-GigabitEthernet0/0/1]undo shut  //开启物理接口
[R1-GigabitEthernet0/0/1]ip add 202.10.100.1 24 //配置IP地址及子网掩码长度
[R1]acl 2000 //创建标准访问控制列表2000 	 
[R1-acl-basic-2000]rule permit source 192.168.1.0 0.0.0.255 //配置ACL抓取内网地址段
[R1-acl-basic-2000]int g0/0/1  //进入接口g0/0/1	
[R1-GigabitEthernet0/0/1]nat outbound 2000 //在外网口打下此命令
[R1-GigabitEthernet0/0/1]display nat outbound//查看是否成功
ISP：
[ISP]int g0/0/0 //进入接口g0/0/0 
[ISP-GigabitEthernet0/0/0]undo shut  //开启物理接口
[ISP-GigabitEthernet0/0/0]ip add 202.10.100.2 24 //配置IP地址及子网掩码长度
</code></pre> 
<blockquote> 
 <p><strong>重点内容：</strong></p> 
 <p>进入外网口<br> 接口下打nat outbound_ 2000 (接口下调用ACL列表，列表是之前定义的内网地址段)</p> 
 <p>查询出接口信息<br> [] display  nat outbound <br> ISP[]ip route-static 15.0.0.0 32 202.10.100.1</p> 
</blockquote> 
<h4>PC机设置</h4> 
<p><img alt="" src="https://images2.imgbox.com/89/98/zAhLyTGz_o.png"></p> 
<p> <img alt="" src="https://images2.imgbox.com/cd/24/VIQNQi3J_o.png"></p> 
<p> </p> 
<h4 id="%C2%A0ping%E9%80%9A%E6%B5%8B%E8%AF%95"> ping通测试</h4> 
<p>都可以进行ping通</p> 
<p><img alt="" src="https://images2.imgbox.com/2d/4d/U9MQOhlM_o.png"></p> 
<p> <img alt="" src="https://images2.imgbox.com/57/2d/DXgQgiej_o.png"></p> 
<h3 id="%C2%A0%E5%9B%9B.%E9%9D%99%E6%80%81PAT"> 四.静态PAT</h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f4/fb/DY4j034n_o.png"></p> 
<h4>代码</h4> 
<pre><code>
R1:
[R1]int g0/0/0 //进入接口g0/0/0
[R1-GigabitEthernet0/0/0]undo shut  //开启物理接口
[R1-GigabitEthernet0/0/0]ip add 192.168.1.1 24 //配置IP地址及子网掩码长度
[R1-GigabitEthernet0/0/0]int g0/0/1 //进入接口g0/0/1
[R1-GigabitEthernet0/0/1]undo shut  //开启物理接口
[R1-GigabitEthernet0/0/1]ip add 202.10.100.1 24  //配置IP地址及子网掩码长度
[R1-GigabitEthernet0/0/1]nat server protocol tcp global 15.0.0.10 21 inside 192.168.1.10 21
//在外网接口下打nat server 协议为tcp，global 自己设定公网地址 ftp/21 inside 目的IP地址192.168.1.10 ftp/21
[R1]ip route-static 0.0.0.0 0 202.10.100.2 //配置默认路由，下一跳入接口 202.10.10.2
[R1]display nat server //查看地址映射是否成功
ISP运营商：
[ISP]int g0/0/0 //进入接口g0/0/0
[ISP-GigabitEthernet0/0/0]undo shut //开启物理接口
[ISP-GigabitEthernet0/0/0]ip add 202.10.100.2 24  //配置IP地址及子网掩码长度
[ISP]ip route-static 15.0.0.10 32 202.10.100.1 //配置静态路由，目的网段15.0.0.10，掩码长度32，下一跳入接口202.10.100.1
//[ISP]nat alg ftp enable//开启ftp服务器功能

</code></pre> 
<blockquote> 
 <p></p> 
 <p></p> 
 <p><strong>重点内容：</strong></p> 
 <p>进入外网口<br> 接口下打nat server protocol tcp global 15. 0.0.10 23/telnet inside 192. 168. 10. 100 23/telnet，<br> [] display  nat server <br> 注: FTP服务默认数据端口没有开启，需要手工去开<br> 全局下打nat alg ftp enable(开启FTP服务)<br> nat alg dns enable (DNS服务 也需要开)<br> nat alg all enable(所有服务开)</p> 
</blockquote> 
<h4 id="%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BE%E7%BD%AE">服务器设置</h4> 
<h4 id="%E2%80%8B%E2%80%8B%C2%A0PC%E6%9C%BA%E8%AE%BE%E7%BD%AE"><img alt="" src="https://images2.imgbox.com/0d/96/sKoaCDY4_o.png"><img alt="" src="https://images2.imgbox.com/34/c9/JWhSevON_o.png"> PC机设置</h4> 
<p><img alt="" src="https://images2.imgbox.com/77/04/oGX6hT5n_o.png"></p> 
<h4 id="%C2%A0FTP%E4%B8%8A%E4%BC%A0%E6%B5%8B%E8%AF%95"> FTP上传测试</h4> 
<p>代码</p> 
<blockquote> 
 <p><strong>主要内容：</strong></p> 
 <p>&lt;ISP&gt;ftp 15.0.0.10 //访问ftp服务器<br> [ISP-ftp]ls //列出文件夹<br> [ISP-ftp]get test.txt //下载文件</p> 
</blockquote> 
<pre><code>&lt;ISP&gt;ftp 15.0.0.10  //进行ftp链接登录
Trying 15.0.0.10 ...

Press CTRL+K to abort
Connected to 15.0.0.10.
220 FtpServerTry FtpD for free 
User(15.0.0.10:(none)):
331 Password required for  .
Enter password:
230 User  logged in , proceed

[ISP-ftp]ls//查询ftp服务器的内容
200 Port command okay.
150 Opening ASCII NO-PRINT mode data connection for ls -l.
2021-08-30_132751.png
2021-08-30_133011.png
2021-08-30_133021.png
2021-08-30_133031.png
2021-08-30_133040.png
sea.txt
代码.txt
226 Transfer finished successfully. Data connection closed.
FTP: 134 byte(s) received in 0.050 second(s) 2.68Kbyte(s)/sec.

[ISP-ftp]get sea.txt//下载指定的内容
200 Port command okay.
150 Sending sea.txt (10 bytes). Mode STREAM Type BINARY
226 Transfer finished successfully. Data connection closed.
FTP: 10 byte(s) received in 0.170 second(s) 58.82byte(s)/sec.

[ISP-ftp]put sea.txt//打开指定的文件
200 Port command okay.
150 Opening BINARY data connection for sea.txt

 100%     
226 Transfer finished successfully. Data connection closed.
FTP: 10 byte(s) sent in 0.290 second(s) 34.48byte(s)/sec.

[ISP-ftp]</code></pre> 
<h2 id="%E6%80%BB%E7%BB%93%EF%BC%9A">总结：</h2> 
<p>本次内容有些多，但是不难理解，主要还是动态nat和最后的静态pat的比较重要。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7712875e5a23ec29955076cdeb7dc4ff/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ArcMap出图小技巧分享（附练习数据）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/38450a1ce82eeda64b449b620ba8fa32/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【正点原子Linux连载】第四十章 字符设备驱动开发 -摘自【正点原子】I.MX6U嵌入式Linux驱动开发指南V1.0</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>同时输出多个方法的Top-K节点（Python） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="同时输出多个方法的Top-K节点（Python）" />
<meta property="og:description" content="注意：
该方法输出的为Top-K节点的索引（index），即若节点Id为1~n，则对应输出索引为0~n-1。
读者需要根据自己的实际应用进行调整或修改！
输入：“多方法排序.csv”文件对应的Dataframe
文件类型如下图
IdLRPRS1S2S310.6270.0076690.54050.60140.56120.6270.0076690.63120.65740.646230.6270.0076690.48010.55830.501740.72170.0098640.50010.59370.516850.68250.0089340.44610.52130.447960.72170.0098640.53380.6270.555570.72170.0098640.50010.59370.5168 输出：各个方法按照方法/指标值从大到小排序，选择前k的节点的索引构成Dataframe
代码 # 获得所需的top-k节点 def getTopK(methods, k): print(&#39;Top-&#39; &#43; str(k) &#43; &#39;节点生成中...&#39;) methods_name = np.array(methods.columns)[1: len(methods.columns)] print(&#39;文件中共有以下 &#39; &#43; str(len(methods_name)) &#43; &#39; 种方法&#39;) print(methods_name) df = pd.DataFrame(columns=methods_name) # 存储各个方法的top-k节点 # 循环每一个方法 for i in range(len(methods_name)): method = methods.iloc[:, i &#43; 1] # 方法列 top_K = method.argsort()[::-1][0:k] # top-k,此处为索引号，与Id号差1 df[methods_name[i]] = top_K # 存储到dataframe return df 测试 from SIRTool import getTopK # 引入该方法 if __name__ == &#39;__main__&#39;: methods = pd." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/ca476c71777c0865fc463f4e792b4e94/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-14T15:56:30+08:00" />
<meta property="article:modified_time" content="2021-07-14T15:56:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">同时输出多个方法的Top-K节点（Python）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>注意：</p> 
<p><span style="color:#fe2c24;"><strong>该方法输出的为Top-K节点的索引（index），即若节点Id为1~n，则对应输出索引为0~n-1。</strong></span></p> 
<p><span style="color:#fe2c24;"><strong>读者需要根据自己的实际应用进行调整或修改！</strong></span></p> 
<p><strong>输入</strong>：“多方法排序.csv”文件对应的Dataframe</p> 
<p>文件类型如下图</p> 
<table cellspacing="0" style="width:324pt;"><tbody><tr><td style="vertical-align:middle;width:54pt;"><span style="color:#000000;">Id</span></td><td style="vertical-align:middle;width:54pt;"><span style="color:#000000;">LR</span></td><td style="vertical-align:middle;width:54pt;"><span style="color:#000000;">PR</span></td><td style="vertical-align:middle;width:54pt;"><span style="color:#000000;">S1</span></td><td style="vertical-align:middle;width:54pt;"><span style="color:#000000;">S2</span></td><td style="vertical-align:middle;width:54pt;"><span style="color:#000000;">S3</span></td></tr><tr><td style="vertical-align:middle;"><span style="color:#000000;">1</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.627</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.007669</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5405</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.6014</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.561</span></td></tr><tr><td style="vertical-align:middle;"><span style="color:#000000;">2</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.627</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.007669</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.6312</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.6574</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.6462</span></td></tr><tr><td style="vertical-align:middle;"><span style="color:#000000;">3</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.627</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.007669</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.4801</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5583</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5017</span></td></tr><tr><td style="vertical-align:middle;"><span style="color:#000000;">4</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.7217</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.009864</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5001</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5937</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5168</span></td></tr><tr><td style="vertical-align:middle;"><span style="color:#000000;">5</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.6825</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.008934</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.4461</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5213</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.4479</span></td></tr><tr><td style="vertical-align:middle;"><span style="color:#000000;">6</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.7217</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.009864</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5338</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.627</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5555</span></td></tr><tr><td style="vertical-align:middle;"><span style="color:#000000;">7</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.7217</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.009864</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5001</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5937</span></td><td style="vertical-align:middle;"><span style="color:#000000;">0.5168</span></td></tr></tbody></table> 
<p><strong> 输出</strong>：各个方法按照方法/指标值从大到小排序，选择前k的节点的索引构成Dataframe</p> 
<h4>代码</h4> 
<pre><code># 获得所需的top-k节点
def getTopK(methods, k):
    print('Top-' + str(k) + '节点生成中...')
    methods_name = np.array(methods.columns)[1: len(methods.columns)]
    print('文件中共有以下 ' + str(len(methods_name)) + ' 种方法')
    print(methods_name)
    df = pd.DataFrame(columns=methods_name)  # 存储各个方法的top-k节点
    # 循环每一个方法
    for i in range(len(methods_name)):
        method = methods.iloc[:, i + 1]  # 方法列
        top_K = method.argsort()[::-1][0:k]  # top-k,此处为索引号，与Id号差1
        df[methods_name[i]] = top_K  # 存储到dataframe
    return df</code></pre> 
<h4>测试</h4> 
<pre><code>from SIRTool import getTopK  # 引入该方法

if __name__ == '__main__':
    methods = pd.read_csv('多方法排序.csv')  # 多种方法的排序结果
    k = 5    # 取排名前5的节点
    df = getTopK(methods, k)  # 多种方法的Top-k结果
    print(df)
    df.to_csv('Top-' + str(k) + ' nodes.csv', index=False)
    print('Top-' + str(k) + '节点已存储至本地！\n')</code></pre> 
<p>输出结果： </p> 
<p>Top-5节点生成中...<br> 文件中共有以下 5 种方法<br> ['LR' 'PR' 'S1' 'S2' 'S3']<br>     LR  PR  S1  S2  S3<br> 51  25  39  25  25  25<br> 50  39  25  39  39  39<br> 49  41  41  41  41  41<br> 48  20  20  42  20  20<br> 47  42  42  20  42  42<br> Top-5节点已存储至本地！</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a9d4cc97da26a5e8056c7fbe730080e4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于已知点云地图的NDT的激光SLAM定位</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6b62bf7c2558752afd8cf0fbf90e0259/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机试题上网部分怎么做,考试经验之谈：计算机一级考试上网题怎么操作？...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
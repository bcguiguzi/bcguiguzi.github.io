<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>五、Vue：使用axios库进行get和post、用拦截器对请求和响应进行预处理、Mock（数据模拟） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="五、Vue：使用axios库进行get和post、用拦截器对请求和响应进行预处理、Mock（数据模拟）" />
<meta property="og:description" content="一、axios 【应用】进行请求和传表单
【axios中文档】：https://www.kancloud.cn/yunye/axios/234845
【vue-axios】：https://cn.vuejs.org/v2/cookbook/using-axios-to-consume-apis.html
【参考】：https://blog.csdn.net/u010132177/article/details/103116767
1.1 安装axios 进入项目目录，运行cmd，运行如下代码：
npm install --save axios 运行项目：
npm run dev 1.2 挂载axios到$axios写法（get） 第一步 src/main.js 【1】引入axios为 Axios
【2】挂载Axios到 $axios (使用其内部函数时：this.$Axios即可)
// The Vue build version to load with the `import` command // (runtime-only or standalone) has been set in webpack.base.conf with an alias. import Vue from &#39;vue&#39; import App from &#39;./App&#39; import Axios from &#34;axios&#34; //【1】引入axios Vue.prototype.$axios = Axios //【2】挂载Axios到 $axios (使用其内部函数时：this.$Axios即可) Vue.config.productionTip = false /* eslint-disable no-new */ new Vue({ el: &#39;#app&#39;, //[1]:在index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/b0960cacc2c9c3ef315cb6484ef70fbc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-23T15:48:34+08:00" />
<meta property="article:modified_time" content="2019-12-23T15:48:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">五、Vue：使用axios库进行get和post、用拦截器对请求和响应进行预处理、Mock（数据模拟）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="axios_0"></a>一、axios</h2> 
<p>【应用】进行请求和传表单<br> 【axios中文档】：https://www.kancloud.cn/yunye/axios/234845<br> 【vue-axios】：https://cn.vuejs.org/v2/cookbook/using-axios-to-consume-apis.html<br> 【参考】：https://blog.csdn.net/u010132177/article/details/103116767</p> 
<h3><a id="11_axios_5"></a>1.1 安装axios</h3> 
<p>进入项目目录，运行cmd，运行如下代码：</p> 
<pre><code>npm install --save axios
</code></pre> 
<p>运行项目：</p> 
<pre><code>npm run dev
</code></pre> 
<h3><a id="12_axiosaxiosget_14"></a>1.2 挂载axios到$axios写法（get）</h3> 
<h4><a id="_srcmainjs_15"></a>第一步 src/main.js</h4> 
<p>【1】引入axios为 Axios<br> 【2】挂载Axios到 <code>$axios (使用其内部函数时：this.$Axios即可)</code></p> 
<pre><code class="prism language-javascript"><span class="token comment">// The Vue build version to load with the `import` command</span>
<span class="token comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">"axios"</span> <span class="token comment">//【1】引入axios</span>

Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$axios <span class="token operator">=</span> Axios <span class="token comment">//【2】挂载Axios到 $axios (使用其内部函数时：this.$Axios即可)</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment">/* eslint-disable no-new */</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span> <span class="token comment">//[1]:在index.html里id为#app标签里写入组件内容</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> App <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//[2]:写入的组件</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;App/&gt;'</span> <span class="token comment">//[3]:写入的模板名(也可看成一个完整组件)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> 
<h4><a id="_parentvue_36"></a>第二步 parent.vue</h4> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"parent"</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 【<span class="token number">2</span>】把获取到的数据循环展现出来 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"v in list"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>v<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>hr<span class="token operator">/</span><span class="token operator">&gt;</span>【显示获取到的请求】<span class="token operator">&lt;</span>hr<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>list<span class="token punctuation">}</span><span class="token punctuation">}</span>

  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token comment">//import axios from 'axios' //首先导入安装好的axios</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{<!-- --></span>
    name<span class="token punctuation">:</span><span class="token string">'parent'</span><span class="token punctuation">,</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
        list<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//定义一个空数组用于存放接收到的数据</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//【1】生命周期函数，组件安装好后调用此函数</span>
    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> api<span class="token operator">=</span><span class="token string">"http://www.phonegap100.com/appapi.php?a=getPortalList&amp;catid=20"</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$axios  <span class="token comment">//对应main.js里挂载写法</span>
      <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token operator">=</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    filters<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    directives<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> 
<p>效果：<br> 【国内首家】微信小程序视频教程免费下载<br> ionic域资源共享 CORS 详解<br> 移动端触摸滑动js插件_html5手机端轮播插件<br> 未来程序员会被机器人取代吗？<br> 锤子安全锤_锤子真的出了个“锤子”：车充＋安全锤<br> html5能做什么_html5能做哪些开发？<br> 平安口袋银行App采用-Cordova混合开发<br> JavaScript Emoji 表情库_js 类似于qq微信的表情库<br> cordova热更新插件-不发布应用市场动态更新APP源码<br> 央行新规！支付宝、微信用户别忘做这件事<br> HTML5 移动app开发框架该如何选择<br> 纯CSS3动画按钮效果,可用于移动wap app开发<br> 京东每天亏上亿_不会抄袭、剽窃?必将死在互联网下一站的起点上! …<br> ionic react-native和native开发移动app那个好<br> 这12行代码分分钟让你电脑崩溃手机重启<br> 罗振宇罗永浩雷军们的演讲 你喜欢哪一个<br> ionic-native-transitions让你的Ionic应用比原生还快<br> ionic 1.2.4 发布，最好的html5移动app开发框架<br> phonegap发布应用到appstore<br> HTML5仿苹果应用的动画<br> 【显示获取到的请求】<br> [ { “aid”: “499”, “catid”: “20”, “username”: “admin”, “title”: “【国内首家】微信小程序视频教程免费下载”, “pic”: “portal/201610/13/211832yvlbybpl3rologrr.jpg”, “dateline”: “1476364740” }, { “aid”: “498”, “catid”: “20”, “username”: “admin”, “title”: “ionic域资源共享 CORS 详解”, “pic”: “”, “dateline”: “1472952906” }, { “aid”: “497”, “catid”: “20”, “username”: “admin”, “title”: “移动端触摸滑动js插件_html5手机端轮播插件”, “pic”: “portal/201606/28/211604ullzo5arr4iurnum.jpg”, “dateline”: “1467119820” }, { “aid”: “496”, “catid”: “20”, “username”: “admin”, “title”: “未来程序员会被机器人取代吗？”, “pic”: “portal/201606/02/221818eafffffm4srfdf4s.jpg”, “dateline”: “1464874140” }, { “aid”: “495”, “catid”: “20”, “username”: “admin”, “title”: “锤子安全锤_锤子真的出了个“锤子”：车充＋安全锤”, “pic”: “portal/201605/20/213752f6i56f1e0hbfzhkb.jpg”, “dateline”: “1463751505” }, { “aid”: “494”, “catid”: “20”, “username”: “admin”, “title”: “html5能做什么_html5能做哪些开发？”, “pic”: “”, “dateline”: “1463664540” }, { “aid”: “493”, “catid”: “20”, “username”: “admin”, “title”: “平安口袋银行App采用-Cordova混合开发”, “pic”: “”, “dateline”: “1463294580” }, { “aid”: “492”, “catid”: “20”, “username”: “admin”, “title”: “JavaScript Emoji 表情库_js 类似于qq微信的表情库”, “pic”: “portal/201604/25/084907r2e3im3dvd1q3f7z.jpg”, “dateline”: “1461545392” }, { “aid”: “491”, “catid”: “20”, “username”: “admin”, “title”: “cordova热更新插件-不发布应用市场动态更新APP源码”, “pic”: “portal/201604/12/152638zaxz5xz3t58bfts2.png”, “dateline”: “1460446140” }, { “aid”: “490”, “catid”: “20”, “username”: “admin”, “title”: “央行新规！支付宝、微信用户别忘做这件事”, “pic”: “portal/201603/29/144942tcnnenueefagukfk.jpg”, “dateline”: “1459234206” }, { “aid”: “471”, “catid”: “20”, “username”: “admin”, “title”: “HTML5 移动app开发框架该如何选择”, “pic”: “portal/201511/15/163112q4kz6k2rgcgpi1tc.jpg”, “dateline”: “1457771160” }, { “aid”: “488”, “catid”: “20”, “username”: “admin”, “title”: “纯CSS3动画按钮效果,可用于移动wap app开发”, “pic”: “portal/201603/09/202742r1kngyt17na7n1nk.jpg”, “dateline”: “1457526780” }, { “aid”: “487”, “catid”: “20”, “username”: “admin”, “title”: “京东每天亏上亿_不会抄袭、剽窃?必将死在互联网下一站的起点上! …”, “pic”: “portal/201603/02/155825h28zxs2vsxjccv4c.jpg”, “dateline”: “1456905746” }, { “aid”: “486”, “catid”: “20”, “username”: “admin”, “title”: “ionic react-native和native开发移动app那个好”, “pic”: “portal/201602/25/193433dtzfvlzl1oavhljy.jpg”, “dateline”: “1456398960” }, { “aid”: “484”, “catid”: “20”, “username”: “admin”, “title”: “这12行代码分分钟让你电脑崩溃手机重启”, “pic”: “”, “dateline”: “1453426595” }, { “aid”: “483”, “catid”: “20”, “username”: “admin”, “title”: “罗振宇罗永浩雷军们的演讲 你喜欢哪一个”, “pic”: “”, “dateline”: “1452226800” }, { “aid”: “482”, “catid”: “20”, “username”: “admin”, “title”: “ionic-native-transitions让你的Ionic应用比原生还快”, “pic”: “portal/201601/07/135529z4r7gwglv4rw8l74.jpeg”, “dateline”: “1452145500” }, { “aid”: “481”, “catid”: “20”, “username”: “admin”, “title”: “ionic 1.2.4 发布，最好的html5移动app开发框架”, “pic”: “portal/201601/05/132107h9bllr7li74zoh49.jpg”, “dateline”: “1451971293” }, { “aid”: “480”, “catid”: “20”, “username”: “admin”, “title”: “phonegap发布应用到appstore”, “pic”: “portal/201601/05/122115yhh22i77sqn2ijc6.jpg”, “dateline”: “1451967910” }, { “aid”: “479”, “catid”: “20”, “username”: “admin”, “title”: “HTML5仿苹果应用的动画”, “pic”: “portal/201601/04/220252ycyddectvivr55pq.png”, “dateline”: “1451916189” } ]</p> 
<h3><a id="13axiosget_110"></a>1.3直接导入到组件axios写法（get）</h3> 
<p>把main.js里的注释掉</p> 
<pre><code class="prism language-javascript"><span class="token comment">//import Axios from "axios"</span>

<span class="token comment">//Vue.prototype.$axios = Axios</span>
</code></pre> 
<h4><a id="parentvue_119"></a>parent.vue</h4> 
<p>【0】首先导入安装好的axios<br> 【1】重点：生命周期函数，组件安装好后调用此函数（真正用axios获取数据部分）<br> 【2】把获取到的数据循环展现出来</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"parent"</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 【<span class="token number">2</span>】把获取到的数据循环展现出来 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"v in list"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>v<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>hr<span class="token operator">/</span><span class="token operator">&gt;</span>【显示获取到的请求】<span class="token operator">&lt;</span>hr<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>list<span class="token punctuation">}</span><span class="token punctuation">}</span>

  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span> <span class="token comment">//【0】首先导入安装好的axios</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{<!-- --></span>
    name<span class="token punctuation">:</span><span class="token string">'parent'</span><span class="token punctuation">,</span>
    components<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>
        list<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//【0.1】定义一个空数据用来存放接收到的数据</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//【1】生命周期函数，组件安装好后调用此函数</span>
    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> api<span class="token operator">=</span><span class="token string">"http://www.phonegap100.com/appapi.php?a=getPortalList&amp;catid=20"</span><span class="token punctuation">;</span>
      axios
      <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 简略写法原：res参数省略了括号.then((res)=&gt;{....})</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token operator">=</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    filters<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    directives<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p>效果同1.2</p> 
<h4><a id="131_get_173"></a>1.3.1 把请求参数单独提出来写法(get)</h4> 
<p>效果同上例</p> 
<h5><a id="parentvue__175"></a>parent.vue 中的请求部分，其它略过</h5> 
<p>api接口：http://www.phonegap100.com/appapi.php?a=getPortalList&amp;catid=20</p> 
<pre><code class="prism language-javascript"><span class="token comment">//【1】生命周期函数，组件安装好后调用此函数</span>
    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> api<span class="token operator">=</span><span class="token string">"http://www.phonegap100.com/appapi.php"</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> params<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>a<span class="token punctuation">:</span><span class="token string">"getPortalList"</span><span class="token punctuation">,</span>catid<span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">}</span> <span class="token comment">//【1】把参数提到此处</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$axios  
      <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>api<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>params<span class="token punctuation">:</span>params<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//【2】get加上参数</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res<span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token operator">=</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>效果同1.2例</p> 
<h3><a id="13_axiospost_195"></a>1.3 axios的post</h3> 
<h4><a id="131post_196"></a>1.3.1post简单写法</h4> 
<pre><code class="prism language-javascript"><span class="token comment">//form-data:?name=iwen&amp;age=20</span>
			<span class="token comment">//x-www-form-urlencoded:{name:"iwen",age:20}</span>
			<span class="token comment">//注意：axios接受的post请求参数的格式是form-data格式</span>
			<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span>
			<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">"qs"</span> <span class="token comment">//node.js的一个库用于把post之类的参数转换成需要的格式</span>
			axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"http://www.wwtliu.com/sxtstu/blueberrypai/login.php"</span><span class="token punctuation">,</span>	qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
				user_id<span class="token punctuation">:</span><span class="token string">"iwen@qq.com"</span><span class="token punctuation">,</span>
					password<span class="token punctuation">:</span><span class="token string">"iwen123"</span><span class="token punctuation">,</span>
					verification_code<span class="token punctuation">:</span><span class="token string">"crfvw"</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="132axiospost_216"></a>1.3.2使用全局变量axios的post写法</h4> 
<pre><code>	axios.defaults.baseURL = 'https://api.example.com';
	axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;
	axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
</code></pre> 
<h5><a id="mainjs_221"></a>main.js</h5> 
<pre><code class="prism language-javascript"><span class="token comment">// The Vue build version to load with the `import` command</span>
<span class="token comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">"axios"</span>
<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">"qs"</span>

Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$axios <span class="token operator">=</span> Axios
Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token constant">HOST</span> <span class="token operator">=</span> <span class="token string">'/api'</span>

 Axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">'http://www.wwtliu.com'</span><span class="token punctuation">;</span> <span class="token comment">//定义全局变量</span>
 Axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">'Content-Type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>



<span class="token comment">/* eslint-disable no-new */</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
	template<span class="token punctuation">:</span> <span class="token string">'&lt;App/&gt;'</span><span class="token punctuation">,</span>
	components<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
		App
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="postjs_250"></a>post.js</h4> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
		post
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">"qs"</span>  <span class="token comment">//node.js的一个库，用于对post之类的参数进行转换成需要的类型</span>
	
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{<!-- --></span>
	name<span class="token punctuation">:</span><span class="token string">"posts"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">HOST</span> <span class="token operator">+</span> <span class="token string">"/login"</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>	<span class="token punctuation">{<!-- --></span>
			username<span class="token punctuation">:</span><span class="token string">"iwen"</span><span class="token punctuation">,</span>
			password<span class="token punctuation">:</span><span class="token string">"helloiwen"</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>	
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>	

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p>效果：将成功登录对应网站</p> 
<h3><a id="14__288"></a>1.4 拦截器</h3> 
<p>【作用】：在请求或响应被 then 或 catch 处理前拦截它们。</p> 
<h4><a id="mianjs_291"></a>mian.js</h4> 
<p>通过拦截器对发送之前数据处理，把格式不对的转化成正确的，在组件中就不用再处理了。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// The Vue build version to load with the `import` command</span>
<span class="token comment">// (runtime-only or standalone) has been set in webpack.base.conf with an alias.</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">"axios"</span>
<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">"qs"</span>

Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$axios <span class="token operator">=</span> Axios
Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token constant">HOST</span> <span class="token operator">=</span> <span class="token string">'/api'</span>

<span class="token comment">// Axios.defaults.baseURL = 'http://www.wwtliu.com';</span>
<span class="token comment">// Axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment">// 添加请求拦截器</span>
Axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"post"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//如果请求为post，则把其参数格式进行qs.stringify处理</span>
		config<span class="token punctuation">.</span>data <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 对请求错误做些什么</span>
	<span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加响应拦截器</span>
Axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 对响应错误做点什么</span>
	<span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* eslint-disable no-new */</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
	template<span class="token punctuation">:</span> <span class="token string">'&lt;App/&gt;'</span><span class="token punctuation">,</span>
	components<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
		App
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="postvue_340"></a>post.vue</h4> 
<p>在全局中用拦截器处理数据，在组件中直接用即可，就不用进行处理参数，引用qs.stringfiy（注释部分）处理了</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
		post
	<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{<!-- --></span>
	name<span class="token punctuation">:</span><span class="token string">"posts"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span><span class="token punctuation">{<!-- --></span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token comment">// var url = this.HOST + "/login";</span>
		<span class="token comment">// console.log(url);</span>
		<span class="token comment">// this.$axios.post(url,	{<!-- --></span>
		<span class="token comment">// 	username:"iwen",</span>
		<span class="token comment">// 	password:"helloiwen"</span>
		<span class="token comment">// })</span>
		<span class="token comment">// .then(res =&gt; {<!-- --></span>
		<span class="token comment">// 	console.log(res.data)</span>
		<span class="token comment">// })</span>
		<span class="token comment">// .catch(error =&gt; {<!-- --></span>
		<span class="token comment">// 	console.log(error);</span>
		<span class="token comment">// })</span>
		<span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">HOST</span> <span class="token operator">+</span> <span class="token string">"/movie/top250"</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
			params<span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>
				count<span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
				start<span class="token punctuation">:</span><span class="token number">0</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>	

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="15__389"></a>1.5 跨域解决方案</h3> 
<p>修改config index.js文件、host文件<br> 【修改完成后，重新运行项目才会生效：（关闭cmd，重新，npm run dev）】</p> 
<pre><code>proxyTable: {
	            "/api": {
	                target: "http://localhost:3000",
	                changeOrigin: true,
	                pathRewrite: {
	                    '^/api': ''
	                }
	            }
	        }
	        
添加host
	    	Vue.prototype.HOST = '/api'
	【注意】：此种跨域解决方案，只能适用于测试阶段，打包的时候，不会具备服务器不能跨域了，后端解决。
</code></pre> 
<h3><a id="16_Mock_407"></a>1.6 Mock：数据模拟</h3> 
<pre><code>1.自己创建JSON文件。使用get请求形式访问数据
	优点：方便，快捷
	缺点：只能存在get请求
2.项目中集成服务器，模拟各种接口
	优点：模拟真实线上环境
	缺点：增加开发成本
3.直接使用线上数据
	优点：真实
	缺点：不一定每个项目都存在
4.数据模拟库
	www.mockjs.com
	https://github.com/nuysoft/Mock/wiki/Getting-Started
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e93682ca1fee096161115237f459273/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Informatica使用操作流程--缓慢变化维 案例9</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64f14365184ad9b5edf62a0be591c2a0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Lua函数调用报错</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
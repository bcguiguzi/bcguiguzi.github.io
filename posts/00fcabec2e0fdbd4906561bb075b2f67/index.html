<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Arduino从零开始(1)——按钮控制LED - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Arduino从零开始(1)——按钮控制LED" />
<meta property="og:description" content="0.前言 本文主要介绍Arduino对于开关和条件判断函数的使用。
目录
0.前言
1.介绍
2.按钮控制LED
2.1下拉模式：
2.2上拉模式
3.扩展实验：
1.介绍 前篇介绍了点亮LED，这次案例我们尝试通过一个简单的传感器——按钮，来实现对LED控制。将控制按钮分解的话，能看到一个十分简单的构造。
(注意按钮方向)
如上图所示，这个按钮有四个引脚，分别1-2导通，3-4导通，中间一个开关连接。这里或许朋友们会有疑问了，对于一个常开开关而言，这里为什么会有四个引脚，只需要两个引脚不就可以了吗？比如工业上常用的欧姆龙行程开关，如下图：
常开端一对引脚，常闭端一对引脚，触碰按钮后，原本的常开和常闭端相互切换状态。而对于实验用的这个四脚小开关，这里的四个引脚的其中一个是为了给下拉电阻做引脚而准备的，常规的欧姆龙开关一般是和工业控制器如PLC等搭配使用。而对于PLC而言，首先是电源，一般PLC电源采用DC24V，而Arduino一般是DC5V，就电源上自然Arduino就不如PLC抗干扰能力强，再一个PLC电源线以及接线一般是采用具有一定抗干扰能力的双绞线，而我们对Arduino实验时一般是采用面包线，两者抗干扰能力也不在一个级别上，所以如果Arduino在读取开关信号时不接上拉或下拉电阻，那么其误动作的概率就很大。Arduino本身有自带上拉电阻，所以实际使用过程中更推荐使用上拉模式来读取开关信号。（这里虽然说Arduino相比较PLC而言抗干扰能力上不如PLC，但并不是说Arduino就不能用于工控了。做好屏蔽，外部的抗干扰等，依旧可以实现工控，毕竟一块Arduino的价格是一个PLC的几分之一。自己做的一条自动化生产线也是采用Arduino来设计的，虽然其中有坑，但都还是解决掉了。）
电路中上下拉电阻的作用：
上拉电阻——是将不确定信号通过一个电阻钳位在高电平，电阻同时限流作用下来电阻——是将不确定信号通过一个电阻钳位在低电平 两者最终的目的都是提高电路稳定性，避免误动作。
2.按钮控制LED 分别介绍两种模式下拉与上拉。
2.1下拉模式： 接线图如下：
代码如下：
void setup() { pinMode(13,OUTPUT); pinMode(2,INPUT); digitalWrite(13, LOW); } void loop() { if(digitalRead(2)==HIGH){//读取2号引脚状态，并做判断 digitalWrite(13, HIGH); } } 说明：
1.下拉模式即——pinMode(2,INPUT);。通常状态下2号引脚为低，触发高电平时有效，即将2与5V接通。
2.
if语句常用判定式：&lt;，&lt;=，==，&gt;=，&gt;，!=。
布尔运算式：
例符号逻辑if(digitalRead(2)==HIGH &amp;&amp; digitalRead(2)==HIGH){//.... }&amp;&amp;与if(digitalRead(2)==HIGH || digitalRead(2)==HIGH){//.... }||或 3.对于“==”判断，要小心使用成了单个等号如if(x=10)。这里单个等号是赋值运算，将恒为真。
2.2上拉模式 相比较下拉模式的接线图，上拉模式下就简单许多了。接线图如下：
代码如下：
void setup() { pinMode(13,OUTPUT); pinMode(2,INPUT_PULLUP); digitalWrite(13, LOW); } void loop() { if(digitalRead(2)==LOW){ digitalWrite(13, HIGH); } } 说明：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/00fcabec2e0fdbd4906561bb075b2f67/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-15T15:49:25+08:00" />
<meta property="article:modified_time" content="2022-11-15T15:49:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Arduino从零开始(1)——按钮控制LED</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="0.%E5%89%8D%E8%A8%80">0.前言 </h2> 
<p>本文主要介绍Arduino对于开关和条件判断函数的使用。</p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="0.%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#0.%E5%89%8D%E8%A8%80" rel="nofollow">0.前言</a></p> 
<p id="1.%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#1.%E4%BB%8B%E7%BB%8D" rel="nofollow">1.介绍</a></p> 
<p id="2.%E6%8C%89%E9%92%AE%E6%8E%A7%E5%88%B6LED-toc" style="margin-left:0px;"><a href="#2.%E6%8C%89%E9%92%AE%E6%8E%A7%E5%88%B6LED" rel="nofollow">2.按钮控制LED</a></p> 
<p id="2.1%E4%B8%8B%E6%8B%89%E6%A8%A1%E5%BC%8F%EF%BC%9A-toc" style="margin-left:40px;"><a href="#2.1%E4%B8%8B%E6%8B%89%E6%A8%A1%E5%BC%8F%EF%BC%9A" rel="nofollow">2.1下拉模式：</a></p> 
<p id="2.2%E4%B8%8A%E6%8B%89%E6%A8%A1%E5%BC%8F-toc" style="margin-left:40px;"><a href="#2.2%E4%B8%8A%E6%8B%89%E6%A8%A1%E5%BC%8F" rel="nofollow">2.2上拉模式</a></p> 
<p id="3.%E6%89%A9%E5%B1%95%E5%AE%9E%E9%AA%8C%EF%BC%9A-toc" style="margin-left:0px;"><a href="#3.%E6%89%A9%E5%B1%95%E5%AE%9E%E9%AA%8C%EF%BC%9A" rel="nofollow">3.扩展实验：</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%E4%BB%8B%E7%BB%8D">1.介绍</h2> 
<p>前篇介绍了点亮LED，这次案例我们尝试通过一个简单的传感器——按钮，来实现对LED控制。将控制按钮分解的话，能看到一个十分简单的构造。</p> 
<p>                                             <img alt="" height="162" src="https://images2.imgbox.com/7c/82/pt6SFjq4_o.png" width="140"><img alt="" height="173" src="https://images2.imgbox.com/25/0c/akckdS3T_o.png" width="137"></p> 
<p style="text-align:center;">(注意按钮方向)</p> 
<p>如上图所示，这个按钮有四个引脚，分别1-2导通，3-4导通，中间一个开关连接。这里或许朋友们会有疑问了，对于一个常开开关而言，这里为什么会有四个引脚，只需要两个引脚不就可以了吗？比如工业上常用的欧姆龙行程开关，如下图：</p> 
<p class="img-center"><img alt="" height="350" src="https://images2.imgbox.com/7f/78/Ewy3EM2e_o.png" width="492"></p> 
<p> 常开端一对引脚，常闭端一对引脚，触碰按钮后，原本的常开和常闭端相互切换状态。而对于实验用的这个四脚小开关，这里的四个引脚的其中一个是为了给下拉电阻做引脚而准备的，常规的欧姆龙开关一般是和工业控制器如PLC等搭配使用。而对于PLC而言，首先是电源，一般PLC电源采用DC24V，而Arduino一般是DC5V，就电源上自然Arduino就不如PLC抗干扰能力强，再一个PLC电源线以及接线一般是采用具有一定抗干扰能力的双绞线，而我们对Arduino实验时一般是采用面包线，两者抗干扰能力也不在一个级别上，所以如果Arduino在读取开关信号时不接上拉或下拉电阻，那么其误动作的概率就很大。Arduino本身有自带上拉电阻，所以实际使用过程中更推荐使用上拉模式来读取开关信号。（这里虽然说Arduino相比较PLC而言抗干扰能力上不如PLC，但并不是说Arduino就不能用于工控了。做好屏蔽，外部的抗干扰等，依旧可以实现工控，毕竟一块Arduino的价格是一个PLC的几分之一。自己做的一条自动化生产线也是采用Arduino来设计的，虽然其中有坑，但都还是解决掉了。）</p> 
<p>电路中上下拉电阻的作用：</p> 
<ul><li>上拉电阻——是将不确定信号通过一个电阻钳位在高电平，电阻同时限流作用</li><li>下来电阻——是将不确定信号通过一个电阻钳位在低电平</li></ul> 
<p>两者最终的目的都是提高电路稳定性，避免误动作。</p> 
<h2 id="2.%E6%8C%89%E9%92%AE%E6%8E%A7%E5%88%B6LED">2.按钮控制LED</h2> 
<p>分别介绍两种模式下拉与上拉。</p> 
<h3 id="2.1%E4%B8%8B%E6%8B%89%E6%A8%A1%E5%BC%8F%EF%BC%9A">2.1下拉模式：</h3> 
<p>接线图如下：</p> 
<p class="img-center"><img alt="" height="322" src="https://images2.imgbox.com/73/b2/VxQTFMPB_o.png" width="376"></p> 
<p> 代码如下：</p> 
<pre><code class="language-cpp">void setup()
{
  pinMode(13,OUTPUT);
  pinMode(2,INPUT);
  digitalWrite(13, LOW);
}

void loop()
{
  if(digitalRead(2)==HIGH){//读取2号引脚状态，并做判断
  	digitalWrite(13, HIGH);
  }
}</code></pre> 
<p>说明：</p> 
<p>1.下拉模式即——pinMode(2,<span style="color:#fe2c24;">INPUT</span>);。通常状态下2号引脚为低，触发高电平时有效，即将2与5V接通。</p> 
<p>2.</p> 
<p>if语句常用判定式：<span style="color:#fe2c24;">&lt;</span>，<span style="color:#fe2c24;">&lt;=</span>，<span style="color:#fe2c24;">==</span>，<span style="color:#fe2c24;">&gt;=</span>，<span style="color:#fe2c24;">&gt;</span>，<span style="color:#fe2c24;">!=</span>。</p> 
<p>布尔运算式：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:511px;"><tbody><tr><td style="width:374px;">例</td><td style="width:76px;">符号</td><td style="width:58px;">逻辑</td></tr><tr><td style="width:374px;">if(digitalRead(2)==HIGH &amp;&amp; digitalRead(2)==HIGH){//.... }</td><td style="width:76px;"><span style="color:#fe2c24;">&amp;&amp;</span></td><td style="width:58px;">与</td></tr><tr><td style="width:374px;">if(digitalRead(2)==HIGH || digitalRead(2)==HIGH){//.... }</td><td style="width:76px;"><span style="color:#fe2c24;">||</span></td><td style="width:58px;">或</td></tr></tbody></table> 
<p>3.对于“==”判断，要小心使用成了单个等号如if(x=10)。这里单个等号是赋值运算，将恒为真。</p> 
<h3 id="2.2%E4%B8%8A%E6%8B%89%E6%A8%A1%E5%BC%8F">2.2上拉模式</h3> 
<p>相比较下拉模式的接线图，上拉模式下就简单许多了。接线图如下：</p> 
<p class="img-center"><img alt="" height="319" src="https://images2.imgbox.com/0e/9a/zGCNjFnG_o.png" width="429"></p> 
<p>代码如下：</p> 
<pre><code class="language-cpp">void setup()
{
  pinMode(13,OUTPUT);
  pinMode(2,INPUT_PULLUP);
  digitalWrite(13, LOW);
}

void loop()
{
  if(digitalRead(2)==LOW){
  	digitalWrite(13, HIGH);
  }
}</code></pre> 
<p>说明：</p> 
<p>1.可以看到对于Arduino而言，因其自身已经配有上拉电阻，所以实际使用中更推荐采用上拉模式，以节省外接电子元器件，减少干扰，提高系统的稳定性。</p> 
<p>2.在上拉模式即—— pinMode(2,<span style="color:#fe2c24;">INPUT_PULLUP</span>);。通常状态下2号引脚拉高，触发低电平时有效，即将2与地接通。</p> 
<h2 id="3.%E6%89%A9%E5%B1%95%E5%AE%9E%E9%AA%8C%EF%BC%9A">3.扩展实验：</h2> 
<p>按钮按下后开始计时，并同时点亮LED，10秒途中再次按下按钮，熄灭LED，并打印时间，10秒后若无任何操作，自动熄灭LED，并打印时间。扩展实验中有循环while的使用，会在下一章节具体说明。</p> 
<p>接线图如下：</p> 
<p style="text-align:center;"><img alt="" height="306" src="https://images2.imgbox.com/d4/a7/AckKtZSG_o.png" width="412"></p> 
<p>代码如下：</p> 
<pre><code class="language-cpp">void setup()
{
  Serial.begin(9600);
  pinMode(13, OUTPUT);
  pinMode(2, INPUT_PULLUP);
  digitalWrite(13, LOW);
}

void loop()
{
  int i=10;
  if (digitalRead(2)==LOW) {
    while (digitalRead(2)==LOW) {
      if(digitalRead(2)==HIGH){
        digitalWrite(13, HIGH);
      	while (i&lt;=10000){
          delay(10);
          i=i+10;
          if (digitalRead(2)==LOW) {
            while (digitalRead(2)==LOW){
              if(digitalRead(2)==HIGH) {
                Serial.println(float(i)/1000);
                break;
              }
            }
            break;
          }
          Serial.println(float(i)/1000); 	
        }
        digitalWrite(13, LOW);
        break;
      }
    }
  }
}
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5de1d70734b289aec5a78b904889c530/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vite&#43;rollup</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/94409f3c4ebf83ce127e0c11543788b9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">编辑ip地址</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>phpBOM头(字符&amp;#65279;)出现的原因以及解决方法 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="phpBOM头(字符&amp;#65279;)出现的原因以及解决方法" />
<meta property="og:description" content="今天在项目中发现，客户端在使用ajax得到返回值时，无法匹配字符串。总是报错，打开页面接口发现，页面的头部出现了&amp;#65279;的字符(BOM头)，找到问题了，那么直接用代码清除掉即可。 php隐形字符&amp;#65279解释如下： UTF-8 编码的文件可以分为无 BOM 和 BOM 两种格式。 何谓BOM？ &#34;EF BB BF&#34; 这三个字节就叫BOM，全称是&#34;Byte Order Mard&#34;。在utf8文件中常用BOM来表明这个文件是UTF-8文件，而BOM的本意是在utf16中用。 utf-8文件在php中输出的时候bom是会被输出的，所以要在php中使用utf-8，必须要是使用不带bom头的utf-8文件。 常用的文本编辑软件对utf-8文件保存的支持方式并不一样，使用的时候要特别留意。 解决的方法： 1、接notopad&#43;&#43; 保存为无dom格式(格式-&gt;转为UTF-8 无dom格式)，适合文件少的情况。 2、文件比较多，又想偷懒下，使用下列方法来实现(亲测可用)。将一下代码保存为a.php文件放到根目录下，执行一下，即可自动完成转换。 代码如下：
&lt;?php // 设定你要清除BOM的根目录（会自动扫描所有子目录和文件） $HOME = dirname(__FILE__); // 如果是Windows系统，修改为：$WIN = 1; $WIN = 0; ?&gt; &lt;!DOCTYPE html PUBLIC &#34;-//W3C//DTD XHTML 1.0 Transitional//EN&#34; &#34;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&#34;&gt; &lt;html xmlns=&#34;http://www.w3.org/1999/xhtml&#34;&gt; &lt;head&gt; &lt;meta http-equiv=&#34;Content-Type&#34; content=&#34;text/html; charset=utf-8&#34; /&gt; &lt;title&gt;UTF8 BOM 清除器&lt;/title&gt; &lt;style&gt; body { font-size: 10px; font-family: Arial, Helvetica, sans-serif; background: #FFF; color: #000; } ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5288dbf794665e181b1fefd0c0d956b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-02-01T15:51:10+08:00" />
<meta property="article:modified_time" content="2018-02-01T15:51:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">phpBOM头(字符&amp;#65279;)出现的原因以及解决方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    今天在项目中发现，客户端在使用ajax得到返回值时，无法匹配字符串。总是报错，打开页面接口发现，页面的头部出现了&amp;#65279;的字符(BOM头)，找到问题了，那么直接用代码清除掉即可。 
<br> 
<br> 
<br> php隐形字符&amp;#65279解释如下： 
<br> 
<br> 
<br> UTF-8 编码的文件可以分为无 BOM 和 BOM 两种格式。 
<br> 
<br> 
<br> 何谓BOM？ 
<br> 
<br> 
<br> 　　"EF BB BF" 这三个字节就叫BOM，全称是"Byte Order Mard"。在utf8文件中常用BOM来表明这个文件是UTF-8文件，而BOM的本意是在utf16中用。 
<br> 
<br> 
<br> 　　utf-8文件在php中输出的时候bom是会被输出的，所以要在php中使用utf-8，必须要是使用不带bom头的utf-8文件。 
<br> 
<br> 
<br> 　　常用的文本编辑软件对utf-8文件保存的支持方式并不一样，使用的时候要特别留意。 
<br> 
<br> 
<br> 解决的方法： 
<br> 
<br> 
<br> 1、接notopad++ 保存为无dom格式(格式-&gt;转为UTF-8 无dom格式)，适合文件少的情况。 
<br> 
<br> 
<br> 2、文件比较多，又想偷懒下，使用下列方法来实现(亲测可用)。将一下代码保存为a.php文件放到根目录下，执行一下，即可自动完成转换。 
<br> 
<br> 
<br> 
<p>代码如下：</p> 
<p></p> 
<pre><code class="language-php">&lt;?php 
// 设定你要清除BOM的根目录（会自动扫描所有子目录和文件）
$HOME = dirname(__FILE__);
// 如果是Windows系统，修改为：$WIN = 1;
$WIN = 0;
?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;title&gt;UTF8 BOM 清除器&lt;/title&gt;
&lt;style&gt;
body { font-size: 10px; font-family: Arial, Helvetica, sans-serif; background: #FFF; color: #000; }
.FOUND { color: #F30; font-size: 14px; font-weight: bold; }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
$BOMBED = array();
RecursiveFolder($HOME);
echo '&lt;h2&gt;These files had UTF8 BOM, but i cleaned them:&lt;/h2&gt;&lt;p class="FOUND"&gt;';
foreach ($BOMBED as $utf) { echo $utf ."&lt;br /&gt;\n"; }
echo '&lt;/p&gt;';
// 递归扫描
function RecursiveFolder($sHOME) {
 global $BOMBED, $WIN;
 $win32 = ($WIN == 1) ? "\\" : "/";
 $folder = dir($sHOME);
 $foundfolders = array();
 while ($file = $folder-&gt;read()) {
  if($file != "." and $file != "..") {
   if(filetype($sHOME . $win32 . $file) == "dir"){
    $foundfolders[count($foundfolders)] = $sHOME . $win32 . $file;
   } else {
    $content = file_get_contents($sHOME . $win32 . $file);
    $BOM = SearchBOM($content);
    if ($BOM) {
     $BOMBED[count($BOMBED)] = $sHOME . $win32 . $file;
     // 移出BOM信息
     $content = substr($content,3);
     // 写回到原始文件
     file_put_contents($sHOME . $win32 . $file, $content);
    }
   }
  }
 }
 $folder-&gt;close();
 if(count($foundfolders) &gt; 0) {
  foreach ($foundfolders as $folder) {
   RecursiveFolder($folder, $win32);
  }
 }
}
// 搜索当前文件是否有BOM
function SearchBOM($string) { 
  if(substr($string,0,3) == pack("CCC",0xef,0xbb,0xbf)) return true;
  return false; 
}
?&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<br> 
<br> 
<p></p> 
<br> 
<br> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ab3628db5bce39f19d99fb4e19f3d09f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">android JSONObject的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6604e08b1d4a1ab9ca51fbfee7738dc1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ng-click得到当前元素</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
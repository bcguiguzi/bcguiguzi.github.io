<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux中文件特殊权限详解 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux中文件特殊权限详解" />
<meta property="og:description" content="本文转载自博客园 作者：小a玖拾柒 出处：http://www.cnblogs.com/ftl1012/
setuid(suid): 针对命令和二进制程序的，当普通用户执行某个(passwd)命令的时候，可以拥有这个命令对应用户的权限,
即让普通用户可以以root用户的角色执行程序或命令。
setgid(sgid): 希望一个目录被多个用户(同属于一个组)共享，同一个组的用户可以处理
粘滞位(t) ： 把一个文件夹的权限都打开，然后共享文件，像/tmp一样，但是 生产环境一般不使用
suid setuid(suid): 针对命令和二进制程序的
chmod u&#43;s h.txt
chmod 4777 h.txt
chmod u-s h.txt
查看passwd命令的权限
1 2 3 4 [root@localhost ftl]# ll /usr/bin/passwd 问题： passwd文件的属组是root,表示只有root用户可以访问的文件，为什么普通用户依然可以使用该命令更改自己的密码？ 答案：当普通用户[omc]使用passwd命令的时候，系统看到passwd命令文件的属性有大写s后，表示这个命令的属主权限被omc用户获得,也就是omc用户获得文件/etc/shadow的root的rwx权限 image
用户添加s权限【用4表示s位,有大写s表示有suid权限】
1 2 [root@localhost ftl]# chmod 4600 hhh.txt –&gt;【当x位没有小写x执行权限的时候，sudi的权限显示的就是大S】 [root@localhost ftl]# chmod 600 hhh.txt
image
查找拥有s权限且文件权限为755的文件
1 find / -type f -perm 4755 image
取消ping命令的共享权限
1 2 3 which ping –&gt; /bin/ping –&gt;显示4755 chmod 755 /bin/ping 普通用户用不了 ping命令了 image" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/66eab43b7b4bb81075d95c4b718c9c48/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-08T20:46:12+08:00" />
<meta property="article:modified_time" content="2018-07-08T20:46:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux中文件特殊权限详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本文转载自博客园 <br> 作者：小a玖拾柒 <br> 出处：<a href="http://www.cnblogs.com/ftl1012/" rel="nofollow">http://www.cnblogs.com/ftl1012/</a></p> 
<p>setuid(suid): 针对命令和二进制程序的，当普通用户执行某个(passwd)命令的时候，可以拥有这个命令对应用户的权限,</p> 
<p>即让普通用户可以以root用户的角色执行程序或命令。</p> 
<p>setgid(sgid): 希望一个目录被多个用户(同属于一个组)共享，同一个组的用户可以处理</p> 
<p>粘滞位(t) ： 把一个文件夹的权限都打开，然后共享文件，像/tmp一样，但是 生产环境一般不使用</p> 
<p>suid <br> setuid(suid): 针对命令和二进制程序的</p> 
<p>chmod u+s h.txt</p> 
<p>chmod 4777 h.txt</p> 
<p>chmod u-s h.txt</p> 
<p>查看passwd命令的权限</p> 
<p>1 <br> 2 <br> 3 <br> 4 <br> [root@localhost ftl]# ll /usr/bin/passwd </p> 
<p>问题： passwd文件的属组是root,表示只有root用户可以访问的文件，为什么普通用户依然可以使用该命令更改自己的密码？ <br> 答案：当普通用户[omc]使用passwd命令的时候，系统看到passwd命令文件的属性有大写s后，表示这个命令的属主权限被omc用户获得,也就是omc用户获得文件/etc/shadow的root的rwx权限 <br> image</p> 
<p>用户添加s权限【用4表示s位,有大写s表示有suid权限】</p> 
<p>1 <br> 2 <br> [root@localhost ftl]# chmod 4600 hhh.txt –&gt;【当x位没有小写x执行权限的时候，sudi的权限显示的就是大S】 <br> [root@localhost ftl]# chmod 600 hhh.txt</p> 
<p>image</p> 
<p>查找拥有s权限且文件权限为755的文件</p> 
<p>1 <br> find / -type f -perm 4755 <br> image</p> 
<p>取消ping命令的共享权限</p> 
<p>1 <br> 2 <br> 3 <br> which ping –&gt; /bin/ping –&gt;显示4755 <br> chmod 755 /bin/ping <br> 普通用户用不了 ping命令了 <br> image</p> 
<p>其他答疑</p> 
<p>suid和sudo都可以用于提高用户的操作权限，那他们的区别是什么？ <br> suid:是让所有用户拥有某个权限可以执行某个程序或命令 –&gt;仅仅是一个工具，仅仅在执行过程中生效，所有人都可用 <br> sudo:是让某个用户获得特定的某个命令或者执行权限 –&gt;身份提高，终身有效，某个用户才有的权利</p> 
<p>希望普通用户[omc]删除某个自己没有权限删除的文件，应该怎么处理？ <br> a.sudo给omc授权rm权限 </p> 
<pre><code>      b.rm设置suid 

      c.修改上级目录的权限【因为上级目录记录着下级目录里文件的权限信息】
</code></pre> 
<p>sgid <br> setgid(sgid): 希望一个目录被多个用户(同属于一个组)共享，同一个组的用户可以处理</p> 
<p>chmod g+s /home/omc/h –&gt;添加sgid</p> 
<p>chmod 2755 /home/omc/h –&gt;添加sgid</p> 
<p>chmod g-s /home/omc/h –&gt;取消sgid</p> 
<p>粘滞位(t) <br> 粘滞位(t): 把一个文件夹的权限都打开，然后共享文件，像/tmp一样，但是 生产环境一般不使用</p> 
<p>chmod o+s h.txt –&gt; 添加粘滞位</p> 
<p>chmod o-s h.txt –&gt; 取消粘滞位</p> 
<p>chmod 1777 /home/omc –&gt;添加粘滞位</p> 
<p>查看/tmp文件夹的权限：</p> 
<p>1 <br> 2 <br> 3 <br> tmp相当于共内容,所有用户可以对这个目录操作，但是不能破坏(t的作用) <br> /tmp是经典的粘滞位目录，特点：谁都有写的权限，因此有安全隐患 <br> [root@localhost omc]# ll -ld /tmp/ –&gt;t表示粘滞位 t表示有个x,没有就是大T <br> image</p> 
<p>特殊权限的小结 <br> 特殊说明: </p> 
<p>suid 4000: 权限符s(S),用户位上的x位置 chmod 4777 h.txt <br> guid 2000: 权限符s(S),用户组位上的x位置 chmod 2777 h.txt <br> 粘滞位 1000: 权限符t(T),其他用户位上的x位置 chmod 1777 /home/omc <br> 对应位有x则，字符权限小写，否则表现为大写</p> 
<p>设置方法：</p> 
<p>chmod u+s h.txt chmod u-s h.txt <br> chmod g+s h.txt chmod g-s h.txt <br> chmod o+s h.txt chmod o-s h.txt <br> /tmp是经典的粘滞位目录，需要记住哦</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1785aba29003230f850819e97e2d6be3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">面试用到的 常见SQL语句</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/984becf3487aef8ea7654097ac5da5c3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">推荐几个比较骚的技术公众号【文末福利】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
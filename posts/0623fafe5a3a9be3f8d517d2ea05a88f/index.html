<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Developers:处理音频输出的硬件 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android Developers:处理音频输出的硬件" />
<meta property="og:description" content="用户用很多选择，当它开始享受Android设备中的音频的时候。许多设备有一个内嵌扬声器，有线耳机的耳机插孔，和一些蓝牙连接和支持A2DP音频。 检查什么设备正在被使用 ————————————————————————————————————————————————————————————————— 你的应用程序的行为如何被哪个硬件输入被使用影响。 你能查询AudioManager类确定音频是否被正确的路由到设备的扬声器，有线耳机，或者连接的蓝牙设备。如下面的代码块所示： if (isBluetoothA2dpOn()) { // Adjust output for Bluetooth. } else if (isSpeakerphoneOn()) { // Adjust output for Speakerphone. } else if (isWiredHeadsetOn()) { // Adjust output for headsets } else { // If audio plays and noone can hear it, is it still playing? } 处理音频输出硬件的改变 —————————————————————————————————————————————————————————————————当一个耳机被断开，或者一个蓝牙设备失去连接，音频流自动路由到内置的扬声器。如果你听音乐在在能做到的最大的声音，那肯定是一个嘈杂的惊喜。 幸运的是当这个种情况发生的时候，系统广播一个ACTION_AUDIO_BECOMING_NOISY意图。无论你什么时候播放音频，注册一个BroadcastReceiver来监听这个意图是一个好的实践。在播放音乐的情况下，用户通常期望播放被暂停—然而对于游戏你可能会选降低音量。 private class NoisyAudioStreamReceiver extends BroadcastReceiver { @Override public void onReceive(Context context, Intent intent) { if (AudioManager.ACTION_AUDIO_BECOMING_NOISY.equals(intent.getAction())) { // Pause the playback } } } private IntentFilter intentFilter = new IntentFilter(AudioManager." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/0623fafe5a3a9be3f8d517d2ea05a88f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-12-05T10:09:37+08:00" />
<meta property="article:modified_time" content="2013-12-05T10:09:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android Developers:处理音频输出的硬件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px">用户用很多选择，当它开始享受Android设备中的音频的时候。许多设备有一个内嵌扬声器，有线耳机的耳机插孔，和一些蓝牙连接和支持A2DP音频。</span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px"><span class="NormalTextRun SCX159847954" style="margin:0px; padding:0px; background-color:inherit"></span></span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <h4 class="Paragraph SCX159847954" style="margin:0px; padding:0px; word-wrap:break-word; font-weight:normal; vertical-align:baseline; font-size:6pt; background-color:transparent; color:rgb(91,155,213)"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-weight:bold; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px"><span class="SpellingError SCX159847954" style="margin:0px; padding:0px; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:transparent; background-color:inherit">检查什么设备正在被使用</span></span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span></h4> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:11pt; line-height:17px">——————————————————————————————————————————<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——<span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">—</span></span></span></span></span></span></span></span></span></span></span>——</span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:11pt; line-height:17px"> </span></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px"><span class="SpellingError SCX159847954" style="margin:0px; padding:0px; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:transparent; background-color:inherit">你的应用程序的行为如何被哪个硬件输入被使用影响</span><span class="NormalTextRun SCX159847954" style="margin:0px; padding:0px; background-color:inherit">。</span></span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:11pt; line-height:17px"><span class="NormalTextRun SCX159847954" style="margin:0px; padding:0px; background-color:inherit"></span></span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:11pt; line-height:17px"> </span></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px"><span class="SpellingError SCX159847954" style="margin:0px; padding:0px; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:transparent; background-color:inherit">你能查询AudioManager类确定音频是否被正确的路由到设备的扬声器，有线耳机，或者连接的蓝牙设备。如下面的代码块所示</span><span class="NormalTextRun SCX159847954" style="margin:0px; padding:0px; background-color:inherit">：</span></span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"></p> 
 <pre><code class="language-java">if (isBluetoothA2dpOn()) { 
   // Adjust output for Bluetooth. 
} else if (isSpeakerphoneOn()) { 
   // Adjust output for Speakerphone. 
} else if (isWiredHeadsetOn()) { 
   // Adjust output for headsets 
} else {  
   // If audio plays and noone can hear it, is it still playing? 
} </code></pre> 
 <br> 
 <span class="TextRun SCX159847954" style="background-color:transparent; color:windowtext; margin:0px; padding:0px; font-weight:bold; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px"><span class="SpellingError SCX159847954" style="margin:0px; padding:0px; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:transparent; background-color:inherit">处理音频输出硬件的改变</span></span> 
 <span class="EOP SCX159847954" style="background-color:transparent; color:rgb(91,155,213); margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span> 
 <p></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <h4 class="Paragraph SCX159847954" style="margin:0px; padding:0px; word-wrap:break-word; font-weight:normal; vertical-align:baseline; font-size:6pt; background-color:transparent"><span style="font-size:14px"><span class="TextRun EmptyTextRun SCX159847954" style="margin:0px; padding:0px; font-size:12pt; line-height:19px"></span></span><span class="LineBreakBlob BlobObject SCX159847954" style="margin:0px; padding:0px; font-size:12pt; line-height:19px"><span class="SCX159847954" style="margin:0px; padding:0px"><span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——————————————————————————————————————————</span><span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">—————————————————————</span><span style="font-family:Calibri,sans-serif; font-size:15px; line-height:17px">——</span></span><br class="SCX159847954" style="margin:0px; padding:0px"></span><span class="TextRun SCX159847954" style="color:windowtext; margin:0px; padding:0px; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px">当一个耳机被断开，或者一个蓝牙设备失去连接，音频流自动路由到内置的扬声器。如果你听音乐在在能做到的最大的声音，那肯定是一个嘈杂的惊喜。</span><span class="EOP SCX159847954" style="color:rgb(91,155,213); margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span></h4> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:11pt; line-height:17px"><span class="NormalTextRun SCX159847954" style="margin:0px; padding:0px; background-color:inherit"></span></span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:11pt; line-height:17px"> </span></p> 
</div> 
<div class="OutlineElement Ltr SCX159847954" style="margin:0px; padding:0px; font-family:Calibri,sans-serif; font-size:13.333333969116211px"> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="TextRun SCX159847954" style="margin:0px; padding:0px; color:windowtext; font-size:10pt; font-family:'Calibri Light',sans-serif; line-height:16px"><span class="NormalTextRun SCX159847954" style="margin:0px; padding:0px; background-color:inherit">幸运的是当这个种情况发生的时候，系统广播一个ACTION_AUDIO_BECOMING_NOISY意图。无论你什么时候播放音频，注册一个BroadcastReceiver来监听这个意图是一个好的实践。在播放音乐的情况下，用户通常期望播放被暂停—</span><span class="SpellingError SCX159847954" style="margin:0px; padding:0px; border-bottom-style:solid; border-bottom-width:1px; border-bottom-color:transparent; background-color:inherit">然而对于游戏你可能会选降低音量</span><span class="NormalTextRun SCX159847954" style="margin:0px; padding:0px; background-color:inherit">。</span></span><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"> </span></p> 
 <p class="Paragraph SCX159847954" style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; word-wrap:break-word; vertical-align:baseline; font-size:6pt; background-color:transparent; color:windowtext"><span class="EOP SCX159847954" style="margin:0px; padding:0px; font-size:10pt; line-height:16px; font-family:'Calibri Light',sans-serif"></span></p> 
 <pre><code class="language-java">private class NoisyAudioStreamReceiver extends BroadcastReceiver { 
   @Override 
   public void onReceive(Context context, Intent intent) { 
       if (AudioManager.ACTION_AUDIO_BECOMING_NOISY.equals(intent.getAction())) { 
           // Pause the playback 
       } 
   } 
} 
 
private IntentFilter intentFilter = new IntentFilter(AudioManager.ACTION_AUDIO_BECOMING_NOISY); 
 
private void startPlayback() { 
   registerReceiver(myNoisyAudioStreamReceiver(), intentFilter); 
} 
 
private void stopPlayback() { 
   unregisterReceiver(myNoisyAudioStreamReceiver); 
} </code></pre> 
 <p></p> 
 <p></p> 
 <div style='color: rgb(85, 85, 85); font-family: "microsoft yahei"; font-size: 15px;'> 
  <span style="font-size: 14px; font-family: SimSun; color: rgb(255, 0, 0);">新技术，新未来！欢迎大家关注</span> 
  <span style="font-size: 14px; font-family: SimSun; color: rgb(255, 0, 0);"><strong>“1024工场”微信服务号</strong></span> 
  <span style="font-size: 14px; font-family: SimSun; color: rgb(255, 0, 0);">，时刻关注我们的最新的技术讯息！</span> 
  <span style="font-size: 14px; font-family: SimSun; color: rgb(255, 0, 0);"><strong>（甭客气！尽情的扫描或者长按！）</strong></span> 
 </div> 
 <div style='color: rgb(85, 85, 85); font-family: "microsoft yahei"; font-size: 15px; text-align: center; font-style: italic;'> 
  <img src="https://images2.imgbox.com/90/b4/gK5BCBSH_o.jpg" alt="" style="border: none; max-width: 100%; height: auto;"> 
 </div> 
 <br> 
 <p></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3f1d67a3c63f632e1d06950ed1f57b45/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">将中文汉子转换成汉语拼音</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e0af7966eed2850cccf7e138272fb0ff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用&#34;http://m.weather.com.cn/data/&#34; &#43; cityCode &#43; &#34;.html&#34;获取城市天气</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ajax then error,jQuery ajax success error - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ajax then error,jQuery ajax success error" />
<meta property="og:description" content="I&#39;m trying to submit a form witch sends an email:
JS
var that = $(this);
$.ajax({
url: &#39;../wp-content/themes/bsj/php/validate.php&#39;,
type: &#39;post&#39;,
context: that,
data: $(&#39;#sign-up&#39;).serialize(),
cache: false,
success: function(){
alert(&#39;success!&#39;);
},
error: function(){
alert(&#39;error!&#39;);
}
});
PHP
/*----------------------------------
Variables
----------------------------------*/
// Personal info
$prefix = $_POST[&#39;prefix&#39;];
$first_name = $_POST[&#39;first_name&#39;];
$last_name = $_POST[&#39;last_name&#39;];
$company = $_POST[&#39;company&#39;];
$email = $_POST[&#39;email&#39;];
$title = $_POST[&#39;title&#39;];
$dept = $_POST[&#39;dept&#39;];
// Contact details
$address = $_POST[&#39;address&#39;];" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/0c35e0dcb7bc8854ac1c3dde81626458/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T23:07:41+08:00" />
<meta property="article:modified_time" content="2021-08-05T23:07:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ajax then error,jQuery ajax success error</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>I'm trying to submit a form witch sends an email:</p> 
 <p>JS</p> 
 <p>var that = $(this);</p> 
 <p>$.ajax({<!-- --></p> 
 <p>url: '../wp-content/themes/bsj/php/validate.php',</p> 
 <p>type: 'post',</p> 
 <p>context: that,</p> 
 <p>data: $('#sign-up').serialize(),</p> 
 <p>cache: false,</p> 
 <p>success: function(){<!-- --></p> 
 <p>alert('success!');</p> 
 <p>},</p> 
 <p>error: function(){<!-- --></p> 
 <p>alert('error!');</p> 
 <p>}</p> 
 <p>});</p> 
 <p>PHP</p> 
 <p>/*----------------------------------</p> 
 <p>Variables</p> 
 <p>----------------------------------*/</p> 
 <p>// Personal info</p> 
 <p>$prefix = $_POST['prefix'];</p> 
 <p>$first_name = $_POST['first_name'];</p> 
 <p>$last_name = $_POST['last_name'];</p> 
 <p>$company = $_POST['company'];</p> 
 <p>$email = $_POST['email'];</p> 
 <p>$title = $_POST['title'];</p> 
 <p>$dept = $_POST['dept'];</p> 
 <p>// Contact details</p> 
 <p>$address = $_POST['address'];</p> 
 <p>$address2 = $_POST['address2'];</p> 
 <p>$city = $_POST['city'];</p> 
 <p>$state = $_POST['state'];</p> 
 <p>$zip = $_POST['zip'];</p> 
 <p>$phone = $_POST['phone'];</p> 
 <p>$ext = $_POST['ext'];</p> 
 <p>$fax = $_POST['fax'];</p> 
 <p>// Job Summary</p> 
 <p>$job_title = $_POST['job_title'];</p> 
 <p>$positions = $_POST['positions'];</p> 
 <p>$hours = $_POST['hours'];</p> 
 <p>$age = $_POST['age'];</p> 
 <p>$wage = $_POST['wage'];</p> 
 <p>$wage_type = $_POST['wage_type'];</p> 
 <p>$job_description = $_POST['job_description'];</p> 
 <p>$comments = $_POST['comments'];</p> 
 <p>/*----------------------------------</p> 
 <p>Mail Form</p> 
 <p>----------------------------------*/</p> 
 <p>$to = 'email@email.com';</p> 
 <p>$subject = 'Subject';</p> 
 <p>$headers = 'From: noreply@email.com' . "\r\n" .</p> 
 <p>'Reply-To: noreply@email.com' . "\r\n" .</p> 
 <p>'X-Mailer: PHP/' . phpversion();</p> 
 <p>$message =</p> 
 <p>'### Personal Information ###' . "\r\n\r\n" .</p> 
 <p>'Prefix: ' . $prefix . "\r\n" .</p> 
 <p>'First Name: '. $first_name . "\r\n" .</p> 
 <p>'Last Name: ' . $last_name . "\r\n" .</p> 
 <p>'Company: ' . $company . "\r\n" .</p> 
 <p>'E-Mail: ' . $email . "\r\n" .</p> 
 <p>'Title: ' . $title . "\r\n" .</p> 
 <p>'Dept.: ' . $dept . "\r\n\r\n";</p> 
 <p>$message .=</p> 
 <p>'### Contact Details ###' . "\r\n\r\n" .</p> 
 <p>'Address: ' . $address . "\r\n" .</p> 
 <p>'Address 2: ' . $address2 . "\r\n" .</p> 
 <p>'City: ' . $city . "\r\n" .</p> 
 <p>'State: ' . $state . "\r\n" .</p> 
 <p>'Phone: ' . $phone . "\r\n" .</p> 
 <p>'Ext.: ' . $ext . "\r\n" .</p> 
 <p>'Fax: ' . $fax . "\r\n\r\n";</p> 
 <p>$message .=</p> 
 <p>'### Job Description ###' . "\r\n\r\n" .</p> 
 <p>'Job Title: ' . $job_title . "\r\n" .</p> 
 <p>'Positions: ' . $positions . "\r\n" .</p> 
 <p>'Hours: ' . $hours . "\r\n" .</p> 
 <p>'Age: ' . $age . "\r\n" .</p> 
 <p>'Wage: ' . $wage . ' - ' . $wage_type . "\r\n" .</p> 
 <p>'Job Description: ' . $job_description . "\r\n" .</p> 
 <p>'Comments: ' . $comments;</p> 
 <p>mail($to, $subject, $message, $headers);</p> 
 <p>I'm setting that because I'm using a modal window plugin to display the form, this way I get the right scope.</p> 
 <p>The main problem is that when I click submit the email gets in my inbox just fine but it always executes the error function and not the success one.</p> 
 <p>This is driving me nuts, I looked EVERYWHERE for answers with no luck.</p> 
 <p>I got the success callback a couple times but now it doesn't work anymore and I don't know why. I'm getting the email just fine...</p> 
 <p>I checked the response headers with Chrome Developer tools and I get 200 OK so it's getting back. What is the problem?</p> 
 <p>EDIT: Well, I give up for today after 5 hours trying. I might come back tomorrow and try other things. I'll just use complete for now, which works fine. I'm thinking it could be related to the server. The client is using IIS...</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3bb371a86d06f2f292521d2284802793/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ajax post 空格变加号,Ajax Post数据加号变空格详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/65081f86ebeafc350b4831f285a836f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">smb&#43;服务器&#43;修复,关于SMBv3.0服务远程代码执行漏洞的风险提示及修复方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
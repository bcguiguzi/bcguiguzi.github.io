<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何在C＃中使用数据注释 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何在C＃中使用数据注释" />
<meta property="og:description" content="数据批注（作为System。ComponentModel。DataAnnotations命名空间的一部分提供）是可以应用于类或类成员的属性，以指定类之间的关系，描述如何在UI中显示数据以及指定验证规则。 本文讨论数据注释，为什么有用，以及如何在我们的.NET Core应用程序中使用它们。 若要使用本文提供的代码示例，您应该在系统中安装Visual Studio 2019。 如果您还没有副本，则可以在此处下载Visual Studio 2019 。 [ 同样在InfoWorld上：隔离期间最好的免费编程课程 ] 在Visual Studio 2019中创建控制台应用程序项目 首先，让我们在Visual Studio中创建一个.NET Core Console Application项目。 假设系统中已安装Visual Studio 2019，请按照以下概述的步骤在Visual Studio中创建新的.NET Core控制台应用程序项目。 启动Visual Studio IDE。 点击“创建新项目”。 在“创建新项目”窗口中，从显示的模板列表中选择“控制台应用程序（.NET Core）”。 点击下一步。 在接下来显示的“配置新项目”窗口中，指定新项目的名称和位置。 单击创建。 这将在Visual Studio 2019中创建一个新的.NET Core控制台应用程序项目。在本文的后续部分中，我们将使用该项目来处理数据注释。 包括系统。 ComponentModel。 DataAnnotations名称空间 要使用本文给出的代码示例，您应该包括系统。 ComponentModel。 程序中的DataAnnotations命名空间。 请注意，属性用于指定类或属性上的元数据。 数据注释属性可以大致分为以下几类： 验证属性-用于对实体的属性实施验证规则 显示属性-用于指定应如何在用户界面中显示数据 建模属性-用于指定类之间存在的关系 C＃中的数据注释属性类 System.ComponentModel.Annotations命名空间包含几个属性类，这些属性类可用于为您的实体类或数据控件定义元数据。 最常用的属性包括： 并发检查 键 最长长度 需要 字符串长度 时间戳记 C＃中的数据注释示例 在我们之前创建的控制台应用程序中的Author.cs文件中创建以下类。 public class Author
{
[Required(ErrorMessage = &#34;{0} is required&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/e65ae015a2bd4d9ad268e39a41d5106b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-05T00:18:30+08:00" />
<meta property="article:modified_time" content="2020-07-05T00:18:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何在C＃中使用数据注释</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="drr-container" class="cat " style="font-size: 16px;"> 
 <p> 数据批注（作为System。ComponentModel。DataAnnotations命名空间的一部分提供）是可以应用于类或类成员的属性，以指定类之间的关系，描述如何在UI中显示数据以及指定验证规则。 本文讨论数据注释，为什么有用，以及如何在我们的.NET Core应用程序中使用它们。 </p> 
 <p> 若要使用本文提供的代码示例，您应该在系统中安装Visual Studio 2019。 如果您还没有副本，则可以<a href="https://visualstudio.microsoft.com/downloads/" rel="nofollow">在此处下载Visual Studio 2019</a> 。 </p> 
 <p class="fakesidebar"></p> 
 <h5> <span style="font-weight: bold;">[ <u><a href="https://www.infoworld.com/article/3541351/the-best-free-programming-courses-during-quarantine.html" rel="nofollow">同样在InfoWorld上：隔离期间最好的免费编程课程</a></u> ]</span> </h5> 
 <h3> <span style="font-weight: bold;">在Visual Studio 2019中创建控制台应用程序项目</span> </h3> 
 <p> 首先，让我们在Visual Studio中创建一个.NET Core Console Application项目。 假设系统中已安装Visual Studio 2019，请按照以下概述的步骤在Visual Studio中创建新的.NET Core控制台应用程序项目。 </p> 
 <ol><li> 启动Visual Studio IDE。 </li><li> 点击“创建新项目”。 </li><li> 在“创建新项目”窗口中，从显示的模板列表中选择“控制台应用程序（.NET Core）”。 </li><li> 点击下一步。 </li><li> 在接下来显示的“配置新项目”窗口中，指定新项目的名称和位置。 </li><li> 单击创建。 </li></ol> 
 <p> 这将在Visual Studio 2019中创建一个新的.NET Core控制台应用程序项目。在本文的后续部分中，我们将使用该项目来处理数据注释。 </p> 
 <h3> <span style="font-weight: bold;">包括系统。</span> <span style="font-weight: bold;">ComponentModel。</span> <span style="font-weight: bold;">DataAnnotations名称空间</span> </h3> 
 <p> 要使用本文给出的代码示例，您应该包括系统。 ComponentModel。 程序中的DataAnnotations命名空间。 </p> 
 <p> 请注意，属性用于指定类或属性上的元数据。 数据注释属性可以大致分为以下几类： </p> 
 <p class="nativo-promo nativo-promo-1 smartphone" id=""></p> 
 <ul><li> 验证属性-用于对实体的属性实施验证规则 </li><li> 显示属性-用于指定应如何在用户界面中显示数据 </li><li> 建模属性-用于指定类之间存在的关系 </li></ul> 
 <h3> <span style="font-weight: bold;">C＃中的数据注释属性类</span> </h3> 
 <p> System.ComponentModel.Annotations命名空间包含几个属性类，这些属性类可用于为您的实体类或数据控件定义元数据。 最常用的属性包括： </p> 
 <div id="sponsoredfakesidebardiv" class="fakesidebar fakesidebar-auto fakesidebar-sponsored"></div> 
 <ul><li> 并发检查 </li><li> 键 </li><li> 最长长度 </li><li> 需要 </li><li> 字符串长度 </li><li> 时间戳记 </li></ul> 
 <h3> <span style="font-weight: bold;">C＃中的数据注释示例</span> </h3> 
 <p> 在我们之前创建的控制台应用程序中的Author.cs文件中创建以下类。 </p> 
 <p class="nativo-promo nativo-promo-1 tablet desktop" id=""></p> 
 <pre class="has"><code>public class Author<br>    {<!-- --><br>        [Required(ErrorMessage = "{0} is required")]<br>        [StringLength(50, MinimumLength = 3,<br>        ErrorMessage = "First Name should be minimum 3 characters and a maximum of 50 characters")]<br>        [DataType(DataType.Text)]<br>        public string FirstName { get; set; }<br>        [Required(ErrorMessage = "{0} is required")]<br>        [StringLength(50, MinimumLength = 3,<br>        ErrorMessage = "Last Name should be minimum 3 characters and a maximum of 50 characters")]<br>        [DataType(DataType.Text)]<br>        public string LastName { get; set; }<br>        [DataType(DataType.PhoneNumber)]<br>        [Phone]<br>        public string PhoneNumber { get; set; }<br>        [DataType(DataType.EmailAddress)]<br>        [EmailAddress]<br>        public string Email { get; set; }<br>    }</code></pre> 
 <p> 下面的代码段说明了如何创建Author类的实例并为其属性分配值。 </p> 
 <pre class="has"><code>Author author = new Author();<br>author.FirstName = "Joydip";<br>author.LastName = "";<br>author.PhoneNumber = "1234567890";<br>author.Email = "joydipkanjilal@yahoo.com";</code></pre> 
 <p> 您可以在Program.cs文件的Main方法中编写以下代码片段以验证模型。 </p> 
 <pre class="has"><code>ValidationContext context = new ValidationContext(author, null, null);<br>List&lt;ValidationResult&gt; validationResults = new List&lt;ValidationResult&gt;();<br>bool valid = Validator.TryValidateObject(author, context, validationResults, true);<br>if (!valid)<br>{<!-- --><br>  foreach (ValidationResult validationResult in validationResults)<br>  {<!-- --><br>       Console.WriteLine("{0}", validationResult.ErrorMessage);<br>  }<br>}</code></pre> 
 <p> ValidationContext是为您提供进行验证的上下文的类。 如果验证成功，则Validator类的TryValidateObject静态方法返回true，否则返回false。 它还返回ValidationResults的列表，其中详细列出了在模型上失败的所有验证。 最后，我们使用了foreach循环来迭代ValidationResults列表，并在控制台窗口中显示错误消息。 </p> 
 <p> 下面给出了完整的代码清单，供您参考。 </p> 
 <p class="nativo-promo nativo-promo-2 tablet desktop smartphone" id=""></p> 
 <pre class="has"><code>public class Author<br>    {<!-- --><br>        [Required(ErrorMessage = "{0} is required")]<br>        [StringLength(50, MinimumLength = 3,<br>        ErrorMessage = "First Name should be minimum 3 characters and a maximum of 50 characters")]<br>        [DataType(DataType.Text)]<br>        public string FirstName { get; set; }<br>        [Required(ErrorMessage = "{0} is required")]<br>        [StringLength(50, MinimumLength = 3,<br>        ErrorMessage = "Last Name should be minimum 3 characters and a maximum of 50 characters")]<br>        [DataType(DataType.Text)]<br>        public string LastName { get; set; }<br>        [DataType(DataType.PhoneNumber)]<br>        [Phone]<br>        public string PhoneNumber { get; set; }<br>        [DataType(DataType.EmailAddress)]<br>        [EmailAddress]<br>        public string Email { get; set; }<br>    }<br>    class Program<br>    {      <br>        static void Main(string[] args)<br>        {<!-- --><br>            Author author = new Author();<br>            author.FirstName = "Joydip";<br>            author.LastName = ""; //No value entered<br>            author.PhoneNumber = "1234567890";<br>            author.Email = "joydipkanjilal@yahoo.com";<br>            ValidationContext context = new ValidationContext<br>            (author, null, null);<br>            List&lt;ValidationResult&gt; validationResults = new<br>            List&lt;ValidationResult&gt;();<br>            bool valid = Validator.TryValidateObject<br>            (author, context, validationResults, true);<br>            if (!valid)<br>            {<!-- --><br>                foreach (ValidationResult validationResult in<br>                validationResults)<br>                {<!-- --><br>                    Console.WriteLine("{0}",<br>                    validationResult.ErrorMessage);<br>                }<br>            }<br>            Console.ReadKey();<br>        }<br>    }</code></pre> 
 <p> 执行程序时，您应该在控制台窗口中看到以下错误消息： </p> 
 <pre class="has"><code>LastName is required</code></pre> 
 <h3> <span style="font-weight: bold;">在C＃中创建自定义验证属性</span> </h3> 
 <p> 要创建自定义验证属性类，您应该扩展ValidationAttribute基类并覆盖IsValid方法，如下面给出的代码片段所示。 </p> 
 <pre class="has"><code>[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = false)]<br>public class IsEmptyAttribute : ValidationAttribute<br> {<!-- --><br>    public override bool IsValid(object value)<br>     {<!-- --><br>         var inputValue = value as string;<br>         return !string.IsNullOrEmpty(inputValue);<br>     }<br> }</code></pre> 
 <p> 下面的代码段说明了如何使用定制属性来装饰Author类的FirstName和LastName属性。 </p> 
 <pre class="has"><code>[IsEmpty(ErrorMessage = "Should not be null or empty.")]<br>public string FirstName { get; set; }<br>[IsEmpty(ErrorMessage = "Should not be null or empty.")]<br>public string LastName { get; set; }</code></pre> 
 <p> 数据注释最初是在.NET 3.5中作为系统的一部分引入的。 ComponentModel。 DataAnnotations命名空间。 从那时起，它们已成为.NET中广泛使用的功能。 您可以利用数据注释在一个地方定义数据验证规则，从而避免一次又一次地重写相同的验证代码。 </p> 
 <p> 在以后的文章中，我们将研究如何在ASP.NET Core MVC应用程序中使用数据注释来执行模型验证。 </p> 
 <h4 class="body"> <span style="font-weight: bold;">如何在C＃中做更多</span> </h4> 
 <ul><li class="p1"> <a href="https://www.infoworld.com/article/2928719/when-to-use-an-abstract-class-vs-interface-in-csharp.html" rel="nofollow">何时在C＃中使用抽象类与接口</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3192900/how-to-work-with-automapper-in-csharp.html" rel="nofollow">如何在C＃中使用AutoMapper</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3516071/how-to-use-lambda-expressions-in-csharp.html" rel="nofollow">如何在C＃中使用Lambda表达式</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3057152/how-to-work-with-action-func-and-predicate-delegates-in-csharp.html" rel="nofollow">如何在C＃中与Action，Func和Predicate委托一起使用</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/2996770/how-to-work-with-delegates-in-csharp.html" rel="nofollow">如何在C＃中与委托人一起工作</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/2980677/implement-a-simple-logger-in-csharp.html" rel="nofollow">如何在C＃中实现一个简单的记录器</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3006630/how-to-work-with-attributes-in-csharp.html" rel="nofollow">如何在C＃中使用属性</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3120909/how-to-work-with-log4net-in-csharp.html" rel="nofollow">如何在C＃中使用log4net</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3107186/how-to-implement-the-repository-design-pattern-in-csharp.html" rel="nofollow">如何在C＃中实现存储库设计模式</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3027240/how-to-work-with-reflection-in-csharp.html" rel="nofollow">如何在C＃中使用反射</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3185447/how-to-work-with-filesystemwatcher-in-csharp.html" rel="nofollow">如何在C＃中使用FileSystemWatcher</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3227207/how-to-perform-lazy-initialization-in-c.html" rel="nofollow">如何在C＃中执行延迟初始化</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3060115/how-to-work-with-msmq-in-c.html" rel="nofollow">如何在C＃中使用MSMQ</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3130492/how-to-work-with-extension-methods-in-c.html" rel="nofollow">如何在C＃中使用扩展方法</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3516071/how-to-use-lambda-expressions-in-csharp.html" rel="nofollow">如何在C＃中使用Lambda表达式</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3229360/when-to-use-the-volatile-keyword-in-c.html" rel="nofollow">何时在C＃中使用volatile关键字</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3122592/my-two-cents-on-the-yield-keyword-in-c.html" rel="nofollow">如何在C＃中使用yield关键字</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3024718/how-to-implement-polymorphism-in-c.html" rel="nofollow">如何在C＃中实现多态</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3063560/how-to-build-your-own-task-scheduler-in-csharp.html" rel="nofollow">如何在C＃中构建自己的任务计划程序</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3200210/how-to-work-with-rabbitmq-in-c.html" rel="nofollow">如何在C＃中使用RabbitMQ</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/3095242/how-to-work-with-a-tuple-in-c.html" rel="nofollow">如何在C＃中使用元组</a> </li><li class="p1"> <a href="https://www.infoworld.com/article/2895408/exploring-virtual-and-abstract-methods-in-csharp.html" rel="nofollow">探索C＃中的虚拟和抽象方法</a> </li></ul> 
 <div class="end-note"> 
   
  <div id="" class="blx blxParticleendnote blxM2002  blox4_html  blxC24991"></div> 
 </div> 
 <blockquote> 
  <p>翻译自: <a href="https://www.infoworld.com/article/3543302/how-to-use-data-annotations-in-csharp.html" rel="nofollow">https://www.infoworld.com/article/3543302/how-to-use-data-annotations-in-csharp.html</a></p> 
 </blockquote> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4d72f632cd50cc0055584f374336a2a9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ROS实战之重定位——NDT</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/42e9e7ee85fbe390452adb0940240762/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">说说什么是函数式编程思维</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>复杂网络研究中的SIR传播模型（Python实现） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="复杂网络研究中的SIR传播模型（Python实现）" />
<meta property="og:description" content="复杂网络研究中的传播模型SIR的Python实现 SIR应用 SIR import random &#39;&#39;&#39; 程序主要功能 输入：网络图邻接矩阵，需要被设置为感染源的节点序列，感染率，免疫率，迭代次数step 输出：被设置为感染源的节点序列的SIR感染情况---每次的迭代结果（I&#43;R）/n &#39;&#39;&#39; def update_node_status(graph, node, beta, gamma): &#34;&#34;&#34; 更新节点状态 :param graph: 网络图 :param node: 节点序数 :param beta: 感染率 :param gamma: 免疫率 &#34;&#34;&#34; # 如果当前节点状态为 感染者(I) 有概率gamma变为 免疫者(R) if graph.nodes[node][&#39;status&#39;] == &#39;I&#39;: p = random.random() if p &lt; gamma: graph.nodes[node][&#39;status&#39;] = &#39;R&#39; # 如果当前节点状态为 易感染者(S) 有概率beta变为 感染者(I) if graph.nodes[node][&#39;status&#39;] == &#39;S&#39;: # 获取当前节点的邻居节点 # 无向图：G.neighbors(node) # 有向图：G.predecessors(node)，前驱邻居节点，即指向该节点的节点；G.successors(node)，后继邻居节点，即该节点指向的节点。 neighbors = list(graph.predecessors(node)) # 对当前节点的邻居节点进行遍历 for neighbor in neighbors: # 邻居节点中存在 感染者(I)，则该节点有概率被感染为 感染者(I) if graph." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/cfb341e46aacc930b8ac5aec4bab0a1a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-08T13:45:02+08:00" />
<meta property="article:modified_time" content="2022-05-08T13:45:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">复杂网络研究中的SIR传播模型（Python实现）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>复杂网络研究中的传播模型SIR的Python实现</h4> 
 <ul><li><ul><li><a href="#SIR_1" rel="nofollow">SIR</a></li><li><a href="#_87" rel="nofollow">应用</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="SIR_1"></a>SIR</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> random

<span class="token triple-quoted-string string">'''
程序主要功能
输入：网络图邻接矩阵，需要被设置为感染源的节点序列，感染率，免疫率，迭代次数step
输出：被设置为感染源的节点序列的SIR感染情况---每次的迭代结果（I+R）/n
'''</span>


<span class="token keyword">def</span> <span class="token function">update_node_status</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> node<span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    更新节点状态
    :param graph: 网络图
    :param node: 节点序数
    :param beta: 感染率
    :param gamma: 免疫率
    """</span>
    <span class="token comment"># 如果当前节点状态为 感染者(I) 有概率gamma变为 免疫者(R)</span>
    <span class="token keyword">if</span> graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'I'</span><span class="token punctuation">:</span>
        p <span class="token operator">=</span> random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> p <span class="token operator">&lt;</span> gamma<span class="token punctuation">:</span>
            graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'R'</span>
    <span class="token comment"># 如果当前节点状态为 易感染者(S) 有概率beta变为 感染者(I)</span>
    <span class="token keyword">if</span> graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'S'</span><span class="token punctuation">:</span>
        <span class="token comment"># 获取当前节点的邻居节点</span>
        <span class="token comment"># 无向图：G.neighbors(node)</span>
        <span class="token comment"># 有向图：G.predecessors(node)，前驱邻居节点，即指向该节点的节点；G.successors(node)，后继邻居节点，即该节点指向的节点。</span>
        neighbors <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>graph<span class="token punctuation">.</span>predecessors<span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment"># 对当前节点的邻居节点进行遍历</span>
        <span class="token keyword">for</span> neighbor <span class="token keyword">in</span> neighbors<span class="token punctuation">:</span>
            <span class="token comment"># 邻居节点中存在 感染者(I)，则该节点有概率被感染为 感染者(I)</span>
            <span class="token keyword">if</span> graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>neighbor<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'I'</span><span class="token punctuation">:</span>
                p <span class="token operator">=</span> random<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> p <span class="token operator">&lt;</span> beta<span class="token punctuation">:</span>
                    graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'I'</span>
                    <span class="token keyword">break</span>


<span class="token keyword">def</span> <span class="token function">count_node</span><span class="token punctuation">(</span>graph<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    计算当前图内各个状态节点的数目
    :param graph: 输入图
    :return: 各个状态（S、I、R）的节点数目
    """</span>
    s_num<span class="token punctuation">,</span> i_num<span class="token punctuation">,</span> r_num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>
    <span class="token keyword">for</span> node <span class="token keyword">in</span> graph<span class="token punctuation">:</span>
        <span class="token keyword">if</span> graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'S'</span><span class="token punctuation">:</span>
            s_num <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">elif</span> graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'I'</span><span class="token punctuation">:</span>
            i_num <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            r_num <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> s_num<span class="token punctuation">,</span> i_num<span class="token punctuation">,</span> r_num


<span class="token keyword">def</span> <span class="token function">SIR_network</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> source<span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma<span class="token punctuation">,</span> step<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    获得感染源的节点序列的SIR感染情况
    :param graph: networkx创建的网络
    :param source: 需要被设置为感染源的节点Id所构成的序列
    :param beta: 感染率
    :param gamma: 免疫率
    :param step: 迭代次数
    """</span>
    n <span class="token operator">=</span> graph<span class="token punctuation">.</span>number_of_nodes<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 网络节点个数</span>
    sir_values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 存储每一次迭代后网络中感染节点数I+免疫节点数R的总和</span>
    <span class="token comment"># 初始化节点状态</span>
    <span class="token keyword">for</span> node <span class="token keyword">in</span> graph<span class="token punctuation">:</span>
        graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'S'</span>  <span class="token comment"># 将所有节点的状态设置为 易感者（S）</span>
    <span class="token comment"># 设置初始感染源</span>
    <span class="token keyword">for</span> node <span class="token keyword">in</span> source<span class="token punctuation">:</span>
        graph<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'I'</span>  <span class="token comment"># 将感染源序列中的节点设置为感染源，状态设置为 感染者（I）</span>
    <span class="token comment"># 记录初始状态</span>
    sir_values<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token operator">/</span> n<span class="token punctuation">)</span>
    <span class="token comment"># 开始迭代感染</span>
    <span class="token keyword">for</span> s <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 针对对每个节点进行状态更新以完成本次迭代</span>
        <span class="token keyword">for</span> node <span class="token keyword">in</span> graph<span class="token punctuation">:</span>
            update_node_status<span class="token punctuation">(</span>graph<span class="token punctuation">,</span> node<span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma<span class="token punctuation">)</span>  <span class="token comment"># 针对node号节点进行SIR过程</span>
        s<span class="token punctuation">,</span> i<span class="token punctuation">,</span> r <span class="token operator">=</span> count_node<span class="token punctuation">(</span>graph<span class="token punctuation">)</span>  <span class="token comment"># 得到本次迭代结束后各个状态（S、I、R）的节点数目</span>
        sir <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">/</span> n  <span class="token comment"># 该节点的sir值为迭代结束后 感染节点数i+免疫节点数r</span>
        sir_values<span class="token punctuation">.</span>append<span class="token punctuation">(</span>sir<span class="token punctuation">)</span>  <span class="token comment"># 将本次迭代的sir值加入数组</span>
    <span class="token keyword">return</span> sir_values
</code></pre> 
<h3><a id="_87"></a>应用</h3> 
<ul><li> <p>更多应用请查看作者的其它博文 ！</p> </li><li> <p>计算n次独立实验中各方法SIR传播范围的平均值</p> <pre><code class="prism language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># 读取网络数据</span>
    <span class="token comment"># adj = np.loadtxt('adj.txt', dtype=np.int)  # 网络的邻接矩阵</span>
    <span class="token comment"># edges = np.loadtxt('edges.txt', dtype=str)  # 网络的邻接表/边列表</span>
    adj <span class="token operator">=</span> np<span class="token punctuation">.</span>loadtxt<span class="token punctuation">(</span><span class="token string">'adj.txt'</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token comment"># 网络的邻接矩阵</span>
    
    <span class="token comment"># 生成网络图（此处注意根据网络类型调整SIR代码中邻居节点的获取方式）</span>
    <span class="token comment"># 无向图：graph = nx.from_numpy_matrix(adj) </span>
    <span class="token comment"># 有向图：graph = nx.DiGraph(adj)</span>
    <span class="token comment"># 根据连边生成网络：</span>
    <span class="token comment"># 1. graph = nx.Graph()  # 生成网络图对象</span>
    <span class="token comment"># 2. graph.add_edges_from(edges)  # 添加连边</span>
    graph <span class="token operator">=</span> nx<span class="token punctuation">.</span>DiGraph<span class="token punctuation">(</span>adj<span class="token punctuation">)</span> <span class="token comment"># 创建有向图</span>
    metheds <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'多方法排序.csv'</span><span class="token punctuation">)</span>  <span class="token comment"># 多种方法(a,b,c,d)的排序结果</span>

    <span class="token comment"># 各方法的对应列</span>
    method_a <span class="token operator">=</span> metheds<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
    method_b <span class="token operator">=</span> metheds<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
    method_c <span class="token operator">=</span> metheds<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
    method_d <span class="token operator">=</span> metheds<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
	
	<span class="token triple-quoted-string string">'''
    初始化存储每次SIR传播范围的csv文件
    本代码中分别对Top-5,10,15的节点做实验
    '''</span>
    <span class="token keyword">for</span> top_k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'result/Top-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>top_k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' SIR.csv'</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>
        content <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>
        content<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">#写入文件列标题（各方法的名称）</span>
        <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Top-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>top_k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' SIR.csv 已初始化！'</span><span class="token punctuation">)</span>
    
	<span class="token triple-quoted-string string">'''
    进行n次实验取平均值
    '''</span>
    n <span class="token operator">=</span> <span class="token number">1000</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'第 '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' 次实验'</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> top_k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Top-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>top_k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'...'</span><span class="token punctuation">)</span>

            <span class="token comment"># SIR参数设置</span>
            beta <span class="token operator">=</span> <span class="token number">0.15</span>  <span class="token comment"># 感染率</span>
            gamma <span class="token operator">=</span> <span class="token number">0.5</span>  <span class="token comment"># 免疫率</span>
            step <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># 迭代次数</span>

			<span class="token comment"># top-k序列</span>
	        source_a <span class="token operator">=</span> method_a<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>top_k<span class="token punctuation">]</span>
	        source_b <span class="token operator">=</span> method_b<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>top_k<span class="token punctuation">]</span>
	        source_c <span class="token operator">=</span> method_c<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>top_k<span class="token punctuation">]</span>
	        source_d <span class="token operator">=</span> method_d<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>top_k<span class="token punctuation">]</span>
	
	        <span class="token comment"># Top-k节点的感染情况</span>
	        sir_a <span class="token operator">=</span> SIR_network<span class="token punctuation">(</span>graph<span class="token punctuation">,</span> source_a <span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma<span class="token punctuation">,</span> step<span class="token punctuation">)</span>
	        sir_b <span class="token operator">=</span> SIR_network<span class="token punctuation">(</span>graph<span class="token punctuation">,</span> source_b <span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma<span class="token punctuation">,</span> step<span class="token punctuation">)</span>
	        sir_c <span class="token operator">=</span> SIR_network<span class="token punctuation">(</span>graph<span class="token punctuation">,</span> source_c <span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma<span class="token punctuation">,</span> step<span class="token punctuation">)</span>
	        sir_d <span class="token operator">=</span> SIR_network<span class="token punctuation">(</span>graph<span class="token punctuation">,</span> source_d <span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma<span class="token punctuation">,</span> step<span class="token punctuation">)</span>

			<span class="token comment"># 存储每次实验的最终感染情况</span>
            <span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'result/Top-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>top_k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' SIR.csv'</span><span class="token punctuation">)</span>
            reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>
            original <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span>
            file1 <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'result/Top-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>top_k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' SIR.csv'</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>
            content <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>file1<span class="token punctuation">)</span>
            <span class="token comment"># 存储文件中的原始数据</span>
            <span class="token keyword">for</span> row <span class="token keyword">in</span> original<span class="token punctuation">:</span>
                content<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>row<span class="token punctuation">)</span>
            <span class="token comment"># 存储新数据</span>
            content<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span>sir_a<span class="token punctuation">[</span>step <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sir_b<span class="token punctuation">[</span>step <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sir_c<span class="token punctuation">[</span>step <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> sir_d<span class="token punctuation">[</span>step <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
            file1<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token triple-quoted-string string">'''
    输出n次实验的平均值
    '''</span>
    <span class="token keyword">for</span> top_k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        sir_results <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'result/Top-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>top_k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' SIR.csv'</span><span class="token punctuation">)</span>  <span class="token comment"># 多种方法的排序结果</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Top-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>top_k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' SIR(Average)'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>sir_results<span class="token punctuation">.</span>describe<span class="token punctuation">(</span>include<span class="token operator">=</span><span class="token string">'all'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>loc<span class="token punctuation">[</span><span class="token string">'mean'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 输出数据特征</span>
	```
</code></pre> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/635514d86809e546b015cc008d3c3087/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">字符串相乘（字符串,leetcode43）-------------------c&#43;&#43;实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/24b2c8d69aa29991cc647b57b5ca0b94/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何提取一个整数中各个位的数字（Java）？（求水仙花数）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
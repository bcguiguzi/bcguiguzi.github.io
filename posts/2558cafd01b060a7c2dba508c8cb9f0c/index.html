<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>初识Ajax - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="初识Ajax" />
<meta property="og:description" content="什么是AJAX，为什么要使用Ajax?
AJAX是异步的JavaScript和XML，是一种用于创建快速动态网页的技术，使用AJAX可以更新部分网页内容，是非常方便使用的在 Ajax应用中信息是通过XML数据或者字符串在浏览器和服务器之间传递的（json字符串居多）在浏览器端通过XMLHttpRequest对象的responseXMl属性，得到服务器端响应的XML数据。
AJAX优点： 最大的一点是页面无刷新，用户的体验非常好。使用异步方式与服务器通信，具有更加迅速的响应能力。可以把以前一些服务器负担的工作转嫁到客户端，利用客户端闲置的能力来处理，减轻服务器和带宽的负担，节约空间和宽带租用成本。并且减轻服务器的负担，ajax的原则是“按需取数据”，可以最大程度的减少冗余请求，和响应对服务器造成的负担。基于标准化的并被广泛支持的技术，不需要下载插件或者小程序。 AJAX缺点： ajax不支持浏览器back按钮。安全问题 AJAX暴露了与服务器交互的细节。对搜索引擎的支持比较弱。破坏了程序的异常机制。不容易调试。 AJAX应用和传统Web应用有什么不同？
传统的web前端与后端的交互中，浏览器直接访问Tomcat的Servlet来获取数据。Servlet通过转发把数据发送给浏览器。
当我们使用AJAX之后，浏览器是先把请求发送到XMLHttpRequest异步对象之中，异步对象对请求进行封装，然后再与发送给服务器。服务器并不是以转发的方式响应，而是以流的方式把数据返回给浏览器
XMLHttpRequest异步对象会不停监听服务器状态的变化，得到服务器返回的数据，就写到浏览器上【因为不是转发的方式，所以是无刷新就能够获取服务器端的数据】
ajax 的执行过程
创建XMLHttpRequest对象,也就是创建一个异步调用对象
创建一个新的HTTP请求,并指定该HTTP请求的方法、URL及验证信息
设置响应HTTP请求状态变化的函数
发送HTTP请求
获取异步调用返回的数据
使用JavaScript和DOM实现局部刷新
// 1.创建 ajax请求 依赖一个对象xhr对象 var xhr; if (window.XMLHttpRequest){// IE7&#43;, Firefox, Chrome, Opera, Safari xhr = new XMLHttpRequest(); } else{// IE6, IE5 xhr = new ActiveXObject(&#34;Microsoft.XMLHTTP&#34;); } //服务器响应：如需获得来自服务器的响应，请使用 XMLHttpRequest 对象的 responseText 或 responseXML 属性。	console.log(xhr) console.log(&#34;状态码:&#34; &#43; xhr.readyState) //0 1 2 3 4 console.log(&#34;响应码:&#34; &#43; xhr.status) console.log(&#34;响应的内容:&#34; &#43; xhr.responseText) //响应的文本 // 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/2558cafd01b060a7c2dba508c8cb9f0c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-24T15:23:50+08:00" />
<meta property="article:modified_time" content="2020-08-24T15:23:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">初识Ajax</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>什么是AJAX，为什么要使用Ajax?</strong><br> AJAX是异步的JavaScript和XML，是一种用于创建快速动态网页的技术，使用AJAX可以更新部分网页内容，是非常方便使用的在 Ajax应用中信息是通过XML数据或者字符串在浏览器和服务器之间传递的（json字符串居多）在浏览器端通过XMLHttpRequest对象的responseXMl属性，得到服务器端响应的XML数据。</p> 
<ul><li>AJAX优点： 
  <ul><li>最大的一点是页面无刷新，用户的体验非常好。</li><li>使用异步方式与服务器通信，具有更加迅速的响应能力。</li><li>可以把以前一些服务器负担的工作转嫁到客户端，利用客户端闲置的能力来处理，减轻服务器和带宽的负担，节约空间和宽带租用成本。并且减轻服务器的负担，ajax的原则是“按需取数据”，可以最大程度的减少冗余请求，和响应对服务器造成的负担。</li><li>基于标准化的并被广泛支持的技术，不需要下载插件或者小程序。</li></ul> </li><li>AJAX缺点：</li></ul> 
<ul><li>ajax不支持浏览器back按钮。</li><li>安全问题 AJAX暴露了与服务器交互的细节。</li><li>对搜索引擎的支持比较弱。</li><li>破坏了程序的异常机制。</li><li>不容易调试。</li></ul> 
<p><strong>AJAX应用和传统Web应用有什么不同？</strong><br> 传统的web前端与后端的交互中，浏览器直接访问Tomcat的Servlet来获取数据。Servlet通过转发把数据发送给浏览器。<br> 当我们使用AJAX之后，浏览器是先把请求发送到XMLHttpRequest异步对象之中，异步对象对请求进行封装，然后再与发送给服务器。服务器并不是以转发的方式响应，而是以流的方式把数据返回给浏览器<br> XMLHttpRequest异步对象会不停监听服务器状态的变化，得到服务器返回的数据，就写到浏览器上【因为不是转发的方式，所以是无刷新就能够获取服务器端的数据】</p> 
<p><strong>ajax 的执行过程</strong><br> 创建XMLHttpRequest对象,也就是创建一个异步调用对象<br> 创建一个新的HTTP请求,并指定该HTTP请求的方法、URL及验证信息<br> 设置响应HTTP请求状态变化的函数<br> 发送HTTP请求<br> 获取异步调用返回的数据<br> 使用JavaScript和DOM实现局部刷新</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 1.创建  ajax请求 依赖一个对象xhr对象</span>
		<span class="token keyword">var</span> xhr<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">// IE7+, Firefox, Chrome, Opera, Safari</span>
		  	xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span><span class="token comment">//  IE6, IE5</span>
		  xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//服务器响应：如需获得来自服务器的响应，请使用 XMLHttpRequest 对象的 responseText 或 responseXML 属性。	</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">)</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"状态码:"</span> <span class="token operator">+</span> xhr<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span> <span class="token comment">//0 1 2 3 4</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"响应码:"</span> <span class="token operator">+</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"响应的内容:"</span> <span class="token operator">+</span> xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>   <span class="token comment">//响应的文本</span>
		<span class="token comment">// 2.监听   监听xhr对象的状态变化   onreadystatechange</span>
		<span class="token comment">//onreadystatechange 事件：当请求被发送到服务器时，我们需要执行一些基于响应的任务。 每当 readyState 改变时，就会触发 onreadystatechange 事件。</span>
		xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">// console.log("状态码:" + xhr.readyState) </span>
			<span class="token comment">// // 4  表示完成</span>
			<span class="token comment">// console.log("响应码:" + xhr.status)</span>
			<span class="token comment">// console.log("响应的内容:" + xhr.responseText)</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   <span class="token comment">//表示ajax的请求已经发送完成，但是不知道成功还是失败</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   <span class="token comment">//前提条件是完成，此时是成功的状态</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
 
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 3.创建请求消息 建立连接</span>
		<span class="token comment">//xhr.open(method,url,async):规定请求的类型、URL 以及是否异步处理请求。</span>
		<span class="token comment">//method：请求的类型；GET 或 POST</span>
		<span class="token comment">//url：文件在服务器上的位置</span>
		<span class="token comment">//sync：true（异步）或 false（同步）</span>
		<span class="token comment">//同步和异步的区别</span>
			<span class="token comment">//同步：提交请求-&gt;等待服务器处理-&gt;处理完毕返回这个期间客户端浏览器不能干任何事</span>
			<span class="token comment">//当前只能做一件事，其他事情必须等当前的事情完成，才能继续后面的事情。</span>
			<span class="token comment">//异步:请求通过事件触发-&gt;服务器处理（这是浏览器仍然可以作其他事情）-&gt;处理完毕</span>
			<span class="token comment">//同时可以做多件事情</span>
		xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"02.php"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>
		<span class="token comment">// 状态有 0 -&gt; 1</span>

		<span class="token comment">// 4.发送请求消息要发送特定的请求，需要调用send()方法。</span>
		<span class="token comment">//它接受一个参数:请求主体发送的数据。</span>
		<span class="token comment">//如果不需要通过请求主体发送数据，则必须传入null，不能留空。</span>
		<span class="token comment">//请求主体：HTTP上行请求，有头部、主体。</span>
		<span class="token comment">//一般来说，GET请求是只有头部，没有主体</span>
		<span class="token comment">//而ＰＯＳＴ请求有请求主体。</span>
		<span class="token comment">//一但调用send()方法，HTTP上行请求就将发出。</span>
		xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span> <span class="token keyword">null</span> <span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4983008cce7fa53bce21ba8a1eff4903/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">二叉树的度以及基本概念</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f8e5c2ce9e685763459bfd7161c50eed/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">flutter如何实现点击事件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
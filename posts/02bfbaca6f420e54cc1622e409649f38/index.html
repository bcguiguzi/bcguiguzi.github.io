<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS下 rpm软件包的安装与卸载 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS下 rpm软件包的安装与卸载" />
<meta property="og:description" content="在 Linux 操作系统下，几乎所有的软件均通过RPM 进行安装、卸载及管理等操作。RPM 的全称为Redhat Package Manager ，是由Redhat 公司提出的，用于管理Linux 下软件包的软件。Linux 安装时，除了几个核心模块以外，其余几乎所有的模块均通过RPM 完成安装。RPM 有五种操作模式，分别为：安装、卸载、升级、查询和验证。
RPM 安装操作 命令：
rpm -i 需要安装的包文件名
举例如下：
rpm -i example.rpm 安装 example.rpm 包；
rpm -iv example.rpm 安装 example.rpm 包并在安装过程中显示正在安装的文件信息；
rpm -ivh example.rpm 安装 example.rpm 包并在安装过程中显示正在安装的文件信息及安装进度；
RPM 查询操作 命令：
rpm -q …
附加查询命令：
a 查询所有已经安装的包以下两个附加命令用于查询安装包的信息；
i 显示安装包的信息；
l 显示安装包中的所有文件被安装到哪些目录下；
s 显示安装版中的所有文件状态及被安装到哪些目录下；以下两个附加命令用于指定需要查询的是安装包还是已安装后的文件；
p 查询的是安装包的信息；
f 查询的是已安装的某文件信息；
举例如下：
rpm -qa | grep tomcat4 查看 tomcat4 是否被安装；
rpm -qip example.rpm 查看 example." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/02bfbaca6f420e54cc1622e409649f38/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-12T15:11:11+08:00" />
<meta property="article:modified_time" content="2023-10-12T15:11:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS下 rpm软件包的安装与卸载</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在 Linux 操作系统下，几乎所有的软件均通过RPM 进行安装、卸载及管理等操作。RPM 的全称为Redhat Package Manager ，是由Redhat 公司提出的，用于管理Linux 下软件包的软件。Linux 安装时，除了几个核心模块以外，其余几乎所有的模块均通过RPM 完成安装。RPM 有五种操作模式，分别为：安装、卸载、升级、查询和验证。</p> 
<h4>RPM 安装操作</h4> 
<p>命令：</p> 
<p>rpm -i 需要安装的包文件名</p> 
<p>举例如下：</p> 
<p>rpm -i example.rpm 安装 example.rpm 包；</p> 
<p>rpm -iv example.rpm 安装 example.rpm 包并在安装过程中显示正在安装的文件信息；</p> 
<p>rpm -ivh example.rpm 安装 example.rpm 包并在安装过程中显示正在安装的文件信息及安装进度；</p> 
<h4>RPM 查询操作</h4> 
<p>命令：</p> 
<p>rpm -q …</p> 
<p>附加查询命令：</p> 
<p>a 查询所有已经安装的包以下两个附加命令用于查询安装包的信息；</p> 
<p>i 显示安装包的信息；</p> 
<p>l 显示安装包中的所有文件被安装到哪些目录下；</p> 
<p>s 显示安装版中的所有文件状态及被安装到哪些目录下；以下两个附加命令用于指定需要查询的是安装包还是已安装后的文件；</p> 
<p>p 查询的是安装包的信息；</p> 
<p>f 查询的是已安装的某文件信息；</p> 
<p>举例如下：</p> 
<p>rpm -qa | grep tomcat4 查看 tomcat4 是否被安装；</p> 
<p>rpm -qip example.rpm 查看 example.rpm 安装包的信息；</p> 
<p>rpm -qif /bin/df 查看/bin/df 文件所在安装包的信息；</p> 
<p>rpm -qlf /bin/df 查看/bin/df 文件所在安装包中的各个文件分别被安装到哪个目录下；</p> 
<h4>RPM 卸载操作</h4> 
<p>命令：</p> 
<p>rpm -e 需要卸载的安装包</p> 
<p>在卸载之前，通常需要使用rpm -q …命令查出需要卸载的安装包名称。</p> 
<p>举例如下：</p> 
<p>rpm -e tomcat4 卸载 tomcat4 软件包</p> 
<h4>RPM 升级操作</h4> 
<p>命令：</p> 
<p>rpm -U 需要升级的包</p> 
<p>举例如下：</p> 
<p>rpm -Uvh example.rpm 升级 example.rpm 软件包</p> 
<h4>RPM 验证操作</h4> 
<p>命令：</p> 
<p>rpm -V 需要验证的包</p> 
<p>举例如下：</p> 
<p>rpm -Vf /etc/tomcat4/tomcat4.conf</p> 
<p>输出信息类似如下：</p> 
<p>S.5....T c /etc/tomcat4/tomcat4.conf</p> 
<p>其中，S 表示文件大小修改过，T 表示文件日期修改过。限于篇幅，更多的验证信息请您参考rpm 帮助文件：man rpm</p> 
<p>RPM 的其他附加命令</p> 
<p>--force 强制操作 如强制安装删除等；</p> 
<p>--requires 显示该包的依赖关系；</p> 
<p>--nodeps 忽略依赖关系并继续操作；</p> 
<p></p> 
<p>*******************************************************************************</p> 
<p></p> 
<h3>RPM包默认安装路径</h3> 
<p>通常情况下，RPM 包采用系统默认的安装路径，所有安装文件会按照类别分散安装到表 1 所示的目录中。<br>  </p> 
<table><caption>
   表 1 RPM 包默认安装路径 
 </caption><tbody><tr><th>安装路径</th><th>含 义</th></tr><tr><td>/etc/</td><td>配置文件安装目录</td></tr><tr><td>/usr/bin/</td><td>可执行的命令安装目录</td></tr><tr><td>/usr/lib/</td><td>程序所使用的函数库保存位置</td></tr><tr><td>/usr/share/doc/</td><td>基本的软件使用手册保存位置</td></tr><tr><td>/usr/share/man/</td><td>帮助文件保存位置</td></tr></tbody></table> 
<p><br> RPM 包的默认安装路径是可以通过命令查询的。<br><br> 除此之外，RPM 包也支持手动指定安装路径，但此方式并不推荐。因为一旦手动指定安装路径，所有的安装文件会集中安装到指定位置，且系统中用来查询安装路径的命令也无法使用（需要进行手工配置才能被系统识别），得不偿失。<br><br> 与 RPM 包不同，源码包的安装通常采用手动指定安装路径（习惯安装到 /usr/local/ 中）的方式。既然安装路径不同，同一 apache 程序的源码包和 RPM 包就可以安装到一台 <a href="http://c.biancheng.net/linux_tutorial/" rel="nofollow" title="Linux">Linux</a> 服务器上（但同一时间只能开启一个，因为它们需要占用同一个 80 端口）。<br><br> 实际情况中，一台服务器几乎不会同时包含两个 apache 程序，管理员不好管理，还会占用过多的服务器磁盘空间。</p> 
<h3>RPM 包的安装</h3> 
<p>安装 RPM 的命令格式为：</p> 
<p>[root@localhost ~]# rpm -ivh 包全名</p> 
<p>注意一定是包全名。涉及到包全名的命令，一定要注意路径，可能软件包在光盘中，因此需提前做好设备的挂载工作。<br><br> 此命令中各选项参数的含义为：</p> 
<ul><li>-i：安装（install）;</li><li>-v：显示更详细的信息（verbose）;</li><li>-h：打印 #，显示安装进度（hash）;</li></ul> 
<p><br> 例如，使用此命令安装 apache 软件包，如下所示：</p> 
<p>[root@localhost ~]# rpm -ivh \<br> /mnt/cdrom/Packages/httpd-2.2.15-15.el6.centos.1.i686.rpm<br> Preparing...<br> ####################<br> [100%]<br> 1:httpd<br> ####################<br> [100%]</p> 
<p>注意，直到出现两个 100% 才是真正的安装成功，第一个 100% 仅表示完成了安装准备工作。<br><br> 此命令还可以一次性安装多个软件包，仅需将包全名用空格分开即可，如下所示：</p> 
<p>[root@localhost ~]# rpm -ivh a.rpm b.rpm c.rpm</p> 
<p><br> 如果还有其他安装要求（比如强制安装某软件而不管它是否有依赖性），可以通过以下选项进行调整：</p> 
<ul><li>-nodeps：不检测依赖性安装。软件安装时会检测依赖性，确定所需的底层软件是否安装，如果没有安装则会报错。如果不管依赖性，想强制安装，则可以使用这个选项。注意，这样不检测依赖性安装的软件基本上是不能使用的，所以不建议这样做。</li><li>-replacefiles：替换文件安装。如果要安装软件包，但是包中的部分文件已经存在，那么在正常安装时会报"某个文件已经存在"的错误，从而导致软件无法安装。使用这个选项可以忽略这个报错而覆盖安装。</li><li>-replacepkgs：替换软件包安装。如果软件包已经安装，那么此选项可以把软件包重复安装一遍。</li><li>-force：强制安装。不管是否已经安装，都重新安装。也就是 -replacefiles 和 -replacepkgs 的综合。</li><li>-test：测试安装。不会实际安装，只是检测一下依赖性。</li><li>-prefix：指定安装路径。为安装软件指定安装路径，而不使用默认安装路径。</li></ul> 
<p><br> apache 服务安装完成后，可以尝试启动：</p> 
<p>[root@localhost ~]# service 服务名 start|stop|restart|status</p> 
<p>各参数含义：</p> 
<ul><li>start：启动服务；</li><li>stop：停止服务；</li><li>restart：重启服务；</li><li>status: 查看服务状态；</li></ul> 
<p><br> 例如：</p> 
<p>[root@localhost ~]# service httpd start #启动apache服务</p> 
<p><br> 服务启动后，可以查看端口号 80 是否出现。命令如下：</p> 
<p>[root@localhost ~]# netstat -tlun | grep 80<br> tcp 0 0 :::80:::* LISTEN</p> 
<p>也可以在浏览器中输入 Linux 服务器的 IP 地址，访问这个 apache 服务器。目前在 apache 中没有建立任何网页，所以看到的只是测试页。</p> 
<p><br> RPM包的升级</p> 
<p>使用如下命令即可实现 RPM 包的升级：</p> 
<p>[root@localhost ~]# rpm -Uvh 包全名</p> 
<p>-U（大写）选项的含义是：如果该软件没安装过则直接安装；若没安装则升级至最新版本。<br>  </p> 
<p>[root@localhost ~]# rpm -Fvh 包全名</p> 
<p>-F（大写）选项的含义是：如果该软件没有安装，则不会安装，必须安装有较低版本才能升级。</p> 
<h3>RPM包的卸载</h3> 
<p>RPM 软件包的卸载要考虑包之间的依赖性。例如，我们先安装的 httpd 软件包，后安装 httpd 的功能模块 mod_ssl 包，那么在卸载时，就必须先卸载 mod_ssl，然后卸载 httpd，否则会报错。</p> 
<p>软件包卸载和拆除大楼是一样的，本来先盖的 2 楼，后盖的 3 楼，那么拆楼时一定要先拆除 3 楼。</p> 
<p>如果卸载 RPM 软件不考虑依赖性，执行卸载命令会包依赖性错误，例如：</p> 
<p>[root@localhost ~]# rpm -e httpd<br> error: Failed dependencies:<br> httpd-mmn = 20051115 is needed by (installed) mod_wsgi-3.2-1.el6.i686<br> httpd-mmn = 20051115 is needed by (installed) php-5.3.3-3.el6_2.8.i686<br> httpd-mmn = 20051115 is needed by (installed) mod_ssl-1:2.2.15-15.el6.<br> centos.1.i686<br> httpd-mmn = 20051115 is needed by (installed) mod_perl-2.0.4-10.el6.i686<br> httpd = 2.2.15-15.el6.centos.1 is needed by (installed) httpd-manual-2.2.<br> 15-15.el6.centos.1 .noarch<br> httpd is needed by (installed) webalizer-2.21_02-3.3.el6.i686<br> httpd is needed by (installed) mod_ssl-1:2.2.15-15.el6.centos.1.i686<br> httpd=0:2.2.15-15.el6.centos.1 is needed by(installed)mod_ssl-1:2.2.15-15.el6.centos.1.i686</p> 
<p><br> RPM 软件包的卸载很简单，使用如下命令即可：</p> 
<p>[root@localhost ~]# rpm -e 包名</p> 
<p>-e 选项表示卸载，也就是 erase 的首字母。<br><br> RPM 软件包的卸载命令支持使用“-nocteps”选项，即可以不检测依赖性直接卸载，但此方式不推荐大家使用，因为此操作很可能导致其他软件也无法征程使用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e6e879ce9b44cb07d5d6ade9107dc9d4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java读取并转换字符串中的浮点数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/679549d0ee69756c7f0e75f35461cedd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PTrade获取当日n个季度前的日期所处季度的最后一天——时间相关函数4</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>deepin搭建cocos 2dx 4.0 开发环境 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="deepin搭建cocos 2dx 4.0 开发环境" />
<meta property="og:description" content="一、下载cocos源码 下载cocos 2dx 源码。下载完成后，将新增cocos2d-x-4.0.zip的问题，复制到工作目录。
二、编译源码 1、在工作目录解压源码。 unzip -x cocos2d-x-4.0.zip 2、安装开发依赖
cocos自带了依赖安装工具：install-deps-linux.sh。 但是其强制安装， 可能导致安装版本存在问题， 对其做如下修改： #!/bin/bash echo &#34;This Shell Script will install dependencies for cocos2d-x&#34; echo -n &#34;Are you continue? (y/n) &#34; read answer if echo &#34;$answer&#34; | grep -iq &#34;^y&#34; ;then echo &#34;It will take few minutes&#34; else exit fi sudo apt-get update # run 32bit applicatio: needed for lua relase mode as luajit has 32bit version # https://askubuntu.com/questions/454253/how-to-run-32-bit-app-in-ubuntu-64-bit sudo dpkg --add-architecture i386 DEPENDS=&#39;libc6:i386 libncurses5:i386 libstdc&#43;&#43;6:i386&#39; DEPENDS&#43;=&#39; libx11-dev&#39; DEPENDS&#43;=&#39; libxmu-dev&#39; DEPENDS&#43;=&#39; libglu1-mesa-dev&#39; DEPENDS&#43;=&#39; libgl2ps-dev&#39; DEPENDS&#43;=&#39; libxi-dev&#39; DEPENDS&#43;=&#39; libzip-dev&#39; DEPENDS&#43;=&#39; libpng-dev&#39; DEPENDS&#43;=&#39; libcurl4-gnutls-dev&#39; DEPENDS&#43;=&#39; libfontconfig1-dev&#39; DEPENDS&#43;=&#39; libsqlite3-dev&#39; DEPENDS&#43;=&#39; libglew-dev&#39; DEPENDS&#43;=&#39; libssl-dev&#39; DEPENDS&#43;=&#39; libgtk-3-dev&#39; DEPENDS&#43;=&#39; binutils&#39; sudo apt-get install --yes $DEPENDS 然后安装： cd cocos2d-x-4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/292c3c331d66eec96f2103263870b746/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-23T16:48:42+08:00" />
<meta property="article:modified_time" content="2023-06-23T16:48:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">deepin搭建cocos 2dx 4.0 开发环境</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、下载cocos源码</h2> 
<p>下载cocos 2dx <a class="link-info" href="https://www.cocos.com/cocos2dx-download" rel="nofollow" title="源码">源码</a>。下载完成后，将新增cocos2d-x-4.0.zip的问题，复制到工作目录。</p> 
<h2>二、编译源码</h2> 
<p>1、在工作目录解压源码。 </p> 
<pre><code class="language-bash">unzip -x cocos2d-x-4.0.zip</code></pre> 
<p>2、安装开发依赖</p> 
<p>cocos自带了依赖安装工具：install-deps-linux.sh。 但是其强制安装， 可能导致安装版本存在问题， 对其做如下修改： </p> 
<pre><code class="language-bash">#!/bin/bash

echo "This Shell Script will install dependencies for cocos2d-x" 
echo -n "Are you continue? (y/n) "
read answer
if echo "$answer" | grep -iq "^y" ;then
    echo "It will take few minutes"
else
    exit
fi

sudo apt-get update

# run 32bit applicatio: needed for lua relase mode as luajit has 32bit version
# https://askubuntu.com/questions/454253/how-to-run-32-bit-app-in-ubuntu-64-bit
sudo dpkg --add-architecture i386
DEPENDS='libc6:i386 libncurses5:i386 libstdc++6:i386'
 

DEPENDS+=' libx11-dev'
DEPENDS+=' libxmu-dev'
DEPENDS+=' libglu1-mesa-dev'
DEPENDS+=' libgl2ps-dev'
DEPENDS+=' libxi-dev'
DEPENDS+=' libzip-dev'
DEPENDS+=' libpng-dev'
DEPENDS+=' libcurl4-gnutls-dev'
DEPENDS+=' libfontconfig1-dev'
DEPENDS+=' libsqlite3-dev'
DEPENDS+=' libglew-dev'
DEPENDS+=' libssl-dev'
DEPENDS+=' libgtk-3-dev'
DEPENDS+=' binutils'

sudo apt-get install  --yes $DEPENDS</code></pre> 
<p>然后安装： </p> 
<pre><code class="language-bash">cd  cocos2d-x-4.0
bash  install-deps-linux.sh</code></pre> 
<p>如果存在问题， 那么修复对应依赖问题。</p> 
<p>3、编译</p> 
<pre><code class="language-bash">mkdir linux-build
cd linux-build
cmake ../</code></pre> 
<p>这时如果出现一下告警：</p> 
<pre><code class="language-bash">CMake Warning (dev) at /usr/share/cmake-3.22/Modules/FindOpenGL.cmake:315 (message):
  Policy CMP0072 is not set: FindOpenGL prefers GLVND by default when                                                                                                                                                
  available.  Run "cmake --help-policy CMP0072" for policy details.  Use the                                                                                                                                         
  cmake_policy command to set the policy and suppress this warning.                                                                                                                                                  
                                                                                                                                                                                                                     
  FindOpenGL found both a legacy GL library:                                                                                                                                                                         
                                                                                                                                                                                                                     
    OPENGL_gl_LIBRARY: /usr/lib/x86_64-linux-gnu/libGL.so                                                                                                                                                            
                                                                                                                                                                                                                     
  and GLVND libraries for OpenGL and GLX:                                                                                                                                                                            
                                                                                                                                                                                                                     
    OPENGL_opengl_LIBRARY: /usr/lib/x86_64-linux-gnu/libOpenGL.so                                                                                                                                                    
    OPENGL_glx_LIBRARY: /usr/lib/x86_64-linux-gnu/libGLX.so                                                                                                                                                          
                                                                                                                                                                                                                     
  OpenGL_GL_PREFERENCE has not been set to "GLVND" or "LEGACY", so for                                                                                                                                               
  compatibility with CMake 3.10 and below the legacy GL library will be used.                                                                                                                                        
Call Stack (most recent call first):                                                                                                                                                                                 
  cmake/Modules/CocosBuildHelpers.cmake:273 (find_package)                                                                                                                                                           
  cmake/Modules/CocosConfigDepend.cmake:16 (cocos_find_package)                                                                                                                                                      
  cmake/Modules/CocosConfigDepend.cmake:91 (cocos2dx_depend)                                                                                                                                                         
  cocos/CMakeLists.txt:131 (use_cocos2dx_libs_depend)                                                                                                                                                                
This warning is for project developers.  Use -Wno-dev to suppress it.   </code></pre> 
<p>这是GL版本版本导致的。 在<span style="color:#fe2c24;">$COCOS_HOME</span>/CmakeLists.txt中， 添加GL版本指定：</p> 
<pre><code class="language-bash"># set default minimum deployment target
if(XCODE)
    if(NOT DEFINED CMAKE_XCODE_ATTRIBUTE_IPHONEOS_DEPLOYMENT_TARGET)
        SET (CMAKE_XCODE_ATTRIBUTE_IPHONEOS_DEPLOYMENT_TARGET 8.0)
    endif()
endif()

if (POLICY CMP0072) 
  set(OpenGL_GL_PREFERENCE LEGACY)
endif()</code></pre> 
<p>重新到 <span style="color:#fe2c24;">$COCOS_HOME</span>/linux-build中执行：</p> 
<pre><code class="language-bash">cmake ../
make -j10</code></pre> 
<p>注意其中-j10是处理器数量， 根据编译机器填写。</p> 
<h2>三、添加环境变量</h2> 
<p>编译完成后, 在<span style="color:#fe2c24;">$COCOS_HOME/</span>tools/cocos2d-console/bin 存在相关工具。 </p> 
<p><img alt="" height="343" src="https://images2.imgbox.com/94/f4/9xAQvHTU_o.png" width="308"></p> 
<p>在~/.bashrc中添加如下内容： </p> 
<pre><code class="language-bash"># Add environment variable COCOS_CONSOLE_ROOT for cocos2d-x
export COCOS_HOME=/media/champ/110603F2110603F2/game/cocos2d-x-4.0
export COCOS_CONSOLE_ROOT=$COCOS_HOME/tools/cocos2d-console/bin
export PATH=$COCOS_CONSOLE_ROOT:$PATH

# Add environment variable COCOS_X_ROOT for cocos2d-x
export COCOS_X_ROOT="/media/champ/110603F2110603F2/game"
export PATH=$COCOS_X_ROOT:$PATH

# Add environment variable COCOS_TEMPLATES_ROOT for cocos2d-x
export COCOS_TEMPLATES_ROOT=$COCOS_HOME/templates
export PATH=$COCOS_TEMPLATES_ROOT:$PATH</code></pre> 
<h2></h2> 
<p>保存后， 在新的终端中可以查询到cocos的版本信息：</p> 
<p><img alt="" height="71" src="https://images2.imgbox.com/38/6d/1TR9NiMk_o.png" width="356"></p> 
<p></p> 
<h2> 四、创建cocos项目工程</h2> 
<p>在工作目录中， 使用:</p> 
<pre><code class="language-bash">cocos new ougame -p com.champ.mcc -l cpp -d ./</code></pre> 
<p>创建一个名为ougame 的项目， 项目结构如下： </p> 
<pre><code class="language-bash">.
├── Classes
│   ├── AppDelegate.cpp
│   ├── AppDelegate.h
│   ├── HelloWorldScene.cpp
│   └── HelloWorldScene.h
├── CMakeLists.txt
├── cocos2d
│   ├── AUTHORS
│   ├── CHANGELOG
│   ├── cmake
│   ├── CMakeLists.txt
│   ├── cocos
│   ├── CONTRIBUTING.md
│   ├── docs
│   ├── download-deps.py
│   ├── extensions
│   ├── external
│   ├── install-deps-linux.sh
│   ├── issue_template.md
│   ├── licenses
│   ├── README.md
│   └── tools
├── proj.android
│   ├── app
│   ├── build.gradle
│   ├── gradle
│   ├── gradle.properties
│   ├── gradlew
│   ├── gradlew.bat
│   └── settings.gradle
├── proj.ios_mac
│   ├── ios
│   └── mac
├── proj.linux
│   ├── CMakeCache.txt
│   ├── CMakeFiles
│   └── main.cpp
├── proj.win32
│   ├── build-cfg.json
│   ├── game.rc
│   ├── main.cpp
│   ├── main.h
│   ├── res
│   └── resource.h
└── Resources
    ├── CloseNormal.png
    ├── CloseSelected.png
    ├── fonts
    ├── HelloWorld.png
    └── res</code></pre> 
<h2>五、编译项目</h2> 
<p>按照顺序执行如下命令： </p> 
<pre><code class="language-bash">cd ougame/proj.linux

# 生成编译所需文件
cmake -G "Unix Makefiles" ../
# 编译
make -j10</code></pre> 
<p>在执行cmake时， 可能存在 “cmake --help-policy CMP0072"的问题， 安照之前的处理办法， 在ougame/CMakeLists.txt中做相同操作，就可以排除编译异常。</p> 
<p>编译完成后,在ougame/proj.linux/bin生成对应的二进制文件。</p> 
<p><img alt="" height="118" src="https://images2.imgbox.com/61/fb/A6KA2PpA_o.png" width="785"></p> 
<p> 该二进制文件可以直接运行。</p> 
<p>该项目， 可以直接使用vscode, clion,codeblocks等工具直接打开。</p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2df50cebde963e65546395c6ba42bc06/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于蒙特卡洛 8PSK 和和和 16PSK 调制（Matlab代码实现）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a41303d86de48c29e695e40277eef616/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Simulink】报错：Size mismatch (size [2 x 1] ~= size [1 x 1]). The size to the left is the size of the l</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>对线程控制 中 Sleep(0),和 Sleep(1)的 //对相关转帖的理解 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="对线程控制 中 Sleep(0),和 Sleep(1)的 //对相关转帖的理解" />
<meta property="og:description" content="说明：
笔者在 网上看到的对Sleep(0)的理解如下：
/*
本文来自CSDN博客，转载请标明出处：http://blog.csdn.net/burningcpu/archive/2008/09/20/2955275.aspx
Sleep(n)的作用是让当前线程睡眠n毫秒，以便执行其他线程，如果没有其他线程，那睡眠n毫秒后，继续执行。 而如果n=0，Sleep(0)是指CPU交出当前线程的执行权，让CPU去执行其他线程。也就是放弃当前线程的时间片，转而执行其他线程。
那么，Sleep(0)应该在那种情况下使用？ 一般来说，如果当前线程比较耗时比较占CPU资源，可以在结尾处加上Sleep(0), 这样效率会得到大大的提高。
另外，还可以用这种方法来保证线程同步，线城池工作时，主线程使用Sleep(0)来等待线程池里所有的线程都完成运行。当线程池线程非常多的时候，这种方法确实是一种非常有效的节省cpu的方式，因为它节省了在线程里使用内核来进行同步的开销。
*/
/* 转载MSDN：
Sleep The Sleep function suspends the execution of the current thread for a specified interval. VOID Sleep(DWORD dwMilliseconds // sleep time in milliseconds);Parameters dwMilliseconds Specifies the time, in milliseconds, for which to suspend execution. A value of zero causes the thread to relinquish the remainder of its time slice to any other thread of equal priority that is ready to run." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/27d272aab14230b87e333a6982c2d937/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-07-12T10:58:00+08:00" />
<meta property="article:modified_time" content="2010-07-12T10:58:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">对线程控制 中 Sleep(0),和 Sleep(1)的 //对相关转帖的理解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>说明：</p> 
<p>     笔者在 网上看到的对Sleep(0)的理解如下：</p> 
<p> </p> 
<p>/*</p> 
<p>    本文来自CSDN博客，转载请标明出处：<a href="http://blog.csdn.net/burningcpu/archive/2008/09/20/2955275.aspx">http://blog.csdn.net/burningcpu/archive/2008/09/20/2955275.aspx</a></p> 
<p>     Sleep(n)的作用是让当前线程睡眠n毫秒，以便执行其他线程，如果没有其他线程，那睡眠n毫秒后，继续执行。 <br>    而如果n=0，Sleep(0)是指CPU交出当前线程的执行权，让CPU去执行其他线程。也就是放弃当前线程的时间片，转而执行其他线程。</p> 
<p>    那么，Sleep(0)应该在那种情况下使用？ 一般来说，如果当前线程比较耗时比较占CPU资源，可以在结尾处加上Sleep(0), 这样效率会得到大大的提高。</p> 
<p>    另外，还可以用这种方法来保证线程同步，线城池工作时，主线程使用Sleep(0)来等待线程池里所有的线程都完成运行。当线程池线程非常多的时候，这种方法确实是一种非常有效的节省cpu的方式，因为它节省了在线程里使用内核来进行同步的开销。</p> 
<p>*/</p> 
<p> </p> 
<p>/* </p> 
<p>转载MSDN：</p> 
<h2><a name="_win32_sleep"></a>Sleep</h2> 
<p>The <strong>Sleep</strong> function suspends the execution of the current thread for a specified interval. </p> 
<pre><code><strong>VOID Sleep(
  DWORD</strong><em> dwMilliseconds</em>   // sleep time in milliseconds
<strong>);</strong>
 </code></pre> 
<h5>Parameters</h5> 
<dl> 
  
  <em>dwMilliseconds</em> 
  
 <dd>
   Specifies the time, in milliseconds, for which to suspend execution. A value of zero causes the thread to relinquish the remainder of its time slice to any other thread of equal priority that is ready to run. If there are no other threads of equal priority ready to run, the function returns immediately, and the thread continues execution. A value of INFINITE causes an infinite delay. 
 </dd> 
</dl> 
<h5>Return Values</h5> 
<p>This function does not return a value. </p> 
<h5>Remarks</h5> 
<p>A thread can relinquish the remainder of its time slice by calling this function with a sleep time of zero milliseconds. </p> 
<p><a href="http://topic.csdn.net/u/20080326/15/ad58ab73-550c-4855-a7e2-d3ea008a7b47.html" rel="nofollow"></a> </p> 
<p>*/</p> 
<p> </p> 
<p><strong><span style="font-size: medium;">笔者理解以及实际使用：</span></strong></p> 
<p><strong></strong> </p> 
<p>  【1】Sleep(0)正如 参数所示，在远小于1 ms 的时间片内允许其他线程调度CPU 的运行，而保留了绝大部分CPU时间片为本线程运   行</p> 
<p>  【2】换句话说就是Sleep(0)几乎掌控了所有CPU的使用权，而非让出CPU使用权。</p> 
<p> </p> 
<p>  【2】相反：Sleep(1)在参数非0 下，休眠1 ms并且极大的让出CPU使用权, 但可能正由于让出CPU使用权，使得本Sleep休眠控制的很不精准，可能相差几十 毫秒以上</p> 
<p>  【3】实例如下:</p> 
<p>   UINT thread_func(LPVOID lp)<br>   {<!-- --><br>    while(TRUE)<br>    {<!-- --></p> 
<p>       Sleep(0);</p> 
<p>    }</p> 
<p>   }</p> 
<p> </p> 
<p>   UINT thread_func(LPVOID lp)<br>   {<!-- --><br>    while(TRUE)<br>    {<!-- --></p> 
<p>       Sleep(1);</p> 
<p>    }</p> 
<p>   }<br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e28571964a492b00e581396b2a11114b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">10则哲理故事照亮你的前途</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce732d08e79b465feaec7753726c64bf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于基类指针、派生类指针、基类对象派、生类对象问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
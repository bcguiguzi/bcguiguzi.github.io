<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【微信小程序】-- 案例 - 自定义 tabBar（四十六） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【微信小程序】-- 案例 - 自定义 tabBar（四十六）" />
<meta property="og:description" content="💌 所属专栏：【微信小程序开发教程】 😀 作 者：我是夜阑的狗🐶 🚀 个人简介：一个正在努力学技术的CV工程师，专注基础和实战分享 ，欢迎咨询！
💖 欢迎大家：这里是CSDN，我总结知识的地方，喜欢的话请三连，有问题请私信 😘 😘 😘
文章目录 前言一、自定义 tabBar1、案例效果2、实现步骤3、渲染 tabBar 上的数字徽标4、实现tabBar 页面切换效果5、修改 tabBar 选中项文本的颜色值 总结 前言 大家好，又见面了，我是夜阑的狗🐶，本文是专栏【微信小程序开发教程】专栏的第46篇文章;
今天开始学习微信小程序的第28天💖💖💖，开启新的征程，记录最美好的时刻🎉，每天进步一点点。
专栏地址：【微信小程序开发教程】， 此专栏是我是夜阑的狗微信小程序开发过程的总结，希望能够加深自己的印象，以及帮助到其他的小伙伴😉😉。
如果文章有什么需要改进的地方还请大佬不吝赐教👏👏。
一、自定义 tabBar 前面已经介绍了分包-独立分包 &amp; 分包预下载，通过栗子学习了如何设置独立分包以及分包预下载。接下来就来根据前面学的知识，在案例 - 自定义 tabBar上进行实践。话不多说，让我们原文再续，书接上回吧。
1、案例效果 首先来看一下页面演示效果，页面中有下方标签栏是自定义 tabBar。自定义 tabBar 可以让开发者更加灵活地设置 tabBar 样式，以满足更多个性化的场景。
在此案例中，用到的主要知识点如下：
自定义组件Vant 组件库MobX 数据共享组件样式隔离组件数据监听器组件的 behaviorsVant 样式覆盖 2、实现步骤 首先来实现 tabBar 标签栏，自定义 tabBar 可分为 3 大步骤，分别是：
Step 1、配置信息 在 app.json 中的 tabBar 项指定 custom 字段，同时其余 tabBar 相关配置也补充完整。所有 tab 页的 json 里需声明 usingComponents 项，也可以在 app." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f0c0bd8a08b798c35b323c272306102c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-20T21:51:33+08:00" />
<meta property="article:modified_time" content="2023-03-20T21:51:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【微信小程序】-- 案例 - 自定义 tabBar（四十六）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/7b/c9/AmMWjCTw_o.gif" alt="请添加图片描述"></p> 
<blockquote> 
 <ul><li> <p><font size="3"> 💌 所属专栏：<a href="https://mp.csdn.net/mp_blog/manage/column/columnManage/12213394">【微信小程序开发教程】</a> </font></p> </li><li> <p><font size="3"> 😀 作  者：<a href="https://blog.csdn.net/csh1807266489?type=blog">我是夜阑的狗🐶</a> </font></p> </li><li> <p><font size="3"> 🚀 个人简介：一个正在努力学技术的CV工程师，专注基础和实战分享 ，欢迎咨询！</font></p> </li><li> <p><font size="3"> 💖 欢迎大家：这里是CSDN，我总结知识的地方，喜欢的话请三连，有问题请私信 😘 😘 😘</font></p> </li></ul> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_11" rel="nofollow">前言</a></li><li><a href="#_tabBar_23" rel="nofollow">一、自定义 tabBar</a></li><li><ul><li><ul><li><a href="#1_35" rel="nofollow">1、案例效果</a></li><li><a href="#2_57" rel="nofollow">2、实现步骤</a></li><li><a href="#3_tabBar__255" rel="nofollow">3、渲染 tabBar 上的数字徽标</a></li><li><a href="#4tabBar__422" rel="nofollow">4、实现tabBar 页面切换效果</a></li><li><a href="#5_tabBar__513" rel="nofollow">5、修改 tabBar 选中项文本的颜色值</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_568" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_11"></a>前言</h2> 
<p>  大家好，又见面了，我是夜阑的狗🐶，本文是专栏【微信小程序开发教程】专栏的第46篇文章;<br>   今天开始学习微信小程序的第28天💖💖💖，开启新的征程，记录最美好的时刻🎉，每天进步一点点。<br>   专栏地址：<a href="https://mp.csdn.net/mp_blog/manage/column/columnManage/12213394">【微信小程序开发教程】</a>， 此专栏是我是夜阑的狗微信小程序开发过程的总结，希望能够加深自己的印象，以及帮助到其他的小伙伴😉😉。<br>   如果文章有什么需要改进的地方还请大佬不吝赐教👏👏。</p> 
<hr> 
<h2><a id="_tabBar_23"></a>一、自定义 tabBar</h2> 
<p>  前面已经介绍了分包-独立分包 &amp; 分包预下载，通过栗子学习了如何设置独立分包以及分包预下载。接下来就来根据前面学的知识，在案例 - 自定义 tabBar上进行实践。话不多说，让我们原文再续，书接上回吧。</p> 
<p><img src="https://images2.imgbox.com/7f/ed/aK7yriW9_o.jpg" alt="请添加图片描述"></p> 
<h4><a id="1_35"></a>1、案例效果</h4> 
<p>  首先来看一下页面演示效果，页面中有下方标签栏是自定义 tabBar。自定义 tabBar 可以让开发者更加灵活地设置 tabBar 样式，以满足更多个性化的场景。</p> 
<p><img src="https://images2.imgbox.com/19/35/OD6Ng7Po_o.png" alt="在这里插入图片描述"></p> 
<p>  在此案例中，用到的主要知识点如下：</p> 
<ul><li>自定义组件</li><li>Vant 组件库</li><li>MobX 数据共享</li><li>组件样式隔离</li><li>组件数据监听器</li><li>组件的 behaviors</li><li>Vant 样式覆盖</li></ul> 
<h4><a id="2_57"></a>2、实现步骤</h4> 
<p>  首先来实现 tabBar 标签栏，自定义 <code>tabBar</code> 可分为 3 大步骤，分别是：</p> 
<ul><li><strong>Step 1、配置信息</strong></li></ul> 
<p>  在 <code>app.json</code> 中的 <code>tabBar</code> 项指定 <code>custom</code> 字段，同时其余 <code>tabBar</code> 相关配置也补充完整。所有 <code>tab</code> 页的 <code>json</code> 里需声明 <code>usingComponents</code> 项，也可以在 <code>app.json</code> 全局开启。</p> 
<p><strong>app.json</strong></p> 
<pre><code class="prism language-css"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"tabBar"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"custom"</span><span class="token punctuation">:</span> <span class="token selector">true,
    "list": [</span><span class="token punctuation">{<!-- --></span>
      <span class="token string">"pagePath"</span><span class="token punctuation">:</span> <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span>
      <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"首页"</span><span class="token punctuation">,</span>
      <span class="token string">"iconPath"</span><span class="token punctuation">:</span> <span class="token string">"/images/home.png"</span><span class="token punctuation">,</span>
      <span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span> <span class="token string">"/images/home-active.png"</span>
    <span class="token punctuation">}</span><span class="token selector">,</span><span class="token punctuation">{<!-- --></span>
      <span class="token string">"pagePath"</span><span class="token punctuation">:</span> <span class="token string">"pages/message/message"</span><span class="token punctuation">,</span>
      <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"消息"</span><span class="token punctuation">,</span>
      <span class="token string">"iconPath"</span><span class="token punctuation">:</span> <span class="token string">"/images/message.png"</span><span class="token punctuation">,</span>
      <span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span> <span class="token string">"/images/message-active.png"</span>
    <span class="token punctuation">}</span><span class="token selector">,</span><span class="token punctuation">{<!-- --></span>
      <span class="token string">"pagePath"</span><span class="token punctuation">:</span> <span class="token string">"pages/contact/contact"</span><span class="token punctuation">,</span>
      <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"联系夜阑"</span><span class="token punctuation">,</span>
      <span class="token string">"iconPath"</span><span class="token punctuation">:</span> <span class="token string">"/images/contact.png"</span><span class="token punctuation">,</span>
      <span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span> <span class="token string">"/images/contact-active.png"</span>
    <span class="token punctuation">}</span>]
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>  <font color="red" size="3"><strong>注意：当配置自定义 tarBar 页面时，list 属性不能删除，为了保证低版本兼容以及区分哪些页面是 tab 页，tabBar 的相关配置项需完整声明，但这些字段不会作用于自定义 tabBar 的渲染。</strong></font></p> 
</blockquote> 
<ul><li><strong>Step 2、添加 tabBar 代码文件</strong></li></ul> 
<p>  在代码根目录下添加入口文件，<strong>这里的<font color="red">文件夹名一定是</font> <code>custom-tab-bar</code>，然后在创建 <code>index</code> 组件（<font color="red">index命名也不能随便改，就用 index，否则无法识别</font>）</strong>。<br>   当 <code>custom</code> 参数为 <code>true</code> 时，小程序就会自动识别 <code>custom-tab-bar</code> 里面的文件，并将其渲染出来。</p> 
<p><img src="https://images2.imgbox.com/f5/b7/jSxpSEYa_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>Step 3、编写 tabBar 代码</strong></li></ul> 
<p>  用自定义组件的方式编写即可，该自定义组件完全接管 <code>tabBar</code> 的渲染。另外，自定义组件新增 <code>getTabBar</code> 接口，可获取当前页面下的自定义 <code>tabBar</code> 组件实例。这里使用 <a href="https://youzan.github.io/vant-weapp/#/tabbar" rel="nofollow">Vant Weapp</a> 底部导航栏，用于在不同页面之间进行切换。</p> 
<p><strong>1、引入</strong></p> 
<p>  在 <code>app.json</code> 或 <code>index.json</code> 中引入组件，这里对组件进行<font color="red"><strong>全局引用</strong></font>，具体代码如下所示：</p> 
<p><strong>app.json</strong></p> 
<pre><code class="prism language-css"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"usingComponents"</span><span class="token punctuation">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token string">"my-test1"</span><span class="token punctuation">:</span> <span class="token string">"/components/test1/test1"</span><span class="token punctuation">,</span>
    <span class="token string">"my-test2"</span><span class="token punctuation">:</span> <span class="token string">"/components/test2/test2"</span><span class="token punctuation">,</span>
    <span class="token string">"my-test3"</span><span class="token punctuation">:</span> <span class="token string">"/components/test3/test3"</span><span class="token punctuation">,</span>
    <span class="token string">"my-test4"</span><span class="token punctuation">:</span> <span class="token string">"/components/test4/test4"</span><span class="token punctuation">,</span>
    <span class="token string">"my-test5"</span><span class="token punctuation">:</span> <span class="token string">"/components/test5/test5"</span><span class="token punctuation">,</span>
    <span class="token string">"van-button"</span><span class="token punctuation">:</span> <span class="token string">"@vant/weapp/button/index"</span><span class="token punctuation">,</span>
    <span class="token string">"my-numbers"</span><span class="token punctuation">:</span> <span class="token string">"./components/numbers/numbers"</span><span class="token punctuation">,</span>
    <span class="token string">"van-tabbar"</span><span class="token punctuation">:</span> <span class="token string">"@vant/weapp/tabbar/index"</span><span class="token punctuation">,</span>
    <span class="token string">"van-tabbar-item"</span><span class="token punctuation">:</span> <span class="token string">"@vant/weapp/tabbar-item/index"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>2、基础用法</strong></p> 
<p><strong>index.wxml</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ active }}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChange<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home-o<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>标签<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>标签<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>friends-o<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>标签<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>setting-o<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>标签<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>index.js</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// event.detail 的值为当前选中项的索引</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">active</span><span class="token operator">:</span> event<span class="token punctuation">.</span>detail <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  可以来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/19/d5/NktQFtye_o.png" alt="在这里插入图片描述"></p> 
<p><strong>3、自定义图标</strong></p> 
<p>  知道怎么引用 <code>Vant</code> 组件之后，接下来就根据需求来对其进行修改，可以通过 <code>slot</code> 自定义图标，其中 <code>icon slot</code> 代表未选中状态下的图标，<code>icon-active slot</code> 代表选中状态下的图标。来看一下 <code>vant</code> 提供的参数 <code>TabbarItem Slot</code>：</p> 
<table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>icon</td><td>未选中时的图标</td></tr><tr><td>icon-active</td><td>选中时的图标</td></tr></tbody></table> 
<p><strong>index.wxml</strong></p> 
<p>  通过 <code>wx: for</code> 将标签栏渲染到页面上。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{active}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChange<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{list}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.iconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon-active<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.selectedIconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    {<!-- -->{item.text}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>index.js</strong></p> 
<p>  将 <code>app.json</code> 里的 <code>list</code> 数组放在自定义 <code>tabBar</code> 组件中的 <code>data</code> 数据，然后通过循环渲染到页面上。</p> 
<pre><code class="prism language-javascript"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"text"</span><span class="token operator">:</span> <span class="token string">"首页"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/home.png"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/home-active.png"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/message/message"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"text"</span><span class="token operator">:</span> <span class="token string">"消息"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/message.png"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/message-active.png"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/contact/contact"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"text"</span><span class="token operator">:</span> <span class="token string">"联系夜阑"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/contact.png"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/contact-active.png"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// event.detail 的值为当前选中项的索引</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">active</span><span class="token operator">:</span> event<span class="token punctuation">.</span>detail <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  此时可以看到已经成功把 list 数组里的图片都渲染出来了，来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/e4/6f/rXsGLAuU_o.png" alt="在这里插入图片描述"></p> 
<p>  详细步骤，可以参考小程序官方给出的 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html" rel="nofollow">文档</a> 。</p> 
<h4><a id="3_tabBar__255"></a>3、渲染 tabBar 上的数字徽标</h4> 
<ul><li><strong>渲染数字徽标</strong></li></ul> 
<p>  通过 van-tabbar-item 上 info 属性可以对 tabBar 渲染数字，具体代码如下所示：</p> 
<p><strong>index.wxml</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{active}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChange<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{list}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.iconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon-active<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.selectedIconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    {<!-- -->{item.text}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  可以看当对 tabBar 加上数字徽标时，就溢出 tabBar 页面范围。此时需要美化 tabBar 页面， 通过调试器可以看到，图标与标签名中间有间隔。</p> 
<p><img src="https://images2.imgbox.com/8c/3a/ed3LwV7G_o.png" alt="在这里插入图片描述"></p> 
<p>  在网页开发中，橘黄色的部分代表 margin 。</p> 
<p><img src="https://images2.imgbox.com/17/ee/wO2NmBQt_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>美化样式</strong></li></ul> 
<p>  从上图可以发现，<code>margin-bottom: var(--tabbar-item-margin-bottom,5px);</code>，其中 <code>var</code> 是css中用来引用变量的，当 <code>--tabbar-item-margin-bottom</code> 不存在的时候，就默认为 5px。所以只要重置其 <code>margin-bottom</code> 的值，数字徽标就不会超出 tabBar 范围。</p> 
<p><strong>index.wxss</strong></p> 
<pre><code class="prism language-css"><span class="token selector">.van-tabbar-item</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">--tabbar-item-margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><font color="red" size="3"><strong>注意：在自定义组件中使用 Vant Weapp 组件时，需开启 styleIsolation: ‘shared’ 选项</strong></font></p> 
</blockquote> 
<p><strong>index.js</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">'shared'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>  可以来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/a1/15/mb1CpZzz_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>按需添加数字徽标</strong></li></ul> 
<p>  在实际开发过程中，并不是所以图标都需要添加数字徽标的，所以不能 info 属性将其写死。这里需要把 store 里面的数据绑定组件中进行使用，然后通过数据监听器将数据变化传到数字图标上，具体代码如下所示：</p> 
<p><strong>index.wxml</strong></p> 
<p>  通过判断是否有 info 属性来显示该数字图标，当 info 属性不存在或者为 0 的时候都不显示。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{active}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChange<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{list}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{item.info ? item.info : <span class="token punctuation">'</span><span class="token punctuation">'</span>}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.iconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon-active<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.selectedIconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    {<!-- -->{item.text}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>index.js</strong></p> 
<p>  在消息图标后添加 info 属性。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// custom-tab-bar/index.js</span>
<span class="token comment">// 导入</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>storeBindingsBehavior<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-miniprogram-bindings'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>store<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/store'</span>

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 挂载</span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>storeBindingsBehavior<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 全局数据操作</span>
  <span class="token literal-property property">storeBindings</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    store<span class="token punctuation">,</span>
    <span class="token literal-property property">fields</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token string">'sum'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 数据监听</span>
  <span class="token literal-property property">observers</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"sum"</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"list[1].info"</span><span class="token operator">:</span> value
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string-property property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"text"</span><span class="token operator">:</span> <span class="token string">"首页"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/home.png"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/home-active.png"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/message/message"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"text"</span><span class="token operator">:</span> <span class="token string">"消息"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/message.png"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/message-active.png"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">info</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/contact/contact"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"text"</span><span class="token operator">:</span> <span class="token string">"联系夜阑"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/contact.png"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/contact-active.png"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> 
<p>  可以看到对全局数据进行操作时，消息的数字徽标也会随着变化，运行效果如下所示：</p> 
<p><img src="https://images2.imgbox.com/3e/ec/FpyN4OUk_o.gif" alt="请添加图片描述"></p> 
<h4><a id="4tabBar__422"></a>4、实现tabBar 页面切换效果</h4> 
<p>  通过监听 <code>tabBar</code> 的 <code>change</code> 事件，得到当前选中项的索引，根据这个索引找到对应页面路径，最后用 <code>wx.switchTab</code> 进行页面跳转。</p> 
<p><strong>store.js</strong></p> 
<p>  不用在组件data 里面定义选中项的索引，不然会出现问题（<strong><font color="red">坑点</font></strong>），最好定义在 store 中，先在 store 定义变量和修改方法。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 需要挂载的数据 -- 数据字段</span>
  <span class="token literal-property property">numA</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">numB</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"我是夜阑的狗"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">activeTabBarIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算属性 -- get为修饰符</span>
  <span class="token keyword">get</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numA <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numB<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// actions 函数，专门来修改 store 中数据的值</span>
  <span class="token literal-property property">updateNum1</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">step</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>numA <span class="token operator">+=</span> step<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">updateNum2</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">step</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>numB <span class="token operator">+=</span> step<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">updateName</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">updateActiveTabBarIndex</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>activeTabBarIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>index.js</strong></p> 
<p>  将全局数据里的索引变量和修改方法挂载到组件中。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// custom-tab-bar/index.js</span>
<span class="token comment">// 导入</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>storeBindingsBehavior<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-miniprogram-bindings'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>store<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/store'</span>

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 挂载</span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>storeBindingsBehavior<span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// 全局数据操作</span>
  <span class="token literal-property property">storeBindings</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    store<span class="token punctuation">,</span>
    <span class="token literal-property property">fields</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token string">'sum'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token string">'activeTabBarIndex'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">updateActive</span><span class="token operator">:</span> <span class="token string">'updateActiveTabBarIndex'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// event.detail 的值为当前选中项的索引</span>
      <span class="token comment">// this.setData({ active: event.detail });</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateActive</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span><span class="token punctuation">;</span>
      wx<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">[</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">]</span><span class="token punctuation">.</span>pagePath<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> 
<blockquote> 
 <p><font color="red" size="3"><strong>注意：这里页面路径 一定要以斜线根路径开头，否则无法识别。</strong></font></p> 
</blockquote> 
<p>  可以来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/46/fd/zCR03LH9_o.gif" alt="请添加图片描述"></p> 
<h4><a id="5_tabBar__513"></a>5、修改 tabBar 选中项文本的颜色值</h4> 
<p>  最后就是来修改 tabBar 选中项文本的颜色值，来看一下 Vant 提供 tabBar 参数 Tabbar Props ：</p> 
<table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>默认值</th></tr></thead><tbody><tr><td>active</td><td>当前选中标签的索引</td><td>number</td><td>-</td></tr><tr><td>fixed</td><td>是否固定在底部</td><td>boolean</td><td>true</td></tr><tr><td>placeholder</td><td>固定在底部时，是否在标签位置<br>生成一个等高的占位元素</td><td>boolean</td><td>false</td></tr><tr><td>border</td><td>是否展示外边框</td><td>boolean</td><td>true</td></tr><tr><td>z-index</td><td>元素 z-index</td><td>number</td><td>1</td></tr><tr><td>active-color</td><td>选中标签的颜色</td><td>string</td><td>#1989fa</td></tr><tr><td>inactive-color</td><td>未选中标签的颜色</td><td>string</td><td>#7d7e80</td></tr><tr><td>safe-area-inset-bottom</td><td>是否为 iPhoneX 留出底部安全距离</td><td>boolean</td><td>true</td></tr></tbody></table> 
<p><strong>index.wxml</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar</span> <span class="token attr-name">active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{active}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChange<span class="token punctuation">"</span></span> <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>#13A7A0<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabbar-item</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{list}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">info</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{item.info ? item.info : <span class="token punctuation">'</span><span class="token punctuation">'</span>}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.iconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
      <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon-active<span class="token punctuation">"</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{ item.selectedIconPath }}<span class="token punctuation">"</span></span>
      <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span>
      <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span>
    <span class="token punctuation">/&gt;</span></span>
    {<!-- -->{item.text}}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  可以来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/40/a8/w1S1qMcb_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_568"></a>总结</h2> 
<p><strong>  感谢观看，这里就是案例 - 自定义 tabBar的介绍，如果觉得有帮助，请给文章点个赞吧，让更多的人看到。🌹 🌹 🌹</strong></p> 
<p><img src="https://images2.imgbox.com/e9/a3/5BmATftZ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>  也欢迎你，关注我。👍 👍 👍</strong></p> 
<p><strong>  原创不易，还希望各位大佬支持一下，你们的点赞、收藏和留言对我真的很重要！！！💕 💕 💕 最后，本文仍有许多不足之处，欢迎各位认真读完文章的小伙伴们随时私信交流、批评指正！下期再见。🎉</strong></p> 
<blockquote> 
 <p><strong><font size="4">更多专栏订阅: </font></strong><br> <br></p> 
 <ul><li>😀 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_12015189.html">【LeetCode题解（持续更新中）】</a></font></li><li>🚝 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_12015189.html">【Java Web项目构建过程】</a></font></li><li>💛 <font size="4"><a href="https://mp.csdn.net/mp_blog/manage/column/columnManage/12213394">【微信小程序开发教程】</a></font></li><li>⚽ <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_12011599.html">【JavaScript随手笔记】</a></font></li><li>🤩 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_11384853.html">【大数据学习笔记（华为云）】</a></font></li><li>🦄 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_9059817.html">【程序错误解决方法（建议收藏）】</a></font></li><li>🚀 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_9055931.html">【软件安装教程】</a></font></li></ul> 
 <p><br><br> <strong><font size="4">订阅更多，你们将会看到更多的优质内容！！</font></strong></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/771e57e378c04762ebb21d139b074156/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">神经网络中的注意力机制与外部记忆</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a5629e2ba981f08d653e8e91ed840304/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">端口扫描（X-scan）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
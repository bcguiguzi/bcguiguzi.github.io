<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>opencv入门 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="opencv入门" />
<meta property="og:description" content="目录 窗口显示cv::imshowcv::imreadcv::namedWindow cv::cvtColorcv::imwrite openCV图像对象创建与赋值opencv图像像素点读写操作数组遍历指针方式遍历像素范围处理saturate_cast &lt; uchar &gt;图像掩膜操作使用cv::filter2D 对图像进行掩膜处理 图像像素的算术操作 窗口显示 cv::imshow void cv::imshow ( const String &amp; winname,InputArray mat); imshow根据窗口名称显示图像到指定的窗口上去,第一个参数是窗口名称第二参数是Mat对象 #include &lt;opencv2/opencv.hpp&gt; #include &lt;iostream&gt; using namespace cv; using namespace std; int main() { cv::Mat src = imread(&#34;C:/Users/26961/Desktop/dog.jpg&#34;); if (src.empty()) { cout &lt;&lt; &#34;图图片未加载&#34; &lt;&lt; endl; return -1; } imshow(&#34;输入窗口&#34;, src); waitKey(0); //阻塞式等待 destroyAllWindows(); //销毁所有的窗口对象 return 0; } 并不能进行窗口的缩放，只是图片固定在创建的窗口上会固定尺寸
注意：
imread可以加载灰度图像 cv::imread imread(const string&amp; filename, int flags=1); imread功能是加载图像文件成为一个Mat对象,其中第一个参数表示图像文件名称。第二个参数,表示加载的图像是什么类型,支持常见的三个参数值
IMREAD_ UNCHANGED (&lt;0)表示加载原图，不做任何改变" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/a7c1f0da1f4169c2d27117e6f12541ce/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-12T13:33:09+08:00" />
<meta property="article:modified_time" content="2022-09-12T13:33:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">opencv入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">窗口显示</a></li><li><ul><li><a href="#cvimshow_3" rel="nofollow">cv::imshow</a></li><li><a href="#cvimread_36" rel="nofollow">cv::imread</a></li><li><a href="#cvnamedWindow_58" rel="nofollow">cv::namedWindow</a></li></ul> 
  </li><li><a href="#cvcvtColor_95" rel="nofollow">cv::cvtColor</a></li><li><ul><li><a href="#cvimwrite_113" rel="nofollow">cv::imwrite</a></li></ul> 
  </li><li><a href="#openCV_190" rel="nofollow">openCV图像对象创建与赋值</a></li><li><a href="#opencv_316" rel="nofollow">opencv图像像素点读写操作</a></li><li><ul><li><a href="#_334" rel="nofollow">数组遍历</a></li><li><a href="#_387" rel="nofollow">指针方式遍历</a></li><li><a href="#saturate_cast__uchar__432" rel="nofollow">像素范围处理saturate_cast &lt; uchar &gt;</a></li><li><a href="#_440" rel="nofollow">图像掩膜操作</a></li><li><a href="#cvfilter2D__511" rel="nofollow">使用cv::filter2D 对图像进行掩膜处理</a></li></ul> 
  </li><li><a href="#_547" rel="nofollow">图像像素的算术操作</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>窗口显示</h2> 
<h3><a id="cvimshow_3"></a>cv::imshow</h3> 
<pre><code class="prism language-c"><span class="token keyword">void</span> cv<span class="token operator">::</span><span class="token function">imshow</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> String <span class="token operator">&amp;</span> winname<span class="token punctuation">,</span>InputArray mat<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>imshow根据窗口名称显示图像到指定的窗口上去,第一个参数是窗口名称第二参数是Mat对象</li></ul> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	cv<span class="token double-colon punctuation">::</span>Mat src <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">"C:/Users/26961/Desktop/dog.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"图图片未加载"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"输入窗口"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//阻塞式等待</span>
	<span class="token function">destroyAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//销毁所有的窗口对象</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>并不能进行窗口的缩放，只是图片固定在创建的窗口上会固定尺寸</p> 
</blockquote> 
<p>注意：</p> 
<ul><li>imread可以加载灰度图像</li></ul> 
<h3><a id="cvimread_36"></a>cv::imread</h3> 
<pre><code class="prism language-cpp"><span class="token function">imread</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span> <span class="token keyword">int</span> flags<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>imread功能是加载图像文件成为一个Mat对象,其中第一个参数表示图像文件名称。</li><li>第二个参数,表示加载的图像是什么类型,支持常见的三个参数值<br> IMREAD_ UNCHANGED (&lt;0)表示加载原图，不做任何改变<br> IMREAD_GRAYSCALE ( 0)表示把原图作为灰度图像加载进来<br> IMREAD_ COLOR (&gt;0)表示把原图作为RGB图像加载进来</li></ul> 
<p>注意: OpenCV支持JPG、PNG、 TIFF等常 见格式图像文件加载</p> 
<pre><code class="prism language-cpp">cv<span class="token double-colon punctuation">::</span>Mat src <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">"C:/Users/26961/Desktop/dog.jpg"</span><span class="token punctuation">,</span> 
									IMREAD_GRAYSCALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>显示效果:<br> <img src="https://images2.imgbox.com/1f/99/nNlFSsB0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="cvnamedWindow_58"></a>cv::namedWindow</h3> 
<p>namedWindos功能是创建一个OpenCV窗口 ，它是由OpenCV自动创建与释放,你无需取销毁它。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//常见用法</span>
<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"Window Title"</span><span class="token punctuation">,</span> WINDOW_ AUTOSIZE<span class="token punctuation">)</span>
</code></pre> 
<ul><li>WINDOW_ AUTOSIZE会自动根据图像大小,显示窗门大小,不能认为改变窗口大小。</li><li>WINDOW_ NORMAL,跟QT集成的时候会使用,允许修改窗口大小。</li><li>WINDOW_FREERATIO, 可以调整图片的自由比率。</li></ul> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	cv<span class="token double-colon punctuation">::</span>Mat src <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">"C:/Users/26961/Desktop/dog.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"图片未加载"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//可以进行窗口的缩放</span>
	<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"输入窗口"</span><span class="token punctuation">,</span> WINDOW_FREERATIO<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//WINDOW_FREERATIO -可以调整图片的自由比率</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"输入窗口"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//阻塞式等待</span>
	<span class="token function">destroyAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="cvcvtColor_95"></a>cv::cvtColor</h2> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> cv<span class="token double-colon punctuation">::</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>InputArray 	src<span class="token punctuation">,</span>	<span class="token comment">//输入图像</span>
                  OutputArray 	dst<span class="token punctuation">,</span>	<span class="token comment">//输出图像</span>
                  <span class="token keyword">int</span> 	code<span class="token punctuation">,</span>			<span class="token comment">//目标色彩空间， 如COLOR_BGR2GRAY 等</span>
                  <span class="token keyword">int</span> 	dstCn <span class="token operator">=</span> <span class="token number">0</span> 
                  <span class="token punctuation">)</span>
</code></pre> 
<p>cvtColor的功能是把图像从一-个彩色空间转换到另外一个色彩空间，有三个参数，第一个参数表示源图像、第二参数表示色彩空间转换之后的图像、第三个参数表示源和目标色彩空间如:</p> 
<pre><code class="prism language-cpp">COLOR_BGR2GRAY <span class="token operator">=</span> <span class="token number">6</span>彩色到灰度
COLOR_GRAY2BGR<span class="token operator">=</span> <span class="token number">8</span>灰度到彩色
COLOR_BGR2HSV <span class="token operator">=</span> <span class="token number">40</span> BGR到HSV
COLOR_HSV2BGR <span class="token operator">=</span> <span class="token number">54</span> HSV到BGR
</code></pre> 
<h3><a id="cvimwrite_113"></a>cv::imwrite</h3> 
<pre><code class="prism language-cpp">CV_EXPORTS_W <span class="token keyword">bool</span> <span class="token function">imwrite</span><span class="token punctuation">(</span> <span class="token keyword">const</span> String<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span> InputArray img<span class="token punctuation">,</span>
              <span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> params <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li> <p>保存图像文件到指定目录路径</p> </li><li> <p>只有8位、16位的PNG、 JPG、 Tiff文件格式而 且是单通道或者三通道的BGR的图像才可以通过这种方式保存。</p> </li><li> <p>保存PNG格式的时候可以保存透明通道的图片可以指定压缩参数</p> </li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">quick_space_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Mat gray<span class="token punctuation">,</span> hsv<span class="token punctuation">;</span>  <span class="token comment">//用于存储灰色和彩色的Mat对象</span>

	
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> hsv<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//设置灰色</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置彩色</span>
	
	<span class="token comment">//调整图片的自由比率</span>
	<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"灰色"</span><span class="token punctuation">,</span> WINDOW_FREERATIO<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"hsv"</span><span class="token punctuation">,</span> WINDOW_FREERATIO<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"hsv"</span><span class="token punctuation">,</span> hsv<span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">//显示转换后的图片</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"灰色"</span><span class="token punctuation">,</span> gray<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//显示转换后的图片</span>

	<span class="token comment">//保存转换颜色后的图片</span>
	<span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"C:/Users/26961/Desktop/images/hsv.jpg"</span><span class="token punctuation">,</span> hsv<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imwrite</span><span class="token punctuation">(</span><span class="token string">"C:/Users/26961/Desktop/images/gray.jpg"</span><span class="token punctuation">,</span> gray<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>main.cpp</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2/opencv.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"quick_demo.h"</span></span>


<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		
<span class="token punctuation">{<!-- --></span>
	cv<span class="token double-colon punctuation">::</span>Mat src <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\26961\\Desktop\\images\\dog.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"图片未打开"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//可以进行窗口的缩放，图片与窗口大小匹配</span>
	<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"输入窗口"</span><span class="token punctuation">,</span> WINDOW_FREERATIO<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"输入窗口"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//彩色转换</span>
	QuickDemo obj<span class="token punctuation">;</span>
	obj<span class="token punctuation">.</span><span class="token function">quick_space_demo</span><span class="token punctuation">(</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token comment">//将Mat 对象传递给quick_space_demo函数，将转换的图片保存到</span>
	<span class="token comment">// C:/Users/26961/Desktop/images/路径中</span>

	<span class="token comment">//阻塞等待</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//销毁窗口对象</span>
	<span class="token function">destroyAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a3/c4/Suz2bBQr_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="openCV_190"></a>openCV图像对象创建与赋值</h2> 
<p><strong>图像对象的创建和赋值</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">mat_creater_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	Mat m1<span class="token punctuation">,</span> m2<span class="token punctuation">;</span>
	m1 <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//赋值方式一</span>
	src<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//赋值方式二</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m1<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//为了区别，将m1对象色彩设置为彩色</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"m1对象"</span><span class="token punctuation">,</span> m1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"m2对象"</span><span class="token punctuation">,</span> m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>创建 8 * 8 的空白对象</strong></p> 
<pre><code class="prism language-cpp"><span class="token comment">//设置8 * 8的空白图像，指定一个通道。</span>
Mat m3 <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_8UC1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
	显示宽度、高度、通道。
*/</span>
std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"width: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>cols <span class="token operator">&lt;&lt;</span> <span class="token string">" height: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>rows  
 <span class="token operator">&lt;&lt;</span> <span class="token string">" channels: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

<span class="token comment">//打印空白图像</span>
std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> m3 <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/0c/NdXL2C8i_o.png" alt="在这里插入图片描述"></p> 
<p><strong>使用ones和zeros的区别</strong><br> 如果在创建空白Mat对象时，如果指定要创建3个通道的时候，但是此时是使用Mat::ones该方法进行创建的话都出现1和0交替的现象，并且1总是出现在1通道</p> 
<pre><code class="prism language-cpp">Mat m3 <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">ones</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">)</span><span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"width: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>cols <span class="token operator">&lt;&lt;</span> <span class="token string">" height: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>rows  
 <span class="token operator">&lt;&lt;</span> <span class="token string">" channels: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e3/29/6v4RCJ0Y_o.png" alt="在这里插入图片描述"></p> 
<p>而如果是使用Mat::zeros方法时，并不会发送该情况，而是全部会初始化为0。</p> 
<pre><code class="prism language-cpp">Mat m3 <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/60/1e/Sr9i5Lo6_o.png" alt="在这里插入图片描述"></p> 
<p>改变空白对象的色彩</p> 
<pre><code class="prism language-cpp">Mat m3 <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">)</span><span class="token punctuation">;</span>
m3 <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置m3对象的色彩，这里会被设置为纯蓝色</span>
<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"图像"</span><span class="token punctuation">,</span> m3<span class="token punctuation">)</span><span class="token punctuation">;</span>	  <span class="token comment">//显示m3对象			</span>
</code></pre> 
<p><strong>Mat对象之间的深浅拷贝问题</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> QuickDemo<span class="token operator">::</span><span class="token function">mat_creater_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	Mat m1<span class="token punctuation">,</span> m2<span class="token punctuation">;</span>
	m1 <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//赋值方式一</span>
	src<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//赋值方式二</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m1<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//为了区别，将m1对象色彩设置为彩色</span>

	<span class="token comment">/*imshow("m1对象", m1);
	imshow("m2对象", m2);*/</span>

	Mat m3 <span class="token operator">=</span> Mat<span class="token operator">::</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m3 <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置m3对象的色彩</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"图像3"</span><span class="token punctuation">,</span> m3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"width: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>cols <span class="token operator">&lt;&lt;</span> <span class="token string">" height: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>rows  
	 <span class="token operator">&lt;&lt;</span> <span class="token string">" channels: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
		

	<span class="token comment">//浅拷贝</span>
	Mat m4 <span class="token operator">=</span> m3<span class="token punctuation">;</span>
	m4 <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//修改了m3</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"图像4"</span><span class="token punctuation">,</span> m4<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//深拷贝</span>
	Mat m5 <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝已经修改了的m3</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"图像5"</span><span class="token punctuation">,</span> m5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>如果只是单纯的进行浅拷贝的话，那么m4对象的改变会影响到m3对象， 直到m4被修改了后m3也会收到影响。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/da/54/lZPLkJgh_o.png" alt="在这里插入图片描述"></p> 
<p><strong>解决的方案就是让m4深拷贝m3，那么就不会导致m3发生改变</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> QuickDemo<span class="token operator">::</span><span class="token function">mat_creater_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	Mat m3 <span class="token operator">=</span> Mat<span class="token operator">::</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	m3 <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置m3对象的色彩</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"图像3"</span><span class="token punctuation">,</span> m3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"width: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>cols <span class="token operator">&lt;&lt;</span> <span class="token string">" height: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span>rows  
	 <span class="token operator">&lt;&lt;</span> <span class="token string">" channels: "</span> <span class="token operator">&lt;&lt;</span> m3<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
		
	<span class="token comment">//浅拷贝</span>
	Mat m4 <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	m4 <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"图像4"</span><span class="token punctuation">,</span> m4<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//深拷贝</span>
	Mat m5 <span class="token operator">=</span> m3<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	m5 <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"图像5"</span><span class="token punctuation">,</span> m5<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>效果：</strong></p> 
<p><img src="https://images2.imgbox.com/26/a3/pW9lNwd4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="opencv_316"></a>opencv图像像素点读写操作</h2> 
<p>读一个GRAY像素点的值（CV_8UC1）</p> 
<ul><li>注：单通道</li></ul> 
<pre><code class="prism language-cpp">Scalar intensity <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//第一种</span>
Scalar intensity <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token function">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第二种</span>
</code></pre> 
<p>读一个RGB像素点的像素值, B、G、R读取顺序</p> 
<ul><li>注：三通道</li></ul> 
<pre><code class="prism language-cpp">Vec3f intensity <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3f<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> blue <span class="token operator">=</span> intensity<span class="token punctuation">.</span>val<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> green <span class="token operator">=</span> intensity<span class="token punctuation">.</span>val<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> red <span class="token operator">=</span> intensity<span class="token punctuation">.</span>val<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_334"></a>数组遍历</h3> 
<ul><li>CV Assert(mylmage.depth()==CV 8U);</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">changeimg</span><span class="token punctuation">(</span>Mat <span class="token operator">&amp;</span>src<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">int</span> w <span class="token operator">=</span> src<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>   <span class="token comment">//列</span>
	<span class="token keyword">int</span> h <span class="token operator">=</span> src<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>	<span class="token comment">//行</span>
	<span class="token keyword">int</span> dims <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//通道</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>dims <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//单通道的灰度图像</span>

				<span class="token comment">//获取[i, j]位置的像素值</span>
				<span class="token keyword">int</span> pv <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//修改[i, j]位置的像素值</span>
				src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> pv<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//三个通道的像素点需要修改三次，因为三个通道的彩色图像每一个像素点可以存储3个值</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>dims <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//3通道的彩色图像</span>
			
				<span class="token comment">//Vec3b 是一个三通道的像素点，所以Vec3b对象包含三个值 </span>
				Vec3b bgr <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
				src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> bgr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> bgr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> bgr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">pixel_vlist_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	Mat m1 <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">changeimg</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"src图像"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>


	Mat m2 <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">changeimg</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"m2图像"</span><span class="token punctuation">,</span> m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>修改前 vs 修改后</strong></p> 
<p><img src="https://images2.imgbox.com/a2/46/AEPdvvQj_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_387"></a>指针方式遍历</h3> 
<ul><li>Mat.ptr&lt; uchar &gt;(int i=0) 获取像素矩阵的指针,索弓li表示第几行,从开始计行数。</li><li>获得当前行指针 const uchar* current=mylmage.ptr(row );</li><li>获取当前像素点 P(row, col)的像素值p(row, col) =current[col]</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">changeimg2</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">int</span> w <span class="token operator">=</span> src<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>   <span class="token comment">//列</span>
	<span class="token keyword">int</span> h <span class="token operator">=</span> src<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>	<span class="token comment">//行</span>
	<span class="token keyword">int</span> dims <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//通道</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 获取行指针</span>
		uchar<span class="token operator">*</span> curr_row <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

			<span class="token comment">//获取列指针</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>dims <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">int</span> pv <span class="token operator">=</span> <span class="token operator">*</span>curr_row<span class="token punctuation">;</span>
				<span class="token operator">*</span>curr_row<span class="token operator">++</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> pv<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>dims <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">//遍历一个像素点拥有三个值的图像</span>
				<span class="token operator">*</span>curr_row<span class="token operator">++</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> <span class="token operator">*</span>curr_row<span class="token punctuation">;</span>
				<span class="token operator">*</span>curr_row<span class="token operator">++</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> <span class="token operator">*</span>curr_row<span class="token punctuation">;</span>
				<span class="token operator">*</span>curr_row<span class="token operator">++</span> <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> <span class="token operator">*</span>curr_row<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">pixel_vlist_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	Mat m1 <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">changeimg1</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"src图像"</span><span class="token punctuation">,</span> m1<span class="token punctuation">)</span><span class="token punctuation">;</span>


	Mat m2 <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">changeimg2</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"m2图像"</span><span class="token punctuation">,</span> m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="saturate_cast__uchar__432"></a>像素范围处理saturate_cast &lt; uchar &gt;</h3> 
<ul><li>这个函数的功能是确保RGB值得范围在0~255之间</li></ul> 
<pre><code class="prism language-cpp"><span class="token generic-function"><span class="token function">saturate_cast</span> <span class="token generic class-name"><span class="token operator">&lt;</span> uchar <span class="token operator">&gt;</span></span></span>  <span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>返回<span class="token number">0</span>。
<span class="token generic-function"><span class="token function">saturate_cast</span> <span class="token generic class-name"><span class="token operator">&lt;</span> uchar <span class="token operator">&gt;</span></span></span>  <span class="token punctuation">(</span> <span class="token number">288</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>返回<span class="token number">255</span>
<span class="token generic-function"><span class="token function">saturate_cast</span> <span class="token generic class-name"><span class="token operator">&lt;</span> uchar <span class="token operator">&gt;</span></span></span> <span class="token punctuation">(</span> <span class="token number">100</span> <span class="token punctuation">)</span> <span class="token punctuation">,</span> 返回<span class="token number">100</span>
</code></pre> 
<h3><a id="_440"></a>图像掩膜操作</h3> 
<p>红色是中心像素，从上到下，<br> 从左到右对每个像素做同样<br> 的处理操作。得到最终结果<br> 就是对比度提高之后的输出<br> 图像Mat对象。</p> 
<p><img src="https://images2.imgbox.com/7e/1d/aFpTBVje_o.png" alt="在这里插入图片描述"></p> 
<ul><li>矩阵的掩膜操作十分简单，根据掩膜来重新计算每个像素的像素值,掩膜(mask 也被称为Kernel)</li><li>通过掩膜操作实现图像对比度提高。</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//x： 通道数</span>
<span class="token function">I</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token function">I</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">[</span><span class="token function">I</span><span class="token punctuation">(</span>i <span class="token operator">-</span>x<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">I</span><span class="token punctuation">(</span>i <span class="token operator">+</span> x<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">I</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">-</span> x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">I</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment">//			  当前点       上          下           左            右</span>
</code></pre> 
<p><strong>掩膜操作代码</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">Test_Demo</span><span class="token double-colon punctuation">::</span><span class="token function">maskopt</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>src<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">*</span>outsrc<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//存放目标答案</span>
	cv<span class="token double-colon punctuation">::</span>Mat dst <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//获取宽高</span>
	<span class="token keyword">int</span> row <span class="token operator">=</span> src<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>  <span class="token comment">//行</span>
	<span class="token keyword">int</span> col <span class="token operator">=</span> <span class="token punctuation">(</span>src<span class="token punctuation">.</span>cols <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> src<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//列</span>
	
	<span class="token comment">//获取偏移量</span>
	<span class="token keyword">int</span> offset <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> row <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">const</span> uchar<span class="token operator">*</span> prevptr <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> uchar<span class="token operator">*</span> currptr <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> uchar<span class="token operator">*</span> nextptr <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		uchar<span class="token operator">*</span> dst_ptr <span class="token operator">=</span> dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">ptr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> offset<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> col<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">//[I(i - 1, j) + I(i + 1, j) + I(i, j - 1) + I(i, j + 1)]</span>
			dst_ptr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">saturate_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> currptr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>currptr<span class="token punctuation">[</span>j <span class="token operator">-</span> offset<span class="token punctuation">]</span>
							<span class="token operator">+</span> currptr<span class="token punctuation">[</span>j <span class="token operator">+</span> offset<span class="token punctuation">]</span> <span class="token operator">+</span> prevptr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> nextptr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token operator">*</span>outsrc <span class="token operator">=</span> dst<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">test_demo_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	
	cv<span class="token double-colon punctuation">::</span>String filename <span class="token operator">=</span> <span class="token string">"C:/Users/26961/Desktop/images/jay.jpg"</span><span class="token punctuation">;</span>
	Test_Demo obj<span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span>Mat src <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span>Mat dst<span class="token punctuation">;</span>

	obj<span class="token punctuation">.</span><span class="token function">maskopt</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token operator">&amp;</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"掩膜前"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"掩膜前"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>

	cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"掩膜后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"掩膜后"</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>掩膜操作前后对比</strong></p> 
<p><img src="https://images2.imgbox.com/c2/df/BLSYEGN7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="cvfilter2D__511"></a>使用cv::filter2D 对图像进行掩膜处理</h3> 
<p>定义掩膜:</p> 
<pre><code class="prism language-cpp">Mat kernel<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token generic-function"><span class="token function">Mat_</span> <span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token function">filter2D</span><span class="token punctuation">(</span> src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">depth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>其中src与dst是Mat类型变量、</li><li>src.depth表示位图深度 ,有32、24、8等。</li><li>kernel需要人为的去定义一个掩膜</li></ul> 
<p><strong>使用filter2D的效果</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">test_demo_func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	cv<span class="token double-colon punctuation">::</span>String filename <span class="token operator">=</span> <span class="token string">"C:/Users/26961/Desktop/images/jay.jpg"</span><span class="token punctuation">;</span>
	Test_Demo obj<span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span>Mat src <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span>Mat dst<span class="token punctuation">;</span>

	<span class="token comment">//obj.maskopt(src, &amp;dst);</span>
	Mat kernel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token generic-function"><span class="token function">Mat_</span> <span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">filter2D</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">depth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> kernel<span class="token punctuation">)</span><span class="token punctuation">;</span>

	cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"掩膜前"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"掩膜前"</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">;</span>

	cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"掩膜后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"掩膜后"</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/88/HdfSASYY_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_547"></a>图像像素的算术操作</h2> 
<p><strong>除法操作两种方式</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">operator_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Mat dst<span class="token punctuation">;</span>
	dst <span class="token operator">=</span> src <span class="token operator">/</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"算术操作"</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">operator_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Mat dst<span class="token punctuation">;</span>
	Mat m <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	m <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">divide</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"除法操作"</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>乘法操作</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">operator_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	Mat dst<span class="token punctuation">;</span>
	Mat m <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	m <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">multiply</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//src 与 m相乘的结果放入dst中</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"算术操作"</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>像素点相加</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token class-name">QuickDemo</span><span class="token double-colon punctuation">::</span><span class="token function">operator_demo</span><span class="token punctuation">(</span>Mat<span class="token operator">&amp;</span> src<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//初始化dst， 用于存储m和src 运算后的结果值 </span>
	Mat dst <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//初始化m对象</span>
	Mat m <span class="token operator">=</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>src<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	m <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	

	<span class="token keyword">int</span> h <span class="token operator">=</span> src<span class="token punctuation">.</span>rows<span class="token punctuation">;</span> <span class="token comment">//获取行</span>
	<span class="token keyword">int</span> w <span class="token operator">=</span> src<span class="token punctuation">.</span>cols<span class="token punctuation">;</span> <span class="token comment">//获取列</span>
	
	<span class="token comment">//计算 m对象和src的和值</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> w<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			Vec3b p1 <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
			Vec3b p2 <span class="token operator">=</span> m<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
			dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">saturate_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> p2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">saturate_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dst<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">at</span><span class="token generic class-name"><span class="token operator">&lt;</span>Vec3b<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">saturate_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>uchar<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>p1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> p2<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"算术操作"</span><span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>算术运算常用的四个接口</strong></p> 
<pre><code class="prism language-cpp"><span class="token comment">//加法</span>
<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//减法</span>
<span class="token keyword">void</span> <span class="token function">subtract</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//乘法</span>
<span class="token keyword">void</span> <span class="token function">multiply</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//除法</span>
<span class="token keyword">void</span> <span class="token function">divide</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> m<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/ae/l0pMQuDJ_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/88882ddef885e15f568ae7a3c900d6fa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">NNDL 实验二 pytorch入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/482a5491fc42e16b75966c972a4490b3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux 高并发服务器开发</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
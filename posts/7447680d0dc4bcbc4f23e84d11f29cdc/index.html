<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenWRT配置IPV6 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenWRT配置IPV6" />
<meta property="og:description" content="准备材料 智博通 WG3526 路由器 (MT7621A 16M ROM, 512M RAM)中国移动光纤入户 (Prefix Delegation前缀委托模式) 刷机 OpenWRT 18.06 for ZBT WG3526
配置 /etc/config/dhcp
config dhcp &#39;lan&#39; ... option dhcpv6 &#39;server&#39; option ra &#39;server&#39; 复制代码 dchpv6和ra配置,保持不变,均为&#39;server&#39;
/etc/config/firewall
config defaults ... # Uncomment this line to disable ipv6 rules option disable_ipv6 1 复制代码 关闭IPV6防火墙，否则本机的一些端口无法暴露到公网
/etc/config/network
关闭global prefix
#config globals &#39;globals&#39; # option ula_prefix &#39;fdca:59d7:4008::/48&#39; 复制代码 配置pppoe(加自动ipv6)
config interface &#39;wan&#39; option ifname &#39;eth0.2&#39; option proto &#39;pppoe&#39; option username &#39;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7447680d0dc4bcbc4f23e84d11f29cdc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-04-27T05:22:32+08:00" />
<meta property="article:modified_time" content="2019-04-27T05:22:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenWRT配置IPV6</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="article-content"> 
 <h3 class="heading">准备材料</h3> 
 <ol><li>智博通 WG3526 路由器 (MT7621A 16M ROM, 512M RAM)</li><li>中国移动光纤入户 (Prefix Delegation前缀委托模式)</li></ol> 
 <h3 class="heading">刷机</h3> 
 <p><a href="https://link.juejin.im?target=http%3A%2F%2Fdownloads.openwrt.org%2Freleases%2F18.06.2%2Ftargets%2Framips%2Fmt7621%2Fopenwrt-18.06.2-ramips-mt7621-zbt-wg3526-16M-squashfs-sysupgrade.bin" rel="nofollow">OpenWRT 18.06 for ZBT WG3526</a></p> 
 <h3 class="heading">配置</h3> 
 <p>/etc/config/dhcp</p> 
 <pre><code class="copyable">config dhcp 'lan'
     ...
    option dhcpv6 'server'
    option ra 'server'
<span class="copy-code-btn">复制代码</span></code></pre> 
 <p>dchpv6和ra配置,保持不变,均为'server'</p> 
 <p>/etc/config/firewall</p> 
 <pre><code class="copyable">config defaults
    ...
    # Uncomment this line to disable ipv6 rules
    option disable_ipv6     1
<span class="copy-code-btn">复制代码</span></code></pre> 
 <p>关闭IPV6防火墙，否则本机的一些端口无法暴露到公网</p> 
 <p>/etc/config/network</p> 
 <p>关闭global prefix</p> 
 <pre><code class="copyable">#config globals 'globals'
#   option ula_prefix 'fdca:59d7:4008::/48'
<span class="copy-code-btn">复制代码</span></code></pre> 
 <p>配置pppoe(加自动ipv6)</p> 
 <pre><code class="copyable">config interface 'wan'
    option ifname 'eth0.2'
    option proto 'pppoe'
    option username '...'
    option password '...'
    option ipv6 'auto'
<span class="copy-code-btn">复制代码</span></code></pre> 
 <p>关闭wan6</p> 
 <pre><code class="copyable">#config interface 'wan6'
#       option ifname 'eth0.2'
#       option proto 'dhcpv6
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h3 class="heading">显示路由表</h3> 
 <pre><code class="copyable"># ip -6 route show
default from 2409:8a4c:ca02:5e2e::/64 via fe80::6aa8:28ff:fe1d:8f2a dev pppoe-wan  metric 512 
default from 2409:8a4c:ca20:3ed0::/60 via fe80::6aa8:28ff:fe1d:8f2a dev pppoe-wan  metric 512 
2409:8a4c:ca02:5e2e::/64 dev pppoe-wan  metric 256 
2409:8a4c:ca20:3ed0::/64 dev br-lan  metric 1024 
unreachable 2409:8a4c:ca20:3ed0::/60 dev lo  metric 2147483647  error -148
fe80::/64 dev eth0  metric 256 
fe80::/64 dev br-lan  metric 256 
fe80::/64 dev eth0.2  metric 256 
fe80::/10 dev pppoe-wan  metric 1 
fe80::/10 dev pppoe-wan  metric 256 
anycast 2409:8a4c:ca02:5e2e:: dev pppoe-wan  metric 0 
anycast 2409:8a4c:ca20:3ed0:: dev br-lan  metric 0 
anycast fe80:: dev eth0  metric 0 
anycast fe80:: dev br-lan  metric 0 
anycast fe80:: dev pppoe-wan  metric 0 
anycast fe80:: dev eth0.2  metric 0 
ff00::/8 dev eth0  metric 256 
ff00::/8 dev br-lan  metric 256 
ff00::/8 dev eth0.2  metric 256 
ff00::/8 dev pppoe-wan  metric 256 
<span class="copy-code-btn">复制代码</span></code></pre> 
 <h3 class="heading">PC上的路由表</h3> 
 <pre><code class="copyable">$ ip -6 rout show
::1 dev lo proto kernel metric 256 pref medium
2409:8a4c:ca20:3ed0::c00 dev enp10s0 proto kernel metric 100 pref medium
2409:8a4c:ca20:3ed0::/64 dev enp10s0 proto ra metric 100 pref medium
2409:8a4c:ca20:3ed0::/60 via fe80::7aa3:51ff:fe2d:13a dev enp10s0 proto ra metric 100 pref medium
fe80::/64 dev enp10s0 proto kernel metric 100 pref medium
default via fe80::7aa3:51ff:fe2d:13a dev enp10s0 proto ra metric 100 pref medium
<span class="copy-code-btn">复制代码</span></code></pre> 
</div> 
<p>转载于:https://juejin.im/post/5cc3e4f4518825253d0343fb</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f3acd06450bee41ccb77928b23c60ff8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【B&#43;树】树结构之B&#43;树简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/045795db0db7061730127e98232ea4cd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解密虚拟 DOM——snabbdom 核心源码解读</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
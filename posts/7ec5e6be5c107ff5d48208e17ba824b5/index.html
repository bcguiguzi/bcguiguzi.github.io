<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue最强table vxe-table 虚拟滚动列表 前端导出 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue最强table vxe-table 虚拟滚动列表 前端导出" />
<meta property="og:description" content="最近遇到个问题。后台一次性返回2万条列表数据。
并且需求要求所有数据必须全部展示，不能做假分页（不能优化了）。
这些数据的直接来源就是CS客户端。
他们做CS客户端就是一次性加载几万条数据不分页（说这是客户的要求）。
我体验了一把CS客户端，数万条数据放在那里，着实卡顿。
他们CS开发人员非他妈嘴硬说，这一点也不卡，极致顺滑。
真尼玛在这里掩耳盗铃呢，是吗？懒得跟他们废话。
结论就是：永远不要和傻子讲道理。
不废话，开整吧。
既然需要一次性展示数万条数据，那么element-table基本是不行了，毕竟也不能做个假分页。
终于，茫茫人海，遇到了 vxe-table。
官方地址：https://vxetable.cn/#/table/start/install
最高支持10w&#43;数据的流畅滚动。确实厉害。
那么这么厉害的虚拟滚动，如何实现？
官方也一语道破。
没错，就是懒加载。界面上只是在窗口可视区域范围内加载数据，随着鼠标滚动，再继续加载下一波数据。
怎么用？
第一，写下table模板 &lt;vxe-table border show-overflow show-header-overflow ref=&#34;tableRef&#34; height=&#34;600&#34; :row-config=&#34;{isCurrent: true, isHover: true, useKey: true}&#34; :column-config=&#34;{resizable: true}&#34; :export-config=&#34;{}&#34; :loading=&#34;demo1.loading&#34; :sort-config=&#34;{trigger: &#39;cell&#39;}&#34; :scroll-y=&#34;{ enable: true }&#34; :checkbox-config=&#34;{checkField: &#39;checked&#39;}&#34;&gt; &lt;vxe-column type=&#34;seq&#34; width=&#34;100&#34; fixed=&#34;left&#34;&gt;&lt;/vxe-column&gt; &lt;vxe-column type=&#34;checkbox&#34; width=&#34;60&#34; fixed=&#34;left&#34;&gt;&lt;/vxe-column&gt; &lt;vxe-column field=&#34;attr0&#34; title=&#34;Attr0&#34; width=&#34;200&#34; sortable&gt;&lt;/vxe-column&gt; &lt;vxe-column field=&#34;attr1&#34; title=&#34;Attr1&#34; width=&#34;200&#34;&gt;&lt;/vxe-column&gt; &lt;vxe-column field=&#34;attr2&#34; title=&#34;Attr2&#34; width=&#34;200&#34;&gt;&lt;/vxe-column&gt; &lt;vxe-column field=&#34;attr3&#34; title=&#34;Attr3&#34; width=&#34;200&#34;&gt;&lt;/vxe-column&gt; &lt;vxe-column field=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7ec5e6be5c107ff5d48208e17ba824b5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-13T17:45:30+08:00" />
<meta property="article:modified_time" content="2023-11-13T17:45:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue最强table vxe-table 虚拟滚动列表 前端导出</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近遇到个问题。后台一次性返回2万条列表数据。</p> 
<p>并且需求要求所有数据必须全部展示，不能做假分页（不能优化了）。</p> 
<p>这些数据的直接来源就是CS客户端。</p> 
<p>他们做CS客户端就是一次性加载几万条数据不分页（说这是客户的要求）。</p> 
<p>我体验了一把CS客户端，数万条数据放在那里，着实卡顿。</p> 
<p>他们CS开发人员非他妈嘴硬说，这一点也不卡，极致顺滑。</p> 
<p>真尼玛在这里掩耳盗铃呢，是吗？懒得跟他们废话。</p> 
<p><strong>结论就是</strong>：永远不要和傻子讲道理。</p> 
<p>不废话，开整吧。</p> 
<p>既然需要一次性展示数万条数据，那么element-table基本是不行了，毕竟也不能做个假分页。</p> 
<p>终于，茫茫人海，遇到了 vxe-table。</p> 
<p>官方地址：<a href="https://vxetable.cn/#/table/start/install" rel="nofollow" title="https://vxetable.cn/#/table/start/install">https://vxetable.cn/#/table/start/install</a></p> 
<p><img alt="" height="763" src="https://images2.imgbox.com/18/db/kdNP8Bdq_o.png" width="1200"></p> 
<p> 最高支持10w+数据的流畅滚动。确实厉害。</p> 
<p>那么这么厉害的虚拟滚动，如何实现？</p> 
<p>官方也一语道破。</p> 
<p><img alt="" height="424" src="https://images2.imgbox.com/c1/e3/5AHCJ8SR_o.png" width="917"></p> 
<p>没错，就是懒加载。界面上只是在窗口可视区域范围内加载数据，随着鼠标滚动，再继续加载下一波数据。</p> 
<p><strong>怎么用？</strong></p> 
<h3><strong>第一，写下table模板</strong></h3> 
<pre><code class="language-javascript">&lt;vxe-table
              border
          show-overflow
          show-header-overflow
          ref="tableRef"
          height="600"
          :row-config="{isCurrent: true, isHover: true, useKey: true}"
          :column-config="{resizable: true}"
          :export-config="{}"
          :loading="demo1.loading"
          :sort-config="{trigger: 'cell'}"
          :scroll-y="{ enable: true }"
          :checkbox-config="{checkField: 'checked'}"&gt;
          &lt;vxe-column type="seq" width="100" fixed="left"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column type="checkbox" width="60" fixed="left"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr0" title="Attr0" width="200" sortable&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr1" title="Attr1" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr2" title="Attr2" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr3" title="Attr3" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr4" title="Attr4" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr5" title="Attr5" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr6" title="Attr6" width="300" sortable&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr7" title="Attr7" width="200" sortable&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr8" title="Attr8" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr9" title="Attr9" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr10" title="Attr10" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr11" title="Attr11" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr12" title="Attr12" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr13" title="Attr14" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr14" title="Attr14" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr15" title="Attr15" width="200"&gt;&lt;/vxe-column&gt;
          &lt;vxe-column field="attr16" title="Attr16" width="200" fixed="right"&gt;&lt;/vxe-column&gt;
        &lt;/vxe-table&gt;</code></pre> 
<p>这样子，看起来和element-table几乎没有区别。只是注意一些常用字段，改了下名字。</p> 
<h3><strong>第二，写下数据请求方法</strong></h3> 
<p><strong><span style="color:#fe2c24;">但是</span></strong>你发现这里没有绑定数据，也就是 :data="tableData"。</p> 
<p>仔细想想朋友，10万+数据你交给vue双向绑定，你是要累死谁啊？不合适啊，这么干。所以，官方提供了一个方法：reloadData。</p> 
<pre><code class="language-javascript">// 第一步： 接口请求后台数据（可能是10万条数据）

new Promise(resolve =&gt; {
    
    // 注意  这里引入接口方法
    
    getList().then(res =&gt; {
        
        // 在这里将请求的列表数据 返回出promise
        resolve(res ? res : [])
        
    })

}).then(list =&gt; {
    
    /* 
    * 在这里开始给vxe-table数据了
    */

    
    // 1. 首先通过 $refs(vue内部方法，或者原生获取vxe-table这个dom)
    const VXE_TABLE = this.$refs.tableRef;
    
    // 2. 通过这个dom下挂载的方法 reloadData 方法 取数据
    VXE_TABLE..reloadData(list).then(() =&gt; {
        // 如果你有loading的话  可以在这里关闭
    })    

    // 至此， 数据接收完毕。




}).catch(err =&gt; {
    console.log('请求数据报错了 -- ',err);
})</code></pre> 
<h3><strong>第三，自定义（翻译）字段</strong></h3> 
<p>总有一些需要自己翻译的字段。实际上和element-table很类似。</p> 
<pre><code class="language-javascript">&lt;template #default="{ row }"&gt;
    vxe-button @click="showDetailEvent(row)"&gt;弹框{<!-- -->{ row.name }}&lt;/vxe-button&gt;
&lt;/template&gt;</code></pre> 
<p>还是插槽。更多插槽，请移步官方文档：<a href="https://vxetable.cn/#/table/advanced/template" rel="nofollow" title="vxe-table v4">vxe-table v4</a></p> 
<h3> <strong>第四，高亮某一行，跳转到某一行</strong></h3> 
<pre><code class="language-javascript">&lt;vxe-table
      border
      ref="tableRef"
      height="300"
      :row-config="{isCurrent: true, isHover: true}"
      :data="tableData"
      @current-change="currentChangeEvent"&gt;
      &lt;vxe-column field="name" title="Name"&gt;&lt;/vxe-column&gt;
      &lt;vxe-column field="sex" title="Sex"&gt;&lt;/vxe-column&gt;
      &lt;vxe-column field="age" title="Age"&gt;&lt;/vxe-column&gt;
      &lt;vxe-column field="address" title="Address" show-overflow&gt;&lt;/vxe-column&gt;
    &lt;/vxe-table&gt;</code></pre> 
<p>配置 row-config.</p> 
<p>然后写一个方法 setCurrentRow.</p> 
<pre><code class="language-javascript">// 老规矩 还是获取table这个dom

// talbeData[0] 设置第一行数据高亮

this.$refs.tableRef.setCurrentRow(talbeData[0])</code></pre> 
<p>等等？刚才说，这个data没有绑定。那么我们应该去哪里拿到这个数据呢？</p> 
<pre><code class="language-javascript">// 通过 reloadData方法获取数据的 通过下边方式 拿到所有的table数据

const TABLE_DATA = this.$refs.tableRef.allFullData;

// 然后就可以愉快的设置某一行数据了 index 就是你需要哪一行数据高亮

this.$refs.tableRef.setCurrentRow(TABLE_DATA[index])

// 想要一键删除所有高亮  那么就直接调用 clearCurrentRow

this.$refs.tableRef.clearCurrentRow

// 如果需要跳转到某一行 比如 跳转定位到 第 100 行
// 首先我们要知道每一行的高度， 比如每一行高度是 40 px
// 那么需要dom滚动的距离就是  index * 40
// 所以 就是如下
document.querySelector('.body--wrapper').scrollTop = index * 40;

// 至此，跳转成功</code></pre> 
<h3><strong>第五，导出数据</strong></h3> 
<p>本来这个导出数据这个事，后台返回个流，前端处理下就完事了。</p> 
<p>但是这个table组件厉害了。可以直接通过内置方法，直接导出数据。</p> 
<p>内置的格式有 txt，html，csv等等。</p> 
<p>说实话，也够用了。</p> 
<pre><code class="language-javascript">// 例如 导出csv文件 使用内置 $table.exportData({ type: 'csv' }) 方法


this.$refs.tableRef.exportData({type: 'csv'})</code></pre> 
<p>但是，需求要求我们导出pdf（wocao）。</p> 
<p>对不起，失态了。</p> 
<p>那么，我们也可以利用 vxe-table 的插件实现该功能。</p> 
<p>文档：<a href="https://vxetable.cn/other4/#/table/plugin/exportPDF" rel="nofollow" title="vxe-table v4 集成第三方">vxe-table v4 集成第三方</a></p> 
<pre><code class="language-javascript">// 首先肯定是要安装这个插件了
npm install xe-utils vxe-table@next vxe-table-plugin-export-pdf@next jspdf

// 没错 基于 jspdf做的插件 
// 然后 入口文件引入
import VXETable from 'vxe-table'
import VXETablePluginExportPDF from 'vxe-table-plugin-export-pdf'
// ...

VXETable.use(VXETablePluginExportPDF)


// 然后配置字体  
// 需要注意的是  中文尤其要配字体  不然导出就是乱码
VXETablePluginExportPDF.setup({
  // Set default font
  fontName: 'SourceHanSans-Normal',
  // Font maps
  fonts: [
    {
      // Font name
      fontName: 'SourceHanSans-Normal',
      // Font library url
      fontUrl: 'https://cdn.jsdelivr.net/npm/vxe-table-plugin-export-pdf/fonts/source-han-sans-normal.js'
    }
  ]
})


// 以上配置完毕之后  在具体的组件业务中 就可以使用导出pdf功能


// 导出功能如下

this.$refs.tableRef.exportData({
    filename: 'Order details',
    sheetName: 'Order details ( X02514645652 )',
    type: 'pdf'
})</code></pre> 
<p></p> 
<p>与此同时，你可以导出 xlsx格式的。</p> 
<p>具体不再细说。请参考官方文档：<a href="https://vxetable.cn/other4/#/table/plugin/exportXLSX" rel="nofollow" title="vxe-table v4 集成第三方">vxe-table v4 集成第三方</a></p> 
<p>至此，导出部分也讲完了。</p> 
<p>但是，导出功能最后交给后台，毕竟这前端不擅长干这事。</p> 
<p>结束了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e061dc0d2d70844e06a3415452fe1db/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构—LinkedList与链表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64b5c568099d7717bc26b97cd4640d12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Apache的顶级项目文件下载地址</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
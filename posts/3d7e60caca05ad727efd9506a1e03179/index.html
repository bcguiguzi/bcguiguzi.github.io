<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>KNN算法---c&#43;&#43;实现KNN算法 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="KNN算法---c&#43;&#43;实现KNN算法" />
<meta property="og:description" content="KNN算法的编程步骤 文件data.txt中的数据为： 1. c&#43;&#43;读取txt 文件到数组中的程序 #include&lt;iostream&gt; #include&lt;fstream&gt; using namespace std; #define maxRow 12 #define maxCol 2 ifstream fin; //定义ifstream 类的对象：fin ofstream fout; //定义ofstream类的对象：fout int main() { fin.open(&#34;D:/data.txt&#34;); if(!fin ) { cout&lt;&lt;&#34;could not open the file&#34;&lt;&lt;endl; return -1; } fout.open(&#34;D:/test.txt&#34;); if(!fout) { cout&lt;&lt;&#34;could not open the file&#34;&lt;&lt;endl; return -1; } float data[maxRow][maxCol]; char labels[maxRow]; //循环把 data.txt 中的内容 输入到数组中 for(int i=0;i&lt;12;i&#43;&#43;) { for(int j = 0;j&lt;2;j&#43;&#43;) { fin&gt;&gt;data[i][j]; } fin&gt;&gt;labels[i]; } //循环把 数组中的内容输出到文件test." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3d7e60caca05ad727efd9506a1e03179/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-07-02T16:57:11+08:00" />
<meta property="article:modified_time" content="2017-07-02T16:57:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">KNN算法---c&#43;&#43;实现KNN算法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>KNN算法的编程步骤</h4> 
<div>
  文件data.txt中的数据为： 
</div> 
<div> 
 <br> 
</div> 
<div> 
 <img src="https://images2.imgbox.com/05/ca/a8QgeERb_o.jpg" alt=""> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<div>
  1. c++读取txt 文件到数组中的程序 
</div> 
<div> 
 <pre><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;fstream&gt;
using namespace std;

#define maxRow 12
#define maxCol  2

ifstream fin;  //定义ifstream 类的对象：fin
ofstream fout; //定义ofstream类的对象：fout
int main()
{
    fin.open("D:/data.txt");
    if(!fin )
    {
        cout&lt;&lt;"could not open the file"&lt;&lt;endl;
        return -1;
    }
    fout.open("D:/test.txt");
    if(!fout)
    {
        cout&lt;&lt;"could not open the file"&lt;&lt;endl;
        return -1;
    }
    float data[maxRow][maxCol];
    char labels[maxRow];
    //循环把 data.txt 中的内容 输入到数组中
    for(int i=0;i&lt;12;i++)
    {
        for(int j = 0;j&lt;2;j++)
        {
          fin&gt;&gt;data[i][j];
        }
        fin&gt;&gt;labels[i];
    }
    //循环把 数组中的内容输出到文件test.txt中
    for(int i=0;i&lt;12;i++)
    {
      for(int j = 0;j&lt;2;j++)
        {
          fout&lt;&lt;data[i][j]&lt;&lt;"  ";

        }
        fout&lt;&lt;" "&lt;&lt;labels[i]&lt;&lt;endl;
    }
    fin.close();    //关闭文件 data.txt
    fout.close();   //关闭文件 test.txt
    return 0; 
}
</code></pre> 
 <div>
   上面的程序可以把我们需要的数据读入到程序中数组中，如何把数组数据和标签的数据建立联系呢？我们通过C++中的map容器把数据和标签建立关系。 
 </div> 
 <div> 
  <br> 
 </div> 
 <div>
   2. c++中vector、map容器的基本用法 
 </div> 
 <div>
   vector相当于一个动态数组。 
 </div> 
 <div> 
  <pre><code class="language-cpp">int main()
{

    vector&lt;int&gt; a;   //vector 创建一维数组
    a.push_back(1); // 在容器 a 的尾部插入一个元素 2
    a.push_back(2);
    a.push_back(3);
    a.pop_back();    //在容器 的尾部删除一个元素
    
    //遍历输出 vector
    vector&lt;int&gt;::iterator itr;
    for(itr = a.begin();itr!= a.end();itr++)
    {
        cout&lt;&lt; *itr&lt;&lt;"\t";
    }
    return 0;
}
</code></pre> 
  <div>
    vector容器中元素的排序 
  </div> 
  <div> 
   <br> 
  </div> 
  <div> 
   <br> 
  </div> map 是一类关联是容器，自动建立 key - value 的对应关系，我们需要对map 中的值进行排序，所以就建立存有 map 类型的vector容器，然后用sort 排序。 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div>
   完整的程序： 
 </div> 
 <div> 
  <pre><code class="language-cpp">#include&lt;iostream&gt;
#include&lt;map&gt;
#include&lt;vector&gt;
#include&lt;stdio.h&gt;
#include&lt;cmath&gt;
#include&lt;algorithm&gt;
#include&lt;fstream&gt;
#include&lt;cstdlib&gt;

using namespace std;

#define maxRow 12
#define maxCol 2

typedef pair&lt;int,double&gt; PAIR;

ifstream fin;

class KNN
{
private:
    int k;
    double dataSet[maxRow][maxCol];
    char   labels[maxRow];
    double testData[maxCol];
    map&lt;int,double&gt; map_index_dis;
    map&lt;char,int&gt; map_label;
    double get_distance(double* dt1,double* dt2);
public:
    KNN();
    void get_all_distance();
    void get_max_fre_label();
    void show();
    struct CmpByValue
    {
        bool operator() (const PAIR&amp; lhs,const PAIR&amp; rhs)
        {
            return lhs.second &lt; rhs.second;
        }

    };

};
void KNN::show()
{
    map&lt;int,double&gt;::iterator it;
    for( it=map_index_dis.begin();it!= map_index_dis.end();it++)
    {
        cout&lt;&lt;"index = "&lt;&lt;it-&gt;first&lt;&lt;"  value = "&lt;&lt;it-&gt;second&lt;&lt;endl;
    }


}
KNN::KNN()
{
  fin.open("d:\\data.txt", ios::in);
    if(!fin)
    {
        cout&lt;&lt;"can nod load the file"&lt;&lt;endl;;
        exit(1);
    }
   for(int i=0;i&lt;maxRow;i++)
   {
       for(int j=0;j&lt;maxCol;j++)
       {
           fin&gt;&gt;dataSet[i][j];
       }
       fin&gt;&gt;labels[i];
   }
   cout&lt;&lt;"输入测试数据：";
   for(int n=0;n&lt;maxCol;n++)
   {
       cin&gt;&gt;testData[n];
   }
   cout&lt;&lt;endl;
   cout&lt;&lt;"输入 k 的值：";
   cin&gt;&gt;k;

}
double KNN::get_distance(double* dt1,double* dt2)
{
    double sum = 0;
    for(int i=0;i&lt;maxCol;i++)
    {
        sum += pow((dt1[i]-dt2[i]),2);
    }
    return (sqrt(sum));
}
void KNN::get_all_distance()
{
    double distance;

    for(int i=0;i&lt;maxRow;i++)
    {
        distance = get_distance(dataSet[i],testData);
        map_index_dis[i] = distance ;
    }


}

void KNN::get_max_fre_label()
{
   vector&lt;pair&lt;int,double&gt;&gt; vec_index_dis( map_index_dis.begin(),map_index_dis.end());
   sort(vec_index_dis.begin(), vec_index_dis.end(), CmpByValue());
   cout&lt;&lt;"前"&lt;&lt; k&lt;&lt;"个最小数据排序为:"&lt;&lt;endl;
   for(int i=0;i&lt;k;i++)
   {
      cout&lt;&lt;"index = "&lt;&lt;vec_index_dis[i].first&lt;&lt;" the distance= "&lt;&lt;vec_index_dis[i].second
          &lt;&lt;" the label = "&lt;&lt;labels[vec_index_dis[i].first]
          &lt;&lt;" the coordinate("&lt;&lt;dataSet[vec_index_dis[i].first][0]&lt;&lt;","
          &lt;&lt;dataSet[vec_index_dis[i].first][0]&lt;&lt;")"&lt;&lt;endl;

      map_label[labels[vec_index_dis[i].first]]++;
   }
    map&lt;char,int&gt;::iterator itr = map_label.begin();
    int max_freq = 0;
    char label;
    while(itr != map_label.end())
    {
        if(itr-&gt;second &gt; max_freq)
        {
            max_freq = itr-&gt;second;
            label = itr-&gt;first;
        }
        itr++;
    }
    cout&lt;&lt;"数据属于标签："&lt;&lt;endl;
    cout&lt;&lt;"label = "&lt;&lt;label&lt;&lt;endl;
}
int main()
{

    KNN knn;
    knn.get_all_distance();
    knn.show();
    knn.get_max_fre_label();

    fin.close();
    getchar();
    return 0;
}
</code></pre>结果显示： 
 </div> 
 <div> 
  <img src="https://images2.imgbox.com/65/56/swO8VlUR_o.jpg" alt=""> 
  <br> 
  <br> 
  <br> 
 </div> 
 <div>
   参考： 
 </div> 
 <div>
   http://blog.csdn.net/lavorange/article/details/16924705 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <div> 
  <br> 
 </div> 
 <br> 
 <br> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e2e670bed7822fd4a08b614ef0551763/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot&#43;Springcloud&#43;SpringBootAdmin 服务发现注册与服务监控完美整合</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/11f9bb8661f4a3a91564d9e2ad01bd7e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实战spring自定义属性(schema)：快速体验</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
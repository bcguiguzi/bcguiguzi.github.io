<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker的概述与（安装|镜像|容器）部署【图文详解】 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker的概述与（安装|镜像|容器）部署【图文详解】" />
<meta property="og:description" content="文章目录 一、Docker 概述1、容器为什越来越受欢迎2、容器与虚拟机的比较3、Docker与虚拟机的区别4、Docker核心概念镜像容器仓库 二、安装 Docker服务1、安装依赖包2、设置阿里云镜像源3、安装 Docker-CE并设置为开机自动启动 二、Docker 镜像操作1、搜索镜像2、获取镜像3、镜像加速下载4、查看镜像信息5、查看下载的镜像文件信息6、查看下载到本地的所有镜像7、根据镜像的唯一标识 ID 号，获取镜像详细信息8、为本地的镜像添加新的标签9、删除镜像10、存出镜像：将镜像保存成为本地文件11、载入镜像：将镜像文件导入到镜像库中12、上传镜像 三、Docker 容器操作1、创建容器2、查看容器的运行状态3、启动容器4、创建并启动容器5、终止容器运行6、容器的进入7、容器的导出与导入8、删除容器 一、Docker 概述 Docker是一个开源的应用容器引擎，基于go语言开发并遵循了apache2.0协议开源。Docker是在Linux容器里运行应用的开源工具，是一种轻量级的“虚拟机”。Docker 的容器技术可以在一台主机上轻松为任何应用创建一个轻量级的、可移植的、自给自足的容器。Docker的设计宗旨：Build,Ship and Run Any App,Anywhere，即通过对应用组件的封装、发布、部署、运行等生命周期的管理，达到应用组件级别的“一次封装，到处运行”的目的。这里的组件，既可以是一个应用，也可以是一套服务，甚至是一个完整的操作系统。Docker的Logo设计为蓝色鲸鱼，拖着许多集装箱。鲸鱼可看作为宿主机，集装箱可理解为相互隔离的容器，每个集装箱中都包含自己的应用程序。
1、容器为什越来越受欢迎 灵活即使是最复杂的应用也可以集装箱化轻量级容器利用并共享主机内核可互换可以即时部署更新和升级便携式可以在本地构建，部署到云，并在任何地方运行可扩展可以增加并自动分发容器副本可堆叠可以垂直和即时堆叠服务 2、容器与虚拟机的比较 容器是在linux上本机运行，并与其他容器共享主机的内核，它运行的是一个独立的进程，不占用其他任何可执行文件的内存，非常轻量。虚拟机运行的是一个完成的操作系统，通过虚拟机管理程序对主机资源进行虚拟访问，相比之下需要的资源更多。 3、Docker与虚拟机的区别 特性Docker容器虚拟机启动速度秒级分钟级计算能力损耗几乎无损耗 50%左右性能接近原生弱于系统支持量（单机）上千个几十个隔离性资源隔离/限制完全隔离 docker本质就是宿主机的一个进程，docker是通过namespace实现资源隔离，通过cgroup实现资源限制，通过写时复制技术（copy-on-write）实现了高效的文件操作（类似虚拟机的磁盘比如分配500g并不是实际占用物理磁盘500g） 4、Docker核心概念 镜像 Docker的镜像是创建容器的基础，类似虚拟机的快照，可以理解为一个面向 Docker 容器引擎的只读模板。通过镜像启动一个容器，一个镜像是一个可执行的包，其中包括运行应用程序所需要的所有内容包含代码，运行时间，库、环境变量、和配置文件。 容器 Docker的容器是从镜像创建的运行实例，它可以被启动、停止和删除。所创建的每一个容器都是相互隔离、互不可见，以保证平台的安全性。可以把容器看做是要给简易版的linux环境（包括root用户权限、镜像空间、用户空间和网络空间等）和运行在其中的应用程序。 仓库 Docker仓库是用来集中保存镜像的地方，当创建了自己的镜像之后，可以使用push命令将它上传到公有仓库（Public）或者私有仓库（Private）。当下次要在另外一台机器上使用这个镜像时，只需从仓库获取。 Docker 的镜像、容器、日志等内容全部都默认存储在 /var/lib/docker 目录下 二、安装 Docker服务 目前 Docker 只能支持 64 位系统。
关闭防火墙和高级防护
systemctl stop firewalld.service setenforce 0 1、安装依赖包 yum install -y yum-utils device-mapper-persistent-data lvm2 yum-utils：提供了 yum-config-manager 工具。
device mapper： 是Linux内核中支持逻辑卷管理的通用设备映射机制，它为实现用于存储资源管理的块设备驱动提供了一个高度模块化的内核架构。
device mapper存储驱动程序需要 device-mapper-persistent-data 和 lvm2。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/1fc4dca833d5485244ec28d6bb54d4ee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-27T19:28:51+08:00" />
<meta property="article:modified_time" content="2021-07-27T19:28:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker的概述与（安装|镜像|容器）部署【图文详解】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Docker__1" rel="nofollow">一、Docker 概述</a></li><li><ul><li><a href="#1_11" rel="nofollow">1、容器为什越来越受欢迎</a></li><li><a href="#2_21" rel="nofollow">2、容器与虚拟机的比较</a></li><li><a href="#3Docker_27" rel="nofollow">3、Docker与虚拟机的区别</a></li><li><a href="#4Docker_41" rel="nofollow">4、Docker核心概念</a></li><li><ul><li><a href="#_42" rel="nofollow">镜像</a></li><li><a href="#_46" rel="nofollow">容器</a></li><li><a href="#_50" rel="nofollow">仓库</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_Docker_56" rel="nofollow">二、安装 Docker服务</a></li><li><ul><li><a href="#1_68" rel="nofollow">1、安装依赖包</a></li><li><a href="#2_83" rel="nofollow">2、设置阿里云镜像源</a></li><li><a href="#3_DockerCE_92" rel="nofollow">3、安装 Docker-CE并设置为开机自动启动</a></li></ul> 
  </li><li><a href="#Docker__108" rel="nofollow">二、Docker 镜像操作</a></li><li><ul><li><a href="#1_109" rel="nofollow">1、搜索镜像</a></li><li><a href="#2_119" rel="nofollow">2、获取镜像</a></li><li><a href="#3_129" rel="nofollow">3、镜像加速下载</a></li><li><a href="#4_149" rel="nofollow">4、查看镜像信息</a></li><li><a href="#5_158" rel="nofollow">5、查看下载的镜像文件信息</a></li><li><a href="#6_167" rel="nofollow">6、查看下载到本地的所有镜像</a></li><li><a href="#7_ID__184" rel="nofollow">7、根据镜像的唯一标识 ID 号，获取镜像详细信息</a></li><li><a href="#8_193" rel="nofollow">8、为本地的镜像添加新的标签</a></li><li><a href="#9_204" rel="nofollow">9、删除镜像</a></li><li><a href="#10_219" rel="nofollow">10、存出镜像：将镜像保存成为本地文件</a></li><li><a href="#11_229" rel="nofollow">11、载入镜像：将镜像文件导入到镜像库中</a></li><li><a href="#12_243" rel="nofollow">12、上传镜像</a></li></ul> 
  </li><li><a href="#Docker__262" rel="nofollow">三、Docker 容器操作</a></li><li><ul><li><a href="#1_264" rel="nofollow">1、创建容器</a></li><li><a href="#2_280" rel="nofollow">2、查看容器的运行状态</a></li><li><a href="#3_288" rel="nofollow">3、启动容器</a></li><li><a href="#4_298" rel="nofollow">4、创建并启动容器</a></li><li><a href="#5_336" rel="nofollow">5、终止容器运行</a></li><li><a href="#6_347" rel="nofollow">6、容器的进入</a></li><li><a href="#7_365" rel="nofollow">7、容器的导出与导入</a></li><li><a href="#8_380" rel="nofollow">8、删除容器</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Docker__1"></a>一、Docker 概述</h2> 
<ul><li>Docker是一个<mark>开源的应用容器引擎</mark>，基于go语言开发并遵循了apache2.0协议开源。</li><li>Docker是在Linux容器里运行应用的开源工具，是一种<mark>轻量级的“虚拟机”</mark>。</li><li>Docker 的容器技术可以在一台主机上轻松为任何应用创建一个轻量级的、可移植的、自给自足的容器。</li><li>Docker的设计宗旨：<code>Build</code>,<code>Ship</code> and <code>Run Any App</code>,<code>Anywhere</code>，即通过对应用组件的封装、发布、部署、运行等生命周期的管理，达到应用组件级别的“<mark>一次封装，到处运行</mark>”的目的。这里的组件，既可以是一个应用，也可以是一套服务，甚至是一个完整的操作系统。</li><li>Docker的Logo设计为蓝色鲸鱼，拖着许多集装箱。鲸鱼可看作为宿主机，集装箱可理解为<mark>相互隔离</mark>的容器，每个集装箱中都包含自己的应用程序。<br> <img src="https://images2.imgbox.com/42/69/6KG9MHUk_o.png" alt="在这里插入图片描述"></li></ul> 
<hr> 
<h3><a id="1_11"></a>1、容器为什越来越受欢迎</h3> 
<table><thead><tr><th>灵活</th><th>即使是最复杂的应用也可以集装箱化</th></tr></thead><tbody><tr><td>轻量级</td><td>容器利用并共享主机内核</td></tr><tr><td>可互换</td><td>可以即时部署更新和升级</td></tr><tr><td>便携式</td><td>可以在本地构建，部署到云，并在任何地方运行</td></tr><tr><td>可扩展</td><td>可以增加并自动分发容器副本</td></tr><tr><td>可堆叠</td><td>可以垂直和即时堆叠服务</td></tr></tbody></table> 
<hr> 
<h3><a id="2_21"></a>2、容器与虚拟机的比较</h3> 
<ul><li>容器是在linux上本机运行，并与其他容器共享主机的内核，它运行的是一个独立的进程，不占用其他任何可执行文件的内存，非常轻量。</li><li>虚拟机运行的是一个完成的操作系统，通过虚拟机管理程序对主机资源进行虚拟访问，相比之下需要的资源更多。</li></ul> 
<hr> 
<h3><a id="3Docker_27"></a>3、Docker与虚拟机的区别</h3> 
<table><thead><tr><th>特性</th><th>Docker容器</th><th>虚拟机</th></tr></thead><tbody><tr><td>启动速度</td><td>秒级</td><td>分钟级</td></tr><tr><td>计算能力损耗</td><td>几乎无</td><td>损耗 50%左右</td></tr><tr><td>性能</td><td>接近原生</td><td>弱于</td></tr><tr><td>系统支持量（单机）</td><td>上千个</td><td>几十个</td></tr><tr><td>隔离性</td><td>资源隔离/限制</td><td>完全隔离</td></tr></tbody></table> 
<ul><li>docker本质就是宿主机的一个进程，docker是通过namespace实现资源隔离，通过cgroup实现资源限制，通过写时复制技术（copy-on-write）实现了高效的文件操作（类似虚拟机的磁盘比如分配500g并不是实际占用物理磁盘500g）</li></ul> 
<hr> 
<h3><a id="4Docker_41"></a>4、Docker核心概念</h3> 
<h4><a id="_42"></a>镜像</h4> 
<ul><li>Docker的镜像是创建容器的基础，类似虚拟机的快照，可以理解为一个面向 Docker 容器引擎的只读模板。</li><li>通过镜像启动一个容器，一个镜像是一个可执行的包，其中包括运行应用程序所需要的所有内容包含代码，运行时间，库、环境变量、和配置文件。</li></ul> 
<h4><a id="_46"></a>容器</h4> 
<ul><li>Docker的容器是从镜像创建的运行实例，它可以被启动、停止和删除。所创建的每一个容器都是相互隔离、互不可见，以保证平台的安全性。</li><li>可以把容器看做是要给简易版的linux环境（包括root用户权限、镜像空间、用户空间和网络空间等）和运行在其中的应用程序。</li></ul> 
<h4><a id="_50"></a>仓库</h4> 
<ul><li>Docker仓库是用来集中保存镜像的地方，当创建了自己的镜像之后，可以使用push命令将它上传到公有仓库（Public）或者私有仓库（Private）。当下次要在另外一台机器上使用这个镜像时，只需从仓库获取。</li></ul> 
<table><tbody><tr><td bgcolor="pink">Docker 的镜像、容器、日志等内容全部都默认存储在 /var/lib/docker 目录下</td></tr></tbody></table> 
<hr> 
<h2><a id="_Docker_56"></a>二、安装 Docker服务</h2> 
<p><mark>目前 Docker 只能支持 64 位系统。</mark></p> 
<p>关闭防火墙和高级防护</p> 
<pre><code class="prism language-handlebars"><span class="token variable">systemctl</span> <span class="token variable">stop</span> <span class="token variable">firewalld</span><span class="token punctuation">.</span><span class="token variable">service</span>
<span class="token variable">setenforce</span> <span class="token number">0</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/72/aa/Bi0LVhl4_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="1_68"></a>1、安装依赖包</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">yum</span> <span class="token variable">install</span> <span class="token variable">-y</span> <span class="token variable">yum-utils</span> <span class="token variable">device-mapper-persistent-data</span> <span class="token variable">lvm2</span> 
</code></pre> 
<blockquote> 
 <p>yum-utils：提供了 yum-config-manager 工具。<br> device mapper： 是Linux内核中支持逻辑卷管理的通用设备映射机制，它为实现用于存储资源管理的块设备驱动提供了一个高度模块化的内核架构。<br> device mapper存储驱动程序需要 device-mapper-persistent-data 和 lvm2。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/29/ea/NwIM0Wfn_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3c/7c/76SVsWDs_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="2_83"></a>2、设置阿里云镜像源</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">yum-config-manager</span> <span class="token variable">--add-repo</span> <span class="token variable">https</span><span class="token punctuation">:</span><span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">mirrors</span><span class="token punctuation">.</span><span class="token variable">aliyun</span><span class="token punctuation">.</span><span class="token variable">com</span><span class="token punctuation">/</span><span class="token variable">docker-ce</span><span class="token punctuation">/</span><span class="token variable">linux</span><span class="token punctuation">/</span><span class="token variable">centos</span><span class="token punctuation">/</span><span class="token variable">docker-ce</span><span class="token punctuation">.</span><span class="token variable">repo</span> 
</code></pre> 
<p><img src="https://images2.imgbox.com/7f/eb/F0Uc0owl_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="3_DockerCE_92"></a>3、安装 Docker-CE并设置为开机自动启动</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">yum</span> <span class="token variable">install</span> <span class="token variable">-y</span> <span class="token variable">docker-ce</span> <span class="token variable">docker-ce-cli</span> <span class="token variable">containerd</span><span class="token punctuation">.</span><span class="token variable">io</span>

<span class="token variable">systemctl</span> <span class="token variable">start</span> <span class="token variable">docker</span><span class="token punctuation">.</span><span class="token variable">service</span>
<span class="token variable">systemctl</span> <span class="token variable">enable</span> <span class="token variable">docker</span><span class="token punctuation">.</span><span class="token variable">service</span> 

<span class="token punctuation">#</span><span class="token variable">查看</span> <span class="token variable">docker</span> <span class="token variable">版本信息</span>
<span class="token variable">docker</span> <span class="token variable">version</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/dd/e4/O5Q7z1cO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/83/81/uHjH3fqA_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="Docker__108"></a>二、Docker 镜像操作</h2> 
<h3><a id="1_109"></a>1、搜索镜像</h3> 
<blockquote> 
 <p>格式：docker search 关键字</p> 
</blockquote> 
<pre><code class="prism language-handlebars"><span class="token variable">docker</span> <span class="token variable">search</span> <span class="token variable">nginx</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e2/2d/Mg2u5vP7_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="2_119"></a>2、获取镜像</h3> 
<blockquote> 
 <p>格式：docker pull 仓库名称[:标签]</p> 
</blockquote> 
<pre><code class="prism language-handlebars"><span class="token block keyword">#如果下载镜像时不指定标签，则默认会下载仓库中最新版本的镜像，即选择标签为</span> <span class="token variable">latest</span> <span class="token variable">标签。</span>
<span class="token variable">docker</span> <span class="token variable">pull</span> <span class="token variable">nginx</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/29/5b/2b2KYWTW_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="3_129"></a>3、镜像加速下载</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">浏览器访问</span> <span class="token variable">https</span><span class="token punctuation">:</span><span class="token punctuation">/</span><span class="token punctuation">/</span><span class="token variable">cr</span><span class="token punctuation">.</span><span class="token variable">console</span><span class="token punctuation">.</span><span class="token variable">aliyun</span><span class="token punctuation">.</span><span class="token variable">com</span><span class="token punctuation">/</span><span class="token variable">cn-hangzhou</span><span class="token punctuation">/</span><span class="token variable">instances</span><span class="token punctuation">/</span><span class="token variable">mirrors</span> <span class="token variable">获取镜像加速器配置</span>

<span class="token variable">mkdir</span> <span class="token variable">-p</span> <span class="token punctuation">/</span><span class="token variable">etc</span><span class="token punctuation">/</span><span class="token variable">docker</span>
<span class="token variable">tee</span> <span class="token punctuation">/</span><span class="token variable">etc</span><span class="token punctuation">/</span><span class="token variable">docker</span><span class="token punctuation">/</span><span class="token variable">daemon</span><span class="token punctuation">.</span><span class="token variable">json</span> <span class="token punctuation">&lt;</span><span class="token punctuation">&lt;</span><span class="token variable">-</span><span class="token string">'EOF'</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token string">"registry-mirrors"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"https://i5k9alba.mirror.aliyuncs.com"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token variable">EOF</span>
<span class="token variable">systemctl</span> <span class="token variable">daemon-reload</span>
<span class="token variable">systemctl</span> <span class="token variable">restart</span> <span class="token variable">docker</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0c/ab/LfVs8XnS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d2/a0/0If4O6Yv_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/63/8c/KHNUBglh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/50/e1/LhJkqZrb_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="4_149"></a>4、查看镜像信息</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">镜像下载后存放在</span> <span class="token punctuation">/</span><span class="token variable">var</span><span class="token punctuation">/</span><span class="token variable">lib</span><span class="token punctuation">/</span><span class="token variable">docker</span> 
</code></pre> 
<p><img src="https://images2.imgbox.com/28/e9/YiPpGzeG_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="5_158"></a>5、查看下载的镜像文件信息</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">cat</span> <span class="token punctuation">/</span><span class="token variable">var</span><span class="token punctuation">/</span><span class="token variable">lib</span><span class="token punctuation">/</span><span class="token variable">docker</span><span class="token punctuation">/</span><span class="token variable">image</span><span class="token punctuation">/</span><span class="token variable">overlay2</span><span class="token punctuation">/</span><span class="token variable">repositories</span><span class="token punctuation">.</span><span class="token variable">json</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/bd/f7/gm3ebNSU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/99/38/k47WNBHT_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="6_167"></a>6、查看下载到本地的所有镜像</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">docker</span> <span class="token variable">images</span>

<span class="token variable">REPOSITORY</span>   <span class="token variable">TAG</span>       <span class="token variable">IMAGE</span> <span class="token variable">ID</span>       <span class="token variable">CREATED</span>      <span class="token variable">SIZE</span>
<span class="token variable">nginx</span>        <span class="token variable">latest</span>    <span class="token variable">ae2feff98a0c</span>   <span class="token number">9</span> <span class="token variable">days</span> <span class="token variable">ago</span>   <span class="token number">133</span><span class="token variable">MB</span>
</code></pre> 
<blockquote> 
 <p>REPOSITORY：镜像属于的仓库<br> TAG：镜像的标签信息，标记同一个仓库中的不同镜像<br> IMAGE ID：镜像的唯一ID 号，唯一标识一个镜像<br> CREATED：镜像创建时间<br> VIRTUAL SIZE：镜像大小</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/64/67/H047WDad_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="7_ID__184"></a>7、根据镜像的唯一标识 ID 号，获取镜像详细信息</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：docker</span> <span class="token variable">inspect</span> <span class="token variable">镜像ID号</span>
<span class="token variable">docker</span> <span class="token variable">inspect</span> <span class="token variable">ae2feff98a0c</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c1/da/TZCGwnmK_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="8_193"></a>8、为本地的镜像添加新的标签</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：docker</span> <span class="token variable">tag</span> <span class="token variable">名称</span><span class="token punctuation">:</span><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">标签</span><span class="token punctuation">]</span></span> <span class="token variable">新名称</span><span class="token punctuation">:</span><span class="token brackets"><span class="token punctuation">[</span><span class="token variable">新标签</span><span class="token punctuation">]</span></span>
<span class="token variable">docker</span> <span class="token variable">tag</span> <span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">latest</span> <span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">web</span>

<span class="token variable">docker</span> <span class="token variable">images</span> <span class="token punctuation">|</span> <span class="token variable">grep</span> <span class="token variable">nginx</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3e/9c/nzBd9Fs3_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="9_204"></a>9、删除镜像</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：</span>
<span class="token variable">docker</span> <span class="token variable">rmi</span> <span class="token variable">仓库名称</span><span class="token punctuation">:</span><span class="token variable">标签</span>				<span class="token punctuation">#</span><span class="token variable">当一个镜像有多个标签时，只是删除其中指定的标签</span>
<span class="token variable">或者</span>
<span class="token variable">docker</span> <span class="token variable">rmi</span> <span class="token variable">镜像ID号</span>						<span class="token punctuation">#</span><span class="token variable">会彻底删除该镜像</span>

<span class="token variable">注意：如果该镜像已经被容器使用，正确的做法是先删除依赖该镜像的所有容器，再去删除镜像。</span>

<span class="token variable">docker</span> <span class="token variable">rmi</span> <span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">web</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b0/4a/XfqDuWkJ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="10_219"></a>10、存出镜像：将镜像保存成为本地文件</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：docker</span> <span class="token variable">save</span> <span class="token variable">-o</span> <span class="token variable">存储文件名</span> <span class="token variable">存储的镜像</span>
<span class="token variable">docker</span> <span class="token variable">save</span> <span class="token variable">-o</span> <span class="token variable">nginx</span><span class="token punctuation">.</span><span class="token variable">tar</span> <span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">latest</span>			<span class="token punctuation">#</span><span class="token variable">存出镜像命名为nginx存在当前目录下</span>
<span class="token variable">ls</span> <span class="token variable">-lh</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/83/a1/IuO2hfWW_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="11_229"></a>11、载入镜像：将镜像文件导入到镜像库中</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：</span>
<span class="token variable">docker</span> <span class="token variable">load</span> <span class="token punctuation">&lt;</span> <span class="token variable">存出的文件</span>
<span class="token variable">或者</span>
<span class="token variable">docker</span> <span class="token variable">load</span> <span class="token variable">-i</span> <span class="token variable">存出的文件</span>

<span class="token variable">docker</span> <span class="token variable">load</span> <span class="token punctuation">&lt;</span> <span class="token variable">nginx</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/aa/lYXHPV1Z_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1f/43/QjJvmW3J_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="12_243"></a>12、上传镜像</h3> 
<ul><li> <p>默认上传到 docker Hub 官方公共仓库，需要注册使用公共仓库的账号。https://hub.docker.com</p> </li><li> <p>可以使用 docker login 命令来输入用户名、密码和邮箱来完成注册和登录。</p> </li><li> <p>在上传镜像之前，还需要先对本地镜像添加新的标签，然后再使用 docker push 命令进行上传。</p> </li></ul> 
<pre><code class="prism language-handlebars"><span class="token variable">docker</span> <span class="token variable">tag</span> <span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">latest</span> <span class="token variable">cxy</span><span class="token punctuation">/</span><span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">web</span>		<span class="token punctuation">#</span><span class="token variable">添加新的标签</span>
<span class="token variable">docker</span> <span class="token variable">login</span>								<span class="token punctuation">#</span><span class="token variable">登录公共仓库</span>
<span class="token variable">Username：</span>
<span class="token variable">password：</span>
<span class="token variable">docker</span> <span class="token variable">push</span> <span class="token variable">cxy</span><span class="token punctuation">/</span><span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">web</span>					<span class="token punctuation">#</span><span class="token variable">上传镜像</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/35/xFq3FzPI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ec/89/l0ODd1ym_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="Docker__262"></a>三、Docker 容器操作</h2> 
<h3><a id="1_264"></a>1、创建容器</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">新创建的容器默认处于停止状态，不运行任何程序，需要在其中发起一个进程来启动容器。</span>

<span class="token variable">格式：docker</span> <span class="token variable">create</span> <span class="token brackets"><span class="token punctuation">[</span><span class="token variable">选项</span><span class="token punctuation">]</span></span> <span class="token variable">镜像</span>
<span class="token variable">常用选项：</span>
<span class="token variable">-i：让容器的输入保持打开</span>
<span class="token variable">-t：让</span> <span class="token variable">Docker</span> <span class="token variable">分配一个伪终端</span>

<span class="token variable">docker</span> <span class="token variable">create</span> <span class="token variable">-it</span> <span class="token variable">nginx</span><span class="token punctuation">:</span><span class="token variable">latest</span> <span class="token punctuation">/</span><span class="token variable">bin</span><span class="token punctuation">/</span><span class="token variable">bash</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/85/14/ofy2Oigj_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="2_280"></a>2、查看容器的运行状态</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span>			<span class="token punctuation">#</span><span class="token variable">-a</span> <span class="token variable">选项可以显示所有的容器</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/81/5d/m6wTRXTq_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="3_288"></a>3、启动容器</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：docker</span> <span class="token variable">start</span> <span class="token variable">容器的ID</span><span class="token punctuation">/</span><span class="token variable">名称</span>
<span class="token variable">docker</span> <span class="token variable">start</span> <span class="token variable">cf5147ad722b</span>
<span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3b/5c/6cFLG4K2_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="4_298"></a>4、创建并启动容器</h3> 
<ul><li> <p>可以直接执行 docker run 命令， 等同于先执行 docker create 命令，再执行 docker start 命令。</p> </li><li> <p><mark>注意：容器是一个与其中运行的 shell 命令共存亡的终端，命令运行容器运行， 命令结束容器退出。</mark></p> </li></ul> 
<p><strong>当利用 docker run 来创建容器时， Docker 在后台的标准运行过程是：</strong></p> 
<ul><li> <p>检查本地是否存在指定的镜像。当镜像不存在时，会从公有仓库下载；</p> </li><li> <p>利用镜像创建并启动一个容器；</p> </li><li> <p>分配一个文件系统给容器，在只读的镜像层外面挂载一层可读写层；</p> </li><li> <p>从宿主主机配置的网桥接口中桥接一个虚拟机接口到容器中；</p> </li><li> <p>分配一个地址池中的 IP 地址给容器；</p> </li><li> <p>执行用户指定的应用程序，执行完毕后容器被终止运行。</p> </li></ul> 
<pre><code class="prism language-handlebars"><span class="token variable">docker</span> <span class="token variable">run</span> <span class="token variable">centos</span><span class="token punctuation">:</span><span class="token number">7</span> <span class="token variable">bash</span> <span class="token variable">-c</span> <span class="token variable">ls</span> <span class="token punctuation">/</span>
<span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span>					<span class="token punctuation">#</span><span class="token variable">会发现创建了一个新容器并启动执行一条</span> <span class="token variable">shell</span> <span class="token variable">命令，之后就停止了</span>

<span class="token punctuation">#</span><span class="token variable">在后台持续运行</span> <span class="token variable">docker</span> <span class="token variable">run</span> <span class="token variable">创建的容器</span>
<span class="token variable">需要在</span> <span class="token variable">docker</span> <span class="token variable">run</span> <span class="token variable">命令之后添加</span> <span class="token variable">-d</span> <span class="token variable">选项让</span> <span class="token variable">Docker</span> <span class="token variable">容器以守护形式在后台运行。并且容器所运行的程序不能结束。</span>

<span class="token variable">例如：docker</span> <span class="token variable">run</span> <span class="token variable">-d</span> <span class="token variable">centos</span><span class="token punctuation">:</span><span class="token number">7</span> <span class="token variable">bash</span> <span class="token variable">-c</span> <span class="token string">"while true;do echo hello;done"</span>
<span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span>					<span class="token punctuation">#</span><span class="token variable">可以看出容器始终处于</span> <span class="token variable">UP，运行状态</span>
<span class="token variable">CONTAINER</span> <span class="token variable">ID</span>   <span class="token variable">IMAGE</span>      <span class="token variable">COMMAND</span>                  <span class="token variable">CREATED</span>          <span class="token variable">STATUS</span>         <span class="token variable">PORTS</span>     <span class="token variable">NAMES</span>
<span class="token number">2592</span><span class="token variable">d3fad0fb</span>   <span class="token variable">centos</span><span class="token punctuation">:</span><span class="token number">7</span>   <span class="token string">"/usr/bin/bash -c 'w…"</span>   <span class="token number">2</span> <span class="token variable">seconds</span> <span class="token variable">ago</span>    <span class="token variable">Up</span> <span class="token number">2</span> <span class="token variable">seconds</span>             <span class="token variable">peaceful_chatelet</span>

<span class="token variable">docker</span> <span class="token variable">run</span> <span class="token variable">-itd</span> <span class="token variable">--name</span> <span class="token variable">test1</span> <span class="token variable">centos</span><span class="token punctuation">:</span><span class="token number">7</span> <span class="token block keyword">/bin/bash</span>
<span class="token variable">如果不加</span> <span class="token variable">-d</span> <span class="token variable">这个选项的话，你退出容器，则容器就会被停止</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/0a/20/KqNpkbzb_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d1/49/YqFnc7WR_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="5_336"></a>5、终止容器运行</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：docker</span> <span class="token variable">stop</span> <span class="token variable">容器的ID</span><span class="token punctuation">/</span><span class="token variable">名称</span>
<span class="token variable">docker</span> <span class="token variable">stop</span> <span class="token number">8</span><span class="token variable">d4c4d024437</span>

<span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6a/79/RuFp7lvs_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="6_347"></a>6、容器的进入</h3> 
<ul><li>需要进入容器进行命令操作时，可以使用 docker exec 命令进入运行着的容器。</li></ul> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：docker</span> <span class="token variable">exec</span> <span class="token variable">-it</span> <span class="token variable">容器ID</span><span class="token punctuation">/</span><span class="token variable">名称</span> <span class="token punctuation">/</span><span class="token variable">bin</span><span class="token punctuation">/</span><span class="token variable">bash</span>
<span class="token variable">-i</span> <span class="token variable">选项表示让容器的输入保持打开；</span>
<span class="token variable">-t</span> <span class="token variable">选项表示让</span> <span class="token variable">Docker</span> <span class="token variable">分配一个伪终端。</span>

<span class="token variable">docker</span> <span class="token variable">start</span> <span class="token number">2592</span><span class="token variable">d3fad0fb</span>					<span class="token punctuation">#</span><span class="token variable">进入容器前，确保容器正在运行</span>
<span class="token variable">docker</span> <span class="token variable">exec</span> <span class="token variable">-it</span> <span class="token number">2592</span><span class="token variable">d3fad0fb</span> <span class="token punctuation">/</span><span class="token variable">bin</span><span class="token punctuation">/</span><span class="token variable">bash</span>
<span class="token variable">ls</span>
<span class="token variable">exit</span>				<span class="token punctuation">#</span><span class="token variable">退出容器后，容器仍在运行</span>
<span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f5/3e/XDLx29Ri_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/06/a3/zeP4smxa_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="7_365"></a>7、容器的导出与导入</h3> 
<ul><li>用户可以将任何一个Docker 容器从一台机器迁移到另一台机器。在迁移过程中，可以使用docker export 命令将已经创建好的容器导出为文件，无论这个容器是处于运行状态还是停止状态均可导出。可将导出文件传输到其他机器，通过相应的导入命令实现容器的迁移。</li></ul> 
<pre><code class="prism language-handlebars"><span class="token block keyword">#导出格式：docker</span> <span class="token variable">export</span> <span class="token variable">容器ID</span><span class="token punctuation">/</span><span class="token variable">名称</span> <span class="token punctuation">&gt;</span> <span class="token variable">文件名</span>
<span class="token variable">docker</span> <span class="token variable">export</span> <span class="token number">2592</span><span class="token variable">d3fad0fb</span> <span class="token punctuation">&gt;</span> <span class="token variable">centos7</span><span class="token punctuation">.</span><span class="token variable">tar</span>

<span class="token punctuation">#</span><span class="token variable">导入格式：cat</span> <span class="token variable">文件名</span> <span class="token punctuation">|</span> <span class="token variable">docker</span> <span class="token variable">import</span> <span class="token variable">–</span> <span class="token variable">镜像名称</span><span class="token punctuation">:</span><span class="token variable">标签</span>
<span class="token variable">cat</span> <span class="token variable">centos7</span><span class="token punctuation">.</span><span class="token variable">tar</span> <span class="token punctuation">|</span> <span class="token variable">docker</span> <span class="token variable">import</span> <span class="token variable">-</span> <span class="token variable">centos7</span><span class="token punctuation">:</span><span class="token variable">test</span>			<span class="token punctuation">#</span><span class="token variable">导入后会生成镜像，但不会创建容器</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/44/sGbiMT8L_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/79/b4/TUbPWSxl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e3/45/mpQSvI3Q_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="8_380"></a>8、删除容器</h3> 
<pre><code class="prism language-handlebars"><span class="token variable">格式：docker</span> <span class="token variable">rm</span> <span class="token brackets"><span class="token punctuation">[</span><span class="token variable">-f</span><span class="token punctuation">]</span></span> <span class="token variable">容器ID</span><span class="token punctuation">/</span><span class="token variable">名称</span>
<span class="token variable">docker</span> <span class="token variable">stop</span> <span class="token number">2592</span><span class="token variable">d3fad0fb</span>
<span class="token variable">docker</span> <span class="token variable">rm</span> <span class="token number">2592</span><span class="token variable">d3fad0fb</span>				<span class="token punctuation">#</span><span class="token variable">删除已经终止状态的容器</span>

<span class="token variable">docker</span> <span class="token variable">rm</span> <span class="token variable">-f</span> <span class="token number">2592</span><span class="token variable">d3fad0fb</span>			<span class="token punctuation">#</span><span class="token variable">强制删除正在运行的容器</span>

<span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span> <span class="token punctuation">|</span> <span class="token variable">awk</span> <span class="token string">'NR&gt;=2{print "docker stop "$1}'</span> <span class="token punctuation">|</span> <span class="token variable">bash</span>			<span class="token punctuation">#</span><span class="token variable">批量停止容器</span>

<span class="token variable">docker</span> <span class="token variable">ps</span> <span class="token variable">-a</span> <span class="token punctuation">|</span> <span class="token variable">awk</span> <span class="token string">'NR&gt;=2{print "docker rm "$1}'</span> <span class="token punctuation">|</span> <span class="token variable">bash</span>				<span class="token punctuation">#</span><span class="token variable">批量删除所有容器</span>

<span class="token variable">docker</span> <span class="token variable">images</span> <span class="token punctuation">|</span> <span class="token variable">awk</span> <span class="token string">'NR&gt;=2{print "docker rmi "$3}'</span> <span class="token punctuation">|</span> <span class="token variable">bash</span>			<span class="token punctuation">#</span><span class="token variable">批量删除镜像</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/95/2d/5f7ZfoBR_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c8/4d/V868Lg7y_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d1/3e/YnuC7rRd_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a0/82/EragvlBf_o.png" alt="在这里插入图片描述"></p> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f8e0fb2155a8f10780ca672544952a95/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PageHelper和Mybatis Generator的入门使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6b414c7dba0063ce6119f1eca89ec579/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android Program type already present问题解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
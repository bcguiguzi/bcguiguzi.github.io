<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>lab8文件系统与IO子系统原理 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="lab8文件系统与IO子系统原理" />
<meta property="og:description" content="文件描述符 文件访问方式：进程访问文件数据前必须先打开文件
内核跟踪进程打开的所有文件：操作系统为每个进程维护一个打开文件表，文件描述符是打开文件的标识，即 文件描述符是操作系统在打开文件表中维护的打开文件状态和信息，其中包括：
访问模式：
顺序访问：按字节顺序一次读取（大多数）
随机访问：从中间读写（不常用，但很重要，比如虚拟内存中把内存页存储在文件）
索引访问：依据数据特征索引，操作系统通常不提供文正索引访问，可以在上面建数据库，数据块建立索引内容
网络/分布式文件系统 a. 例如：NFS，SMB，AFS，GFS
b. 文件可以通过网络被共享，文件位于远程服务器，客户端远程挂载服务器文件系统，标准系统文件访问被转换成远程访问，要有标准文件共享协议。
c. 面临更多挑战，例如客户端用户辨别、一致性问题、错误处理模式。
虚拟文件系统： 虚拟文件系统的提出是为了面对多种不同的文件系统对上提供一种统一的接口。
IO子系统 I/O数据传输 CPU与设备控制器的数据传输：
1、程序控制I/O：
a. 通过CPU的in/out或者load/store传输所有数据
b. 特点是硬件简答，编程容易，但是消耗CPU时间，适用于简单的小型的设备I/O
2、直接内存访问（DMA）
a. 设备控制器可直接访问系统总线
b. 控制器直接与内存湘湖传输数据
c. 特点是设备传输数据不影响CPU，只需要CPU参与设置，适用于高吞吐量的I/O。
磁盘调度 通过优化磁盘访问请求顺序来提高磁盘访问性能。
1、寻道时间是磁盘访问最耗时的部分
2、同时会有多个在同一磁盘上的I/O请求
3、随机处理磁盘访问请求的性能表现很差
调度算法：
为什么需要磁盘调度？
如上图所示，盘片是匀速旋转的，如果有一个磁盘访问序列，不进行优化而随机访问的话，效率很低
1、FIFO：先进先出，按顺序
2、SSTF（最短服务时间优先）：选择离磁臂当前位置最近的请求执行
3、扫描算法：磁臂在一个方向上移动，访问所有未完成的请求，直到磁臂到达该方向上最后的磁道，也称电梯算法
4、循环扫描算法：限制为仅在一个方向上扫描
5、C-LOOK算法：磁臂先到达该方向上最后一个请求的位置，然后立即反转
6、N步扫描算法：一侧请求过多时，磁头会有粘着现象，后面磁道无法响应，将磁盘请求队列分成长度为N的子队列，按FIFO算法依次处理所有队列，扫描算法处理每个队列
7、双队列扫描算法：只有两个队列，交替使用扫描算法处理两个队列，新生成的I/O请求放入另一个队列中。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/fe88e5cea3400b8f45da1736fc117d9e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-14T20:38:05+08:00" />
<meta property="article:modified_time" content="2021-06-14T20:38:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">lab8文件系统与IO子系统原理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>文件描述符</h3> 
<p>文件访问方式：进程访问文件数据前必须先打开文件<br> 内核跟踪进程打开的所有文件：操作系统为每个进程维护一个打开文件表，文件描述符是打开文件的标识，即 文件描述符是操作系统在打开文件表中维护的打开文件状态和信息，其中包括：<br> 访问模式：<br> 顺序访问：按字节顺序一次读取（大多数）<br> 随机访问：从中间读写（不常用，但很重要，比如虚拟内存中把内存页存储在文件）<br> 索引访问：依据数据特征索引，操作系统通常不提供文正索引访问，可以在上面建数据库，数据块建立索引内容</p> 
<h3><a id="_8"></a>网络/分布式文件系统</h3> 
<p>a. 例如：NFS，SMB，AFS，GFS<br> b. 文件可以通过网络被共享，文件位于远程服务器，客户端远程挂载服务器文件系统，标准系统文件访问被转换成远程访问，要有标准文件共享协议。<br> c. 面临更多挑战，例如客户端用户辨别、一致性问题、错误处理模式。</p> 
<h3><a id="_13"></a>虚拟文件系统：</h3> 
<p>虚拟文件系统的提出是为了面对多种不同的文件系统对上提供一种统一的接口。<br> <img src="https://images2.imgbox.com/8b/a5/wlVXZQJ4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="IO_17"></a>IO子系统</h2> 
<h3><a id="IO_19"></a>I/O数据传输</h3> 
<p><strong>CPU与设备控制器的数据传输：</strong><br> 1、程序控制I/O：<br> a. 通过CPU的in/out或者load/store传输所有数据<br> b. 特点是硬件简答，编程容易，但是消耗CPU时间，适用于简单的小型的设备I/O<br> <strong>2、直接内存访问（DMA）</strong><br> a. 设备控制器可直接访问系统总线<br> b. 控制器直接与内存湘湖传输数据<br> c. 特点是设备传输数据不影响CPU，只需要CPU参与设置，适用于高吞吐量的I/O。<br> <img src="https://images2.imgbox.com/f6/b0/0aU1fZDm_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_30"></a>磁盘调度</h3> 
<p>通过优化磁盘访问请求顺序来提高磁盘访问性能。<br> 1、寻道时间是磁盘访问最耗时的部分<br> 2、同时会有多个在同一磁盘上的I/O请求<br> 3、随机处理磁盘访问请求的性能表现很差<br> 调度算法：<br> <img src="https://images2.imgbox.com/9d/7f/sKxTK0GV_o.png" alt="在这里插入图片描述"><br> 为什么需要磁盘调度？<br> 如上图所示，盘片是匀速旋转的，如果有一个磁盘访问序列，不进行优化而随机访问的话，效率很低<br> <img src="https://images2.imgbox.com/38/fb/IijsMMFP_o.png" alt="在这里插入图片描述"><br> 1、FIFO：先进先出，按顺序<br> 2、SSTF（最短服务时间优先）：选择离磁臂当前位置最近的请求执行<br> 3、扫描算法：磁臂在一个方向上移动，访问所有未完成的请求，直到磁臂到达该方向上最后的磁道，也称电梯算法<br> 4、循环扫描算法：限制为仅在一个方向上扫描<br> 5、C-LOOK算法：磁臂先到达该方向上最后一个请求的位置，然后立即反转<br> 6、N步扫描算法：一侧请求过多时，磁头会有粘着现象，后面磁道无法响应，将磁盘请求队列分成长度为N的子队列，按FIFO算法依次处理所有队列，扫描算法处理每个队列<br> 7、双队列扫描算法：只有两个队列，交替使用扫描算法处理两个队列，新生成的I/O请求放入另一个队列中。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2bec3b091e95f52e621f36a73700b2a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2021-06-14</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/45c7df44f96f84fa430b834f5d9e952b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">pyinstaller 防反编译</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
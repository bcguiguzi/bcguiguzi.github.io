<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux centos7无法连接ssh - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux centos7无法连接ssh" />
<meta property="og:description" content="在centos7连接ssh时,参考了以下博文,终于完美解决
https://blog.csdn.net/trackle400/article/details/52755571
1、 首先，要确保CentOS7安装了 openssh-server，在终端中输入 yum list installed | grep openssh-server
此处显示已经安装了 openssh-server，如果又没任何输出显示表示没有安装 openssh-server，通过输入 yum install openssh-server
来进行安装openssh-server
2、 找到了 /etc/ssh/ 目录下的sshd服务配置文件 sshd_config，用Vim编辑器打开
将文件中，关于监听端口、监听地址前的 # 号去除
然后开启允许远程登录
最后，开启使用用户名密码来作为连接验证
保存文件，退出
3、 开启 sshd 服务，输入 sudo service sshd start
检查 sshd 服务是否已经开启，输入ps -e | grep sshd
或者输入netstat -an | grep 22 检查 22 号端口是否开启监听
4、 在Vmware Workstation中，查看CentOS7的属性，发现网络连接方式是采用的 NAT 方式连接的
5、 在Vmware Workstation中，点击编辑=》虚拟网络编辑器，进入虚拟网络编辑器，查看发现 NAT 模式的连接采用的网络适配器名称为VMnet8
6、在 windows 主机中，在命令行中输入ipconfig 查看主机IP，找到 VMnet8 的连接信息，此处 ip 为192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/ec354337e61bdd214f758dfdc62036c9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-29T12:24:46+08:00" />
<meta property="article:modified_time" content="2018-05-29T12:24:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux centos7无法连接ssh</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在centos7连接ssh时,参考了以下博文,终于完美解决</p> 
<p>https://blog.csdn.net/trackle400/article/details/52755571<br></p> 
<p><br></p> 
<p><span style="font-weight:bold;"></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';">1、<span style="white-space:pre;"> </span> 首先，要确保CentOS7安装了  <span style="font-weight:700;">openssh-server</span>，在终端中输入  <span style="white-space:pre;"></span><span style="font-weight:700;">yum list installed | grep openssh-server</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-weight:700;"><span style="white-space:pre;"><img src="https://images2.imgbox.com/d3/e0/btx3J1bY_o.jpg" alt=""></span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;"><span style="font-weight:bold;"></span>此处</span>显示已经安装了  <span style="font-weight:700;">openssh-server</span>，如果又没任何输出显示表示没有安装  <span style="font-weight:700;">openssh-server</span>，通过输入  <span style="font-weight:700;">yum install openssh-server</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-weight:700;"><span style="white-space:pre;"><img src="https://images2.imgbox.com/ab/15/0nqPONTO_o.jpg" alt=""></span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;"><span style="font-weight:bold;"></span>来进行</span>安装<span style="font-weight:700;">openssh-server</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><br></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';">2、<span style="white-space:pre;"> </span> 找到了  <span style="font-weight:700;">/etc/ssh/  </span>目录下的sshd服务配置文件<span style="font-weight:700;"> sshd_config</span>，用Vim编辑器打开</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;"></span>将文件中，关于监听端口、监听地址前的 # 号去除</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/e3/73/BPNeam10_o.jpg" alt=""></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;"></span>然后开启允许远程登录</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><span style="font-family:'Microsoft YaHei';"><img src="https://images2.imgbox.com/78/a6/h2ULr6Hv_o.jpg" alt=""></span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;">最后</span>，开启使用用户名密码来作为连接验证</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/b5/34/NxKDGvW0_o.jpg" alt=""></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;">保存</span>文件，退出</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><br></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';">3、<span style="white-space:pre;"> </span> 开启  sshd  服务，输入 <span style="font-weight:700;">sudo service sshd start</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/8b/ea/Hh9Ey7mz_o.jpg" alt=""></span><span style="white-space:pre;"></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;"></span>检查  sshd  服务是否已经开启，输入<span style="font-weight:700;">ps -e | grep sshd</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><span style="font-family:'Microsoft YaHei';"><img src="https://images2.imgbox.com/7a/a2/pXNLkAbR_o.jpg" alt=""></span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;">或者</span>输入<span style="font-weight:700;">netstat -an | grep 22  </span>检查  <span style="font-weight:700;">22</span> 号端口是否开启监听</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/df/05/yfLsDE8m_o.jpg" alt=""></span></p> 
<p style="background-color:rgb(255,255,255);"><br></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';">4、<span style="white-space:pre;"> </span> 在Vmware Workstation中，查看CentOS7的属性，发现网络连接方式是采用的  <span style="font-weight:700;">NAT</span>  方式连接的</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/19/01/BudYXzhq_o.jpg" alt=""></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><br></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;">5</span>、<span style="white-space:pre;"> 在Vmware Workstation中，</span>点击<span style="font-weight:700;">编辑</span>=》<span style="font-weight:700;">虚拟网络编辑器</span>，进入虚拟网络编辑器，查看发现 NAT 模式的连接采用的网络适配器名称为<span style="font-weight:700;">VMnet8</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/ef/88/0fX6cEQL_o.jpg" alt=""></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><br></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;">6</span>、<span style="white-space:pre;"></span>在 windows 主机中，在命令行中输入<span style="font-weight:700;">ipconfig </span>查看主机IP，找到 VMnet8 的连接信息，此处 ip 为<span style="font-weight:700;">192.168.30.1</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/26/02/qaQ8G8cF_o.jpg" alt=""></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><span style="font-family:'Microsoft YaHei';"><br></span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;">7</span>、<span style="white-space:pre;"></span>在CentOS中，输入<span style="font-weight:700;">ifconfig</span>查看网络连接地址，发现CentOS的网络地址为<span style="font-weight:700;">192.168.112.128</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><img src="https://images2.imgbox.com/a2/f0/hxUQ7n71_o.jpg" alt=""></span></p> 
<p><br></p> 
<p>8.<span style="font-family:'Microsoft YaHei';background-color:rgb(255,255,255);">在CentOS中，输入</span><span style="font-weight:700;font-family:'Microsoft YaHei';background-color:rgb(255,255,255);">ping 192.168.30.1</span><span style="font-family:'Microsoft YaHei';background-color:rgb(255,255,255);"> 测试是否能连通主机，发现不能连通</span></p> 
<p><span style="font-family:'Microsoft YaHei';background-color:rgb(255,255,255);">在主机中,输入ping 192.168.112.128 测试是否能连通centos,发现能连通</span></p> 
<p><span style="font-family:'Microsoft YaHei';"><span style="background-color:rgb(255,255,255);">接下来的操作是:关闭linux的防火墙,发现能ping通主机了,说明防火墙阻止了</span></span></p> 
<p><span style="font-family:'Microsoft YaHei';"><span style="background-color:rgb(255,255,255);">查资料得出<span style="background-color:rgb(255,255,255);">原来是<strong>Windows的防火墙没有打开</strong></span><strong><span style="background-color:rgb(255,255,255);">ICMPv4-in</span><span style="background-color:rgb(255,255,255);">这个规则</span></strong></span></span></p> 
<p>打开防火墙设置,选择高级设置,入站规则,将<span style="background-color:rgb(255,255,255);">配置文件类型为“公用”的</span><span style="background-color:rgb(255,255,255);">“</span><span style="background-color:rgb(255,255,255);">文件和打印共享（回显请求 – ICMPv4-In</span><span style="background-color:rgb(255,255,255);">）”</span><span style="background-color:rgb(255,255,255);">规则，设置为允许。</span></p> 
<p><span style="background-color:rgb(255,255,255);"><img src="https://images2.imgbox.com/0c/4b/DfKnvMcC_o.png" alt=""><br></span></p> 
<p><span style="background-color:rgb(255,255,255);">设置完成后,发现能够正常连接</span></p> 
<p><span style="background-color:rgb(255,255,255);"><br></span></p> 
<p><span style="background-color:rgb(255,255,255);"></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;">9、</span>为了免去每次开启 CentOS 时，都要手动开启  sshd 服务，可以将 sshd 服务添加至自启动列表中，输入<span style="font-weight:700;">systemctl enable sshd.service</span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-weight:700;"><span style="white-space:pre;"><span style="font-family:'Microsoft YaHei';"><img src="https://images2.imgbox.com/a8/3b/iAqm3chq_o.jpg" alt=""></span></span></span></p> 
<p style="background-color:rgb(255,255,255);"><span style="font-family:'Microsoft YaHei';"><span style="white-space:pre;"></span>可以通过输入<span style="font-weight:700;">systemctl list-unit-files | grep sshd</span>，查看是否开启了sshd 服务自启动</span></p> 
<p style="background-color:rgb(255,255,255);"><span style="white-space:pre;"><span style="font-family:'Microsoft YaHei';"><img src="https://images2.imgbox.com/fb/8e/pkEEKTGx_o.jpg" alt=""></span></span></p> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8141c83318376ff576437dd9cdeccbb8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在cmd/bat脚本中获取当前脚本文件所在目录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9353115d0b43418c24182008095f8039/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python 环境下的三种基础结构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
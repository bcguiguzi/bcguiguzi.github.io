<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【微信小程序】-- 案例 - 本地生活（列表页面）（三十） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【微信小程序】-- 案例 - 本地生活（列表页面）（三十）" />
<meta property="og:description" content="💌 所属专栏：【微信小程序开发教程】 😀 作 者：我是夜阑的狗🐶 🚀 个人简介：一个正在努力学技术的CV工程师，专注基础和实战分享 ，欢迎咨询！
💖 欢迎大家：这里是CSDN，我总结知识的地方，喜欢的话请三连，有问题请私信 😘 😘 😘
文章目录 前言一、案例 - 本地生活（列表页面）1、演示页面效果以及主要功能 二、页面导航并传参三、上拉触底时加载下一页数据1、动态设置页面标题2、创建编译模式3、列表页面的 API 接口4、实现上拉加载数据和效果5、对上拉触底进行节流处理6、判断数据是否加载完毕 四、下拉刷新列表数据五、使用 wxs 处理手机号总结 前言 大家好，又见面了，我是夜阑的狗🐶，本文是专栏【微信小程序开发教程】专栏的第30篇文章;
今天开始学习微信小程序的第15天💖💖💖，开启新的征程，记录最美好的时刻🎉，每天进步一点点。
专栏地址：【微信小程序开发教程】， 此专栏是我是夜阑的狗微信小程序开发过程的总结，希望能够加深自己的印象，以及帮助到其他的小伙伴😉😉。
如果文章有什么需要改进的地方还请大佬不吝赐教👏👏。
一、案例 - 本地生活（列表页面） 前面已经学习了WXS 脚本的概念和基本语法，通过栗子了解到WXS的怎么创建和调用。接下来就来根据前面学的知识，在案例-本地生活上进行实践。话不多说，让我们原文再续，书接上回吧。
1、演示页面效果以及主要功能 首先来看一下页面演示效果，页面中有列表数据，其中还要具备下拉和上拉刷新功能：
接下来实现主要功能有三个：
页面导航并传参上拉触底时加载下一页数据下拉刷新列表数据 二、页面导航并传参 首先创建列表页面，可以通过 app.json 文件进行快速创建。
app.json
{ &#34;pages&#34;:[ &#34;pages/home/home&#34;, &#34;pages/message/message&#34;, &#34;pages/contact/contact&#34;, &#34;pages/shoplist/shoplist&#34; ], } 可以来看一下实际结果：
从 view 组件改造成 navigator 组件，从而支持跳转行为，并且在跳转过程中还要传递参数（id &#43; 名称），为了后续页面标题和查询数据做准备。
home.wxml
&lt;view class=&#34;grid-list&#34;&gt; &lt;navigator class=&#34;grid-item&#34; wx:for=&#34;{{gridList}}&#34; wx:key=&#34;id&#34; url=&#34;/pages/shoplist/shoplist?id={{item.id}}&amp;title={{item.name}}&#34;&gt; &lt;image src=&#34;{{item.icon}}&#34;&gt;&lt;/image&gt; &lt;text&gt;{{item." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f3da16ac4a3a4ab3c661c69790f1d2a9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-09T10:04:45+08:00" />
<meta property="article:modified_time" content="2023-03-09T10:04:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【微信小程序】-- 案例 - 本地生活（列表页面）（三十）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/5b/c7/lOAfZHWH_o.gif" alt="请添加图片描述"></p> 
<blockquote> 
 <ul><li> <p><font size="3"> 💌 所属专栏：<a href="https://mp.csdn.net/mp_blog/manage/column/columnManage/12213394">【微信小程序开发教程】</a> </font></p> </li><li> <p><font size="3"> 😀 作  者：<a href="https://blog.csdn.net/csh1807266489?type=blog">我是夜阑的狗🐶</a> </font></p> </li><li> <p><font size="3"> 🚀 个人简介：一个正在努力学技术的CV工程师，专注基础和实战分享 ，欢迎咨询！</font></p> </li><li> <p><font size="3"> 💖 欢迎大家：这里是CSDN，我总结知识的地方，喜欢的话请三连，有问题请私信 😘 😘 😘</font></p> </li></ul> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_11" rel="nofollow">前言</a></li><li><a href="#___23" rel="nofollow">一、案例 - 本地生活（列表页面）</a></li><li><ul><li><ul><li><a href="#1_36" rel="nofollow">1、演示页面效果以及主要功能</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_50" rel="nofollow">二、页面导航并传参</a></li><li><a href="#_91" rel="nofollow">三、上拉触底时加载下一页数据</a></li><li><ul><li><ul><li><a href="#1_93" rel="nofollow">1、动态设置页面标题</a></li><li><a href="#2_142" rel="nofollow">2、创建编译模式</a></li><li><a href="#3_API__147" rel="nofollow">3、列表页面的 API 接口</a></li><li><a href="#4_274" rel="nofollow">4、实现上拉加载数据和效果</a></li><li><a href="#5_339" rel="nofollow">5、对上拉触底进行节流处理</a></li><li><a href="#6_427" rel="nofollow">6、判断数据是否加载完毕</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_503" rel="nofollow">四、下拉刷新列表数据</a></li><li><a href="#_wxs__574" rel="nofollow">五、使用 wxs 处理手机号</a></li><li><a href="#_629" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_11"></a>前言</h2> 
<p>  大家好，又见面了，我是夜阑的狗🐶，本文是专栏【微信小程序开发教程】专栏的第30篇文章;<br>   今天开始学习微信小程序的第15天💖💖💖，开启新的征程，记录最美好的时刻🎉，每天进步一点点。<br>   专栏地址：<a href="https://mp.csdn.net/mp_blog/manage/column/columnManage/12213394">【微信小程序开发教程】</a>， 此专栏是我是夜阑的狗微信小程序开发过程的总结，希望能够加深自己的印象，以及帮助到其他的小伙伴😉😉。<br>   如果文章有什么需要改进的地方还请大佬不吝赐教👏👏。</p> 
<hr> 
<h2><a id="___23"></a>一、案例 - 本地生活（列表页面）</h2> 
<p>  前面已经学习了WXS 脚本的概念和基本语法，通过栗子了解到WXS的怎么创建和调用。接下来就来根据前面学的知识，在案例-本地生活上进行实践。话不多说，让我们原文再续，书接上回吧。</p> 
<p><img src="https://images2.imgbox.com/b8/c1/6v36nhHU_o.jpg" alt="请添加图片描述"></p> 
<h4><a id="1_36"></a>1、演示页面效果以及主要功能</h4> 
<p>  首先来看一下页面演示效果，页面中有列表数据，其中还要具备下拉和上拉刷新功能：</p> 
<p><img src="https://images2.imgbox.com/9c/dc/ureiISOO_o.png" alt="在这里插入图片描述"></p> 
<p>  接下来实现主要功能有三个：</p> 
<ul><li>页面导航并传参</li><li>上拉触底时加载下一页数据</li><li>下拉刷新列表数据</li></ul> 
<h2><a id="_50"></a>二、页面导航并传参</h2> 
<p>  首先创建列表页面，可以通过 <code>app.json</code> 文件进行快速创建。</p> 
<p><strong>app.json</strong></p> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"pages"</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">"pages/home/home"</span><span class="token punctuation">,</span>
    <span class="token string">"pages/message/message"</span><span class="token punctuation">,</span>
    <span class="token string">"pages/contact/contact"</span><span class="token punctuation">,</span>
    <span class="token string">"pages/shoplist/shoplist"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  可以来看一下实际结果：</p> 
<p><img src="https://images2.imgbox.com/f6/ec/14G3vZIf_o.png" alt="在这里插入图片描述"></p> 
<p>  从 view 组件改造成 navigator 组件，从而支持跳转行为，并且在跳转过程中还要传递参数（id + 名称），为了后续页面标题和查询数据做准备。</p> 
<p><strong>home.wxml</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>grid-list<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>grid-item<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{gridList}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> 
  <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/shoplist/shoplist?id={<!-- -->{item.id}}&amp;title={<!-- -->{item.name}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{item.icon}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  可以来看一下实际结果：</p> 
<p><img src="https://images2.imgbox.com/96/5a/ZFUso82P_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_91"></a>三、上拉触底时加载下一页数据</h2> 
<h4><a id="1_93"></a>1、动态设置页面标题</h4> 
<p>  不能通过页面 .json 文件 中 navigationBarTitleText 来进行设置，这个操作是直接把页面标题直接写死，这样不符合需求的。这里需要调用小程序的 ·<code>wx.setNavigationBarTitle(Object object) </code> 来动态设置当前页面的标题。具体参数如下所示：</p> 
<table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th></tr></thead><tbody><tr><td><font color="red">title</font></td><td>string</td><td></td><td>是</td><td>页面标题</td></tr><tr><td>success</td><td>function</td><td></td><td>否</td><td>接口调用成功的回调函数</td></tr><tr><td>fail</td><td>function</td><td></td><td>否</td><td>接口调用失败的回调函数</td></tr><tr><td>complete</td><td>function</td><td></td><td>否</td><td>接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> 
<p>  前面刚学完页面生命周期，了解到对界面内容进行设置的 API 如 <code>wx.setNavigationBarTitle</code> ，请在onReady之后进行。而 onReady 是页面初次渲染完成时触发，具体代码如下所示：</p> 
<p><strong>shoplist.js</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面加载
   */</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">query</span><span class="token operator">:</span> options
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面初次渲染完成
   */</span>
  <span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span><span class="token function">setNavigationBarTitle</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>query<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  可以来看一下实际效果：</p> 
<p><img src="https://images2.imgbox.com/fc/c3/JZXHcP9z_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_142"></a>2、创建编译模式</h4> 
<p>  为了方便后续开发，可以创建 <code>showlist</code> 页面的编译模式，指定好启动页面和页面参数，等下一次对 <code>showlist</code> 页面进行改动，编译完就会立即跳转到该页面。具体操作如下：</p> 
<p><img src="https://images2.imgbox.com/15/63/EEA9Vodj_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_API__147"></a>3、列表页面的 API 接口</h4> 
<p>  以分页的形式，加载指定分类下商铺列表的数据，如下表所示：</p> 
<table><thead><tr><th>数据</th><th>说明</th></tr></thead><tbody><tr><td>接口地址</td><td>https://www.escook.cn/categories/:cate_id/shops<br> URL 地址中的 : cate_id 是动态参数，表示分类的 Id</td></tr><tr><td>请求方式</td><td>GET 请求</td></tr><tr><td>请求参数</td><td><font color="red">_page </font> 表示请求第几页的数据 <br><font color="red"> _limit </font> 表示每页请求几条数据</td></tr></tbody></table> 
<p>  接下来就是定义获取数据方法，并进行调用，具体代码如下所示：</p> 
<p><strong>shoplist.js</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>

  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">shopList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 当前页数</span>
    <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//一页有多少个数据</span>
    <span class="token literal-property property">total</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 总页数</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 生命周期函数--监听页面加载
   */</span>
  <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">query</span><span class="token operator">:</span> options
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 获取列表数据
   */</span>
  <span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.escook.cn/categories/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/shops</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">_page</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token punctuation">,</span>
        <span class="token literal-property property">_limit</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>pageSize<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">shopList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>shopList<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// 页面总数获取到是字符，需要转换成数字</span>
          <span class="token literal-property property">total</span><span class="token operator">:</span> res<span class="token punctuation">.</span>header<span class="token punctuation">[</span><span class="token string">'X-Total-Count'</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  <font color="red"><strong>注意！注意！注意！：这里需要注意一点，就 url 是动态填充路径的，所以要用反引号 `，如果这里只用单引号’ 或者双引号 "，是不会有数据的，因为这样就把 ${this.data.query.id} 当成id的值了，肯定查询不到数据。如果要用引号，记得一定要采用拼接的方式：‘+this.data.query.id+’。</strong></font></p> 
<p>  到这里基本上就完成获取数据，可以查看返回的 <code>res</code> 参数里面有什么。</p> 
<p><img src="https://images2.imgbox.com/0d/1e/PLXvzX8x_o.png" alt="在这里插入图片描述"></p> 
<p>  知道 res 里有什么数据之后，将其赋给 data 里对应的变量即可，如下图所示：</p> 
<p><img src="https://images2.imgbox.com/c8/2e/XcVajGPF_o.png" alt="在这里插入图片描述"></p> 
<p>  获取商品列表数据之后，接下来就是将其渲染到页面中并进行样式美化。</p> 
<p><strong>shoplist.wxml</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shop-item<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{shopList}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left-thumb<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{item.images[0]}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right-info<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shop-title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>电话：{<!-- -->{item.phone}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>地址：{<!-- -->{item.address}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>营业时间：{<!-- -->{item.businessHours}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>shoplist.wxss</strong></p> 
<pre><code class="prism language-css"><span class="token selector">.shop-item</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token comment">/* 添加边框 */</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1rpx solid #efefef<span class="token punctuation">;</span>
  <span class="token comment">/* 圆角样式 */</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
  <span class="token comment">/* 盒子阴影 */</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 1rpx 1rpx 15rpx #ddd<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.left-thumb image</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 250rpx<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 250rpx<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.right-info</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token comment">/* 纵向布局 */</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.shop-title</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/* 文本加粗 */</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  可以来看一下实际效果：</p> 
<p><img src="https://images2.imgbox.com/e5/2e/OYC73Iik_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_274"></a>4、实现上拉加载数据和效果</h4> 
<p>  通过 <code>wx.showLoading(Object object)</code> 可实现上拉加载效果，具体代码如下：</p> 
<p><strong>shoplist.js</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 获取列表数据
   */</span>
  <span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 展示 loading 效果</span>
    wx<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'数据加载中'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>  
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.escook.cn/categories/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/shops</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">_page</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token punctuation">,</span>
        <span class="token literal-property property">_limit</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>pageSize<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span> 
        <span class="token comment">// console.dir(res);</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">shopList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>shopList<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// 页面总数获取到是字符，需要转换成数字</span>
          <span class="token literal-property property">total</span><span class="token operator">:</span> res<span class="token punctuation">.</span>header<span class="token punctuation">[</span><span class="token string">'X-Total-Count'</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 隐藏 loading 效果</span>
        wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 页面上拉触底事件的处理函数
   */</span>
  <span class="token function">onReachBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token operator">+</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>shoplist.json</strong></p> 
<p>  并将上拉触底的距离改为200。</p> 
<pre><code class="prism language-css"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"usingComponents"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"onReachBottomDistance"</span><span class="token punctuation">:</span> 200
<span class="token punctuation">}</span>
</code></pre> 
<p>  可以来看一下实际运行效果：</p> 
<p><img src="https://images2.imgbox.com/c5/6d/QbrVvvXz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5_339"></a>5、对上拉触底进行节流处理</h4> 
<p>  前面也讲过，当连续触底多次，就会引发不必要的问题。所以需要在上拉监听函数做节流处理，如果当前请求正在请求数据，后续发送的请求都应该进行屏蔽。当前没有数据请求的时候，才可以允许发起下一页的请求。</p> 
<p>  节流处理可分为以下步骤：</p> 
<ul><li><strong>Step 1、在 <code>data</code> 中定义 <code>isloading</code> 节流阀</strong></li></ul> 
<p>  isloading 为布尔值，<code>false</code> 表示当前没有进行任何数据请求，可以请求， <code>true</code> 表示当前正在进行数据请求，重新触发的下一页请求都要被屏蔽。</p> 
<ul><li><strong>Step 2、在 <code>getShopList()</code> 方法中修改 <code>isloading</code> 节流阀的值</strong></li></ul> 
<p>  当开始发起请求时，调用 <code>getShopList</code> 时将节流阀设置 <code>true</code>，数据请求完成之后，在网络请求的 <code>complete</code>回调函数中，将节流阀重置为 <code>false</code>。</p> 
<ul><li><strong>Step 3、在 <code>onReachBottom </code>中判断节流阀的值，从而对数据请求进行节流控制</strong></li></ul> 
<p>  如果节流阀的值为 <code>true</code>，则阻止当前请求。如果节流阀的值为 <code>false</code>，则发起数据请求。</p> 
<p>  具体代码如下：</p> 
<p><strong>shoplist.js</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">shopList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 当前页数</span>
    <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">//一页有多少个数据</span>
    <span class="token literal-property property">total</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 总页数</span>
    <span class="token literal-property property">isloading</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 获取列表数据
   */</span>
  <span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">isloading</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 展示 loading 效果</span>
    wx<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'数据加载中'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>  
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.escook.cn/categories/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/shops</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">_page</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token punctuation">,</span>
        <span class="token literal-property property">_limit</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>pageSize<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span> 
        <span class="token comment">// console.dir(res);</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">shopList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>shopList<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// 页面总数获取到是字符，需要转换成数字</span>
          <span class="token literal-property property">total</span><span class="token operator">:</span> res<span class="token punctuation">.</span>header<span class="token punctuation">[</span><span class="token string">'X-Total-Count'</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 隐藏 loading 效果</span>
        wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">isloading</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 页面上拉触底事件的处理函数
   */</span>
  <span class="token function">onReachBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 节流处理</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isloading<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token operator">+</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  可以来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/44/4a/51fmpweB_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="6_427"></a>6、判断数据是否加载完毕</h4> 
<p>  当请求 8 页数据之后，再次进行上拉操作时就会发起数据请求。在开发过程中，这种行为是不允许的，所以当数据加载完之后，需要判断是否还有下一页数据，没有的话则后续触发上拉监听就应该不用触发。<br>   这里就需要公式来进行推导了，如果下面的公式成立，则证明没有下一页数据了：<br> <font color="red"><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           { 
          
          
           
            
             
              
              
                页码值 
               
              
                ∗ 
               
              
                每页显示多少条数据 
               
              
                &gt; 
               
              
                = 
               
              
                总数据条数 
               
              
             
            
           
           
            
             
              
              
                p 
               
              
                a 
               
              
                g 
               
              
                e 
               
              
                ∗ 
               
              
                p 
               
              
                a 
               
              
                g 
               
              
                e 
               
              
                S 
               
              
                i 
               
              
                z 
               
              
                e 
               
              
                &gt; 
               
              
                = 
               
              
                t 
               
              
                o 
               
              
                t 
               
              
                a 
               
              
                l 
               
              
             
            
           
          
         
        
          \begin{cases} 页码值 * 每页显示多少条数据 &gt;= 总数据条数 \\ page * pageSize &gt;= total\\ \end{cases} 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 3em; vertical-align: -1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size4">{<!-- --></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.69em;"><span class="" style="top: -3.69em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord cjk_fallback">页码值</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord cjk_fallback">每页显示多少条数据</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord cjk_fallback">总数据条数</span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.19em;"><span class=""></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></font></p> 
<p>  可以通过案例来验证一下这个公式准确性：</p> 
<ul><li>案例1：总共有 77 条数据，如果每页显示 10 条数据，则总共分为 8 页，其中第 8 页只有 7 条数据；<br> <font color="red"><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            { 
           
           
            
             
              
               
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 （ 
                
               
                 7 
                
               
                 ） 
                
               
                 ∗ 
                
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 S 
                
               
                 i 
                
               
                 z 
                
               
                 e 
                
               
                 （ 
                
               
                 10 
                
               
                 ） 
                
               
                 &gt; 
                
               
                 = 
                
               
                 t 
                
               
                 o 
                
               
                 t 
                
               
                 a 
                
               
                 l 
                
               
                 （ 
                
               
                 77 
                
               
                 ） 
                
               
              
             
            
            
             
              
               
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 （ 
                
               
                 8 
                
               
                 ） 
                
               
                 ∗ 
                
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 S 
                
               
                 i 
                
               
                 z 
                
               
                 e 
                
               
                 （ 
                
               
                 10 
                
               
                 ） 
                
               
                 &gt; 
                
               
                 = 
                
               
                 t 
                
               
                 o 
                
               
                 t 
                
               
                 a 
                
               
                 l 
                
               
                 （ 
                
               
                 77 
                
               
                 ） 
                
               
              
             
            
           
          
         
           \begin{cases} page（7）* pageSize（10） &gt;= total（77）\\ page（8）* pageSize（10） &gt;= total（77） \end{cases} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 3em; vertical-align: -1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size4">{<!-- --></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.69em;"><span class="" style="top: -3.69em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">（</span><span class="mord">7</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mord cjk_fallback">（</span><span class="mord">10</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord cjk_fallback">（</span><span class="mord">77</span><span class="mord cjk_fallback">）</span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">（</span><span class="mord">8</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mord cjk_fallback">（</span><span class="mord">10</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord cjk_fallback">（</span><span class="mord">77</span><span class="mord cjk_fallback">）</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.19em;"><span class=""></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></font></li><li>案例2：总共有 80 条数据，如果每页显示 10 条数据，则总共分为 8 页，其中第 8 页面有 10 条数据；<br> <font color="red"><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            { 
           
           
            
             
              
               
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 （ 
                
               
                 7 
                
               
                 ） 
                
               
                 ∗ 
                
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 S 
                
               
                 i 
                
               
                 z 
                
               
                 e 
                
               
                 （ 
                
               
                 10 
                
               
                 ） 
                
               
                 &gt; 
                
               
                 = 
                
               
                 t 
                
               
                 o 
                
               
                 t 
                
               
                 a 
                
               
                 l 
                
               
                 （ 
                
               
                 80 
                
               
                 ） 
                
               
              
             
            
            
             
              
               
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 （ 
                
               
                 8 
                
               
                 ） 
                
               
                 ∗ 
                
               
                 p 
                
               
                 a 
                
               
                 g 
                
               
                 e 
                
               
                 S 
                
               
                 i 
                
               
                 z 
                
               
                 e 
                
               
                 （ 
                
               
                 10 
                
               
                 ） 
                
               
                 &gt; 
                
               
                 = 
                
               
                 t 
                
               
                 o 
                
               
                 t 
                
               
                 a 
                
               
                 l 
                
               
                 （ 
                
               
                 80 
                
               
                 ） 
                
               
              
             
            
           
          
         
           \begin{cases} page（7）* pageSize（10） &gt;= total（80）\\ page（8）* pageSize（10） &gt;= total（80） \end{cases} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 3em; vertical-align: -1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size4">{<!-- --></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.69em;"><span class="" style="top: -3.69em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">（</span><span class="mord">7</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mord cjk_fallback">（</span><span class="mord">10</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord cjk_fallback">（</span><span class="mord">80</span><span class="mord cjk_fallback">）</span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">（</span><span class="mord">8</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0576em;">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ze</span><span class="mord cjk_fallback">（</span><span class="mord">10</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord cjk_fallback">（</span><span class="mord">80</span><span class="mord cjk_fallback">）</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.19em;"><span class=""></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></font></li></ul> 
<p>  综上所述，说明该公式是可行的，根据这个公式可以对数据加载请求做处理，当数据已经加载完不能加载的时候，需要给用户添加一个提示框，可以通过调用 <code>wx.showToast(Object object)</code> 来实现，先来了解一下该函数的部分参数：</p> 
<table><thead><tr><th>属性</th><th>类型</th><th>默认值</th><th>必填</th><th>说明</th><th>最低版本</th></tr></thead><tbody><tr><td><font color="red">title</font></td><td>string</td><td></td><td>是</td><td>提示的内容</td><td></td></tr><tr><td>icon</td><td>string</td><td>success</td><td>否</td><td>图标</td><td></td></tr><tr><td>image</td><td>string</td><td></td><td>否</td><td>自定义图标的本地路径，image 的优先级高于 icon</td><td>1.1.0</td></tr><tr><td>duration</td><td>number</td><td>1500</td><td>否</td><td>提示的延迟时间</td><td></td></tr><tr><td>mask</td><td>boolean</td><td>false</td><td>否</td><td>是否显示透明蒙层，防止触摸穿透</td><td></td></tr></tbody></table> 
<p>  具体代码如下:</p> 
<p><strong>shoplist.js</strong></p> 
<pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 页面上拉触底事件的处理函数
   */</span>
  <span class="token function">onReachBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>pageSize <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 没有下一页数据</span>
      <span class="token keyword">return</span> wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'数据加载已完成'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">'none'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 节流处理</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>isloading<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token operator">+</span><span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  当数据加载完之后，可以来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/cd/42/r6g4ViH7_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_503"></a>四、下拉刷新列表数据</h2> 
<p>  完成上拉刷新之后，接下来就是要实现下拉刷新列表数据，并其样式进行美化。<br>   下拉刷新需要重置页面部分参数，然后在根据重置过后的数据重新发起请求，这里还需要注意一点就是需要主动来关闭下拉刷新窗口，这里可以把关闭操作放在数据请求完成之后。具体代码如下所示：</p> 
<p><strong>shoplist.json</strong></p> 
<p>  开启下拉刷新功能。</p> 
<pre><code class="prism language-css"><span class="token punctuation">{<!-- --></span>
  <span class="token string">"usingComponents"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"onReachBottomDistance"</span><span class="token punctuation">:</span> 200<span class="token punctuation">,</span>
  <span class="token string">"enablePullDownRefresh"</span><span class="token punctuation">:</span> true<span class="token punctuation">,</span>
  <span class="token string">"backgroundColor"</span><span class="token punctuation">:</span> <span class="token string">"#efefef"</span><span class="token punctuation">,</span>
  <span class="token string">"backgroundTextStyle"</span><span class="token punctuation">:</span> <span class="token string">"dark"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>shoplist.js</strong></p> 
<p>  但是这里有个问题了，如果直接把关闭操作放在 <code>getShopList</code> 里的 <code>complete</code>，这样上拉刷新的时候也会进行调用，这很明显不符合开发需求，所以需要对关闭下拉刷新操作进行限制一下。可以对 <code>getShopList</code> 进行传递回调函数，只有下拉刷新的时候才会给 <code>getShopList</code> 进行传函数，其他时候不传即可。<br>    <code>stopPD &amp;&amp; stopPD();</code> 而表达的意思是当 <code>stopPD</code> 不为 <code>undefined</code> 的时候就执行该函数，反转不执行。</p> 
<pre><code class="prism language-javascript"><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">/**
   * 获取列表数据
   */</span>
  <span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token parameter">stopPD</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token operator">...</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	  <span class="token operator">...</span>
      <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 隐藏 loading 效果</span>
        wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">isloading</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 数据请求完成关闭下拉刷新窗口</span>
        <span class="token comment">// wx.stopPullDownRefresh();</span>
        stopPD <span class="token operator">&amp;&amp;</span> <span class="token function">stopPD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 页面相关事件处理函数--监听用户下拉动作
   */</span>
  <span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 需要重置关键的数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token literal-property property">shopList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">total</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 重新发起数据请求</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShopList</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      wx<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>  当数据加载几页之后，触发下拉监听时，会将页面中的 page、shopList 和 total 进行重置，然后在请求第一页的数据，可以来看一下运行效果：</p> 
<p><img src="https://images2.imgbox.com/51/10/9WtV3Ewl_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_wxs__574"></a>五、使用 wxs 处理手机号</h2> 
<p>  最后就是要来处理列表数据中的手机号，可以使用 wxs 脚本来对页面数据进行过滤。创建 tool.wxs 脚本编写功能，具体操作如下：</p> 
<p><img src="https://images2.imgbox.com/e9/2b/zZwjo6Qa_o.png" alt="在这里插入图片描述"></p> 
<p><strong>tool.wxs</strong></p> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">splitPhone</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">return</span> str<span class="token punctuation">;</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">splitPhone</span><span class="token operator">:</span> splitPhone
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>shoplist.wxml</strong></p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shop-item<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{shopList}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left-thumb<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{item.images[0]}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right-info<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shop-title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>电话：{<!-- -->{tools.splitPhone(item.phone)}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>地址：{<!-- -->{item.address}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>营业时间：{<!-- -->{item.businessHours}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../../utils/tool.wxs<span class="token punctuation">"</span></span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tools<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wxs</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>  到这里基本上就完成整个列表页面的设置了，来看一下实际效果：</p> 
<p><img src="https://images2.imgbox.com/be/b2/EScXyBd0_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_629"></a>总结</h2> 
<p><strong>  感谢观看，这里就是案例 - 本地生活（列表页面）的介绍，如果觉得有帮助，请给文章点个赞吧，让更多的人看到。🌹 🌹 🌹</strong></p> 
<p><img src="https://images2.imgbox.com/a8/fb/b4DiP94o_o.png" alt="在这里插入图片描述"></p> 
<p><strong>  也欢迎你，关注我。👍 👍 👍</strong></p> 
<p><strong>  原创不易，还希望各位大佬支持一下，你们的点赞、收藏和留言对我真的很重要！！！💕 💕 💕 最后，本文仍有许多不足之处，欢迎各位认真读完文章的小伙伴们随时私信交流、批评指正！下期再见。🎉</strong></p> 
<blockquote> 
 <p><strong><font size="4">更多专栏订阅: </font></strong><br> <br></p> 
 <ul><li>😀 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_12015189.html">【LeetCode题解（持续更新中）】</a></font></li><li>🚝 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_12015189.html">【Java Web项目构建过程】</a></font></li><li>💛 <font size="4"><a href="https://mp.csdn.net/mp_blog/manage/column/columnManage/12213394">【微信小程序开发教程】</a></font></li><li>⚽ <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_12011599.html">【JavaScript随手笔记】</a></font></li><li>🤩 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_11384853.html">【大数据学习笔记（华为云）】</a></font></li><li>🦄 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_9059817.html">【程序错误解决方法（建议收藏）】</a></font></li><li>🚀 <font size="4"><a href="https://blog.csdn.net/csh1807266489/category_9055931.html">【软件安装教程】</a></font></li></ul> 
 <p><br><br> <strong><font size="4">订阅更多，你们将会看到更多的优质内容！！</font></strong></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9c47e0e06580ff42724ca74fb643d61b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GPT 模型介绍 | GPT3 / GPT3.5 &#43; Flask | Github源码链接</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cea34ed856f5f144c84985a8c1761bed/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Wayland环境下通过xwayland支持docker图形界面</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
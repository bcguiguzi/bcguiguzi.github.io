<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ES6—ES13新语法解析 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ES6—ES13新语法解析" />
<meta property="og:description" content="ES6—ES13语法总览 一、ES6 新特性（2015）1. let和const（1）重新赋值（2）块级作用域（3）变量提升（4）重复声明 2. 解构赋值（1）数组解构（2）对象解构（3）其他解构赋值 3. 模板字符串4. 函数默认参数（1）函数length属性值（2）参数作用域 5. 箭头函数6. 扩展运算符7. Symbol（1）避免常量值重复（2）避免对象属性覆盖 8. 集合 Set9. Map10. 模块化（1）export 导出模块（2）import 导入模块（3）导入导出复合用法（4）模块的继承 11. 字符串方法（1）includes()（2）startsWith()（3）endsWith()（4）repeat() 12. 数组方法（1）reduce()（2）filter()（3）Array.from（1）fill() 二、ES7 新特性（2016）1. Array.includes()2. 指数操作符 三、ES8 新特性（2017）1. padStart()和padEnd()（1）padStart()（2）padEnd() 2. Object.values()和Object.entries()3. 函数扩展 四、ES9 新特性（2018）1. for await…of2. Promise.finally3. 对象的扩展运算符4. 对象的 Rest 五、ES10 新特性（2019）1. trimStart() 和 trimEnd()2. flat()和flatMap()（1）flat()（2）flatMap() 3. Object.fromEntries()（1）将数组转成对象（2）将 Map 转成对象 4. Symbol描述5. toString()6. catch 六、ES11 新特性（2020）1. BigInt2. 空值合并运算符（??）3. 可选链操作符（?.）4. Promise.allSettled5. String.matchAll() 七、ES12 新特性（2021）1. String.replaceAll()2. 数字分隔符3. Promise.any4. 逻辑赋值操作符 八、ES13 新特性（2022）1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3724a5c942c01d418ae9c00ca073385b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-28T23:38:19+08:00" />
<meta property="article:modified_time" content="2023-05-28T23:38:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ES6—ES13新语法解析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ES6—ES13语法总览</h4> 
 <ul><li><ul><li><a href="#ES6_2015_6" rel="nofollow">一、ES6 新特性（2015）</a></li><li><ul><li><a href="#1_letconst_8" rel="nofollow">1. let和const</a></li><li><ul><li><a href="#1_24" rel="nofollow">（1）重新赋值</a></li><li><a href="#2_36" rel="nofollow">（2）块级作用域</a></li><li><a href="#3_70" rel="nofollow">（3）变量提升</a></li><li><a href="#4_95" rel="nofollow">（4）重复声明</a></li></ul> 
    </li><li><a href="#2__128" rel="nofollow">2. 解构赋值</a></li><li><ul><li><a href="#1_129" rel="nofollow">（1）数组解构</a></li><li><a href="#2_159" rel="nofollow">（2）对象解构</a></li><li><a href="#3_209" rel="nofollow">（3）其他解构赋值</a></li></ul> 
    </li><li><a href="#3__260" rel="nofollow">3. 模板字符串</a></li><li><a href="#4__281" rel="nofollow">4. 函数默认参数</a></li><li><ul><li><a href="#1length_297" rel="nofollow">（1）函数length属性值</a></li><li><a href="#2_312" rel="nofollow">（2）参数作用域</a></li></ul> 
    </li><li><a href="#5__327" rel="nofollow">5. 箭头函数</a></li><li><a href="#6__340" rel="nofollow">6. 扩展运算符</a></li><li><a href="#7_Symbol_365" rel="nofollow">7. Symbol</a></li><li><ul><li><a href="#1_384" rel="nofollow">（1）避免常量值重复</a></li><li><a href="#2_441" rel="nofollow">（2）避免对象属性覆盖</a></li></ul> 
    </li><li><a href="#8__Set_452" rel="nofollow">8. 集合 Set</a></li><li><a href="#9_Map_514" rel="nofollow">9. Map</a></li><li><a href="#10__573" rel="nofollow">10. 模块化</a></li><li><ul><li><a href="#1export__576" rel="nofollow">（1）export 导出模块</a></li><li><a href="#2import__615" rel="nofollow">（2）import 导入模块</a></li><li><a href="#3_649" rel="nofollow">（3）导入导出复合用法</a></li><li><a href="#4_671" rel="nofollow">（4）模块的继承</a></li></ul> 
    </li><li><a href="#11__683" rel="nofollow">11. 字符串方法</a></li><li><ul><li><a href="#1includes_685" rel="nofollow">（1）includes()</a></li><li><a href="#2startsWith_706" rel="nofollow">（2）startsWith()</a></li><li><a href="#3endsWith_718" rel="nofollow">（3）endsWith()</a></li><li><a href="#4repeat_741" rel="nofollow">（4）repeat()</a></li></ul> 
    </li><li><a href="#12__783" rel="nofollow">12. 数组方法</a></li><li><ul><li><a href="#1reduce_785" rel="nofollow">（1）reduce()</a></li><li><a href="#2filter_845" rel="nofollow">（2）filter()</a></li><li><a href="#3Arrayfrom_863" rel="nofollow">（3）Array.from</a></li><li><a href="#1fill_904" rel="nofollow">（1）fill()</a></li></ul> 
   </li></ul> 
   </li><li><a href="#ES7_2016_935" rel="nofollow">二、ES7 新特性（2016）</a></li><li><ul><li><a href="#1_Arrayincludes_937" rel="nofollow">1. Array.includes()</a></li><li><a href="#2__962" rel="nofollow">2. 指数操作符</a></li></ul> 
   </li><li><a href="#ES8_2017_971" rel="nofollow">三、ES8 新特性（2017）</a></li><li><ul><li><a href="#1_padStartpadEnd_973" rel="nofollow">1. padStart()和padEnd()</a></li><li><ul><li><a href="#1padStart_977" rel="nofollow">（1）padStart()</a></li><li><a href="#2padEnd_996" rel="nofollow">（2）padEnd()</a></li></ul> 
    </li><li><a href="#2_ObjectvaluesObjectentries_1007" rel="nofollow">2. Object.values()和Object.entries()</a></li><li><a href="#3__1028" rel="nofollow">3. 函数扩展</a></li></ul> 
   </li><li><a href="#ES9_2018_1037" rel="nofollow">四、ES9 新特性（2018）</a></li><li><ul><li><a href="#1_for_awaitof_1039" rel="nofollow">1. for await…of</a></li><li><a href="#2_Promisefinally_1067" rel="nofollow">2. Promise.finally</a></li><li><a href="#3__1087" rel="nofollow">3. 对象的扩展运算符</a></li><li><a href="#4__Rest_1120" rel="nofollow">4. 对象的 Rest</a></li></ul> 
   </li><li><a href="#ES10_2019_1148" rel="nofollow">五、ES10 新特性（2019）</a></li><li><ul><li><a href="#1_trimStart__trimEnd_1150" rel="nofollow">1. trimStart() 和 trimEnd()</a></li><li><a href="#2_flatflatMap_1167" rel="nofollow">2. flat()和flatMap()</a></li><li><ul><li><a href="#1flat_1169" rel="nofollow">（1）flat()</a></li><li><a href="#2flatMap_1188" rel="nofollow">（2）flatMap()</a></li></ul> 
    </li><li><a href="#3_ObjectfromEntries_1200" rel="nofollow">3. Object.fromEntries()</a></li><li><ul><li><a href="#1_1213" rel="nofollow">（1）将数组转成对象</a></li><li><a href="#2_Map__1223" rel="nofollow">（2）将 Map 转成对象</a></li></ul> 
    </li><li><a href="#4_Symbol_1233" rel="nofollow">4. Symbol描述</a></li><li><a href="#5_toString_1253" rel="nofollow">5. toString()</a></li><li><a href="#6_catch_1266" rel="nofollow">6. catch</a></li></ul> 
   </li><li><a href="#ES11_2020_1286" rel="nofollow">六、ES11 新特性（2020）</a></li><li><ul><li><a href="#1_BigInt_1288" rel="nofollow">1. BigInt</a></li><li><a href="#2__1350" rel="nofollow">2. 空值合并运算符（??）</a></li><li><a href="#3__1371" rel="nofollow">3. 可选链操作符（?.）</a></li><li><a href="#4_PromiseallSettled_1402" rel="nofollow">4. Promise.allSettled</a></li><li><a href="#5_StringmatchAll_1421" rel="nofollow">5. String.matchAll()</a></li></ul> 
   </li><li><a href="#ES12_2021_1435" rel="nofollow">七、ES12 新特性（2021）</a></li><li><ul><li><a href="#1_StringreplaceAll_1437" rel="nofollow">1. String.replaceAll()</a></li><li><a href="#2__1455" rel="nofollow">2. 数字分隔符</a></li><li><a href="#3_Promiseany_1473" rel="nofollow">3. Promise.any</a></li><li><a href="#4__1521" rel="nofollow">4. 逻辑赋值操作符</a></li></ul> 
   </li><li><a href="#ES13_2022_1536" rel="nofollow">八、ES13 新特性（2022）</a></li><li><ul><li><a href="#1_ObjecthasOwn_1538" rel="nofollow">1. Object.hasOwn()</a></li><li><a href="#2_Arrayat_1553" rel="nofollow">2. Array.at()</a></li><li><a href="#3_errorcause_1576" rel="nofollow">3. error.cause</a></li><li><a href="#4_Toplevel_Await_1596" rel="nofollow">4. Top-level Await</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<br> 关系： 
<br> ECMA-Script 是 JavaScript 的标准与规范，JavaScript 是 ECMA-Script 标准的实现和扩展。 
<p></p> 
<p><img src="https://images2.imgbox.com/a6/37/pcA3Gw9s_o.png" alt="e101b4e661916f085eb8f69393fc8a80.png"></p> 
<h3><a id="ES6_2015_6"></a>一、ES6 新特性（2015）</h3> 
<h4><a id="1_letconst_8"></a>1. let和const</h4> 
<p>特点比较：</p> 
<table><thead><tr><th align="left"><strong>特性</strong></th><th align="left"><strong>var</strong></th><th align="left"><strong>let</strong></th><th align="left"><strong>const</strong></th></tr></thead><tbody><tr><td align="left">变量提升</td><td align="left">✔️</td><td align="left">×</td><td align="left">×</td></tr><tr><td align="left">全局变量</td><td align="left">✔️</td><td align="left">×</td><td align="left">×</td></tr><tr><td align="left">重复声明</td><td align="left">✔️</td><td align="left">×</td><td align="left">×</td></tr><tr><td align="left">重新赋值</td><td align="left">✔️</td><td align="left">✔️</td><td align="left">×</td></tr><tr><td align="left">暂时性死区</td><td align="left">×</td><td align="left">✔️</td><td align="left">✔️</td></tr><tr><td align="left">块作用域</td><td align="left">×</td><td align="left">✔️</td><td align="left">✔️</td></tr><tr><td align="left">只声明不初始化</td><td align="left">✔️</td><td align="left">✔️</td><td align="left">×</td></tr></tbody></table> 
<p>其中的四点：</p> 
<h5><a id="1_24"></a>（1）重新赋值</h5> 
<p>const 是指针不可修改，并非数据不能修改，</p> 
<pre><code class="prism language-JS">const a = 1;
a = 2;// 报错，基本类型不可修改

const b = { c: 1, d: 2 }
b.c = 'c';//不会报错，因为 b 指向的对象指针没有改变，只是里面的属性或属性值发生变化
b = { ...};// 报错
</code></pre> 
<h5><a id="2_36"></a>（2）块级作用域</h5> 
<p>非函数级同名变量会被覆盖，如下：</p> 
<pre><code class="prism language-go"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：2</span>
</code></pre> 
<p>循环变量会泄漏为全局变量（如果是声明函数里面泄漏为函数级变量）：</p> 
<pre><code class="prism language-go"><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结果：1  2  3</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：3</span>
</code></pre> 
<p>而通过let和const定义的变量存在块级作用域，就不会产生上述问题：</p> 
<pre><code class="prism language-go">let a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> let a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：1</span>
 
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结果：1  2  3</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught ReferenceError: i is not defined</span>
</code></pre> 
<p>var 是以函数级为作用域，let、const以大括号{ } 为作用域，类似for循环除外</p> 
<h5><a id="3_70"></a>（3）变量提升</h5> 
<p>变量提升：就是变量可以在声明之前使用：</p> 
<pre><code class="prism language-go">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：undefined</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// 实际转化为 </span>
<span class="token keyword">var</span> a<span class="token punctuation">;</span> <span class="token comment">// 声明提升，初始值 undefined，赋值是另一个操作</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：undefined</span>
a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<p>let 和 const 限制了变量提升，在变量创建到真正初始化之间的时间跨度内，它们无法访问或使用，ES6 将其称之为<strong>暂时性死区：</strong></p> 
<pre><code class="prism language-go"><span class="token comment">// 暂时性死区 开始</span>
a <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>     <span class="token comment">//  Uncaught ReferenceError: Cannot access 'a' before initialization</span>
 
let a<span class="token punctuation">;</span>   
<span class="token comment">//  暂时性死区 结束</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined</span>
</code></pre> 
<h5><a id="4_95"></a>（4）重复声明</h5> 
<p>var 没有限制</p> 
<pre><code class="prism language-go">function <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
function <span class="token function">funcB</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<p>而let修复了这种不严谨的设计：</p> 
<pre><code class="prism language-go">function <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  let a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  let a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// Uncaught SyntaxError: Identifier 'a' has already been declared</span>
<span class="token punctuation">}</span>
 
function <span class="token function">funcB</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  let args <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// Uncaught SyntaxError: Identifier 'args' has already been declared</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>现在我们项目中已经完全放弃了var，而使用 const 来定义变量，极少部分需要改动的变量使用 let 。可以在ESlint开启如下规则：</p> 
<pre><code class="prism language-go"><span class="token string">"no-var"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="2__128"></a>2. 解构赋值</h4> 
<h5><a id="1_129"></a>（1）数组解构</h5> 
<p>具有 Iterator 接口的数据结构，都可以采用数组形式的解构赋值。位置与变量对应</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>bar<span class="token punctuation">]</span><span class="token punctuation">,</span> baz<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">,</span> baz<span class="token punctuation">)</span> <span class="token comment">// 输出结果：1  2  3</span>
</code></pre> 
<p>不完全解构，只解构部分内容：没有值就会将变量赋值为undefined</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// 提取前两个值</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>  <span class="token comment">// 提取后两个值</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>  <span class="token comment">// 提取第一三个值</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// z 为 undefined</span>
</code></pre> 
<p>rest 操作符来捕获剩余项：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> <span class="token operator">...</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// x 为 1，y 为 [2, 3]</span>
</code></pre> 
<p>解构时支持使用默认值，当对应的值为 undefined 时会使用默认值：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>z）  <span class="token comment">// 输出结果：3</span>
</code></pre> 
<h5><a id="2_159"></a>（2）对象解构</h5> 
<p>对象解构的本质是先找到同名属性（因为对象没有顺序），在赋值给对应变量：</p> 
<pre><code class="prism language-go">let <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span> <span class="token char">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token char">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：aaa  bbb</span>

<span class="token comment">// 本质 (一一对应，所以foo为 'aaa')</span>
let <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">:</span>bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span> <span class="token char">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token char">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 由此，可以设置别名，如下：too 就是 foo 的别名，</span>
let <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span>too<span class="token punctuation">,</span> bar<span class="token punctuation">:</span>bar <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span> <span class="token char">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token char">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>too<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：aaa</span>
</code></pre> 
<p>对象的解构赋值也是支持默认值的，当定义的变量在对象中不存在（严格的===undefined）时，其默认值才会生效：</p> 
<pre><code class="prism language-go">let <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">,</span> bar<span class="token punctuation">,</span> baz <span class="token operator">=</span> <span class="token char">'ccc'</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span> <span class="token char">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token char">'bbb'</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> null <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">,</span> baz<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：aaa  bbb  null</span>
 
let <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">,</span> bar<span class="token punctuation">,</span> baz <span class="token operator">=</span> <span class="token char">'ccc'</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span> <span class="token char">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token char">'bbb'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">,</span> baz<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果：aaa  bbb  ccc</span>
</code></pre> 
<p>注意：不能给已声明的变量进行赋值，因为当缺少 let、const、var 关键字时，将会把 {baz} 理解为代码块从而导致语法错误，所以下面代码会报错：</p> 
<pre><code class="prism language-go">let baz<span class="token punctuation">;</span>
<span class="token punctuation">{<!-- --></span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span> <span class="token char">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token char">'bbb'</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token char">'ccc'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>可以使用括号包裹整个解构赋值语句来解决上述问题：</p> 
<pre><code class="prism language-go">let baz<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> baz <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">:</span> <span class="token char">'aaa'</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token char">'bbb'</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token char">'ccc'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span>
</code></pre> 
<p>在对象的解构赋值中，可以将现有对象的方法赋值给某个变量，比如：</p> 
<pre><code class="prism language-go">let <span class="token punctuation">{<!-- --></span> log<span class="token punctuation">,</span> sin<span class="token punctuation">,</span> cos <span class="token punctuation">}</span> <span class="token operator">=</span> Math<span class="token punctuation">;</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token comment">// 输出结果：2.4849066497880004</span>
<span class="token function">sin</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">// 输出结果：0.8414709848078965</span>
<span class="token function">cos</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">// 输出结果：0.5403023058681398</span>
</code></pre> 
<h5><a id="3_209"></a>（3）其他解构赋值</h5> 
<ul><li><strong>字符串解构</strong></li></ul> 
<p>字符串解构规则：只要等号右边的值不是对象或数组，就先将其转为类数组对象，在进行解构：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'hello'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">)</span>  <span class="token comment">// 输出结果：h e l l o</span>
</code></pre> 
<p>类数组对象有 length 属性，因此可以给这个属性进行解构赋值：</p> 
<pre><code class="prism language-go">let <span class="token punctuation">{<!-- --></span>length<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token char">'hello'</span><span class="token punctuation">;</span>    <span class="token comment">// 输出结果：5</span>
</code></pre> 
<ul><li><strong>数值和布尔值解构赋值</strong></li></ul> 
<p>对数值和布尔值进行解构时，会先被转为对象，然后再应用解构语法：</p> 
<pre><code class="prism language-go">let <span class="token punctuation">{<!-- --></span>toString<span class="token punctuation">:</span> s<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
s <span class="token operator">==</span><span class="token operator">=</span> Number<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token comment">// 输出结果：true</span>
 
let <span class="token punctuation">{<!-- --></span>toString<span class="token punctuation">:</span> s<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
s <span class="token operator">==</span><span class="token operator">=</span> Boolean<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token comment">// 输出结果：true</span>
</code></pre> 
<p>注意：null 和 undefined 不能转换为对象，所以如果右边是这两个值，就会报错。</p> 
<ul><li><strong>函数参数解构赋值</strong></li></ul> 
<p>函数参数表面上是一个数组，在传入参数的那一刻，就会被解构为x和y。</p> 
<pre><code class="prism language-go">function <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 3</span>
</code></pre> 
<p>解构函数的返回值：</p> 
<pre><code class="prism language-go">function <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
let <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="3__260"></a>3. 模板字符串</h4> 
<p>模板字符串：增强版的字符串，用反引号``来标识，可以用来定义单行、多行字符串，或者在字符串中嵌入变量。解决字符串拼接时的繁琐</p> 
<pre><code class="prism language-go"><span class="token comment">// 字符串中嵌入变量</span>
let name <span class="token operator">=</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token string">"today"</span><span class="token punctuation">;</span>
<span class="token string">`Hello ${name}, how are you ${time}?`</span>
 
<span class="token comment">// 字符串中调用函数</span>
<span class="token string">` ${fn()}`</span>
</code></pre> 
<p>在使用模板字符串时，需要注意以下几点：</p> 
<ul><li>如果在字符串中使用反引号，需要使用\来转义；</li><li>如果在多行字符串中有空格和缩进，那么它们都会被保留在输出中；</li><li>模板字符串中嵌入变量，需要将变量名写在${}之中；</li><li>模板字符串中可以放任意的表达式、运算、引用属性、调用函数；</li><li>如果模板字符中的变量没有声明，会报错。</li></ul> 
<h4><a id="4__281"></a>4. 函数默认参数</h4> 
<p>ES6之前，函数不支持默认参数，ES6支持默认参数，并且只有不传入参数或 明确传入 undefined 时才会触发默认值：</p> 
<pre><code class="prism language-go">function <span class="token function">getPoint</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1  2</span>
<span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// 0  0 </span>
<span class="token function">getPoint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>       <span class="token comment">// 1  0</span>
</code></pre> 
<p>当使用函数默认值时，需要注意以下几点：</p> 
<h5><a id="1length_297"></a>（1）函数length属性值</h5> 
<p>此时 length 表示的就是第一个有默认值参数之前的普通参数个数：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> funcA <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>funcA<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结果：2 </span>
 
<span class="token keyword">const</span> funcB <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>funcB<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结果：1</span>
 
<span class="token keyword">const</span> funcC <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>funcC<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出结果 0</span>
</code></pre> 
<h5><a id="2_312"></a>（2）参数作用域</h5> 
<p>当给函数的参数设置了默认值之后，参数在被初始化时将形成一个独立作用域，初始化完成后作用域消解：</p> 
<pre><code class="prism language-go">let x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
 
function <span class="token keyword">func</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// y 为传入时的 x 值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">func</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2</span>
</code></pre> 
<p>在函数调用时，参数 x, y 将形成一个独立的作用域，所以参数中的y会等于第一个参数中的x，而不是上面定义的1。</p> 
<h4><a id="5__327"></a>5. 箭头函数</h4> 
<p>用来简化函数的定义：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> counter <span class="token operator">=</span> x <span class="token operator">=</span><span class="token operator">&gt;</span> x<span class="token operator">*</span>x<span class="token punctuation">;</span>
</code></pre> 
<p>箭头函数特点：</p> 
<p>（1）更加简洁<br> （2）不绑定 this<br> （3）不可作为构造函数<br> （4）不绑定 arguments</p> 
<h4><a id="6__340"></a>6. 扩展运算符</h4> 
<p>扩展运算符：… 就是rest参数的逆运算</p> 
<p>spread 扩展运算符有以下<strong>用途</strong>：</p> 
<p>（1）将数组转化为用逗号分隔的参数序列：<br> var arr = [1, 2, 3];<br> test(…arr); // 函数传参</p> 
<pre><code>
（2）将一个数组拼接到另一个数组：

```go
var arr1 = [1, 2, 3,4];
var arr2 = [...arr1, 4, 5, 6];// [1, 2, 3, 4, 4, 5, 6]
</code></pre> 
<p>（3）将字符串转为逗号分隔的数组：</p> 
<pre><code class="prism language-go"><span class="token keyword">var</span> str<span class="token operator">=</span><span class="token char">'JavaScript'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>str<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// ["J", "a", "v", "a", "S", "c", "r", "i", "p", "t"]</span>
</code></pre> 
<h4><a id="7_Symbol_365"></a>7. Symbol</h4> 
<p>ES6基本数据类型：Symbol，表示独一无二的值。它是一种类似于字符串的数据类型<br> 特点：</p> 
<ul><li>Symbol的值是唯一的，用来解决命名冲突的问题</li><li>Symbol值不能与其他类型数据进行运算</li><li>Symbol定义的对象属性不能使用<code>for...in</code>遍历循环，但是可以使用<code>Reflect.ownKeys</code> 来获取对象的所有键名</li></ul> 
<pre><code class="prism language-go">let s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>typeof s1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "symbol"</span>
 
let s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token char">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
let s3 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token char">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2 <span class="token operator">==</span><span class="token operator">=</span> s3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> 
<p>基于以上特性，Symbol 属性类型比较适合用于两类场景中：<strong>常量值和对象属性</strong>。</p> 
<h5><a id="1_384"></a>（1）避免常量值重复</h5> 
<p>getValue 函数会根据传入字符串参数 key 执行对应代码逻辑：</p> 
<pre><code class="prism language-go">function <span class="token function">getValue</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> <span class="token char">'A'</span><span class="token punctuation">:</span>
    <span class="token keyword">case</span> <span class="token char">'B'</span><span class="token punctuation">:</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>魔术字符串：如上，指在代码之中多次出现、与代码形成强耦合的某一个具体的字符串或者数值，导致调用 getValue 函数时需要查看函数代码才能找到参数 key 的可选值。</p> 
<p>优化：将参数 key 的值以常量的方式声明</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> KEY <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  alibaba<span class="token punctuation">:</span> <span class="token char">'A'</span><span class="token punctuation">,</span>
  baidu<span class="token punctuation">:</span> <span class="token char">'B'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
function <span class="token function">getValue</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">case</span> KEY<span class="token punctuation">.</span>alibaba<span class="token punctuation">:</span>
    <span class="token keyword">case</span> KEY<span class="token punctuation">.</span>baidu<span class="token punctuation">:</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">getValue</span><span class="token punctuation">(</span>KEY<span class="token punctuation">.</span>baidu<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>但这样也并非完美，假设现在要在 KEY 常量中加入一个 key，根据对应的规则，很有可能会出现值重复的情况：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> KEY <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  alibaba<span class="token punctuation">:</span> <span class="token char">'A'</span><span class="token punctuation">,</span>
  baidu<span class="token punctuation">:</span> <span class="token char">'B'</span><span class="token punctuation">,</span>
  tencent<span class="token punctuation">:</span> <span class="token char">'B'</span>
<span class="token punctuation">}</span>
这就会出现问题：
<span class="token function">getValue</span><span class="token punctuation">(</span>KEY<span class="token punctuation">.</span>baidu<span class="token punctuation">)</span> <span class="token comment">// 等同于 getValue(KEY.tencent)</span>
</code></pre> 
<p>所以在这种场景下更适合使用 Symbol，不需要关心值本身，只关心值的唯一性</p> 
<p>优化：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> KEY <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  alibaba<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  baidu<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  tencent<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>唯一性
<span class="token function">getValue</span><span class="token punctuation">(</span>KEY<span class="token punctuation">.</span>baidu<span class="token punctuation">)</span> <span class="token comment">// 将不等同 getValue(KEY.tencent)</span>
</code></pre> 
<h5><a id="2_441"></a>（2）避免对象属性覆盖</h5> 
<p>函数 fn 需要对传入的对象参数添加一个临时属性 user，但可能该对象参数中已经有这个属性了，如果直接赋值就会覆盖之前的值。此时就可以使用 Symbol 来避免这个问题。创建一个 Symbol 数据类型的变量，然后将该变量作为对象参数的属性进行赋值和读取，这样就能避免覆盖的情况：</p> 
<pre><code class="prism language-go">function <span class="token function">fn</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// {user: {id: xx, name: yy}}</span>
  <span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  o<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'zzz'</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="8__Set_452"></a>8. 集合 Set</h4> 
<p>ES6 Set 集合：类似于数组，成员值都是唯一的，集合实现了iterator接口，所以可以使用扩展运算符和 for…of 进行遍历。</p> 
<p>Set的属性和方法：</p> 
<table><thead><tr><th align="left"><strong>属性和方法</strong></th><th align="left"><strong>概述</strong></th></tr></thead><tbody><tr><td align="left">size</td><td align="left">返回集合的元素个数</td></tr><tr><td align="left">add</td><td align="left">增加一个新的元素，返回当前的集合</td></tr><tr><td align="left">delete</td><td align="left">删除元素，返回布尔值</td></tr><tr><td align="left">has</td><td align="left">检查集合中是否包含某元素，返回布尔值</td></tr><tr><td align="left">clear</td><td align="left">清空集合，返回undefined</td></tr></tbody></table> 
<pre><code class="prism language-go">创建空集合
let s <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

创建非空集合
let s1 <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 会去重</span>

返回集合元素个数
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 3</span>

添加新元素
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// {1,2,3,4}</span>

删除元素
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//true</span>

检测是否存在某个值
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// true</span>

清空集合
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//undefined</span>

数组去重
let arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token builtin">new</span> <span class="token function">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// {1, 2, 3}</span>
</code></pre> 
<p>可以通过set来求两个数组的交集和并集：</p> 
<pre><code class="prism language-go"><span class="token comment">// 模拟求交集 </span>
let intersection <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>set1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> set2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 模拟求差集</span>
let difference <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>set1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">!</span>set2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>用以下方法可以进行数组与集合的相互转化：</p> 
<pre><code class="prism language-go"><span class="token comment">// Set集合转化为数组</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>mySet<span class="token punctuation">]</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>mySet<span class="token punctuation">)</span>
 
<span class="token comment">// 数组转化为Set集合</span>
<span class="token keyword">const</span> mySet <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="9_Map_514"></a>9. Map</h4> 
<p>ES6 Map数据结构：类似于对象，但它的键值范围不限于字符串，可以是任何类型， 对象是“ 字符串—值”， Map 结构是“ 值—值” 的对应， 是一种更完善的 Hash 结构实现。Map也实现了iterator接口，所以可以使用扩展运算符和 for…of 进行遍历。</p> 
<p>Map的属性和方法：</p> 
<table><thead><tr><th align="left"><strong>属性和方法</strong></th><th align="left"><strong>概述</strong></th></tr></thead><tbody><tr><td align="left">size</td><td align="left">返回Map的元素个数</td></tr><tr><td align="left">set</td><td align="left">增加一个新的元素，返回当前的Map</td></tr><tr><td align="left">get</td><td align="left">返回键名对象的键值</td></tr><tr><td align="left">has</td><td align="left">检查Map中是否包含某元素，返回布尔值</td></tr><tr><td align="left">clear</td><td align="left">清空Map，返回undefined</td></tr></tbody></table> 
<pre><code class="prism language-go">创建一个空 <span class="token keyword">map</span>
let m <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

创建一个非空 <span class="token keyword">map</span>，传递二维数组，每一个二维数组对应键和值
let m2 <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
 <span class="token punctuation">[</span><span class="token char">'name'</span><span class="token punctuation">,</span> <span class="token char">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

获取映射元素的个数
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 1</span>

添加映射值
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token char">'age'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {"name" =&gt; "hello", "age" =&gt; 6}</span>

获取映射值
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token char">'age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 6</span>

检测是否有该映射
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token char">'age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>

清除
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// undefined</span>
</code></pre> 
<p>需要注意， 只有对同一个对象的引用（指针）， Map 结构才将其视为同一个键：</p> 
<pre><code class="prism language-go">let <span class="token keyword">map</span> <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">map</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">555</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">map</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre> 
<p>上面代码的set和get方法， 表面是针对同一个键， 但实际上这是两个值， 内存地址是不一样的， 因此get方法无法读取该键， 所以会返回undefined。</p> 
<p>如果 Map 的键是一个简单类型的值（ 数字、 字符串、 布尔值）， 则只要两个值严格相等， Map 将其视为一个键， 包括0和 - 0。另外， 虽然NaN不严格相等于自身， 但 Map 将其视为同一个键。</p> 
<pre><code class="prism language-go">let <span class="token keyword">map</span> <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">map</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>NaN<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">map</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>NaN<span class="token punctuation">)</span> <span class="token comment">// 123 </span>
<span class="token keyword">map</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">map</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>
</code></pre> 
<h4><a id="10__573"></a>10. 模块化</h4> 
<p>ES6首次引入模块化开发规范ES Module，让Javascript首次支持原生模块化开发。ES Module把一个文件当作一个模块，每个模块有自己的独立作用域，那如何把每个模块联系起来呢？核心点就是模块的导入与导出。</p> 
<h5><a id="1export__576"></a>（1）export 导出模块</h5> 
<ul><li><strong>正常导出：</strong></li></ul> 
<pre><code class="prism language-go"><span class="token comment">// 方式一</span>
export <span class="token keyword">var</span> first <span class="token operator">=</span> <span class="token char">'test'</span><span class="token punctuation">;</span>
export function <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 方式二</span>
<span class="token keyword">var</span> first <span class="token operator">=</span> <span class="token char">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> second <span class="token operator">=</span> <span class="token char">'test'</span><span class="token punctuation">;</span>
function <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
export <span class="token punctuation">{<!-- --></span>first<span class="token punctuation">,</span> second<span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li><strong>as关键字:</strong></li></ul> 
<pre><code class="prism language-go"><span class="token keyword">var</span> first <span class="token operator">=</span> <span class="token char">'test'</span><span class="token punctuation">;</span>
export <span class="token punctuation">{<!-- --></span>first as second<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>as关键字可以重命名暴露出的变量或方法，经过重命名后同一变量可以多次暴露出去。</p> 
<ul><li><strong>export default</strong></li></ul> 
<p>export default会导出默认输出，即用户不需要知道模块中输出的名字，在导入的时候为其指定任意名字。</p> 
<pre><code class="prism language-go"><span class="token comment">// 导出</span>
export <span class="token keyword">default</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 导入</span>
<span class="token keyword">import</span> customName from '<span class="token punctuation">.</span><span class="token operator">/</span>export<span class="token operator">-</span><span class="token keyword">default</span>'<span class="token punctuation">;</span>
</code></pre> 
<p><strong>注意：</strong> 导入默认模块时不需要大括号，导出默认的变量或方法可以有名字，但是对外无效。export default只能使用一次。</p> 
<h5><a id="2import__615"></a>（2）import 导入模块</h5> 
<ul><li><strong>正常导入：</strong></li></ul> 
<pre><code class="prism language-go"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">,</span> year<span class="token punctuation">}</span> from <span class="token char">'./profile'</span><span class="token punctuation">;</span>
</code></pre> 
<p>导入模块位置可以是相对路径也可以是绝对路径，.js可以省略，如果不带路径只是模块名，则需要通过配置文件告诉引擎查找的位置。</p> 
<ul><li><strong>as关键字：</strong></li></ul> 
<pre><code class="prism language-go"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> lastName as surname <span class="token punctuation">}</span> from <span class="token char">'./profile'</span><span class="token punctuation">;</span>
</code></pre> 
<p>import 命令会被提升到模块头部，所以写的位置不是那么重要，但是不能使用表达式和变量来进行导入。</p> 
<ul><li><strong>加载整个模块（无输出）</strong></li></ul> 
<pre><code class="prism language-go"><span class="token keyword">import</span> <span class="token char">'lodash'</span><span class="token punctuation">;</span> <span class="token comment">//仅仅是加载而已，无法使用</span>
</code></pre> 
<ul><li><strong>加载整个模块（有输出）</strong></li></ul> 
<pre><code class="prism language-go"><span class="token keyword">import</span> <span class="token operator">*</span> as circle from <span class="token char">'./circle'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'圆面积：'</span> <span class="token operator">+</span> circle<span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'圆周长：'</span> <span class="token operator">+</span> circle<span class="token punctuation">.</span><span class="token function">circumference</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>注意：</strong> import * 会忽略default输出</p> 
<h5><a id="3_649"></a>（3）导入导出复合用法</h5> 
<ul><li><strong>先导入后导出</strong></li></ul> 
<pre><code class="prism language-go">export <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> from <span class="token char">'my_module'</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> from <span class="token char">'my_module'</span><span class="token punctuation">;</span>
export <span class="token punctuation">{<!-- --></span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li><strong>整体先导入再输出以及default</strong></li></ul> 
<pre><code class="prism language-go"><span class="token comment">// 整体输出</span>
export <span class="token operator">*</span> from <span class="token char">'my_module'</span><span class="token punctuation">;</span>
<span class="token comment">// 导出default，正如前面所说，export default 其实导出的是default变量</span>
export <span class="token punctuation">{<!-- --></span> <span class="token keyword">default</span> <span class="token punctuation">}</span> from <span class="token char">'foo'</span><span class="token punctuation">;</span>
<span class="token comment">// 具名接口改default</span>
export <span class="token punctuation">{<!-- --></span> es6 as <span class="token keyword">default</span> <span class="token punctuation">}</span> from '<span class="token punctuation">.</span><span class="token operator">/</span>someModule'<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="4_671"></a>（4）模块的继承</h5> 
<pre><code class="prism language-go">export <span class="token operator">*</span> from <span class="token char">'circle'</span><span class="token punctuation">;</span>
export <span class="token keyword">var</span> e <span class="token operator">=</span> <span class="token number">2.71828182846</span><span class="token punctuation">;</span>
export <span class="token keyword">default</span> <span class="token function">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>注意：</strong> export * 会忽略default。</p> 
<h4><a id="11__683"></a>11. 字符串方法</h4> 
<h5><a id="1includes_685"></a>（1）includes()</h5> 
<p><code>includes()</code>：返回boolean值，字符串是否包含子串：</p> 
<pre><code class="prism language-go"><span class="token builtin">string</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>searchvalue<span class="token punctuation">,</span> start<span class="token punctuation">)</span>
</code></pre> 
<p>该方法有两个参数：</p> 
<ul><li>searchvalue：必需，要查找的字符串；</li><li>start：可选，设置从哪个索引位置开始查找，默认为 0。</li></ul> 
<pre><code class="prism language-go">let str <span class="token operator">=</span> 'Hello world<span class="token operator">!</span>'<span class="token punctuation">;</span>
 
str<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token char">'o'</span><span class="token punctuation">)</span>  <span class="token comment">// 输出结果：true</span>
str<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token char">'z'</span><span class="token punctuation">)</span>  <span class="token comment">// 输出结果：false</span>
str<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// 输出结果：false</span>
</code></pre> 
<h5><a id="2startsWith_706"></a>（2）startsWith()</h5> 
<p><code>startsWith()</code>：返回boolean值，是否以指定子串开头。语法同includes()方法一样。</p> 
<pre><code class="prism language-go">let str <span class="token operator">=</span> 'Hello world<span class="token operator">!</span>'<span class="token punctuation">;</span>
 
str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token char">'Hello'</span><span class="token punctuation">)</span> <span class="token comment">// 输出结果：true</span>
str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token char">'Helle'</span><span class="token punctuation">)</span> <span class="token comment">// 输出结果：false</span>
str<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token char">'wo'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">// 输出结果：true</span>
</code></pre> 
<h5><a id="3endsWith_718"></a>（3）endsWith()</h5> 
<p><code>endsWith()</code>：返回boolean值，是否以指定子串结尾：</p> 
<pre><code class="prism language-go"><span class="token builtin">string</span><span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>searchvalue<span class="token punctuation">,</span> length<span class="token punctuation">)</span>
</code></pre> 
<p>该方法有两个参数：</p> 
<ul><li>searchvalue：必需，要搜索的子字符串；</li><li>length：设置字符串的长度，默认值为原始字符串长度 string.length。</li></ul> 
<pre><code class="prism language-go">let str <span class="token operator">=</span> 'Hello world<span class="token operator">!</span>'<span class="token punctuation">;</span>
 
str<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token char">'!'</span><span class="token punctuation">)</span>       <span class="token comment">// 输出结果：true</span>
str<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token char">'llo'</span><span class="token punctuation">)</span>     <span class="token comment">// 输出结果：false</span>
str<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token char">'llo'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment">// 输出结果：true</span>
</code></pre> 
<p>可以看到，当第二个参数设置为5时，就会从字符串的前5个字符中进行检索，所以会返回true。</p> 
<h5><a id="4repeat_741"></a>（4）repeat()</h5> 
<p>repeat() 方法返回一个新字符串，表示将原字符串重复n次：</p> 
<pre><code class="prism language-go"><span class="token char">'x'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>     <span class="token comment">// 输出结果："xxx"</span>
<span class="token char">'hello'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 输出结果："hellohello"</span>
<span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment">// 输出结果：""</span>
</code></pre> 
<p>如果参数是小数，会向下取整：</p> 
<pre><code class="prism language-go"><span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">2.9</span><span class="token punctuation">)</span> <span class="token comment">// 输出结果："nana"</span>
</code></pre> 
<p>如果参数是负数或者Infinity，会报错：</p> 
<pre><code class="prism language-go"><span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>Infinity<span class="token punctuation">)</span>   <span class="token comment">// RangeError</span>
<span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>         <span class="token comment">// RangeError</span>
</code></pre> 
<p>如果参数是 0 到-1 之间的小数，则等同于 0，这是因为会先进行取整运算。0 到-1 之间的小数，取整以后等于-0，repeat视同为 0。</p> 
<pre><code class="prism language-go"><span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.9</span><span class="token punctuation">)</span>   <span class="token comment">// 输出结果：""</span>
</code></pre> 
<p>如果参数是NaN，就等同于 0：</p> 
<pre><code class="prism language-go"><span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>NaN<span class="token punctuation">)</span>    <span class="token comment">// 输出结果：""</span>
</code></pre> 
<p>如果repeat的参数是字符串，则会先转换成数字。</p> 
<pre><code class="prism language-go"><span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token char">'na'</span><span class="token punctuation">)</span>   <span class="token comment">// 输出结果：""</span>
<span class="token char">'na'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token char">'3'</span><span class="token punctuation">)</span>    <span class="token comment">// 输出结果："nanana"</span>
</code></pre> 
<h4><a id="12__783"></a>12. 数组方法</h4> 
<h5><a id="1reduce_785"></a>（1）reduce()</h5> 
<p>reduce() 方法对数组中的每个元素执行一个reducer函数(升序执行)，将其结果汇总为单个返回值。其使用语法如下：</p> 
<pre><code class="prism language-go">arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span><span class="token punctuation">[</span>initialValue<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>reduce 为数组中的每一个元素依次执行回调函数，不包括数组中被删除或从未被赋值的元素，接受四个参数：初始值（或者上一次回调函数的返回值），当前元素值，当前索引，调用 reduce 的数组。</p> 
<p>(1) <code>callback</code> （执行数组中每个值的函数，包含四个参数）</p> 
<ul><li>previousValue （上一次调用回调返回的值，或者是提供的初始值（initialValue））</li><li>currentValue （数组中当前被处理的元素）</li><li>index （当前元素在数组中的索引）</li><li>array （调用 reduce 的数组）</li></ul> 
<p>(2) <code>initialValue</code> （作为第一次调用 callback 的第一个参数。）</p> 
<pre><code class="prism language-go">let arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
let sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>输出结果如下：</p> 
<pre><code class="prism language-go"><span class="token number">1</span> <span class="token number">2</span> <span class="token number">1</span>
<span class="token number">3</span> <span class="token number">3</span> <span class="token number">2</span>
<span class="token number">6</span> <span class="token number">4</span> <span class="token number">3</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token number">10</span>
</code></pre> 
<p>再来加一个初始值看看：</p> 
<pre><code class="prism language-go">let arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
let sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>输出结果如下：</p> 
<pre><code class="prism language-go"><span class="token number">5</span> <span class="token number">1</span> <span class="token number">0</span>
<span class="token number">6</span> <span class="token number">2</span> <span class="token number">1</span>
<span class="token number">8</span> <span class="token number">3</span> <span class="token number">2</span>
<span class="token number">11</span> <span class="token number">4</span> <span class="token number">3</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token number">15</span>
</code></pre> 
<p>结论：<strong>如果没有提供initialValue，reduce 会从索引1的地方开始执行 callback 方法，跳过第一个索引，第一个作为初始值。如果提供initialValue，从索引0开始。</strong></p> 
<h5><a id="2filter_845"></a>（2）filter()</h5> 
<p><code>filter()</code>方法返回回调函数为true的元素组成的新数组。</p> 
<pre><code class="prism language-go">let arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=</span><span class="token operator">&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> 
<span class="token comment">// 结果：[3, 4, 5]</span>
</code></pre> 
<p>可以使用<code>filter()</code>方法来移除数组中的undefined、null、NAN等值</p> 
<pre><code class="prism language-go">let arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> undefined<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token char">''</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span>
<span class="token comment">// 结果：[1, 2, 3, 4]</span>
</code></pre> 
<h5><a id="3Arrayfrom_863"></a>（3）Array.from</h5> 
<p>Array.from 将类似数组（有迭代器）的可迭代对象创建为一个新的数组，不会改变原对象。</p> 
<p>语法上有 3 个参数：</p> 
<ul><li>必选，类似数组的对象；</li><li>可选，加工函数，新生成的数组会经过该函数的加工再返回；</li><li>可选，this 作用域，表示加工函数执行时 this 的值。</li></ul> 
<pre><code class="prism language-go"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token char">'b'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token char">'c'</span><span class="token punctuation">,</span> length<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token function">function</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> this<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//必须指定返回值，否则返回 undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>结果如图：</p> 
<p><img src="https://images2.imgbox.com/47/92/3JIYrKM1_o.png" alt="9d3741e58b34c4973bdf1fcebc83c67b.png"></p> 
<p>如果这里不指定 this，加工函数就可以是一个箭头函数。简写为：</p> 
<pre><code class="prism language-go">Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> value<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  控制台打印 (3) ["aaa", "bbb", "ccc"]</span>
</code></pre> 
<p>除了上述 obj 对象以外，拥有迭代器的对象还包括 String、Set、Map 等，<code>Array.from</code> 都可以进行处理：</p> 
<pre><code class="prism language-go"><span class="token comment">// String</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token char">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                             <span class="token comment">// ["a", "b", "c"]</span>
<span class="token comment">// Set</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token builtin">new</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token char">'abc'</span><span class="token punctuation">,</span> <span class="token char">'def'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// ["abc", "def"]</span>
<span class="token comment">// Map</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token builtin">new</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'ab'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token char">'de'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// [[1, 'ab'], [2, 'de']]</span>
</code></pre> 
<h5><a id="1fill_904"></a>（1）fill()</h5> 
<p><code>array.fill(value, start, end)</code>方法：向已有数组中插入全部或部分相同的值，start或end，如果是负值，则将从负值加上数组的长度而得到的值开始，其参数如下：</p> 
<ul><li>value：必需。填充的值；</li><li>start：可选。开始填充位置；</li><li>end：可选。停止填充位置 (默认为 <em>array</em>.length)即数组末尾。</li></ul> 
<pre><code class="prism language-go"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
<span class="token comment">// 用5填充整个数组</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [5, 5, 5, 5, 5]</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 重置</span>
 
<span class="token comment">// 用5填充索引大于等于3的元素</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0, 0, 5, 5]</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 重置</span>
 
<span class="token comment">// 用5填充索引大于等于1且小于等于3的元素</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 5, 5, 0, 0]</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 重置</span>
 
<span class="token comment">// 用5填充索引大于等于-1的元素</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 0, 0, 0, 5]</span>
arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 重置</span>
</code></pre> 
<h3><a id="ES7_2016_935"></a>二、ES7 新特性（2016）</h3> 
<h4><a id="1_Arrayincludes_937"></a>1. Array.includes()</h4> 
<p><strong>includes()</strong> ：返回boolean值，数组是否包含指定元素：</p> 
<pre><code class="prism language-go">arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>searchElement<span class="token punctuation">,</span> fromIndex<span class="token punctuation">)</span>
</code></pre> 
<p>参数：</p> 
<ul><li>searchElement：必须，需要查找的元素值。</li><li>fromIndex：可选，开始索引查找目标值。若为负值，则从 array.length + fromIndex 的索引开始搜 （倒数 fromIndex 个索引，然后往后搜寻）。默认为 0。</li></ul> 
<pre><code class="prism language-go"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  true</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  false</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> 
<p>在 ES7 之前，使用 indexOf 来判断数组中是否包含某个指定值。但 indexOf 在语义上不够明确直观，同时 indexOf 内部使用 === 来判等，所以存在对 NaN 的误判，includes 则修复了这个问题：</p> 
<pre><code class="prism language-go"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> NaN<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>NaN<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// -1</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> NaN<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>NaN<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  true</span>
</code></pre> 
<h4><a id="2__962"></a>2. 指数操作符</h4> 
<p>ES7 引入指数操作符 ，更方便进行指数计算，与 Math.pow() 等效：</p> 
<pre><code class="prism language-go">Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1024</span>
<span class="token number">2</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">;</span>           <span class="token comment">// 1024</span>
</code></pre> 
<h3><a id="ES8_2017_971"></a>三、ES8 新特性（2017）</h3> 
<h4><a id="1_padStartpadEnd_973"></a>1. padStart()和padEnd()</h4> 
<p>padStart()和padEnd()方法用于补齐字符串的长度。如果某个字符串不够指定长度，会在头部或尾部补全。</p> 
<h5><a id="1padStart_977"></a>（1）padStart()</h5> 
<p><code>padStart(length，addStr)</code>：用于头部补全。</p> 
<ul><li>length：补全生效的最小长度，原字符串长度 &gt;= 指定最小长度，则返回原字符串</li><li>addStr?：用来补全的字符串，达不到长度会重复，默认使用空格补全长度</li></ul> 
<pre><code class="prism language-go"><span class="token char">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token char">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'x'</span>
<span class="token char">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token char">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'ababx'</span>
<span class="token char">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token char">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'abax'</span>
<span class="token char">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 'a   '</span>
</code></pre> 
<pre><code class="prism language-go">补齐指定三位数 页码问题
<span class="token string">"1"</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token char">'0'</span><span class="token punctuation">)</span>   <span class="token comment">// 输出结果： '001'</span>
<span class="token string">"15"</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token char">'0'</span><span class="token punctuation">)</span>  <span class="token comment">// 输出结果： '015'</span>
</code></pre> 
<h5><a id="2padEnd_996"></a>（2）padEnd()</h5> 
<p><code>padEnd(length，addStr)</code>：用于尾部补全。</p> 
<ul><li>length：补全生效的最小长度，原字符串长度 &gt;= 指定最小长度，则返回原字符串</li><li>addStr：用来补全的字符串，达不到长度会重复，默认使用空格补全长度</li></ul> 
<pre><code class="prism language-go"><span class="token char">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token char">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xabab'</span>
<span class="token char">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token char">'ab'</span><span class="token punctuation">)</span> <span class="token comment">// 'xaba'</span>
</code></pre> 
<h4><a id="2_ObjectvaluesObjectentries_1007"></a>2. Object.values()和Object.entries()</h4> 
<p>对ES5中Object.keys方法遍历补充手段，供for…of循环使用。返回由给定对象的自身<strong>可枚举的属性</strong>（不含继承的和Symbol属性）组成的数组，数组元素顺序和正常循环遍历对象时一致，值如下：</p> 
<ul><li>Object.keys()：返回包含对象键名的数组；</li><li>Object.values()：返回包含对象键值的数组；</li><li>Object.entries()：返回包含对象键名和键值的数组。</li></ul> 
<pre><code class="prism language-go">let obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> 
  id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 
  name<span class="token punctuation">:</span> <span class="token char">'hello'</span><span class="token punctuation">,</span> 
  age<span class="token punctuation">:</span> <span class="token number">18</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出结果: ['id', 'name', 'age']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出结果: [1, 'hello', 18]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 输出结果: [['id', 1], ['name', 'hello'], ['age', 18]</span>
</code></pre> 
<p>注意：Object.keys()返回数组中的值都是字符串，不是字符串的key值会转化为字符串。</p> 
<h4><a id="3__1028"></a>3. 函数扩展</h4> 
<p>ES2017 规定函数参数列表结尾可以为逗号：</p> 
<pre><code class="prism language-go">function <span class="token function">person</span><span class="token punctuation">(</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre> 
<p>主要作用：方便使用git进行多人协作开发时修改同一个函数减少不必要的行变更。</p> 
<h3><a id="ES9_2018_1037"></a>四、ES9 新特性（2018）</h3> 
<h4><a id="1_for_awaitof_1039"></a>1. for await…of</h4> 
<p><code>for await...of</code>方法被称为<strong>异步迭代器</strong>，主要用来遍历异步对象。</p> 
<p><code>for await...of</code> 语句会在异步或者同步可迭代对象上创建一个迭代循环，包括 String，Array，类数组，Map， Set和自定义的异步或者同步可迭代对象。这个语句只能在 <code>async function</code>内使用：</p> 
<pre><code class="prism language-go">function Gen <span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token builtin">new</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span>reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token function">resolve</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
async function test <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   let arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">Gen</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Gen</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Gen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
   <span class="token keyword">for</span> await <span class="token punctuation">(</span>let item of arr<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>输出结果：</p> 
<p><img src="https://images2.imgbox.com/df/54/AznYrs9k_o.png" alt="9720196e61fe4af302c6786199443885.png"></p> 
<h4><a id="2_Promisefinally_1067"></a>2. Promise.finally</h4> 
<p>Promise.finally() ：无论 Promise 最终成功或失败都执行：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> one <span class="token operator">=</span> <span class="token char">'1'</span><span class="token punctuation">;</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>one<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
promise
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'success'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'fail'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'finally'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>finally() 函数不接受参数，finally() 内部通常不知道 promise 实例的执行结果，所以通常在 finally() 方法内执行的是与 promise 状态无关的操作。</p> 
<h4><a id="3__1087"></a>3. 对象的扩展运算符</h4> 
<p>ES6中只能作用于数组，ES2018中扩展运算符可以作用于对象：</p> 
<p>（1）将元素组织成对象</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>a<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 {b: 2, c: 3}</span>
 
<span class="token punctuation">(</span><span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>a<span class="token punctuation">,</span> <span class="token operator">...</span>obj<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 输出 {b: 2, c: 3}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>（2）将对象扩展为元素</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newObj <span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token operator">...</span>obj<span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出 {a: 1, b: 2, c: 3, d: 4}</span>
</code></pre> 
<p>（3）可以用来合并对象</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mergedObj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span>obj1<span class="token punctuation">,</span> <span class="token operator">...</span>obj2<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mergedObj<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出 {a: 1, b: 2, c: 3, d: 4}</span>
</code></pre> 
<h4><a id="4__Rest_1120"></a>4. 对象的 Rest</h4> 
<p>在对象的解构中，除了已经指定的属性之外，rest将会拷贝对象其他的所有可枚举属性：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>foo<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>foo<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {bar: 2, baz: 3}</span>
</code></pre> 
<p>如果用在函数参数中，rest 表示所有剩下的参数：</p> 
<pre><code class="prism language-go">function <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>param1<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> rest<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>param1<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span> d<span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// {b: 2, c: 3, d: 4}</span>
</code></pre> 
<p>注意，在对象字面量中，rest运算符只能放在对象的最顶层，并且只能使用一次，要放在最后：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span>rest<span class="token punctuation">,</span> foo<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">// Uncaught SyntaxError: Rest element must be last element</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>foo<span class="token punctuation">,</span> <span class="token operator">...</span>rest1<span class="token punctuation">,</span> <span class="token operator">...</span>rest2<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">// Uncaught SyntaxError: Rest element must be last element</span>
</code></pre> 
<h3><a id="ES10_2019_1148"></a>五、ES10 新特性（2019）</h3> 
<h4><a id="1_trimStart__trimEnd_1150"></a>1. trimStart() 和 trimEnd()</h4> 
<p>ES10之前trim()用于移除字符串首尾空白符。ES10中trimStart()和trimEnd() 方法用于移除字符串首、尾空白符，空白符包括：空格、制表符 tab、换行符等其他空白符等。</p> 
<p>trimStart() ：返回删除头部空白的新字符串，不会修改原始字符串：<br> trimEnd() ：返回删除尾部空白的新字符串，不会修改原始字符串：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token char">'  abc  '</span><span class="token punctuation">;</span>
 
s<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// "abc  "</span>
s<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// "  abc"</span>
</code></pre> 
<p>注意，这两个方法都不适用于null、undefined、Number类型。</p> 
<h4><a id="2_flatflatMap_1167"></a>2. flat()和flatMap()</h4> 
<h5><a id="1flat_1169"></a>（1）flat()</h5> 
<p>在ES2019中，flat()创建并返回一个新数组，元素本身也是数组会被打平填充到返回的数组中：</p> 
<pre><code class="prism language-go"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// [1, 2, 3]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// [1, 2, [3, 4]]</span>
</code></pre> 
<ul><li>flat(n)：n为 number 类型，表示要打平的层级数，默认只会打平一级嵌套：</li><li>如果数组中存在空项，会直接跳过：</li><li>如果传入的参数小于等于0，就会返回原数组：</li></ul> 
<pre><code class="prism language-go"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment">// [1, 2, 3, 4]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//  [1, 2, 3]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//  [1, [2, [3, [4, 5]]]]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  [1, [2, [3, [4, 5]]]]</span>
</code></pre> 
<h5><a id="2flatMap_1188"></a>（2）flatMap()</h5> 
<p>flatMap()方法使用映射函数映射每个元素，然后将结果压缩成一个新数组。它与 map 几乎相同，但 效率稍微高一些。</p> 
<pre><code class="prism language-go"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//  [2, 4, 6, 8]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//  [2, 4, 6, 8]</span>
 
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  [[2], [4], [6], [8]]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">map</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//  [[2], [4], [6], [8]]</span>
</code></pre> 
<h4><a id="3_ObjectfromEntries_1200"></a>3. Object.fromEntries()</h4> 
<p>Object.fromEntries()：可以把键值对列表转换为一个对象。该方法相当于 Object.entries() 方法的逆过程（对象转为二维数组）。</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> key1<span class="token punctuation">:</span> <span class="token char">'value1'</span><span class="token punctuation">,</span> key2<span class="token punctuation">:</span> <span class="token char">'value2'</span> <span class="token punctuation">}</span>
 
<span class="token keyword">const</span> array <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span>  <span class="token comment">// [ ["key1", "value1"], ["key2", "value2"] ]</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>             <span class="token comment">// { key1: 'value1', key2: 'value2' }</span>
</code></pre> 
<p>使用该方法主要有以下两个用途：</p> 
<h5><a id="1_1213"></a>（1）将数组转成对象</h5> 
<pre><code class="prism language-go"><span class="token keyword">const</span> entries <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token char">'foo'</span><span class="token punctuation">,</span> <span class="token char">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token char">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span>  <span class="token comment">//  { foo: "bar", baz: 42 }</span>
</code></pre> 
<h5><a id="2_Map__1223"></a>（2）将 Map 转成对象</h5> 
<pre><code class="prism language-go"><span class="token keyword">const</span> entries <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token char">'foo'</span><span class="token punctuation">,</span> <span class="token char">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token char">'baz'</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>entries<span class="token punctuation">)</span>  <span class="token comment">//  { foo: "bar", baz: 42 }</span>
</code></pre> 
<h4><a id="4_Symbol_1233"></a>4. Symbol描述</h4> 
<p>通过 Symbol() 创建符号时，可以通过参数提供字符串作为描述：</p> 
<pre><code class="prism language-go">let dog <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// dog 为描述</span>
</code></pre> 
<p>在 ES2019 之前，获取一个 Symbol 值的描述需要通过 String 方法 或 toString 方法：</p> 
<pre><code class="prism language-go"><span class="token function">String</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// "Symbol(dog)" </span>
dog<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// "Symbol(dog)"</span>
</code></pre> 
<p>ES2019 补充了属性 description，用来直接访问<strong>描述</strong>：</p> 
<pre><code class="prism language-go">dog<span class="token punctuation">.</span>description<span class="token punctuation">;</span>  <span class="token comment">// dog</span>
</code></pre> 
<h4><a id="5_toString_1253"></a>5. toString()</h4> 
<p>ES2019 对函数的 toString() 方法进行了扩展，以前这个方法只会输出函数代码，但会省略注释和空格。ES2019 的 toString()则会保留注释、空格等，即输出的是原始代码：</p> 
<pre><code class="prism language-go">function <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/* dog */</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'wangwang'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
sayHi<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 将输出和上面一样的原始代码</span>
</code></pre> 
<h4><a id="6_catch_1266"></a>6. catch</h4> 
<p>在 ES2019 以前，catch 会带有参数，但是很多时候 catch 块是多余的。而现在可以不带参数：</p> 
<pre><code class="prism language-go"><span class="token comment">// ES2019 之前</span>
try <span class="token punctuation">{<!-- --></span>
   <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token function">catch</span><span class="token punctuation">(</span><span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token operator">...</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// ES2019 之后</span>
try <span class="token punctuation">{<!-- --></span>
   <span class="token operator">...</span>
<span class="token punctuation">}</span> catch <span class="token punctuation">{<!-- --></span>
   <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="ES11_2020_1286"></a>六、ES11 新特性（2020）</h3> 
<h4><a id="1_BigInt_1288"></a>1. BigInt</h4> 
<p>在 JavaScript 中，数值类型 Number 是 64 位浮点数，所以计算精度和表示范围都有一定限制。ES2020 新增了 BigInt 数据类型，这也是 JavaScript 引入的第八种基本类型。BigInt 可以表示任意大的整数。其语法如下：</p> 
<pre><code class="prism language-go"><span class="token function">BigInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中 value 是创建对象的数值。可以是字符串或者整数。</p> 
<p>在 JavaScript 中，Number 基本类型可以精确表示的最大整数是253。因此早期会有这样的问题：</p> 
<pre><code class="prism language-go">let max <span class="token operator">=</span> Number<span class="token punctuation">.</span>MAX_SAFE_INTEGER<span class="token punctuation">;</span>    <span class="token comment">// 最大安全整数</span>
 
let max1 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">1</span>
let max2 <span class="token operator">=</span> max <span class="token operator">+</span> <span class="token number">2</span>
 
max1 <span class="token operator">==</span><span class="token operator">=</span> max2   <span class="token comment">// true</span>
</code></pre> 
<p>有了BigInt之后，这个问题就不复存在了：</p> 
<pre><code class="prism language-go">let max <span class="token operator">=</span> <span class="token function">BigInt</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span>MAX_SAFE_INTEGER<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
let max1 <span class="token operator">=</span> max <span class="token operator">+</span> 1n
let max2 <span class="token operator">=</span> max <span class="token operator">+</span> 2n
 
max1 <span class="token operator">==</span><span class="token operator">=</span> max2   <span class="token comment">// false</span>
</code></pre> 
<p>可以通过typeof操作符来判断变量是否为BigInt类型（返回字符串"bigint"）：</p> 
<pre><code class="prism language-go">typeof 1n <span class="token operator">==</span><span class="token operator">=</span> <span class="token char">'bigint'</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
typeof <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token char">'1'</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token operator">=</span> <span class="token char">'bigint'</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> 
<p>还可以通过<code>Object.prototype.toString</code>方法来判断变量是否为BigInt类型（返回字符串"[object BigInt]"）：</p> 
<pre><code class="prism language-go">Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>10n<span class="token punctuation">)</span> <span class="token operator">==</span><span class="token operator">=</span> '<span class="token punctuation">[</span>object BigInt<span class="token punctuation">]</span>'<span class="token punctuation">;</span>    <span class="token comment">// true</span>
</code></pre> 
<p>注意，BigInt 和 Number 不是严格相等的，但是宽松相等：</p> 
<pre><code class="prism language-go">10n <span class="token operator">==</span><span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// false </span>
10n <span class="token operator">==</span> <span class="token number">10</span>  <span class="token comment">// true</span>
</code></pre> 
<p>Number 和 BigInt 可以进行比较：</p> 
<pre><code class="prism language-go">1n <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// true </span>
2n <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// true </span>
<span class="token number">2</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>     <span class="token comment">// false </span>
2n <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">// false </span>
2n <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
</code></pre> 
<h4><a id="2__1350"></a>2. 空值合并运算符（??）</h4> 
<p>在编写代码时，如果某个属性不为 null 和 undefined，那么就获取该属性，如果该属性为 null 或 undefined，则取一个默认值：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> name <span class="token operator">=</span> dogName ? dogName <span class="token punctuation">:</span> <span class="token char">'default'</span><span class="token punctuation">;</span>
</code></pre> 
<p>可以通过 || 来简化：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> name <span class="token operator">=</span>  dogName <span class="token operator">||</span> <span class="token char">'default'</span><span class="token punctuation">;</span>
</code></pre> 
<p>但是 || 的写法存在一定的缺陷，当 dogName 为 0 或 false 的时候也会走到 default 的逻辑。所以 ES2020 引入了 ?? 运算符。只有 ?? 左边为 null 或 undefined时才返回右边的值：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> dogName <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> name <span class="token operator">=</span>  dogName ?? <span class="token char">'default'</span><span class="token punctuation">;</span>  <span class="token comment">// name = false;</span>
</code></pre> 
<h4><a id="3__1371"></a>3. 可选链操作符（?.）</h4> 
<p>又称 <code>链判断运算符</code> ，开发中经常需要获取深层次属性，例如 system.user.addr.province.name。在获取 name 属性前需要一步步的判断前面的属性是否存在，否则并会报错：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token punctuation">(</span>system <span class="token operator">&amp;&amp;</span> system<span class="token punctuation">.</span>user <span class="token operator">&amp;&amp;</span> system<span class="token punctuation">.</span>user<span class="token punctuation">.</span>addr <span class="token operator">&amp;&amp;</span> system<span class="token punctuation">.</span>user<span class="token punctuation">.</span>addr<span class="token punctuation">.</span>province <span class="token operator">&amp;&amp;</span> system<span class="token punctuation">.</span>user<span class="token punctuation">.</span>addr<span class="token punctuation">.</span>province<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token char">'default'</span><span class="token punctuation">;</span>

简化为：
<span class="token keyword">const</span> name <span class="token operator">=</span> system?<span class="token punctuation">.</span>user?<span class="token punctuation">.</span>addr?<span class="token punctuation">.</span>province?<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token char">'default'</span><span class="token punctuation">;</span>
</code></pre> 
<p>为了简化上述过程，使用?.，在引用为null 或 undefined 的情况下不会引起错误，该表达式短路返回值是 undefined。与函数调用一起使用时，如果给定的函数不存在，则返回 undefined。</p> 
<p>可选链有以下三种形式：</p> 
<pre><code class="prism language-go">a?<span class="token punctuation">.</span><span class="token punctuation">[</span>x<span class="token punctuation">]</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> null ? undefined <span class="token punctuation">:</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span>
 
a?<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> null ? undefined <span class="token punctuation">:</span> a<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
a?<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 等同于</span>
a <span class="token operator">==</span> null ? undefined <span class="token punctuation">:</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>在使用TypeScript开发时，这个操作符可以解决很多问题。</p> 
<h4><a id="4_PromiseallSettled_1402"></a>4. Promise.allSettled</h4> 
<p>Promise.allSettled：参数接受一个 Promise 的数组，返回一个新的 Promise。不管是否处理成功。</p> 
<p>下面使用 allSettled 实现的一段代码：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> resolved <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rejected <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> allSettledPromise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>resolved<span class="token punctuation">,</span> rejected<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
allSettledPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>function <span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回结果：</span>
<span class="token comment">// [</span>
<span class="token comment">//    { status: 'fulfilled', value: 2 },</span>
<span class="token comment">//    { status: 'rejected', reason: -1 }</span>
<span class="token comment">// ]</span>
</code></pre> 
<h4><a id="5_StringmatchAll_1421"></a>5. String.matchAll()</h4> 
<p>matchAll() 是新增的字符串方法，它返回一个包含所有匹配正则表达式的结果及分组捕获组的迭代器。因为返回的是遍历器，所以通常使用for…of循环取出。</p> 
<pre><code class="prism language-go"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match of <span class="token char">'abcabc'</span><span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span><span class="token operator">/</span>a<span class="token operator">/</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 为每次匹配调用回调</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//["a", index: 0, input: "abcabc", groups: undefined]</span>
<span class="token comment">//["a", index: 3, input: "abcabc", groups: undefined]</span>
</code></pre> 
<p>需要注意，该方法的第一个参数是一个正则表达式对象，如果传的参数不是一个正则表达式对象，则会隐式地使用 new RegExp(obj) 将其转换为一个 RegExp 。另外，RegExp必须是设置了全局模式g的形式，否则会抛出异常 TypeError。</p> 
<h3><a id="ES12_2021_1435"></a>七、ES12 新特性（2021）</h3> 
<h4><a id="1_StringreplaceAll_1437"></a>1. String.replaceAll()</h4> 
<p>replaceAll()方法会返回一个全新的字符串，所有符合匹配规则的字符都将被替换掉，替换规则可以是字符串或者正则表达式。</p> 
<pre><code class="prism language-go">let <span class="token builtin">string</span> <span class="token operator">=</span> 'hello world<span class="token punctuation">,</span> hello ES12'
<span class="token builtin">string</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span>hello<span class="token operator">/</span>g<span class="token punctuation">,</span><span class="token char">'hi'</span><span class="token punctuation">)</span>    <span class="token comment">// hi world, hi ES12</span>
<span class="token builtin">string</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token char">'hello'</span><span class="token punctuation">,</span><span class="token char">'hi'</span><span class="token punctuation">)</span>  <span class="token comment">// hi world, hi ES12</span>
</code></pre> 
<p>注意的是，replaceAll 在使用正则表达式的时候，如果非全局匹配（/g），会抛出异常：</p> 
<pre><code class="prism language-go">let <span class="token builtin">string</span> <span class="token operator">=</span> 'hello world<span class="token punctuation">,</span> hello ES12'
<span class="token builtin">string</span><span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token operator">/</span>hello<span class="token operator">/</span><span class="token punctuation">,</span><span class="token char">'hi'</span><span class="token punctuation">)</span> 
<span class="token comment">// Uncaught TypeError: String.prototype.replaceAll called with a non-global</span>
</code></pre> 
<h4><a id="2__1455"></a>2. 数字分隔符</h4> 
<p>数字分隔符可以在数字之间创建可视化分隔符，通过 <code>_</code>下划线来分割数字，使数字更具可读性，可以放在数字内的任何地方：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token number">1_000_000_000</span>
<span class="token comment">//等价于</span>
<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token number">1000000000</span>
</code></pre> 
<p>该新特性同样支持在八进制数中使用：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token number">0o123_456</span>
<span class="token comment">//等价于</span>
<span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token number">0o123456</span>
</code></pre> 
<h4><a id="3_Promiseany_1473"></a>3. Promise.any</h4> 
<p>Promise.any是 ES2021 新增的特性，它接收一个 Promise 可迭代对象（例如数组），只要其中的一个 promise 成功，就返回那个已经成功的 promise 如果可迭代对象中没有一个 promise 成功（即所有的 promises 都失败/拒绝），就返回一个失败的 promise 和 AggregateError 类型的实例，它是 Error 的一个子类，用于把单一的错误集合在一起</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span>
  Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token char">'ERROR A'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token char">'ERROR B'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token char">'result'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
 
Promise<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'value: '</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'err: '</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token comment">// 输出结果：value:  result</span>
</code></pre> 
<p>如果所有传入的 promises 都失败：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span>
  Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token char">'ERROR A'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token char">'ERROR B'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token char">'ERROR C'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
 
Promise<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'value：'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'err：'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>errors<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>输出结果：</p> 
<pre><code class="prism language-go">err：AggregateError<span class="token punctuation">:</span> All promises were rejected
All promises were rejected
AggregateError
<span class="token punctuation">[</span><span class="token string">"ERROR A"</span><span class="token punctuation">,</span> <span class="token string">"ERROR B"</span><span class="token punctuation">,</span> <span class="token string">"ERROR C"</span><span class="token punctuation">]</span>
</code></pre> 
<h4><a id="4__1521"></a>4. 逻辑赋值操作符</h4> 
<p>ES12中新增了几个逻辑赋值操作符，可以用来简化一些表达式：</p> 
<pre><code class="prism language-go"><span class="token comment">// 等同于 a = a || b</span>
a <span class="token operator">||</span><span class="token operator">=</span> b<span class="token punctuation">;</span>

<span class="token comment">// 等同于 c = c &amp;&amp; d</span>
c <span class="token operator">&amp;&amp;</span><span class="token operator">=</span> d<span class="token punctuation">;</span>

<span class="token comment">// 等同于 e = e ?? f</span>
e ??<span class="token operator">=</span> f<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="ES13_2022_1536"></a>八、ES13 新特性（2022）</h3> 
<h4><a id="1_ObjecthasOwn_1538"></a>1. Object.hasOwn()</h4> 
<p>在ES2022之前，可以使用 <code>Object.prototype.hasOwnProperty()</code> 来检查一个属性是否属于对象。</p> 
<p><code>Object.hasOwn</code> 特性是一种更简洁、更可靠的检查属性是否直接设置在对象上的方法：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> example <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  property<span class="token punctuation">:</span> <span class="token char">'123'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>example<span class="token punctuation">,</span> <span class="token char">'property'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>example<span class="token punctuation">,</span> <span class="token char">'property'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="2_Arrayat_1553"></a>2. Array.at()</h4> 
<p><code>at()</code> 是一个数组方法，用于通过给定索引来获取数组元素。当给定索引为正时，这种新方法与使用括号表示法访问具有相同的行为。当给出负整数索引时，就会从数组的最后一项开始检索：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>array<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>array<span class="token punctuation">.</span>lenght<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 4</span>
</code></pre> 
<p>除了数组，字符串也可以使用<code>at()</code>方法进行索引：</p> 
<pre><code class="prism language-go"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>str<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// d</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// d</span>
</code></pre> 
<h4><a id="3_errorcause_1576"></a>3. error.cause</h4> 
<p>在 ECMAScript 2022 规范中，<code>new Error()</code> 中可以指定导致它的原因：</p> 
<pre><code class="prism language-go">function <span class="token function">readFiles</span><span class="token punctuation">(</span>filePaths<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> filePaths<span class="token punctuation">.</span><span class="token keyword">map</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
      try <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// ···</span>
      <span class="token punctuation">}</span> catch <span class="token punctuation">(</span><span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        throw <span class="token builtin">new</span> <span class="token function">Error</span><span class="token punctuation">(</span>
          <span class="token string">`While processing ${filePath}`</span><span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span>cause<span class="token punctuation">:</span> <span class="token builtin">error</span><span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="4_Toplevel_Await_1596"></a>4. Top-level Await</h4> 
<p>在ES2017中，引入了 <code>async</code> 函数和 <code>await</code> 关键字，以简化 <code>Promise</code> 的使用， <code>await</code> 关键字只能在 <code>async</code> 函数内部使用。在异步函数之外使用 <code>await</code> 就会报错：<code>SyntaxError - SyntaxError: await is only valid in async function</code>。</p> 
<p>顶层 <code>await</code> 允许我们在 <code>async</code> 函数外面使用 <code>await</code> 关键字。它允许模块充当大型异步函数，通过顶层 <code>await</code>，这些 <code>ECMAScript</code> 模块可以等待资源加载。这样其他导入这些模块的模块在执行代码之前要等待资源加载完再去执行。</p> 
<p>由于 <code>await</code> 仅在 <code>async</code> 函数中可用，因此模块可以通过将代码包装在 <code>async</code> 函数中来在代码中包含 <code>await</code>：</p> 
<pre><code class="prism language-go"><span class="token comment">// a.js</span>
  <span class="token keyword">import</span> fetch  from <span class="token string">"node-fetch"</span><span class="token punctuation">;</span>
  let users<span class="token punctuation">;</span>
 
  export <span class="token keyword">const</span> fetchUsers <span class="token operator">=</span> async <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> resp <span class="token operator">=</span> await <span class="token function">fetch</span><span class="token punctuation">(</span>'https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>jsonplaceholder<span class="token punctuation">.</span>typicode<span class="token punctuation">.</span>com<span class="token operator">/</span>users'<span class="token punctuation">)</span><span class="token punctuation">;</span>
    users <span class="token operator">=</span>  resp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">fetchUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
  export <span class="token punctuation">{<!-- --></span> users <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
  <span class="token comment">// usingAwait.js</span>
  <span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>users<span class="token punctuation">}</span> from <span class="token char">'./a.js'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'users: '</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>'usingAwait module'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们还可以立即调用顶层<code>async</code>函数（IIAFE）：</p> 
<pre><code class="prism language-go"><span class="token keyword">import</span> fetch  from <span class="token string">"node-fetch"</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>async <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> resp <span class="token operator">=</span> await <span class="token function">fetch</span><span class="token punctuation">(</span>'https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>jsonplaceholder<span class="token punctuation">.</span>typicode<span class="token punctuation">.</span>com<span class="token operator">/</span>users'<span class="token punctuation">)</span><span class="token punctuation">;</span>
    users <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  export <span class="token punctuation">{<!-- --></span> users <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>这样会有一个缺点，直接导入的 <code>users</code> 是 <code>undefined</code>，需要在异步执行完成之后才能访问它：</p> 
<pre><code class="prism language-go"><span class="token comment">// usingAwait.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>users<span class="token punctuation">}</span> from <span class="token char">'./a.js'</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'users:'</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
 
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'users:'</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>'usingAwait module'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>当然，这种方法并不安全，因为如果异步函数执行花费的时间超过100毫秒， 它就不会起作用了，<code>users</code> 仍然是 <code>undefined</code>。</p> 
<p>另一个方法是导出一个 <code>promise</code>，让导入模块知道数据已经准备好了：</p> 
<pre><code class="prism language-go"><span class="token comment">//a.js</span>
<span class="token keyword">import</span> fetch  from <span class="token string">"node-fetch"</span><span class="token punctuation">;</span>
export <span class="token keyword">default</span> <span class="token punctuation">(</span>async <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> resp <span class="token operator">=</span> await <span class="token function">fetch</span><span class="token punctuation">(</span>'https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>jsonplaceholder<span class="token punctuation">.</span>typicode<span class="token punctuation">.</span>com<span class="token operator">/</span>users'<span class="token punctuation">)</span><span class="token punctuation">;</span>
  users <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
export <span class="token punctuation">{<!-- --></span> users <span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token comment">//usingAwait.js</span>
<span class="token keyword">import</span> promise<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>users<span class="token punctuation">}</span> from <span class="token char">'./a.js'</span><span class="token punctuation">;</span>
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>'usingAwait module'<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token char">'users:'</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>虽然这种方法似乎是给出了预期的结果，但是有一定的局限性：<strong>导入模块必须了解这种模式才能正确使用它</strong>。</p> 
<p>而顶层<code>await</code>就可以解决这些问题：</p> 
<pre><code class="prism language-go"><span class="token comment">// a.js</span>
  <span class="token keyword">const</span> resp <span class="token operator">=</span> await <span class="token function">fetch</span><span class="token punctuation">(</span>'https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>jsonplaceholder<span class="token punctuation">.</span>typicode<span class="token punctuation">.</span>com<span class="token operator">/</span>users'<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> users <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  export <span class="token punctuation">{<!-- --></span> users<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
  <span class="token comment">// usingAwait.js</span>
  <span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>users<span class="token punctuation">}</span> from <span class="token char">'./a.mjs'</span><span class="token punctuation">;</span>
 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>'usingAwait module'<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>顶级 <code>await</code> 在以下场景中将非常有用：</p> 
<ul><li>动态加载模块：</li></ul> 
<pre><code class="prism language-go"><span class="token keyword">const</span> strings <span class="token operator">=</span> await <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">`/i18n/${navigator.language}`</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>资源初始化：</li></ul> 
<pre><code class="prism language-go"><span class="token keyword">const</span> connection <span class="token operator">=</span> await <span class="token function">dbConnector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>依赖回退：</li></ul> 
<pre><code class="prism language-go">let translations<span class="token punctuation">;</span>
try <span class="token punctuation">{<!-- --></span>
  translations <span class="token operator">=</span> await <span class="token keyword">import</span><span class="token punctuation">(</span>'https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>app<span class="token punctuation">.</span>fr<span class="token punctuation">.</span>json'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> catch <span class="token punctuation">{<!-- --></span>
  translations <span class="token operator">=</span> await <span class="token keyword">import</span><span class="token punctuation">(</span>'https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>fallback<span class="token punctuation">.</span>en<span class="token punctuation">.</span>json'<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f1628a8592795f329db9c3d9fd329be1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java语言----二叉树</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58b50dea22af8d6c31975f9e9f179c56/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">申请虚拟VISA卡ONEKEY保姆级教程来了！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
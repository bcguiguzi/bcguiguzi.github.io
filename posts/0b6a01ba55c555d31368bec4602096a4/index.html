<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>react学习 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="react学习" />
<meta property="og:description" content="目录 一、react基础 5.loadsh使用排序8.ref获取DOM对象10.props使用*13.UseEffect17. UseMemouseCallbackuseRequest 二、 react使用redux三、美团外卖项目完成页面制作使用redux渲染页面使用react-router-dom重定向默认路由 查看评价封装request请求Token管理 一、react基础 jsx
大括号的作用
{count} {userLlist.map((item)=&gt;{return &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;}) } key是用于react内部渲染处理的 基础条件渲染 {flag &amp;&amp; &lt;p&gt;{&#34;显示&#34;}&lt;/p&gt;} 复杂条件渲染 function getItem(){ if(type==1) return &lt;p&gt;有图模式&lt;p/&gt; else if(type==2) return &lt;&gt;无图&lt;/&gt; } 2、useState使用
state是状态变量，数据变化视图变化
const [userList,setUserList]=useState([{id:1,name:&#34;z&#34;}]) 3.map,filter函数使用
4.tab切换功能实现
const tab={{type:&#34; &#34;,text:&#34; &#34;}} //将type设为class高亮 5.loadsh使用排序 import * as _ from &#39;lodash&#39; setCommentList(_.orderby(commentList,&#39;star&#39;//字段名，&#39;desc&#39;)) //不改变原数组 6.classnames优化类名控制
7.受控绑定表单
&lt;input value={value} onChange={(e)=&gt;{ setValue(e.target.value); //显示输入 }} type=&#39;text&#39; /&gt; 8.ref获取DOM对象 const inputRef=useRef(null); &lt;input ref={inputRef}/&gt; //使用inputRef.current获取DOM对象 9.uuid和dayjs库的使用
10.props使用 用于父传子组件消息" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/0b6a01ba55c555d31368bec4602096a4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-27T17:34:16+08:00" />
<meta property="article:modified_time" content="2024-02-27T17:34:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">react学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#react_1" rel="nofollow">一、react基础</a></li><li><ul><li><a href="#_30" rel="nofollow"></a></li><li><ul><li><a href="#_31" rel="nofollow"></a></li></ul> 
   </li><li><a href="#5loadsh_39" rel="nofollow">5.loadsh使用排序</a></li><li><a href="#8refDOM_57" rel="nofollow">8.ref获取DOM对象</a></li><li><a href="#10props_65" rel="nofollow">10.props使用</a></li><li><a href="#13UseEffect_85" rel="nofollow">*13.UseEffect</a></li><li><a href="#17_UseMemo_122" rel="nofollow">17. UseMemo</a></li><li><a href="#useCallback_133" rel="nofollow">useCallback</a></li><li><a href="#useRequest_150" rel="nofollow">useRequest</a></li></ul> 
  </li><li><a href="#_reactredux_169" rel="nofollow">二、 react使用redux</a></li><li><a href="#_181" rel="nofollow">三、美团外卖项目</a></li><li><ul><li><a href="#_193" rel="nofollow">完成页面制作</a></li><li><a href="#redux_195" rel="nofollow">使用redux渲染页面</a></li><li><a href="#reactrouterdom_276" rel="nofollow">使用react-router-dom</a></li><li><ul><li><a href="#_312" rel="nofollow">重定向默认路由</a></li></ul> 
   </li><li><a href="#_336" rel="nofollow">查看评价</a></li><li><a href="#request_342" rel="nofollow">封装request请求</a></li><li><a href="#Token_397" rel="nofollow">Token管理</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="react_1"></a>一、react基础</h2> 
<ol><li>jsx<br> 大括号的作用<br> <img src="https://images2.imgbox.com/4b/be/H2gYzbll_o.png" alt="在这里插入图片描述"></li></ol> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span>
<span class="token punctuation">{<!-- --></span>userLlist<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span><span class="token keyword">return</span> <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
key是用于react内部渲染处理的
</code></pre> 
<ol start="2"><li>基础条件渲染</li></ol> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>flag <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token string">"显示"</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>复杂条件渲染</li></ol> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>有图模式<span class="token operator">&lt;</span>p<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span>无图<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>2、useState使用<br> state是状态变量，数据变化视图变化</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token punctuation">[</span>userList<span class="token punctuation">,</span>setUserList<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"z"</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>3.map,filter函数使用</p> 
<h3><a id="_30"></a></h3> 
<h4><a id="_31"></a></h4> 
<p>4.tab切换功能实现</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> tab<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">" "</span><span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">" "</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token comment">//将type设为class高亮</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2d/a2/bzGK3X9r_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5loadsh_39"></a>5.loadsh使用排序</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span>
<span class="token function">setCommentList</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">orderby</span><span class="token punctuation">(</span>commentList<span class="token punctuation">,</span><span class="token string">'star'</span><span class="token comment">//字段名，'desc'))</span>
<span class="token comment">//不改变原数组</span>
</code></pre> 
<p>6.classnames优化类名控制<br> <img src="https://images2.imgbox.com/36/50/LmCd82p6_o.png" alt="在这里插入图片描述"><br> 7.受控绑定表单</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>input 
 value<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>value<span class="token punctuation">}</span> 
 onChange<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
   <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//显示输入</span>
 <span class="token punctuation">}</span><span class="token punctuation">}</span>
 type<span class="token operator">=</span><span class="token string">'text'</span>
 <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="8refDOM_57"></a>8.ref获取DOM对象</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> inputRef<span class="token operator">=</span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>inputRef<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">//使用inputRef.current获取DOM对象</span>
</code></pre> 
<p>9.uuid和dayjs库的使用<br> <img src="https://images2.imgbox.com/90/99/jePn6Tyx_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="10props_65"></a>10.props使用</h3> 
<p>用于父传子组件消息</p> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	prop<span class="token punctuation">.</span>name
	prop<span class="token punctuation">.</span>children <span class="token comment">//特殊属性</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">prop</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">&lt;</span>Son name<span class="token operator">=</span><span class="token string">"xxx"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token keyword">this</span> is span<span class="token operator">&lt;</span>p<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/da/25/svDypn5w_o.png" alt="在这里插入图片描述"><br> 11.子传父，兄弟之间传消息(利用子传父，父传兄弟)</p> 
<p>12.使用Context跨层通信</p> 
<pre><code class="prism language-javascript"><span class="token number">1</span>、全局中createContext创建一个Context上下文对象
<span class="token number">2</span>、上层用<span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>mdg<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>传递数据
<span class="token number">3</span><span class="token function">、底层用useContext</span><span class="token punctuation">(</span>Context<span class="token punctuation">)</span>方法获取数据
</code></pre> 
<h3><a id="13UseEffect_85"></a>*13.UseEffect</h3> 
<p><img src="https://images2.imgbox.com/77/5a/Dj9rBySN_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7d/39/gjh4AOXp_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript">    <span class="token keyword">const</span> <span class="token punctuation">[</span>commentList<span class="token punctuation">,</span>setCommentList<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// async异步，await等待</span>
            <span class="token keyword">const</span> res<span class="token operator">=</span><span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/comment'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span>res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">return</span> data<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   
            <span class="token function">setCommentList</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">getCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/79/83/GB0jbnTB_o.png" alt="在这里插入图片描述"><br> 清除副作用，最常见是在组件卸载时候<br> <img src="https://images2.imgbox.com/f2/61/2ieuHf9K_o.png" alt="在这里插入图片描述"><br> 14.自定义hook</p> 
<ol><li>构造一个use开头的函数名</li><li>在函数体内封装可<strong>复用</strong>的逻辑</li><li>把组件中用到的状态变量return出去<br> <img src="https://images2.imgbox.com/e0/78/s4uyYxIO_o.png" alt="在这里插入图片描述"></li><li>使用时解构出来<br> <img src="https://images2.imgbox.com/13/b3/8trTqoVc_o.png" alt="在这里插入图片描述"></li></ol> 
<hr> 
<p>15.hook使用规则</p> 
<blockquote> 
 <p>1.组件外使用 x<br> 2.if，for循环内使用 x</p> 
</blockquote> 
<p>16.json-server和axios使用<br> <img src="https://images2.imgbox.com/7a/bb/HswLkqCH_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="17_UseMemo_122"></a>17. UseMemo</h3> 
<ol><li>对于计算<strong>数据量大</strong>的函数，当重新渲染时，函数<strong>结果</strong>不必重新执行，用于性能优化<br> <img src="https://images2.imgbox.com/30/bf/03mJq0i0_o.png" alt="在这里插入图片描述"><br> 当点击button2时，组件重新渲染，但result不会重新计算，只有点击button1时才会重新计算</li><li>memo：将 memo(function APP1(){})，当子组件prop无变化时，使用<strong>memo可以阻止子组件渲染</strong>。</li></ol> 
<blockquote> 
 <p>prop的比较机制：使用Object.is，基础类型和引用类型不同<br> <img src="https://images2.imgbox.com/ec/56/ClKZhBJ7_o.png" alt="在这里插入图片描述"><br> []!==[]因为是不同的对象实例</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/7d/23/6MVsLtMW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="useCallback_133"></a>useCallback</h3> 
<p><code>useCallback</code>是React的一个Hook，用于优化性能，它可以帮助我们避免在渲染过程中不必要地创建新的函数实例。</p> 
<p>它接受两个参数：<strong>一个是我们需要记忆化的函数，另一个是一个依赖项数组。当依赖项发生变化时，<code>useCallback</code>会返回一个新的记忆化函数。</strong></p> 
<p><code>useCallback</code>的主要用途是<strong>优化性能</strong>。在React中，如果我们在组件渲染时创建函数，那么每次渲染都会创建一个新的函数实例。如果这个函数被用作子组件的props，那么即使父组件的状态或props没有变化，子组件也会因为接收到新的函数实例而重新渲染。通过使用<code>useCallback</code>，我们可以确保在依赖项没有变化的情况下，始终使用同一个函数实例，从而避免不必要的子组件重新渲染。</p> 
<pre><code>例如，以下代码创建了一个记忆化的`handleClick`函数，只有当`id`发生变化时，才会创建新的函数实例：
</code></pre> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> handleClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code>下例中，与memo配合使子组件不重复渲染(**因为还使用上一个函数实例子组件的prop参数未发生变化）**，性能优化
</code></pre> 
<p><img src="https://images2.imgbox.com/aa/5e/OusJ5MS9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="useRequest_150"></a>useRequest</h3> 
<p>useRequest是ahook第三方库中提供的一个hook<br> 在获取数据方面，可以代替useEffect</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> data<span class="token punctuation">,</span> error<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> run <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span>fetchData<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在需要的时候调用 run 函数来触发数据请求</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleFetchData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>USeRequest返回五个参数，可通过解构赋值获取</p> 
<ul><li>data: 保存请求成功时的数据。</li><li>error: 保存请求失败时的错误信息。</li><li>loading: 表示当前请求是否正在加载中。</li><li>cancel: 用于取消当前请求的函数。</li><li>run: 触发请求的函数。</li></ul> 
<h2><a id="_reactredux_169"></a>二、 react使用redux</h2> 
<p><img src="https://images2.imgbox.com/b5/d4/FWnBD9pl_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/73/6e/26Fzsrfw_o.png" alt="在这里插入图片描述"><br> 在我们继续之前，你需要熟悉一些重要的 Redux 术语：</p> 
<ul><li>state</li><li>action，action 是一个具有 type 字段的普通 JavaScript 对象，<strong>只描述发生了什么事情</strong>，有type，payload字段</li><li>reducer是一个纯函数，接收当前的 state 和一个 action 对象，必要时决定如何更新状态，并返回新状态。函数签名是：(state, action) =&gt; newState。 你可以将 reducer 视为一个事件监听器，它根据接收到的 action（事件）类型处理事件。</li><li>dispatch,调用action</li><li>UseSelector：允许你从 Redux store 中选择状态并订阅其更改，代替了connect<br> <img src="https://images2.imgbox.com/3b/5b/j0VSxSSJ_o.png" alt="在这里插入图片描述"></li></ul> 
<h2><a id="_181"></a>三、美团外卖项目</h2> 
<p><img src="https://images2.imgbox.com/60/8e/yfCT8zGi_o.png" alt="在这里插入图片描述"></p> 
<ol><li>添加按钮怎么显示？<br> 解决方法：antd icon<img src="https://images2.imgbox.com/09/0f/omwYPhU2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/19/66/OYIejvVL_o.png" alt="在这里插入图片描述"></li><li>滚动菜单如何实现<br> 解决方法：将延长的区域设置overflow:auto</li><li>flex<br> flex:1 不管内容多少，一般都是平分空间，空间大小都一致、<br> 而 flex:auto 是根据内容的大小来分，不是平的（除非内容都是一样，才平分）</li></ol> 
<h3><a id="_193"></a>完成页面制作</h3> 
<p><img src="https://images2.imgbox.com/16/03/R4HUVwry_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="redux_195"></a>使用redux渲染页面</h3> 
<p>完成购物车功能<br> <img src="https://images2.imgbox.com/21/70/5MDbzmC6_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-javascript">store<span class="token punctuation">.</span>js
<span class="token comment">// 编写store</span>

<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createSlice <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@reduxjs/toolkit"</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span>

<span class="token keyword">const</span> foodsStore <span class="token operator">=</span> <span class="token function">createSlice</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'foods'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">initialState</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 商品列表</span>
    <span class="token literal-property property">foodsList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 菜单激活下标值</span>
    <span class="token literal-property property">activeIndex</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 购物车列表</span>
    <span class="token literal-property property">cartList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">reducers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 更改商品列表</span>
    <span class="token function">setFoodsList</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// payload是传入的值</span>
      state<span class="token punctuation">.</span>foodsList <span class="token operator">=</span> action<span class="token punctuation">.</span>payload
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">changeActiveIndex</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        state<span class="token punctuation">.</span>activeIndex <span class="token operator">=</span> action<span class="token punctuation">.</span>payload
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">addCart</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 是否添加过？以action.payload.id去cartList中匹配 匹配到了 添加过</span>
        <span class="token keyword">const</span> item <span class="token operator">=</span> state<span class="token punctuation">.</span>cartList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          item<span class="token punctuation">.</span>count<span class="token operator">++</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          state<span class="token punctuation">.</span>cartList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// count增</span>
      <span class="token function">increCount</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 关键点：找到当前要修改谁的count id</span>
        <span class="token keyword">const</span> item <span class="token operator">=</span> state<span class="token punctuation">.</span>cartList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        item<span class="token punctuation">.</span>count<span class="token operator">++</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// count减</span>
      <span class="token function">decreCount</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 关键点：找到当前要修改谁的count id</span>
        <span class="token keyword">const</span> item <span class="token operator">=</span> state<span class="token punctuation">.</span>cartList<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        item<span class="token punctuation">.</span>count<span class="token operator">--</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">clearCart</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        state<span class="token punctuation">.</span>cartList<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
   
    
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 异步获取部分</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> setFoodsList<span class="token punctuation">,</span> changeActiveIndex<span class="token punctuation">,</span> addCart<span class="token punctuation">,</span> increCount<span class="token punctuation">,</span> decreCount<span class="token punctuation">,</span> clearCart <span class="token punctuation">}</span> <span class="token operator">=</span> foodsStore<span class="token punctuation">.</span>actions
<span class="token keyword">const</span> <span class="token function-variable function">fetchFoodsList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 编写异步逻辑</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'meituan/menu'</span><span class="token punctuation">)</span>
    <span class="token comment">// 调用dispatch函数提交action</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">setFoodsList</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{<!-- --></span> fetchFoodsList<span class="token punctuation">,</span> changeActiveIndex<span class="token punctuation">,</span> addCart<span class="token punctuation">,</span> increCount<span class="token punctuation">,</span> decreCount<span class="token punctuation">,</span> clearCart <span class="token punctuation">}</span>

<span class="token keyword">const</span> reducer <span class="token operator">=</span> foodsStore<span class="token punctuation">.</span>reducer

<span class="token keyword">export</span> <span class="token keyword">default</span> reducer
</code></pre> 
<h3><a id="reactrouterdom_276"></a>使用react-router-dom</h3> 
<ol><li>制作路由表</li></ol> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"login"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span><span class="token operator">&lt;</span>DempPage<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"index"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span><span class="token operator">&lt;</span>DempPage<span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>声明式导航</li></ul> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">'/index'</span>  <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<ul><li>编程式导航</li></ul> 
<pre><code class="prism language-javascript"><span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>Routes 多个Route需要Route包起来</li><li>Route</li><li>Outle 给children占位</li></ul> 
<blockquote> 
 <p>request请求中的url(‘xxx’)都是基于当前上级路由url的拼接，是相对路由<br> url(‘/xxx’)是绝对路由，根。</p> 
</blockquote> 
<h4><a id="_312"></a>重定向默认路由</h4> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
     <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/"</span><span class="token punctuation">,</span>
     <span class="token literal-property property">element</span><span class="token operator">:</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">children</span><span class="token operator">:</span>
     <span class="token punctuation">[</span>
       <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"/"</span><span class="token punctuation">,</span>
           <span class="token comment">// replace属性表示这是一个替换操作，而不是在历史记录中添加新的条目。</span>
           <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Navigate to<span class="token operator">=</span><span class="token string">"/home"</span> replace <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">{<!-- --></span>
           <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">"home"</span><span class="token punctuation">,</span>
           <span class="token literal-property property">element</span><span class="token operator">:</span><span class="token operator">&lt;</span>Home<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
            
        <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> 
<h3><a id="_336"></a>查看评价</h3> 
<p><img src="https://images2.imgbox.com/37/81/Xvo96hot_o.png" alt="在这里插入图片描述"></p> 
<pre><code>在img标签里面只设置宽度，不设置高度，图片就会等比例缩放。
</code></pre> 
<h3><a id="request_342"></a>封装request请求</h3> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">"axios"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> api<span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">baseURL</span><span class="token operator">:</span><span class="token string">"http://geek.itheima.net/v1_0"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span><span class="token number">5000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 请求拦截</span>
api<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 响应拦截</span>
api<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">interface</span> <span class="token class-name">Request</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">url</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token function-variable function">post</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">url</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 封装request模块</span>
<span class="token keyword">const</span> <span class="token literal-property property">request</span><span class="token operator">:</span> Request <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">url</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> api<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">post</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">url</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> api<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">...</span>params <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// const request = (method, url, data = null) =&gt; {<!-- --></span>
<span class="token comment">//  return api({<!-- --></span>
<span class="token comment">//    method: method,</span>
<span class="token comment">//    url: url,</span>
<span class="token comment">//    data: data,</span>
<span class="token comment">//    // 其他请求配置</span>
<span class="token comment">//  })</span>
<span class="token comment">//    .then(response =&gt; {<!-- --></span>
<span class="token comment">//      // 处理请求成功的响应</span>
<span class="token comment">//      return response.data;</span>
<span class="token comment">//    })</span>
<span class="token comment">//    .catch(error =&gt; {<!-- --></span>
<span class="token comment">//     // 处理请求失败的情况</span>
<span class="token comment">//      console.error('Request failed:', error);</span>
<span class="token comment">//      throw error;</span>
<span class="token comment">//    });</span>
<span class="token comment">//};</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> request<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a0/e1/1RI5knJ0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Token_397"></a>Token管理</h3> 
<ol><li>redux管理token</li><li>使用localstorag存储token，实现持久化管理</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/74856e474d82589099851b8a0334c9ba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MQTT通信协议介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1e82d840fda7709e80767107e5ffb3bf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">★教程3:Simulink学习教程入门60例目录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
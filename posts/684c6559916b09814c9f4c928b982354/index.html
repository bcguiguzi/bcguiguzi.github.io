<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>opencv的assert函数 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="opencv的assert函数" />
<meta property="og:description" content="ASSERT()是一个调试程序时经常使用的宏，在程序运行时它计算括号内的表达式，如果表达式为FALSE (0), 程序将报告错误，并终止执行。如果表达式不为0，则继续执行后面的语句。这个宏通常原来判断程序中是否出现了明显非法的数据，如果出现了终止程序以免导致严重后果，同时也便于查找错误。例如，变量n在程序中不应该为0，如果为0可能导致错误，你可以这样写程序： ...... ASSERT( n != 0); k = 10/ n; ...... ASSERT只有在Debug版本中才有效，如果编译为Release版本则被忽略。 assert()的功能类似，它是ANSI C标准中规定的函数，它与ASSERT的一个重要区别是可以用在Release版本中。 assert宏的原型定义在&lt;assert.h&gt;中，其作用是如果它的条件返回错误，则终止程序执行，原型定义： #include &lt;assert.h&gt; void assert( int expression ); assert的作用是现计算表达式 expression ，如果其值为假（即为0），那么它先向stderr打印一条出错信息， 然后通过调用 abort 来终止程序运行。 请看下面的程序清单badptr.c： #include &lt;stdio.h&gt; #include &lt;assert.h&gt; #include &lt;stdlib.h&gt; int main( void ) { FILE *fp; fp = fopen( &#34;test.txt&#34;, &#34;w&#34; );//以可写的方式打开一个文件，如果不存在就创建一个同名文件 assert( fp ); //所以这里不会出错 fclose( fp ); fp = fopen( &#34;noexitfile.txt&#34;, &#34;r&#34; );//以只读的方式打开一个文件，如果不存在就打开文件失败 assert( fp ); //所以这里出错 fclose( fp ); //程序永远都执行不到这里来 return 0; } [root@localhost error_process]# gcc badptr." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/684c6559916b09814c9f4c928b982354/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-05-11T16:29:19+08:00" />
<meta property="article:modified_time" content="2014-05-11T16:29:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">opencv的assert函数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">ASSERT()是一个调试程序时经常使用的宏，在程序运行时它计算括号内的表达式，如果表达式为FALSE (0), 程序将报告错误，并终止执行。如果表达式不为0，则继续执行后面的语句。这个宏通常原来判断程序中是否出现了明显非法的数据，如果出现了终止程序以免导致严重后果，同时也便于查找错误。例如，变量n在程序中不应该为0，如果为0可能导致错误，你可以这样写程序： </span> 
<br style="word-wrap:break-word; color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px"> 
<span style="color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">    ...... </span> 
<br style="word-wrap:break-word; color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px"> 
<span style="color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">    ASSERT( n != 0); </span> 
<br style="word-wrap:break-word; color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px"> 
<span style="color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">    k = 10/ n; </span> 
<br style="word-wrap:break-word; color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px"> 
<span style="color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">    ...... </span> 
<br style="word-wrap:break-word; color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px"> 
<span style="color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">    ASSERT只有在Debug版本中才有效，如果编译为Release版本则被忽略。 </span> 
<br style="word-wrap:break-word; color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px"> 
<span style="color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">    assert()的功能类似，它是ANSI C标准中规定的函数，它与ASSERT的一个重要区别是可以用在Release版本中。</span> 
<p style="word-wrap:break-word; margin-top:5px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; color:rgb(102,102,102); font-family:宋体,Arial; font-size:16px; line-height:26px">     assert宏的原型定义在&lt;assert.h&gt;中，其作用是如果它的条件返回错误，则终止程序执行，原型定义：<br style="word-wrap:break-word"> 　　#include &lt;assert.h&gt;<br style="word-wrap:break-word"> 　　void assert( int expression );<br style="word-wrap:break-word"> 　　assert的作用是现计算表达式 expression ，如果其值为假（即为0），那么它先向stderr打印一条出错信息，<br style="word-wrap:break-word"> 　　然后通过调用 abort 来终止程序运行。<br style="word-wrap:break-word"> 　　请看下面的程序清单badptr.c：<br style="word-wrap:break-word"> 　　#include &lt;stdio.h&gt;<br style="word-wrap:break-word"> 　　#include &lt;assert.h&gt;<br style="word-wrap:break-word"> 　　#include &lt;stdlib.h&gt;<br style="word-wrap:break-word"> 　　int main( void )<br style="word-wrap:break-word"> 　　{<!-- --><br style="word-wrap:break-word"> 　　FILE *fp;<br style="word-wrap:break-word"> 　　fp = fopen( "test.txt", "w" );//以可写的方式打开一个文件，如果不存在就创建一个同名文件<br style="word-wrap:break-word"> 　　assert( fp ); //所以这里不会出错<br style="word-wrap:break-word"> 　　fclose( fp );<br style="word-wrap:break-word"> 　　fp = fopen( "noexitfile.txt", "r" );//以只读的方式打开一个文件，如果不存在就打开文件失败<br style="word-wrap:break-word"> 　　assert( fp ); //所以这里出错<br style="word-wrap:break-word"> 　　fclose( fp ); //程序永远都执行不到这里来<br style="word-wrap:break-word"> 　　return 0;<br style="word-wrap:break-word"> 　　}<br style="word-wrap:break-word"> 　　[root@localhost error_process]# gcc badptr.c <br style="word-wrap:break-word"> 　　[root@localhost error_process]# ./a.out <br style="word-wrap:break-word"> 　　a.out: badptr.c:14: main: Assertion `fp' failed.<br style="word-wrap:break-word"> 　　已放弃<br style="word-wrap:break-word"> 　　使用assert的缺点是，频繁的调用会极大的影响程序的性能，增加额外的开销。<br style="word-wrap:break-word"> 　　在调试结束后，可以通过在包含#include &lt;assert.h&gt;的语句之前插入 #define NDEBUG 来禁用assert调用，示例代码如下：<br style="word-wrap:break-word"> 　　#include &lt;stdio.h&gt;<br style="word-wrap:break-word"> 　　#define NDEBUG<br style="word-wrap:break-word"> 　　#include &lt;assert.h&gt;<br style="word-wrap:break-word"> 　　用法总结与注意事项：<br style="word-wrap:break-word"> 　　1)在函数开始处检验传入参数的合法性<br style="word-wrap:break-word"> 　　如:<br style="word-wrap:break-word"> 　　int resetBufferSize(int nNewSize)<br style="word-wrap:break-word"> 　　{<!-- --><br style="word-wrap:break-word"> 　　//功能:改变缓冲区大小,<br style="word-wrap:break-word"> 　　//参数:nNewSize 缓冲区新长度<br style="word-wrap:break-word"> 　　//返回值:缓冲区当前长度 <br style="word-wrap:break-word"> 　　//说明:保持原信息内容不变 nNewSize&lt;=0表示清除缓冲区<br style="word-wrap:break-word"> 　　assert(nNewSize &gt;= 0);<br style="word-wrap:break-word"> 　　assert(nNewSize &lt;= MAX_BUFFER_SIZE);<br style="word-wrap:break-word"> 　　...<br style="word-wrap:break-word"> 　　}<br style="word-wrap:break-word"> 　　2)每个assert只检验一个条件,因为同时检验多个条件时,如果断言失败,无法直观的判断是哪个条件失败<br style="word-wrap:break-word"> 　　不好: assert(nOffset&gt;=0 &amp;&amp; nOffset+nSize&lt;=m_nInfomationSize);<br style="word-wrap:break-word"> 　　好: assert(nOffset &gt;= 0);<br style="word-wrap:break-word"> 　　assert(nOffset+nSize &lt;= m_nInfomationSize);<br style="word-wrap:break-word"> 　　3)不能使用改变环境的语句,因为assert只在DEBUG个生效,如果这么做,会使用程序在真正运行时遇到问题<br style="word-wrap:break-word"> 　　错误: assert(i++ &lt; 100)<br style="word-wrap:break-word"> 　　这是因为如果出错，比如在执行之前i=100,那么这条语句就不会执行，那么i++这条命令就没有执行。<br style="word-wrap:break-word"> 　　正确: assert(i &lt; 100)<br style="word-wrap:break-word"> 　　i++;<br style="word-wrap:break-word"> 　　4)assert和后面的语句应空一行,以形成逻辑和视觉上的一致感<br style="word-wrap:break-word"> 　　5)有的地方,assert不能代替条件过滤 <br style="word-wrap:break-word"> 　　注意：当对于浮点数：<br style="word-wrap:break-word"> 　　#include&lt;assert.h&gt;<br style="word-wrap:break-word"> 　　// float pi=3.14;<br style="word-wrap:break-word"> 　　// assert(pi=3.14); //<br style="word-wrap:break-word"> 　　float pi=3.14f;<br style="word-wrap:break-word"> 　　assert (pi=3.14f);<br style="word-wrap:break-word"> 　　---------------------------------------------------------<br style="word-wrap:break-word"> 　　在switch语句中总是要有default子句来显示信息(Assert)。 <br style="word-wrap:break-word"> 　　int number = SomeMethod(); <br style="word-wrap:break-word"> 　　switch(number) <br style="word-wrap:break-word"> 　　{ <br style="word-wrap:break-word"> 　　case 1: <br style="word-wrap:break-word"> 　　Trace.WriteLine("Case 1:"); <br style="word-wrap:break-word"> 　　break; <br style="word-wrap:break-word"> 　　case 2: <br style="word-wrap:break-word"> 　　Trace.WriteLine("Case 2:"); <br style="word-wrap:break-word"> 　　break; <br style="word-wrap:break-word"> 　　default : <br style="word-wrap:break-word"> 　　Debug.Assert(false); <br style="word-wrap:break-word"> 　　break; <br style="word-wrap:break-word"> 　　}</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bd814257c2b5d75d2a2fa24dd478ac9b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机经典书籍(纯屌丝)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/01cecc5380d9acc7c1bd2e0a10082497/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">为什么DataGridView不出现滚动条？它的ScrollBars属性我设置为Both了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
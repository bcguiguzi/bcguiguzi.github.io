<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用&#34;http://m.weather.com.cn/data/&#34; &#43; cityCode &#43; &#34;.html&#34;获取城市天气 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用&#34;http://m.weather.com.cn/data/&#34; &#43; cityCode &#43; &#34;.html&#34;获取城市天气" />
<meta property="og:description" content="转载自： http://blog.sina.com.cn/s/blog_a28e3dd901016512.html
数据来源是中国中央气象局的天气数据，首先我们来了解一下他返回到的数据代表的意思。
city:西安, // 地区名称
city_en:xian, // 英文 (汉语拼音) 名称
date_y:2012年8月30日, // 当前日期
date:, // 网上解释是阴历年
week:星期四, // 星期
fchh:18, // 更新点时间 (18点)
cityid:101110101, // 地区 ID
// 六天的温度
temp1:21℃~28℃, // 在更新点之前是今日最高温到午夜的最低温，在更新点之后是今日午夜的最低温到明日的最高温
temp2:18℃~22℃, // 以此类推
temp3:17℃~26℃,
temp4:16℃~28℃,
temp5:16℃~29℃,
temp6:17℃~30℃,
// 华氏温度
tempF1:69.8℉~82.4℉,
tempF2:64.4℉~71.6℉,
tempF3:62.6℉~78.8℉,
tempF4:60.8℉~82.4℉,
tempF5:60.8℉~84.2℉,
tempF6:62.6℉~86℉,
// 天气描述，同样根据更新点确定 weather1 是今天还是明天的
weather1:阴转中雨,
weather2:中雨转大雨,
weather3:小到中雨转多云,
weather4:多云转晴,
weather5:晴,
weather6:晴转多云,
// 12 幅图片对应六天的天气，更新点前就是今日白天，今日夜间，明日白天，明日夜间，更新点之后就是今日夜间开始的
img1:2, //阴天
img2:8, // 中雨，和一图片对应天气的阴转中雨
img3:8, // 依次类推" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/e0af7966eed2850cccf7e138272fb0ff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-12-11T10:34:54+08:00" />
<meta property="article:modified_time" content="2013-12-11T10:34:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用&#34;http://m.weather.com.cn/data/&#34; &#43; cityCode &#43; &#34;.html&#34;获取城市天气</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>转载自： <a target="_blank" href="http://blog.sina.com.cn/s/blog_a28e3dd901016512.html" rel="nofollow noopener noreferrer">http://blog.sina.com.cn/s/blog_a28e3dd901016512.html</a></p> 
<p><br> </p> 
<p><span style="word-wrap:normal; word-break:normal; line-height:21px; color:rgb(73,73,73); font-family:simsun; font-size:14px; background-color:rgb(226,226,226)"><span style="word-wrap:normal; word-break:normal">数据来源是中国中央气象局的天气数据，首先我们来了解一下他返回到的数据代表的意思。<br> city:西安, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 地区名称<br> </span>city_en:xian, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 英文 (汉语拼音) 名称<br> </span>date_y:2012年8月30日, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 当前日期</span><br> date:, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 网上解释是阴历年</span><br> week:星期四, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 星期</span><br> fchh:18, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 更新点时间 (18点)</span><br> cityid:101110101, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 地区 ID<br> </span><span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 六天的温度<br> </span>temp1:21℃~28℃, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 在更新点之前是今日最高温到午夜的最低温，在更新点之后是今日午夜的最低温到明日的最高温<br> </span>temp2:18℃~22℃, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 以此类推<br> </span>temp3:17℃~26℃,<br> temp4:16℃~28℃,<br> temp5:16℃~29℃,<br> temp6:17℃~30℃,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 华氏温度</span><br> tempF1:69.8℉~82.4℉,<br> tempF2:64.4℉~71.6℉,<br> tempF3:62.6℉~78.8℉,<br> tempF4:60.8℉~82.4℉,<br> tempF5:60.8℉~84.2℉,<br> tempF6:62.6℉~86℉,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 天气描述，同样根据更新点确定 weather1 是今天还是明天的<br> </span>weather1:阴转中雨,<br> weather2:中雨转大雨,<br> weather3:小到中雨转多云,<br> weather4:多云转晴,<br> weather5:晴,<br> weather6:晴转多云,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 12 幅图片对应六天的天气，更新点前就是今日白天，今日夜间，明日白天，明日夜间，更新点之后就是今日夜间开始的<br> </span>img1:2, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//阴天<br> </span>img2:8, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 中雨，和一图片对应天气的阴转中雨</span><br> img3:8, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 依次类推<br> </span>img4:9,<br> img5:21,<br> img6:1,<br> img7:1,<br> img8:0,<br> img9:0, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 晴<br> </span>img10:99, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 第五天是晴，没有 "转" 了，所以这幅图片是无效占位，和前一幅显示相同</span><br> img11:0,<br> img12:1,<br> img_single:8,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 分别对应图片的描述</span><br> img_title1:阴,<br> img_title2:中雨,<br> img_title3:中雨,<br> img_title4:大雨,<br> img_title5:小到中雨,<br> img_title6:多云,<br> img_title7:多云,<br> img_title8:晴,<br> img_title9:晴,<br> img_title10:晴,<br> img_title11:晴,<br> img_title12:多云,<br> img_title_single:中雨,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 六天的风力和风向</span><br> wind1:西风小于3级转3-4级,<br> wind2:西风3-4级,<br> wind3:旋转风小于3级,<br> wind4:旋转风小于3级,<br> wind5:旋转风小于3级,<br> wind6:旋转风小于3级,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 今明的风向</span><br> fx1:西风,<br> fx2:西风,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 六天的风力(和风向分开了)</span><br> fl1:小于3级转3-4级,<br> fl2:3-4级,<br> fl3:小于3级,<br> fl4:小于3级,<br> fl5:小于3级,<br> fl6:小于3级,<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 生活指数，也和更新点有关系</span><br> index:热<span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">, // 一天舒适度</span><br> index_d:天气较热，建议着短裙、短裤、短套装、T恤等夏季服装。年老体弱者宜着长袖衬衫和单裤。, // 一天舒适度的描述<br> index48:舒适, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//两天的舒适度(48小时)<br> </span>index48_d:建议着薄型套装或牛仔衫裤等春秋过渡装。年老体弱者宜着套装、夹克衫等。, // 描述<br> index_uv:弱, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 一天的紫外线指数<br> </span>index48_uv:最弱, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 两天紫外线指数<br> </span>index_xc:不宜, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 洗车指数<br> </span>index_tr:一般, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 旅游指数<br> </span>index_co:较舒适, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//舒适度指数<br> </span>st1:24, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 这些不知道干啥的~应该也是六天的一个什么数据吧。</span><br> st2:20,<br> st3:17,<br> st4:14,<br> st5:26,<br> st6:15,<br> index_cl:不宜, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 晨练指数<br> </span>index_ls:不宜, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 晾晒指数<br> </span>index_ag:极易发 <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 息斯敏过敏气象指数<br> </span></span></span><span style="color:rgb(73,73,73); font-family:simsun; font-size:14px; line-height:21px; background-color:rgb(226,226,226)"></span></p> 
<div style="color:rgb(73,73,73); font-family:simsun; font-size:14px; line-height:21px; background-color:rgb(226,226,226)"> 
 <span style="word-wrap:normal; word-break:normal">对于实时天气数据的各项具体含义解释如下：<br> city:西安, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 地区名<br> </span>cityid:101110101, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 地区 ID<br> </span>temp1:21℃, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 今天夜间温度<br> </span>temp2:28℃, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 明天白天温度<br> </span>weather:阴转中雨, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 天气描述<br> </span>img1:n2.gif, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 今天夜间天气图片 n 表示 night<br> </span>img2:d8.gif, <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 明天白天天气图片 d 表示 day<br> </span>ptime:18:00 <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 更新时间<br> </span><br> 注意返回的数据的格式是Json类型。如何解析，我们要用到解析工具通过解析获取所需的信息。由于提供的数据比较多，我们可以选择自己需要的数据，不一定给的数据都要使用到。通过上面介绍我们已经大概了解了这些数据代表的含义。那么我们现在进行Android代码部分的讲解。通过下面的函数我们可以获取到网页数据，其中的String strUrl参数即是网址。<br> <span style="word-wrap:normal; word-break:normal">private String connServerForResult(String strUrl) {<!-- --><br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//获取HttpGet对象<br> </span>HttpGet httpRequest = new HttpGet(strUrl);<br> String strResult = "";<br> try {<!-- --><br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// HttpClient对象<br> </span>HttpClient httpClient = new DefaultHttpClient();<br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 获得HttpResponse对象</span><br> HttpResponse httpResponse = httpClient.execute(httpRequest);<br> if (httpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {<!-- --><br> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">// 取得返回的数据</span><br> strResult = EntityUtils.toString(httpResponse.getEntity());<br> }</span></span> 
</div> 
<div style="color:rgb(73,73,73); font-family:simsun; font-size:14px; line-height:21px; background-color:rgb(226,226,226)"> 
 <span style="word-wrap:normal; word-break:normal">} catch (ClientProtocolException e) {<!-- --><br> e.printStackTrace();<br> } catch (IOException e) {<!-- --><br> e.printStackTrace();<br> }<br> Log.i("Infor", strResult);<br> return strResult; <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//返回结果</span><br> }<br> <span style="word-wrap:normal; word-break:normal">对于返回的结果我们通过Json解析工具进行解析。下面是解析函数的代码，其参数就是要解析的Json格式数据字符串。<br> private void parseJson(String strResult) {<!-- --><br> try {<!-- --><br> JSONObject jsonObj = new JSONObject(strResult).getJSONObject("weatherinfo");<br> today= jsonObj.getString("date_y"); <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//当前日期<br> </span>dayofweek= jsonObj.getString("week"); <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//当前星期<br> </span>city = jsonObj.getString("city"); <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//城市名称<br> </span>ftime= jsonObj.getInt("fchh"); <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">/</span><span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">/更新时间（整点）【更新时间确定temp1属于哪天】</span><br> <span style="word-wrap:normal; word-break:normal; color:rgb(0,32,96)"><span style="word-wrap:normal; word-break:normal; font-weight:bold">………………</span> <span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">//由于数据较多此处省略了部分代码，其他数据解析方法相同，大家可以照葫芦画瓢</span></span><span style="word-wrap:normal; word-break:normal; color:rgb(0,32,96)"><span style="word-wrap:normal; word-break:normal; color:rgb(255,0,0)">。</span><br> </span><span style="word-wrap:normal; word-break:normal">} catch (JSONException e) {<!-- --><br> Log.i("Erorr","Json parse error");<br> e.printStackTrace();<br> }</span></span></span> 
</div> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0623fafe5a3a9be3f8d517d2ea05a88f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android Developers:处理音频输出的硬件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8129cf00d264baea2e0f9cab0b547060/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">blackhat 2013 usa video</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
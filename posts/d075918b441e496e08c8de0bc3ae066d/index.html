<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Next.js-基于文件的路由 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Next.js-基于文件的路由" />
<meta property="og:description" content="基于文件的路由 在 Next.js 中，一个 page（页面） 就是一个从 .js、jsx、.ts 或 .tsx 文件导出（export）的 React 组件 ，这些文件存放在 pages 目录下。每个
page（页面）都使用其文件名作为路由（route）。
示例:
如果你创建了一个命名为 pages/about.tsx 的文件并导出（export）一个如下所示的 React 组件，则可以通过 /about 路径进行访问。
import React from &#34;react&#34;; function About() { return &lt;div&gt;About&lt;/div&gt; }; export default About; 默认路由 index.tsx总是被当作它所在文件夹的默认路由界面.
示例:
在pages目录下新建一个about文件夹, 里面创建一个index.tsx
index.tsx
import React from &#34;react&#34;; const About: React.FC = () =&gt; ( &lt;div&gt; &lt;h1&gt;The About Page&lt;/h1&gt; &lt;/div&gt; ); export default About; 访问
具有动态路由的页面 Next.js 支持具有动态路由的 pages（页面）。
示例:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d075918b441e496e08c8de0bc3ae066d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-02T21:44:18+08:00" />
<meta property="article:modified_time" content="2022-12-02T21:44:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Next.js-基于文件的路由</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>基于文件的路由</h2> 
<p>在 Next.js 中，一个 page（页面） 就是一个从 .js、jsx、.ts 或 .tsx 文件导出（export）的 React 组件 ，这些文件存放在 pages 目录下。每个<br> page（页面）都使用其文件名作为路由（route）。</p> 
<p><code>示例:</code><br> 如果你创建了一个命名为 <code>pages/about.tsx</code> 的文件并导出（export）一个如下所示的 React 组件，则可以通过 /about 路径进行访问。</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">About</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> About<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_18"></a>默认路由</h3> 
<p>index.tsx总是被当作它所在文件夹的默认路由界面.</p> 
<p><code>示例:</code></p> 
<p>在pages目录下新建一个about文件夹, 里面创建一个index.tsx<br> <img src="https://images2.imgbox.com/5f/7c/2WyJsQqL_o.png" alt="请添加图片描述"></p> 
<p>index.tsx</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> About<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>The About Page<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> About<span class="token punctuation">;</span>
</code></pre> 
<p>访问</p> 
<p><img src="https://images2.imgbox.com/69/1d/jtamL0dy_o.png" alt="请添加图片描述"></p> 
<h3><a id="_47"></a>具有动态路由的页面</h3> 
<p>Next.js 支持具有动态路由的 pages（页面）。</p> 
<p><code>示例:</code></p> 
<p>如果你创建了一个命名为 pages/portfolio/[id].tsx 的文件，那么就可以通过<br> portfolio/1、portfolio/2 等类似的路径进行访问。</p> 
<p>[id].tsx</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/router"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> PortfolioProjectPage<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// query为路径参数, 类型为Object, 所以使用es6的解构语法</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> id <span class="token punctuation">}</span> <span class="token operator">=</span> router<span class="token punctuation">.</span>query<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>The Portfolio Project Page<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>id <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> id <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> PortfolioProjectPage<span class="token punctuation">;</span>
</code></pre> 
<p>浏览器<br> <img src="https://images2.imgbox.com/72/33/QbgjE0Sj_o.png" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/7c/e5/sK6punSb_o.png" alt="请添加图片描述"></p> 
<h3><a id="_83"></a>多个嵌套的动态路由字段</h3> 
<p>可以使用[…whateverNameYouWant].tsx获取所有嵌套的路由字段.</p> 
<p>创建一个命名为 pages/blog/[…slug].tsx 的文件</p> 
<p>访问localhost:3000/blog/abc/123时, slug会被赋值成一个数组, 这个数组内含所有路由的值</p> 
<p><code>slug = [abc, 123]</code></p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/router"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> BlogPostPage<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> slug <span class="token punctuation">}</span> <span class="token operator">=</span> router<span class="token punctuation">.</span>query<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>The Blog Post Page<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span> slug <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> BlogPostPage<span class="token punctuation">;</span>
</code></pre> 
<p>浏览器</p> 
<p><img src="https://images2.imgbox.com/3a/ec/5y1gtSv8_o.png" alt="请添加图片描述"></p> 
<h3><a id="Navigation_117"></a>导航(Navigation)</h3> 
<h4><a id="_119"></a>组件式</h4> 
<p>可以使用next/link的Link组件, 与react-router使用方法一样</p> 
<p>href属性值为要导航到的路由</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Link <span class="token keyword">from</span> <span class="token string">"next/link"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ClientsPage<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> clients <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span> id<span class="token operator">:</span> <span class="token string">"max"</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"Maximilian"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> id<span class="token operator">:</span> <span class="token string">"manu"</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">"Manuel"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>The Clients Page<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span>
          clients<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> id<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
              <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
                <span class="token punctuation">{<!-- --></span><span class="token comment">/*
                href可以使用模板字符串, 
                也可以使用对象赋值, pathname: 路径名, query: 参数值
                此段代码可以写为:
                &lt;Link href={ `/clients/${ id }` }&gt;
                  { name }
                &lt;/Link&gt;
                  */</span> <span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>Link href<span class="token operator">=</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span>
                  pathname<span class="token operator">:</span> <span class="token string">"/clients/[id]"</span><span class="token punctuation">,</span>
                  query<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> id<span class="token operator">:</span> id <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token punctuation">{<!-- --></span> name <span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ClientsPage<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_168"></a>编程式</h4> 
<p>导入next/router的useRouter</p> 
<p>使用push方法或者replace方法, 参数为要导航到的路由</p> 
<ol><li>push: 可以回退页面</li><li>replace: 直接取代, 不可以回退页面</li></ol> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/router"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ClientsProjectPage<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">loadProject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      <span class="token comment">/*
      同上, 这里也可以使用字符串
      例如:
      "/clients/max/projectA"
      * */</span>
      <span class="token punctuation">{<!-- --></span>
        pathname<span class="token operator">:</span> <span class="token string">"/clients/[id]/[clientProjectId]"</span><span class="token punctuation">,</span>
        query<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> id<span class="token operator">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span> clientProjectId<span class="token operator">:</span> <span class="token string">"projectA"</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>The projects <span class="token keyword">of</span> a Given Client<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span> loadProject <span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Load Project <span class="token constant">A</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ClientsProjectPage<span class="token punctuation">;</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bc18cc58825dcaff4095a2dd6979ce68/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">日常学习记录——封校期的学习日常</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2a1a8e2e26291277da5db7941d19bc40/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">大数据OLAP引擎</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ajax通讯异常12002,长时间运行jQuery Ajax调用 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ajax通讯异常12002,长时间运行jQuery Ajax调用" />
<meta property="og:description" content="我有jQuery AJAX调用请求从WEB API服务进行汇总计数。 WEB API处理请求并调用传递请求参数的存储过程(sql server)。存储过程需要更长的时间(超过10分钟来处理请求，如果存储过程需要超过10分钟，jQuery AJAX调用报告状态码为12002或12152的未知错误(这些错误与连接问题有关)，但Web Server在10分钟后收到存储过程的结果，IE8.0，IE9.0，firefox出现问题，但即使等待10分钟以上，Chrome仍然收到响应。是否有解决方案服务器和客户端之间的通信是活跃的我已经尝试将连接请求头从ajax更改为“关闭”，“打开”，“保持活动”，没有任何效果。请帮我解决。长时间运行jQuery Ajax调用
Java脚本代码。
$.ajax({
type: &#34;post&#34;,
url: URLPrefix &#43; &#39;api/querydispatcher/summary&#39;,
data: s,
success: function (data) {
window.clearInterval(int);
$(&#39;#wait&#39;).hide();
$(&#39;#CancelSummary&#39;).hide();
$(&#39;#backgroundmodal&#39;).hide();
$(&#34;#tResultTotals&#34;).slideDown(&#39;slow&#39;);
DeserializeJSon(eval(data));
if (!CancelSummaryRequest) {
CancelSummaryRequest = true;
$(&#39;#DownloadDetailedReport&#39;).show();
}
else {
$(&#39;#tResultTotals&#39;).hide();
}
},
$(&#39;#wait&#39;).hide();
$(&#39;#CancelSummary&#39;).hide();
$(&#39;#backgroundmodal&#39;).hide();
error_Dialog(request.responseText);
}
});
}
Server Side (WEB API) code.
[WebInvoke(UriTemplate = &#34;summary&#34;, Method = &#34;POST&#34;)]
public List GetSummaryReport_Queue(JsonValue SummaryXML)
{
MyContext db = new MyContext();" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/12e4692ed081b82d0c3980e8aeb8f9ea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-06T01:03:53+08:00" />
<meta property="article:modified_time" content="2021-08-06T01:03:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ajax通讯异常12002,长时间运行jQuery Ajax调用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>我有jQuery AJAX调用请求从WEB API服务进行汇总计数。 WEB API处理请求并调用传递请求参数的存储过程(sql server)。存储过程需要更长的时间(超过10分钟来处理请求，如果存储过程需要超过10分钟，jQuery AJAX调用报告状态码为12002或12152的未知错误(这些错误与连接问题有关)，但Web Server在10分钟后收到存储过程的结果，IE8.0，IE9.0，firefox出现问题，但即使等待10分钟以上，Chrome仍然收到响应。是否有解决方案服务器和客户端之间的通信是活跃的我已经尝试将连接请求头从ajax更改为“关闭”，“打开”，“保持活动”，没有任何效果。请帮我解决。长时间运行jQuery Ajax调用</p> 
 <p>Java脚本代码。</p> 
 <p>$.ajax({<!-- --></p> 
 <p>type: "post",</p> 
 <p>url: URLPrefix + 'api/querydispatcher/summary',</p> 
 <p>data: s,</p> 
 <p>success: function (data) {<!-- --></p> 
 <p>window.clearInterval(int);</p> 
 <p>$('#wait').hide();</p> 
 <p>$('#CancelSummary').hide();</p> 
 <p>$('#backgroundmodal').hide();</p> 
 <p>$("#tResultTotals").slideDown('slow');</p> 
 <p>DeserializeJSon(eval(data));</p> 
 <p>if (!CancelSummaryRequest) {<!-- --></p> 
 <p>CancelSummaryRequest = true;</p> 
 <p>$('#DownloadDetailedReport').show();</p> 
 <p>}</p> 
 <p>else {<!-- --></p> 
 <p>$('#tResultTotals').hide();</p> 
 <p>}</p> 
 <p>},</p> 
 <p>$('#wait').hide();</p> 
 <p>$('#CancelSummary').hide();</p> 
 <p>$('#backgroundmodal').hide();</p> 
 <p>error_Dialog(request.responseText);</p> 
 <p>}</p> 
 <p>});</p> 
 <p>}</p> 
 <p>Server Side (WEB API) code.</p> 
 <p>[WebInvoke(UriTemplate = "summary", Method = "POST")]</p> 
 <p>public List GetSummaryReport_Queue(JsonValue SummaryXML)</p> 
 <p>{<!-- --></p> 
 <p>MyContext db = new MyContext();</p> 
 <p>DateTime StartTime = DateTime.Now;</p> 
 <p>string sumXML = SummaryXML["XMLJson"].ToString().Replace(@"\", "").Replace(@"""", "");</p> 
 <p>//These are two codes created by JSon @ the end of the String that need to be trim off.</p> 
 <p>sumXML = sumXML.Replace("u000du000a", "");</p> 
 <p>List results = null;</p> 
 <p>XElement xxml = XElement.Parse(sumXML);</p> 
 <p>string ReportID = xxml.Descendants("ReportId").FirstOrDefault().Value;</p> 
 <p>string err = "";</p> 
 <p>try</p> 
 <p>{<!-- --></p> 
 <p>results = db.fnReportResult(sumXML).ToList();</p> 
 <p>}</p> 
 <p>catch (Exception e)</p> 
 <p>{<!-- --></p> 
 <p>err = e.Message + " : "+(e.InnerException!=null?e.InnerException.Message : "");</p> 
 <p>throw e;</p> 
 <p>}</p> 
 <p>finally {<!-- --></p> 
 <p>///--- Record Audit Info.</p> 
 <p>double RunningTime = DateTime.Now.Subtract(StartTime).TotalMilliseconds;</p> 
 <p>string parameters = "ApplicationType:Query_Dispatcher" + "||User:" + SummaryXML["UserId"].ToString().Replace(@"\", "").Replace(@"""", "") +</p> 
 <p>"||Session:" + SummaryXML["Session"].ToString().Replace(@"\", "").Replace(@"""", "") +</p> 
 <p>"||Running Time:" + RunningTime.ToString() + "||Request Type:Summary Report" +</p> 
 <p>"||Report ID:" + ReportID +</p> 
 <p>"||Error:" + err;</p> 
 <p>Audit SaveAudit = new Audit();</p> 
 <p>SaveAudit.WriteAudit("Query_Builder", parameters);</p> 
 <p>//####-Recording Audit Info</p> 
 <p>}</p> 
 <p>return results;</p> 
 <p>}</p> 
 <p>+2</p> 
 <p>我不会让连接等待10分钟 - 我会向'/ whatever'发出'POST' req，它会立即用'202 Accepted'和正在创建的资源的URL来响应。 '/不管/ hashOfSomething'。然后在10分钟后访问该URL - 如果资源已准备就绪，则可以使用它，否则在重试之后N分钟。 –</p> 
 <p>2013-02-08 15:17:11</p> 
 <p>+0</p> 
 <p>我该如何重新访问客户端的URL(/ whatever /)以检查记录是否已被处理？ –</p> 
 <p>2013-02-08 15:51:48</p> 
 <p>+0</p> 
 <p>有一个“超时”选项的Ajax调用 - 你有没有试过将其设置为高于600000毫秒？ –</p> 
 <p>2013-02-08 15:58:51</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/65d3c19e4d641334d279cbed298d8e77/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">shiro拦截ajax请求返回json,Spring Boot&#43;Shiro拦截登陆返回Json结果（前后端分离）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f56bec338a4ef11ca3c9cb23578070f2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">服务器vga接显示器无信号,显示器用HDMI转VGA接口后,无信号怎么解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python：给你们安排一波VIP音乐，看我是如何不充会员也能下载 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python：给你们安排一波VIP音乐，看我是如何不充会员也能下载" />
<meta property="og:description" content="不会吧，不会吧，都21世纪了，不会还有人不会用Python来免费听歌吧！
来来来，今天我们用Python试试怎样去随便下载自己想要的音乐，付费也拦不住我，Python说的！
这是要用到的模块
1、requests
2、prettytable
这是使用的环境
1、python 3.8
2、pycharm 2021.2
大致流程思路
一、分析网站(思路分析)
1、搜索歌曲功能
通过关键词搜索对应的 歌曲名称 歌手名称 专辑名称
2、下载歌曲功能
明确 免费的音乐怎么下载 我们才会明白 付费的音乐是怎么来的
二、搜索功能代码实现
1、向 目标网站 发送网络请求
2、获取数据
3、提取数据 (歌曲名称 歌手名称 专辑名称)
4、格式化打印数据
三、下载歌曲实现
分析这个链接从哪里来的
我知道你们最想看的就是代码了，所以解释我都写到注释去了，大家直接看代码（留了个小报错，看看聪明的你能不能看出来）
来人，上代码
from urllib.parse import quote import requests # 发送网络请求的模块 import prettytable as pt # 格式化输出表格 as pt # 1. 向 目标网站 发送网络请求 # 请求方式: get post delete... # 加一些伪装 伪装就已经准备好了 # 快捷替换小技巧 # 1. 选中要替换的内容 # 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/20f57857d3bb18deed1c8cfeb2384db7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-19T11:40:19+08:00" />
<meta property="article:modified_time" content="2023-10-19T11:40:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python：给你们安排一波VIP音乐，看我是如何不充会员也能下载</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>不会吧，不会吧，都21世纪了，不会还有人不会用Python来免费听歌吧！<br> <img src="https://images2.imgbox.com/d3/9a/NDq8WlLB_o.png" alt="在这里插入图片描述"><br> 来来来，今天我们用Python试试怎样去随便下载自己想要的音乐，付费也拦不住我，Python说的！</p> 
<p><strong>这是要用到的模块</strong><br> 1、requests<br> 2、prettytable</p> 
<p><strong>这是使用的环境</strong><br> 1、python 3.8<br> 2、pycharm 2021.2</p> 
<p><strong>大致流程思路</strong></p> 
<p>一、分析网站(思路分析)</p> 
<p>1、搜索歌曲功能<br> 通过关键词搜索对应的 歌曲名称 歌手名称 专辑名称</p> 
<p>2、下载歌曲功能<br> 明确 免费的音乐怎么下载 我们才会明白 付费的音乐是怎么来的</p> 
<p>二、搜索功能代码实现</p> 
<p>1、向 目标网站 发送网络请求<br> 2、获取数据<br> 3、提取数据 (歌曲名称 歌手名称 专辑名称)<br> 4、格式化打印数据</p> 
<p>三、下载歌曲实现</p> 
<p>分析这个链接从哪里来的</p> 
<p>我知道你们最想看的就是代码了，所以解释我都写到注释去了，大家直接看代码（留了个小报错，看看聪明的你能不能看出来）</p> 
<p>来人，上代码</p> 
<pre><code>from urllib.parse import quote
import requests  # 发送网络请求的模块
import prettytable as pt # 格式化输出表格 as pt


# 1. 向 目标网站 发送网络请求
# 请求方式: get post delete...
# 加一些伪装 伪装就已经准备好了
# 快捷替换小技巧
# 1. 选中要替换的内容
# 2. Ctrl + r
# 3. 在第一个框框里面输入(.*?): (.*) 第二个框里面输入 '$1': '$2'
# 4. 点击 Replace All替换

searchKey = input('请输入你要下载的歌曲或歌手名:')
searchKey = quote(searchKey)
headers = {
    'Cookie': '_ga=GA1.2.1829952759.1632831324; BusinessId={"std_plat":404,"std_dev":"b24a2c89-d830-47f5-ee62-3eaa2cbcd9e8","std_imei":"b24a2c89-d830-47f5-ee62-3eaa2cbcd9e8"}; _gid=GA1.2.1213855107.1635853703; Hm_lvt_cdb524f42f0ce19b169a8071123a4797=1635230576,1635230784,1635345246,1635853703; Hm_lpvt_cdb524f42f0ce19b169a8071123a4797=1635853703; kw_token=SK7FZCBITOJ',
    'csrf': 'SK7FZCBITOJ',
    'Host': 'www.kuwo.cn',
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36'
}
# 字符串的格式化
url = f'http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?key={searchKey}&amp;pn=1&amp;rn=30'
response = requests.get(url=url, headers=headers)
# &lt;Response [403]&gt;: 爬虫程序 被抓到了
# 200: 发送请求成功了 没被抓到
# 2. 获取数据
# 通过 .text拿到的是字符串
# 通过 .json()拿到的 python语言当中的字典
json_data = response.json()
# 3. 提取数据 (歌曲名称 歌手名称 专辑名称)
#       字典取值
# 列表
data_list = json_data['data']['list']
# 新建了一个表格
tb = pt.PrettyTable()
# 写一行表头
tb.field_names = ['序号', '歌名', '歌手', '专辑']
count = 0   # 定义了一个序号
info_list = []
for data in data_list:
    # 字典 alt + 鼠标左键
    rid = data['rid']# 歌曲id
    name = data['name'] # 歌曲名称
    artist = data['artist'] # 歌手名称
    album = data['album'] # 专辑名称
    tb.add_row([count, name, artist, album])    # 表格数据写入
    info_list.append([rid, name, artist])      # 下载歌曲要用的信息
    count += 1
print(tb)

# 死循环
while True:
    input_index = eval(input("请输入与你要下载歌曲的序号(-1退出):"))
    if input_index == -1:
        break
    download_info = info_list[input_index]
    # 以前 酷我音乐的链接, 把以前的接口里面要传入的参数 给添加到这个接口里面了
    # br=320kmp3控制音乐音质的一个参数 高品质音乐
    url_1 = f'http://www.kuwo.cn/api/v1/www/music/playUrl?mid={download_info[0]}&amp;type=convert_url3&amp;br=320kmp3'
    # 发送网络请求
    response_1 = requests.get(url_1, headers=headers).json()
    # 解析数据
    music_url = response_1['data']['url']
    # 发送请求
    music_data = requests.get(music_url).content
    with open(f'download/{download_info[1]}-{download_info[2]}.mp3', mode='wb') as f:
        f.write(music_data)
    print(f'{download_info[1]}, 下载完成!')
</code></pre> 
<p><a href="" rel="nofollow" title="复制代码"></a></p> 
<p>运行结果<br> <img src="https://images2.imgbox.com/57/57/UH2bji2y_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/23/0c/mkXF3gq6_o.png" alt="在这里插入图片描述"><br> 兄弟们，报错看出来了吗，我放在评论区了。</p> 
<p>人生苦短，我用Python<br> 大家点赞收藏三连后可以私信我免费领取Python最新学习资料、视频教程、电子书等等.</p> 
<h3><a id="Python_125"></a>关于Python的技术储备</h3> 
<p>在这里给大家分享一些免费的课程供大家学习，下面是课程里面的截图，扫描最下方的二维码就能全部领取，如果图片失效点击蓝色字体便可跳转哦~<a href="https://hnxx.oss-cn-shanghai.aliyuncs.com/official/1695628576578.png" rel="nofollow">点这里哦</a></p> 
<h4><a id="1Python_128"></a>1.Python所有方向的学习路线</h4> 
<p><img src="https://images2.imgbox.com/9c/fd/jB2BHVFC_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="2_133"></a>2.学习软件</h4> 
<p>工欲善其事必先利其器。学习Python常用的开发软件都在这里了，给大家节省了很多时间。<br> <img src="https://images2.imgbox.com/b0/db/DQswuVMo_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="3_138"></a>3.学习资料</h4> 
<p><img src="https://images2.imgbox.com/33/f6/XxOZLMju_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="4_142"></a>4.实战资料</h4> 
<p>实践是检验真理的唯一标准。这里的压缩包可以让你再闲暇之余帮你提升你的个人能力。<br> <img src="https://images2.imgbox.com/01/a1/Aq3UyEj4_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="5_147"></a>5.视频课程</h4> 
<p><img src="https://images2.imgbox.com/5a/e4/9YLnh11E_o.jpg" alt="在这里插入图片描述"></p> 
<p>好啦今天的分享就到这里结束了，快乐的时光总是短暂呢，想学习更多课程的小伙伴不要着急，有更多惊喜哦~<img src="https://images2.imgbox.com/77/f0/GvNd8bo7_o.jpg" alt="在这里插入图片描述"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0c570595b999e19c7fd90d2fe3905fd9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">puzzle（0412）日历拼图</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/097e1c46a8e42d4aed811decb230da95/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android13 原生以太网实现设置静态IP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
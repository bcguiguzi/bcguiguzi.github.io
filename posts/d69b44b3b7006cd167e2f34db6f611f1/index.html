<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于PX4系统移植的新的硬件平台一些尝试总结 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于PX4系统移植的新的硬件平台一些尝试总结" />
<meta property="og:description" content="最近尝试将PX4的firmware-v1.11.0移植到某stm32h7的飞控平台上（该飞控硬件，适配ardupilot和betaflight的固件，但不支持PX4，跟厂家沟通过，据说是PX4用户少？所以他们就没支持），在网上找了好久也没找到像样的参考自己，自己也是摸索尝试了好久，在经历了无数次失败后，终于算是初步移植成功。
现在写篇帖子把相关思路总结一下，算是抛砖引玉，也给需要进行相关工作的朋友一个参考。
PX4中官网有关于系统移植的简要说明，可以参考：http://docs.px4.io/master/zh/hardware/porting_guide.html
一、移植的思路
由于我对飞控硬件这块不太了解，所以选择站在巨人的肩膀上。
即：在PX4的firmware官方支持的硬件库中寻找与需要进行固件移植的目标硬件所用的主控芯片相同或相近的硬件，在其配置好的代码中根据自己自己的硬件配置进行修改，适配。
比如我的目标硬件使用的主控芯片是stm32h7, 官方支持的硬件库中同样使用该芯片的硬件有: cuav的nora和x7pro，cubepilot的cubeorange，px4的v6x等。这些板子的配置文件在firmware/boards文件夹中。
需要根据目标硬件的晶振、串口进行修改。
二、要修改的文件
PX4系统的移植主要是针对其实时操作系统nuttx的移植。
1.boards文件夹中文件的修改
1.1 board.h
1.2 defconfig
1.3 default.cmake
2.rcS文件的修改
三、如何判断是否移植成功" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d69b44b3b7006cd167e2f34db6f611f1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-15T10:11:18+08:00" />
<meta property="article:modified_time" content="2021-08-15T10:11:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于PX4系统移植的新的硬件平台一些尝试总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近尝试将PX4的firmware-v1.11.0移植到某stm32h7的飞控平台上（该飞控硬件，适配ardupilot和betaflight的固件，但不支持PX4，跟厂家沟通过，据说是PX4用户少？所以他们就没支持），在网上找了好久也没找到像样的参考自己，自己也是摸索尝试了好久，在经历了无数次失败后，终于算是初步移植成功。</p> 
<p>现在写篇帖子把相关思路总结一下，算是抛砖引玉，也给需要进行相关工作的朋友一个参考。</p> 
<p>PX4中官网有关于系统移植的简要说明，可以参考：<a href="http://docs.px4.io/master/zh/hardware/porting_guide.html" rel="nofollow">http://docs.px4.io/master/zh/hardware/porting_guide.html</a></p> 
<p>一、移植的思路</p> 
<p>由于我对飞控硬件这块不太了解，所以选择站在巨人的肩膀上。</p> 
<p>即：在PX4的firmware官方支持的硬件库中寻找与需要进行固件移植的目标硬件所用的主控芯片相同或相近的硬件，在其配置好的代码中根据自己自己的硬件配置进行修改，适配。</p> 
<p>比如我的目标硬件使用的主控芯片是stm32h7, 官方支持的硬件库中同样使用该芯片的硬件有: cuav的nora和x7pro，cubepilot的cubeorange，px4的v6x等。这些板子的配置文件在firmware/boards文件夹中。</p> 
<p>需要根据目标硬件的晶振、串口进行修改。</p> 
<p>二、要修改的文件</p> 
<p>PX4系统的移植主要是针对其实时操作系统nuttx的移植。</p> 
<p>1.boards文件夹中文件的修改</p> 
<p>1.1 board.h</p> 
<p>1.2 defconfig</p> 
<p>1.3 default.cmake</p> 
<p>2.rcS文件的修改</p> 
<p>三、如何判断是否移植成功</p> 
<p><img alt="" height="584" src="https://images2.imgbox.com/1e/00/sI8oaG1F_o.png" width="882"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ef574ecfbc5847fcef6752e075abfd6c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python-Numpy函数：np.round(),np.around(),np.floor(),np.ceil()</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1025d1b23dbaf5b1fa5b689ef0ecaaa2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OkHttp同步异步请求（get请求、post请求）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
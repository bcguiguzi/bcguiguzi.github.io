<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ROS学习记录2018.7.10 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ROS学习记录2018.7.10" />
<meta property="og:description" content="ROS学习记录2018.7.10 1.ROS基础了解 开源机器人操作系统ROS（robot operation system） 分级：
1.计算图集（一种网络结构） 1.节点：执行运算的进程（做基础处理的单元） 2.消息：有严格数据结构的通讯 3.主题：发布者/订阅者之间的媒介（类似报纸、凤凰新闻这类） 4.服务：一个请求/一个回应的唯一的ROS控制器（类似常说的服务器） 2.文件系统集（ROS代码组织架构） 1.包package：软件各种文件的组织 2.堆stack：包的集合 注：manifest为提供元数据、许可信息、文件间依赖关系、编译参数。 3.社区集（代码库联合系统） 构造函数： 与类同名的函数，在调用类的时候会启动构造函数对类进行操作。
析构函数： 与类同名但名前多了~符号的函数，在释放类的时候会启动析构函数对类进行内部释放操作。
ros::NodeHandle成员介绍： 1.NodeHandle::advertise 回调函数：void connectCallback(const ros::SingleSubscriberPublisher&amp; pub);
例：ros::Publisher pub = handle.advertise&lt;std_msg::String&gt;(“name”, 1, (ros::SubscriberStatusCallback) connectCallback);
2.NodeHandle::subscribe 回调函数：void Foo::Callback(const std_msg::String::ConstPtr&amp; message);
例：ros::Subscriber sub = handle.subscribe (“name”, 1, &amp;Foo::Callback);
3.NodeHandle::serviceClient 例：ros::ServiceClient client = handle.serviceClien&lt;std_msg::String&gt;(“name”);
4.NodeHandle::serviceServer 例：ros::ServiceServer service = handle.advertiseService (“name”,Callback);
2.ROS使用 1.基础操作 $ rospack find ‘nameofstack’：查找安装过的功能包集
$ rosls ‘nameofstack’：显示功能包集下的文件列表
$ roscd ‘nameofstack’：进入功能包文件夹
2.创建ROS功能包： $ roscreate-pkg [name] [depend1] [depend2] [depend3]" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6b93a0ec645985610de49507a1977d02/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-26T22:50:47+08:00" />
<meta property="article:modified_time" content="2023-10-26T22:50:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ROS学习记录2018.7.10</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="ROS2018710_0"></a>ROS学习记录2018.7.10</h2> 
<h3><a id="1ROS_1"></a>1.ROS基础了解</h3> 
<h4><a id="ROSrobot_operation_system_2"></a>开源机器人操作系统ROS（robot operation system）</h4> 
<p>分级：</p> 
<h5><a id="1_4"></a>1.计算图集（一种网络结构）</h5> 
<pre><code>	1.节点：执行运算的进程（做基础处理的单元）
	2.消息：有严格数据结构的通讯
	3.主题：发布者/订阅者之间的媒介（类似报纸、凤凰新闻这类）
	4.服务：一个请求/一个回应的唯一的ROS控制器（类似常说的服务器）
</code></pre> 
<h5><a id="2ROS_9"></a>2.文件系统集（ROS代码组织架构）</h5> 
<pre><code>	1.包package：软件各种文件的组织
	2.堆stack：包的集合
	注：manifest为提供元数据、许可信息、文件间依赖关系、编译参数。
</code></pre> 
<h5><a id="3_13"></a>3.社区集（代码库联合系统）</h5> 
<h4><a id="_15"></a>构造函数：</h4> 
<p>与类同名的函数，在调用类的时候会启动构造函数对类进行操作。</p> 
<h4><a id="_17"></a>析构函数：</h4> 
<p>与类同名但名前多了~符号的函数，在释放类的时候会启动析构函数对类进行内部释放操作。</p> 
<h4><a id="rosNodeHandle_19"></a>ros::NodeHandle成员介绍：</h4> 
<h5><a id="1NodeHandleadvertise_20"></a>1.NodeHandle::advertise</h5> 
<p>回调函数：void connectCallback(const ros::SingleSubscriberPublisher&amp; pub);<br> 例：ros::Publisher pub = handle.advertise&lt;std_msg::String&gt;(“name”, 1, (ros::SubscriberStatusCallback) connectCallback);</p> 
<h5><a id="2NodeHandlesubscribe_23"></a>2.NodeHandle::subscribe</h5> 
<p>回调函数：void Foo::Callback(const std_msg::String::ConstPtr&amp; message);<br> 例：ros::Subscriber sub = handle.subscribe (“name”, 1, &amp;Foo::Callback);</p> 
<h5><a id="3NodeHandleserviceClient_26"></a>3.NodeHandle::serviceClient</h5> 
<p>例：ros::ServiceClient client = handle.serviceClien&lt;std_msg::String&gt;(“name”);</p> 
<h5><a id="4NodeHandleserviceServer_28"></a>4.NodeHandle::serviceServer</h5> 
<p>例：ros::ServiceServer service = handle.advertiseService (“name”,Callback);</p> 
<h3><a id="2ROS_31"></a>2.ROS使用</h3> 
<h5><a id="1_32"></a>1.基础操作</h5> 
<p>$ rospack find ‘nameofstack’：查找安装过的功能包集<br> $ rosls ‘nameofstack’：显示功能包集下的文件列表<br> $ roscd ‘nameofstack’：进入功能包文件夹</p> 
<h5><a id="2ROS_36"></a>2.创建ROS功能包：</h5> 
<p>$ roscreate-pkg [name] [depend1] [depend2] [depend3]</p> 
<h5><a id="3ROS_38"></a>3.继续对ROS的了解学习（理论）：</h5> 
<p>了解ROS操作命令，ROS基本工具，OpenCV，SLAM等，但无法进行实际操作。<br> 继续ROS了解学习（SLAM与导航部分）</p> 
<h5><a id="4_41"></a>4.研究学习</h5> 
<p>经过自己研究学习，通过了ROS环境变量和工作空间的创建，并使用了virgo_test包进行了编译，并通过。</p> 
<h5><a id="5ROS_43"></a>5.开始操作ROS</h5> 
<p>利用系统命令rospack find、roscreat-pkg、rosmake、rosnode等完成相应的动作。<br> 创建了新的功能包，并编译。<br> 使用了turtlesim功能包，打开海龟节点窗口；<br> 打开turtle_teleop_key控制海龟移动；<br> 使用命令你个查看主题、查看消息、字段；<br> 使用rostopic pub命令操作海龟曲线运动（圆圈）。<br> 但使用的是-1参数，即仅运行一次，而去掉该参数时，节点持续运行未退出，但是海龟仍是仅执行了一次运动；利用rostopic echo 查看消息信息，发现消息也仅发出一次；未能做到控制海龟持续运动。<br> 使用rostopic pub命令时，若要使海龟持续运动，需使用-r 10参数。<br> 使用服务（rosservice工具）可新建服务，新建一只海龟。</p> 
<h5><a id="6_53"></a>6.使用参数服务器，查看所有共享数据及相关信息。</h5> 
<p>在之前新建的功能包内，创建新节点，并使用VIM工具编写2个.cpp文件，用于例程练习用。<br> 编译创建并编写的节点，运行节点。</p> 
<h5><a id="7srv_56"></a>7.使用srv文件：</h5> 
<p>编写服务节点，通过srv文件提供3 ints求和运算；<br> 编写客户节点，通过srv文件计算3个ints数的和，并显示。<br> 也可使用如下语句调用srv服务：<br> $ rosservice call add_3_inits 1 2 3</p> 
<h5><a id="8msg_61"></a>8.使用msg文件：</h5> 
<p>编写发布节点，发布msg文件中定义的类型消息；<br> 编写订阅节点，接收msg文件中定义的类型消息，并显示。</p> 
<h5><a id="9_64"></a>9.根据：</h5> 
<p>《ROS培训文档.ppt》 、《ROS学习文档.doc》进行学习。<br> 把代码拷贝到虚拟机内进行catkin_make编译，编译通过。<br> 期间出现过2个重要问题：<br> 权限问题，解决：<br> $ sudo chmod 777 –R *<br> 单包运行问题，解决：<br> $ source ./devel/setup.bash</p> 
<h5><a id="10virgo_framevirgo_motion_72"></a>10.看/virgo_frame/virgo_motion代码</h5> 
<p>但代码比较散乱复杂，并且注释较少。<br> 考虑直接在ros里运行，直接通过终端看节点主题以及消息类型，可更直观的看出该节点的属性。<br> 全体catkin_make通过，但单包运行异常。<br> 后发现是需要<br> $ source ./devel/setup.bash<br> （注：每次启动项目都要source。）</p> 
<p>查看关系图：<br> $ rqt_graph<br> <img src="https://images2.imgbox.com/35/2a/lSGxDTWA_o.png" alt="在这里插入图片描述"></p> 
<p>有两个主题，并且使用如下语句也可以看到：<br> $ rostopic list</p> 
<p>可查看该主题类型：<br> $ rostopic type /motion/odom<br> 可查看消息类型：<br> $ rosmsg show std_msgs/String<br> 可看到打印的消息数据：<br> $ rostopic echo /motion/odom</p> 
<p>之后我想使用话题发布消息，需要自己编写节点，于是找了小乌龟节点试。<br> 启动乌龟界面：<br> $ rosrun turtlesim turtlesim_node<br> 再启动按键控制乌龟的节点：<br> $ rosrun turtlesim turtle_teleop_key</p> 
<p>查看过消息类型后，知道了自己应该发送的消息是什么了。<br> 开始自己创建功能包：<br> $ catkin_creat_pkg turtle_ctrl std_msgs roscpp rospy<br> 编译一下：<br> $ catkin_make –pkg turtle_ctrl<br> 新建.cpp文件并编入代码。<br> 编译：<br> $ catkin_make –pkg turtle_ctrl<br> 但有很多错误。<br> CMakeList.txt和package.xml需要修改，依赖项和源文件，修改过后通过编译。<br> 程序设计的是：前进一次、后退一次、左转一次。<br> <img src="https://images2.imgbox.com/94/0f/g5z5UKtt_o.png" alt="在这里插入图片描述"></p> 
<p>查看关系图：$ rqt_graph</p> 
<h5><a id="11_114"></a>11.</h5> 
<h3><a id="_117"></a>附：点</h3> 
<p>。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f824679f973d27f47a86e9ba19862cf0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">相似歌曲（YOJ2.0中的题）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/30a278fdfd020caf570f50f695f0f34e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">YModem协议总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
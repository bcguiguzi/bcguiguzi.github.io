<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>搭建SFTP服务安全共享文件，实现在外远程访问「内网穿透」 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="搭建SFTP服务安全共享文件，实现在外远程访问「内网穿透」" />
<meta property="og:description" content="文章目录 1.前言2.本地SFTP服务器搭建2.1.SFTP软件的下载和安装2.2.配置SFTP站点2.3.Cpolar下载和安装 3.SFTP服务器的发布3.1.Cpolar云端设置3.2.Cpolar本地设置 4.公网访问测试5.结语 1.前言 现在的网络发达，个人电脑容量快速上升，想要保存的数据资料也越来越多。在平时，我们会将很多数据资料都会存在个人电脑上，甚至发展出专门的数据存储设备（NAS设备）。毕竟手机容量小，存太多东西会卡顿。但为了满足我们随时随地查阅这些数据资料的要求，又需要能随时安全的连入个人电脑和存储设备，这时SFTP服务就能大显身手。今天，笔者就为大家详细介绍，如何使用Cpolar内网穿透的FTP协议，搭建自己的SFTP服务器，能够随时随地安全的调取查阅本地电脑上的数据资料吧。
2.本地SFTP服务器搭建 本质上来说，SFTP是一项传输协议，而为了执行这项传输协议，就需要相应的SFTP软件来执行，当硬件设备加上SFTP软件，就组成了执行SFTP协议的服务器。但通常这种服务器只能在局域网内提供服务，想要让这个服务器能被公共互联网上的设备访问到（可以是移动网的手机，也可能是安放在其他地方的电脑），就需要使用cpolar的内网穿透服务。
2.1.SFTP软件的下载和安装 要搭建SFTP服务器，相关软件必不可少，这里我们采用FreeSSHd这款软件执行FTP协议，为了保证软件的干净，我们还是在其官网下载。官网下载地址为http://www.freesshd.com/?ctt=download，而下载的软件，则是FreeFTPd。
FreeFTPd软件下载完成后，直接双击就可以进行安装。安装过程也没啥可说的，一路next即可。
FreeFTPd安装完成后，可以在开始菜单中找到FreeFTPd软件的快捷方式，需要注意的是，我们需要右键点击软件，在出现的菜单中选择以管理员身份运行该软件，才能让所做的配置生效，一般用户身份运行就没法保存所做的配置。
打开FreeFTPd软件主界面后，点击左侧的SFTP选项，进入SFTP设置页面，在这个页面右下部，点击Start启动SFTP服务。
SFTP服务启动后，我们可以看到Server status栏位显示为Running，并在Prot：22端口输出。
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-RdaQG8rq-1679361192516)(null#pic_center)]
启动SFTP服务后，我们先不着急保存退出，而是先建立一个用户。同样点击软件主界面左侧的Users，进入用户添加界面，点击Add按钮，添加一个用户。
添加用户时，自然需要进行一些关于用户的设定，比如用户名、用户密码、发布的磁盘（文件夹）、传输方式之类。这里我们将用户名定为test，共享的磁盘为E盘，传输协议为SFTP。完成这些设置后，就可以点击下方的“Apply”保存设置。
需要注意的是，我们需要将打算用SFTP发布的存储空间（硬盘或文件夹）审定好权限，防止访问这个存储空间时因权限限制而被拒绝。具体方法就是右键点击这个存储空间，选择右键菜单最下方的属性进入设置页面，点击安全选项卡，将Users的完全控制、修改、读取和执行、列出文件夹内容、读取、写入几个权限都勾选并保存。
2.2.配置SFTP站点 完成了FreeSSHd软件的设置，我们还要建立一个SFTP站点，让远程访问的请求有地方可去。这里我们选用FileZilla这款软件。同样的，这款软件也可以在其官网找到下载（https://www.filezilla.cn/）。
在选择对应操作系统的FileZilla客户端下载后，解压后找到filezilla.exe双击进行安装。
FileZilla客户端安装完成后，进入FileZilla客户端主界面，点击左上角的文件按钮，并在弹出的菜单中选择第一项站点管理器。
在站点管理器页面，我们点击新站点，并对这个新站点进行设置，设置内容主要为
协议（在下拉菜单中选择SFTP）
主机（FileZilla服务器和FreeFTPd在同一台电脑上，因此输入本机地址127.0.0.1）
用户名即密码（即FreeFTPd上我们设置的用户名和密码）
完成这几项设置后，就可以点击下方的连接进行连接测试。
出于安全和权限考虑，软件会进行几项权限询问，我们选择同意即可。
接着就能看到，本地用于SFTP传输的磁盘（文件夹）已经成功连接，这也算是对FreeFTPd的运行进行了测试，说明在局域网内已经可以正常用FreeFTPd执行SFTP协议连接。
2.3.Cpolar下载和安装 cpolar官网：https://www.cpolar.com/
接下来，我们就要安装SFTP服务器公共互联网发布的最后一个重要组件，也就是安装cpolar软件。Cpolar的安装十分简单，我们同样访问cpolar的官网，在官网找到下载按钮，找到适用操作系统的版本进行下载。
Cpolar下载完成后，将下载的压缩包解压，并双击解压后的.msi文件进入安装程序，接下来一路Next即可。
需要说明的是，cpolar主要通过使用者的用户名来建立该用户专属的数据隧道，因此我们需要在官网上注册，以便之后创建对应的数据隧道。
3.SFTP服务器的发布 在各项准备工作都完成后（安装FreeFTPd服务器，设置FileZilla站点，并本地连接FreeFTPd进行测试，安装并注册Cpolar），就可以正式进入FreeFTPd的公共互联网发布工作。
由于SFTP协议应用于文件传输，会对带宽有一定要求，同时对连接稳定性也有要求（即能够随时随地访问到），因此建议将cpolar升级到专业版及以上，以便能创建具备一定带宽和长期稳定存续的数据隧道（免费版cpolar每隔24小时会重置内网穿透数据隧道地址）。
3.1.Cpolar云端设置 想要建立稳定的内网穿透数据隧道，我们需要先登录cpolar的官网，点击官网主界面左侧的预留按钮，进入数据隧道预留设置页面。
在“预留”页面，我们找到保留的TCP隧道，并在此栏位对SFTP数据隧道进行几项简单设置。
在保留的TCP隧道栏位，我们需要设置的项目只有两项，分别是地区（即服务器所在位置，就近选择即可）和描述（即这条TCP隧道的备注，只要能方便自己区分就行）。
完成这两项设置后，就可以点击栏位右侧的“保留”按钮，将这条空白数据隧道保留下来，并生成一个公共互联网地址，稍后我们在进行cpolar客户端设置时，会用到这个地址，因此可以先将其复制下来。
当我们不打算使用这条数据隧道时，也可以点击右侧的x将这条数据隧道删除。
3.2.Cpolar本地设置 回到安装了FreeFTPd服务器的电脑（当然我们也在这台电脑上安装了cpolar客户端），打开cpolar的客户端（可以在开始菜单中点击cpolar的快捷方式，也可以在浏览器中输入localhost:9200），用自己的账号密码登录后，点击cpolar主界面左侧隧道管理项下的创建隧道按钮，进入本地内网穿透数据隧道的设置页面。
当然，为了创建这条数据隧道，我们也需要对这条内网穿透数据隧道的特性进行设置，具体为：
隧道名称：可直接看做数据隧道的备注，为方便区分，我们仍将这条数据隧道的名称设为SFTP连接；协议：即数据隧道的传输协议，如网页、数据传输、设备互联等，这里选择TCP协议；本地地址：这里需要填入软件（或内网设备）的端口号，由于FreeFTPd的默认输出端口号为22，因此此处填入22；端口类型：即这条数据隧道的类型，是否为长期存续的隧道。 由于我们在cpolar云端设置了保留隧道，因此可以选择固定TCP端口（固定TCP端口要将cpolar升级至专业版及以上）；若只是临时使用，则选择随机临时TCP端口； 预留的TCP地址：在选择了“固定TCP端口”后就会出现该栏位，这里我们将cpolar云端生成的地址粘贴进来； 完成这几项设置后，就可以点击页面下方的创建按钮，生成一条完整的SFTP数据隧道
完成本地数据隧道的设置后cpolar客户端会自动转入隧道管理项下的隧道列表页面。在这个页面，我们能对这条数据隧道进行管理，如启动、暂停、删除这条数据隧道；也能看到这条数据隧道的运行情况（是否处于运行状态）；还能通过“编辑”按钮对这条数据隧道的各项信息进行修改。
而这条数据隧道的入口（即公共互联网地址），则可以在装填项下的在线隧道列表页面找到。
在完成cpolar云端及客户端的数据隧道设置后，我们就能回到FileZilla软件，使用cpolar创建的数据隧道进行访问测试。
由于此时我们已经完成了对本地FreeFTPd的穿透和发布，因此已经可以在其他电脑的FileZilla软件上，设置新的SFTP传输站点，进行FreeFTPd远程访问。
4.公网访问测试 与前面的FileZilla的设置一样，我们先打开FileZilla客户端，并新建一个站点。为方便区分，笔者将这个站点命名为“Cpolar访问测试”，并将cpolar生成的公共互联网地址填入主机栏位；而端口栏位，则应该填入cpolar生成地址最后的几位数字；剩下的用户名和密码，则应填入FreeFTPd设定的用户名和密码。
设置完成后，点击页面下方的连接按钮，就可以连入局域网内的FreeFTPd服务器，对电脑上分享的文件资料进行操作。
5.结语 到这里，我们就成功完成了本地电脑的SFTP服务器设置，并让本地电脑上的资料文件，以SFTP协议进行传输，实现了随时随地调取、操作和访问本地电脑上文件资料的目的。当然，使用FileZilla进行远程访问只是为了方便演示，只要FreeFTPd服务器和cpolar数据隧道设置正确，我们也可以使用其他SFTP客户端软件访问本地电脑。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/748bae45bbd57e804225fbdf507b1609/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-21T09:16:24+08:00" />
<meta property="article:modified_time" content="2023-03-21T09:16:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">搭建SFTP服务安全共享文件，实现在外远程访问「内网穿透」</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#1_6" rel="nofollow">1.前言</a></li><li><a href="#2SFTP_10" rel="nofollow">2.本地SFTP服务器搭建</a></li><li><ul><li><a href="#21SFTP_14" rel="nofollow">2.1.SFTP软件的下载和安装</a></li><li><a href="#22SFTP_50" rel="nofollow">2.2.配置SFTP站点</a></li><li><a href="#23Cpolar_85" rel="nofollow">2.3.Cpolar下载和安装</a></li></ul> 
    </li><li><a href="#3SFTP_107" rel="nofollow">3.SFTP服务器的发布</a></li><li><ul><li><a href="#31Cpolar_113" rel="nofollow">3.1.Cpolar云端设置</a></li><li><a href="#32Cpolar_133" rel="nofollow">3.2.Cpolar本地设置</a></li></ul> 
    </li><li><a href="#4_163" rel="nofollow">4.公网访问测试</a></li><li><a href="#5_173" rel="nofollow">5.结语</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h4><a id="1_6"></a>1.前言</h4> 
<p>现在的网络发达，个人电脑容量快速上升，想要保存的数据资料也越来越多。在平时，我们会将很多数据资料都会存在个人电脑上，甚至发展出专门的数据存储设备（NAS设备）。毕竟手机容量小，存太多东西会卡顿。但为了满足我们随时随地查阅这些数据资料的要求，又需要能随时安全的连入个人电脑和存储设备，这时SFTP服务就能大显身手。今天，笔者就为大家详细介绍，如何使用Cpolar内网穿透的FTP协议，搭建自己的SFTP服务器，能够随时随地安全的调取查阅本地电脑上的数据资料吧。</p> 
<h4><a id="2SFTP_10"></a>2.本地SFTP服务器搭建</h4> 
<p>本质上来说，SFTP是一项传输协议，而为了执行这项传输协议，就需要相应的SFTP软件来执行，当硬件设备加上SFTP软件，就组成了执行SFTP协议的服务器。但通常这种服务器只能在局域网内提供服务，想要让这个服务器能被公共互联网上的设备访问到（可以是移动网的手机，也可能是安放在其他地方的电脑），就需要使用cpolar的内网穿透服务。</p> 
<h5><a id="21SFTP_14"></a>2.1.SFTP软件的下载和安装</h5> 
<p>要搭建SFTP服务器，相关软件必不可少，这里我们采用FreeSSHd这款软件执行FTP协议，为了保证软件的干净，我们还是在其官网下载。官网下载地址为<a href="http://www.freesshd.com/?ctt=download" rel="nofollow">http://www.freesshd.com/?ctt=download</a>，而下载的软件，则是FreeFTPd。</p> 
<p><img src="https://images2.imgbox.com/c3/54/o4SykuSu_o.png" alt="20230317093901"></p> 
<p>FreeFTPd软件下载完成后，直接双击就可以进行安装。安装过程也没啥可说的，一路<code>next</code>即可。</p> 
<p><img src="https://images2.imgbox.com/79/84/zz6MJJ7O_o.png" alt="20230317093902"></p> 
<p>FreeFTPd安装完成后，可以在开始菜单中找到FreeFTPd软件的快捷方式，需要注意的是，我们需要右键点击软件，在出现的菜单中选择以管理员身份运行该软件，才能让所做的配置生效，一般用户身份运行就没法保存所做的配置。</p> 
<p><img src="https://images2.imgbox.com/7a/2f/LmQFw1U5_o.png" alt="20230317093903"></p> 
<p>打开FreeFTPd软件主界面后，点击左侧的<code>SFTP</code>选项，进入SFTP设置页面，在这个页面右下部，点击<code>Start</code>启动SFTP服务。</p> 
<p><img src="https://images2.imgbox.com/10/0e/aSPEXwYC_o.png" alt="20230317093904"></p> 
<p>SFTP服务启动后，我们可以看到<code>Server status</code>栏位显示为<code>Running</code>，并在<code>Prot：22</code>端口输出。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-RdaQG8rq-1679361192516)(null#pic_center)]</p> 
<p>启动SFTP服务后，我们先不着急保存退出，而是先建立一个用户。同样点击软件主界面左侧的<code>Users</code>，进入用户添加界面，点击<code>Add</code>按钮，添加一个用户。</p> 
<p><img src="https://images2.imgbox.com/71/59/VFmnwtu4_o.png" alt="20230317093906"></p> 
<p>添加用户时，自然需要进行一些关于用户的设定，比如用户名、用户密码、发布的磁盘（文件夹）、传输方式之类。这里我们将用户名定为test，共享的磁盘为E盘，传输协议为SFTP。完成这些设置后，就可以点击下方的“Apply”保存设置。</p> 
<p><img src="https://images2.imgbox.com/c2/2d/GQv8U4py_o.png" alt="20230317093907"></p> 
<p><img src="https://images2.imgbox.com/e7/3c/TDKV2Nkw_o.png" alt="20230317093908"></p> 
<p>需要注意的是，我们需要将打算用SFTP发布的存储空间（硬盘或文件夹）审定好权限，防止访问这个存储空间时因权限限制而被拒绝。具体方法就是右键点击这个存储空间，选择右键菜单最下方的<code>属性</code>进入设置页面，点击<code>安全</code>选项卡，将Users的<code>完全控制</code>、<code>修改</code>、<code>读取和执行</code>、<code>列出文件夹内容</code>、<code>读取</code>、<code>写入</code>几个权限都勾选并保存。</p> 
<p><img src="https://images2.imgbox.com/20/e7/HpMFoZ8C_o.png" alt="20230317093909"></p> 
<h5><a id="22SFTP_50"></a>2.2.配置SFTP站点</h5> 
<p>完成了FreeSSHd软件的设置，我们还要建立一个SFTP站点，让远程访问的请求有地方可去。这里我们选用FileZilla这款软件。同样的，这款软件也可以在其官网找到下载（<a href="https://www.filezilla.cn/" rel="nofollow">https://www.filezilla.cn/</a>）。</p> 
<p><img src="https://images2.imgbox.com/cb/9d/ibTzl6xx_o.png" alt="20230317093910"></p> 
<p>在选择对应操作系统的FileZilla客户端下载后，解压后找到<code>filezilla.exe</code>双击进行安装。</p> 
<p><img src="https://images2.imgbox.com/22/06/iqmEPCKo_o.png" alt="20230317093911"></p> 
<p>FileZilla客户端安装完成后，进入FileZilla客户端主界面，点击左上角的<code>文件</code>按钮，并在弹出的菜单中选择第一项<code>站点管理器</code>。</p> 
<p><img src="https://images2.imgbox.com/cc/b5/q9BjLKP6_o.png" alt="20230317093912"></p> 
<p>在<code>站点管理器</code>页面，我们点击<code>新站点</code>，并对这个新站点进行设置，设置内容主要为</p> 
<ul><li> <p><code>协议</code>（在下拉菜单中选择SFTP）</p> </li><li> <p><code>主机</code>（FileZilla服务器和FreeFTPd在同一台电脑上，因此输入本机地址127.0.0.1）</p> </li><li> <p><code>用户名即密码</code>（即FreeFTPd上我们设置的用户名和密码）</p> </li><li> <p>完成这几项设置后，就可以点击下方的<code>连接</code>进行连接测试。</p> </li></ul> 
<p><img src="https://images2.imgbox.com/35/a1/aGniGler_o.png" alt="20230317093913"></p> 
<p>出于安全和权限考虑，软件会进行几项权限询问，我们选择同意即可。</p> 
<p><img src="https://images2.imgbox.com/86/2e/GZSeyfde_o.png" alt="20230317093914"></p> 
<p><img src="https://images2.imgbox.com/19/3e/B3bLB2RD_o.png" alt="20230317093915"></p> 
<p>接着就能看到，本地用于SFTP传输的磁盘（文件夹）已经成功连接，这也算是对FreeFTPd的运行进行了测试，说明在局域网内已经可以正常用FreeFTPd执行SFTP协议连接。</p> 
<p><img src="https://images2.imgbox.com/45/9f/gHq0gJPk_o.png" alt="20230317093916"></p> 
<h5><a id="23Cpolar_85"></a>2.3.Cpolar下载和安装</h5> 
<blockquote> 
 <p>cpolar官网：<a href="https://www.cpolar.com/" rel="nofollow">https://www.cpolar.com/</a></p> 
</blockquote> 
<p>接下来，我们就要安装SFTP服务器公共互联网发布的最后一个重要组件，也就是安装cpolar软件。Cpolar的安装十分简单，我们同样访问cpolar的官网，在官网找到<code>下载</code>按钮，找到适用操作系统的版本进行下载。</p> 
<p><img src="https://images2.imgbox.com/11/62/CSQU9XUu_o.png" alt="20230317093917"></p> 
<p><img src="https://images2.imgbox.com/cb/3a/KA9pKlRL_o.png" alt="20230317093918"></p> 
<p>Cpolar下载完成后，将下载的压缩包解压，并双击解压后的<code>.msi</code>文件进入安装程序，接下来一路<code>Next</code>即可。</p> 
<p><img src="https://images2.imgbox.com/47/7b/CSbvKLxb_o.png" alt="20230317093919"></p> 
<p><img src="https://images2.imgbox.com/a8/ce/GaUNemO8_o.png" alt="20230317093920"></p> 
<p>需要说明的是，cpolar主要通过使用者的用户名来建立该用户专属的数据隧道，因此我们需要在官网上注册，以便之后创建对应的数据隧道。</p> 
<p><img src="https://images2.imgbox.com/db/c5/e3bN6T37_o.png" alt="20230317093921"></p> 
<p><img src="https://images2.imgbox.com/94/44/X9Soql7y_o.png" alt="20230317093922"></p> 
<h4><a id="3SFTP_107"></a>3.SFTP服务器的发布</h4> 
<p>在各项准备工作都完成后（安装FreeFTPd服务器，设置FileZilla站点，并本地连接FreeFTPd进行测试，安装并注册Cpolar），就可以正式进入FreeFTPd的公共互联网发布工作。</p> 
<p>由于SFTP协议应用于文件传输，会对带宽有一定要求，同时对连接稳定性也有要求（即能够随时随地访问到），因此建议将cpolar升级到专业版及以上，以便能创建具备一定带宽和长期稳定存续的数据隧道（免费版cpolar每隔24小时会重置内网穿透数据隧道地址）。</p> 
<h5><a id="31Cpolar_113"></a>3.1.Cpolar云端设置</h5> 
<p>想要建立稳定的内网穿透数据隧道，我们需要先登录cpolar的官网，点击官网主界面左侧的<code>预留</code>按钮，进入数据隧道预留设置页面。</p> 
<p><img src="https://images2.imgbox.com/39/df/a4yQ1UZ6_o.png" alt="20230317093923"></p> 
<p>在“预留”页面，我们找到<code>保留的TCP隧道</code>，并在此栏位对SFTP数据隧道进行几项简单设置。</p> 
<p><img src="https://images2.imgbox.com/51/54/PllDrC8X_o.png" alt="20230317093924"></p> 
<p>在<code>保留的TCP隧道</code>栏位，我们需要设置的项目只有两项，分别是<code>地区</code>（即服务器所在位置，就近选择即可）和<code>描述</code>（即这条TCP隧道的备注，只要能方便自己区分就行）。</p> 
<p><img src="https://images2.imgbox.com/c5/5e/g5rjb3OC_o.png" alt="20230317093925"></p> 
<p>完成这两项设置后，就可以点击栏位右侧的“保留”按钮，将这条空白数据隧道保留下来，并生成一个<code>公共互联网地址</code>，稍后我们在进行cpolar客户端设置时，会用到这个地址，因此可以先将其复制下来。</p> 
<p>当我们不打算使用这条数据隧道时，也可以点击右侧的<code>x</code>将这条数据隧道删除。</p> 
<p><img src="https://images2.imgbox.com/20/f1/IrOFpiQN_o.png" alt="20230317093926"></p> 
<h5><a id="32Cpolar_133"></a>3.2.Cpolar本地设置</h5> 
<p>回到安装了FreeFTPd服务器的电脑（当然我们也在这台电脑上安装了cpolar客户端），打开cpolar的客户端（可以在开始菜单中点击cpolar的快捷方式，也可以在浏览器中输入localhost:9200），用自己的账号密码登录后，点击cpolar主界面左侧<code>隧道管理</code>项下的<code>创建隧道</code>按钮，进入本地内网穿透数据隧道的设置页面。</p> 
<p>当然，为了创建这条数据隧道，我们也需要对这条内网穿透数据隧道的特性进行设置，具体为：</p> 
<ol><li><font color="red">隧道名称</font>：可直接看做数据隧道的备注，为方便区分，我们仍将这条数据隧道的名称设为SFTP连接；</li><li><font color="red">协议</font>：即数据隧道的传输协议，如网页、数据传输、设备互联等，这里选择TCP协议；</li><li><font color="red">本地地址</font>：这里需要填入软件（或内网设备）的端口号，由于FreeFTPd的默认输出端口号为22，因此此处填入22；</li><li><font color="red">端口类型</font>：即这条数据隧道的类型，是否为长期存续的隧道。 
  <ul><li>由于我们在cpolar云端设置了保留隧道，因此可以选择<code>固定TCP端口</code>（固定TCP端口要将cpolar升级至专业版及以上）；</li><li>若只是临时使用，则选择<code>随机临时TCP端口</code>；</li></ul> </li><li><font color="red">预留的TCP地址</font>：在选择了“固定TCP端口”后就会出现该栏位，这里我们将cpolar云端生成的地址粘贴进来；</li></ol> 
<p>完成这几项设置后，就可以点击页面下方的<code>创建</code>按钮，生成一条完整的SFTP数据隧道</p> 
<p><img src="https://images2.imgbox.com/43/81/ZivukVbA_o.png" alt="20230317093927"></p> 
<p>完成本地数据隧道的设置后cpolar客户端会自动转入<code>隧道管理</code>项下的<code>隧道列表</code>页面。在这个页面，我们能对这条数据隧道进行管理，如启动、暂停、删除这条数据隧道；也能看到这条数据隧道的运行情况（是否处于运行状态）；还能通过“编辑”按钮对这条数据隧道的各项信息进行修改。</p> 
<p>而这条数据隧道的入口（即公共互联网地址），则可以在装填项下的<code>在线隧道列表</code>页面找到。</p> 
<p><img src="https://images2.imgbox.com/10/c7/4WnYUKN1_o.png" alt="20230317093928"></p> 
<p>在完成cpolar云端及客户端的数据隧道设置后，我们就能回到FileZilla软件，使用cpolar创建的数据隧道进行访问测试。</p> 
<p>由于此时我们已经完成了对本地FreeFTPd的穿透和发布，因此已经可以在其他电脑的FileZilla软件上，设置新的SFTP传输站点，进行FreeFTPd远程访问。</p> 
<h4><a id="4_163"></a>4.公网访问测试</h4> 
<p>与前面的FileZilla的设置一样，我们先打开FileZilla客户端，并新建一个站点。为方便区分，笔者将这个站点命名为“Cpolar访问测试”，并将cpolar生成的公共互联网地址填入<code>主机</code>栏位；而<code>端口</code>栏位，则应该填入cpolar生成地址最后的几位数字；剩下的用户名和密码，则应填入FreeFTPd设定的用户名和密码。</p> 
<p><img src="https://images2.imgbox.com/0b/02/Nhi9xnWg_o.png" alt="20230317093929"></p> 
<p>设置完成后，点击页面下方的<code>连接</code>按钮，就可以连入局域网内的FreeFTPd服务器，对电脑上分享的文件资料进行操作。</p> 
<p><img src="https://images2.imgbox.com/6f/d8/bUqju1du_o.png" alt="20230317093930"></p> 
<h4><a id="5_173"></a>5.结语</h4> 
<p>到这里，我们就成功完成了本地电脑的SFTP服务器设置，并让本地电脑上的资料文件，以SFTP协议进行传输，实现了随时随地调取、操作和访问本地电脑上文件资料的目的。当然，使用FileZilla进行远程访问只是为了方便演示，只要FreeFTPd服务器和cpolar数据隧道设置正确，我们也可以使用其他SFTP客户端软件访问本地电脑。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a5629e2ba981f08d653e8e91ed840304/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">端口扫描（X-scan）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af9739f117431e6fc19cc26cc00a2b72/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux GDB 调试详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shell循环语句及函数和数组使用（for、while、until循环语句的解释及范例） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shell循环语句及函数和数组使用（for、while、until循环语句的解释及范例）" />
<meta property="og:description" content="文章目录 一：循环语句1.1：for循环语句1.1.1：for语句结构1.1.2：使用for批量添加用户1.1.3：示例–根据IP地址检查主机状态1.1.4：用循环语句输出1-10的数字的四种办法1.1.5：shell中let命令 1.2：while循环语句1.2.1：while语句结构1.2.2：while语句应用示例1.2.3：while死循环1.2.4：使用while批量添加用户1.2.5：猜商品价格游戏 1.3：continue和break1.3.1：continue1.3.2：break1.3.3：break和continue的区别 1.5：untli循环语句1.5.1：until语句的结构1.5.2：until语句应用11.5.3：until语句应用2 二：shell函数2.1：shell函数概述2.2：shell函数定义2.3：调用函数的方法2.4：shell函数应用12.5：shell函数应用2 三：shell数组3.1：数组应用场景3.2：数组定义方法（推荐方法一）3.3：数组包括的数据类型与数组操作3.3.1：数组包括的数据类型 3.4：求数组最大值 一：循环语句 1.1：for循环语句 1.1.1：for语句结构 ● 读取不同的变量值，用来逐个执行同一组命令
语句结构 for 变量名 in 取值列表 do 命令序列 done 语句结构举例 for 收件人 in 邮件地址列表 do 发送邮件 done 1.1.2：使用for批量添加用户 用户名存放在users.txt文件中，每行一个
初始密码均设为123456
[root@localhost opt]# vim user.txt zhangsan lisi wangermazi zhaoliu tianji wangba [root@localhost opt]# vim useradd.sh #!/bin/bash Lists=$(cat /opt/user.txt) for bb in $Lists do useradd $bb echo &#34;123456&#34; | passwd --stdin $bb echo &#34;$bb添加成功&#34; done [root@localhost opt]# chmod &#43;x useradd." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d5e59861c6caadb0b3642cf9515c8003/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-26T13:31:42+08:00" />
<meta property="article:modified_time" content="2020-07-26T13:31:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shell循环语句及函数和数组使用（for、while、until循环语句的解释及范例）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一：循环语句</a></li><li><ul><li><a href="#11for_2" rel="nofollow">1.1：for循环语句</a></li><li><ul><li><a href="#111for_3" rel="nofollow">1.1.1：for语句结构</a></li><li><a href="#112for_21" rel="nofollow">1.1.2：使用for批量添加用户</a></li><li><a href="#113IP_106" rel="nofollow">1.1.3：示例–根据IP地址检查主机状态</a></li><li><a href="#114110_136" rel="nofollow">1.1.4：用循环语句输出1-10的数字的四种办法</a></li><li><a href="#115shelllet_202" rel="nofollow">1.1.5：shell中let命令</a></li></ul> 
   </li><li><a href="#12while_272" rel="nofollow">1.2：while循环语句</a></li><li><ul><li><a href="#121while_273" rel="nofollow">1.2.1：while语句结构</a></li><li><a href="#122while_292" rel="nofollow">1.2.2：while语句应用示例</a></li><li><a href="#123while_319" rel="nofollow">1.2.3：while死循环</a></li><li><a href="#124while_346" rel="nofollow">1.2.4：使用while批量添加用户</a></li><li><a href="#125_391" rel="nofollow">1.2.5：猜商品价格游戏</a></li></ul> 
   </li><li><a href="#13continuebreak_420" rel="nofollow">1.3：continue和break</a></li><li><ul><li><a href="#131continue_421" rel="nofollow">1.3.1：continue</a></li><li><a href="#132break_432" rel="nofollow">1.3.2：break</a></li><li><a href="#133breakcontinue_441" rel="nofollow">1.3.3：break和continue的区别</a></li></ul> 
   </li><li><a href="#15untli_480" rel="nofollow">1.5：untli循环语句</a></li><li><ul><li><a href="#151until_481" rel="nofollow">1.5.1：until语句的结构</a></li><li><a href="#152until1_498" rel="nofollow">1.5.2：until语句应用1</a></li><li><a href="#153until2_520" rel="nofollow">1.5.3：until语句应用2</a></li></ul> 
  </li></ul> 
  </li><li><a href="#shell_561" rel="nofollow">二：shell函数</a></li><li><ul><li><a href="#21shell_562" rel="nofollow">2.1：shell函数概述</a></li><li><a href="#22shell_569" rel="nofollow">2.2：shell函数定义</a></li><li><a href="#23_590" rel="nofollow">2.3：调用函数的方法</a></li><li><a href="#24shell1_594" rel="nofollow">2.4：shell函数应用1</a></li><li><a href="#25shell2_624" rel="nofollow">2.5：shell函数应用2</a></li></ul> 
  </li><li><a href="#shell_629" rel="nofollow">三：shell数组</a></li><li><ul><li><a href="#31_630" rel="nofollow">3.1：数组应用场景</a></li><li><a href="#32_654" rel="nofollow">3.2：数组定义方法（推荐方法一）</a></li><li><a href="#33_696" rel="nofollow">3.3：数组包括的数据类型与数组操作</a></li><li><ul><li><a href="#331_697" rel="nofollow">3.3.1：数组包括的数据类型</a></li></ul> 
   </li><li><a href="#34_732" rel="nofollow">3.4：求数组最大值</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一：循环语句</h2> 
<h3><a id="11for_2"></a>1.1：for循环语句</h3> 
<h4><a id="111for_3"></a>1.1.1：for语句结构</h4> 
<p>● 读取不同的变量值，用来逐个执行同一组命令</p> 
<pre><code class="prism language-css">语句结构
for 变量名 in 取值列表
do
	命令序列
done
</code></pre> 
<pre><code class="prism language-css">语句结构举例
for 收件人 in 邮件地址列表
do
	发送邮件
done
</code></pre> 
<h4><a id="112for_21"></a>1.1.2：使用for批量添加用户</h4> 
<p>用户名存放在users.txt文件中，每行一个</p> 
<p>初始密码均设为123456</p> 
<pre><code class="prism language-css">[root@localhost opt]# vim user.txt
zhangsan
lisi
wangermazi
zhaoliu
tianji
wangba
[root@localhost opt]# vim useradd.sh
#!/bin/bash
Lists=$<span class="token punctuation">(</span>cat /opt/user.txt<span class="token punctuation">)</span>
for bb in $Lists
do
        useradd $bb
        echo <span class="token string">"123456"</span> | passwd --stdin $bb
        echo <span class="token string">"$bb添加成功"</span>
done
[root@localhost opt]# chmod +x useradd.sh 
[root@localhost opt]# ./useradd.sh 
Changing password for user zhangsan.
<span class="token property">passwd</span><span class="token punctuation">:</span> all authentication tokens updated successfully.
zhangsan添加成功
<span class="token property">useradd</span><span class="token punctuation">:</span> <span class="token property">warning</span><span class="token punctuation">:</span> the home directory already exists.
Not copying any file from skel directory into it.
Creating mailbox <span class="token property">file</span><span class="token punctuation">:</span> File exists
Changing password for user lisi.
<span class="token property">passwd</span><span class="token punctuation">:</span> all authentication tokens updated successfully.
lisi添加成功
Changing password for user wangermazi.
<span class="token property">passwd</span><span class="token punctuation">:</span> all authentication tokens updated successfully.
wangermazi添加成功
Changing password for user zhaoliu.
<span class="token property">passwd</span><span class="token punctuation">:</span> all authentication tokens updated successfully.
zhaoliu添加成功
Changing password for user tianji.
<span class="token property">passwd</span><span class="token punctuation">:</span> all authentication tokens updated successfully.
tianji添加成功
Changing password for user wangba.
<span class="token property">passwd</span><span class="token punctuation">:</span> all authentication tokens updated successfully.
wangba添加成功
[root@localhost opt]# cat /etc/passwd | grep <span class="token string">"bash"</span>
<span class="token property">root</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>0<span class="token punctuation">:</span>0<span class="token punctuation">:</span><span class="token property">root</span><span class="token punctuation">:</span>/<span class="token property">root</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">dd</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1000<span class="token punctuation">:</span>1000<span class="token punctuation">:</span><span class="token property">cn-tangzheng</span><span class="token punctuation">:</span>/home/<span class="token property">dd</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">zhangsan</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1001<span class="token punctuation">:</span>1001<span class="token punctuation">:</span><span class="token punctuation">:</span>/home/<span class="token property">zhangsan</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">lisi</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1002<span class="token punctuation">:</span>1002<span class="token punctuation">:</span><span class="token punctuation">:</span>/home/<span class="token property">lisi</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">wangermazi</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1003<span class="token punctuation">:</span>1003<span class="token punctuation">:</span><span class="token punctuation">:</span>/home/<span class="token property">wangermazi</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">zhaoliu</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1004<span class="token punctuation">:</span>1004<span class="token punctuation">:</span><span class="token punctuation">:</span>/home/<span class="token property">zhaoliu</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">tianji</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1005<span class="token punctuation">:</span>1005<span class="token punctuation">:</span><span class="token punctuation">:</span>/home/<span class="token property">tianji</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">wangba</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1006<span class="token punctuation">:</span>1006<span class="token punctuation">:</span><span class="token punctuation">:</span>/home/<span class="token property">wangba</span><span class="token punctuation">:</span>/bin/bash
</code></pre> 
<pre><code class="prism language-css">脚本可以适当修改优化：如
 echo <span class="token string">"123456"</span> | passwd --stdin $bb &amp;&gt; /dev/null
</code></pre> 
<pre><code class="prism language-css">批量删除用户：在刚刚的基础上修改
[root@localhost opt]# vim useradd.sh
#!/bin/bash
Lists=$<span class="token punctuation">(</span>cat /opt/user.txt<span class="token punctuation">)</span>
for bb in $Lists
do
        userdel -r $bb	<span class="token string">'-r 删除家目录'</span>
        #echo <span class="token string">"123456"</span> | passwd --stdin $bb &amp;&gt; /dev/null
        echo <span class="token string">"$bb删除成功"</span>
done

[root@localhost opt]# ./useradd.sh 
zhangsan删除成功
lisi删除成功
wangermazi删除成功
zhaoliu删除成功
tianji删除成功
wangba删除成功
[root@localhost opt]# cat /etc/passwd | grep <span class="token string">"bash"</span>
<span class="token property">root</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>0<span class="token punctuation">:</span>0<span class="token punctuation">:</span><span class="token property">root</span><span class="token punctuation">:</span>/<span class="token property">root</span><span class="token punctuation">:</span>/bin/bash
<span class="token property">dd</span><span class="token punctuation">:</span><span class="token property">x</span><span class="token punctuation">:</span>1000<span class="token punctuation">:</span>1000<span class="token punctuation">:</span><span class="token property">cn-tangzheng</span><span class="token punctuation">:</span>/home/<span class="token property">cn-tangzheng</span><span class="token punctuation">:</span>/bin/bash
</code></pre> 
<h4><a id="113IP_106"></a>1.1.3：示例–根据IP地址检查主机状态</h4> 
<p>● 检测IP地址192.168.197.0-192.168.197.10段落</p> 
<p>● 使用ping命令检测各主机的连通性</p> 
<pre><code class="prism language-css">[root@localhost opt]# vim ipchk.sh 
#!/bin/bash
for <span class="token punctuation">(</span><span class="token punctuation">(</span>i=1<span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span>i++<span class="token punctuation">)</span><span class="token punctuation">)</span>
do
  ping -c 3 -i 0.2 -W 3 <span class="token string">"192.168.197.$i"</span> &amp;&gt; /dev/null
  if [ $? -eq 0 ]
        then
        echo <span class="token string">"Host 192.168.197.$i is up"</span>
  else
        echo <span class="token string">"Host 192.168.197.$i is down"</span>
  fi
done
[root@localhost opt]# ./ipchk.sh 
Host 192.168.197.1 is up
Host 192.168.197.2 is up
Host 192.168.197.3 is down
Host 192.168.197.4 is down
Host 192.168.197.5 is down
Host 192.168.197.6 is down
Host 192.168.197.7 is down
Host 192.168.197.8 is down
Host 192.168.197.9 is down
Host 192.168.197.10 is down
</code></pre> 
<h4><a id="114110_136"></a>1.1.4：用循环语句输出1-10的数字的四种办法</h4> 
<p>方式一：</p> 
<pre><code class="prism language-css">#!/bin/bash
for <span class="token punctuation">(</span><span class="token punctuation">(</span>i=1<span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span>i++<span class="token punctuation">)</span><span class="token punctuation">)</span>
do
        echo <span class="token string">"$i"</span>
done
</code></pre> 
<p>方式二：</p> 
<pre><code class="prism language-css">#!/bin/bash
i=1
for <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span>i++<span class="token punctuation">)</span><span class="token punctuation">)</span>
do
        echo <span class="token string">"$i"</span>
done
</code></pre> 
<p>方式三：</p> 
<pre><code class="prism language-css">#!/bin/bash
i=1
for <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
do
        echo <span class="token string">"$i"</span>
        let i++
done
</code></pre> 
<p>方式四：</p> 
<pre><code class="prism language-css">#!/bin/bash
i=1
for <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
do
  if [ $i -le 10 ]
        then
        echo <span class="token string">"$i"</span>
        let i++
  else
        exit 0
  fi
done
</code></pre> 
<p>输出结果</p> 
<pre><code class="prism language-css">[root@localhost opt]# ./number.sh 
1
2
3
4
5
6
7
8
9
10
</code></pre> 
<h4><a id="115shelllet_202"></a>1.1.5：shell中let命令</h4> 
<p>● let 对整数进行数学运算</p> 
<p>● let和双小括号 (( )) 一样，let 命令也只能进行整数运算，不能对小数（浮点数）或者字符串进行运算。</p> 
<pre><code class="prism language-css">语法格式
let 表达式
或
let <span class="token string">"表达式"</span>
或
let <span class="token string">'表达式'</span>
以上方式都等价于 <span class="token punctuation">(</span><span class="token punctuation">(</span>表达式<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>● 当表达式中含有 Shell 特殊字符（例如 |）时，需要用双引号" "或者单引号’ '将表达式包围起来。</p> 
<p>● 和 (( )) 类似，let 命令也支持一次性计算多个表达式，并且以最后一个表达式的值作为整个 let 命令的执行结果。<br> 1.1.6：计算1-10偶数/奇数的和<br> 方式一：计算偶数的和</p> 
<pre><code class="prism language-css">#!/bin/bash
sum=0
<span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i=0<span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span>i+=2<span class="token punctuation">)</span><span class="token punctuation">)</span>
  do
        let sum+=$i
  done
        echo <span class="token string">"总和为：$sum"</span>
</code></pre> 
<p>方式一：计算奇数的和</p> 
<pre><code class="prism language-css">#!/bin/bash
sum=0
<span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i=1<span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span>i+=2<span class="token punctuation">)</span><span class="token punctuation">)</span>
  do
        let sum+=$i
  done
        echo <span class="token string">"总和为：$sum"</span>
</code></pre> 
<p>方式二：求奇数和</p> 
<pre><code class="prism language-css">#!/bin/bash
sum=0
<span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i=1<span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span>i+=2<span class="token punctuation">)</span><span class="token punctuation">)</span>
  do
        if [ `expr $i % 2` -eq 1 ]
         then
           let sum+=$i
        fi
  done
        echo <span class="token string">"总和为：$sum"</span>
</code></pre> 
<p>方式二：求偶数和</p> 
<pre><code class="prism language-css">#!/bin/bash
sum=0
<span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i=0<span class="token punctuation">;</span>i&lt;=10<span class="token punctuation">;</span>i+=2<span class="token punctuation">)</span><span class="token punctuation">)</span>
  do
        if [ `expr $i % 2` -eq 0 ]
         then
           let sum+=$i
        fi
  done
        echo <span class="token string">"总和为：$sum"</span>
</code></pre> 
<h3><a id="12while_272"></a>1.2：while循环语句</h3> 
<h4><a id="121while_273"></a>1.2.1：while语句结构</h4> 
<p>● 重复测试某个条件，只要条件成立则反复执行</p> 
<pre><code class="prism language-css">语句结构
while 条件测试操作
do
	命令序列
done
</code></pre> 
<pre><code class="prism language-css">语句结构示例
while 未猜中正确的价格
do
	反复猜测商品价格
done
</code></pre> 
<h4><a id="122while_292"></a>1.2.2：while语句应用示例</h4> 
<p>● 使用while循环语句输出1-10数字</p> 
<pre><code class="prism language-css">#!/bin/bash
i=0
while [ $i -le 10 ]
do
  echo <span class="token string">"$i"</span>
  let i++
done
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# . cccc.sh 
0
1
2
3
4
5
6
7
8
9
10
</code></pre> 
<h4><a id="123while_319"></a>1.2.3：while死循环</h4> 
<pre><code class="prism language-css">while true：死循环有时候也有奇效，可与用户交互
#!/bin/bash
while true
do
  read -p <span class="token string">"请输入yes退出："</span> KEY
  if [ $KEY = yes ]
        then
          break
  fi
done
echo <span class="token string">"正常退出"</span>
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# ./sixunhuan.sh 
请输入yes退出：no
请输入yes退出：1
请输入yes退出：d
请输入yes退出：！
请输入yes退出：a
请输入yes退出：yes
正常退出
</code></pre> 
<h4><a id="124while_346"></a>1.2.4：使用while批量添加用户</h4> 
<p>● 用户名称以stu开头，按数字顺序进行编号</p> 
<p>● 一共添加20个用户，即stu1，stu2…stu20</p> 
<p>● 初始密码设置为</p> 
<pre><code class="prism language-css">#!/bin/bash
i=0
while [ $i -le 19 ]
do
  let i++
  useradd stu$i
  echo <span class="token string">"123456"</span> | passwd --stdin stu$i &amp;&gt; /dev/null
  echo <span class="token string">"stu$i添加成功"</span>
done
echo <span class="token string">"添加完毕"</span>
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# ./useradd.sh 
stu1添加成功
stu2添加成功
stu3添加成功
stu4添加成功
stu5添加成功
stu6添加成功
stu7添加成功
stu8添加成功
stu9添加成功
stu10添加成功
stu11添加成功
stu12添加成功
stu13添加成功
stu14添加成功
stu15添加成功
stu16添加成功
stu17添加成功
stu18添加成功
stu19添加成功
stu20添加成功
添加完毕
</code></pre> 
<h4><a id="125_391"></a>1.2.5：猜商品价格游戏</h4> 
<p>● 通过变量RANDOM获得随机数</p> 
<p>● 提示用户猜测并记录次数，猜中后退出循环</p> 
<pre><code class="prism language-css">#!/bin/bash
A=`expr $RANDOM % 1000`
i=0
echo <span class="token string">"商品的实际价格为0-999之间，猜猜看是多少？"</span>
read -p <span class="token string">"请输入你猜测的价格数目："</span> num
while [ $num -le 999 ] &amp;&amp; [ $num -ge 1 ] 
do
        let i++
     if [ $num -eq $A ]
        then
        echo <span class="token string">"恭喜你答对了，实际价格是$A"</span>
        echo <span class="token string">"你一共猜测了$i 次"</span>
        exit 0
     elif [ $num -lt $A ]
        then
        echo <span class="token string">"太低了"</span>
        read -p <span class="token string">"请输入你猜测的价格数目："</span> num
     else
        echo <span class="token string">"太高了"</span>
        read -p <span class="token string">"请输入你猜测的价格数目："</span> num
     fi
  done
</code></pre> 
<h3><a id="13continuebreak_420"></a>1.3：continue和break</h3> 
<h4><a id="131continue_421"></a>1.3.1：continue</h4> 
<pre><code class="prism language-css">命令格式
continue n
n 表示循环的层数：
如果省略 n，则表示 continue 只对当前层次的循环语句有效，遇到 continue 会跳过本次循环，忽略本次循环的剩余代码，直接进入下一次循环。
如果带上 n，比如 n 的值为 2，那么 continue 对内层和外层循环语句都有效，不但内层会跳过本次循环，外层也会跳过本次循环，其效果相当于内层循环和外层循环同时执行了不带 n 的 continue。这么说可能有点难以理解，稍后我们通过代码来演示。
continue 关键字也通常和 if 语句一起使用，即满足条件时便跳出循环。 
</code></pre> 
<p><img src="https://images2.imgbox.com/1b/d2/4oSJoaYI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="132break_432"></a>1.3.2：break</h4> 
<pre><code class="prism language-css">命令格式
break n
n 表示跳出循环的层数，如果省略 n，则表示跳出当前的整个循环。
break 关键字通常和 if 语句一起使用，即满足条件时便跳出循环。
</code></pre> 
<p><img src="https://images2.imgbox.com/b6/c1/65tBhFPg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="133breakcontinue_441"></a>1.3.3：break和continue的区别</h4> 
<p>break 用来结束所有循环，循环语句不再有执行的机会；continue 用来结束本次循环，直接跳到下一次循环，如果循环条件成立，还会继续循环。</p> 
<pre><code class="prism language-go">#<span class="token operator">!</span><span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>k<span class="token operator">&lt;=</span><span class="token number">9</span><span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
do
 <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>$k<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 do
  echo <span class="token operator">-</span>n <span class="token string">""</span>$k<span class="token string">"x"</span>$i<span class="token string">"=$(expr $k \* $i)  "</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> $i <span class="token operator">-</span>eq $k <span class="token punctuation">]</span>
        then
        echo <span class="token operator">-</span>e <span class="token string">'\n'</span>
  fi
 done
done
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# ./99.sh 
1x1=1  

2x1=2  2x2=4  

3x1=3  3x2=6  3x3=9  

4x1=4  4x2=8  4x3=12  4x4=16  

5x1=5  5x2=10  5x3=15  5x4=20  5x5=25  

6x1=6  6x2=12  6x3=18  6x4=24  6x5=30  6x6=36  

7x1=7  7x2=14  7x3=21  7x4=28  7x5=35  7x6=42  7x7=49  

8x1=8  8x2=16  8x3=24  8x4=32  8x5=40  8x6=48  8x7=56  8x8=64  

9x1=9  9x2=18  9x3=27  9x4=36  9x5=45  9x6=54  9x7=63  9x8=72  9x9=81 
</code></pre> 
<h3><a id="15untli_480"></a>1.5：untli循环语句</h3> 
<h4><a id="151until_481"></a>1.5.1：until语句的结构</h4> 
<p>● 重复测试某个条件，只要条件不成立则反复执行</p> 
<pre><code class="prism language-css">until 条件测试操作
do
 命令序列
done
</code></pre> 
<pre><code class="prism language-css">while 未超过10
do
 数字依次增加
done
</code></pre> 
<p><img src="https://images2.imgbox.com/8e/ad/7Q6H0xSO_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="152until1_498"></a>1.5.2：until语句应用1</h4> 
<p>● 计算1–50的和</p> 
<p>● 通过循环累加的方式计算1–50的和</p> 
<pre><code class="prism language-css">#!/bin/bash
i=1
S=0
until [ $i -eq 51 ]
do
 let S+=$i
 let i++

done
echo <span class="token string">"$S"</span>
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# ./jisuan.sh 
1275
</code></pre> 
<h4><a id="153until2_520"></a>1.5.3：until语句应用2</h4> 
<p><strong>为指定用户发送在线消息</strong></p> 
<p>● 若指定用户不在线（未登陆系统），则每10分钟（实验中为了测试效果，可改为3s）试一次，直至用户登录系统后再发送信息<br> ● 用户名与消息通过为止参数传递给脚本</p> 
<pre><code class="prism language-css">#!/bin/bash
username=$1
#判断格式参数是否为空
if [ $# -lt 1 ]
 then
 echo <span class="token string">"Usage:`basename $0` &lt;username&gt; [&lt;message&gt;]"</span>
 exit 1
fi
#判断账号是否存在
if grep <span class="token string">"^$username:"</span> /etc/passwd &amp;&gt; /dev/nell<span class="token punctuation">;</span><span class="token property">then</span> <span class="token punctuation">:</span>
  else
        echo <span class="token string">"用户不存在"</span>
        exit 2
fi
#判断用户是否在线
until who | grep <span class="token string">"$username"</span> &amp;&gt; /dev/null
do
        echo <span class="token string">"用户不在线,正在尝试连接"</span>
        sleep 3
done
mes=$*
echo <span class="token string">"$mes"</span> | write <span class="token string">"$username"</span>
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# ./mes.sh 
<span class="token property">Usage</span><span class="token punctuation">:</span>mes.sh &lt;username&gt; [&lt;message&gt;]
[root@localhost opt]# ./mes.sh wangwu
用户不存在
[root@localhost opt]# ./mes.sh stu1
用户不在线,正在尝试连接
用户不在线,正在尝试连接
^C
</code></pre> 
<h2><a id="shell_561"></a>二：shell函数</h2> 
<h3><a id="21shell_562"></a>2.1：shell函数概述</h3> 
<p>● shell一个非常重要的特性是它可作为一种编程语言来使用。<br> ● 因为shell是一个解释器，所以它不能对为它编写的程序进行编译，而是在每次从磁盘加载这些程序时对它们进行解释。而程序的加载和解释都是非常耗时的。<br> ● 针对此问题，许多shell（如BourneAgainShell）都包含shell函数，shell把这些函数放在内存中，这样每次需要执行它们时就不必再从磁盘读入。<br> ● shell还以一种内部格式来存放这些函数，这样就不必耗费大量的时间来解释它们<br> ● shell函数将命令序列按格式写在一起<br> ● 可以方便重复使用命令序列</p> 
<h3><a id="22shell_569"></a>2.2：shell函数定义</h3> 
<pre><code class="prism language-css"><span class="token selector">[ function ]   函数名（）</span><span class="token punctuation">{<!-- --></span>

     命令序列
         [return x]
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>其中，return返回的是状态码，需要使用$?调取</p> 
 <p>echo 返回的是值，使用变量调用</p> 
 <p>传参：指位置变量</p> 
</blockquote> 
<p>● 可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</p> 
<p>● 参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。 return后跟数值n(0-255)</p> 
<h3><a id="23_590"></a>2.3：调用函数的方法</h3> 
<p>● 函数名 [参数1($1)] [参数2($2)]<br> ● 在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         2 
        
       
         表 
        
       
         示 
        
       
         第 
        
       
         二 
        
       
         个 
        
       
         参 
        
       
         数 
        
       
         … 
        
       
         ● 
        
       
         10 
        
       
         不 
        
       
         能 
        
       
         获 
        
       
         取 
        
       
         第 
        
       
         十 
        
       
         个 
        
       
         参 
        
       
         数 
        
       
         ， 
        
       
         获 
        
       
         取 
        
       
         第 
        
       
         十 
        
       
         个 
        
       
         参 
        
       
         数 
        
       
         需 
        
       
         要 
        
       
         10 
        
       
         不 
        
       
         能 
        
       
         获 
        
       
         取 
        
       
         第 
        
       
         十 
        
       
         个 
        
       
         参 
        
       
         数 
        
       
         ， 
        
       
         获 
        
       
         取 
        
       
         第 
        
       
         十 
        
       
         个 
        
       
         参 
        
       
         数 
        
       
         需 
        
       
         要 
        
       
         10 
        
       
         不 
        
       
         能 
        
       
         获 
        
       
         取 
        
       
         第 
        
       
         十 
        
       
         个 
        
       
         参 
        
       
         数 
        
       
         ， 
        
       
         获 
        
       
         取 
        
       
         第 
        
       
         十 
        
       
         个 
        
       
         参 
        
       
         数 
        
       
         需 
        
       
         要 
        
       
         10 
        
       
         。 
        
       
         当 
        
       
         n 
        
       
         &gt; 
        
       
         = 
        
       
         10 
        
       
         时 
        
       
         ， 
        
       
         需 
        
       
         要 
        
       
         使 
        
       
         用 
        
       
      
        2表示第二个参数… ● 10不能获取第十个参数，获取第十个参数需要10 不能获取第十个参数，获取第十个参数需要10不能获取第十个参数，获取第十个参数需要{10}。当n&gt;=10时，需要使用 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68354em; vertical-align: -0.0391em;"></span><span class="mord">2</span><span class="mord cjk_fallback">表</span><span class="mord cjk_fallback">示</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">二</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">●</span><span class="mord">1</span><span class="mord">0</span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">能</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">十</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">十</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">需</span><span class="mord cjk_fallback">要</span><span class="mord">1</span><span class="mord">0</span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">能</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">十</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">十</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">需</span><span class="mord cjk_fallback">要</span><span class="mord">1</span><span class="mord">0</span><span class="mord cjk_fallback">不</span><span class="mord cjk_fallback">能</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">十</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">获</span><span class="mord cjk_fallback">取</span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">十</span><span class="mord cjk_fallback">个</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">需</span><span class="mord cjk_fallback">要</span><span class="mord"><span class="mord">1</span><span class="mord">0</span></span><span class="mord cjk_fallback">。</span><span class="mord cjk_fallback">当</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&gt;</span></span><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">需</span><span class="mord cjk_fallback">要</span><span class="mord cjk_fallback">使</span><span class="mord cjk_fallback">用</span></span></span></span></span>{n}来获取参数。</p> 
<h3><a id="24shell1_594"></a>2.4：shell函数应用1</h3> 
<p><strong>两个数字求个</strong></p> 
<p>● 通过sum(){}定义函数<br> ● 使用read命令交互输入两个数并求和</p> 
<pre><code class="prism language-css"><span class="token selector">#!/bin/bash
#sum=0
 function  A ()</span><span class="token punctuation">{<!-- --></span>
  read -p <span class="token string">"请输入第一个数字："</span> B
  read -p <span class="token string">"请输入第二个数字："</span> C
  sum=`expr $B + $C`
  echo <span class="token string">"$B + $C = $sum"</span>
  return 3
<span class="token punctuation">}</span>
#echo $sum
A $B $C
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# ./han.sh 
请输入第一个数字：4
请输入第二个数字：2
4 + 2 = 6
[root@localhost opt]# echo $?
3
[root@localhost opt]# echo $?
0
</code></pre> 
<h3><a id="25shell2_624"></a>2.5：shell函数应用2</h3> 
<p><strong>编写登录系统后便可使用的自定义函数</strong><br> ● 编辑用户自定义函数文件/root/function<br> ● 在当前shell中加载可执行的函数文件/root/function<br> ● 在~/.bashrc文件中添加source /root/function命令</p> 
<h2><a id="shell_629"></a>三：shell数组</h2> 
<h3><a id="31_630"></a>3.1：数组应用场景</h3> 
<p>● 获取数组长度<br> （使用for循环获取具体信息，使用下标或索引标记数组中数据的位置</p> 
<p>可以存放多种数据，如：整型，长整形，浮点型（单精度，双精度），字符串等）</p> 
<p>● 获取元素长度</p> 
<p>● 遍历元素</p> 
<p>● 元素切片</p> 
<p>● 元素替换</p> 
<p>● 元素删除</p> 
<p>● …</p> 
<p>● 注意，忌讳数组越界，数组下标从0开始算数组长度从1开始算长度为4，数组长度表示为1,2,3,4；数组下标表示为0,1,2,3</p> 
<p>●shell中数组是可变长的</p> 
<h3><a id="32_654"></a>3.2：数组定义方法（推荐方法一）</h3> 
<p><strong>法一：</strong></p> 
<pre><code class="prism language-css">基本格式
数组名=（value0 value1 value2...）
例如
ABC=（11 22 33...）
</code></pre> 
<p><strong>法二：</strong></p> 
<pre><code class="prism language-css">基本格式
数组名=（[0]=value [1]=value [2]=value...）
例如
ABC=（[0]=11 [1]=22 [2]=33...<span class="token punctuation">)</span>
</code></pre> 
<p><strong>法三：数组元素之间使用空格隔开</strong></p> 
<pre><code class="prism language-css">基本格式
列表名=“value0 value1 value2”
数组名=（$列表名）
例如
AAA=“11 22 33...”
ABC=<span class="token punctuation">(</span>$列表名<span class="token punctuation">)</span>
</code></pre> 
<p><strong>法四：</strong></p> 
<pre><code class="prism language-css">基本格式
数组名[0]=“value”
数组名[1]=“value”
数组名[2]=“value”
...
例如
AAA[0]=“11”
AAA[1]=“22”
AAA[2]=“33”
</code></pre> 
<h3><a id="33_696"></a>3.3：数组包括的数据类型与数组操作</h3> 
<h4><a id="331_697"></a>3.3.1：数组包括的数据类型</h4> 
<p>● 数值类型</p> 
<p>● 字符类型</p> 
<p>● 使用“”或‘’定义<br> 数组只可存放数值或字符<br> 3.3.2：数组操作<br> ● 获取数组长度</p> 
<pre><code class="prism language-css"><span class="token selector">基本格式
$</span><span class="token punctuation">{<!-- --></span>#数组名[@/*]<span class="token punctuation">}</span>
例如
[root@localhost opt]# abc=<span class="token punctuation">(</span>10 20 30<span class="token punctuation">)</span>
[root<span class="token atrule"><span class="token rule">@localhost</span> opt]# echo $</span><span class="token punctuation">{<!-- --></span>abc[*]<span class="token punctuation">}</span>
10 20 30
[root<span class="token atrule"><span class="token rule">@localhost</span> opt]# echo $</span><span class="token punctuation">{<!-- --></span>#abc[*]<span class="token punctuation">}</span>
3
</code></pre> 
<p>● 读取某下标赋值</p> 
<pre><code class="prism language-css"><span class="token selector">基本格式
$</span><span class="token punctuation">{<!-- --></span>数组名[下标]<span class="token punctuation">}</span>
例如
[root<span class="token atrule"><span class="token rule">@localhost</span> opt]# echo $</span><span class="token punctuation">{<!-- --></span>abc[1]<span class="token punctuation">}</span>
20
[root<span class="token atrule"><span class="token rule">@localhost</span> opt]# echo $</span><span class="token punctuation">{<!-- --></span>abc[0]<span class="token punctuation">}</span>
10
[root<span class="token atrule"><span class="token rule">@localhost</span> opt]# echo $</span><span class="token punctuation">{<!-- --></span>abc[1]<span class="token punctuation">}</span>
20
[root<span class="token atrule"><span class="token rule">@localhost</span> opt]# echo $</span><span class="token punctuation">{<!-- --></span>abc[2]<span class="token punctuation">}</span>
30
</code></pre> 
<h3><a id="34_732"></a>3.4：求数组最大值</h3> 
<pre><code class="prism language-css">#!/bin/bash
for <span class="token punctuation">(</span><span class="token punctuation">(</span>i=1<span class="token punctuation">;</span>i&lt;=5<span class="token punctuation">;</span>i++<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token selector">;do
  read -p "请输入第$i个数字：" num
  abc[$i-1]=$num
done

max=$</span><span class="token punctuation">{<!-- --></span>abc[0]<span class="token punctuation">}</span>
for <span class="token punctuation">(</span><span class="token punctuation">(</span>k=1<span class="token selector">;k&lt;=$</span><span class="token punctuation">{<!-- --></span>#abc[*]<span class="token punctuation">}</span>-1<span class="token punctuation">;</span>k++<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token selector">;do
  if [ $max -lt $</span><span class="token punctuation">{<!-- --></span>abc[$k]<span class="token punctuation">}</span> ]<span class="token selector">;then
   max=$</span><span class="token punctuation">{<!-- --></span>abc[$k]<span class="token punctuation">}</span>
  fi
done
echo <span class="token string">"最大值是：$max"</span>   
</code></pre> 
<pre><code class="prism language-css">[root@localhost opt]# chmod +x max.sh 
[root@localhost opt]# ./max.sh 
请输入第1个数字：2
请输入第2个数字：3
请输入第3个数字：66
请输入第4个数字：33
请输入第5个数字：111
最大值是：111
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9400c9cd03c180aa27592526b87ffe4a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ArrayList和LinkedList、Vector的区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7ca5b0ebbc924fd328b02c02823c93b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Shell脚本：循环语句（for，while,until)；函数；数组</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
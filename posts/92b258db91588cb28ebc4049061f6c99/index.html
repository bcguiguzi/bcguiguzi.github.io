<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux 账号权限管理 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux 账号权限管理" />
<meta property="og:description" content="账号管理 linux权限管理严格，这也是其安全的保证，对文件、目录分为主、组、其他三级权限控制，其中/etc/passwd，/etc/group,/etc/shadow文件分别存储了账号，组，密码详情。
关于组 #创建组号 groupadd web #创建组号时指定gid groupadd -g 5 web 每个组有唯一的gid,我们通过cat /etc/group看到其gid:
[root@localhost root]# cat /etc/group root:x:0:root,pigfu web:x:1: admin:x:2: 可以看web组的gid是 1。
其内容用 ： 来分割，依次表示：
组名，不能重复；口令，即密码，一般Linux系统的用户组都没有口令，用x表示；组标识号（gid）,一个整数，被系统内部用来标识组,别称GID,唯一的;是属于这个组的所有用户的列表，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。 关于账号 #创建账号 useradd -g web php #创建账号并指定附加组 useradd -g web –G admin,root php #通过-G指定php账号的除了属于组web还属于root和admin 每个账号有唯一的uid,我们通过cat /etc/passwd看到其uid:
[root@iZwz943yllm8g13xj9uu30Z lib64]# cat /etc/passwd root:x:0:0:root:/root:/bin/bash php:x:1:2::/home/php:/bin/bash 可以看到php账号的uid是1，组id是2。
内容解析如下：
1）&#34;用户名&#34;是代表用户账号的字符串。
通常长度不超过8个字符，并且由大小写字母和/或数字组成。登录名中不能有冒号(😃，因为冒号在这里是分隔符。
为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(&#43;)打头。
2）“口令”一些系统中，存放着加密后的用户口令字。
虽然这个字段存放的只是用户口令的加密串，不是明文，但是由于/etc/passwd文件对所有用户都可读，所以这仍是一个安全隐患。因此，现在许多Linux 系统（如SVR4）都使用了shadow技术，把真正的加密后的用户口令字存放到/etc/shadow文件中，而在/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。
3）“用户标识号”是一个整数，系统内部用它来标识用户。
一般情况下它与用户名是一一对应的。如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。
通常用户标识号的取值范围是0～65 535。0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。在Linux系统中，这个界限是500。
4）“组标识号”字段记录的是用户所属的用户组。
它对应着/etc/group文件中的一条记录。
5)“注释性描述”字段记录着用户的一些个人情况。
例如用户的真实姓名、电话、地址等，这个字段并没有什么实际的用途。在不同的Linux 系统中，这个字段的格式并没有统一。在许多Linux系统中，这个字段存放的是一段任意的注释性描述文字，用做finger命令的输出。
6)“主目录”，也就是用户的起始工作目录。
它是用户在登录到系统之后所处的目录。在大多数系统中，各用户的主目录都被组织在同一个特定的目录下，而用户主目录的名称就是该用户的登录名。各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。
7)用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。
Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。常用的有sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)等。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/92b258db91588cb28ebc4049061f6c99/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-05T01:34:17+08:00" />
<meta property="article:modified_time" content="2024-02-05T01:34:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux 账号权限管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="_0"></a>账号管理</h5> 
<p>linux权限管理严格，这也是其安全的保证，对文件、目录分为主、组、其他三级权限控制，其中/etc/passwd，/etc/group,/etc/shadow文件分别存储了账号，组，密码详情。</p> 
<h6><a id="_2"></a>关于组</h6> 
<pre><code class="prism language-bash"><span class="token comment">#创建组号</span>
<span class="token function">groupadd</span> web 
<span class="token comment">#创建组号时指定gid</span>
<span class="token function">groupadd</span> <span class="token parameter variable">-g</span> <span class="token number">5</span> web
</code></pre> 
<p>每个组有唯一的gid,我们通过<code>cat /etc/group</code>看到其gid:</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost root<span class="token punctuation">]</span><span class="token comment"># cat /etc/group</span>
root:x:0:root,pigfu
web:x:1:
admin:x:2:
</code></pre> 
<p>可以看web组的gid是 1。<br> 其内容用 <strong>：</strong> 来分割，依次表示：</p> 
<ul><li>组名，不能重复；</li><li>口令，即密码，一般Linux系统的用户组都没有口令，用x表示；</li><li>组标识号（gid）,一个整数，被系统内部用来标识组,别称GID,唯一的;</li><li>是属于这个组的所有用户的列表，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。</li></ul> 
<h6><a id="_24"></a>关于账号</h6> 
<pre><code class="prism language-bash"><span class="token comment">#创建账号</span>
<span class="token function">useradd</span> <span class="token parameter variable">-g</span> web php
<span class="token comment">#创建账号并指定附加组</span>
<span class="token function">useradd</span> <span class="token parameter variable">-g</span> web –G admin,root php <span class="token comment">#通过-G指定php账号的除了属于组web还属于root和admin</span>
</code></pre> 
<p>每个账号有唯一的uid,我们通过<code>cat /etc/passwd</code>看到其uid:</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@iZwz943yllm8g13xj9uu30Z lib64<span class="token punctuation">]</span><span class="token comment"># cat /etc/passwd</span>
root:x:0:0:root:/root:/bin/bash
php:x:1:2::/home/php:/bin/bash
</code></pre> 
<p>可以看到php账号的uid是1，组id是2。<br> 内容解析如下：</p> 
<p>1）"用户名"是代表用户账号的字符串。</p> 
<p>通常长度不超过8个字符，并且由大小写字母和/或数字组成。登录名中不能有冒号(😃，因为冒号在这里是分隔符。</p> 
<p>为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。<br> 2）“口令”一些系统中，存放着加密后的用户口令字。</p> 
<p>虽然这个字段存放的只是用户口令的加密串，不是明文，但是由于/etc/passwd文件对所有用户都可读，所以这仍是一个安全隐患。因此，现在许多Linux 系统（如SVR4）都使用了shadow技术，把真正的加密后的用户口令字存放到/etc/shadow文件中，而在/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。<br> 3）“用户标识号”是一个整数，系统内部用它来标识用户。</p> 
<p>一般情况下它与用户名是一一对应的。如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。</p> 
<p>通常用户标识号的取值范围是0～65 535。0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。在Linux系统中，这个界限是500。<br> 4）“组标识号”字段记录的是用户所属的用户组。</p> 
<p>它对应着/etc/group文件中的一条记录。<br> 5)“注释性描述”字段记录着用户的一些个人情况。</p> 
<p>例如用户的真实姓名、电话、地址等，这个字段并没有什么实际的用途。在不同的Linux 系统中，这个字段的格式并没有统一。在许多Linux系统中，这个字段存放的是一段任意的注释性描述文字，用做finger命令的输出。<br> 6)“主目录”，也就是用户的起始工作目录。</p> 
<p>它是用户在登录到系统之后所处的目录。在大多数系统中，各用户的主目录都被组织在同一个特定的目录下，而用户主目录的名称就是该用户的登录名。各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。<br> 7)用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。</p> 
<p>Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。常用的有sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)等。</p> 
<p>系统管理员可以根据系统情况和用户习惯为用户指定某个Shell。如果不指定Shell，那么系统使用sh为默认的登录Shell，即这个字段的值为/bin/sh。</p> 
<p>用户的登录Shell也可以指定为某个特定的程序（此程序不是一个命令解释器）。</p> 
<p>利用这一特点，我们可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。有些Linux 系统要求只有那些在系统中登记了的程序才能出现在这个字段中。<br> 8)系统中有一类用户称为伪用户（pseudo users）。</p> 
<p>这些用户在/etc/passwd文件中也占有一条记录，但是不能登录，因为它们的登录Shell为空。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。<br> 常见的伪用户如下所示：</p> 
<pre><code class="prism language-bash"><span class="token comment">#伪 用 户 含 义 </span>
bin 拥有可执行的用户命令文件 
sys 拥有系统文件 
adm 拥有帐户文件 
uucp UUCP使用 
lp lp或lpd子系统使用 
nobody NFS使用
</code></pre> 
<h6><a id="_87"></a>关于密码</h6> 
<pre><code class="prism language-bash"><span class="token comment">#如果当前登录用户是php</span>
$ <span class="token function">passwd</span>
Old password:****** 
New password:******* 
Re-enter new password:*******
<span class="token comment">#如果当前登录用户是root等超级管理员</span>
$ <span class="token function">passwd</span> php
New password:******* 
Re-enter new password:*******
</code></pre> 
<h5><a id="_100"></a>文件目录权限管理</h5> 
<p>主要用到两个shell命令：chmod和chown</p> 
<p>前者修改文件目录读写权限：<br> 7=4+2+1=r+w+x</p> 
<pre><code class="prism language-bash"><span class="token function">chmod</span> <span class="token number">755</span> index.php
</code></pre> 
<p>后者用于修改文件目录属组属主：</p> 
<pre><code class="prism language-bash"><span class="token function">chown</span> php:web index.php
</code></pre> 
<h5><a id="_114"></a>参考</h5> 
<p>【1】<a href="https://www.runoob.com/linux/linux-user-manage.html" rel="nofollow">菜鸟linux账号权限管理</a><br> 【2】<a href="https://www.runoob.com/linux/linux-command-manual.html" rel="nofollow">菜鸟linux命令大全</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d0f141608cc02548881c571778e88b57/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">实现类似chart GPT文字流式输出的效果</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/316b94ebce1cb6c65e5f5f8f90a637e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux yum命令总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
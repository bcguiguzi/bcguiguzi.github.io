<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>love2d 1. 入门 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="love2d 1. 入门" />
<meta property="og:description" content="官网
love2d.org
1、写个贪吃蛇
以下是main.lua的代码
snake = {} speed = 50 function init() snake = {} local head = {x=love.graphics.getWidth()/2,y=love.graphics.getHeight()/2,direction=&#39;up&#39;} table.insert(snake,head) local tail = {x=love.graphics.getWidth()/2,y=love.graphics.getHeight()/4*3,direction=&#39;up&#39;} table.insert(snake,tail) end function love.load(arg) init() end function line2line(line1_x1,line1_y1,line1_x2,line1_y2,line2_x1,line2_y1,line2_x2,line2_y2) return (not((math.max(line1_x1,line1_x2)&lt;math.min(line2_x1,line2_x2)) or (math.min(line1_x1,line1_x2)&gt;math.max(line2_x1,line2_x2)))) and (not((math.max(line1_y1,line1_y2)&lt;math.min(line2_y1,line2_y2)) or (math.min(line1_y1,line1_y2)&gt;math.max(line2_y1,line2_y2)))) end function love.update(dt) --head------------------------------------------------ if snake[1].direction == &#39;up&#39; then snake[1].y = snake[1].y - dt*speed elseif snake[1].direction == &#39;down&#39; then snake[1].y = snake[1].y &#43; dt*speed elseif snake[1].direction == &#39;left&#39; then snake[1]." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/20ebc80e16a77b5c3f0d7b39d0965e25/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-29T12:47:20+08:00" />
<meta property="article:modified_time" content="2020-10-29T12:47:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">love2d 1. 入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>官网<br><a href="http://love2d.org" rel="nofollow">love2d.org</a></p> 
<p>1、写个贪吃蛇</p> 
<p>以下是main.lua的代码</p> 
<pre><code class="language-Lua">snake = {}
speed = 50

function init()
    snake = {}
    local head = {x=love.graphics.getWidth()/2,y=love.graphics.getHeight()/2,direction='up'}
    table.insert(snake,head)
    local tail = {x=love.graphics.getWidth()/2,y=love.graphics.getHeight()/4*3,direction='up'}
    table.insert(snake,tail)
end

function love.load(arg)
    init()
end

function line2line(line1_x1,line1_y1,line1_x2,line1_y2,line2_x1,line2_y1,line2_x2,line2_y2)
    return (not((math.max(line1_x1,line1_x2)&lt;math.min(line2_x1,line2_x2)) or (math.min(line1_x1,line1_x2)&gt;math.max(line2_x1,line2_x2)))) and (not((math.max(line1_y1,line1_y2)&lt;math.min(line2_y1,line2_y2)) or (math.min(line1_y1,line1_y2)&gt;math.max(line2_y1,line2_y2))))
end

function love.update(dt)
    --head------------------------------------------------
    if  snake[1].direction == 'up' then
        snake[1].y = snake[1].y - dt*speed
    elseif  snake[1].direction == 'down' then
        snake[1].y = snake[1].y + dt*speed
    elseif  snake[1].direction == 'left' then
        snake[1].x = snake[1].x - dt*speed
    elseif  snake[1].direction == 'right' then
        snake[1].x = snake[1].x + dt*speed
    end
    --head------------------------------------------------

    --tail------------------------------------------------
    local tail_index = #snake
    if snake[tail_index].direction == 'up' then
        snake[tail_index].y = snake[tail_index].y - dt*speed
        if snake[tail_index].y &lt;= snake[tail_index-1].y then
            table.remove(snake)
        end
    elseif snake[tail_index].direction == 'down' then
        snake[tail_index].y = snake[tail_index].y + dt*speed
        if snake[tail_index].y &gt;= snake[tail_index-1].y then
            table.remove(snake)
        end
    elseif snake[tail_index].direction == 'left' then
        snake[tail_index].x = snake[tail_index].x - dt*speed
        if snake[tail_index].x &lt;= snake[tail_index-1].x then
            table.remove(snake)
        end
    elseif snake[tail_index].direction == 'right' then
        snake[tail_index].x = snake[tail_index].x + dt*speed
        if snake[tail_index].x &gt;= snake[tail_index-1].x then
            table.remove(snake)
        end
    end
    --tail------------------------------------------------

    --out of range------------------------------------------------
    if (snake[1].x&lt;0 or snake[1].x&gt;love.graphics.getWidth()) or (snake[1].y&lt;0 or snake[1].y&gt;love.graphics.getHeight()) then
        init()
        return
    end
    --out of range------------------------------------------------

    --碰撞------------------------------------------------
    for i=3,#snake-1,1 do --第3个点+第4个点开始，与头(第一个点)+第二个点，是否相交
        --print('ppp')
        if line2line(snake[1].x,snake[1].y,snake[2].x,snake[2].y,snake[i].x,snake[i].y,snake[i+1].x,snake[i+1].y) then
            init()
            return
        end
    end
    --碰撞------------------------------------------------
end

function love.draw(dt)
    for i=1,#snake-1,1 do
        love.graphics.line(snake[i].x,snake[i].y,snake[i+1].x,snake[i+1].y)
    end
end

function love.keypressed(key) --键盘检测回调函数，当键盘事件触发是调用
    if key == 'up' or key == 'down' then
        if  snake[1].direction ~= 'up' and  snake[1].direction ~= 'down' then
            snake[1].direction = key
            local head = {x=snake[1].x, y=snake[1].y, direction=snake[1].direction} --new head
            table.insert(snake,1,head)
        end
    elseif key == 'left' or key == 'right' then
        if  snake[1].direction ~= 'left' and  snake[1].direction ~= 'right' then
            snake[1].direction = key
            local head = {x=snake[1].x, y=snake[1].y, direction=snake[1].direction} --new head
            table.insert(snake,1,head)
        end
    end
end</code></pre> 
<p>2、打包成exe</p> 
<p>把main.lua等同级目录的所有文件打包成xxx.zip，改名为xxx.love</p> 
<p>放到love的文件中(love-11.3-win64)</p> 
<p>新建build.bat，内容为</p> 
<pre><code class="language-bash">copy /b love.exe+xxx.love xxx.exe</code></pre> 
<p>把xxx.exe，以及love的文件中(love-11.3-win64)所有的dll，打包，发给朋友，就能愉快玩耍了！！</p> 
<p> </p> 
<p>参考：</p> 
<p>别人做的一个游戏</p> 
<p><a href="http://osmstudios.com/tutorials/your-first-love2d-game-in-200-lines-part-1-of-3" rel="nofollow">http://osmstudios.com/tutorials/your-first-love2d-game-in-200-lines-part-1-of-3</a></p> 
<p> </p> 
<p>一些讨论，怎么把dll打包进exe中，结论是，不推荐</p> 
<p><a href="https://love2d.org/forums/viewtopic.php?t=84533" rel="nofollow">https://love2d.org/forums/viewtopic.php?t=84533</a></p> 
<p><a href="https://love2d.org/forums/viewtopic.php?t=84358" rel="nofollow">https://love2d.org/forums/viewtopic.php?t=84358</a></p> 
<p><a href="https://love2d.org/forums/viewtopic.php?t=83614" rel="nofollow">https://love2d.org/forums/viewtopic.php?t=83614</a></p> 
<p><a href="https://love2d.org/forums/viewtopic.php?t=78157" rel="nofollow">https://love2d.org/forums/viewtopic.php?t=78157</a></p> 
<p><a href="https://love2d.org/forums/viewtopic.php?t=83614" rel="nofollow">https://love2d.org/forums/viewtopic.php?t=83614</a></p> 
<p><a href="https://love2d.org/forums/viewtopic.php?t=82569" rel="nofollow">https://love2d.org/forums/viewtopic.php?t=82569</a></p> 
<p><a href="https://love2d.org/forums/viewtopic.php?t=78157" rel="nofollow">https://love2d.org/forums/viewtopic.php?t=78157</a></p> 
<p> </p> 
<p>半山无极</p> 
<p><a href="https://www.cnblogs.com/xdao/archive/2012/12/07/2806500.html" rel="nofollow">https://www.cnblogs.com/xdao/archive/2012/12/07/2806500.html</a></p> 
<div id="gtx-trans"> 
 <div>
     
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7ddee9868900f921bbc208994a625095/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">怎样学好python编程-如何系统地自学 Python？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6052588087b4d2eca0bbe09f6d7fe45a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LeetCode C&#43;&#43; 两种方法使用dfs求解朋友圈的个数（最大联通分量的个数？）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
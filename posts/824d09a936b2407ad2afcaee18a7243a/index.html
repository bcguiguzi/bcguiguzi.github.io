<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot 学习笔记 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot 学习笔记" />
<meta property="og:description" content="SpringBoot 学习笔记 一、简介 1.1 什么是SpringBoot 一个javaweb的开发框架、简化开发、约定大于配置、集成大量常用的第三方库配置（例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等），Spring Boot 应用中这些第三方库几乎可以零配置的开箱即用）
1.2 第一个SpringBoot程序 创建一个springboot程序有两种方式：
1.2.1 官网创建
①打开 https://start.spring.io/
②填写项目信息
③点击”Generate Project“按钮生成项目；下载此项目
④解压项目包，并用IDEA以Maven项目导入，一路下一步即可，直到项目导入完毕。
⑤如果是第一次使用，可能速度会比较慢，包比较多、需要耐心等待一切就绪。
1.2.2 项目创建方式二使用 IDEA 直接创建项目
①创建一个新项目
②选择spring initalizr ， 可以看到默认就是去官网的快速构建工具那里实现
③填写项目信息
④选择初始化的组件（初学勾选 Web 即可）
⑤填写项目路径
⑥等待项目构建成功
1.3 项目结构组成 1、程序的主启动类（程序的主入口）
2、一个 application.properties 配置文件（SpringBoot的核心配置文件）
3、一个 测试类
4、一个 pom.xml
1.4 自动装配源码剖析结论 @SpringBootApplication
作用：标注在某个类上说明这个类是SpringBoot的主配置类 ， SpringBoot就应该运行这个类的main方法来启动SpringBoot应用
@ComponentScan
这个注解在Spring中很重要 ,它对应XML配置中的元素。
作用：自动扫描并加载符合条件的组件或者bean ， 将这个bean定义加载到IOC容器中
@SpringBootConfiguration
作用：SpringBoot的配置类 ，标注在某个类上 ， 表示这是一个SpringBoot的配置类；
@EnableAutoConfiguration ：开启自动配置功能
以前我们需要自己配置的东西，而现在SpringBoot可以自动帮我们配置 ；@EnableAutoConfiguration告诉SpringBoot开启自动配置功能，这样自动配置才能生效；
@AutoConfigurationPackage 翻译：自动配置包" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/824d09a936b2407ad2afcaee18a7243a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-21T22:38:28+08:00" />
<meta property="article:modified_time" content="2022-12-21T22:38:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot 学习笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="SpringBoot__0"></a>SpringBoot 学习笔记</h2> 
<h3><a id="_2"></a>一、简介</h3> 
<h4><a id="11%09SpringBoot_4"></a>1.1 什么是SpringBoot</h4> 
<p>一个javaweb的开发框架、简化开发、约定大于配置、集成大量常用的第三方库配置（例如 Redis、MongoDB、Jpa、RabbitMQ、Quartz 等等），Spring Boot 应用中这些第三方库几乎可以零配置的开箱即用）</p> 
<h4><a id="12%09SpringBoot_8"></a>1.2 第一个SpringBoot程序</h4> 
<p>创建一个springboot程序有两种方式：</p> 
<p>1.2.1 官网创建</p> 
<p>①打开 https://start.spring.io/</p> 
<p>②填写项目信息</p> 
<p>③点击”Generate Project“按钮生成项目；下载此项目</p> 
<p>④解压项目包，并用IDEA以Maven项目导入，一路下一步即可，直到项目导入完毕。</p> 
<p>⑤如果是第一次使用，可能速度会比较慢，包比较多、需要耐心等待一切就绪。</p> 
<p>1.2.2 项目创建方式二使用 IDEA 直接创建项目</p> 
<p>①创建一个新项目</p> 
<p>②选择spring initalizr ， 可以看到默认就是去官网的快速构建工具那里实现</p> 
<p>③填写项目信息</p> 
<p>④选择初始化的组件（初学勾选 Web 即可）</p> 
<p>⑤填写项目路径</p> 
<p>⑥等待项目构建成功</p> 
<h4><a id="13%09_38"></a>1.3 项目结构组成</h4> 
<p>1、程序的主启动类（程序的主入口）</p> 
<p>2、一个 application.properties 配置文件（SpringBoot的核心配置文件）</p> 
<p>3、一个 测试类</p> 
<p>4、一个 pom.xml</p> 
<h4><a id="14%09_48"></a>1.4 自动装配源码剖析结论</h4> 
<p>@SpringBootApplication</p> 
<p>作用：标注在某个类上说明这个类是SpringBoot的主配置类 ， SpringBoot就应该运行这个类的main方法来启动SpringBoot应用</p> 
<p>@ComponentScan</p> 
<p>这个注解在Spring中很重要 ,它对应XML配置中的元素。</p> 
<p>作用：自动扫描并加载符合条件的组件或者bean ， 将这个bean定义加载到IOC容器中</p> 
<p>@SpringBootConfiguration</p> 
<p>作用：SpringBoot的配置类 ，标注在某个类上 ， 表示这是一个SpringBoot的配置类；</p> 
<p>@EnableAutoConfiguration ：开启自动配置功能</p> 
<p>以前我们需要自己配置的东西，而现在SpringBoot可以自动帮我们配置 ；@EnableAutoConfiguration告诉SpringBoot开启自动配置功能，这样自动配置才能生效；</p> 
<p>@AutoConfigurationPackage <strong>翻译：自动配置包</strong></p> 
<p>AutoConfigurationImportSelector ：自动配置导入选择器</p> 
<h5><a id="springbootspringpropertiesstart_72"></a>springboot所有的自动配置都是在启动的时候扫描并加载，扫描了spring.properties配置文件，所有的自动配置类都在这里面，但是不定生效，因为要判断条件是否成立，只要导入了对应的start，就有对应的启动器，有了启动器我们自动装配就会生效，然后就配置成功</h5> 
<ul><li>步骤：SpringBoot在启动的时候从类路径下的META-INF/spring.factories中获取EnableAutoConfiguration指定的值</li><li>将这些值作为自动配置类导入容器 ， 自动配置类就生效 ， 帮我们进行自动配置工作；</li><li>以前需要我们配置的文件，springboot帮我们配置了！</li><li>整个J2EE的整体解决方案和自动配置都在springboot-autoconfigure的jar包中；</li><li>整个J2EE的整体解决方案和自动配置都在springboot-autoconfigure的jar包中；</li><li>它会给容器中导入非常多的自动配置类 （xxxAutoConfiguration）@Bean, 就是给容器中导入这个场景需要的所有组件 ， 并配置好这些组件 @Configuration；</li><li>有了自动配置类 ， 免去了我们手动编写配置注入功能组件等的工作；</li></ul> 
<p>SpringApplication.run分析</p> 
<p>分析该方法主要分两部分，一部分是SpringApplication的实例化，二是run方法的执行；</p> 
<h5><a id="SpringApplication_86"></a>SpringApplication</h5> 
<p>这个类主要做了以下四件事情：</p> 
<p>1、推断应用的类型是普通的项目还是Web项目</p> 
<p>2、查找并加载所有可用初始化器 ， 设置到initializers属性中</p> 
<p>3、找出所有的应用程序监听器，设置到listeners属性中</p> 
<p>4、推断并设置main方法的定义类，找到运行的主类</p> 
<h5><a id="springbootspringboot_98"></a>关于springboot，谈谈你的理解：springboot的自动装配</h5> 
<h6><a id="run_100"></a>run()：</h6> 
<p>①判断当前项目是普通项目还是web项目<br> ②推断并设置main方法的定义类，找到运行的主类<br> ③run方法里面有一些监听器，这些监听器是全局存在的，它的作用是获取上下文处理一些bean，所有的bean无论是加载还是生产初始化多存在。</p> 
<h3><a id="yaml_106"></a>二、配置文件yaml</h3> 
<p>2.1yaml基础语法</p> 
<p>说明：语法要求严格！</p> 
<p>1、空格不能省略</p> 
<p>2、以缩进来控制层级关系，只要是左边对齐的一列数据都是同一个层级的。</p> 
<p>3、属性和值的大小写都是十分敏感的。</p> 
<p>字面量：普通的值 [ 数字，布尔值，字符串 ]</p> 
<p>字面量直接写在后面就可以 ， 字符串默认不用加上双引号或者单引号；</p> 
<p>2.2</p> 
<p>1、@ConfigurationProperties只需要写一次即可 ， @Value则需要每个字段都添加</p> 
<p>2、松散绑定：这个什么意思呢? 比如我的yaml中写的last-name，这个和lastName是一样的， - 后面跟着的字母默认是大写的。这就是松散绑定。可以测试一下</p> 
<p>3、JSR303数据校验 ， 这个就是我们可以在字段是增加一层过滤器验证 ， 可以保证数据的合法性</p> 
<p>4、复杂类型封装，yaml中可以封装对象 ， 使用value就不支持。</p> 
<p>结论</p> 
<p>配置yaml和配置properties都可以获取到值 ， 但是强烈推荐 yaml；</p> 
<p>如果我们在某个业务中，只需要获取配置文件中的某个值，可以使用一下 @value；</p> 
<p>如果说，我们专门编写了一个JavaBean来和配置文件进行一一映射，就直接@configurationProperties，不要犹豫！<br> 2.3 JSR303</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@NotNull</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"名字不能为空"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Max</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">,</span>message<span class="token operator">=</span><span class="token string">"年龄最大不能查过120"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Email</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"邮箱格式错误"</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>

空检查
<span class="token annotation punctuation">@Null</span>       验证对象是否为<span class="token keyword">null</span>
<span class="token annotation punctuation">@NotNull</span>    验证对象是否不为<span class="token keyword">null</span><span class="token punctuation">,</span> 无法查检长度为<span class="token number">0</span>的字符串
<span class="token annotation punctuation">@NotBlank</span>   检查约束字符串是不是<span class="token class-name">Null</span>还有被<span class="token class-name">Trim</span>的长度是否大于<span class="token number">0</span><span class="token punctuation">,</span>只对字符串<span class="token punctuation">,</span>且会去掉前后空格<span class="token punctuation">.</span>
<span class="token annotation punctuation">@NotEmpty</span>   检查约束元素是否为<span class="token constant">NULL</span>或者是<span class="token class-name">EMPTY<span class="token punctuation">.</span>
    
Booelan</span>检查
<span class="token annotation punctuation">@AssertTrue</span>     验证 <span class="token class-name">Boolean</span> 对象是否为 <span class="token boolean">true</span>  
<span class="token annotation punctuation">@AssertFalse</span>    验证 <span class="token class-name">Boolean</span> 对象是否为 <span class="token boolean">false</span>  
    
长度检查
<span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token punctuation">)</span> 验证对象（<span class="token class-name">Array</span><span class="token punctuation">,</span><span class="token class-name">Collection</span><span class="token punctuation">,</span><span class="token class-name">Map</span><span class="token punctuation">,</span><span class="token class-name">String</span>）长度是否在给定的范围之内  
<span class="token annotation punctuation">@Length</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token punctuation">)</span> string is between min and max included<span class="token punctuation">.</span>

日期检查
<span class="token annotation punctuation">@Past</span>       验证 <span class="token class-name">Date</span> 和 <span class="token class-name">Calendar</span> 对象是否在当前时间之前  
<span class="token annotation punctuation">@Future</span>     验证 <span class="token class-name">Date</span> 和 <span class="token class-name">Calendar</span> 对象是否在当前时间之后  
<span class="token annotation punctuation">@Pattern</span>    验证 <span class="token class-name">String</span> 对象是否符合正则表达式的规则

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>等等
除此以外，我们还可以自定义一些数据校验规则

</code></pre> 
<p>springboot 启动会扫描以下位置的application.properties或者application.yml文件作为Spring boot的默认配置文件：</p> 
<p>优先级1：项目路径下的config文件夹配置文件<br> 优先级2：项目路径下配置文件<br> 优先级3：资源路径下的config文件夹配置文件<br> 优先级由高到底，高优先级的配置会覆盖低优先级的配置；</p> 
<p>SpringBoot会从这四个位置全部加载主配置文件；互补配置；</p> 
<h4><a id="springbootweb_182"></a>三、springboot-web</h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fda29b887fc2ea4a844e16494b0ed41f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HTTP Status 500 - java.lang.NullPointerException错误</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fe5f9ccfba8807955e23ff4eb236e327/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【量化交易】QMT自动交易逆回购</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
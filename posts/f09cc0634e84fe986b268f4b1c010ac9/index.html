<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何把Elasticsearch中的数据导出为CSV格式的文件 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何把Elasticsearch中的数据导出为CSV格式的文件" />
<meta property="og:description" content="前言| 本文结合用户实际需求用按照数据量从小到大的提供三种方式从ES中将数据导出成CSV形式。本文将重点介Kibana/Elasticsearch高效导出的插件、工具集，通过本文你可以了解如下信息：
1，从kibana导出数据到csv文件
2，logstash导出数据到csv文件
3，es2csv导出数据到csv文件
一、Kibana导出工具 步骤1：点击Kibana；
步骤2：左侧选择数据，筛选字段；点击save，保存并命名
保存字段数据
命名
步骤3：右侧点击：share-&gt;csv reports。 一般根据数据文件大小，会花费不同的时间
生成CSV文件
步骤4：菜单栏：选择Management-&gt;Reporting-&gt;下载
下载并打开已存的文件
注意：当然使用Kibana导出会出现如下几个问题：比如要下载的文件太大，在保存对象生成CSV文件的过程中会出现如下信息：
下载的数据文件太大
如果在下载的时候出现这个问题，需要改一下Kibana配置文件，这个时候需要联系腾讯云售后给与支持。
修改kibana配置文件
当然，我们也可以使用kibana将一些其它保存在导航图的的对象下载下来，在Dashboard的右上角点击Inspect，再点击就可以导出对应可视化报表对应的数据。如下
导出可视化报表对应的数据
总结：kibana导出数据到CSV文件图形化操作方便快捷，但是操作数据不能太大，适合操作一些小型数据的导出。
二、使用logstash导出ES数据成CSV文件 步骤一：安装与ES对应版本的logstash，一般安装完后，默认就集成了logstash-output-csv插件
查看此插件
显然logstash-ouput-csv是在列表中。也就是说我们logstash支持csv格式的输出。我们建立如下的Logstash的配置文件：
定义Logstash事件配置文件
请注意上面的path需要自己去定义时候自己环境的路径。这里我们在fields里定义了我们想要的字段。通过如下命令启动logstash服务 ../bin/logstash -f ../path/convert_csv.conf
结论：Logstash不只光可以把数据传上Elasticsearch，同时它还可以把数据从Elasticsearch中导出。适合大量数据的导出。但是导出时间也会根据数据的大小而长短不一。
三、使用es2csv导出ES数据成CSV文件 可以去官网了解一下这个工具，https://pypi.org/project/es2csv/
用python编写的命令行数据导出程序，适合大量数据的同步导出，速度和效率都比较快。
安装这个过程参考上面的官方链接，如果出现无法安装pip命令，可以参考此链接：
https://www.cnblogs.com/wujf-myblog/p/9644278.html
具体的参数详解可以参考此链接：https://www.kutu66.com/GitHub/article_133864
常用参数如下：
-i 索引名
-q query dsl
-a 认证信息 格式：user: password
-u esurl 格式： http://ip:9200
-o 命名
-r qurey formated
具体执行一个命令操作一下：如下：
es2csv文件格式
因此，执行成功后，就回出现进度条的显示信息。如上图所示。
四、总结 以上3种方法是常见的ES导出到CSV文件的方法，实际工作中使用也比较广泛。大家可以多尝试。当然。elasticsearch-dump也能导，但是比较小众，相当于Mysqldump指令。如果要将ES导出到json格式可以使用它来进行操作，这里就不多说。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f09cc0634e84fe986b268f4b1c010ac9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-20T15:22:22+08:00" />
<meta property="article:modified_time" content="2023-10-20T15:22:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何把Elasticsearch中的数据导出为CSV格式的文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="7i1n6">前言|</h2> 
<p>本文结合用户实际需求用按照数据量从小到大的提供三种方式从ES中将数据导出成CSV形式。本文将重点介Kibana/<a href="https://cloud.tencent.com/product/es?from_column=20065&amp;from=20065" rel="nofollow" title="Elasticsearch">Elasticsearch</a>高效导出的插件、工具集，通过本文你可以了解如下信息：</p> 
<p>1，从kibana导出数据到csv文件</p> 
<p>2，logstash导出数据到csv文件</p> 
<p>3，es2csv导出数据到csv文件</p> 
<h3 id="3j5dv">一、<strong>Kibana导出工具</strong></h3> 
<p>步骤1：点击Kibana；</p> 
<p>步骤2：左侧选择数据，筛选字段；点击save，保存并命名</p> 
<p></p> 
<p class="img-center"><img alt="保存字段数据" height="360" src="https://images2.imgbox.com/9e/a5/ncsB2VSN_o.png" width="1200"></p> 
<p>保存字段数据</p> 
<p></p> 
<p class="img-center"><img alt="命名" height="268" src="https://images2.imgbox.com/51/0d/vF3mfeT5_o.png" width="401"></p> 
<p>命名</p> 
<p>步骤3：右侧点击：share-&gt;csv reports。 一般根据数据文件大小，会花费不同的时间</p> 
<p></p> 
<p class="img-center"><img alt="生成CSV文件" height="358" src="https://images2.imgbox.com/fa/f0/ngoxBPRX_o.png" width="1088"></p> 
<p>生成CSV文件</p> 
<p>步骤4：菜单栏：选择Management-&gt;Reporting-&gt;下载</p> 
<p></p> 
<p class="img-center"><img alt="下载并打开已存的文件" height="663" src="https://images2.imgbox.com/6a/e7/NADtU78v_o.png" width="1200"></p> 
<p>下载并打开已存的文件</p> 
<p><strong>注意：</strong>当然使用Kibana导出会出现如下几个问题：比如要下载的文件太大，在保存对象生成CSV文件的过程中会出现如下信息：</p> 
<p></p> 
<p class="img-center"><img alt="下载的数据文件太大" height="94" src="https://images2.imgbox.com/ef/ed/1YtBCLQz_o.png" width="217"></p> 
<p>下载的数据文件太大</p> 
<p>如果在下载的时候出现这个问题，需要改一下Kibana配置文件，这个时候需要联系腾讯云售后给与支持。</p> 
<p></p> 
<p class="img-center"><img alt="修改kibana配置文件" height="142" src="https://images2.imgbox.com/36/33/f2PgNuES_o.png" width="331"></p> 
<p>修改kibana配置文件</p> 
<p>当然，我们也可以使用kibana将一些其它保存在导航图的的对象下载下来，在Dashboard的右上角点击Inspect，再点击就可以导出对应可视化<a href="https://cloud.tencent.com/product/bi?from_column=20065&amp;from=20065" rel="nofollow" title="报表">报表</a>对应的数据。如下</p> 
<p></p> 
<p class="img-center"><img alt="导出可视化报表对应的数据" height="599" src="https://images2.imgbox.com/ee/89/jCSyrYFz_o.png" width="1200"></p> 
<p>导出可视化报表对应的数据</p> 
<p><strong>总结</strong>：kibana导出数据到CSV文件图形化操作方便快捷，但是操作数据不能太大，适合操作一些小型数据的导出。</p> 
<p></p> 
<h3 id="3f4gr">二、使用logstash导出ES数据成CSV文件</h3> 
<p>步骤一：安装与ES对应版本的logstash，一般安装完后，默认就集成了logstash-output-csv插件</p> 
<p></p> 
<p class="img-center"><img alt="查看此插件" height="465" src="https://images2.imgbox.com/ce/36/jRVtnb4g_o.png" width="815"></p> 
<p>查看此插件</p> 
<p>显然logstash-ouput-csv是在列表中。也就是说我们logstash支持csv格式的输出。我们建立如下的Logstash的配置文件：</p> 
<p></p> 
<p class="img-center"><img alt="定义Logstash事件配置文件" height="562" src="https://images2.imgbox.com/03/70/7ftYIytw_o.png" width="526"></p> 
<p>定义Logstash事件配置文件</p> 
<p>请注意上面的path需要自己去定义时候自己环境的路径。这里我们在fields里定义了我们想要的字段。通过如下命令启动logstash服务 ../bin/logstash -f ../path/convert_csv.conf</p> 
<p><strong>结论</strong>：Logstash不只光可以把数据传上Elasticsearch，同时它还可以把数据从Elasticsearch中导出。适合大量数据的导出。但是导出时间也会根据数据的大小而长短不一。</p> 
<h3 id="b5i81">三、使用<strong>es2csv</strong>导出ES数据成CSV文件</h3> 
<p>可以去官网了解一下这个工具，<a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fpypi.org%2Fproject%2Fes2csv%2F" rel="nofollow" title="https://pypi.org/project/es2csv/">https://pypi.org/project/es2csv/</a></p> 
<p>用python编写的命令行数据导出程序，适合大量数据的同步导出，速度和效率都比较快。</p> 
<p>安装这个过程参考上面的官方链接，如果出现无法安装pip命令，可以参考此链接：</p> 
<p><a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fwww.cnblogs.com%2Fwujf-myblog%2Fp%2F9644278.html" rel="nofollow" title="https://www.cnblogs.com/wujf-myblog/p/9644278.html">https://www.cnblogs.com/wujf-myblog/p/9644278.html</a></p> 
<p>具体的参数详解可以参考此链接：<a href="https://cloud.tencent.com/developer/tools/blog-entry?target=https%3A%2F%2Fwww.kutu66.com%2FGitHub%2Farticle_133864" rel="nofollow" title="https://www.kutu66.com/GitHub/article_133864">https://www.kutu66.com/GitHub/article_133864</a></p> 
<p>常用参数如下：</p> 
<p>-i 索引名</p> 
<p>-q query dsl</p> 
<p>-a 认证信息 格式：user: password</p> 
<p>-u esurl 格式： http://ip:9200</p> 
<p>-o 命名</p> 
<p>-r qurey formated</p> 
<p>具体执行一个命令操作一下：如下：</p> 
<p></p> 
<p class="img-center"><img alt="es2csv文件格式" height="118" src="https://images2.imgbox.com/33/bf/46SUPiUc_o.png" width="1200"></p> 
<p>es2csv文件格式</p> 
<p>因此，执行成功后，就回出现进度条的显示信息。如上图所示。</p> 
<h3 id="dksn1">四、总结</h3> 
<p>以上3种方法是常见的ES导出到CSV文件的方法，实际工作中使用也比较广泛。大家可以多尝试。当然。elasticsearch-dump也能导，但是比较小众，相当于Mysqldump指令。如果要将ES导出到json格式可以使用它来进行操作，这里就不多说。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/775faf3e4fac01d61b083e37ba503c05/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Improving Image Generation with Better Captions</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2dfeba7731a482542f647eb8074c5710/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">云上智能驾驶三维重建最佳实践</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
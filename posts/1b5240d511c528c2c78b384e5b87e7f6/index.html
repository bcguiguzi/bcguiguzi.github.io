<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【问题解决】如何将json字符串转为List - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【问题解决】如何将json字符串转为List" />
<meta property="og:description" content="关于json字符串的处理 注：这是我通过接口远程调度得到的json字符串。
{ &#34;code&#34;:0, &#34;message&#34;:&#34;ok&#34;, &#34;data&#34;:[ { &#34;stationId&#34;:54416, &#34;localDate&#34;:&#34;2021-04-11T16:00:00.000&#43;00:00&#34;, &#34;temAvgDay&#34;:3.1125, &#34;temMaxDay&#34;:7.4, &#34;temMinDay&#34;:0, &#34;winMax&#34;:1.8, &#34;totalPrecip&#34;:0 }, { &#34;stationId&#34;:54416, &#34;localDate&#34;:&#34;2021-04-12T16:00:00.000&#43;00:00&#34;, &#34;temAvgDay&#34;:12.04, &#34;temMaxDay&#34;:16.4, &#34;temMinDay&#34;:5.6, &#34;winMax&#34;:4.7, &#34;totalPrecip&#34;:0 } ] } ​ 在远程调度接口的时候，接口返回我们这一个json字符串。这时候我们需要提取出这个json字符串中的data数据，在事前我们已经写了一个这样的类对象，用于存储这里面的相关系，但是这之间应该如何操作呢？
​ 首先，这返回的是一个json字符串，我是无法对其进行操作的。所以第一步我们应该将这个json字符串转为json对象。
//getDataInfo() 这个是我远程调度接口的方法，这里不做详细展示 JSONObject jsonObject = (JSONObject) getDataInfo(match.getStationId()).getData(); ​
​ 在转成json对象过后我们就可以去取里面的值了，完成数据的定向获取。这里用一个JSONArray数组来接收。
JSONArray data = jsonObject.getJSONArray(&#34;data&#34;); ​
​ 虽然拿到了这个数据，但是我们无法获取这一条一条数据中的具体属性，因为java虽然知道这是一个数组，但是也仅仅是一个数组，不知道他里面到底有什么。于是我们希望将这个JSONArray转为我们实现写好的DataInfo类的List，这样我们就可以去获取其中的属性了。
//JSONArray 转 List List&lt;Station&gt; list = JSONArray.parseArray(data.toJSONString(),DataInfo.class); 如此一来，我们就将这json字符串转为了我们写好的可操作的类对象List了。
但是我们虽然把这个数据进行处理了，但是我们想让他按照时间顺序排个序，不然这个无序的排列着实的让人不爽（强迫症患者= =）。
调用Collections.sort(List list, Comparator&lt;? super T&gt; c)方法
//重写 sort比较方法 Collections.sort(list, new Comparator&lt;DataInfo&gt;() { @Override public int compare(DataInfo o1, DataInfo o2) { return o2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/1b5240d511c528c2c78b384e5b87e7f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-19T15:48:47+08:00" />
<meta property="article:modified_time" content="2021-04-19T15:48:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【问题解决】如何将json字符串转为List</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="json_0"></a>关于json字符串的处理</h2> 
<p>注：这是我通过接口远程调度得到的json字符串。</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"code"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token string">"message"</span><span class="token punctuation">:</span><span class="token string">"ok"</span><span class="token punctuation">,</span>
    <span class="token string">"data"</span><span class="token punctuation">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"stationId"</span><span class="token punctuation">:</span><span class="token number">54416</span><span class="token punctuation">,</span>
            <span class="token string">"localDate"</span><span class="token punctuation">:</span><span class="token string">"2021-04-11T16:00:00.000+00:00"</span><span class="token punctuation">,</span>
            <span class="token string">"temAvgDay"</span><span class="token punctuation">:</span><span class="token number">3.1125</span><span class="token punctuation">,</span>
            <span class="token string">"temMaxDay"</span><span class="token punctuation">:</span><span class="token number">7.4</span><span class="token punctuation">,</span>
            <span class="token string">"temMinDay"</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">"winMax"</span><span class="token punctuation">:</span><span class="token number">1.8</span><span class="token punctuation">,</span>
            <span class="token string">"totalPrecip"</span><span class="token punctuation">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"stationId"</span><span class="token punctuation">:</span><span class="token number">54416</span><span class="token punctuation">,</span>
            <span class="token string">"localDate"</span><span class="token punctuation">:</span><span class="token string">"2021-04-12T16:00:00.000+00:00"</span><span class="token punctuation">,</span>
            <span class="token string">"temAvgDay"</span><span class="token punctuation">:</span><span class="token number">12.04</span><span class="token punctuation">,</span>
            <span class="token string">"temMaxDay"</span><span class="token punctuation">:</span><span class="token number">16.4</span><span class="token punctuation">,</span>
            <span class="token string">"temMinDay"</span><span class="token punctuation">:</span><span class="token number">5.6</span><span class="token punctuation">,</span>
            <span class="token string">"winMax"</span><span class="token punctuation">:</span><span class="token number">4.7</span><span class="token punctuation">,</span>
            <span class="token string">"totalPrecip"</span><span class="token punctuation">:</span><span class="token number">0</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>​ 在远程调度接口的时候，接口返回我们这一个json字符串。这时候我们需要提取出这个json字符串中的data数据，在事前我们已经写了一个这样的类对象，用于存储这里面的相关系，但是这之间应该如何操作呢？</p> 
<p>​ 首先，这返回的是一个json字符串，我是无法对其进行操作的。所以第一步我们应该将这个json字符串转为json对象。</p> 
<pre><code class="prism language-java"><span class="token comment">//getDataInfo() 这个是我远程调度接口的方法，这里不做详细展示</span>
JSONObject jsonObject <span class="token operator">=</span> <span class="token punctuation">(</span>JSONObject<span class="token punctuation">)</span> <span class="token function">getDataInfo</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">getStationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>​</p> 
<p>​ 在转成json对象过后我们就可以去取里面的值了，完成数据的定向获取。这里用一个JSONArray数组来接收。</p> 
<pre><code class="prism language-java">JSONArray data <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getJSONArray</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>​</p> 
<p>​ 虽然拿到了这个数据，但是我们无法获取这一条一条数据中的具体属性，因为java虽然知道这是一个数组，但是也仅仅是一个数组，不知道他里面到底有什么。于是我们希望将这个JSONArray转为我们实现写好的DataInfo类的List，这样我们就可以去获取其中的属性了。</p> 
<pre><code class="prism language-java"><span class="token comment">//JSONArray 转 List</span>
List<span class="token generics function"><span class="token punctuation">&lt;</span>Station<span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> JSONArray<span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>DataInfo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>如此一来，我们就将这json字符串转为了我们写好的可操作的类对象List了。</p> 
<p>但是我们虽然把这个数据进行处理了，但是我们想让他按照时间顺序排个序，不然这个无序的排列着实的让人不爽（强迫症患者= =）。</p> 
<p>调用Collections.sort(List list, Comparator&lt;? super T&gt; c)方法</p> 
<pre><code class="prism language-java"><span class="token comment">//重写 sort比较方法</span>
Collections<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics function"><span class="token punctuation">&lt;</span>DataInfo<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span>DataInfo o1<span class="token punctuation">,</span> DataInfo o2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> o2<span class="token punctuation">.</span><span class="token function">getLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>o1<span class="token punctuation">.</span><span class="token function">getLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>完整代码</p> 
<pre><code class="prism language-java">JSONObject jsonObject <span class="token operator">=</span> <span class="token punctuation">(</span>JSONObject<span class="token punctuation">)</span> <span class="token function">getDataInfo</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">getStationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  JSONArray data <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getJSONArray</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//JSONArray 转 List</span>
  List<span class="token generics function"><span class="token punctuation">&lt;</span>Station<span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> JSONArray<span class="token punctuation">.</span><span class="token function">parseArray</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Station<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//根据传入的时间进行降序排布</span>
  Collections<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics function"><span class="token punctuation">&lt;</span>DataInfo<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span>DataInfo o1<span class="token punctuation">,</span> DataInfo o2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> o2<span class="token punctuation">.</span><span class="token function">getLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>o1<span class="token punctuation">.</span><span class="token function">getLocalDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这波操作下来，我们就完成了对json字符串 → json对象 → List → 排序后List。</p> 
<p>妈妈再也不用担心我处理数据难受了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/80637609f807db53f78e813f37717b16/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">RocketMQ入门-RocketMQ批量消息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03d675052e8d393adf4938a178da47e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于 $ Super $ $  和 $ Sub $ $ 的用法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
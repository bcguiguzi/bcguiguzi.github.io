<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>appium测试遇到的问题总结 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="appium测试遇到的问题总结" />
<meta property="og:description" content="1、Could not sign with default certificate. Original error: Could not sign with default certificate. Original error Command &#39;&#39;E:\Program Files (x86)\Java\jdk1.8.0_45\bin\java.exe&#39; -jar &#39;
C:\Program Files (x86)\Appium\resources\app\node_modules\appium-adb\jars\sign.jar&#39; &#39;
C:\Program Files (x86)\Appium\resources\app\node_modules\appium-uiautomator2-server\apks\appium-uiautomator2-server-debug-androidTest.apk
&#39; --override&#39; exited with code 1
解决办法
通过日志，查到apk的文件路径中存在该apk，通过升级appium_desktop （cmd命令：npm update -g appium ）,后重新运行，依旧会出现这个提示
以管理员身份运行该软件后解决该问题：右键appium图标，以管理员运行，然后就解决了
2、adb检测不到设备 解决：
1.检查手机驱动是否安装（win10系统不需要），去官网下载手机驱动或者电脑下载手机助手来辅助安装手机驱动，安装完成后卸载手机助手（防止接入手机时抢adb端口造成干扰）
2.打开手机设置，进入开发者选项，打开USB调试功能
3.重新插拔手机USB，选择接受调试，接受验证指纹
3、adb安装应用提示权限不够 解决：部分安卓手机开发者选项需要修改USB调试
把红色画圈的设置都打开
蓝色花圈的设置关闭
4、代码报错：找不到连接的安卓设备 解决：检查代码中平台版本号是否填写正确
5、出现class not found这种java堆栈错误的现象 SWT folder &#39;..\lib\location of your Java installation.&#39; does not exist.
Please set ANDROID_SWT to point to the folder containing swt." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f2851c57fb6cee0643d8e4d2061a587f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-14T21:43:04+08:00" />
<meta property="article:modified_time" content="2021-03-14T21:43:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">appium测试遇到的问题总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>1、Could not sign with default certificate.</strong></h2> 
<p>Original error: Could not sign with default certificate. <br> Original error Command ''E:\Program Files (x86)\Java\jdk1.8.0_45\bin\java.exe' -jar '<br> C:\Program Files (x86)\Appium\resources\app\node_modules\appium-adb\jars\sign.jar' '<br> C:\Program Files (x86)\Appium\resources\app\node_modules\appium-uiautomator2-server\apks\appium-uiautomator2-server-debug-androidTest.apk<br> ' --override' exited with code 1</p> 
<p><strong>解决办法</strong></p> 
<ol><li> <p>通过日志，查到apk的文件路径中存在该apk，通过升级appium_desktop （cmd命令：npm update -g appium ）,后重新运行，依旧会出现这个提示</p> </li><li> <p>以管理员身份运行该软件后解决该问题：右键appium图标，以管理员运行，然后就解决了<img alt="" height="562" src="https://images2.imgbox.com/44/bb/3cnbfHhG_o.png" width="1200"></p> </li></ol> 
<h2>2、<span style="color:#676a6c;"><strong>adb</strong></span><span style="color:#676a6c;"><strong>检测不到设备</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>解决：</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>1.检查手机驱动是否安装（win10系统不需要），去官网下载手机驱动或者电脑下载手机助手来辅助安装手机驱动，安装完成后卸载手机助手（防止接入手机时抢adb端口造成干扰）</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>2.打开手机设置，进入开发者选项，打开USB调试功能</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>3.重新插拔手机USB，选择接受调试，接受验证指纹</strong></span></p> 
<p style="margin-left:0px;"> </p> 
<h2 style="margin-left:0px;"><span style="color:#676a6c;"><strong>3、</strong></span><span style="color:#676a6c;"><strong>adb安装应用提示权限不够</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>解决：部分安卓手机开发者选项需要修改USB调试</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>把<span style="color:#ff0000;">红色</span>画圈的设置都<strong>打开</strong></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><span style="color:#0070c0;">蓝色</span>花圈的设置<strong>关闭</strong></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><strong><img alt="" src="https://images2.imgbox.com/87/aa/rDmunVqe_o.png" width="441"><img alt="" src="https://images2.imgbox.com/b6/7a/OgXUxSsC_o.png" width="429"></strong></strong></span></p> 
<h2 style="margin-left:0px;"><span style="color:#676a6c;"><strong>4、</strong></span><span style="color:#676a6c;"><strong>代码报错：找不到连接的安卓设备</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>解决：检查代码中平台版本号是否填写正确</strong></span></p> 
<p style="margin-left:0px;"> </p> 
<h2 style="margin-left:0px;"><span style="color:#676a6c;">5、</span><span style="color:#676a6c;"><strong>出现class not found这种java堆栈错误的现象</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>SWT folder '..\lib\location of your Java installation.' does not exist.<br> Please set ANDROID_SWT to point to the folder containing swt.jar for your platform.</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>比如：</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><img alt="" src="https://images2.imgbox.com/bb/ff/7cVSdK42_o.png" width="554"></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>解决：基本上是JDK没装正确版本或者环境变量配置混乱，标准的环境变量配置方法如下</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><img alt="" src="https://images2.imgbox.com/9f/88/j5G2OCVo_o.png" width="605"></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>首先这两个必须有</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><img alt="" src="https://images2.imgbox.com/c9/38/V7Q9LDth_o.png" width="510"></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>其次，jdk环境变量配置到这里就可以了</strong></span></p> 
<p style="margin-left:0px;"> </p> 
<h2 style="margin-left:0px;"><span style="color:#676a6c;"><strong>6、</strong></span><span style="color:#676a6c;"><strong>部分手机已经运行过一次appium脚本，手机上已经安装过ui2驱动，但是每次执行的时候仍然会提示是否安装UI2，如图</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><img alt="" height="1200" src="https://images2.imgbox.com/d5/bd/yvoa75ys_o.png" width="761"></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>这个问题的原因是，只要设置了自动化的驱动为UI2那么appium再每次运行测试脚本的时候都默认的重新安装一下UI2到手机上，</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>要解决这个问题可以参考问题3，设置相关权限，再进行运行一次看下是否还会提示。</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>如果还有提示可以在代码的配置项中再增加一个配置，跳过UI2的安装：</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><span style="color:#c7254e;">skipServerInstallation </span><span style="color:#c7254e;">设置为True</span></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>该配置项配合UI2使用的，也就是说配置项指定了<span style="color:#c7254e;">automationName  </span><span style="color:#c7254e;">为 </span><span style="color:#c7254e;">UiAutomator2</span></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>或者使用的是appium1.15版本以上可以添加这个配置。</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><strong>注意：如果你手机没有装U</strong><strong>I2</strong><strong>或者想重新装一次，就不要加这个配置项</strong></strong></span></p> 
<h2 style="margin-left:0px;">7、<span style="color:#676a6c;"><strong>运行代码提示找不到ADB，如</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>An unknown server-side error occurred while processing the command. Original error: Could not find 'adb.exe' in PATH. Please set the ANDROID_HOME environment variable with the Android SDK root directory path.</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>检查下ANDROID_HOME环境变量是否正确配置，配置好之后重启下appium和pycharm 命令行等相关工具</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>可以通过appium-desktop查看环境变量是否正确配置，若正确配置可以在程序中正确回显你配置的环境变量。</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><img alt="" src="https://images2.imgbox.com/bc/62/apwTPHmi_o.png" width="1043"></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>如果你这里出现的是空白页面，那么建议你重新配置，或者直接把对应的路径填上去，然后save and restart</strong></span></p> 
<p style="margin-left:0px;"> </p> 
<h2 style="margin-left:0px;"><span style="color:#676a6c;"><strong>8、</strong></span><span style="color:#676a6c;"><strong>运行时代码报错：</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>selenium.common.exceptions.WebDriverException: Message: An unknown server-side error occurred while processing the command. Original error: <span style="color:#ff0000;">Could not sign with default certificate</span>. Original error Command ''C:\\Program Files\\Java\\jdk1.8.0_131\\bin\\java.exe' -jar 'C:\\Program Files\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-adb\\jars\\sign.jar' 'C:\\Program Files\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-debug-androidTest.apk' --override' exited with code 1</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>该问题主要是证书签名错误，猜测是用了新版appium装了驱动之后，又换成旧版本的appium这个时候会出现两者的签名证书不一致导致认证错误。</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>解决办法就是把appium-desktop换成新的</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>或者进入设备-应用管理-搜索appium相关程序，手动卸载掉再执行一遍脚本</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>备注：解决不了的话用方法一</strong></span></p> 
<h2 style="margin-left:0px;"><span style="color:#676a6c;"><strong>9、</strong></span><span style="color:#676a6c;"><strong>执行代码报错</strong></span></h2> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong><img alt="" src="https://images2.imgbox.com/10/31/rTNl7Hgx_o.png" width="1036"></strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>该问题并不常见，主要是手机操作系统的问题</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>程序无法无法自动打开appiumsettings，那么我们可以手动打开appiumsettings服务（程序没有界面，会出现打开就闪退的错觉，这是正常现象）</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>然后再运行脚本</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>如果觉得此方法麻烦，那就只能更新系统或者更换手机解决了。。</strong></span></p> 
<p style="margin-left:0px;"><span style="color:#676a6c;"><strong>参考链接：</strong></span><a href="http://vip.ytesting.com/qa01Controller.do?qa01Article&amp;id=ff808081715a868601715dd9edc3010a" rel="nofollow">http://vip.ytesting.com/qa01Controller.do?qa01Article&amp;id=ff808081715a868601715dd9edc3010a</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a420a5a5a87810d0533039925c0b5117/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">我的面试总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/af7746ee93f8c2be23e6d3abb1c4bdc6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">latex 引用公式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>solidity教程（一）搭建僵尸工厂 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="solidity教程（一）搭建僵尸工厂" />
<meta property="og:description" content="title: solidity教程（一）基础
tags: solidity,eth
声明：本系列教程是整理cryptozombies
https://cryptozombies.io/zh而来。
人类，欢迎你
你认为你可以当一个合格的 CryptoZombie, 嗯？
这个教程会教你如何搭建一个以太网的游戏。
此课程为 Solidity 初学者设计，需要你对其他的程序语言有所了解（如 JavaScript)。
少年，准备开始了吗?
第1章: 课程概述 第一课你将创造一个&#34;僵尸工厂&#34;， 用它建立一支僵尸部队。
我们的工厂会把我们部队中所有的僵尸保存到数据库中工厂会有一个函数能产生新的僵尸每个僵尸会有一个随机的独一无二的面孔
在后面的课程里，我们会增加功能。比如，让僵尸能攻击人类或其它僵尸! 但是在实现这些好玩的功能之前，我们先要实现创建僵尸这样的基本功能。 僵尸DNA如何运作
僵尸的面孔取决于它的DNA。它的DNA很简单，由一个16位的整数组成：
8356281049284737
如同真正的DNA, 这个数字的不同部分会对应不同的特点。 前2位代表头型，紧接着的2位代表眼睛，等等。
注: 本教程我们尽量简化。我们的僵尸只有7种头型(虽然2位数字允许100种可能性)。以后我们会加入更多的头型, 如果我们想让僵尸有更多造型。
例如，前两位数字是 83， 计算僵尸的头型，我们做83 % 7 &#43; 1 = 7 运算， 此僵尸将被赋予第七类头型。
第2章: 合约 从最基本的开始入手:
Solidity 的代码都包裹在合约里面. 一份合约就是以太应币应用的基本模块， 所有的变量和函数都属于一份合约, 它是你所有应用的起点.
一份名为 HelloWorld 的空合约如下:
contract HelloWorld { } 版本指令 所有的 Solidity 源码都必须冠以 “version pragma” — 标明 Solidity 编译器的版本. 以避免将来新的编译器可能破坏你的代码。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6283085b9a50ccf6aff01c0421010de8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-19T20:36:19+08:00" />
<meta property="article:modified_time" content="2018-10-19T20:36:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">solidity教程（一）搭建僵尸工厂</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <hr> 
<p>title: solidity教程（一）基础<br> tags: solidity,eth</p> 
<p>声明：本系列教程是整理cryptozombies</p> 
<blockquote> 
 <p><a href="https://cryptozombies.io/zh%E8%80%8C%E6%9D%A5%E3%80%82" rel="nofollow">https://cryptozombies.io/zh而来。</a></p> 
</blockquote> 
<hr> 
<p>人类，欢迎你<br> 你认为你可以当一个合格的 CryptoZombie, 嗯？</p> 
<p>这个教程会教你如何搭建一个以太网的游戏。</p> 
<p>此课程为 Solidity 初学者设计，需要你对其他的程序语言有所了解（如 JavaScript)。</p> 
<p>少年，准备开始了吗?</p> 
<h2><a id="1__20"></a>第1章: 课程概述</h2> 
<p>第一课你将创造一个"僵尸工厂"， 用它建立一支僵尸部队。</p> 
<ul><li>我们的工厂会把我们部队中所有的僵尸保存到数据库中</li><li>工厂会有一个函数能产生新的僵尸</li><li>每个僵尸会有一个随机的独一无二的面孔<br> 在后面的课程里，我们会增加功能。比如，让僵尸能攻击人类或其它僵尸! 但是在实现这些好玩的功能之前，我们先要实现创建僵尸这样的基本功能。</li></ul> 
<p>僵尸DNA如何运作<br> 僵尸的面孔取决于它的DNA。它的DNA很简单，由一个16位的整数组成：</p> 
<blockquote> 
 <p>8356281049284737</p> 
</blockquote> 
<p>如同真正的DNA, 这个数字的不同部分会对应不同的特点。 前2位代表头型，紧接着的2位代表眼睛，等等。</p> 
<p>注: 本教程我们尽量简化。我们的僵尸只有7种头型(虽然2位数字允许100种可能性)。以后我们会加入更多的头型, 如果我们想让僵尸有更多造型。</p> 
<p>例如，前两位数字是 83， 计算僵尸的头型，我们做83 % 7 + 1 = 7 运算， 此僵尸将被赋予第七类头型。</p> 
<h2><a id="2__38"></a>第2章: 合约</h2> 
<p>从最基本的开始入手:</p> 
<p>Solidity 的代码都包裹在<strong>合约</strong>里面. 一份<code>合约</code>就是以太应币应用的基本模块， 所有的变量和函数都属于一份合约, 它是你所有应用的起点.</p> 
<p>一份名为 <code>HelloWorld</code> 的空合约如下:</p> 
<pre><code>contract HelloWorld {

}

</code></pre> 
<h3><a id="_53"></a>版本指令</h3> 
<p>所有的 Solidity 源码都必须冠以 “version pragma” — 标明 Solidity 编译器的版本. 以避免将来新的编译器可能破坏你的代码。</p> 
<p>例如: <code>pragma solidity ^0.4.19;</code> (当前 Solidity 的最新版本是 0.4.19).</p> 
<p>综上所述， 下面就是一个最基本的合约 — 每次建立一个新的项目时的第一段代码:</p> 
<pre><code>pragma solidity ^0.4.19;

contract HelloWorld {

}

</code></pre> 
<h2><a id="_70"></a>实战演习</h2> 
<p>为了建立我们的僵尸部队， 让我们先建立一个基础合约，称为 <code>ZombieFactory</code>。</p> 
<ol><li> <p>在右边的输入框里输入 <code>0.4.19</code>，我们的合约基于这个版本的编译器。</p> </li><li> <p>建立一个空合约 <code>ZombieFactory</code>。</p> </li></ol> 
<p>一切完毕，点击下面 “答案” . 如果没效果，点击 “提示”。</p> 
<p><strong>答案：</strong></p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="3__89"></a>第3章: 状态变量</h2> 
<p>我们已经实现了一个空合约， 下面学习 Solidity 中如何使用变量。<br> 状态变量是被永久地保存在合约中。也就是说它们被写入以太币区块链中. 想象成写入一个数据库。</p> 
<p>Solidity的变量类型：</p> 
<ul><li>值类型 ：这类变量在赋值或传参时，总是进行值拷贝。 
  <ul><li>布尔类型(Booleans)</li><li>整型(Integers)</li><li>定长浮点型(Fixed Point Numbers)</li><li>定长字节数组(Fixed-size byte arrays)</li><li>有理数和整型常量(Rational and Integer Literals)</li><li>字符串常量（String literals）</li><li>十六进制常量（Hexadecimal literals）</li><li>枚举(Enums)</li><li>函数类型(Function Types)</li><li>地址类型(Address)</li><li>地址常量(Address Literals)</li><li>函数类型及地址类型(Address)</li></ul> </li><li>引用类型 ：这里变量在赋值或传参时，传递的是地址。 
  <ul><li>数组(Arrays)</li><li>结构体(Structs)</li></ul> </li></ul> 
<p>虽然列举了很多，但是本文涉及计部分简单类型。所以有不懂的小伙伴们不要害怕，以后会慢慢深入讲解的。</p> 
<h3><a id="_113"></a>例子:</h3> 
<pre><code class="prism language-js">contract Example <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 这个无符号整数将会永久的被保存在区块链中</span>
  string name <span class="token operator">=</span><span class="token string">"Jay"</span><span class="token punctuation">;</span>
  uint  age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>
 
<span class="token punctuation">}</span>
</code></pre> 
<p>在上面的例子中，定义name为string类型，并赋值为“Jay”和age 为 uint 类型，并赋值25。</p> 
<p>字符串类型：string<br> string字符串用于保存任意长度的 UTF-8 编码数据。 如： string greeting = “Hello world!”。<br> 无符号整数: uint<br> uint 无符号数据类型， 指其值不能是负数，对于有符号的整数存在名为 int 的数据类型。</p> 
<p>注: Solidity中， uint 实际上是 uint256代名词， 一个256位的无符号整数。你也可以定义位数少的uints — uint8， uint16， uint32 等，但一般来讲我们都使用简单的 uint。如果使用到其他的我后面会讲。<br> 保存字符我们也可以选择使用bytes类型，这个类型我们以后会讲。</p> 
<h3><a id="_133"></a>实战演习</h3> 
<p>我们的僵尸DNA将由一个十六位数字组成。</p> 
<ul><li>定义 dnaDigits 为 uint 数据类型, 并赋值 16。</li></ul> 
<p><strong>答案：</strong></p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>
	<span class="token comment">//插入代码</span>
   uint dnaDigits <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>注意： 变量直接声明在合约中，是不可直接变更的。</p> 
<h2><a id="4__150"></a>第4章: 数学运算</h2> 
<p>在 Solidity 中，数学运算很直观明了，与其它程序设计语言相同:</p> 
<ul><li>加法: x + y</li><li>减法: x - y,</li><li>乘法: x * y</li><li>除法: x / y</li><li>取模 / 求余: x % y (例如, 13 % 5 余 3, 因为13除以5，余3)</li><li>次方:x ** y (x 的 y次方 // 例如： 5 ** 2 = 25）</li></ul> 
<p>uint x = 5 ** 2; // equal to 5^2 = 25</p> 
<h3><a id="_162"></a>实战演习</h3> 
<p>为了保证我们的僵尸的DNA只含有16个字符，我们先造一个uint数据，让它等于10^16。这样一来以后我们可以用模运算符 % 把一个整数变成16位。</p> 
<ul><li>建立一个uint类型的变量，名字叫dnaModulus, 令其等于 10 的 dnaDigits 次方.</li></ul> 
<p><strong>答案：</strong><br> pragma solidity ^0.4.19;</p> 
<p>contract ZombieFactory {<!-- --></p> 
<pre><code>uint dnaDigits = 16;
uint dnaModulus = 10 ** dnaDigits;
</code></pre> 
<p>}</p> 
<h2><a id="5__177"></a>第5章: 结构体</h2> 
<p>有时你需要更复杂的数据类型，Solidity 提供了 <strong>结构体</strong>:</p> 
<pre><code class="prism language-js">struct Person <span class="token punctuation">{<!-- --></span>
  uint age<span class="token punctuation">;</span>
  string name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结构体允许你生成一个更复杂的数据类型，它有多个属性。</p> 
<blockquote> 
 <p>注：我们刚刚引进了一个新类型, <code>string</code>。 字符串用于保存任意长度的 UTF-8 编码数据。 如： <code>string greeting = "Hello world!"</code>。</p> 
</blockquote> 
<h2><a id="_194"></a>实战演习</h2> 
<p>在我们的程序中，我们将创建一些僵尸！每个僵尸将拥有多个属性，所以这是一个展示结构体的完美例子。</p> 
<ol><li> <p>建立一个 <code>struct</code> 命名为 <code>Zombie</code>.</p> </li><li> <p>我们的 <code>Zombie</code> 结构体有两个属性： <code>name</code> (类型为 <code>string</code>), 和 <code>dna</code> (类型为 <code>uint</code>)。</p> </li></ol> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>

    uint dnaDigits <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
    uint dnaModulus <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">**</span> dnaDigits<span class="token punctuation">;</span>
	<span class="token comment">//插入结构体</span>
    struct Zombie <span class="token punctuation">{<!-- --></span>
        string name<span class="token punctuation">;</span>
        uint dna<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre> 
<h2><a id="6__220"></a>第6章: 数组</h2> 
<p>如果你想建立一个集合，可以用 <strong><em>数组</em></strong> 这样的数据类型. Solidity 支持两种数组: <strong><em>静态</em></strong> 数组和 <strong><em>动态</em></strong> 数组:</p> 
<pre><code class="prism language-js"><span class="token comment">// 固定长度为2的静态数组:</span>
uint<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> fixedArray<span class="token punctuation">;</span>
<span class="token comment">// 固定长度为5的string类型的静态数组:</span>
string<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> stringArray<span class="token punctuation">;</span>
<span class="token comment">// 动态数组，长度不固定，可以动态添加元素:</span>
uint<span class="token punctuation">[</span><span class="token punctuation">]</span> dynamicArray<span class="token punctuation">;</span>
</code></pre> 
<p>你也可以建立一个 <strong><em>结构体</em></strong> 类型的数组 例如，上一章提到的 <code>Person</code>:</p> 
<pre><code class="prism language-js">Person<span class="token punctuation">[</span><span class="token punctuation">]</span> people<span class="token punctuation">;</span> <span class="token comment">// dynamic Array, we can keep adding to it</span>
</code></pre> 
<p>记住：状态变量被永久保存在区块链中。所以在你的合约中创建动态数组来保存成结构的数据是非常有意义的。</p> 
<h3><a id="_240"></a>公共数组</h3> 
<p>你可以定义 <code>public</code> 数组, Solidity 会自动创建 <strong><em>getter</em></strong> 方法. 语法如下:</p> 
<pre><code>        Person [] public people;
</code></pre> 
<p>其它的合约可以从这个数组读取数据（但不能写入数据），所以这在合约中是一个有用的保存公共数据的模式。</p> 
<h2><a id="_250"></a>实战演习</h2> 
<p>为了把一个僵尸部队保存在我们的APP里，并且能够让其它APP看到这些僵尸，我们需要一个公共数组。</p> 
<ol><li>创建一个数据类型为 <code>Zombie</code> 的结构体数组，用 <code>public</code> 修饰，命名为： <code>zombies</code>.</li></ol> 
<p><strong>答案：</strong><br> <mark>注意： 为了文章的简洁性，我用“…” 代表前面出现过的代码。</mark></p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>

    <span class="token operator">...</span>
    struct Zombie <span class="token punctuation">{<!-- --></span>
        string name<span class="token punctuation">;</span>
        uint dna<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//这里开始</span>
    Zombie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> zombies<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="7__275"></a>第7章: 定义函数</h2> 
<p>我们每天需要吃饭、睡觉等等一系列活动，而这一系列的活动在程序中叫做方法，或者函数，下面我们定一个吃汉堡的方法(函数)。<br> 在 Solidity 中函数定义的句法如下:<br> function eatHamburgers(string _name, uint _amount) {<!-- --></p> 
<p>}<br> 这是一个名为 eatHamburgers 的函数，它接受两个参数：一个 string类型的 和 一个 uint类型的。_name 代表着汉堡的品种，_amount代表我们吃的数量。现在函数内部还是空的。</p> 
<p>注：: 习惯上函数里的变量都是以“_”开头 (但不是硬性规定) 以区别全局变量。我们整个教程都会沿用这个习惯。</p> 
<p>我们的函数是用如下:<br> eatHamburgers(“vitalik”, 100);</p> 
<h3><a id="_288"></a>实战演习</h3> 
<p>在我们的应用里，我们要能创建一些僵尸，让我们写一个函数做这件事吧！</p> 
<p>建立一个函数 createZombie。 它有两个参数: _name (类型为string), 和 _dna (类型为uint)。<br> 暂时让函数空着——我们在后面会增加内容。</p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>

     <span class="token operator">...</span>
    Zombie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> zombies<span class="token punctuation">;</span>
    <span class="token comment">// 这里开始</span>
    <span class="token keyword">function</span> <span class="token function">createZombie</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> uint _dna<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="8__307"></a>第8章: 使用结构体和数组</h2> 
<h3><a id="_309"></a>创建新的结构体</h3> 
<p>还记得上个例子中的 <code>Person</code> 结构吗？</p> 
<pre><code class="prism language-js">struct Person <span class="token punctuation">{<!-- --></span>
  uint age<span class="token punctuation">;</span>
  string name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Person<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> people<span class="token punctuation">;</span>
</code></pre> 
<p>现在我们学习创建新的 <code>Person</code> 结构，然后把它加入到名为 <code>people</code> 的数组中.</p> 
<pre><code class="prism language-js"><span class="token comment">// 创建一个新的Person:</span>
Person satoshi <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token number">172</span><span class="token punctuation">,</span> <span class="token string">"Satoshi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将新创建的satoshi添加进people数组:</span>
people<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>satoshi<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>你也可以两步并一步，用一行代码更简洁:</p> 
<p><code>people.push(Person(16, "Vitalik"));</code></p> 
<blockquote> 
 <p>注： <code>array.push()</code> 在数组的 <strong>尾部</strong> 加入新元素 ，所以元素在数组中的顺序就是我们添加的顺序， 如:</p> 
</blockquote> 
<pre><code class="prism language-js">uint<span class="token punctuation">[</span><span class="token punctuation">]</span> numbers<span class="token punctuation">;</span>
numbers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
numbers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
numbers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// numbers is now equal to [5, 10, 15]</span>
</code></pre> 
<h3><a id="_346"></a>实战演习</h3> 
<p>让我们创建名为createZombie的函数来做点儿什么吧。</p> 
<ol><li>在函数体里新创建一个 <code>Zombie</code>， 然后把它加入 <code>zombies</code> 数组中。 新创建的僵尸的 <code>name</code> 和 <code>dna</code>，来自于函数的参数。</li><li>让我们用一行代码简洁地完成它。</li></ol> 
<p>我要看答案！ 交卷</p> 
<p><strong>答案：</strong></p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>
	<span class="token operator">...</span>
    Zombie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> zombies<span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">createZombie</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> uint _dna<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 这里开始</span>
        zombies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">Zombie</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> _dna<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="9____369"></a>第9章: 私有 / 公共函数</h2> 
<p>Solidity 定义的函数的属性默认为公共（public）。 这就意味着任何一方 (或其它合约) 都可以调用你合约里的函数。<br> 显然，不是什么时候都需要这样，而且这样的合约易于受到攻击。 所以将自己的函数定义为私有(private)是一个好的编程习惯，只有当你需要外部世界调用它时才将它设置为公共。</p> 
<p>如何定义一个私有的函数呢？</p> 
<pre><code class="prism language-js">uint<span class="token punctuation">[</span><span class="token punctuation">]</span> numbers<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">_addToArray</span><span class="token punctuation">(</span>uint _number<span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token punctuation">{<!-- --></span>
  numbers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_number<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这意味着只有我们合约中的其它函数才能够调用这个函数，给 numbers 数组添加新成员。</p> 
<p>可以看到，在函数名字后面使用关键字 private 即可。和函数的参数类似，私有函数的名字用(_)起始。</p> 
<h3><a id="_385"></a>实战演习</h3> 
<p>我们合约的函数 createZombie 的默认属性是公共的，这意味着任何一方都可以调用它去创建一个僵尸。 咱们来把它变成私有吧！</p> 
<ul><li>变 createZombie 为私有函数，不要忘记遵守命名的规矩哦！</li></ul> 
<p><strong>答案:</strong></p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>
	<span class="token operator">...</span>
    <span class="token keyword">function</span> <span class="token function">_createZombie</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> uint _dna<span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token punctuation">{<!-- --></span>
        zombies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">Zombie</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> _dna<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="10__404"></a>第10章: 函数的更多属性</h2> 
<p>本章中我们将学习函数的返回值和修饰符。</p> 
<p><strong>返回值 returns</strong><br> 要想函数返回一个数值，按如下定义：</p> 
<pre><code class="prism language-js">string greeting <span class="token operator">=</span> <span class="token string">"What's up dog"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token function">returns</span> <span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 	 <span class="token keyword">return</span> greeting<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>本例 执行sayHello函数 将返回"What’s up dog" 。<br> Solidity中，函数的定义，可包含返回值的数据类型(如本例中 string)。</p> 
<p><strong>函数的修饰符 view、pure</strong><br> 上面的函数实际上没有改变 Solidity 里的状态，即，它没有改变任何值或者写任何东西。</p> 
<p>这种情况下我们可以把函数定义为 view, 意味着它只能读取数据不能更改数据:</p> 
<p>function sayHello() public view returns (string) {<!-- --><br> Solidity 还支持 pure 函数, 表明这个函数甚至都不访问应用里的数据，例如：</p> 
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">_multiply</span><span class="token punctuation">(</span>uint a<span class="token punctuation">,</span> uint b<span class="token punctuation">)</span> <span class="token keyword">private</span> pure <span class="token function">returns</span> <span class="token punctuation">(</span>uint<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这个函数甚至都不读取应用里的状态 — 它的返回值完全取决于它的输入参数，在这种情况下我们把函数定义为 pure.</p> 
<p>注：可能很难记住何时把函数标记为 pure/view。 幸运的是， Solidity 编辑器会给出提示，提醒你使用这些修饰符。</p> 
<h2><a id="_436"></a>实战演习</h2> 
<p>我们想建立一个帮助函数，它根据一个字符串随机生成一个DNA数据。</p> 
<ul><li> <p>创建一个 private 函数，命名为 _generateRandomDna。它只接收一个输入变量 _str (类型 string), 返回一个 uint 类型的数值。</p> </li><li> <p>此函数只读取我们合约中的一些变量，所以标记为view。</p> </li><li> <p>函数内部暂时留空，以后我们再添加代码。</p> </li></ul> 
<p><strong>答案：</strong></p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>
 
	<span class="token operator">...</span>

    <span class="token keyword">function</span> <span class="token function">_createZombie</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> uint _dna<span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token punctuation">{<!-- --></span>
        zombies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">Zombie</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> _dna<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 这里开始</span>
    <span class="token keyword">function</span> <span class="token function">_generateRandomDna</span><span class="token punctuation">(</span>string _str<span class="token punctuation">)</span> <span class="token keyword">private</span> view <span class="token function">returns</span> <span class="token punctuation">(</span>uint<span class="token punctuation">)</span> 	<span class="token punctuation">{<!-- --></span>

   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="11_Keccak256___464"></a>第11章: Keccak256 和 类型转换</h2> 
<p>如何让 _generateRandomDna 函数返回一个随机的 uint?</p> 
<p>Ethereum 内部有一个散列函数keccak256，它用了SHA3版本。一个散列函数基本上就是把一个字符串转换为一个256位的16进制数字。字符串的一个微小变化会引起散列数据极大变化。</p> 
<p>这在 Ethereum 中有很多应用，但是现在我们只是用它造一个伪随机数。</p> 
<p>例子:</p> 
<p>//6e91ec6b618bb462a4a6ee5aa2cb0e9cf30f7a052bb467b0ba58b8748c00d2e5<br> keccak256(“aaaab”);<br> //b1f078126895a1424524de5321b339ab00408010b7cf0e6ed451514981e58aa9<br> keccak256(“aaaac”);<br> 显而易见，输入字符串只改变了一个字母，输出就已经天壤之别了。</p> 
<p>注: 在区块链中安全地产生一个随机数是一个很难的问题， 本例的方法不安全，但是在我们的Zombie DNA算法里不是那么重要，已经很好地满足我们的需要了。</p> 
<p>类型转换<br> 有时你需要变换数据类型。例如:</p> 
<pre><code class="prism language-js">uint8 a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
uint b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token comment">// 将会抛出错误，因为 a * b 返回 uint, 而不是 uint8:</span>
uint8 c <span class="token operator">=</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token comment">// 我们需要将 b 转换为 uint8:</span>
uint8 c <span class="token operator">=</span> a <span class="token operator">*</span> <span class="token function">uint8</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>上面, a * b 返回类型是 uint, 但是当我们尝试用 uint8 类型接收时, 就会造成潜在的错误。如果把它的数据类型转换为 uint8, 就可以了，编译器也不会出错。</p> 
<h3><a id="_493"></a>实战演习</h3> 
<p>给 _generateRandomDna 函数添加代码! 它应该完成如下功能:</p> 
<ul><li> <p>第一行代码取 _str 的 keccak256 散列值生成一个伪随机十六进制数，类型转换为 uint, 最后保存在类型为 uint 名为 rand 的变量中。</p> </li><li> <p>我们只想让我们的DNA的长度为16位 (还记得 dnaModulus?)。所以第二行代码应该 return 上面计算的数值对 dnaModulus 求余数(%)。<br> <strong>答案：</strong></p> </li></ul> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>

    <span class="token operator">...</span>

    <span class="token keyword">function</span> <span class="token function">_generateRandomDna</span><span class="token punctuation">(</span>string _str<span class="token punctuation">)</span> <span class="token keyword">private</span> view <span class="token function">returns</span> <span class="token punctuation">(</span>uint<span class="token punctuation">)</span> 	<span class="token punctuation">{<!-- --></span>
        uint rand <span class="token operator">=</span> <span class="token function">uint</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span>_str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rand <span class="token operator">%</span> dnaModulus<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="12__514"></a>第12章: 放在一起</h2> 
<p>我们就快完成我们的随机僵尸制造器了，来写一个公共的函数把所有的部件连接起来。</p> 
<p>写一个公共函数，它有一个参数，用来接收僵尸的名字，之后用它生成僵尸的DNA。</p> 
<h3><a id="_519"></a>实战演习</h3> 
<ul><li> <p>创建一个 public 函数，命名为createRandomZombie. 它将被传入一个变量 _name (数据类型是 string)。 (注: 定义公共函数 public 和定义一个私有 private 函数的做法一样)。</p> </li><li> <p>函数的第一行应该调用 _generateRandomDna 函数，传入 _name 参数, 结果保存在一个类型为 uint 的变量里，命名为 randDna。</p> </li><li> <p>第二行调用 _createZombie 函数， 传入参数： _name 和 randDna。</p> </li><li> <p>整个函数应该是4行代码 (包括函数的结束符号 } )。</p> </li></ul> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>

	<span class="token operator">...</span>
	
    <span class="token keyword">function</span> <span class="token function">_generateRandomDna</span><span class="token punctuation">(</span>string _str<span class="token punctuation">)</span> <span class="token keyword">private</span> view <span class="token function">returns</span> <span class="token punctuation">(</span>uint<span class="token punctuation">)</span> 	<span class="token punctuation">{<!-- --></span>
        uint rand <span class="token operator">=</span> <span class="token function">uint</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span>_str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rand <span class="token operator">%</span> dnaModulus<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 事件</span>
        <span class="token keyword">function</span> <span class="token function">createRandomZombie</span><span class="token punctuation">(</span>string _name<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{<!-- --></span>
        uint randDna <span class="token operator">=</span> <span class="token function">_generateRandomDna</span><span class="token punctuation">(</span>_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">_createZombie</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> randDna<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="13__548"></a>第13章: 事件</h2> 
<p>我们的合约几乎就要完成了！让我们加上一个事件.</p> 
<p>事件 :是合约和区块链通讯的一种机制。你的前端应用“监听”某些事件，并做出反应。</p> 
<p>例子:</p> 
<p>// 这里建立事件</p> 
<pre><code class="prism language-js">event <span class="token function">IntegersAdded</span><span class="token punctuation">(</span>uint x<span class="token punctuation">,</span> uint y<span class="token punctuation">,</span> uint result<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>uint _x<span class="token punctuation">,</span> uint _y<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{<!-- --></span>
  uint result <span class="token operator">=</span> _x <span class="token operator">+</span> _y<span class="token punctuation">;</span>
  <span class="token comment">//触发事件，通知app</span>
  <span class="token function">IntegersAdded</span><span class="token punctuation">(</span>_x<span class="token punctuation">,</span> _y<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
你的 app 前端可以监听这个事件。JavaScript 实现如下<span class="token punctuation">:</span>

YourContract<span class="token punctuation">.</span><span class="token function">IntegersAdded</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// 干些事</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_571"></a>实战演习</h3> 
<p>我们想每当一个僵尸创造出来时，我们的前端都能监听到这个事件，并将它显示出来。</p> 
<ol><li>定义一个 事件 叫做 NewZombie。 它有3个参数: zombieId (uint)， name (string)， 和 dna (uint)。</li></ol> 
<p>2.修改 _createZombie 函数使得当新僵尸造出来并加入zombies数组后，生成事件NewZombie。</p> 
<p>3.需要定义僵尸id。 array.push() 返回数组的长度类型是uint - 因为数组的第一个元素的索引是 0， array.push() - 1 将是我们加入的僵尸的索引。 zombies.push() - 1 就是 id，数据类型是 uint。在下一行中你可以把它用到 NewZombie 事件中。<br> <strong>答案：</strong></p> 
<pre><code class="prism language-js">pragma solidity <span class="token operator">^</span><span class="token number">0.4</span><span class="token number">.19</span><span class="token punctuation">;</span>

contract ZombieFactory <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//插入事件</span>
    event <span class="token function">NewZombie</span><span class="token punctuation">(</span>uint zombieId<span class="token punctuation">,</span> string name<span class="token punctuation">,</span> uint dna<span class="token punctuation">)</span><span class="token punctuation">;</span>
    uint dnaDigits <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
    uint dnaModulus <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">**</span> dnaDigits<span class="token punctuation">;</span>

    struct Zombie <span class="token punctuation">{<!-- --></span>
        string name<span class="token punctuation">;</span>
        uint dna<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    Zombie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">public</span> zombies<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">_createZombie</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> uint _dna<span class="token punctuation">)</span> <span class="token keyword">private</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//</span>
        uint id <span class="token operator">=</span> zombies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">Zombie</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> _dna<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">NewZombie</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> _name<span class="token punctuation">,</span> _dna<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">_generateRandomDna</span><span class="token punctuation">(</span>string _str<span class="token punctuation">)</span> <span class="token keyword">private</span> view <span class="token function">returns</span> <span class="token punctuation">(</span>uint<span class="token punctuation">)</span> 	<span class="token punctuation">{<!-- --></span>
        uint rand <span class="token operator">=</span> <span class="token function">uint</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span>_str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rand <span class="token operator">%</span> dnaModulus<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">createRandomZombie</span><span class="token punctuation">(</span>string _name<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{<!-- --></span>
        uint randDna <span class="token operator">=</span> <span class="token function">_generateRandomDna</span><span class="token punctuation">(</span>_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">_createZombie</span><span class="token punctuation">(</span>_name<span class="token punctuation">,</span> randDna<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="14_Web3js_615"></a>第14章: Web3.js</h2> 
<p>我们的 Solidity 合约完工了！ 现在我们要写一段 JavaScript 前端代码来调用这个合约。</p> 
<p>以太坊有一个 JavaScript 库，名为Web3.js。</p> 
<p>在后面的课程里，我们会进一步地教你如何安装一个合约，如何设置Web3.js。 但是现在我们通过一段代码来了解 Web3.js 是如何和我们发布的合约交互的吧。</p> 
<p>如果下面的代码你不能全都理解，不用担心。</p> 
<pre><code class="prism language-js"><span class="token comment">// 下面是调用合约的方式:</span>
<span class="token keyword">var</span> abi <span class="token operator">=</span> <span class="token comment">/* abi是由编译器生成的 */</span>
<span class="token keyword">var</span> ZombieFactoryContract <span class="token operator">=</span> web3<span class="token punctuation">.</span>eth<span class="token punctuation">.</span><span class="token function">contract</span><span class="token punctuation">(</span>abi<span class="token punctuation">)</span>
<span class="token keyword">var</span> contractAddress <span class="token operator">=</span> <span class="token comment">/* 发布之后在以太坊上生成的合约地址 */</span>
<span class="token keyword">var</span> ZombieFactory <span class="token operator">=</span> ZombieFactoryContract<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>contractAddress<span class="token punctuation">)</span>
<span class="token comment">// `ZombieFactory` 能访问公共的函数以及事件</span>

<span class="token comment">// 某个监听文本输入的监听器:</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#ourButton"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#nameInput"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">//调用合约的 `createRandomZombie` 函数:</span>
  ZombieFactory<span class="token punctuation">.</span><span class="token function">createRandomZombie</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 监听 `NewZombie` 事件, 并且更新UI</span>
<span class="token keyword">var</span> event <span class="token operator">=</span> ZombieFactory<span class="token punctuation">.</span><span class="token function">NewZombie</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token function">generateZombie</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>zombieId<span class="token punctuation">,</span> result<span class="token punctuation">.</span>name<span class="token punctuation">,</span> result<span class="token punctuation">.</span>dna<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 获取 Zombie 的 dna, 更新图像</span>
<span class="token keyword">function</span> <span class="token function">generateZombie</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> dna<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> dnaStr <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>dna<span class="token punctuation">)</span>
  <span class="token comment">// 如果dna少于16位,在它前面用0补上</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>dnaStr<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">16</span><span class="token punctuation">)</span>
    dnaStr <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> dnaStr

  <span class="token keyword">let</span> zombieDetails <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 前两位数构成头部.我们可能有7种头部, 所以 % 7</span>
    <span class="token comment">// 得到的数在0-6,再加上1,数的范围变成1-7</span>
    <span class="token comment">// 通过这样计算：</span>
    headChoice<span class="token punctuation">:</span> dnaStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">7</span> <span class="token operator">+</span> <span class="token number">1</span>，
    <span class="token comment">// 我们得到的图片名称从head1.png 到 head7.png</span>

    <span class="token comment">// 接下来的两位数构成眼睛, 眼睛变化就对11取模:</span>
    eyeChoice<span class="token punctuation">:</span> dnaStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">11</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">// 再接下来的两位数构成衣服，衣服变化就对6取模:</span>
    shirtChoice<span class="token punctuation">:</span> dnaStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">//最后6位控制颜色. 用css选择器: hue-rotate来更新</span>
    <span class="token comment">// 360度:</span>
    skinColorChoice<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>dnaStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    eyeColorChoice<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>dnaStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    clothesColorChoice<span class="token punctuation">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>dnaStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">360</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    zombieName<span class="token punctuation">:</span> name<span class="token punctuation">,</span>
    zombieDescription<span class="token punctuation">:</span> <span class="token string">"A Level 1 CryptoZombie"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> zombieDetails
<span class="token punctuation">}</span>
</code></pre> 
<p>我们的 JavaScript 所做的就是获取由zombieDetails 产生的数据, 并且利用浏览器里的 JavaScript 神奇功能 (我们用 Vue.js)，置换出图像以及使用CSS过滤器。在后面的课程中，你可以看到全部的代码。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eb624da6b91075178e2cfe32087a4cb0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">8.Python 学习系列--------Python 基本语法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8190b5a95a83f82d141ae2c439dac17f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2018年10月21日训练笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
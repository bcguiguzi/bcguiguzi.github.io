<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>有趣之matlab-烟花 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="有趣之matlab-烟花" />
<meta property="og:description" content="待整合1 2 3
动态 有趣编程之11
静态 逼真
3 .m文件路径下放back1.jpg back4.jpg…背景照片
点击screen 就会有小白点升起，爆炸
function yanhuamoban() clear all; %定义全局变量 global ah ;%坐标轴句柄 global styleNum ;%爆炸图案样式 global multiColor; %多颜色变换 global color;%烟花颜色 global v0;%烟花爆炸速度 global n; %粒子数量 global g;%粒子重力加速度 %变量初始化开始 multiColor = 0; styleNum = 3; color = [1 1 0]; v0 = 250; %烟花爆炸时的速度 n = 2000;%粒子shumu g=1000; %变量初始化结束 %GUI部分开始 fig = figure(&#39;units&#39;,&#39;normalized&#39;,&#39;position&#39;,[0.1 0.1 0.6 0.8],... &#39;menubar&#39;,&#39;none&#39;,&#39;numberTitle&#39;,&#39;off&#39;,&#39;Name&#39;,&#39;烟花欣赏&#39;,&#39;WindowButtonDownFcn&#39;,@yanhua... ); %菜单 file_menu = uimenu(fig,&#39;Label&#39;,&#39;文件(&amp;f)&#39;); sub_file_menu1 = uimenu(file_menu,&#39;Label&#39;,&#39;退出(&amp;q)&#39;,&#39;CallBack&#39;,@file_menu_callback); style_menu = uimenu(fig,&#39;Label&#39;,&#39;爆炸风格(&amp;s)&#39;); sub_style_menu1 = uimenu(style_menu,&#39;Label&#39;,&#39;风格(&amp;1)&#39;,&#39;CallBack&#39;,@style_menu_callback); sub_style_menu2 = uimenu(style_menu,&#39;Label&#39;,&#39;风格(&amp;2)&#39;,&#39;CallBack&#39;,@style_menu_callback); sub_style_menu3 = uimenu(style_menu,&#39;Label&#39;,&#39;风格(&amp;3)&#39;,&#39;CallBack&#39;,@style_menu_callback); sub_style_menu4 = uimenu(style_menu,&#39;Label&#39;,&#39;风格(&amp;4)&#39;,&#39;CallBack&#39;,@style_menu_callback); sub_style_menu5 = uimenu(style_menu,&#39;Label&#39;,&#39;风格(&amp;5)&#39;,&#39;CallBack&#39;,@style_menu_callback); sub_style_menu6 = uimenu(style_menu,&#39;Label&#39;,&#39;风格(&amp;6)&#39;,&#39;CallBack&#39;,@style_menu_callback); picture_menu = uimenu(fig,&#39;Label&#39;,&#39;背景图片(&amp;p)&#39;); sub_picture_menu1 = uimenu(picture_menu,&#39;Label&#39;,&#39;图片(&amp;1)&#39;,&#39;CallBack&#39;,@picture_menu_callback); sub_picture_menu2 = uimenu(picture_menu,&#39;Label&#39;,&#39;图片(&amp;2)&#39;,&#39;CallBack&#39;,@picture_menu_callback); sub_picture_menu3 = uimenu(picture_menu,&#39;Label&#39;,&#39;图片(&amp;3)&#39;,&#39;CallBack&#39;,@picture_menu_callback); sub_picture_menu4 = uimenu(picture_menu,&#39;Label&#39;,&#39;图片(&amp;4)&#39;,&#39;CallBack&#39;,@picture_menu_callback); sub_picture_menu5 = uimenu(picture_menu,&#39;Label&#39;,&#39;图片(&amp;5)&#39;,&#39;CallBack&#39;,@picture_menu_callback); color_menu = uimenu(fig,&#39;Label&#39;,&#39;烟花颜色(&amp;c)&#39;); sub_color_menu1 = uimenu(color_menu,&#39;Label&#39;,&#39;黄色(&amp;1)&#39;,&#39;CallBack&#39;,@color_menu_callback); sub_color_menu2 = uimenu(color_menu,&#39;Label&#39;,&#39;紫红色(&amp;2)&#39;,&#39;CallBack&#39;,@color_menu_callback); sub_color_menu3 = uimenu(color_menu,&#39;Label&#39;,&#39;青色(&amp;3)&#39;,&#39;CallBack&#39;,@color_menu_callback); sub_color_menu4 = uimenu(color_menu,&#39;Label&#39;,&#39;红色(&amp;4)&#39;,&#39;CallBack&#39;,@color_menu_callback); sub_color_menu5 = uimenu(color_menu,&#39;Label&#39;,&#39;绿色(&amp;5)&#39;,&#39;CallBack&#39;,@color_menu_callback); sub_color_menu6 = uimenu(color_menu,&#39;Label&#39;,&#39;蓝色(&amp;6)&#39;,&#39;CallBack&#39;,@color_menu_callback); sub_color_menu7 = uimenu(color_menu,&#39;Label&#39;,&#39;白色(&amp;7)&#39;,&#39;CallBack&#39;,@color_menu_callback); sub_color_menu8 = uimenu(color_menu,&#39;Label&#39;,&#39;五彩变换(&amp;8)&#39;,&#39;CallBack&#39;,@color_menu_callback); %按钮面板 color_button_group = uibuttongroup(fig,&#39;Title&#39;,&#39;颜色调节面板&#39;,&#39;Position&#39;,[0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/dd9fdcd1faf184ce33ef03f5dce7bfcb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-14T15:04:10+08:00" />
<meta property="article:modified_time" content="2024-03-14T15:04:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">有趣之matlab-烟花</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>待整合1 2 3</p> 
<blockquote> 
 <ol><li>动态</li></ol> 
</blockquote> 
<p><a href="https://blog.csdn.net/zzx2016zzx/article/details/85941651?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171039738416800213067323%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=171039738416800213067323&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-5-85941651-null-null.142%5Ev99%5Epc_search_result_base4&amp;utm_term=hand=figure&amp;spm=1018.2226.3001.4187">有趣编程之11</a></p> 
<blockquote> 
 <ol start="2"><li></ol> 
</blockquote> 
<p><a href="https://blog.csdn.net/slandarer/article/details/117573308?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171039863716800222878284%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171039863716800222878284&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-117573308-null-null.142%5Ev99%5Epc_search_result_base4&amp;utm_term=matlab%20%E7%83%9F%E8%8A%B1&amp;spm=1018.2226.3001.4187">静态 逼真</a></p> 
<blockquote> 
 <p>3 .m文件路径下放back1.jpg back4.jpg…背景照片<br> 点击screen 就会有小白点升起，爆炸</p> 
</blockquote> 
<pre><code class="prism language-matlab"><span class="token keyword">function</span> <span class="token function">yanhuamoban</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    clear all<span class="token punctuation">;</span>
    <span class="token comment">%定义全局变量</span>
    global ah <span class="token punctuation">;</span><span class="token comment">%坐标轴句柄</span>
    global styleNum <span class="token punctuation">;</span><span class="token comment">%爆炸图案样式</span>
    global multiColor<span class="token punctuation">;</span> <span class="token comment">%多颜色变换</span>
    global color<span class="token punctuation">;</span><span class="token comment">%烟花颜色</span>
    global v0<span class="token punctuation">;</span><span class="token comment">%烟花爆炸速度</span>
    global n<span class="token punctuation">;</span> <span class="token comment">%粒子数量</span>
    global g<span class="token punctuation">;</span><span class="token comment">%粒子重力加速度</span>
    <span class="token comment">%变量初始化开始</span>
    multiColor <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    styleNum <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">1</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    v0 <span class="token operator">=</span> <span class="token number">250</span><span class="token punctuation">;</span>   <span class="token comment">%烟花爆炸时的速度</span>
    n <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span><span class="token comment">%粒子shumu</span>
    g<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token comment">%变量初始化结束</span>
    <span class="token comment">%GUI部分开始</span>
    fig <span class="token operator">=</span> <span class="token function">figure</span><span class="token punctuation">(</span><span class="token string">'units'</span><span class="token punctuation">,</span><span class="token string">'normalized'</span><span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0.1</span> <span class="token number">0.1</span> <span class="token number">0.6</span> <span class="token number">0.8</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
        <span class="token string">'menubar'</span><span class="token punctuation">,</span><span class="token string">'none'</span><span class="token punctuation">,</span><span class="token string">'numberTitle'</span><span class="token punctuation">,</span><span class="token string">'off'</span><span class="token punctuation">,</span><span class="token string">'Name'</span><span class="token punctuation">,</span><span class="token string">'烟花欣赏'</span><span class="token punctuation">,</span><span class="token string">'WindowButtonDownFcn'</span><span class="token punctuation">,</span><span class="token operator">@</span>yanhua<span class="token punctuation">...</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">%菜单</span>
    file_menu <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'文件(&amp;f)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_file_menu1 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>file_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'退出(&amp;q)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>file_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    style_menu <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'爆炸风格(&amp;s)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_style_menu1 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>style_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'风格(&amp;1)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>style_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_style_menu2 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>style_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'风格(&amp;2)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>style_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_style_menu3 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>style_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'风格(&amp;3)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>style_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_style_menu4 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>style_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'风格(&amp;4)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>style_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_style_menu5 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>style_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'风格(&amp;5)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>style_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_style_menu6 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>style_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'风格(&amp;6)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>style_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    picture_menu <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'背景图片(&amp;p)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_picture_menu1 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>picture_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'图片(&amp;1)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>picture_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_picture_menu2 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>picture_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'图片(&amp;2)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>picture_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_picture_menu3 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>picture_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'图片(&amp;3)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>picture_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_picture_menu4 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>picture_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'图片(&amp;4)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>picture_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_picture_menu5 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>picture_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'图片(&amp;5)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>picture_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    color_menu <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'烟花颜色(&amp;c)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu1 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'黄色(&amp;1)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu2 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'紫红色(&amp;2)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu3 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'青色(&amp;3)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu4 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'红色(&amp;4)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu5 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'绿色(&amp;5)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu6 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'蓝色(&amp;6)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu7 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'白色(&amp;7)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub_color_menu8 <span class="token operator">=</span> <span class="token function">uimenu</span><span class="token punctuation">(</span>color_menu<span class="token punctuation">,</span><span class="token string">'Label'</span><span class="token punctuation">,</span><span class="token string">'五彩变换(&amp;8)'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>color_menu_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">%按钮面板</span>
    color_button_group <span class="token operator">=</span> <span class="token function">uibuttongroup</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">,</span><span class="token string">'颜色调节面板'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0.83</span><span class="token punctuation">,</span><span class="token number">0.55</span><span class="token punctuation">,</span><span class="token number">0.16</span><span class="token punctuation">,</span><span class="token number">0.44</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    speed_button_group <span class="token operator">=</span> <span class="token function">uibuttongroup</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">,</span><span class="token function">regexprep</span><span class="token punctuation">(</span><span class="token string">'速度调节面板(num)'</span><span class="token punctuation">,</span><span class="token string">'num'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>v0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0.83</span><span class="token punctuation">,</span><span class="token number">0.36</span><span class="token punctuation">,</span><span class="token number">0.16</span><span class="token punctuation">,</span><span class="token number">0.185</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'speed_panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    number_button_group <span class="token operator">=</span> <span class="token function">uibuttongroup</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">,</span><span class="token function">regexprep</span><span class="token punctuation">(</span><span class="token string">'数量调节面板(num)'</span><span class="token punctuation">,</span><span class="token string">'num'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0.83</span><span class="token punctuation">,</span><span class="token number">0.005</span><span class="token punctuation">,</span><span class="token number">0.16</span><span class="token punctuation">,</span><span class="token number">0.35</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'ammount_panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">%颜色微调滑动条</span>
    red_slider <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'slider'</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">695</span><span class="token punctuation">,</span><span class="token number">450</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Min'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'Max'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'Value'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'backgroundColor'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>slider_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    green_slider <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'slider'</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'green'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">735</span><span class="token punctuation">,</span><span class="token number">450</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Min'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'Max'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'Value'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'backgroundColor'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>slider_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    blue_slider <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'slider'</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">775</span><span class="token punctuation">,</span><span class="token number">450</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Min'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'Max'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'Value'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'backgroundColor'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>slider_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">%颜色参数静态文本</span>
    color_text <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'text'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">690</span><span class="token punctuation">,</span><span class="token number">395</span><span class="token punctuation">,</span><span class="token number">115</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'color_text'</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
        <span class="token string">'String'</span><span class="token punctuation">,</span><span class="token function">char</span><span class="token punctuation">(</span><span class="token string">'red=1'</span><span class="token punctuation">,</span><span class="token string">'blue=1'</span><span class="token punctuation">,</span><span class="token string">'green=0'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'backgroundColor'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0.95</span><span class="token punctuation">,</span><span class="token number">0.87</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'HorizontalAlignment'</span><span class="token punctuation">,</span><span class="token string">'left'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">%颜色演示面板</span>
    color_panel <span class="token operator">=</span> <span class="token function">uipanel</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">,</span><span class="token string">'颜色演示面板'</span><span class="token punctuation">,</span><span class="token string">'BackgroundColor'</span><span class="token punctuation">,</span>color<span class="token punctuation">,</span><span class="token string">'Units'</span><span class="token punctuation">,</span><span class="token string">'pixels'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">690</span><span class="token punctuation">,</span><span class="token number">345</span><span class="token punctuation">,</span><span class="token number">115</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">%修改速度按钮</span>
    fast_button <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">280</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'加快'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>button_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    slow_button <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">230</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'减慢'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>button_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token comment">%修改数量按钮</span>
    increase_button <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'增多'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>button_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    decrease_button <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'减少'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>button_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    modNum_button <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'手动调整数量'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>button_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    modG_button <span class="token operator">=</span> <span class="token function">uicontrol</span><span class="token punctuation">(</span>fig<span class="token punctuation">,</span><span class="token string">'Style'</span><span class="token punctuation">,</span><span class="token string">'pushbutton'</span><span class="token punctuation">,</span><span class="token string">'Position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string">'FontSize'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'手动调整加速度'</span><span class="token punctuation">,</span><span class="token string">'CallBack'</span><span class="token punctuation">,</span><span class="token operator">@</span>button_callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token function">axes</span><span class="token punctuation">(</span><span class="token string">'DrawMode'</span><span class="token punctuation">,</span><span class="token string">'fast'</span><span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    II<span class="token operator">=</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'back4.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">image</span><span class="token punctuation">(</span>II<span class="token punctuation">)</span>
    ah <span class="token operator">=</span> <span class="token function">axes</span><span class="token punctuation">(</span><span class="token string">'DrawMode'</span><span class="token punctuation">,</span><span class="token string">'fast'</span><span class="token punctuation">,</span><span class="token string">'Color'</span><span class="token punctuation">,</span><span class="token string">'none'</span><span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">200</span> <span class="token number">420</span> <span class="token number">1</span> <span class="token number">410</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">%设置坐标轴的范围</span>
    grid off
    <span class="token comment">%GUI部分结束</span>
 
    hold on
    <span class="token comment">%烟花主控函数，每次点击鼠标按钮监听器都会调用此函数。</span>
    <span class="token keyword">function</span> <span class="token function">yanhua</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
        cp <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>ah<span class="token punctuation">,</span><span class="token string">'CurrentPoint'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% 得到点击点的坐标</span>
        xt <span class="token operator">=</span> <span class="token function">cp</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>yt <span class="token operator">=</span> <span class="token function">cp</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>xt <span class="token operator">&lt;</span> <span class="token number">420</span><span class="token punctuation">)</span><span class="token comment">%若点击在按钮面板则不放烟花</span>
            <span class="token function">launch</span><span class="token punctuation">(</span>xt<span class="token punctuation">,</span>yt<span class="token punctuation">)</span><span class="token comment">%烟花发射函数</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>  <span class="token comment">%主函数调用结束</span>
 
<span class="token comment">%colormap(hot)</span>
<span class="token comment">%烟花发射函数</span>
<span class="token keyword">function</span> <span class="token function">launch</span><span class="token punctuation">(</span>xt<span class="token punctuation">,</span>yt<span class="token punctuation">)</span>
    x<span class="token operator">=</span>xt<span class="token punctuation">;</span>
    y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    H<span class="token operator">=</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span><span class="token string">'w.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">%以白色,点来绘制图像。</span>
    <span class="token function">set</span><span class="token punctuation">(</span>H<span class="token punctuation">,</span><span class="token string">'EraseMode'</span><span class="token punctuation">,</span><span class="token string">'xor'</span><span class="token punctuation">,</span><span class="token string">'MarkerSize'</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token comment">%擦除式绘图，通过在极短的时间里不断绘制新点坐标，擦出旧点坐标来实现烟花向上发射的运动效果</span>
    T <span class="token operator">=</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token string">'TimerFcn'</span><span class="token punctuation">,</span><span class="token operator">@</span>timer_display1<span class="token punctuation">,</span><span class="token string">'StopFcn'</span><span class="token punctuation">,</span><span class="token operator">@</span>stopFcn1<span class="token punctuation">,</span><span class="token string">'TasksToExecute'</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token string">'Period'</span><span class="token punctuation">,</span><span class="token number">0.005</span><span class="token punctuation">,</span><span class="token string">'ExecutionMode'</span><span class="token punctuation">,</span><span class="token string">'fixedSpacing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%非阻塞式定时器，以0.005秒为间隔调用TimerFcn，共调用50次。调用玩后会启动StopFcn函数，进行清尾工作，如清楚发射点图像，初始化烟花爆炸的定时器等。而烟花发射的运动，就是通过在这50次的重复调用中，不断更新点的坐标来实现的。</span>
    T<span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>H<span class="token punctuation">,</span>xt<span class="token punctuation">,</span>yt<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">%定时器对象的属性。在定时函数里使用。定时器函数是不变的，但在重复调用中要实现点坐标的改变，就要通过改变定时器对象的对象属性才行。</span>
    <span class="token comment">%为什么要用对象属性而不是函数内定义的局部变量？因为局部变量在每次函数调用完毕就会被销毁，不能实现类似于静态变量的效果在下次重复调用中生效。那为什么不适用全局变量？因为全局变量是共用的，我的定时器A能用，定时器B也能用，A修改了这个变量，B中也生效了，这就有“线程安全性”问题了。</span>
    <span class="token function">start</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%启动定时器</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> <span class="token function">timer_display1</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
    userData <span class="token operator">=</span> obj<span class="token punctuation">.</span>userData<span class="token punctuation">;</span><span class="token comment">%获取对象数据</span>
    H <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    x <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    yt <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token number">i</span> <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    y<span class="token operator">=</span><span class="token number">i</span><span class="token operator">/</span><span class="token number">50</span><span class="token operator">*</span>yt<span class="token punctuation">;</span><span class="token comment">%执行50次，就到了鼠标点击位置，预备爆炸了。这个运动模型可以结合实际的物理模型做进一步优化，感兴趣的同学不妨试试。</span>
    <span class="token function">set</span><span class="token punctuation">(</span>H<span class="token punctuation">,</span><span class="token string">'XData'</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span><span class="token string">'YData'</span><span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token comment">%更新烟花坐标</span>
    drawnow<span class="token punctuation">;</span><span class="token comment">%重画页面，使烟花"H"出现在新位置</span>
 
    <span class="token number">i</span><span class="token operator">=</span><span class="token number">i</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">%这是控制烟花位移的关键</span>
    obj<span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>H<span class="token punctuation">,</span>x<span class="token punctuation">,</span>yt<span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">%更新对象数据，再下次重复调用时再取出使用</span>
<span class="token keyword">end</span>
 
<span class="token keyword">function</span> <span class="token function">stopFcn1</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token comment">%定时器1完成了它的50次调用使命，使烟花（点）到达爆炸处（鼠标位置），这个烟花（点)在这里被消除，然后开始了烟花爆炸的定时器初始化、启动工作</span>
    global n<span class="token punctuation">;</span>
    global color<span class="token punctuation">;</span>
    userData <span class="token operator">=</span> obj<span class="token punctuation">.</span>userData<span class="token punctuation">;</span>
    H <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span>
    xt <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    yt <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    x<span class="token operator">=</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>y<span class="token operator">=</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token function">set</span><span class="token punctuation">(</span>H<span class="token punctuation">,</span><span class="token string">'XData'</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span><span class="token string">'YData'</span><span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">%上述程序使得烟花到达鼠标的位置后消失在视野内</span>
    <span class="token comment">%*************烟花的爆炸过程    </span>
    x<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%爆炸后的颗粒数为n</span>
    y<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    h<span class="token operator">=</span><span class="token function">plot</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%烟花爆炸后的形状</span>
    <span class="token function">set</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'Color'</span><span class="token punctuation">,</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">set</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'erasemode'</span><span class="token punctuation">,</span><span class="token string">'xor'</span><span class="token punctuation">,</span><span class="token string">'MarkerSize'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
    T <span class="token operator">=</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token string">'TimerFcn'</span><span class="token punctuation">,</span><span class="token operator">@</span>timer_display2<span class="token punctuation">,</span><span class="token string">'StopFcn'</span><span class="token punctuation">,</span><span class="token operator">@</span>stopFcn2<span class="token punctuation">,</span><span class="token string">'TasksToExecute'</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">'Period'</span><span class="token punctuation">,</span><span class="token number">0.05</span><span class="token punctuation">,</span><span class="token string">'ExecutionMode'</span><span class="token punctuation">,</span><span class="token string">'fixedSpacing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    T<span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>h<span class="token punctuation">,</span>xt<span class="token punctuation">,</span>yt<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">start</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> <span class="token function">timer_display2</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
    global n v0 styleNum multiColor g<span class="token punctuation">;</span>
    userData <span class="token operator">=</span> obj<span class="token punctuation">.</span>userData<span class="token punctuation">;</span>
    h <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    x0 <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    y0 <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    t <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    theta<span class="token operator">=</span><span class="token function">rand</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">;</span><span class="token comment">%粒子的仰角</span>
    fy<span class="token operator">=</span><span class="token function">rand</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">;</span><span class="token comment">%粒子的方位角</span>
    theta1<span class="token operator">=</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token operator">*</span><span class="token function">rand</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">6</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n <span class="token comment">%绘制粒子下落过程，</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>styleNum<span class="token punctuation">)</span><span class="token comment">%图案判定,通过菜单修改全局变量控制</span>
            <span class="token keyword">case</span> <span class="token number">1</span>
                <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span>x0<span class="token punctuation">;</span>
                <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1.2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">i</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">-</span>g<span class="token operator">*</span>t<span class="token operator">.^</span><span class="token number">2</span><span class="token operator">+</span>y0<span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0.1</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span>
                    <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">4</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span>x0<span class="token punctuation">;</span>
                    <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1.2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">4</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">-</span>g<span class="token operator">*</span>t<span class="token operator">.^</span><span class="token number">2</span><span class="token operator">+</span>y0<span class="token punctuation">;</span>
                <span class="token keyword">else</span> 
                    <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2.5</span><span class="token operator">/</span><span class="token keyword">pi</span><span class="token operator">+</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">4</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span>x0<span class="token punctuation">;</span>
                    <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2.5</span><span class="token operator">/</span><span class="token keyword">pi</span><span class="token operator">+</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1.2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">4</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">-</span>g<span class="token operator">*</span>t<span class="token operator">.^</span><span class="token number">2</span><span class="token operator">+</span>y0<span class="token punctuation">;</span>
                <span class="token keyword">end</span>
            <span class="token keyword">case</span> <span class="token number">3</span>
                <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">i</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span>x0<span class="token punctuation">;</span>
                <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1.2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">i</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">-</span>g<span class="token operator">*</span>t<span class="token operator">.^</span><span class="token number">2</span><span class="token operator">+</span>y0<span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">4</span>
                <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0.8</span><span class="token operator">*</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">pi</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">i</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span>x0<span class="token punctuation">;</span>
                <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0.8</span><span class="token operator">*</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">pi</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1.2</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">theta</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">i</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">-</span>g<span class="token operator">*</span>t<span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span>y0<span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">5</span>
                 <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">4</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta1</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span>x0<span class="token punctuation">;</span>
                 <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">*</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">theta1</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta1</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">0.3</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">-</span><span class="token number">4</span><span class="token operator">*</span>t<span class="token operator">.^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span>y0<span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">6</span>                       
                <span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">theta1</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">*</span>t<span class="token operator">*</span><span class="token keyword">pi</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">+</span>x0<span class="token punctuation">;</span>
                <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span>v0<span class="token operator">*</span><span class="token function">cos</span><span class="token punctuation">(</span><span class="token function">fy</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">sin</span><span class="token punctuation">(</span><span class="token function">theta1</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span>t<span class="token operator">-</span>g<span class="token operator">*</span>t<span class="token operator">.^</span><span class="token number">2</span><span class="token operator">+</span>y0<span class="token punctuation">;</span>    
              <span class="token keyword">end</span>
    <span class="token keyword">end</span>
    <span class="token function">set</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'xdata'</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span><span class="token string">'ydata'</span><span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>multiColor <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">set</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'Color'</span><span class="token punctuation">,</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    drawnow<span class="token punctuation">;</span>
    t <span class="token operator">=</span> t <span class="token operator">+</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>userData <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>h<span class="token punctuation">,</span>x0<span class="token punctuation">,</span>y0<span class="token punctuation">,</span>t<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> <span class="token function">stopFcn2</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
    <span class="token comment">%下述程序使爆炸的烟花消失</span>
    global n<span class="token punctuation">;</span>
    userData <span class="token operator">=</span> obj<span class="token punctuation">.</span>userData<span class="token punctuation">;</span>
    h <span class="token operator">=</span> userData<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    x<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    y<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">set</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'xdata'</span><span class="token punctuation">,</span>x<span class="token punctuation">,</span><span class="token string">'ydata'</span><span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
 
<span class="token comment">%hObject  eventdata handles</span>
<span class="token comment">%按钮回调函数</span>
<span class="token keyword">function</span> <span class="token function">button_callback</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span>data<span class="token punctuation">,</span>handles<span class="token punctuation">)</span>
    global v0 n g<span class="token punctuation">;</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>String<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token string">'加快'</span>
            v0 <span class="token operator">=</span> v0 <span class="token operator">+</span> <span class="token number">50</span><span class="token punctuation">;</span>
            speed_panel <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'speed_panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            speed_panel<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token function">regexprep</span><span class="token punctuation">(</span>speed_panel<span class="token punctuation">.</span>Title<span class="token punctuation">,</span><span class="token string">'\d*'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>v0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%正则表达式替换</span>
        <span class="token keyword">case</span> <span class="token string">'减慢'</span>
            v0 <span class="token operator">=</span> v0 <span class="token operator">-</span> <span class="token number">50</span><span class="token punctuation">;</span>
            speed_panel <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'speed_panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            speed_panel<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token function">regexprep</span><span class="token punctuation">(</span>speed_panel<span class="token punctuation">.</span>Title<span class="token punctuation">,</span><span class="token string">'\d*'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>v0<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%正则表达式替换</span>
        <span class="token keyword">case</span> <span class="token string">'增多'</span>
            n <span class="token operator">=</span> n <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>
            ammount_panel <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'ammount_panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ammount_panel<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token function">regexprep</span><span class="token punctuation">(</span>ammount_panel<span class="token punctuation">.</span>Title<span class="token punctuation">,</span><span class="token string">'\d*'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%正则表达式替换</span>
        <span class="token keyword">case</span> <span class="token string">'减少'</span>
            n <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">;</span>
            ammount_panel <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'ammount_panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ammount_panel<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token function">regexprep</span><span class="token punctuation">(</span>ammount_panel<span class="token punctuation">.</span>Title<span class="token punctuation">,</span><span class="token string">'\d*'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%正则表达式替换</span>
        <span class="token keyword">case</span> <span class="token string">'手动调整数量'</span>
            ammount_input <span class="token operator">=</span> <span class="token function">inputdlg</span><span class="token punctuation">(</span><span class="token string">'请输入爆炸后烟花颗粒的数量'</span><span class="token punctuation">,</span><span class="token string">'修改烟花数量'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            num<span class="token operator">=</span><span class="token function">str2num</span><span class="token punctuation">(</span>ammount_input<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token function">isempty</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
              <span class="token function">errordlg</span><span class="token punctuation">(</span><span class="token string">'必须输入有效数字'</span><span class="token punctuation">,</span><span class="token string">'错误'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                n <span class="token operator">=</span> num<span class="token punctuation">;</span>
                ammount_panel <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'ammount_panel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ammount_panel<span class="token punctuation">.</span>Title <span class="token operator">=</span> <span class="token function">regexprep</span><span class="token punctuation">(</span>ammount_panel<span class="token punctuation">.</span>Title<span class="token punctuation">,</span><span class="token string">'\d*'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">%正则表达式替换</span>
            <span class="token keyword">end</span>
        <span class="token keyword">case</span> <span class="token string">'手动调整加速度'</span>
        ammount_input <span class="token operator">=</span> <span class="token function">inputdlg</span><span class="token punctuation">(</span><span class="token function">strcat</span><span class="token punctuation">(</span><span class="token string">'请输入爆炸后烟花加速度值,当前值为：'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'修改加速度'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        num<span class="token operator">=</span><span class="token function">str2num</span><span class="token punctuation">(</span>ammount_input<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token function">isempty</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
          <span class="token function">errordlg</span><span class="token punctuation">(</span><span class="token string">'必须输入有效数字'</span><span class="token punctuation">,</span><span class="token string">'错误'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            g <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token comment">%烟花样式改变菜单</span>
<span class="token keyword">function</span> <span class="token function">style_menu_callback</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span>data<span class="token punctuation">,</span>handles<span class="token punctuation">)</span>
    global styleNum<span class="token punctuation">;</span>
    number <span class="token operator">=</span> <span class="token function">regexp</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>Label<span class="token punctuation">,</span><span class="token string">'\d'</span><span class="token punctuation">,</span><span class="token string">'match'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    styleNum <span class="token operator">=</span> <span class="token function">str2num</span><span class="token punctuation">(</span>number<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> <span class="token function">file_menu_callback</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span>data<span class="token punctuation">,</span>handles<span class="token punctuation">)</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>Label<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token string">'退出(&amp;q)'</span>
            <span class="token function">close</span><span class="token punctuation">(</span>gcf<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> <span class="token function">picture_menu_callback</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span>data<span class="token punctuation">,</span>handles<span class="token punctuation">)</span>
    global ah<span class="token punctuation">;</span>
    number <span class="token operator">=</span> <span class="token function">regexp</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>Label<span class="token punctuation">,</span><span class="token string">'\d'</span><span class="token punctuation">,</span><span class="token string">'match'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    imageName <span class="token operator">=</span> <span class="token function">strcat</span><span class="token punctuation">(</span><span class="token function">strcat</span><span class="token punctuation">(</span><span class="token string">'back'</span><span class="token punctuation">,</span>number<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">axes</span><span class="token punctuation">(</span><span class="token string">'DrawMode'</span><span class="token punctuation">,</span><span class="token string">'fast'</span><span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    II<span class="token operator">=</span><span class="token function">imread</span><span class="token punctuation">(</span>imageName<span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">image</span><span class="token punctuation">(</span>II<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ah <span class="token operator">=</span> <span class="token function">axes</span><span class="token punctuation">(</span><span class="token string">'DrawMode'</span><span class="token punctuation">,</span><span class="token string">'fast'</span><span class="token punctuation">,</span><span class="token string">'Color'</span><span class="token punctuation">,</span><span class="token string">'none'</span><span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">200</span> <span class="token number">420</span> <span class="token number">1</span> <span class="token number">410</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">%设置坐标轴的范围</span>
    grid off
    hold on<span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> <span class="token function">color_menu_callback</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span>data<span class="token punctuation">,</span>handles<span class="token punctuation">)</span>
    global color multiColor<span class="token punctuation">;</span>
    <span class="token function">disp</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>Label<span class="token punctuation">)</span><span class="token punctuation">;</span>
    multiColor <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">%初始化颜色状态</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span>Label<span class="token punctuation">)</span>
        <span class="token keyword">case</span> <span class="token string">'黄色(&amp;1)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">1</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'紫红色(&amp;2)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">0</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'青色(&amp;3)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">1</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'红色(&amp;4)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'绿色(&amp;5)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'蓝色(&amp;6)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">1</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'白色(&amp;7)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'五彩变换(&amp;8)'</span>
            color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            multiColor <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
    <span class="token keyword">end</span>
 
    <span class="token function">parseColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
 
<span class="token keyword">function</span> <span class="token function">slider_callback</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>event<span class="token punctuation">)</span>
    global color <span class="token punctuation">;</span>
    red_slider <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    blue_slider <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    green_slider <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'String'</span><span class="token punctuation">,</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token punctuation">[</span>red_slider<span class="token punctuation">.</span>Value<span class="token punctuation">,</span>blue_slider<span class="token punctuation">.</span>Value<span class="token punctuation">,</span>green_slider<span class="token punctuation">.</span>Value<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">parseColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span><span class="token punctuation">[</span>rbgStr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">parseColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span>
    color_text <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'Tag'</span><span class="token punctuation">,</span><span class="token string">'color_text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rbgStr <span class="token operator">=</span> <span class="token function">char</span><span class="token punctuation">(</span><span class="token function">strcat</span><span class="token punctuation">(</span><span class="token string">'red='</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
        <span class="token function">strcat</span><span class="token punctuation">(</span><span class="token string">'blue='</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">...</span>
        <span class="token function">strcat</span><span class="token punctuation">(</span><span class="token string">'green='</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color_text<span class="token punctuation">.</span>String <span class="token operator">=</span> rbgStr<span class="token punctuation">;</span>
    color_panel <span class="token operator">=</span> <span class="token function">findobj</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'Title'</span><span class="token punctuation">,</span><span class="token string">'颜色演示面板'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color_panel<span class="token punctuation">.</span>BackgroundColor <span class="token operator">=</span> color<span class="token punctuation">;</span>
<span class="token keyword">end</span>
</code></pre> 
<p><a href="https://blog.csdn.net/weixin_33806914/article/details/90663177/?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=matlab%20%E7%83%9F%E8%8A%B1&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-90663177.142%5Ev99%5Epc_search_result_base4&amp;spm=1018.2226.3001.4187">参考博文</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/959faed2cce3da4e95a768fe6cce2cc2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【MySQL】GROUP_CONCAT 运用易错点之建立方程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cda4865af1a82321c43c3a06ffbf6055/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言之冒泡排序</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
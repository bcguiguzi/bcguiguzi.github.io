<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C/C&#43;&#43;专栏】cJSON的API介绍和使用 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【C/C&#43;&#43;专栏】cJSON的API介绍和使用" />
<meta property="og:description" content="目录
前言
一，cJSON 数据类型
二，cJSON 结构体
三，创建 Json 项
四，往 JSON 项中添加数据
五，从 JSON 父项中删除 JSON 子项
六，更新 JSON 项的指定位置数据
七，拷贝 JSON 项
八，比较两个 JSON 项是否相等
九，判断当前 JSON 项的类型
十，获取当前 JSON 项的 value 值
十一，删除 JSON 项（重点）
十二，解析 JSON 项 十三，获取 JSON 项的序列化值
十四，获取当前 cJSON 版本
十五，JSON 钩子模块（了解就行）
十六，案例答疑解惑
1，测试读写的 test.json 文件内容（文件路径 E:\test.json）
2，所需要的头文件
3，写 Json 文件接口实现
4，读 Json 文件接口实现
总结
前言 cJSON 是用C语言编写的一个超轻量，可移植，单文件的 JSON 解析器，它是个开源的项目，它只有 cJSON.h 和 cJSON.c 两个文件，使用时只需要在对应的 include 和 src 目录添加进去就可以使用了，cJSON 下载地址" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7e658b2a361163c8f001d5d2eaaf2b85/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-12T18:37:38+08:00" />
<meta property="article:modified_time" content="2023-03-12T18:37:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C/C&#43;&#43;专栏】cJSON的API介绍和使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"><a href="#" rel="nofollow">前言</a></p> 
<p id="%C2%A0%E4%B8%80%EF%BC%8CcJSON%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-toc" style="margin-left:40px;"><a href="#%C2%A0%E4%B8%80%EF%BC%8CcJSON%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="nofollow">一，cJSON 数据类型</a></p> 
<p id="%C2%A0%E4%BA%8C%EF%BC%8CcJSON%20%E7%BB%93%E6%9E%84%E4%BD%93-toc" style="margin-left:40px;"><a href="#%C2%A0%E4%BA%8C%EF%BC%8CcJSON%20%E7%BB%93%E6%9E%84%E4%BD%93" rel="nofollow">二，cJSON 结构体</a></p> 
<p id="%E4%B8%89%EF%BC%8C%E5%88%9B%E5%BB%BA%20Json%20%E9%A1%B9-toc" style="margin-left:40px;"><a href="#%E4%B8%89%EF%BC%8C%E5%88%9B%E5%BB%BA%20Json%20%E9%A1%B9" rel="nofollow">三，创建 Json 项</a></p> 
<p id="%C2%A0%E5%9B%9B%EF%BC%8C%E5%BE%80%20JSON%20%E9%A1%B9%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#%C2%A0%E5%9B%9B%EF%BC%8C%E5%BE%80%20JSON%20%E9%A1%B9%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE" rel="nofollow">四，往 JSON 项中添加数据</a></p> 
<p id="%E4%BA%94%EF%BC%8C%E4%BB%8E%20JSON%20%E7%88%B6%E9%A1%B9%E4%B8%AD%E5%88%A0%E9%99%A4%C2%A0%20JSON%20%E5%AD%90%E9%A1%B9-toc" style="margin-left:40px;"><a href="#%E4%BA%94%EF%BC%8C%E4%BB%8E%20JSON%20%E7%88%B6%E9%A1%B9%E4%B8%AD%E5%88%A0%E9%99%A4%C2%A0%20JSON%20%E5%AD%90%E9%A1%B9" rel="nofollow">五，从 JSON 父项中删除  JSON 子项</a></p> 
<p id="%E5%85%AD%EF%BC%8C%E6%9B%B4%E6%96%B0%20JSON%20%E9%A1%B9%E7%9A%84%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#%E5%85%AD%EF%BC%8C%E6%9B%B4%E6%96%B0%20JSON%20%E9%A1%B9%E7%9A%84%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%95%B0%E6%8D%AE" rel="nofollow">六，更新 JSON 项的指定位置数据</a></p> 
<p id="%E4%B8%83%EF%BC%8C%E6%8B%B7%E8%B4%9D%20JSON%20%E9%A1%B9-toc" style="margin-left:40px;"><a href="#%E4%B8%83%EF%BC%8C%E6%8B%B7%E8%B4%9D%20JSON%20%E9%A1%B9" rel="nofollow">七，拷贝 JSON 项</a></p> 
<p id="%E5%85%AB%EF%BC%8C%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AA%20JSON%20%E9%A1%B9%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89-toc" style="margin-left:40px;"><a href="#%E5%85%AB%EF%BC%8C%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AA%20JSON%20%E9%A1%B9%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89" rel="nofollow">八，比较两个 JSON 项是否相等</a></p> 
<p id="%E4%B9%9D%EF%BC%8C%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%20JSON%20%E9%A1%B9%E7%9A%84%E7%B1%BB%E5%9E%8B%C2%A0%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#%E4%B9%9D%EF%BC%8C%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%20JSON%20%E9%A1%B9%E7%9A%84%E7%B1%BB%E5%9E%8B%C2%A0%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">九，判断当前 JSON 项的类型</a></p> 
<p id="%E5%8D%81%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%20JSON%20%E9%A1%B9%E7%9A%84%20value%20%E5%80%BC-toc" style="margin-left:40px;"><a href="#%E5%8D%81%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%20JSON%20%E9%A1%B9%E7%9A%84%20value%20%E5%80%BC" rel="nofollow">十，获取当前 JSON 项的 value 值</a></p> 
<p id="%E5%8D%81%E4%B8%80%EF%BC%8C%E5%88%A0%E9%99%A4%20JSON%20%E9%A1%B9%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E4%B8%80%EF%BC%8C%E5%88%A0%E9%99%A4%20JSON%20%E9%A1%B9%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89" rel="nofollow">十一，删除 JSON 项（重点）</a></p> 
<p id="%E5%8D%81%E4%BA%8C%EF%BC%8C%E8%A7%A3%E6%9E%90%20JSON%20%E9%A1%B9%C2%A0-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E4%BA%8C%EF%BC%8C%E8%A7%A3%E6%9E%90%20JSON%20%E9%A1%B9%C2%A0" rel="nofollow">十二，解析 JSON 项 </a></p> 
<p id="%E5%8D%81%E4%B8%89%EF%BC%8C%E8%8E%B7%E5%8F%96%20JSON%20%E9%A1%B9%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%80%BC-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E4%B8%89%EF%BC%8C%E8%8E%B7%E5%8F%96%20JSON%20%E9%A1%B9%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%80%BC" rel="nofollow">十三，获取 JSON 项的序列化值</a></p> 
<p id="%E5%8D%81%E5%9B%9B%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%20cJSON%20%E7%89%88%E6%9C%AC%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E5%9B%9B%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%20cJSON%20%E7%89%88%E6%9C%AC%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">十四，获取当前 cJSON 版本</a></p> 
<p id="%E5%8D%81%E4%BA%94%EF%BC%8CJSON%20%E9%92%A9%E5%AD%90%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E4%BA%94%EF%BC%8CJSON%20%E9%92%A9%E5%AD%90%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">十五，JSON 钩子模块（了解就行）</a></p> 
<p id="%E5%8D%81%E5%85%AD%EF%BC%8C%E6%A1%88%E4%BE%8B%E7%AD%94%E7%96%91%E8%A7%A3%E6%83%91-toc" style="margin-left:40px;"><a href="#%E5%8D%81%E5%85%AD%EF%BC%8C%E6%A1%88%E4%BE%8B%E7%AD%94%E7%96%91%E8%A7%A3%E6%83%91" rel="nofollow">十六，案例答疑解惑</a></p> 
<p id="1%EF%BC%8C%E6%B5%8B%E8%AF%95%E8%AF%BB%E5%86%99%E7%9A%84%20test.json%20%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%EF%BC%88%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%20E%3A%5Ctest.json%EF%BC%89-toc" style="margin-left:80px;"><a href="#1%EF%BC%8C%E6%B5%8B%E8%AF%95%E8%AF%BB%E5%86%99%E7%9A%84%20test.json%20%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%EF%BC%88%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%20E%3A%5Ctest.json%EF%BC%89" rel="nofollow">1，测试读写的 test.json 文件内容（文件路径 E:\test.json）</a></p> 
<p id="2%EF%BC%8C%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#2%EF%BC%8C%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6" rel="nofollow">2，所需要的头文件</a></p> 
<p id="3%EF%BC%8C%E5%86%99%C2%A0Json%C2%A0%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0-toc" style="margin-left:80px;"><a href="#3%EF%BC%8C%E5%86%99%C2%A0Json%C2%A0%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0" rel="nofollow">3，写 Json 文件接口实现</a></p> 
<p id="4%EF%BC%8C%E8%AF%BB%20Json%20%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0-toc" style="margin-left:80px;"><a href="#4%EF%BC%8C%E8%AF%BB%20Json%20%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0" rel="nofollow">4，读 Json 文件接口实现</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2>前言</h2> 
<p><span style="color:#956fe7;">cJSON </span>是用C语言编写的一个超轻量，可移植，单文件的 JSON 解析器，它是个开源的项目，它只有 <span style="color:#956fe7;">cJSON.h</span> 和 <span style="color:#956fe7;">cJSON.c</span> 两个文件，使用时只需要在对应的 <span style="color:#956fe7;">include </span>和 <span style="color:#956fe7;">src </span>目录添加进去就可以使用了，<a class="link-info" href="https://github.com/DaveGamble/cJSON" title="cJSON 下载地址">cJSON 下载地址</a></p> 
<h3 id="%C2%A0%E4%B8%80%EF%BC%8CcJSON%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">一，cJSON 数据类型</h3> 
<ul><li><span style="color:#956fe7;">&lt;&lt;</span> 是左移运算符，<a class="link-info" href="https://baike.baidu.com/item/%E5%B7%A6%E7%A7%BB%E8%BF%90%E7%AE%97%E7%AC%A6/7726536?fromtitle=%3C%3C&amp;fromid=22375841" rel="nofollow" title="左移运算符介绍">左移运算符介绍</a></li><li>这是 <span style="color:#956fe7;">cJSON</span> 用于类型判断的自定义宏，只需要了解是啥类型就行</li></ul> 
<p><img alt="" src="https://images2.imgbox.com/b3/a9/EHECCzwd_o.png"></p> 
<h3 id="%C2%A0%E4%BA%8C%EF%BC%8CcJSON%20%E7%BB%93%E6%9E%84%E4%BD%93">二，cJSON 结构体</h3> 
<ul><li>整个 JSON 文档里的数据其实就是一个树形结构，每个节点是一个双向链表，<span style="color:#956fe7;">child </span>指向子 JSON 项</li><li><span style="color:#956fe7;">string </span>表示的是 键值对中 key 的名称</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/39/93/TBnGP7hn_o.png"></p> 
<h3 id="%E4%B8%89%EF%BC%8C%E5%88%9B%E5%BB%BA%20Json%20%E9%A1%B9">三，创建 Json 项</h3> 
<ul><li>常用的七个创建指定 <span style="color:#956fe7;">数据类型</span> JSON 项</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/c2/30/iXxWFgko_o.png"></p> 
<ul><li> 创建 <span style="color:#956fe7;">数组</span> 的同时进行初始化</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/70/c3/dBWIUVN4_o.png"></p> 
<ul><li>以下不常用 </li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/fa/fa/JCWaLBnp_o.png"><img alt="" src="https://images2.imgbox.com/67/db/FVYKX6nj_o.png"></p> 
<h3 id="%C2%A0%E5%9B%9B%EF%BC%8C%E5%BE%80%20JSON%20%E9%A1%B9%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE">四，往 JSON 项中添加数据</h3> 
<ul><li>针对 <span style="color:#956fe7;">数组</span> 通过 <span style="color:#956fe7;">item </span>传入 JSON 项（数组或对象）</li><li>针对 <span style="color:#956fe7;">对象</span> 通过 <span style="color:#956fe7;">键（string）值（item）对</span> 传入 JSON 项（数组或对象）</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/ae/ff/EHdGpXmR_o.png"></p> 
<ul><li>往已有的 JSON 对象中添加指定 <span style="color:#956fe7;">键（name）值（第三个参数）对 </span>类型数据</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/8f/af/6goQjP1Y_o.png"></p> 
<ul><li>以下不常用</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/0f/ba/bOehvQmp_o.png"><img alt="" src="https://images2.imgbox.com/b6/91/nOfC5GYl_o.png"></p> 
<h3 id="%E4%BA%94%EF%BC%8C%E4%BB%8E%20JSON%20%E7%88%B6%E9%A1%B9%E4%B8%AD%E5%88%A0%E9%99%A4%C2%A0%20JSON%20%E5%AD%90%E9%A1%B9">五，从 JSON 父项中删除  JSON 子项</h3> 
<ul><li>通过 <span style="color:#956fe7;">指针</span>，<span style="color:#956fe7;">下标 </span>或 <span style="color:#956fe7;">键值</span> 从父 JSON 项中删除指定项</li><li><span style="color:#956fe7;">sensitive </span>表示对传入的 <span style="color:#956fe7;">键值</span> 大小写敏感</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/5f/c7/XgBxMZTy_o.png"></p> 
<h3 id="%E5%85%AD%EF%BC%8C%E6%9B%B4%E6%96%B0%20JSON%20%E9%A1%B9%E7%9A%84%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%95%B0%E6%8D%AE">六，更新 JSON 项的指定位置数据</h3> 
<ul><li>针对 <span style="color:#956fe7;">数组 </span>传入的 <span style="color:#956fe7;">下标（which） </span>不能超过数组长度</li><li>针对 <span style="color:#956fe7;">对象 </span>传入的 <span style="color:#956fe7;">子对象（item）</span>或 <span style="color:#956fe7;">键值（string）</span> 要存在</li><li><span style="color:#956fe7;">sensitive </span>表示对传入的 <span style="color:#956fe7;">键值（string）</span> 大小写敏感</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/cd/1a/Xjlm0mUU_o.png"></p> 
<h3 id="%E4%B8%83%EF%BC%8C%E6%8B%B7%E8%B4%9D%20JSON%20%E9%A1%B9">七，拷贝 JSON 项</h3> 
<ul><li>返回值为传入的 JSON项（<span style="color:#956fe7;">item</span>）的拷贝值</li><li><span style="color:#956fe7;">recurse </span>表示是否递归拷贝，也就是是否拷贝 <span style="color:#956fe7;">item </span>的 <span style="color:#956fe7;">子JSON 项</span>（数组或对象）</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/ac/98/1ZO0IRau_o.png"></p> 
<h3 id="%E5%85%AB%EF%BC%8C%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AA%20JSON%20%E9%A1%B9%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89">八，比较两个 JSON 项是否相等</h3> 
<ul><li><span style="color:#956fe7;">case_sensitive </span>表示比对的 JSON项(数组或对象) 的 <span style="color:#956fe7;">键值 </span>是否区分大小写</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/b7/a1/PkazfQPX_o.png"></p> 
<h3 id="%E4%B9%9D%EF%BC%8C%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%20JSON%20%E9%A1%B9%E7%9A%84%E7%B1%BB%E5%9E%8B%C2%A0%E2%80%8B%E7%BC%96%E8%BE%91">九，判断当前 JSON 项的类型</h3> 
<p><img alt="" src="https://images2.imgbox.com/41/df/oPBNBf9P_o.png"></p> 
<h3 id="%E5%8D%81%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%20JSON%20%E9%A1%B9%E7%9A%84%20value%20%E5%80%BC">十，获取当前 JSON 项的 value 值</h3> 
<ul><li>传入 <span style="color:#956fe7;">item（数组或对象）</span>会先判断其是否为接口名称类型，不是返回 NULL 是返回其 value 值</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="207" src="https://images2.imgbox.com/ae/8d/PJu1Kbz4_o.png" width="686"></p> 
<ul><li>可以用来检查 JSON 文档是否格式写错</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/b4/79/Qd1LpEe7_o.png"></p> 
<ul><li>传入<span style="color:#956fe7;">键值（string）</span>返回其值（子JSON项），<span style="color:#956fe7;">sensitive</span>表示区分大小写</li><li>判断是否存在指定 <span style="color:#956fe7;">键值（string）</span>的 子JSON项</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91" style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f5/95/snmiYiDX_o.png"></p> 
<ul><li>以下接口有对应注释进行解释</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91" style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ee/ea/gMQLrEcj_o.png"><img alt="" src="https://images2.imgbox.com/92/da/KIoD5uFL_o.png"></p> 
<h3 id="%E5%8D%81%E4%B8%80%EF%BC%8C%E5%88%A0%E9%99%A4%20JSON%20%E9%A1%B9%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89">十一，删除 JSON 项（重点）</h3> 
<ul><li>一定要记得调用这接口，它会将当前节点及其子节点都会进行删除（<span style="color:#956fe7;">内存释放</span>）</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/b7/1e/TO5dsDpm_o.png"></p> 
<h3 id="%E5%8D%81%E4%BA%8C%EF%BC%8C%E8%A7%A3%E6%9E%90%20JSON%20%E9%A1%B9%C2%A0">十二，解析 JSON 项 </h3> 
<ul><li>第一个经常用来解析 JSON 格式的字符串</li></ul> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1e/e7/vVKlBBdW_o.png"></p> 
<ul><li>以下两个不常用 </li></ul> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9d/8b/bAvSOm0R_o.png"><img alt="" src="https://images2.imgbox.com/77/44/PXhoLWtI_o.png"></p> 
<h3 id="%E5%8D%81%E4%B8%89%EF%BC%8C%E8%8E%B7%E5%8F%96%20JSON%20%E9%A1%B9%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%80%BC">十三，获取 JSON 项的序列化值</h3> 
<ul><li>返回一个带格式化（有换行）的字符串（和JSON文档中的格式一样）</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/93/eb/OW3r3gXM_o.png"></p> 
<ul><li> 返回一个未格式化（没有换行）的字符串（所有数据都在一行上）</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/da/6e/OoGbtnrH_o.png"></p> 
<ul><li>prebuffer是指定缓冲区的大小</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/59/59/wdF031u8_o.png"></p> 
<ul><li>没用过</li></ul> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" src="https://images2.imgbox.com/c6/68/8yCdkscO_o.png"></p> 
<h3 id="%E5%8D%81%E5%9B%9B%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%20cJSON%20%E7%89%88%E6%9C%AC%E2%80%8B%E7%BC%96%E8%BE%91">十四，获取当前 cJSON 版本</h3> 
<p><img alt="" src="https://images2.imgbox.com/18/36/FvCGhcJo_o.png"></p> 
<h3 id="%E5%8D%81%E4%BA%94%EF%BC%8CJSON%20%E9%92%A9%E5%AD%90%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91">十五，JSON 钩子模块（了解就行）</h3> 
<p><img alt="" src="https://images2.imgbox.com/a2/2c/q7QrPIPa_o.png"><img alt="" src="https://images2.imgbox.com/34/61/xWvqi9pf_o.png"><img alt="" src="https://images2.imgbox.com/57/c3/vQeav8dH_o.png"></p> 
<h3 id="%E5%8D%81%E5%85%AD%EF%BC%8C%E6%A1%88%E4%BE%8B%E7%AD%94%E7%96%91%E8%A7%A3%E6%83%91">十六，案例答疑解惑</h3> 
<h4 id="1%EF%BC%8C%E6%B5%8B%E8%AF%95%E8%AF%BB%E5%86%99%E7%9A%84%20test.json%20%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%EF%BC%88%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%20E%3A%5Ctest.json%EF%BC%89">1，测试读写的 test.json 文件内容（文件路径 E:\test.json）</h4> 
<pre><code class="language-javascript">  {
      "FirstName": "Fu",
      "LastName": "Cong",
      "Age": 24,
      "Address": {
          "Street": "首创悦榕汇",
          "City": "BeiJing",
          "Country": "BeiJing"
      },
      "Phone numbers": [
          "+44 12345",
          678910
      ]
  }
</code></pre> 
<h4 id="2%EF%BC%8C%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6">2，所需要的头文件</h4> 
<pre><code class="language-cpp">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "cJSON.h"</code></pre> 
<h4 id="3%EF%BC%8C%E5%86%99%C2%A0Json%C2%A0%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0">3，写 Json 文件接口实现</h4> 
<pre><code class="language-cpp">void writeJson()
{
    cJSON *obj_root;
    obj_root = cJSON_CreateObject();    //创建根数据对象
    cJSON_AddStringToObject(obj_root,"FirstName","Fu");
    cJSON_AddStringToObject(obj_root,"LastName","Cong");
    cJSON_AddNumberToObject(obj_root, "Age",24);

    cJSON *subObj_addr;
    subObj_addr = cJSON_CreateObject();
    cJSON_AddItemToObject(subObj_addr,"Street",cJSON_CreateString("首创悦榕汇"));
    cJSON_AddItemToObject(subObj_addr,"City",cJSON_CreateString("BeiJing"));
    cJSON_AddItemToObject(subObj_addr,"Country",cJSON_CreateString("BeiJing"));

    cJSON *subObj_arr;
    subObj_arr = cJSON_CreateArray();   //创建数组对象
    cJSON_AddItemToArray(subObj_arr,cJSON_CreateString("+44 12345"));
    cJSON_AddItemToArray(subObj_arr,cJSON_CreateNumber(678910));

    cJSON_AddItemToObject(obj_root,"Address",subObj_addr);
    cJSON_AddItemToObject(obj_root,"Phone numbers",subObj_arr);

    char  *out = cJSON_Print(obj_root);

    FILE *file = fopen("E:\\test.json","w");
    if(file != NULL){
        fputs(out,file);    //写入文件流
        fclose(file);   //关闭文件流
        
        //一定要记得释放内存
        cJSON_Delete(obj_root);
        free(out);
    }
}</code></pre> 
<p>效果图如下</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5d/d5/kFgErz4e_o.png"></p> 
<h4 id="4%EF%BC%8C%E8%AF%BB%20Json%20%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0">4，读 Json 文件接口实现</h4> 
<pre><code class="language-cpp">//返回指定文件的所有内容
char *readFile(char *path)
{
    FILE *file = fopen(path,"r");;
    char *data = NULL;
    long length;    //文件大小
    if(file != NULL){
        //文件打开成功
        fseek(file,0,SEEK_END); //将文件流光标移动到文件末尾
        length = ftell(file);  //获取文件内容的大小(相对于文件开头的位移量来表示)
        data = (char*)malloc((length +1)*sizeof(char));
        rewind(file);   //将文件光标重置到文件开头位置
        length = fread(data,1,length,file);   //一次性读取所有字符串
        data[length] = 0;
        fclose(file);   //关闭文件流
        return data;
    }
    return NULL;
}
</code></pre> 
<pre><code class="language-cpp">//解析从 JSON 文件中读取的数据
void readJson()
{
    char *jsonData = readFile("E:\\test.json");
    if(jsonData == NULL){
        printf("%s","File is empty");
    }

    cJSON *json_root = cJSON_Parse(jsonData);
    if(cJSON_IsObject(json_root)){
        //JSON根数据是对象
        cJSON *subobj_one = cJSON_GetObjectItem(json_root,"FirstName");
        if(cJSON_IsString(subobj_one)){
            printf("%s:%s\n","FirstName",cJSON_GetStringValue(subobj_one));
        }
        cJSON *subobj_two = cJSON_GetObjectItem(json_root,"LastName");
        if(cJSON_IsString(subobj_two)){
            printf("%s:%s\n","LastName",cJSON_GetStringValue(subobj_two));
        }
        cJSON *subobj_three = cJSON_GetObjectItem(json_root,"Age");
        if(cJSON_IsNumber(subobj_three)){
            printf("%s:%2.0f\n","Age",cJSON_GetNumberValue(subobj_three));
        }
        cJSON *subObj_four = cJSON_GetObjectItem(json_root,"Address");
        if(cJSON_IsObject(subObj_four)){
            //子 JSON 项是对象
            cJSON *subSubobj_one = cJSON_GetObjectItem(subObj_four,"Street");
            if(cJSON_IsString(subSubobj_one)){
                
                printf("%s:%s\n","Street",cJSON_GetStringValue(subSubobj_one));
            }
            cJSON *subSubobj_two = cJSON_GetObjectItem(subObj_four,"City");
            if(cJSON_IsString(subSubobj_two)){
                printf("%s:%s\n","City",cJSON_GetStringValue(subSubobj_two));
            }
            cJSON *subSubobj_three = cJSON_GetObjectItem(subObj_four,"Country");
            if(cJSON_IsString(subSubobj_three)){
                printf("%s:%s\n","Country",cJSON_GetStringValue(subSubobj_three));
            }
        }
        cJSON *subArr_one = cJSON_GetObjectItem(json_root,"Phone numbers");
        if(cJSON_IsArray(subArr_one)){
            //子 JSON 项是数组
            int array_size = cJSON_GetArraySize(subArr_one);
            for(int i=0; i&lt; array_size; i++){
                cJSON *arrItem = cJSON_GetArrayItem(subArr_one,i);
                //用 cJSON 自定义的宏判断 JSON 类型
                if(arrItem-&gt;type == cJSON_String){
                    printf("%s:%s\n","Phone number1",arrItem-&gt;valuestring);
                }
                if(arrItem-&gt;type == cJSON_Number){
                    printf("%s:%d\n","Phone number2",arrItem-&gt;valueint);
                }
            }
        }
    }else if(cJSON_IsArray(json_root)){
        //JSON根数据是对象
        //和上面类似，根据已知的 JSON 文档内容调用相应 cJSON API 无限套娃
    }

    if(json_root){
        //一定要记得释放内存
        cJSON_Delete(json_root);
        free(jsonData);
    }
}</code></pre> 
<p>效果图如下</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e1/6f/zjeXtNIi_o.png"></p> 
<h2 id="%E6%80%BB%E7%BB%93">总结</h2> 
<ul><li>开发环境是 VsCode，如何配置其开发环境看这篇文章 <a class="link-info" href="https://blog.csdn.net/weixin_43729127/article/details/127115625?spm=1001.2014.3001.5501" title="【C/C++】VS Code中C/C++环境搭建">【C/C++】VS Code中C/C++环境搭建</a></li><li>相关 JSON 知识可看这篇文章 <a class="link-info" href="https://blog.csdn.net/weixin_43729127/article/details/127505062?spm=1001.2014.3001.5501" title="【Qt专栏】JSON知识储备">【Qt专栏】JSON知识储备</a></li><li>以上是针对cJSON API的学习总结，可能不太完善，后续会完善文章内容的！！！</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f13daf09ed3df76bee19d068ce854571/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python练习代码-第十一章-字典练习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3127499bdfb19942d006e931d25a12dc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">kali linux 通过粘贴板攻击对方服务器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
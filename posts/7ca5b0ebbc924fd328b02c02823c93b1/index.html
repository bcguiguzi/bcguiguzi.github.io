<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Shell脚本：循环语句（for，while,until)；函数；数组 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Shell脚本：循环语句（for，while,until)；函数；数组" />
<meta property="og:description" content="文章目录 循环语句：for语句结构for语句示例 While语句结构while示例 双重循环双重循环示例 until语句until语句示例 Shell函数：Shell函数示例：调用函数的方法函数的作用范围递归函数： Shell数组：应用场景数组的概括调用数组的方法数组示例获取数组长度 循环语句： for语句结构 for循环：指定次数循环 遍历 ：将集合当中每一个元素都读取一遍
读取不同的变量值，用来逐个执行同一组命令
语法先写for ,每一个都要加done；变量名从取值列表中去拿
结构形式：遍历集合
for 变量名 in 取值列表 do 命令序列 done 结构形式：指定次数
for ((i=1;i&lt;=5;i&#43;&#43;)) do 命令序列 done for循环语句的结构图
for语句示例 遍历集合：
批量添加用户将用户名存放在users.txt文件中，每行一个，初始密码均设为123456
示例二：
IP地址存放在ipadds.txt文件中，每行一个
使用ping命令检测各主机的连通性
-c 发几个包 -i 间隔几秒 -w等待几秒
#!/bin/bash #定义一个集合list，赋值是否查看到的文件中的IP地址 list=$(cat /root/ip.txt) #遍历集合中的IP地址 for ip in $list do ping -c 3 -s 0.2 -w 3 $ip if [ $? -eq 0 ];then echo &#34;主机${ip}存活&#34; fi done 示例三：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7ca5b0ebbc924fd328b02c02823c93b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-26T15:01:36+08:00" />
<meta property="article:modified_time" content="2020-07-26T15:01:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Shell脚本：循环语句（for，while,until)；函数；数组</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">循环语句：</a></li><li><ul><li><a href="#for_2" rel="nofollow">for语句结构</a></li><li><ul><li><a href="#for_25" rel="nofollow">for语句示例</a></li></ul> 
   </li><li><a href="#While_68" rel="nofollow">While语句结构</a></li><li><ul><li><a href="#while_83" rel="nofollow">while示例</a></li></ul> 
   </li><li><a href="#_92" rel="nofollow">双重循环</a></li><li><ul><li><a href="#_96" rel="nofollow">双重循环示例</a></li></ul> 
   </li><li><a href="#until_100" rel="nofollow">until语句</a></li><li><ul><li><a href="#until_102" rel="nofollow">until语句示例</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Shell_119" rel="nofollow">Shell函数：</a></li><li><ul><li><a href="#Shell_133" rel="nofollow">Shell函数示例：</a></li><li><a href="#_138" rel="nofollow">调用函数的方法</a></li><li><a href="#_143" rel="nofollow">函数的作用范围</a></li><li><a href="#_154" rel="nofollow">递归函数：</a></li></ul> 
  </li><li><a href="#Shell_167" rel="nofollow">Shell数组：</a></li><li><ul><li><a href="#_168" rel="nofollow">应用场景</a></li><li><a href="#_172" rel="nofollow">数组的概括</a></li><li><a href="#_180" rel="nofollow">调用数组的方法</a></li><li><a href="#_189" rel="nofollow">数组示例</a></li><li><a href="#_194" rel="nofollow">获取数组长度</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>循环语句：</h2> 
<h3><a id="for_2"></a>for语句结构</h3> 
<p>for循环：指定次数循环 遍历 ：将集合当中每一个元素都读取一遍<br> 读取不同的变量值，用来逐个执行同一组命令<br> 语法先写for ,每一个都要加done；变量名从取值列表中去拿</p> 
<p>结构形式：遍历集合</p> 
<pre><code class="prism language-cpp"><span class="token keyword">for</span> 变量名 in 取值列表
<span class="token keyword">do</span>
     命令序列
done</code></pre> 
<p>结构形式：指定次数</p> 
<pre><code class="prism language-cpp"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">do</span>
    命令序列
done</code></pre> 
<p>for循环语句的结构图<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/26/e6/XC2wAjtA_o.png"></p> 
<h4><a id="for_25"></a>for语句示例</h4> 
<p>遍历集合：<br> 批量添加用户将用户名存放在users.txt文件中，每行一个，初始密码均设为123456<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/53/ce/oXaBzqdD_o.png"><br> 示例二：<br> IP地址存放在ipadds.txt文件中，每行一个<br> 使用ping命令检测各主机的连通性<br> -c 发几个包 -i 间隔几秒 -w等待几秒</p> 
<pre><code class="prism language-cpp">#<span class="token operator">!</span><span class="token operator">/</span>bin<span class="token operator">/</span>bash
#定义一个集合list，赋值是否查看到的文件中的IP地址
list<span class="token operator">=</span>$<span class="token punctuation">(</span>cat <span class="token operator">/</span>root<span class="token operator">/</span>ip<span class="token punctuation">.</span>txt<span class="token punctuation">)</span>
#遍历集合中的IP地址
<span class="token keyword">for</span> ip in $list
<span class="token keyword">do</span>  
  ping <span class="token operator">-</span>c <span class="token number">3</span> <span class="token operator">-</span>s <span class="token number">0.2</span> <span class="token operator">-</span>w <span class="token number">3</span> $ip  
  <span class="token keyword">if</span> <span class="token punctuation">[</span> $<span class="token operator">?</span> <span class="token operator">-</span>eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>then  
  echo <span class="token string">"主机${ip}存活"</span>  
  fi
done</code></pre> 
<p>示例三：<br> 用指定次数输入<br> 符号后面可以跟整数，也可以跟调用的变量<br> ++ 自身变量＋1 – 自身变量-1 let 可以单独用<br> +=5 自身变量＋5<br> -=5 自身变量-5<br> *=5 自身变量*5<br> /=5 自身变量/5<br> %=5 自生变量取余5<br> （（））要么用括号要么用let<br> 输出1-10的数<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/4f/d7/sm48YWp9_o.png"><br> 示例四：<br> 输出最终结果：<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/2d/25/3nrfJMkg_o.png"><br> 最后输出的结果为11，因为是输出10；然后进行let i++那一步加1变为11，去和i&lt;=10去比较，不成立，数据就会输出，最后结尾加了输出最后结果，所以最后结果就为11；break退出当前循环</p> 
<p>示例五：<br> 将1-100中的奇数进行求和<br> 注意：sum=0必须放在循环语句的上面（放在do下面每次sum都是从0开始）<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/1d/33/zpPx643b_o.png"></p> 
<h3><a id="While_68"></a>While语句结构</h3> 
<p>重复测试某个条件，只要条件成立则反复执行<br> ●for和while的区别<br> for可以用于去做遍历，指定次数<br> While 会一直循环的去执行，直到不成立就会停止<br> 格式：</p> 
<pre><code class="prism language-cpp">#<span class="token operator">!</span><span class="token operator">/</span>bin<span class="token operator">/</span>bash
<span class="token keyword">while</span> 条件测试操作
<span class="token keyword">do</span>
   命令序列
done</code></pre> 
<p>while结构图：<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/41/d1/GIsMaKON_o.png"></p> 
<h4><a id="while_83"></a>while示例</h4> 
<p>示例一：<br> 用while语句输出1-20的数<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/d2/65/3BeFyf1X_o.png"><br> 示例二：<br> 1-100不能被3整除的数：写法很多，这里用if写<br> continue：跳过continue以下语句，直接进入下一次循环<br> break：退出本次循环语句<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/2b/5d/CwiTSAv6_o.png"></p> 
<h3><a id="_92"></a>双重循环</h3> 
<p>外层循环执行一次，内存循环执行一遍（周期循环）<br> -n：代表不换行输出<br> -e: 可带转译字符</p> 
<h4><a id="_96"></a>双重循环示例</h4> 
<p>等腰三角形<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/b8/dd/Njmo4FKr_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/bb/27/1KCdeXCf_o.png"></p> 
<h3><a id="until_100"></a>until语句</h3> 
<p>当条件不成立时，实行until语句，当条件成立时就不会实行until语句</p> 
<h4><a id="until_102"></a>until语句示例</h4> 
<p>实例一：<br> 计算1-50的和值<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/06/1b/OKrfYJIS_o.png"><br> 示例二：为指定用户发送在线消息<br> 若用户不在线（未登录系统），则每5s试一次，直至用户登录系统后在发送信息用户名于消息通过位置参数传递给脚本<br> 思路：<br> 1.位置参数大于1<br> 2.姓名属于系统用户 /etc/passwd<br> 3.用户是否在线 until who<br> 4.发送消息<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/5e/a9/g14NJlut_o.png"><br> 当用户在线时，会受到信息<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/0a/0f/TcttL67h_o.png"><br> 当用户不在线时，就不会收到：用户不在线<br> 件不成立反复执行<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/24/1a/EDHnJevQ_o.png"></p> 
<h2><a id="Shell_119"></a>Shell函数：</h2> 
<p>将命令序列按格式写在一起<br> 可方便重复使用命令序列<br> shell函数定义</p> 
<pre><code class="prism language-cpp"><span class="token punctuation">[</span> function <span class="token punctuation">]</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       命令序列
       <span class="token punctuation">[</span><span class="token keyword">return</span> x<span class="token punctuation">]</span>      ##使用<span class="token keyword">return</span>或exit可以显式地结束函数
<span class="token punctuation">}</span></code></pre> 
<p>大括号范围内都是函数的内容，有时候会牵扯到一些高级用法：传入参数和返回值<br> return：可以返回状态码或者数据（echo输出）<br> exit：只返回状态码</p> 
<h3><a id="Shell_133"></a>Shell函数示例：</h3> 
<p>两个数字求和<br> 调用函数要以命令的方式<br> 函数写好了要调用它才起作用！！<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/bc/aa/MHVFx8IR_o.png"></p> 
<h3><a id="_138"></a>调用函数的方法</h3> 
<p>函数名 [参数1] [参数2]<br> 参数的表示方法：$ 1 $ 2 $ 3 ……$ {10} ${11}<br> 如果想直接将这个数值拿过来用需要用echo<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/0b/b0/sukhYh3j_o.png"></p> 
<h3><a id="_143"></a>函数的作用范围</h3> 
<p>函数在shell脚本中仅在当前shell环境中有效<br> shell脚本中变量默认全局有效<br> 将变量限定在函数内部使用local命令<br> 一旦在函数内通过local来定义变量，只能在函数体内识别<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/b9/1f/gIJuJrse_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/98/50/wSUQMlhn_o.png"><br> local定义的函数体内的变量，可以通过函数体外先将函数赋值给一个变量，<br> 再输出这个变量来引用local变量的值<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/da/27/FD2wknU7_o.png"></p> 
<h3><a id="_154"></a>递归函数：</h3> 
<p>调用自己本身<br> 示例：<br> 递归遍历目录/var/log<br> 通过定义递归函数list_files来实现<br> 第一次循环：<br> $1 /var/log<br> $2 一个空格</p> 
<p>第二次循环：<br> $1=$1/ $m /var/log/anaconda<br> $2=一个空格+$2 即两个空格<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/1c/01/YX3X35f6_o.png"></p> 
<h2><a id="Shell_167"></a>Shell数组：</h2> 
<h3><a id="_168"></a>应用场景</h3> 
<p>获取数组长度<br> 获取元素长度<br> 遍历元素；元素切片；元素替换；元素删除</p> 
<h3><a id="_172"></a>数组的概括</h3> 
<p>数组：相同类型的数据集合<br> [11.22.33.44] 在内存中开辟了连续的空间，往往配合循环去使用<br> 数组名称 ：arr=（11 22 33 44） arr就是数组名称<br> 数组元素：11 22 33 44 每一个都是数组都是其中的一个元素<br> 数组长度：有4个元素，长度为4<br> 数组下标：第一个数字的下标值是0；依次后推</p> 
<h3><a id="_180"></a>调用数组的方法</h3> 
<p>格式 ：echo ${num[*]} <em>代表所有下标<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/89/4e/QxEzERA0_o.png"><br> 第二种将</em>换为@也可以调用所有；单独调用：要加下标<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/ee/33/AapS7kbU_o.png"><br> 第三种：先定义给列表在赋予给数组<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/83/3a/P4dv5YKt_o.png"><br> 方法四用于替换的，用于替换某一个元素<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/9f/cc/GTIXUX5V_o.png"></p> 
<h3><a id="_189"></a>数组示例</h3> 
<p>1.创建存放(1-100)的奇数数组<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/4a/27/CbL6Aj4X_o.png"><br> 2.创建任意数字及长度的数组，根据客户需求加入元素<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/69/24/yH0MdQvW_o.png"></p> 
<h3><a id="_194"></a>获取数组长度</h3> 
<p>${#数组名[*]}<br> 读取某下标赋值：<br> ${数组名[下标]}<br> 数组遍历：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">for</span> v in $<span class="token punctuation">{<!-- --></span>arr<span class="token punctuation">[</span>@<span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token keyword">do</span>
  echo <span class="token string">"$v"</span>
done</code></pre> 
<p>示例1.<br> 班级考试分数，判断分数是否大于60，未满足60直接赋予60<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/41/ff/Vs0ywMM4_o.png"><br> 示例2:比较数组大小，将大的数值输出出来<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/3d/d7/MYcNzxZ3_o.png"><br> 排序算法：冒泡排序<br> 每一轮的次数=数组长度-1<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/4f/d5/BeVrnOsm_o.png"><br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/44/95/yWlqOpyP_o.png"><br> 数组切片：<br> 格式：${数组名[<em>]：起始位置：长度}<br> 示例：起始位置为1；长度为3；输出出来<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/7a/0b/M4ZyTnQF_o.png">数组的替换：<br> ${数组名[</em>]/查找字符/替换字符}，这种方法不会变更原有的值、<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/c6/98/8fW9zOkr_o.png"><br> 想改变原有的值，直接重新定义，覆盖原有的<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/36/41/6rgU3cth_o.png"><br> 数组删除：<br> unset<br> 删除单个元素；删除单个下标为2的元素<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/54/ef/5GIt0bWC_o.png"><br> 删除整个数组<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/f4/3a/pFr6ZxoW_o.png"><br> 数组删除示例：随意输入一段数组，将数组中少于60的数字删除<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/47/2d/2cJScvV5_o.png"><br> bash命令<br> 命令语法：sh [-nvx]脚本名<br> 常用选项：-n -v -x<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/59/a3/fr1zsRSf_o.png"><br> set 命令 推荐使用echo<br> set -x:开启调节模式<br> set +x:关闭调节模式<br> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/46/47/0MF9Z0jg_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5e59861c6caadb0b3642cf9515c8003/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">shell循环语句及函数和数组使用（for、while、until循环语句的解释及范例）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b0d9c38cf06e15f966ab15d71592d0be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">虚拟DOM 之 Snabbdom 二、源码解析(h函数，虚拟DOM对比，Diff算法)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
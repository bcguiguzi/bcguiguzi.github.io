<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python unittest单元测试框架 —— 批量执行用例与HTML测试报告 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python unittest单元测试框架 —— 批量执行用例与HTML测试报告" />
<meta property="og:description" content="批量执行用例 defaultTestLoader或者TestLoader()用于匹配执行目录下的用例
unittest.defaultTestLoader.discover( start_dir, pattern=&#39;test*.py&#39;, top_level_dir=None)
start_dir ：要测试的模块名或测试用例目录。
pattern=&#39;test*.py&#39; ：表示用例文件名的匹配原则。星号“*”表示任意多个字符。
top_level_dir=None ：测试模块的顶层目录。None &lt;=&gt; 测试用例不是放在多级目录中中）。
示例：
#构建测试用例集 discover=unittest.defaultTestLoader.discover(&#39;../testDirectory, pattern=&#39;*_test.py&#39;) #执行测试 runner = unittest.TextTestRunner() runner.run(discover) Html测试报告 下载HTMLTestRunner测试报告生成文件
HTMLTestRunner.py下载地址
采用HTMLTestRunner实现产生Html测试报告，python3.X需要改写
第94行，将import StringIO修改成import io 第539行，将self.outputBuffer = StringIO.StringIO()修改成self.outputBuffer= io.StringIO() 第642行，将if not rmap.has_key(cls):修改成if not cls in rmap: 第766行，将uo = o.decode(&#39;latin-1&#39;)修改成uo = e 第772行，将ue = e.decode(&#39;latin-1&#39;)修改成ue = e 第631行，将print &gt;&gt;sys.stderr, &#39;\nTime Elapsed: %s&#39; % (self.stopTime-self.startTime)修改成print(sys.stderr, &#39;\nTime Elapsed: %s&#39; % (self.stopTime-self.startTime)) 使用方法
fp=open(filename, &#39;wb&#39;) # 写方式打开报告文件 runner = HTMLTestRunner." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/7619edfb06c74e55bcfda5d2837904cb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-01T20:49:35+08:00" />
<meta property="article:modified_time" content="2023-11-01T20:49:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python unittest单元测试框架 —— 批量执行用例与HTML测试报告</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>批量执行用例</h3> 
<p>defaultTestLoader或者TestLoader()用于匹配执行目录下的用例</p> 
<p><em>unittest.defaultTestLoader.discover( start_dir, pattern='test*.py', top_level_dir=None)</em></p> 
<p>start_dir ：要测试的模块名或测试用例目录。</p> 
<p>pattern='test*.py' ：表示用例文件名的匹配原则。星号“*”表示任意多个字符。</p> 
<p>top_level_dir=None ：测试模块的顶层目录。None &lt;=&gt; 测试用例不是放在多级目录中中）。</p> 
<p>示例：</p> 
<pre><code>#构建测试用例集
discover=unittest.defaultTestLoader.discover('../testDirectory, pattern='*_test.py')
#执行测试
runner = unittest.TextTestRunner()
runner.run(discover)</code></pre> 
<p></p> 
<h3>Html测试报告</h3> 
<p>下载HTMLTestRunner测试报告生成文件</p> 
<p><a href="https://link.zhihu.com/?target=http%3A//tungwaiyip.info/software/HTMLTestRunner_0_8_2/HTMLTestRunner.py" rel="nofollow" title="HTMLTestRunner.py下载地址">HTMLTestRunner.py下载地址</a></p> 
<p>采用HTMLTestRunner实现产生Html测试报告，python3.X需要改写</p> 
<blockquote>
  第94行，将import StringIO修改成import io 
 <br> 第539行，将self.outputBuffer = StringIO.StringIO()修改成self.outputBuffer= io.StringIO() 
 <br> 第642行，将if not rmap.has_key(cls):修改成if not cls in rmap: 
 <br> 第766行，将uo = o.decode('latin-1')修改成uo = e 
 <br> 第772行，将ue = e.decode('latin-1')修改成ue = e 
 <br> 第631行，将print &gt;&gt;sys.stderr, '\nTime Elapsed: %s' % (self.stopTime-self.startTime)修改成print(sys.stderr, '\nTime Elapsed: %s' % (self.stopTime-self.startTime)) 
</blockquote> 
<p>使用方法</p> 
<pre><code>fp=open(filename, 'wb')  # 写方式打开报告文件
runner = HTMLTestRunner.HTMLTestRunner(stream=fp,title='报告标题',description='报告说明' )
#执行测试
runner.run(Suite)  # Suite为TestSuite测试套件</code></pre> 
<p>产生不同文件测试报告</p> 
<pre><code>#构建测试用例集
alltests=unittest.defaultTestLoader.discover('../testDirectory', pattern='*_test.py')
#测试套件组合在一起
now=time.strftime("%Y%m%d%H%M%S", time.localtime())  
filename=r'./report/'+now+r'result.html'  # 根据时间生成文件名
fp=open(filename, 'wb')
runner = HTMLTestRunner.HTMLTestRunner(stream=fp,title='报告标题',description='报告说明' )
#执行测试
runner.run(alltests)</code></pre> 
<p></p> 
<p><strong>最后感谢每一个认真阅读我文章的人，看着粉丝一路的上涨和关注，礼尚往来总是要有的，虽然不是什么很值钱的东西，如果你用得到的话可以直接拿走！</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/3b/52/1pdU2ahW_o.png"></p> 
<h3>软件测试面试文档</h3> 
<p>我们学习必然是为了找到高薪的工作，下面这些面试题是来自阿里、腾讯、字节等一线互联网大厂最新的面试资料，并且有字节大佬给出了权威的解答，刷完这一套面试资料相信大家都能找到满意的工作。<br>  </p> 
<p class="img-center"><img alt="在这里插入图片描述" src="https://images2.imgbox.com/fd/6a/DwVulByb_o.png"></p> 
<p class="img-center"><img alt="" height="151" src="https://images2.imgbox.com/7d/de/alNbKF0d_o.png" width="451"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c8cdae0ceacbe85eb70a6c9bbaa66d8b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VSCode配置Fortran并运行国际参考电离层2020模型（IRI2020）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c27e6b19fe2a2310f1b46b36f089764/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">yolox转rknn</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android仿斗鱼领取鱼丸文字验证(二) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android仿斗鱼领取鱼丸文字验证(二)" />
<meta property="og:description" content="接着第一篇内容,来完成一下中间部分,中文验证码的部分,先看一下要实现的效果:
一、分析功能 分析一下,我们要实现一个验证码功能,随机生成4个中文组合,文字随机,文字颜色随机,文字会出现不同程度的旋转,并且文字周围会出现一些干扰项,点击看不清时验证码内容会进行刷新重置.要解决的问题基本就这么多,下面分步来解决一下.
(1)文字和文字颜色随机,这个实现起来不难,只需要随机产生一个中文,并且画笔定义随机的颜色即可. (2)文字旋转的话,可以通过旋转画布来完成该功能. (3)对于干扰项,可以定义一个干扰项的数组,然后随机取出里边的内容,在画布上的随机位置进行绘制即可. (4)刷新重置这个做过很多遍,只需要重置一些变量,再去调用view的重绘方法即可.
二、代码实现 通过上边的分析,我们自定义一个CodeView来完成该功能.
先来定义一些自定义属性,成员变量.代码如下:
自定义属性:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;resources&gt; &lt;!--CodeView相关--&gt; &lt;!--扰乱项的个数--&gt; &lt;attr name=&#34;disturbSize&#34; format=&#34;integer&#34;/&gt; &lt;!--干扰项文字的大小--&gt; &lt;attr name=&#34;disturbTextSize&#34; format=&#34;dimension&#34;/&gt; &lt;!--干扰项文字颜色--&gt; &lt;attr name=&#34;disturbTextColor&#34; format=&#34;color&#34;/&gt; &lt;!--验证码文字大小--&gt; &lt;attr name=&#34;codeTextSize&#34; format=&#34;dimension&#34;/&gt; &lt;!--验证码文字颜色--&gt; &lt;attr name=&#34;codeTextColor&#34; format=&#34;color&#34;/&gt; &lt;!--画布旋转的度数--&gt; &lt;attr name=&#34;rotate&#34; format=&#34;integer&#34;/&gt; &lt;declare-styleable name=&#34;CodeView&#34;&gt; &lt;attr name=&#34;disturbSize&#34;/&gt; &lt;attr name=&#34;disturbTextSize&#34;/&gt; &lt;attr name=&#34;disturbTextColor&#34;/&gt; &lt;attr name=&#34;codeTextSize&#34;/&gt; &lt;attr name=&#34;codeTextColor&#34;/&gt; &lt;attr name=&#34;rotate&#34;/&gt; &lt;/resources&gt; 变量:
/** * 干扰项 */ private final char[] CHARS = { &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;i&#39;, &#39;j&#39;, &#39;k&#39;, &#39;l&#39;, &#39;m&#39;, &#39;n&#39;, &#39;o&#39;, &#39;p&#39;, &#39;q&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;, &#39;K&#39;, &#39;L&#39;, &#39;M&#39;, &#39;N&#39;, &#39;O&#39;, &#39;P&#39;, &#39;Q&#39;, &#39;R&#39;, &#39;S&#39;, &#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39; }; /** * 汉字画笔 */ private Paint hzPaint; /** * 干扰项画笔 */ private Paint dbPaint; /** * 汉字画笔颜色 */ private int hzColor; /** * 干扰项画笔颜色 */ private int dbColor; /** * 干扰项的个数,默认30个 */ private int DEFAULT_DBSIZE; /** * 默认画笔颜色 */ private int DEFAULT_DBCOLOR, DEFAULT_HZCOLOR; /** * 干扰项随机生成的位置 */ private float dbRandomX, dbRandomY; /** * 验证码文字 */ private List&lt;String&gt; codeList; /** * 随机 */ private Random random = new Random(); /** * 矩形区域 */ private Rect mBounds; /** * 干扰文字大小 */ private int dbTextSize; /** * 验证码文字大小 */ private int hzTextSize; /** * 画布旋转度数,默认为6 */ private int rotate; public CodeView(Context context, AttributeSet attrs, int defStyleAttr) { super(context, attrs, defStyleAttr); // 获取自定义属性 TypedArray ta = context." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/8efdc33d279032c3536c7bd481fb78ec/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-05-12T16:05:42+08:00" />
<meta property="article:modified_time" content="2016-05-12T16:05:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android仿斗鱼领取鱼丸文字验证(二)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>接着第一篇内容,来完成一下中间部分,中文验证码的部分,先看一下要实现的效果:</p> 
<p><img src="https://images2.imgbox.com/82/f7/wmcS2KfD_o.gif" alt="效果图" title=""></p> 
<hr> 
<h4 id="一分析功能">一、分析功能</h4> 
<p>分析一下,我们要实现一个验证码功能,随机生成4个中文组合,文字随机,文字颜色随机,文字会出现不同程度的旋转,并且文字周围会出现一些干扰项,点击看不清时验证码内容会进行刷新重置.要解决的问题基本就这么多,下面分步来解决一下.</p> 
<p>(1)文字和文字颜色随机,这个实现起来不难,只需要随机产生一个中文,并且画笔定义随机的颜色即可. <br> (2)文字旋转的话,可以通过旋转画布来完成该功能. <br> (3)对于干扰项,可以定义一个干扰项的数组,然后随机取出里边的内容,在画布上的随机位置进行绘制即可. <br> (4)刷新重置这个做过很多遍,只需要重置一些变量,再去调用view的重绘方法即可.</p> 
<hr> 
<h4 id="二代码实现">二、代码实现</h4> 
<p>通过上边的分析,我们自定义一个CodeView来完成该功能.</p> 
<p>先来定义一些自定义属性,成员变量.代码如下:</p> 
<p>自定义属性:</p> 
<pre class="prettyprint"><code class="language-java hljs ">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
&lt;resources&gt;
    &lt;!--CodeView相关--&gt;
    &lt;!--扰乱项的个数--&gt;
    &lt;attr name=<span class="hljs-string">"disturbSize"</span> format=<span class="hljs-string">"integer"</span>/&gt;
    &lt;!--干扰项文字的大小--&gt;
    &lt;attr name=<span class="hljs-string">"disturbTextSize"</span> format=<span class="hljs-string">"dimension"</span>/&gt;
    &lt;!--干扰项文字颜色--&gt;
    &lt;attr name=<span class="hljs-string">"disturbTextColor"</span> format=<span class="hljs-string">"color"</span>/&gt;
    &lt;!--验证码文字大小--&gt;
    &lt;attr name=<span class="hljs-string">"codeTextSize"</span> format=<span class="hljs-string">"dimension"</span>/&gt;
    &lt;!--验证码文字颜色--&gt;
    &lt;attr name=<span class="hljs-string">"codeTextColor"</span> format=<span class="hljs-string">"color"</span>/&gt;
    &lt;!--画布旋转的度数--&gt;
    &lt;attr name=<span class="hljs-string">"rotate"</span> format=<span class="hljs-string">"integer"</span>/&gt;
    &lt;declare-styleable name=<span class="hljs-string">"CodeView"</span>&gt;
        &lt;attr name=<span class="hljs-string">"disturbSize"</span>/&gt;
        &lt;attr name=<span class="hljs-string">"disturbTextSize"</span>/&gt;
        &lt;attr name=<span class="hljs-string">"disturbTextColor"</span>/&gt;
        &lt;attr name=<span class="hljs-string">"codeTextSize"</span>/&gt;
        &lt;attr name=<span class="hljs-string">"codeTextColor"</span>/&gt;
        &lt;attr name=<span class="hljs-string">"rotate"</span>/&gt;
&lt;/resources&gt;        </code></pre> 
<p>变量:</p> 
<pre class="prettyprint"><code class="language-java hljs ">    <span class="hljs-javadoc">/**
     * 干扰项
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">char</span>[] CHARS = {
            <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
            <span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'f'</span>, <span class="hljs-string">'g'</span>, <span class="hljs-string">'h'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'j'</span>, <span class="hljs-string">'k'</span>, <span class="hljs-string">'l'</span>, <span class="hljs-string">'m'</span>,
            <span class="hljs-string">'n'</span>, <span class="hljs-string">'o'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-string">'q'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-string">'s'</span>, <span class="hljs-string">'t'</span>, <span class="hljs-string">'u'</span>, <span class="hljs-string">'v'</span>, <span class="hljs-string">'w'</span>, <span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-string">'z'</span>,
            <span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>, <span class="hljs-string">'E'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-string">'G'</span>, <span class="hljs-string">'H'</span>, <span class="hljs-string">'I'</span>, <span class="hljs-string">'J'</span>, <span class="hljs-string">'K'</span>, <span class="hljs-string">'L'</span>, <span class="hljs-string">'M'</span>,
            <span class="hljs-string">'N'</span>, <span class="hljs-string">'O'</span>, <span class="hljs-string">'P'</span>, <span class="hljs-string">'Q'</span>, <span class="hljs-string">'R'</span>, <span class="hljs-string">'S'</span>, <span class="hljs-string">'T'</span>, <span class="hljs-string">'U'</span>, <span class="hljs-string">'V'</span>, <span class="hljs-string">'W'</span>, <span class="hljs-string">'X'</span>, <span class="hljs-string">'Y'</span>, <span class="hljs-string">'Z'</span>
    };
    <span class="hljs-javadoc">/**
     * 汉字画笔
     */</span>
    <span class="hljs-keyword">private</span> Paint hzPaint;
    <span class="hljs-javadoc">/**
     * 干扰项画笔
     */</span>
    <span class="hljs-keyword">private</span> Paint dbPaint;
    <span class="hljs-javadoc">/**
     * 汉字画笔颜色
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> hzColor;
    <span class="hljs-javadoc">/**
     * 干扰项画笔颜色
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> dbColor;
    <span class="hljs-javadoc">/**
     * 干扰项的个数,默认30个
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> DEFAULT_DBSIZE;
    <span class="hljs-javadoc">/**
     * 默认画笔颜色
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> DEFAULT_DBCOLOR, DEFAULT_HZCOLOR;
    <span class="hljs-javadoc">/**
     * 干扰项随机生成的位置
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> dbRandomX, dbRandomY;
    <span class="hljs-javadoc">/**
     * 验证码文字
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; codeList;
    <span class="hljs-javadoc">/**
     * 随机
     */</span>
    <span class="hljs-keyword">private</span> Random random = <span class="hljs-keyword">new</span> Random();
    <span class="hljs-javadoc">/**
     * 矩形区域
     */</span>
    <span class="hljs-keyword">private</span> Rect mBounds;
    <span class="hljs-javadoc">/**
     * 干扰文字大小
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> dbTextSize;
    <span class="hljs-javadoc">/**
     * 验证码文字大小
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> hzTextSize;
    <span class="hljs-javadoc">/**
     * 画布旋转度数,默认为6
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> rotate;

    <span class="hljs-keyword">public</span> <span class="hljs-title">CodeView</span>(Context context, AttributeSet attrs, <span class="hljs-keyword">int</span> defStyleAttr) {
        <span class="hljs-keyword">super</span>(context, attrs, defStyleAttr);
        <span class="hljs-comment">// 获取自定义属性</span>
        TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.CodeView);
        DEFAULT_DBSIZE = ta.getInteger(R.styleable.CodeView_disturbSize, <span class="hljs-number">30</span>);
        dbTextSize = DisplayUtil.sp2px(context, ta.getDimensionPixelSize(R.styleable.CodeView_disturbTextSize, <span class="hljs-number">10</span>));
        hzTextSize = DisplayUtil.sp2px(context, ta.getDimensionPixelSize(R.styleable.CodeView_codeTextSize, <span class="hljs-number">20</span>));
        DEFAULT_DBCOLOR = ta.getColor(R.styleable.CodeView_disturbTextColor, <span class="hljs-number">0</span>);
        DEFAULT_HZCOLOR = ta.getColor(R.styleable.CodeView_codeTextColor, <span class="hljs-number">0</span>);
        rotate = ta.getInteger(R.styleable.CodeView_rotate, <span class="hljs-number">6</span>);
        init();

    }
</code></pre> 
<p>通过分析我们知道,我们需要随机生成一个中文,然后还要随机生成文字的颜色,所以先来写一个工具类Util,方便之后的使用.</p> 
<p>工具类:</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">package</span> com.example.junweiliu.hanzicode;

<span class="hljs-keyword">import</span> android.graphics.Color;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.view.ViewGroup;
<span class="hljs-keyword">import</span> android.widget.GridView;
<span class="hljs-keyword">import</span> android.widget.ListAdapter;

<span class="hljs-keyword">import</span> java.io.UnsupportedEncodingException;
<span class="hljs-keyword">import</span> java.util.Random;

<span class="hljs-javadoc">/**
 * Created by junweiliu on 16/5/9.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Util</span> {<!-- --></span>


    <span class="hljs-javadoc">/**
     * 获取随机的颜色
     *
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">randomColor</span>() {
        <span class="hljs-keyword">int</span> red = (<span class="hljs-keyword">int</span>) (Math.random() * <span class="hljs-number">256</span>);
        <span class="hljs-keyword">int</span> green = (<span class="hljs-keyword">int</span>) (Math.random() * <span class="hljs-number">256</span>);
        <span class="hljs-keyword">int</span> blue = (<span class="hljs-keyword">int</span>) (Math.random() * <span class="hljs-number">256</span>);
        <span class="hljs-keyword">return</span> Color.argb(<span class="hljs-number">255</span>, red, green, blue);
    }

    <span class="hljs-javadoc">/**
     * 获取随机的暗色
     *
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">randomDarkColor</span>() {
        <span class="hljs-keyword">int</span> red = (<span class="hljs-keyword">int</span>) (Math.random() * <span class="hljs-number">100</span> + <span class="hljs-number">56</span>);
        <span class="hljs-keyword">int</span> green = (<span class="hljs-keyword">int</span>) (Math.random() * <span class="hljs-number">100</span> + <span class="hljs-number">56</span>);
        <span class="hljs-keyword">int</span> blue = (<span class="hljs-keyword">int</span>) (Math.random() * <span class="hljs-number">100</span> + <span class="hljs-number">56</span>);
        <span class="hljs-keyword">return</span> Color.argb(<span class="hljs-number">255</span>, red, green, blue);
    }

    <span class="hljs-javadoc">/**
     * 获取指定长度随机简体中文
     *
     *<span class="hljs-javadoctag"> @param</span> len int
     *<span class="hljs-javadoctag"> @return</span> String
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">getRandomJianHan</span>(<span class="hljs-keyword">int</span> len) {
        String ret = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
            String str = <span class="hljs-keyword">null</span>;
            <span class="hljs-keyword">int</span> hightPos, lowPos; <span class="hljs-comment">// 定义高低位</span>
            Random random = <span class="hljs-keyword">new</span> Random();
            hightPos = (<span class="hljs-number">176</span> + Math.abs(random.nextInt(<span class="hljs-number">39</span>))); <span class="hljs-comment">//获取高位值</span>
            lowPos = (<span class="hljs-number">161</span> + Math.abs(random.nextInt(<span class="hljs-number">93</span>))); <span class="hljs-comment">//获取低位值</span>
            <span class="hljs-keyword">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">2</span>];
            b[<span class="hljs-number">0</span>] = (<span class="hljs-keyword">new</span> Integer(hightPos).byteValue());
            b[<span class="hljs-number">1</span>] = (<span class="hljs-keyword">new</span> Integer(lowPos).byteValue());
            <span class="hljs-keyword">try</span> {
                str = <span class="hljs-keyword">new</span> String(b, <span class="hljs-string">"GBk"</span>); <span class="hljs-comment">//转成中文</span>
            } <span class="hljs-keyword">catch</span> (UnsupportedEncodingException ex) {
                ex.printStackTrace();
            }
            ret += str;
        }
        <span class="hljs-keyword">return</span> ret;
    }
}

</code></pre> 
<p>代码不是很复杂,这里定义了两种颜色的获取,使用的时候可以根据自己的需要来使用或者修改.</p> 
<p>先来搞定干扰项的问题,干扰项已经定义过了,是一些数字和字母,随机颜色的方法也写在工具类了,之后就是去生成这些干扰项,生成之前,还需要随机生成位置,然后去绘制在画布上就可以了.</p> 
<p>干扰项:</p> 
<pre class="prettyprint"><code class="language-java hljs ">
    <span class="hljs-javadoc">/**
     * 创建干扰项
     *
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title">createDBCode</span>() {
        StringBuilder buffer = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; DEFAULT_DBSIZE; i++) {
            buffer.append(CHARS[random.nextInt(CHARS.length)]);
        }
        <span class="hljs-keyword">return</span> buffer.toString();
    }

    <span class="hljs-javadoc">/**
     * 随机生成干扰项画笔样式
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">randomDBStyele</span>() {
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == DEFAULT_DBCOLOR) {
            dbColor = Util.randomDarkColor();
        } <span class="hljs-keyword">else</span> {
            dbColor = DEFAULT_DBCOLOR;
        }
        dbPaint = <span class="hljs-keyword">new</span> Paint();
        dbPaint.setColor(dbColor);
        dbPaint.setTextSize(dbTextSize);
    }

    <span class="hljs-javadoc">/**
     * 随机生成干扰项的显示位置
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">randomDBPosition</span>() {
        dbRandomX = (<span class="hljs-keyword">float</span>) Math.random() * getWidth();
        dbRandomY = (<span class="hljs-keyword">float</span>) Math.random() * getHeight();
    }

    <span class="hljs-javadoc">/**
    * 绘制
    */</span> 
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDraw</span>(Canvas canvas) {

        Bitmap bp = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
        Canvas c = <span class="hljs-keyword">new</span> Canvas(bp);
        String dbCode = createDBCode();
        <span class="hljs-comment">// 绘制干扰项</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dbCode.length(); i++) {
            randomDBStyele();
            randomDBPosition();
            c.drawText(dbCode.charAt(i) + <span class="hljs-string">""</span>, dbRandomX, dbRandomY, dbPaint);
        }
        canvas.drawBitmap(bp, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, dbPaint);
    }
</code></pre> 
<p>然后来看一下验证文字,我们对外提供一个设置验证文字的方法,因为这些需要验证的文字肯定不是固定的,所以需要提供一个方法,来随时改变这些验证文字,获取到这些验证文字之后,就可以去绘制了.</p> 
<p>验证文字:</p> 
<pre class="prettyprint"><code class="language-java hljs ">    <span class="hljs-javadoc">/**
     * 设置验证码文字
     *
     *<span class="hljs-javadoctag"> @param</span> codes
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCode</span>(List&lt;String&gt; codes) {
        <span class="hljs-keyword">this</span>.codeList = codes;
        invalidate();
    }

    <span class="hljs-javadoc">/**
     * 随机生成汉字画笔样式
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">randomHZStyle</span>() {
        hzPaint = <span class="hljs-keyword">new</span> Paint();
        hzPaint.setColor(hzColor);
        hzPaint.setFakeBoldText(random.nextBoolean());
        hzPaint.setTextSize(hzTextSize);
        hzPaint.getTextBounds(<span class="hljs-string">"一"</span>, <span class="hljs-number">0</span>, <span class="hljs-string">"一"</span>.length(), mBounds);
    }

    <span class="hljs-javadoc">/**
    * 绘制
    */</span> 
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDraw</span>(Canvas canvas) {
        Bitmap bp = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
        Canvas c = <span class="hljs-keyword">new</span> Canvas(bp);
        String dbCode = createDBCode();
        <span class="hljs-comment">// 绘制干扰项</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dbCode.length(); i++) {
            randomDBStyele();
            randomDBPosition();
            c.drawText(dbCode.charAt(i) + <span class="hljs-string">""</span>, dbRandomX, dbRandomY, dbPaint);
        }
        canvas.drawBitmap(bp, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, dbPaint);
        <span class="hljs-comment">// 绘制验证文字</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> != codeList &amp;&amp; codeList.size() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; codeList.size(); i++) {
                randomHZStyle();
                canvas.save();
                canvas.rotate((<span class="hljs-keyword">int</span>) (Math.floor(Math.random() * rotate + <span class="hljs-number">1</span>)
                        - Math.floor(Math.random() * rotate * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)));
                canvas.drawText(codeList.get(i), mBounds.width() * (i + <span class="hljs-number">1</span>), getHeight() / <span class="hljs-number">2</span> + mBounds.height() / <span class="hljs-number">2</span>, hzPaint);
                canvas.restore();
            }
        }
    }</code></pre> 
<p>绘制验证文字的时候需要注意一下,这里只是对画布进行了一个旋转操作,如果需要设计不同的效果,可以去添加修改这部分,如果需要特殊字体,也可以在初始化的时候去加载一些特殊字体,这里就不去做这些内容了.</p> 
<p>最后就是对外提供一个重置的方法,很简单</p> 
<pre class="prettyprint"><code class="language-java hljs ">    <span class="hljs-javadoc">/**
     * 重置
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reSet</span>(List&lt;String&gt; codes) {
        <span class="hljs-comment">// 重置汉字画笔颜色</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == DEFAULT_HZCOLOR) {
            hzColor = Util.randomDarkColor();
        } <span class="hljs-keyword">else</span> {
            hzColor = DEFAULT_HZCOLOR;
        }
        <span class="hljs-keyword">this</span>.codeList.clear();
        <span class="hljs-keyword">this</span>.codeList = codes;
        invalidate();
    }</code></pre> 
<hr> 
<h4 id="三完整代码实及现">三、完整代码实及现</h4> 
<p>CodeView:</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">package</span> com.example.junweiliu.hanzicode;

<span class="hljs-keyword">import</span> android.content.Context;
<span class="hljs-keyword">import</span> android.content.res.TypedArray;
<span class="hljs-keyword">import</span> android.graphics.Bitmap;
<span class="hljs-keyword">import</span> android.graphics.Canvas;
<span class="hljs-keyword">import</span> android.graphics.Color;
<span class="hljs-keyword">import</span> android.graphics.Paint;
<span class="hljs-keyword">import</span> android.graphics.Rect;
<span class="hljs-keyword">import</span> android.util.AttributeSet;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.widget.ImageView;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Random;

<span class="hljs-javadoc">/**
 * Created by junweiliu on 16/5/9.
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CodeView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ImageView</span> {<!-- --></span>
    <span class="hljs-javadoc">/**
     * 干扰项
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">char</span>[] CHARS = {
            <span class="hljs-string">'0'</span>, <span class="hljs-string">'1'</span>, <span class="hljs-string">'2'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'4'</span>, <span class="hljs-string">'5'</span>, <span class="hljs-string">'6'</span>, <span class="hljs-string">'7'</span>, <span class="hljs-string">'8'</span>, <span class="hljs-string">'9'</span>,
            <span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, <span class="hljs-string">'d'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'f'</span>, <span class="hljs-string">'g'</span>, <span class="hljs-string">'h'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'j'</span>, <span class="hljs-string">'k'</span>, <span class="hljs-string">'l'</span>, <span class="hljs-string">'m'</span>,
            <span class="hljs-string">'n'</span>, <span class="hljs-string">'o'</span>, <span class="hljs-string">'p'</span>, <span class="hljs-string">'q'</span>, <span class="hljs-string">'r'</span>, <span class="hljs-string">'s'</span>, <span class="hljs-string">'t'</span>, <span class="hljs-string">'u'</span>, <span class="hljs-string">'v'</span>, <span class="hljs-string">'w'</span>, <span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-string">'z'</span>,
            <span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>, <span class="hljs-string">'E'</span>, <span class="hljs-string">'F'</span>, <span class="hljs-string">'G'</span>, <span class="hljs-string">'H'</span>, <span class="hljs-string">'I'</span>, <span class="hljs-string">'J'</span>, <span class="hljs-string">'K'</span>, <span class="hljs-string">'L'</span>, <span class="hljs-string">'M'</span>,
            <span class="hljs-string">'N'</span>, <span class="hljs-string">'O'</span>, <span class="hljs-string">'P'</span>, <span class="hljs-string">'Q'</span>, <span class="hljs-string">'R'</span>, <span class="hljs-string">'S'</span>, <span class="hljs-string">'T'</span>, <span class="hljs-string">'U'</span>, <span class="hljs-string">'V'</span>, <span class="hljs-string">'W'</span>, <span class="hljs-string">'X'</span>, <span class="hljs-string">'Y'</span>, <span class="hljs-string">'Z'</span>
    };
    <span class="hljs-javadoc">/**
     * 汉字画笔
     */</span>
    <span class="hljs-keyword">private</span> Paint hzPaint;
    <span class="hljs-javadoc">/**
     * 干扰项画笔
     */</span>
    <span class="hljs-keyword">private</span> Paint dbPaint;
    <span class="hljs-javadoc">/**
     * 汉字画笔颜色
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> hzColor;
    <span class="hljs-javadoc">/**
     * 干扰项画笔颜色
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> dbColor;
    <span class="hljs-javadoc">/**
     * 干扰项的个数,默认30个
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> DEFAULT_DBSIZE;
    <span class="hljs-javadoc">/**
     * 默认画笔颜色
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> DEFAULT_DBCOLOR, DEFAULT_HZCOLOR;
    <span class="hljs-javadoc">/**
     * 干扰项随机生成的位置
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> dbRandomX, dbRandomY;
    <span class="hljs-javadoc">/**
     * 验证码文字
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; codeList;
    <span class="hljs-javadoc">/**
     * 随机
     */</span>
    <span class="hljs-keyword">private</span> Random random = <span class="hljs-keyword">new</span> Random();
    <span class="hljs-javadoc">/**
     * 矩形区域
     */</span>
    <span class="hljs-keyword">private</span> Rect mBounds;
    <span class="hljs-javadoc">/**
     * 干扰文字大小
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> dbTextSize;
    <span class="hljs-javadoc">/**
     * 验证码文字大小
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> hzTextSize;
    <span class="hljs-javadoc">/**
     * 画布旋转度数,默认为6
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> rotate;


    <span class="hljs-keyword">public</span> <span class="hljs-title">CodeView</span>(Context context) {
        <span class="hljs-keyword">this</span>(context, <span class="hljs-keyword">null</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title">CodeView</span>(Context context, AttributeSet attrs) {
        <span class="hljs-keyword">this</span>(context, attrs, <span class="hljs-number">0</span>);
    }

    ;

    <span class="hljs-keyword">public</span> <span class="hljs-title">CodeView</span>(Context context, AttributeSet attrs, <span class="hljs-keyword">int</span> defStyleAttr) {
        <span class="hljs-keyword">super</span>(context, attrs, defStyleAttr);
        <span class="hljs-comment">// 获取自定义属性</span>
        TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.CodeView);
        DEFAULT_DBSIZE = ta.getInteger(R.styleable.CodeView_disturbSize, <span class="hljs-number">30</span>);
        dbTextSize = DisplayUtil.sp2px(context, ta.getDimensionPixelSize(R.styleable.CodeView_disturbTextSize, <span class="hljs-number">10</span>));
        hzTextSize = DisplayUtil.sp2px(context, ta.getDimensionPixelSize(R.styleable.CodeView_codeTextSize, <span class="hljs-number">20</span>));
        DEFAULT_DBCOLOR = ta.getColor(R.styleable.CodeView_disturbTextColor, <span class="hljs-number">0</span>);
        DEFAULT_HZCOLOR = ta.getColor(R.styleable.CodeView_codeTextColor, <span class="hljs-number">0</span>);
        rotate = ta.getInteger(R.styleable.CodeView_rotate, <span class="hljs-number">6</span>);
        init();

    }

    <span class="hljs-javadoc">/**
     * 初始化
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span>() {
        <span class="hljs-comment">// 验证的文字颜色一致,只需要生成一次</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == DEFAULT_HZCOLOR) {
            hzColor = Util.randomDarkColor();
        } <span class="hljs-keyword">else</span> {
            hzColor = DEFAULT_HZCOLOR;
        }
        mBounds = <span class="hljs-keyword">new</span> Rect();
        codeList = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();

    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDraw</span>(Canvas canvas) {

        Bitmap bp = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
        Canvas c = <span class="hljs-keyword">new</span> Canvas(bp);
        String dbCode = createDBCode();
        <span class="hljs-comment">// 绘制干扰项</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dbCode.length(); i++) {
            randomDBStyele();
            randomDBPosition();
            c.drawText(dbCode.charAt(i) + <span class="hljs-string">""</span>, dbRandomX, dbRandomY, dbPaint);
        }
        canvas.drawBitmap(bp, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, dbPaint);
        <span class="hljs-comment">// 绘制验证文字</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> != codeList &amp;&amp; codeList.size() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; codeList.size(); i++) {
                randomHZStyle();
                canvas.save();
                canvas.rotate((<span class="hljs-keyword">int</span>) (Math.floor(Math.random() * rotate + <span class="hljs-number">1</span>)
                        - Math.floor(Math.random() * rotate * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>)));
                canvas.drawText(codeList.get(i), mBounds.width() * (i + <span class="hljs-number">1</span>), getHeight() / <span class="hljs-number">2</span> + mBounds.height() / <span class="hljs-number">2</span>, hzPaint);
                canvas.restore();
            }
        }
<span class="hljs-comment">//        super.onDraw(canvas);</span>
    }

    <span class="hljs-javadoc">/**
     * 重置
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reSet</span>(List&lt;String&gt; codes) {
        <span class="hljs-comment">// 重置汉字画笔颜色</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == DEFAULT_HZCOLOR) {
            hzColor = Util.randomDarkColor();
        } <span class="hljs-keyword">else</span> {
            hzColor = DEFAULT_HZCOLOR;
        }
        <span class="hljs-keyword">this</span>.codeList.clear();
        <span class="hljs-keyword">this</span>.codeList = codes;
        invalidate();
    }

    <span class="hljs-javadoc">/**
     * 设置验证码文字
     *
     *<span class="hljs-javadoctag"> @param</span> codes
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCode</span>(List&lt;String&gt; codes) {
        <span class="hljs-keyword">this</span>.codeList = codes;
        invalidate();
    }

    <span class="hljs-javadoc">/**
     * 随机生成汉字画笔样式
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">randomHZStyle</span>() {
        hzPaint = <span class="hljs-keyword">new</span> Paint();
<span class="hljs-comment">//        hzPaint.setAntiAlias(true);</span>
        hzPaint.setColor(hzColor);
        hzPaint.setFakeBoldText(random.nextBoolean());
        hzPaint.setTextSize(hzTextSize);
        hzPaint.getTextBounds(<span class="hljs-string">"一"</span>, <span class="hljs-number">0</span>, <span class="hljs-string">"一"</span>.length(), mBounds);
    }


    <span class="hljs-javadoc">/**
     * 随机生成干扰项画笔样式
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">randomDBStyele</span>() {
        <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == DEFAULT_DBCOLOR) {
            dbColor = Util.randomDarkColor();
        } <span class="hljs-keyword">else</span> {
            dbColor = DEFAULT_DBCOLOR;
        }
        dbPaint = <span class="hljs-keyword">new</span> Paint();
<span class="hljs-comment">//        dbPaint.setAntiAlias(true);</span>
        dbPaint.setColor(dbColor);
        dbPaint.setTextSize(dbTextSize);
    }

    <span class="hljs-javadoc">/**
     * 随机生成干扰项的显示位置
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">randomDBPosition</span>() {
        dbRandomX = (<span class="hljs-keyword">float</span>) Math.random() * getWidth();
        dbRandomY = (<span class="hljs-keyword">float</span>) Math.random() * getHeight();
    }

    <span class="hljs-javadoc">/**
     * 创建干扰项
     *
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title">createDBCode</span>() {
        StringBuilder buffer = <span class="hljs-keyword">new</span> StringBuilder();
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; DEFAULT_DBSIZE; i++) {
            buffer.append(CHARS[random.nextInt(CHARS.length)]);
        }
        <span class="hljs-keyword">return</span> buffer.toString();
    }

}
</code></pre> 
<p>xml:</p> 
<pre class="prettyprint"><code class="language-java hljs ">
&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;
&lt;LinearLayout
    xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:hz=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    xmlns:tools=<span class="hljs-string">"http://schemas.android.com/tools"</span>
    android:id=<span class="hljs-string">"@+id/ll_all"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>
    android:gravity=<span class="hljs-string">"center"</span>
    android:orientation=<span class="hljs-string">"vertical"</span>
    tools:context=<span class="hljs-string">"com.example.junweiliu.hanzicode.MainActivity"</span>&gt;

    &lt;LinearLayout
        android:layout_width=<span class="hljs-string">"280dp"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span>
        android:background=<span class="hljs-string">"@mipmap/hz_nor_ng"</span>
        android:orientation=<span class="hljs-string">"vertical"</span>
        android:padding=<span class="hljs-string">"20dp"</span>
        &gt;
        &lt;LinearLayout
            android:layout_width=<span class="hljs-string">"match_parent"</span>
            android:layout_height=<span class="hljs-string">"wrap_content"</span>
            android:layout_marginTop=<span class="hljs-string">"10dp"</span>
            android:gravity=<span class="hljs-string">"center"</span>
            android:orientation=<span class="hljs-string">"horizontal"</span>
            android:visibility=<span class="hljs-string">"visible"</span>
            &gt;
            &lt;com.example.junweiliu.hanzicode.CodeView
                android:id=<span class="hljs-string">"@+id/cv_hz"</span>
                android:layout_width=<span class="hljs-string">"120dp"</span>
                android:layout_height=<span class="hljs-string">"40dp"</span>
                /&gt;

            &lt;Button
                android:id=<span class="hljs-string">"@+id/btn_reset"</span>
                android:layout_width=<span class="hljs-string">"wrap_content"</span>
                android:layout_height=<span class="hljs-string">"wrap_content"</span>
                android:layout_marginLeft=<span class="hljs-string">"10dp"</span>
                android:background=<span class="hljs-string">"@null"</span>
                android:text=<span class="hljs-string">"看不清?"</span>
                android:textColor=<span class="hljs-string">"#4791FF"</span>
                android:textSize=<span class="hljs-string">"14sp"</span>
                /&gt;
        &lt;/LinearLayout&gt;
    &lt;/LinearLayout&gt;
&lt;/LinearLayout&gt;</code></pre> 
<p>MainActivity:</p> 
<pre class="prettyprint"><code class="language-java hljs "><span class="hljs-keyword">package</span> com.example.junweiliu.hanzicode;

<span class="hljs-keyword">import</span> android.app.Activity;
<span class="hljs-keyword">import</span> android.graphics.Color;
<span class="hljs-keyword">import</span> android.os.Bundle;
<span class="hljs-keyword">import</span> android.support.v4.graphics.ColorUtils;
<span class="hljs-keyword">import</span> android.util.Log;
<span class="hljs-keyword">import</span> android.view.LayoutInflater;
<span class="hljs-keyword">import</span> android.view.View;
<span class="hljs-keyword">import</span> android.view.ViewGroup;
<span class="hljs-keyword">import</span> android.widget.BaseAdapter;
<span class="hljs-keyword">import</span> android.widget.Button;
<span class="hljs-keyword">import</span> android.widget.GridView;
<span class="hljs-keyword">import</span> android.widget.ListAdapter;
<span class="hljs-keyword">import</span> android.widget.Toast;

<span class="hljs-keyword">import</span> java.io.UnsupportedEncodingException;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Random;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> {<!-- --></span>
    <span class="hljs-javadoc">/**
     * 验证码
     */</span>
    <span class="hljs-keyword">private</span> CodeView mCodeView;
    <span class="hljs-javadoc">/**
     * 重置按钮
     */</span>
    <span class="hljs-keyword">private</span> Button mResetBtn;
    <span class="hljs-javadoc">/**
     * 正确答案
     */</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; mCorrectList;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initData();
        initView();
    }

    <span class="hljs-javadoc">/**
     * 初始化数据
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initData</span>() {
        mCorrectList = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();
        <span class="hljs-comment">// 添加文字</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) {
            mCorrectList.add(Util.getRandomJianHan(<span class="hljs-number">1</span>));
        }
    }

    <span class="hljs-javadoc">/**
     * 初始化控件
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initView</span>() {        
        mCodeView = (CodeView) findViewById(R.id.cv_hz);
        mCodeView.setCode(mCorrectList);
        mResetBtn = (Button) findViewById(R.id.btn_reset);
        mResetBtn.setOnClickListener(<span class="hljs-keyword">new</span> View.OnClickListener() {
            <span class="hljs-annotation">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onClick</span>(View view) {
                <span class="hljs-comment">// 重置文字</span>
                initData();
                <span class="hljs-comment">// 刷新验证码</span>
                mCodeView.reSet(mCorrectList);
            }
        }); 
     } 
}  </code></pre> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2d8b1c4529ed8f1859b8d28289a4fd8f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Retrofit2 再研究</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8f6c06c6eb041dc26a958ed685df03a0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">startActivity报错</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
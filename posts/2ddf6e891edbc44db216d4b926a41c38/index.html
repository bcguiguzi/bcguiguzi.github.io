<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker Compose Demo，一个能帮助你彻底解决使用docker搭建各种服务难题的代码库 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker Compose Demo，一个能帮助你彻底解决使用docker搭建各种服务难题的代码库" />
<meta property="og:description" content="项目简介 您是否在工作中用docker搭建服务时，遇到过以下问题：
1.每次都要重复查找搭建服务的docker命令，浪费时间。 2.找到的docker命令各式各样，毫无规范。 3.命令可以使用，但是需要设置的参数残缺不全。 4.对要搭建的服务需要设置的相关参数一知半解，无法配置。 5.不清楚使用的命令是否经过验证，无法保证安全性和可靠性。 👉 Dokcer Compose Demo
docker compose demo 是一个旨在帮助开发者用docker-compose 快速、便捷、可靠地部署相关docker
服务的代码库，目前总共包含 14 个demo。
服务功能简介官方网站jenkins持续集成工具https://www.jenkins.iogitlab代码仓库管理系统https://gitlab.comredis缓存数据库https://redis.ionginx反向代理web服务器https://nginx.comsonarqube源代码检测工具https://www.sonarsource.commysql关系数据库https://dev.mysql.comelastic search分布式的全文搜索引擎https://www.elastic.cologstash服务器端数据处理管道https://www.elastic.cokibana分布式数据分析与可视化平台https://www.elastic.cokafka分布式消息队列https://kafka.apache.orgminio分布式文件存储https://min.iorabbitmq分布式消息队列https://www.rabbitmq.comzookeeper分布式应用程序协调服务https://zookeeper.apache.orgportainerDocker可视化容器管理工具https://www.portainer.io 如果大家还有其他想要搭建的docker服务，可以在issue中提出需求。
项目中docker-compose代码均来自于实践总结，但难免会出现错误，如果您发现有问题，请及时进行反馈，我会在收到反馈后第一时间进行修复。
如果您有已经编写好的docker-compose代码，欢迎提出PR，提前感谢您的贡献。🤝
Docker和Docker-Compose安装 注意：以下脚本已经过linux centos7.x系统测试，其他系统无法保证完全适用。
#!/bin/bash # 更新yum依赖 yum update -y &amp;&amp; yum makecache -y # 安装依赖包 yum install -y yum-uitls device-mapper-persistent-data lvm2 echo &#39;Install started...&#39; # 安装docker curl https://download.docker.com/linux/centos/docker-ce.repo -o /etc/yum.repos.d/docker-ce.repo yum install -y docker-ce # 启动docker systemctl enable docker systemctl start docker # 配置docker镜像加速 [ -f /etc/docker/daemon." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/2ddf6e891edbc44db216d4b926a41c38/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-28T14:30:44+08:00" />
<meta property="article:modified_time" content="2023-04-28T14:30:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker Compose Demo，一个能帮助你彻底解决使用docker搭建各种服务难题的代码库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>项目简介</h3> 
<p>您是否在工作中用<code>docker</code>搭建服务时，遇到过以下问题：</p> 
<pre><code class="prism language-text">1.每次都要重复查找搭建服务的docker命令，浪费时间。
2.找到的docker命令各式各样，毫无规范。
3.命令可以使用，但是需要设置的参数残缺不全。
4.对要搭建的服务需要设置的相关参数一知半解，无法配置。
5.不清楚使用的命令是否经过验证，无法保证安全性和可靠性。
</code></pre> 
<p>👉 <a href="https://github.com/wangming2674/docker-compose-demo"> Dokcer Compose Demo</a><br> <code>docker compose demo</code> 是一个旨在帮助开发者用<code>docker-compose</code> 快速、便捷、可靠地部署相关<code>docker</code><br> 服务的代码库，目前总共包含 <code>14</code> 个demo。</p> 
<table><thead><tr><th align="left">服务</th><th>功能简介</th><th>官方网站</th></tr></thead><tbody><tr><td align="left">jenkins</td><td>持续集成工具</td><td>https://www.jenkins.io</td></tr><tr><td align="left">gitlab</td><td>代码仓库管理系统</td><td>https://gitlab.com</td></tr><tr><td align="left">redis</td><td>缓存数据库</td><td>https://redis.io</td></tr><tr><td align="left">nginx</td><td>反向代理web服务器</td><td>https://nginx.com</td></tr><tr><td align="left">sonarqube</td><td>源代码检测工具</td><td>https://www.sonarsource.com</td></tr><tr><td align="left">mysql</td><td>关系数据库</td><td>https://dev.mysql.com</td></tr><tr><td align="left">elastic search</td><td>分布式的全文搜索引擎</td><td>https://www.elastic.co</td></tr><tr><td align="left">logstash</td><td>服务器端数据处理管道</td><td>https://www.elastic.co</td></tr><tr><td align="left">kibana</td><td>分布式数据分析与可视化平台</td><td>https://www.elastic.co</td></tr><tr><td align="left">kafka</td><td>分布式消息队列</td><td>https://kafka.apache.org</td></tr><tr><td align="left">minio</td><td>分布式文件存储</td><td>https://min.io</td></tr><tr><td align="left">rabbitmq</td><td>分布式消息队列</td><td>https://www.rabbitmq.com</td></tr><tr><td align="left">zookeeper</td><td>分布式应用程序协调服务</td><td>https://zookeeper.apache.org</td></tr><tr><td align="left">portainer</td><td>Docker可视化容器管理工具</td><td>https://www.portainer.io</td></tr></tbody></table> 
<blockquote> 
 <p>如果大家还有其他想要搭建的<code>docker</code>服务，可以在<a href="https://github.com/wangming2674/docker-compose-demo/issues/new">issue</a>中提出需求。</p> 
</blockquote> 
<blockquote> 
 <p>项目中<code>docker-compose</code>代码均来自于实践总结，但难免会出现错误，如果您发现有问题，请及时进行反馈，我会在收到反馈后第一时间进行修复。</p> 
</blockquote> 
<blockquote> 
 <p>如果您有已经编写好的<code>docker-compose</code>代码，欢迎提出PR，提前感谢您的贡献。🤝</p> 
</blockquote> 
<h3><a id="DockerDockerCompose_38"></a>Docker和Docker-Compose安装</h3> 
<blockquote> 
 <p>注意：以下脚本已经过<code>linux centos7.x</code>系统测试，其他系统无法保证完全适用。</p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 更新yum依赖</span>
yum update -y <span class="token operator">&amp;&amp;</span> yum makecache -y

<span class="token comment"># 安装依赖包</span>
yum <span class="token function">install</span> -y yum-uitls device-mapper-persistent-data lvm2

<span class="token builtin class-name">echo</span> <span class="token string">'Install started...'</span>

<span class="token comment"># 安装docker</span>
<span class="token function">curl</span> https://download.docker.com/linux/centos/docker-ce.repo -o /etc/yum.repos.d/docker-ce.repo
yum <span class="token function">install</span> -y docker-ce

<span class="token comment"># 启动docker</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
systemctl start <span class="token function">docker</span>

<span class="token comment"># 配置docker镜像加速</span>
<span class="token punctuation">[</span> -f /etc/docker/daemon.json <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">touch</span> /etc/docker/daemon.json
<span class="token function">cat</span> <span class="token operator">&gt;&gt;</span>/etc/docker/daemon.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF
{
"registry-mirrors": ["https://gdhauhuq.mirror.aliyuncs.com"],
"log-driver":"json-file",
"log-opts":{"max-size" :"1000m","max-file":"5"}
}
EOF</span>

<span class="token comment"># 重新加载docker配置</span>
systemctl daemon-reload
systemctl restart <span class="token function">docker</span>

<span class="token comment"># 安装docker-compose</span>
<span class="token function">curl</span> -L https://get.daocloud.io/docker/compose/releases/download/1.25.5/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -s<span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -m<span class="token variable">)</span></span> <span class="token operator">&gt;</span>/usr/local/bin/docker-compose
<span class="token function">chmod</span> +x /usr/local/bin/docker-compose

<span class="token comment"># 查看版本信息</span>
<span class="token function">docker</span> -v
<span class="token function">docker-compose</span> -v

<span class="token builtin class-name">echo</span> <span class="token string">"Install completed!"</span>
</code></pre> 
<h3><a id="DockerCompose_85"></a>Docker-Compose命令</h3> 
<pre><code class="prism language-shell"><span class="token comment"># 在后台启动服务</span>
<span class="token function">docker-compose</span> up -d 

<span class="token comment"># 查看启动的服务</span>
<span class="token function">docker-compose</span> <span class="token function">ps</span>   

<span class="token comment"># 停止服务</span>
<span class="token function">docker-compose</span> stop

<span class="token comment"># 查看帮助</span>
<span class="token function">docker-compose</span> -h

<span class="token comment"># -f 指定使用的compose模板文件，默认为docker-compose.yml，可以多次指定。</span>
<span class="token function">docker-compose</span> -f docker-compose.yml up -d 

<span class="token comment"># 启动所有容器，-d 将会在后台启动并运行所有的容器</span>
<span class="token function">docker-compose</span> up -d

<span class="token comment"># 停用移除所有容器以及网络相关</span>
<span class="token function">docker-compose</span> down

<span class="token comment"># 查看服务容器的输出</span>
<span class="token function">docker-compose</span> logs

<span class="token comment"># 列出项目中目前的所有容器</span>
<span class="token function">docker-compose</span> <span class="token function">ps</span>

<span class="token comment"># 构建（重新构建）项目中的服务容器。服务容器一旦构建后，将会带上一个标记名，例如对于 web 项目中的一个 db 容器，可能是 web_db，可以随时在项目目录下运行build命令。</span>
<span class="token function">docker-compose</span> build

<span class="token comment"># 拉取服务依赖的镜像</span>
<span class="token function">docker-compose</span> pull

<span class="token comment"># 重启项目中的服务</span>
<span class="token function">docker-compose</span> restart

<span class="token comment"># 删除所有（停止状态的）服务容器。推荐先执行 docker-compose stop 命令来停止容器。</span>
<span class="token function">docker-compose</span> <span class="token function">rm</span> 

<span class="token comment"># 在指定服务上执行一个命令。</span>
<span class="token function">docker-compose</span> run ubuntu <span class="token function">ping</span> docker.com

<span class="token comment"># 设置指定服务运行的容器个数。通过 service=num 的参数来设置数量</span>
<span class="token function">docker-compose</span> scale <span class="token assign-left variable">web</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">db</span><span class="token operator">=</span><span class="token number">2</span>

<span class="token comment"># 启动已经存在的服务容器。</span>
<span class="token function">docker-compose</span> start

<span class="token comment"># 停止已经处于运行状态的容器，但不删除它。通过 docker-compose start 可以再次启动这些容器。</span>
<span class="token function">docker-compose</span> stop
</code></pre> 
<h3><a id="_141"></a>寻求支持</h3> 
<p>如果您遇到了技术上的问题难以解决，包括但不限于<code>docker</code>，请在<code>star</code>本项目后，加入以下qq群，我会对您进行支持。</p> 
<blockquote> 
 <p>🐧群号：463524210</p> 
</blockquote> 
<h3><a id="_147"></a>其他</h3> 
<h4><a id="_149"></a>我的博客</h4> 
<p>定期会分享一些技术文章、心得感悟、和软件资源，欢迎关注。👉 <a href="https://evanwang.blog.csdn.net" rel="nofollow">Evan’s Blog ٩(๑❛ᴗ❛๑)۶</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b870c44ed84cb1ed1f03963b7aebb9d8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">手工模式链路聚合 &#43; LACP模式链路聚合配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43729a40033c4d0a7f7eae11710980eb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">FPGA使用VGA协议显示图像</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Matlab 读取—处理—保存遥感影像（带有地理信息的图像） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Matlab 读取—处理—保存遥感影像（带有地理信息的图像）" />
<meta property="og:description" content="Start_Latitude = 0.6; End_Latitude = 0.8; Start_Lontitude = 0.1; End_Lontitude = 0.3; Matlab读取遥感影像的函数是：geotiffread（针对的是tif数据文件）
一、简介 （1）数据读取 [A,R] = geotiffread(filename) ; Reads a georeferenced grayscale, RGB, or multispectral image or data grid from the GeoTIFF file specified by filename into A and creates a spatial referencing object, R.（官方解释）。
描述一下就是 A 代表的数据文件（高程之类的数据），R 为空间坐标信息（包括数据的大小，经纬度范围与起始经纬度，数据单位、方向等）。
读取部分到此为止！
（2）数据处理
我这里主要介绍的数据的裁剪（比如要从一块数中选择其中的某一部分画图等）。
我们应该很清楚在做数据裁剪时会用到Matlab的冒号（：）函数，这个也是很简单。但是我们在对含有地理坐标的数据进行裁剪时，经纬度信息也要对应数据裁剪的办法进行裁剪。
Start_Latitude = 0.6; End_Latitude = 0.8; Start_Lontitude = 0.1; End_Lontitude = 0.3; 以上四个部分是裁剪的核心部分，只要修改对应的这四个值就可以选择裁剪对应的数据区域。比如在一个10*10的矩阵中，上面的四个数字（0.6，0.8 ；0.1，0.3）对应的区域如图1中的绿色区域。
图1 示例图" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/36aa6d06124543409add255d8b8b7190/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-05T20:21:30+08:00" />
<meta property="article:modified_time" content="2018-12-05T20:21:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Matlab 读取—处理—保存遥感影像（带有地理信息的图像）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre class="has"><code>Start_Latitude = 0.6;

End_Latitude = 0.8;

Start_Lontitude = 0.1;

End_Lontitude = 0.3;</code></pre> 
<p style="margin-left:0cm;">Matlab读取遥感影像的函数是：<span style="color:#000000;">geotiffread</span><span style="color:#000000;">（针对的是tif数据文件）</span></p> 
<h3 style="margin-left:0cm;"><strong>一、简介</strong></h3> 
<p style="margin-left:0cm;"><strong>（</strong><strong>1</strong><strong>）数据读取</strong> </p> 
<pre class="has"><code>[A,R] = geotiffread(filename) ;</code></pre> 
<p style="margin-left:0cm;"><span style="color:#404040;">Reads a georeferenced grayscale, RGB, or multispectral image or data grid from the GeoTIFF file specified by </span><code><span style="color:#404040;">filename</span></code><span style="color:#404040;"> into </span><strong><span style="color:#86ca5e;"><code>A</code></span></strong><span style="color:#404040;"> and creates a spatial referencing object, </span><span style="color:#86ca5e;"><strong><code>R</code></strong></span><span style="color:#404040;">.</span><span style="color:#404040;">（官方解释）。</span></p> 
<p style="margin-left:0cm;">描述一下就是 <span style="color:#86ca5e;"><strong><code>A </code></strong></span>代表的数据文件（高程之类的数据），<span style="color:#86ca5e;"><strong><code>R </code></strong></span>为空间坐标信息（包括数据的大小，经纬度范围与起始经纬度，数据单位、方向等）。</p> 
<p style="margin-left:0cm;"><strong><em>读取部分到此为止！</em></strong></p> 
<p style="margin-left:0cm;"><strong>（</strong><strong>2</strong><strong>）数据处理</strong></p> 
<p style="margin-left:0cm;">我这里主要介绍的数据的裁剪（比如要从一块数中选择其中的某一部分画图等）。</p> 
<p style="margin-left:0cm;">我们应该很清楚在做数据裁剪时会用到Matlab的冒号（：）函数，这个也是很简单。但是我们在对含有地理坐标的数据进行裁剪时，经纬度信息也要对应数据裁剪的办法进行裁剪。</p> 
<pre class="has"><code>Start_Latitude = 0.6;

End_Latitude = 0.8;

Start_Lontitude = 0.1;

End_Lontitude = 0.3;</code></pre> 
<p style="margin-left:0cm;">以上四个部分是裁剪的核心部分，只要修改对应的这四个值就可以选择裁剪对应的数据区域。比如在一个10*10的矩阵中，上面的四个数字<span style="color:#ff0000;">（</span><span style="color:#ff0000;">0.6</span><span style="color:#ff0000;">，</span><span style="color:#ff0000;">0.8 </span><span style="color:#ff0000;">；</span><span style="color:#ff0000;">0.1</span><span style="color:#ff0000;">，</span><span style="color:#ff0000;">0.3</span><span style="color:#ff0000;">）</span>对应的区域如图1中的<strong><span style="color:#70ad47;">绿色区域</span></strong>。</p> 
<p style="text-indent:50px;">       <img alt="" class="has" height="535" src="https://images2.imgbox.com/00/74/9HiqPKjB_o.png" width="554"></p> 
<p style="margin-left:0cm;">                                                                             <strong>        图1 示例图</strong></p> 
<p style="margin-left:0cm;"><strong>（</strong><strong>3</strong><strong>）数据保存</strong></p> 
<p style="margin-left:0cm;"><code><span style="color:#404040;">geotiffwrite(<a href="http://www.mathworks.com/help/map/ref/geotiffwrite.html#d120e48715" rel="nofollow"><span style="color:#004b87;">filename</span></a>,<strong><a href="http://www.mathworks.com/help/map/ref/geotiffwrite.html#d120e48763" rel="nofollow"><span style="color:#004b87;">A</span></a></strong>,<strong><a href="http://www.mathworks.com/help/map/ref/geotiffwrite.html#d120e48878" rel="nofollow"><span style="color:#004b87;">R</span></a></strong>)</span></code><span style="color:#404040;"> writes a georeferenced image or data grid, </span><span style="color:#86ca5e;"><strong><code>A</code></strong></span><span style="color:#404040;">, spatially referenced by </span><span style="color:#86ca5e;"><strong><code>R</code></strong></span><span style="color:#404040;">, into an output file, </span><code><span style="color:#404040;">filename</span></code><span style="color:#404040;">.</span></p> 
<p style="margin-left:0cm;"><strong><em>操作与读取类似，不再赘述！</em></strong></p> 
<h3 style="margin-left:0cm;"><strong>二、例子</strong></h3> 
<p style="margin-left:0cm;"><img alt="" class="has" height="933" src="https://images2.imgbox.com/35/89/LYRTdQOx_o.png" width="920"></p> 
<p style="margin-left:0cm;">                                                                                        <strong>图2 原始数据</strong></p> 
<p style="margin-left:0cm;"> </p> 
<p style="text-indent:50px;">                                               <img alt="" class="has" height="380" src="https://images2.imgbox.com/97/98/6BQwxxFn_o.png" width="265">    </p> 
<p style="margin-left:0cm;">                                                                          <strong>   图3 原始数据地理坐标信息</strong></p> 
<p style="margin-left:0cm;"> </p> 
<p style="text-indent:50px;">                                               <img alt="" class="has" height="373" src="https://images2.imgbox.com/e2/1d/JYJqvUkY_o.png" width="267"></p> 
<p style="margin-left:0cm;">                                                                            <strong>图4 截取之后的地理坐标信息</strong></p> 
<p style="margin-left:0cm;"><strong>（</strong><strong>1</strong><strong>）</strong><strong>Code</strong><strong>：</strong></p> 
<pre class="has"><code>function Geographic_RPW()
tic %Record the running time
%% Read file
[Data,R] = geotiffread('D:\20181102\CSDN-博文\Matlab处理地理数据\ndvi2.tif');
%% Select interception position
Start_Latitude = 0.6;
End_Latitude = 0.8;
Start_Lontitude = 0.1;
End_Lontitude = 0.3;
%需要补充一下此四个数的意义

%% cuttiing into certain shape
Posion = [Start_Latitude,End_Latitude;Start_Lontitude,End_Lontitude];
[row, col] = size(Data);
first_row = floor(Posion(1,1)*row)+1;%起始维度(加1为了避免first_row=0，使用ceil函数可以不用加1)
last_row = floor(Posion(1,2)*row);%结束维度
first_col = floor(Posion(2,1)*col)+1;%起始经度(加1为了避免first_row=0，使用ceil函数可以不用加1)
last_col = floor(Posion(2,2)*col);%结束经度
subImage = Data(first_row:last_row, first_col:last_col);%数据截取

%% Set GeographicCells Reference parameters
%文件的地理坐标信息还有样本大小信息同样也是需要截取的和更新的，截取的基本理论类似与数据的截取办法。
% mainly set the range of latitude and lontitude
subR = R;%原始数据的地理坐标信息和数据大小等信息。
subR.RasterSize = size(subImage);%跟新截取后的数据大小信息
del_La = subR.LatitudeLimits(2) - subR.LatitudeLimits(1);% the scale of latitude（纬度的最大值减去最小值）
del_Lon = subR.LongitudeLimits(2) - subR.LongitudeLimits(1);% the scale of lontitude（经度的最大值减去最小值）
subR.LatitudeLimits = [subR.LatitudeLimits(1)+Posion(1,1)*del_La,...
    subR.LatitudeLimits(2) - del_La*(1 - Posion(1,2))];%截取位置的维度范围
subR.LongitudeLimits = [subR.LongitudeLimits(1)+Posion(2,1)*del_Lon,...
    subR.LongitudeLimits(2) - del_Lon*(1 - Posion(2,2))];%截取位置的经度范围

%% Data processing
%一些最基本的数据处理，在此要根据数据的性质（大小与分布规律看一下）
%在matlab调试中看一下截取后的数据的值，下面这个处理过程只是针对我
%所要解决的一个问题。
[row,col] = size(subImage);
for i = 1:row
   for j = 1:col
      if subImage(i,j)&lt;0
          subImage(i,j) = 0;
      elseif subImage(i,j)&gt;0
          subImage(i,j) = 1;
      end
   end
end

for i = floor(0.45*row):floor(0.8*row)
   for j = floor(0.14*col):floor(0.5*col)
      if subImage(i,j)&lt;=0
          subImage(i,j) = 0;
      elseif subImage(i,j)&gt;0
          subImage(i,j) = 2;
      end
   end
end
%% Preview the interception posion
figure(1);
imshow(subImage);%黑白图
figure(2);
imagesc(subImage);%彩色图

%% Writiing the data to a new GEOTIFF file
filename = 'C:\Users\Administrator\Desktop\ndvi-new.tif';
geotiffwrite(filename,subImage,subR);%保存文件
toc%Recording the time when the program end running
%% Writed By themingyi
%2018/12/05</code></pre> 
<p style="margin-left:0cm;"><strong>（</strong><strong>2</strong><strong>）处理结果</strong></p> 
<p style="text-indent:50px;">                   <img alt="" class="has" height="502" src="https://images2.imgbox.com/0e/9a/h4tZbRyr_o.png" width="554"></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">                                                                                           <strong>  图5 imshow展示结果</strong></p> 
<p style="margin-left:0cm;"> </p> 
<p style="text-indent:50px;">                       <img alt="" class="has" height="415" src="https://images2.imgbox.com/40/67/mncE9ilg_o.png" width="554"></p> 
<p style="margin-left:0cm;">                                                                                            <strong> 图6 imagesc 展示结果</strong></p> 
<p style="margin-left:0cm;"> </p> 
<p style="text-indent:50px;">                                <img alt="" class="has" height="370" src="https://images2.imgbox.com/c5/70/uAJSXP7l_o.png" width="472"></p> 
<p style="margin-left:0cm;">                                                                                         <strong> 图7 AI修改后的最终结果</strong></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><strong>PS：本程序以及所有使用的数据已经放到百度云供下载：</strong></p> 
<p style="margin-left:0cm;">链接：https://pan.baidu.com/s/1o2vC_1QKyWmwvW8-g-E09Q <br> 提取码：s97g <br><span style="color:#f33b45;"><em><strong>欢迎讨论指正，本人e-mail：themingyi123@gmail.com</strong></em></span></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><strong>参考：</strong></p> 
<p>1、<a href="https://www.mathworks.com/help/map/ref/geotiffread.html" rel="nofollow">https://www.mathworks.com/help/map/ref/geotiffread.html</a></p> 
<p>2、<a href="https://blog.csdn.net/liyanzhong/article/details/52850581">https://blog.csdn.net/liyanzhong/article/details/52850581</a></p> 
<p style="margin-left:0cm;">Matlab读取带有地理信息的图像</p> 
<p>3、<a href="http://www.ilovematlab.cn/forum.php?mod=viewthread&amp;tid=213403" rel="nofollow">http://www.ilovematlab.cn/forum.php?mod=viewthread&amp;tid=213403</a></p> 
<p style="margin-left:0cm;">MATLAB 遥感影像的读写操作，带地理坐标信息</p> 
<p>4、<a href="https://blog.csdn.net/qq_26906835/article/details/80841823">https://blog.csdn.net/qq_26906835/article/details/80841823</a></p> 
<p style="margin-left:0cm;">Matlab（一）：二维矩阵转换为geoTiff</p> 
<p style="margin-left:0cm;">5、<a href="http://www.mathworks.com/help/map/ref/geotiffwrite.html" rel="nofollow">http://www.mathworks.com/help/map/ref/geotiffwrite.html</a></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/73633c4d844b198201cbdf35dce88266/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">交叉编译那些事</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/48e097b1ef00689484620bc278178d79/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Visual studio 2017 &#43; cuda9.0环境配置 心路历程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>每日OJ题_路径dp⑥_力扣174. 地下城游戏 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="每日OJ题_路径dp⑥_力扣174. 地下城游戏" />
<meta property="og:description" content="目录
力扣174. 地下城游戏
解析代码
力扣174. 地下城游戏 174. 地下城游戏
难度 困难
恶魔们抓住了公主并将她关在了地下城 dungeon 的 右下角 。地下城是由 m x n 个房间组成的二维网格。我们英勇的骑士最初被安置在 左上角 的房间里，他必须穿过地下城并通过对抗恶魔来拯救公主。
骑士的初始健康点数为一个正整数。如果他的健康点数在某一时刻降至 0 或以下，他会立即死亡。
有些房间由恶魔守卫，因此骑士在进入这些房间时会失去健康点数（若房间里的值为负整数，则表示骑士将损失健康点数）；其他房间要么是空的（房间里的值为 0），要么包含增加骑士健康点数的魔法球（若房间里的值为正整数，则表示骑士将增加健康点数）。
为了尽快解救公主，骑士决定每次只 向右 或 向下 移动一步。
返回确保骑士能够拯救到公主所需的最低初始健康点数。
注意：任何房间都可能对骑士的健康点数造成威胁，也可能增加骑士的健康点数，包括骑士进入的左上角房间以及公主被监禁的右下角房间。
示例 1：
输入：dungeon = [[-2,-3,3],[-5,-10,1],[10,30,-5]] 输出：7 解释：如果骑士遵循最佳路径：右 -&gt; 右 -&gt; 下 -&gt; 下 ，则骑士的初始健康点数至少为 7 。 示例 2：
输入：dungeon = [[0]] 输出：1 提示：
m == dungeon.lengthn == dungeon[i].length1 &lt;= m, n &lt;= 200-1000 &lt;= dungeon[i][j] &lt;= 1000 class Solution { public: int calculateMinimumHP(vector&lt;vector&lt;int&gt;&gt;&amp; dungeon) { } }; 解析代码 路径dp问题，这道题的状态表示如果定义成：从起点开始，到达 [i, j] 位置的时候，所需的最低初始健康点数。 那么分析状态转移方程的时候会有一个问题：那就是当前的健康点数还会受到后面的路径的影响。也就是从上往下的状态转移不能很好地解决问题。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f32d7ca8eab526567f8a8e08627b153d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-11T23:13:19+08:00" />
<meta property="article:modified_time" content="2024-03-11T23:13:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">每日OJ题_路径dp⑥_力扣174. 地下城游戏</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%8A%9B%E6%89%A3174.%20%E5%9C%B0%E4%B8%8B%E5%9F%8E%E6%B8%B8%E6%88%8F-toc" style="margin-left:0px;"><a href="#%E5%8A%9B%E6%89%A3174.%20%E5%9C%B0%E4%B8%8B%E5%9F%8E%E6%B8%B8%E6%88%8F" rel="nofollow">力扣174. 地下城游戏</a></p> 
<p id="%E8%A7%A3%E6%9E%90%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#%E8%A7%A3%E6%9E%90%E4%BB%A3%E7%A0%81" rel="nofollow">解析代码</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E5%8A%9B%E6%89%A3174.%20%E5%9C%B0%E4%B8%8B%E5%9F%8E%E6%B8%B8%E6%88%8F" style="background-color:transparent;">力扣174. 地下城游戏</h2> 
<p><a href="https://leetcode.cn/problems/dungeon-game/" rel="nofollow" title="174. 地下城游戏">174. 地下城游戏</a></p> 
<p>难度 困难</p> 
<p>恶魔们抓住了公主并将她关在了地下城 <code>dungeon</code> 的 <strong>右下角</strong> 。地下城是由 <code>m x n</code> 个房间组成的二维网格。我们英勇的骑士最初被安置在 <strong>左上角</strong> 的房间里，他必须穿过地下城并通过对抗恶魔来拯救公主。</p> 
<p>骑士的初始健康点数为一个正整数。如果他的健康点数在某一时刻降至 0 或以下，他会立即死亡。</p> 
<p>有些房间由恶魔守卫，因此骑士在进入这些房间时会失去健康点数（若房间里的值为<em>负整数</em>，则表示骑士将损失健康点数）；其他房间要么是空的（房间里的值为 <em>0</em>），要么包含增加骑士健康点数的魔法球（若房间里的值为<em>正整数</em>，则表示骑士将增加健康点数）。</p> 
<p>为了尽快解救公主，骑士决定每次只 <strong>向右</strong> 或 <strong>向下</strong> 移动一步。</p> 
<p>返回确保骑士能够拯救到公主所需的最低初始健康点数。</p> 
<p><strong>注意：</strong>任何房间都可能对骑士的健康点数造成威胁，也可能增加骑士的健康点数，包括骑士进入的左上角房间以及公主被监禁的右下角房间。</p> 
<p><strong>示例 1：</strong></p> 
<p></p> 
<p class="img-center"><img alt="" height="253" src="https://images2.imgbox.com/b8/dd/BjmE3lPs_o.jpg" width="253"></p> 
<pre><strong>输入：</strong>dungeon = [[-2,-3,3],[-5,-10,1],[10,30,-5]]
<strong>输出：</strong>7
<strong>解释：</strong>如果骑士遵循最佳路径：右 -&gt; 右 -&gt; 下 -&gt; 下 ，则骑士的初始健康点数至少为 7 。</pre> 
<p><strong>示例 2：</strong></p> 
<pre><strong>输入：</strong>dungeon = [[0]]
<strong>输出：</strong>1
</pre> 
<p><strong>提示：</strong></p> 
<ul><li><code>m == dungeon.length</code></li><li><code>n == dungeon[i].length</code></li><li><code>1 &lt;= m, n &lt;= 200</code></li><li><code>-1000 &lt;= dungeon[i][j] &lt;= 1000</code></li></ul> 
<pre><code class="language-cpp">class Solution {
public:
    int calculateMinimumHP(vector&lt;vector&lt;int&gt;&gt;&amp; dungeon) {

    }
};</code></pre> 
<hr> 
<h3 id="%E8%A7%A3%E6%9E%90%E4%BB%A3%E7%A0%81">解析代码</h3> 
<p>        路径dp问题，这道题的状态表示如果定义成：<strong>从起点开始，到达 [i, j] 位置的时候，所需的最低初始健康点数。</strong> 那么分析状态转移方程的时候会有一个问题：那就是当前的健康点数还会受到后面的路径的影响。也就是从上往下的状态转移不能很好地解决问题。</p> 
<p>        这个时候我们要换⼀种状态表示：<strong>从 [i, j] 位置出发，到达终点时所需要的最低初始健康点 数。</strong>这样在分析状态转移的时候，后续的最佳状态就已经知晓。</p> 
<p>综上所述，<strong> dp[i][j] 表示：从 [i, j] 位置出发，到达终点时所需的最低初始健康点数。</strong></p> 
<hr> 
<p><strong>状态转移方程： </strong></p> 
<p><strong>dp[i][j] = min(dp[i + 1][j], dp[i][j + 1]) - dungeon[i][j];</strong></p> 
<p>        如果当前位置的 dungeon[i][j] 是⼀个比较大的正数的话， dp[i][j] 的值可能变 成 0 或者负数。也就是最低点数会小于 1 ，那么骑士就会死亡。因此求出来的 dp[i] [j] 如果小于等于 0 的话，说明此时的最低初始值应该为 1 。</p> 
<hr> 
<p><strong>初始化和返回值：</strong></p> 
<p>        在本题中，在 dp 表最后面添加一行，并且添加一列后，所有的值都先初始化为INT_MAX，然后让 dp[m][n - 1] = dp[m - 1][n] = 1 即可。</p> 
<p>从右下往左上填值，最后返回 dp[0][0] 的值。</p> 
<pre><code class="language-cpp">class Solution {
public:
    int calculateMinimumHP(vector&lt;vector&lt;int&gt;&gt;&amp; dungeon) {
        int m = dungeon.size(), n = dungeon[0].size();
        // dp[i][j] 表示：从 [i, j] 位置出发，到达终点时所需的最低初始健康点数
        vector&lt;vector&lt;int&gt;&gt; dp(m+1, vector&lt;int&gt;(n+1, INT_MAX)); // 多开一行一列
        dp[m][n-1] = dp[m-1][n] = 1;
        for(int i = m-1; i &gt;= 0; --i)
        {
            for(int j = n-1; j &gt;= 0; --j)
            {
                dp[i][j] = min(dp[i+1][j], dp[i][j+1]) - dungeon[i][j];
                if(dp[i][j] &lt; 1)
                    dp[i][j] = 1;
            }
        }
        return dp[0][0];
    }
};</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/843f56e01b9e6550563f232e28aa01db/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c&#43;&#43;基础学习第四天（内存分区，引用）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/48799c1105155e3b30fd2345e7f2f136/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux中查看目录文件（ls）用法：</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
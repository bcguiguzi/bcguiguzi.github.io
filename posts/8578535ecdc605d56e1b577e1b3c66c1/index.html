<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>iOS 用UISearchDisplayController实现查找功能 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="iOS 用UISearchDisplayController实现查找功能" />
<meta property="og:description" content="UISearchDisplayController是iOS中用于处理搜索功能的控制器，此控制器需要和UISearchBar结合使用
示例代码如下：
1 // 2 // WKRootViewController.m 3 // 表格视图的搜索功能 4 // 5 // Created by student on 14-10-20. 6 // Copyright (c) 2014年 wukong. All rights reserved. 7 // 8 9 #import &#34;WKRootViewController.h&#34; 10 11 @interface WKRootViewController () 12 13 @property (strong, nonatomic) NSMutableArray* dataSource; 14 15 @property (strong, nonatomic)NSMutableArray* resultArrat; 16 17 18 @end 19 20 @implementation WKRootViewController 21 { 22 //用于加载数据源的表视图 23 UITableView *_tableView; 24 25 UISearchBar *_searchBar; 26 27 UISearchDisplayController *_searchControl; 28 } 29 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 30 { 31 self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; 32 if (self) { 33 // Custom initialization 34 } 35 return self; 36 } 37 38 - (void)viewDidLoad 39 { 40 [super viewDidLoad]; 41 42 [self createUI]; 43 [self createDataSource]; 44 // Do any additional setup after loading the view." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/8578535ecdc605d56e1b577e1b3c66c1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-30T09:39:47+08:00" />
<meta property="article:modified_time" content="2019-06-30T09:39:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">iOS 用UISearchDisplayController实现查找功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>　　UISearchDisplayController是iOS中用于处理搜索功能的控制器，此控制器需要和UISearchBar结合使用</p> 
 <p>　　示例代码如下：</p> 
 <div class="cnblogs_code"> 
  <pre><span style="color:#008080;">  1</span> <span style="color:#008000;">//</span>
<span style="color:#008080;">  2</span> <span style="color:#008000;">//</span><span style="color:#008000;">  WKRootViewController.m
</span><span style="color:#008080;">  3</span> <span style="color:#008000;">//</span><span style="color:#008000;">  表格视图的搜索功能
</span><span style="color:#008080;">  4</span> <span style="color:#008000;">//</span>
<span style="color:#008080;">  5</span> <span style="color:#008000;">//</span><span style="color:#008000;">  Created by student on 14-10-20.
</span><span style="color:#008080;">  6</span> <span style="color:#008000;">//</span><span style="color:#008000;">  Copyright (c) 2014年 wukong. All rights reserved.
</span><span style="color:#008080;">  7</span> <span style="color:#008000;">//
</span><span style="color:#008080;">  8</span> 
<span style="color:#008080;">  9</span> <span style="color:#0000ff;">#import</span> <span style="color:#800000;">"</span><span style="color:#800000;">WKRootViewController.h</span><span style="color:#800000;">"</span>
<span style="color:#008080;"> 10</span> 
<span style="color:#008080;"> 11</span> <span style="color:#0000ff;">@interface</span><span style="color:#000000;"> WKRootViewController ()
</span><span style="color:#008080;"> 12</span> 
<span style="color:#008080;"> 13</span> @property (strong, nonatomic) NSMutableArray*<span style="color:#000000;"> dataSource;
</span><span style="color:#008080;"> 14</span> 
<span style="color:#008080;"> 15</span> @property (strong, nonatomic)NSMutableArray*<span style="color:#000000;"> resultArrat;
</span><span style="color:#008080;"> 16</span> 
<span style="color:#008080;"> 17</span> 
<span style="color:#008080;"> 18</span> <span style="color:#0000ff;">@end</span>
<span style="color:#008080;"> 19</span> 
<span style="color:#008080;"> 20</span> <span style="color:#0000ff;">@implementation</span><span style="color:#000000;"> WKRootViewController
</span><span style="color:#008080;"> 21</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 22</span>     <span style="color:#008000;">//</span><span style="color:#008000;">用于加载数据源的表视图</span>
<span style="color:#008080;"> 23</span>     UITableView *<span style="color:#000000;">_tableView;
</span><span style="color:#008080;"> 24</span>     
<span style="color:#008080;"> 25</span>     UISearchBar *<span style="color:#000000;">_searchBar;
</span><span style="color:#008080;"> 26</span>     
<span style="color:#008080;"> 27</span>     UISearchDisplayController *<span style="color:#000000;">_searchControl;
</span><span style="color:#008080;"> 28</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 29</span> - (<span style="color:#0000ff;">id</span>)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *<span style="color:#000000;">)nibBundleOrNil
</span><span style="color:#008080;"> 30</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 31</span>     self =<span style="color:#000000;"> [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
</span><span style="color:#008080;"> 32</span>     <span style="color:#0000ff;">if</span><span style="color:#000000;"> (self) {
</span><span style="color:#008080;"> 33</span>         <span style="color:#008000;">//</span><span style="color:#008000;"> Custom initialization</span>
<span style="color:#008080;"> 34</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 35</span>     <span style="color:#0000ff;">return</span><span style="color:#000000;"> self;
</span><span style="color:#008080;"> 36</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 37</span> 
<span style="color:#008080;"> 38</span> - (<span style="color:#0000ff;">void</span><span style="color:#000000;">)viewDidLoad
</span><span style="color:#008080;"> 39</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 40</span> <span style="color:#000000;">    [super viewDidLoad];
</span><span style="color:#008080;"> 41</span>     
<span style="color:#008080;"> 42</span> <span style="color:#000000;">    [self createUI];
</span><span style="color:#008080;"> 43</span> <span style="color:#000000;">    [self createDataSource];
</span><span style="color:#008080;"> 44</span>     <span style="color:#008000;">//</span><span style="color:#008000;"> Do any additional setup after loading the view.</span>
<span style="color:#008080;"> 45</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 46</span> 
<span style="color:#008080;"> 47</span> - (<span style="color:#0000ff;">void</span><span style="color:#000000;">)createDataSource
</span><span style="color:#008080;"> 48</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 49</span>     _dataSource =<span style="color:#000000;"> [[NSMutableArray alloc] init];
</span><span style="color:#008080;"> 50</span>     _resultArrat =<span style="color:#000000;"> [[NSMutableArray alloc] init];
</span><span style="color:#008080;"> 51</span>     <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> i = <span style="color:#800000;">'</span><span style="color:#800000;">A</span><span style="color:#800000;">'</span>; i &lt;= <span style="color:#800000;">'</span><span style="color:#800000;">z</span><span style="color:#800000;">'</span>; i++<span style="color:#000000;">) {
</span><span style="color:#008080;"> 52</span>         NSMutableArray *section =<span style="color:#000000;"> [[NSMutableArray alloc] init];
</span><span style="color:#008080;"> 53</span>         <span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">int</span> j = <span style="color:#800080;">1</span>; j &lt;= <span style="color:#800080;">10</span>; j++<span style="color:#000000;">) {
</span><span style="color:#008080;"> 54</span>             NSString *str = [NSString stringWithFormat:<span style="color:#800000;">@"</span><span style="color:#800000;">%c-%d</span><span style="color:#800000;">"</span><span style="color:#000000;">, i, j];
</span><span style="color:#008080;"> 55</span> <span style="color:#000000;">            [section addObject:str];
</span><span style="color:#008080;"> 56</span> <span style="color:#000000;">        }
</span><span style="color:#008080;"> 57</span> <span style="color:#000000;">        [_dataSource addObject:section];
</span><span style="color:#008080;"> 58</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 59</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 60</span> 
<span style="color:#008080;"> 61</span> <span style="color:#0000ff;">#pragma</span> mark- UITableViewDataSource
<span style="color:#008080;"> 62</span> 
<span style="color:#008080;"> 63</span> - (NSInteger)numberOfSectionsInTableView:(UITableView *<span style="color:#000000;">)tableView
</span><span style="color:#008080;"> 64</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 65</span>     <span style="color:#008000;">//</span><span style="color:#008000;">判断当前展示的表格</span>
<span style="color:#008080;"> 66</span>     <span style="color:#0000ff;">if</span> (tableView !=<span style="color:#000000;"> _tableView)
</span><span style="color:#008080;"> 67</span>         <span style="color:#0000ff;">return</span> <span style="color:#800080;">1</span><span style="color:#000000;">;
</span><span style="color:#008080;"> 68</span>     <span style="color:#0000ff;">return</span><span style="color:#000000;"> _dataSource.count;
</span><span style="color:#008080;"> 69</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 70</span> 
<span style="color:#008080;"> 71</span> - (NSInteger)tableView:(UITableView *<span style="color:#000000;">)tableView numberOfRowsInSection:(NSInteger)section
</span><span style="color:#008080;"> 72</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 73</span>     <span style="color:#0000ff;">if</span> (tableView !=<span style="color:#000000;"> _tableView) {
</span><span style="color:#008080;"> 74</span>         <span style="color:#0000ff;">return</span><span style="color:#000000;"> _resultArrat.count;
</span><span style="color:#008080;"> 75</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 76</span>     <span style="color:#0000ff;">return</span><span style="color:#000000;"> [[_dataSource objectAtIndex:section] count];
</span><span style="color:#008080;"> 77</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 78</span> 
<span style="color:#008080;"> 79</span> - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *<span style="color:#000000;">)indexPath
</span><span style="color:#008080;"> 80</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 81</span>     [tableView registerClass:[UITableViewCell <span style="color:#0000ff;">class</span>] forCellReuseIdentifier:<span style="color:#800000;">@"</span><span style="color:#800000;">cell</span><span style="color:#800000;">"</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 82</span>     
<span style="color:#008080;"> 83</span>     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:<span style="color:#800000;">@"</span><span style="color:#800000;">cell</span><span style="color:#800000;">"</span><span style="color:#000000;">];
</span><span style="color:#008080;"> 84</span>     <span style="color:#0000ff;">if</span> (tableView !=<span style="color:#000000;"> _tableView) {
</span><span style="color:#008080;"> 85</span>         cell.textLabel.text =<span style="color:#000000;"> [_resultArrat objectAtIndex:indexPath.row];
</span><span style="color:#008080;"> 86</span>     }<span style="color:#0000ff;">else</span><span style="color:#000000;">{
</span><span style="color:#008080;"> 87</span>         cell.textLabel.text =<span style="color:#000000;"> [[_dataSource objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
</span><span style="color:#008080;"> 88</span> <span style="color:#000000;">    }
</span><span style="color:#008080;"> 89</span>     <span style="color:#0000ff;">return</span><span style="color:#000000;"> cell;
</span><span style="color:#008080;"> 90</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 91</span> 
<span style="color:#008080;"> 92</span> - (<span style="color:#0000ff;">void</span><span style="color:#000000;">)didReceiveMemoryWarning
</span><span style="color:#008080;"> 93</span> <span style="color:#000000;">{
</span><span style="color:#008080;"> 94</span> <span style="color:#000000;">    [super didReceiveMemoryWarning];
</span><span style="color:#008080;"> 95</span>     <span style="color:#008000;">//</span><span style="color:#008000;"> Dispose of any resources that can be recreated.</span>
<span style="color:#008080;"> 96</span> <span style="color:#000000;">}
</span><span style="color:#008080;"> 97</span> 
<span style="color:#008080;"> 98</span> 
<span style="color:#008080;"> 99</span> <span style="color:#0000ff;">#pragma</span> mark - CreateUI
<span style="color:#008080;">100</span> - (<span style="color:#0000ff;">void</span><span style="color:#000000;">)createUI
</span><span style="color:#008080;">101</span> <span style="color:#000000;">{
</span><span style="color:#008080;">102</span>     _tableView = [[UITableView alloc] initWithFrame:CGRectMake(<span style="color:#800080;">10</span>, <span style="color:#800080;">30</span>, <span style="color:#800080;">300</span>, <span style="color:#800080;">440</span><span style="color:#000000;">) style:UITableViewStylePlain];
</span><span style="color:#008080;">103</span>     _tableView.<span style="color:#0000ff;">delegate</span> =<span style="color:#000000;"> self;
</span><span style="color:#008080;">104</span>     _tableView.dataSource =<span style="color:#000000;"> self;
</span><span style="color:#008080;">105</span> <span style="color:#000000;">    [self.view addSubview:_tableView];
</span><span style="color:#008080;">106</span>     
<span style="color:#008080;">107</span>     _searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(<span style="color:#800080;">0</span>, <span style="color:#800080;">0</span>, <span style="color:#800080;">300</span>, <span style="color:#800080;">30</span><span style="color:#000000;">)];
</span><span style="color:#008080;">108</span>     _searchBar.searchBarStyle =<span style="color:#000000;"> UISearchBarStyleMinimal;
</span><span style="color:#008080;">109</span>     _searchBar.<span style="color:#0000ff;">delegate</span> =<span style="color:#000000;"> self;
</span><span style="color:#008080;">110</span> <span style="color:#000000;">    [_tableView setTableHeaderView:_searchBar];
</span><span style="color:#008080;">111</span>     <span style="color:#008000;">/*</span>
<span style="color:#008080;">112</span> <span style="color:#008000;">     第一个参数：用于输入搜索内容的UISearchBar对象
</span><span style="color:#008080;">113</span> <span style="color:#008000;">     第二个参数：提供给我的表格视图数据源的控制器对象，这个对象必须是实现了表格的两个协议
</span><span style="color:#008080;">114</span>      <span style="color:#008000;">*/</span>
<span style="color:#008080;">115</span>     _searchControl =<span style="color:#000000;"> [[UISearchDisplayController alloc] initWithSearchBar:_searchBar contentsController:self];
</span><span style="color:#008080;">116</span> <span style="color:#008000;">//</span><span style="color:#008000;">    _searchControl.searchResultsTableView
</span><span style="color:#008080;">117</span> <span style="color:#008000;">//</span><span style="color:#008000;">    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 60, 30)];
</span><span style="color:#008080;">118</span> <span style="color:#008000;">//</span><span style="color:#008000;">    label.backgroundColor =[UIColor redColor];
</span><span style="color:#008080;">119</span> <span style="color:#008000;">//</span><span style="color:#008000;">    [_searchControl.searchResultsTableView setTableHeaderView:label];
</span><span style="color:#008080;">120</span>     <span style="color:#008000;">//</span><span style="color:#008000;">设置_searchControl自带的表格视图的委托对象</span>
<span style="color:#008080;">121</span> <span style="color:#000000;">    [_searchControl setSearchResultsDataSource:self];
</span><span style="color:#008080;">122</span> <span style="color:#000000;">    [_searchControl setSearchResultsDelegate:self];
</span><span style="color:#008080;">123</span> <span style="color:#000000;">}
</span><span style="color:#008080;">124</span> 
<span style="color:#008080;">125</span> <span style="color:#0000ff;">#pragma</span> mark -UISearchBarDelegate
<span style="color:#008080;">126</span> - (<span style="color:#0000ff;">void</span>)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *<span style="color:#000000;">)searchText
</span><span style="color:#008080;">127</span> <span style="color:#000000;">{
</span><span style="color:#008080;">128</span> <span style="color:#000000;">    [_resultArrat removeAllObjects];
</span><span style="color:#008080;">129</span>     NSString *str = [NSString stringWithFormat:<span style="color:#800000;">@"</span><span style="color:#800000;">*%@*</span><span style="color:#800000;">"</span><span style="color:#000000;">, searchText];
</span><span style="color:#008080;">130</span>     NSPredicate *pred = [NSPredicate predicateWithFormat:<span style="color:#800000;">@"</span><span style="color:#800000;">SELF like %@</span><span style="color:#800000;">"</span><span style="color:#000000;">, str];
</span><span style="color:#008080;">131</span>     <span style="color:#0000ff;">for</span> (NSMutableArray *arr <span style="color:#0000ff;">in</span><span style="color:#000000;"> _dataSource) {
</span><span style="color:#008080;">132</span>         <span style="color:#0000ff;">for</span> (NSString *str <span style="color:#0000ff;">in</span><span style="color:#000000;"> arr) {
</span><span style="color:#008080;">133</span>             <span style="color:#0000ff;">if</span><span style="color:#000000;"> ([pred evaluateWithObject:str]) {
</span><span style="color:#008080;">134</span> <span style="color:#000000;">                [_resultArrat addObject:str];
</span><span style="color:#008080;">135</span> <span style="color:#000000;">            }
</span><span style="color:#008080;">136</span> <span style="color:#000000;">        }
</span><span style="color:#008080;">137</span> <span style="color:#000000;">    }
</span><span style="color:#008080;">138</span> <span style="color:#000000;">}
</span><span style="color:#008080;">139</span> <span style="color:#0000ff;">@end</span></pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/pretty-guy/p/4063539.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6293907b583de1293c07f474095ef683/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CentOS 安装 aria2</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b9276fc81421e7c66bdffc647575d06a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43; vector 二维数组初始化方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
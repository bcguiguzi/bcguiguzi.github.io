<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于ajax的搜索引擎 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于ajax的搜索引擎" />
<meta property="og:description" content="这两个星期在学习xml、JavaScript和ajax的东西，laoxi要求我们先看这些知识，然后用这些知识做一个搜索引擎的东西。一开始用两天看了一下关于xml的东西，但发现只是看根本就是，前脚看后脚忘。干脆先做出这个东西出来，用到哪些知识再看吧，于是我跟一名叫做小猪的家伙一起研究起了这个东西。一开始是做了一个服务器端控件的搜索引擎，后来才慢慢转到ajax上来，先把基于ajax的东西贴上来，哈哈 废话不多讲 基于ajax的搜索引擎，其原理其实是，利用了windows已经做好的一个搜索引擎接口，这个借口想必大家也都见过，就是一个被叫做bing的接口。 ajax向该接口提出请求，并将参数传递过去，服务器相应，并返回结果，JavaScript处理结果并显示。 看起来描述的这么简单，但是确实也费了我们一番功夫。 首先利用ajax发出请求，光这一请求，就花了我们大约两天的时间，首先请求的地址要写对，其次传递的参数也要写对，因为bing接口在处理参数的时候其实是以xml的形式来处理参数，所以我们的参数要写成xml结构的字符串。这样服务器端才能返回正确的结果，其实返回的结果既可以是普通的字符串形式，直接显示，也可以使xml的形式.xml的形式需要利用dom进行处理。才能正确显示在浏览器中 function sendHttpRequest(url,callbackFunc,respXml,ParameterStr) { // var xmlobj=null; try { xmlobj=new XMLHttpRequest(); } catch(e) { try { xmlobj=new ActiveXObject(&#34;Microsoft.XMLHTTP&#34;); } catch(e) { alert(&#34;AJAX is not supported by your browser!&#34;); return false; } } xmlobj.onreadystatechange=function() { if(xmlobj.readyState==4) {//当请求发送完毕 if(xmlobj.status==200) {//当正确接收到服务器端响应内容 respXml?eval(callbackFunc&#43;&#34;(xmlobj.responseXML)&#34;):eval(callbackFunc&#43;&#39;(xmlobj.responseText)&#39;);//调用回调函数显示服务器端响应的内容 } } } // open socket connection xmlobj.open(&#39;post&#39;,url,true); // send http header xmlobj.setRequestHeader(&#34;Content-Type&#34;,&#34;text/html;charset=UTF-8&#34;); // send http request xmlobj.send(ParameterStr); } // display search results function displayResults(results) {//显示结果的回调函数 var rootDom=results." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/78b8ab64882430ff003acfb0baeb86e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-01-24T12:43:02+08:00" />
<meta property="article:modified_time" content="2010-01-24T12:43:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于ajax的搜索引擎</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="artical-content-bak main-content editor-side-new"> 
 <div class="con editor-preview-side" id="result"> 
  <div>
          这两个星期在学习xml、JavaScript和ajax的东西，laoxi要求我们先看这些知识，然后用这些知识做一个搜索引擎的东西。一开始用两天看了一下关于xml的东西，但发现只是看根本就是，前脚看后脚忘。干脆先做出这个东西出来，用到哪些知识再看吧，于是我跟一名叫做小猪的家伙一起研究起了这个东西。一开始是做了一个服务器端控件的搜索引擎，后来才慢慢转到ajax上来，先把基于ajax的东西贴上来，哈哈 
  </div> 
  <div>
           废话不多讲 
  </div> 
  <div>
               基于ajax的搜索引擎，其原理其实是，利用了windows已经做好的一个搜索引擎接口，这个借口想必大家也都见过，就是一个被叫做bing的接口。 
  </div> 
  <div>
             ajax向该接口提出请求，并将参数传递过去，服务器相应，并返回结果，JavaScript处理结果并显示。 
  </div> 
  <div>
           看起来描述的这么简单，但是确实也费了我们一番功夫。 
  </div> 
  <div>
           首先利用ajax发出请求，光这一请求，就花了我们大约两天的时间，首先请求的地址要写对，其次传递的参数也要写对，因为bing接口在处理参数的时候其实是以xml的形式来处理参数，所以我们的参数要写成xml结构的字符串。这样服务器端才能返回正确的结果，其实返回的结果既可以是普通的字符串形式，直接显示，也可以使xml的形式.xml的形式需要利用dom进行处理。才能正确显示在浏览器中 
  </div> 
  <div>
     function sendHttpRequest(url,callbackFunc,respXml,ParameterStr) 
   <br>{  // 
   <br>     
   <br>           var xmlobj=null; 
   <br>         
   <br>           try 
   <br>           { 
   <br>                xmlobj=new XMLHttpRequest(); 
   <br>           } 
   <br>           
   <br>           catch(e) 
   <br>          { 
   <br>              
   <br>            try 
   <br>            { 
   <br>                   
   <br>                xmlobj=new ActiveXObject("Microsoft.XMLHTTP"); 
   <br>            } 
   <br>               
   <br>            catch(e) 
   <br>            { 
   <br>                   
   <br>                        alert("AJAX is not supported by your browser!"); 
   <br>                   
   <br>                        return false; 
   <br>                   
   <br>            } 
   <br>           } 
   <br>          xmlobj.onreadystatechange=function() 
   <br>         { 
   <br>           
   <br>                if(xmlobj.readyState==4) 
   <br>                {//当请求发送完毕 
   <br>                    if(xmlobj.status==200) 
   <br>                    {//当正确接收到服务器端响应内容 
   <br>                    
   <br>                        respXml?eval(callbackFunc+"(xmlobj.responseXML)"):eval(callbackFunc+'(xmlobj.responseText)');//调用回调函数显示服务器端响应的内容 
   <br>                       
   <br>                
   <br>                    } 
   <br>                } 
   <br>          } 
   <br>        // open socket connection 
   <br>        xmlobj.open('post',url,true); 
   <br>        // send http header 
   <br>         xmlobj.setRequestHeader("Content-Type","text/html;charset=UTF-8"); 
   <br>        // send http request 
   <br>        
   <br>        xmlobj.send(ParameterStr); 
   <br>} 
   <br>// display search results 
   <br>function displayResults(results) 
   <br>{//显示结果的回调函数 
   <br>    var rootDom=results.documentElement;//获取xml的根结点 
   <br>    var Nodes=rootDom.selectNodes("//soapenv:Body/SearchResponse/parameters/Web/Results/WebResult"); 
   <br>    //遍历集合 
   <br>     var content="&lt;table&gt;" 
   <br>    for(var i=0;i&lt;Nodes.length;i++) 
   <br>    { 
   <br>     
   <br>       var nodename=Nodes.item(i).nodeName; 
   <br>       var node= Nodes.item(i);//郁闷，居然不能这么用 
   <br>       var Title=node.childNodes.item(0).text; 
   <br>       var des=node.selectSingleNode("Description"); 
   <br>       if(des!=null) 
   <br>          var description=des.text; 
   <br>       else 
   <br>          var description=""; 
   <br>       var url=node.selectSingleNode("Url").text; 
   <br>       
   <br>       var displayUrl=node.selectSingleNode("DisplayUrl").text; 
   <br>       var dateTime=node.selectSingleNode("DateTime").text; 
   <br>        content+="&lt;tr&gt;&lt;td colspan=2 &gt;&lt;a href='"+url+"'style='font-size:14px'&gt;"+Title+"&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;"+ 
   <br>                   "&lt;tr&gt;&lt;td colspan=2 style='font-size:12px'&gt;"+description+"&lt;/td&gt;&lt;/tr&gt;"+ 
   <br>                   "&lt;tr&gt;&lt;td &gt;&lt;a href='"+url+"' style='text-decoration:none;'&gt;"+displayUrl+"&lt;/a&gt;&lt;/td&gt;&lt;td style='font-size:12px;' align='left'&gt;"+dateTime+"&lt;/td&gt;&lt;/tr&gt;"+ 
   <br>                   "&lt;tr&gt;&lt;td colspan=2 style='height:20px;'&gt;&lt;/td&gt;&lt;/tr&gt;"; 
   <br>                  
   <br>  
   <br>    } 
   <br>   content+="&lt;/table&gt;" 
   <br>    var rescontainer=document.getElementById("resultcontainer"); 
   <br>    if(!rescontainer){return}; 
   <br>  
   <br>    rescontainer.innerHTML="";//控件内容置空 
   <br>   
   <br>    rescontainer.innerHTML=content; 
   <br>} 
  </div> 
  <div>
    window.οnlοad=function(){ 
   <br>  
   <br>                        if(document.getElementById&amp;&amp;document.getElementsByTagName&amp;&amp;document.createElement) 
   <br>                        { 
   <br>                            var searchbutton=document.getElementById("Searchbtn"); 
   <br>                          
   <br>                            
   <br>                            if(searchbutton) 
   <br>                            { 
   <br>              
   <br>                                searchbutton.οnclick=function() 
   <br>                                { 
   <br>                                    //将接口需要的所有参数封装为数组 
   <br>                                    
   <br>                                       var text=document.getElementsByTagName('form')[0].elements[0].value; 
   <br>                                      var offset=document.getElementById("Offset").value; 
   <br>                                      if(offset==""||offset&lt;0) 
   <br>                                        offset=0; 
   <br>                                      var Num=document.getElementById("Num").value; 
   <br>                                      if(Num==""||Num&lt;0) 
   <br>                                        Num=10; 
   <br>                                      var ParameterStr= "&lt;soapenv:Envelope xmlns:soapenv=' 
   <a href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow">http://schemas.xmlsoap.org/soap/envelope/'</a> xmlns:sear=' 
   <a href="http://schemas.microsoft.com/LiveSearch/2008/03/Search" rel="nofollow">http://schemas.microsoft.com/LiveSearch/2008/03/Search'</a>&gt;" + 
   <br>                                          "&lt;soapenv:Header/&gt;" + 
   <br>                                          "&lt;soapenv:Body&gt;" + 
   <br>                                              "&lt;sear:SearchRequest&gt;" + 
   <br>                                                    "&lt;sear:parameters&gt;" + 
   <br>                                                        "&lt;sear:Version&gt;2.1&lt;/sear:Version&gt;" + 
   <br>                                                        "&lt;sear:Query&gt;"+text+"&lt;/sear:Query&gt;" + 
   <br>                                                        "&lt;sear:AppId&gt;37D852F6C742365726425687549AD51EEBA0892B&lt;/sear:AppId&gt;" + 
   <br>                                                        "&lt;sear:Options&gt;"+ 
   <br>                                                            "&lt;sear:SearchOption&gt;EnableHighlighting&lt;/sear:SearchOption&gt;"+ 
   <br>                                                        "&lt;/sear:Options&gt;"+ 
   <br>                                                        "&lt;sear:Sources&gt;" + 
   <br>                                                           "&lt;sear:SourceType&gt;Web&lt;/sear:SourceType&gt;" + 
   <br>                                                       "&lt;/sear:Sources&gt;" + 
   <br>                                                       "&lt;sear:Web&gt;" + 
   <br>                                                         "&lt;sear:Offset&gt;"+offset+"&lt;/sear:Offset&gt;" + 
   <br>                                                         "&lt;sear:Count&gt;"+Num+"&lt;/sear:Count&gt;" + 
   <br>                                                      "&lt;/sear:Web&gt;" + 
   <br>                                                   "&lt;/sear:parameters&gt;" + 
   <br>                                            "&lt;/sear:SearchRequest&gt;" + 
   <br>                                       "&lt;/soapenv:Body&gt;" + 
   <br>                                 "&lt;/soapenv:Envelope&gt;"; 
   <br>                                   //将参数数组拼装成url串，最终得到bing的URL Service的请求URL 
   <br>                                    var requestStr = " 
   <a href="http://api.search.live.net/soap.asmx" rel="nofollow">http://api.search.live.net:80/soap.asmx</a>"; 
   <br>                                    
   <br>                                    sendHttpRequest(requestStr,"displayResults",true,ParameterStr); 
   <br>                                } 
   <br>                            }   
   <br>                         } 
   <br>} 
   <br>&lt;/script&gt; 
   <br>&lt;style type="text/css"&gt; 
   <br>body{ 
   <br>            margin:0; 
   <br>            padding:0; 
   <br>            background:#fff; 
   <br>} 
   <br>h1{ 
   <br>            font:bold 28px Arial, Helvetica, sans-serif; 
   <br>            color:#000; 
   <br>            text-align:center; 
   <br>} 
   <br>h2{ 
   <br>            font:bold 12px Arial, Helvetica, sans-serif; 
   <br>            color:#c00; 
   <br>} 
   <br>p{ 
   <br>            font:normal 12px Arial, Helvetica, sans-serif; 
   <br>            color:#000; 
   <br>} 
   <br>#searchcontainer{ 
   <br>            width:600px; 
   <br>            padding:5px 0 5px 0; 
   <br>            margin-left:auto; 
   <br>            margin-right:auto; 
   <br>            background:#9c9; 
   <br>            border:1px solid #000; 
   <br>            text-align:center; 
   <br>} 
   <br>#resultcontainer{ 
   <br>            width:580px; 
   <br>            height:500px; 
   <br>            padding:10px; 
   <br>            margin-left:auto; 
   <br>            margin-right:auto; 
   <br>            overflow:auto; 
   <br>            background:#eee; 
   <br>            border-left:1px solid #000; 
   <br>            border-right:1px solid #000; 
   <br>            border-bottom:1px solid #000; 
   <br>} 
   <br>#resultcontainer ul,li{ 
   <br>            display:block; 
   <br>            list-style:none; 
   <br>} 
   <br>#resultcontainer a,#resultcontainer a:visited{ 
   <br>            font:bold 12px Arial, Helvetica, sans-serif; 
   <br>            text-decoration:underline; 
   <br>            color:#039;       
   <br>} 
   <br>#resultcontainer a:hover,#resultcontainer 
   <br>a:active,#resultcontainer a:focus{ 
   <br>            color: #c00; 
   <br>} 
   <br>.searchbox{ 
   <br>            width:200px; 
   <br>            font:normal 12px Arial, Helvetica, sans-serif; 
   <br>            color:#000; 
   <br>} 
   <br>.searchbutton{ 
   <br>            width:80px; 
   <br>            font:bold 12px Arial, Helvetica, sans-serif; 
   <br>            color:#000;       
   <br>} 
   <br>&lt;/style&gt; 
   <br>&lt;/head&gt; 
   <br>&lt;body&gt; 
   <br>&lt;h1&gt;AJAX-BASED SEARCH ENGINE&lt;/h1&gt; 
   <br>&lt;div id="searchcontainer"&gt; 
   <br>&lt;form method="get" action=""&gt; 
   <br>&lt;table style="width:100%"&gt; 
   <br>   &lt;tr&gt; 
   <br>       &lt;td align="right"&gt;&lt;label&gt;关键字：&lt;/label&gt;&lt;/td&gt; 
   <br>       &lt;td align="left"&gt;&lt;input type="text" name="searchterm" title="Enter your searchterm here" class="searchbox" /&gt;&lt;/td&gt;&lt;/tr&gt; 
   <br>   &lt;tr&gt; 
   <br>       &lt;td align="right"&gt;&lt;label&gt;偏移量：&lt;/label&gt;&lt;/td&gt; 
   <br>       &lt;td align="left"&gt;&lt;input type="text" id="Offset" /&gt;&lt;/td&gt; 
   <br>   &lt;/tr&gt; 
   <br>       &lt;tr&gt;&lt;td align="right"&gt;&lt;label&gt;搜索条数：&lt;/label&gt;&lt;/td&gt; 
   <br>       &lt;td align="left"&gt;&lt;input type="text" id="Num" /&gt;&lt;/td&gt; 
   <br>   &lt;/tr&gt; 
   <br>&lt;/table&gt; 
  </div> 
  <div>
    &lt;input type="button" name="search" value="Search" 
   <br>class="searchbutton" title="Search Now!" id="Searchbtn" /&gt; 
  </div> 
  <div>
      
  </div> 
  <div>
      
  </div> 
  <div>
    &lt;/form&gt; 
   <br>&lt;/div&gt; 
   <br>&lt;div id="resultcontainer"&gt; 
   <br>&lt;/div&gt; 
   <br>&lt;/body&gt; 
   <br>&lt;/html&gt; 
  </div> 
 </div> 
</div> 
<p>转载于:https://blog.51cto.com/acually/269834</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b3932a7ed0c118365ad71aec512b160/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ASP.Net获得新浪天气预报几种方式总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/21507f2ac1c823210ab4191caffe337c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">TinyXml快速入门（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
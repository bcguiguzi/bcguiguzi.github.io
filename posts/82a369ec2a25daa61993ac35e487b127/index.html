<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java 实现文件复制及文件夹复制 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java 实现文件复制及文件夹复制" />
<meta property="og:description" content="在Java中，有多种方法可以实现文件的复制。以下是几种常用的方式：
使用字节流进行复制：
通过FileInputStream和FileOutputStream分别创建源文件和目标文件的输入输出流，然后通过循环读取源文件内容，并将数据写入目标文件中进行复制。
可以使用字节数组作为缓冲区，提高复制效率。
需要手动处理流的打开、关闭和异常处理。
import java.io.FileInputStream; import java.io.FileOutputStream; import java.io.IOException; public class ByteStreamCopyExample { public static void main(String[] args) { String sourceFilePath = &#34;source.txt&#34;; String destinationFilePath = &#34;destination.txt&#34;; try (FileInputStream fis = new FileInputStream(sourceFilePath); FileOutputStream fos = new FileOutputStream(destinationFilePath)) { byte[] buffer = new byte[1024]; int bytesRead; while ((bytesRead = fis.read(buffer)) != -1) { fos.write(buffer, 0, bytesRead); } System.out.println(&#34;文件复制成功！&#34;); } catch (IOException e) { e.printStackTrace(); } } } 使用字符流进行复制：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/82a369ec2a25daa61993ac35e487b127/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-07T17:45:31+08:00" />
<meta property="article:modified_time" content="2024-03-07T17:45:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java 实现文件复制及文件夹复制</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:left;">在Java中，有多种方法可以实现文件的复制。以下是几种常用的方式：</p> 
<p style="margin-left:0;text-align:left;">使用字节流进行复制：</p> 
<p style="margin-left:.0001pt;text-align:justify;">通过FileInputStream和FileOutputStream分别创建源文件和目标文件的输入输出流，然后通过循环读取源文件内容，并将数据写入目标文件中进行复制。</p> 
<p style="margin-left:.0001pt;text-align:justify;">可以使用字节数组作为缓冲区，提高复制效率。</p> 
<p style="margin-left:.0001pt;text-align:justify;">需要手动处理流的打开、关闭和异常处理。</p> 
<pre><code class="language-java">import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class ByteStreamCopyExample {
    public static void main(String[] args) {
        String sourceFilePath = "source.txt";
        String destinationFilePath = "destination.txt";

        try (FileInputStream fis = new FileInputStream(sourceFilePath);
             FileOutputStream fos = new FileOutputStream(destinationFilePath)) {

            byte[] buffer = new byte[1024];
            int bytesRead;
            while ((bytesRead = fis.read(buffer)) != -1) {
                fos.write(buffer, 0, bytesRead);
            }
            System.out.println("文件复制成功！");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:0;text-align:left;">使用字符流进行复制：</p> 
<p style="margin-left:.0001pt;text-align:justify;">通过FileReader和FileWriter分别创建源文件和目标文件的字符流，然后通过循环读取源文件内容，并将数据写入目标文件中进行复制。</p> 
<p style="margin-left:.0001pt;text-align:justify;">可以使用字符数组作为缓冲区，提高复制效率。</p> 
<p style="margin-left:.0001pt;text-align:justify;">需要手动处理流的打开、关闭和异常处理。</p> 
<pre><code class="language-java">import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

public class CharacterStreamCopyExample {
    public static void main(String[] args) {
        String sourceFilePath = "source.txt";
        String destinationFilePath = "destination.txt";

        try (FileReader fr = new FileReader(sourceFilePath);
             FileWriter fw = new FileWriter(destinationFilePath)) {

            char[] buffer = new char[1024];
            int charsRead;
            while ((charsRead = fr.read(buffer)) != -1) {
                fw.write(buffer, 0, charsRead);
            }
            System.out.println("文件复制成功！");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre> 
<p style="margin-left:0;text-align:left;">使用Files类的copy()方法：</p> 
<p style="margin-left:.0001pt;text-align:justify;">在Java的NIO包中，提供了Files类的静态方法copy()，可以直接将一个文件复制到目标位置。</p> 
<p style="margin-left:.0001pt;text-align:justify;">可以使用StandardCopyOption枚举类指定复制选项，例如REPLACE_EXISTING用于覆盖已存在的目标文件。</p> 
<p style="margin-left:.0001pt;text-align:justify;">相对于字节流和字符流，使用Files.copy()方法更简洁方便。</p> 
<pre><code class="language-java">import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class Text6 {
    public static void main(String[] args) {
        try (FileInputStream fis = new FileInputStream("user.txt");
             FileOutputStream fos = new FileOutputStream("user1.txt")) {

            fis.transferTo(fos);
            System.out.println("文件复制成功！");
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
}</code></pre> 
<p style="margin-left:0;text-align:left;">使用Files类的copy()方法结合通道进行复制：</p> 
<p style="margin-left:.0001pt;text-align:justify;">使用FileChannel来处理源文件和目标文件的通道，通过调用源文件通道的transferTo()或transferFrom()方法，将数据从源文件传输到目标文件。</p> 
<p style="margin-left:.0001pt;text-align:justify;">这种方式可以利用底层操作系统提供的文件复制机制，性能较高。</p> 
<p style="margin-left:.0001pt;text-align:justify;">需要手动处理通道和流的打开、关闭和异常处理。</p> 
<p style="margin-left:.0001pt;text-align:justify;">（<span style="color:#333333;">transferTo(OutputStream out) 此方法是java9 </span><span style="color:#333333;">新方法，直接实现复制文件。 </span>）</p> 
<pre><code class="language-java">import java.io.IOException;
import java.nio.channels.FileChannel;
import java.nio.file.Path;
import java.nio.file.StandardCopyOption;

public class ChannelCopyExample {
    public static void main(String[] args) {
        Path sourceFilePath = Path.of("source.txt");
        Path destinationFilePath = Path.of("destination.txt");

        try (FileChannel sourceChannel = FileChannel.open(sourceFilePath);
             FileChannel destinationChannel = FileChannel.open(destinationFilePath,
                     StandardOpenOption.CREATE, StandardOpenOption.WRITE, StandardOpenOption.TRUNCATE_EXISTING)) {

            destinationChannel.transferFrom(sourceChannel, 0, sourceChannel.size());
            System.out.println("文件复制成功！");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre> 
<p style="margin-left:0;text-align:left;">使用第三方库：</p> 
<p style="margin-left:.0001pt;text-align:justify;">Java中有一些第三方库可以简化文件复制操作，例如 Apache Commons IO 的FileUtils类提供了多个便捷的方法用于复制文件或目录。</p> 
<pre><code class="language-java">import org.apache.commons.io.FileUtils;

import java.io.File;
import java.io.IOException;

public class ApacheCommonsIOCopyExample {
    public static void main(String[] args) {
        File sourceFile = new File("source.txt");
        File destinationFile = new File("destination.txt");

        try {
            FileUtils.copyFile(sourceFile, destinationFile);
            System.out.println("文件复制成功！");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre> 
<p></p> 
<h6>目录(文件夹)复制</h6> 
<pre><code class="language-java">import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.StandardCopyOption;

public class Text7 {
    public static void main(String[] args) {
        File sourceDir = new File("D:\\A---webdate");
        File destinationDir = new File("D:\\A---webdate1");

        try {
            copyDirectory(sourceDir, destinationDir);
            System.out.println("目录复制成功！");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

//在copyDirectory()方法中，我们首先检查目标目录是否存在，如果不存在，则创建该目录。
// 然后遍历源目录下的所有文件和子目录，根据文件类型调用copyDirectory()或copyFile()方法进行复制操作。
// 对于子目录，递归调用copyDirectory()方法；对于文件，调用copyFile()方法。
    public static void copyDirectory(File sourceDir, File destinationDir) throws IOException {
        if (!destinationDir.exists()) {
            destinationDir.mkdirs();
        }

        File[] files = sourceDir.listFiles();
        if (files != null) {
            for (File file : files) {
                File destinationFile = new File(destinationDir, file.getName());

                if (file.isDirectory()) {
                    copyDirectory(file, destinationFile);
                } else {
                    copyFile(file, destinationFile);
                }
            }
        }
    }

//在copyFile()方法中，我们使用Files.copy()方法将源文件的内容复制到目标文件中。
    public static void copyFile(File sourceFile, File destinationFile) throws IOException {
        Files.copy(sourceFile.toPath(), destinationFile.toPath(), StandardCopyOption.REPLACE_EXISTING);
// 这里可以使用你前面提到的复制文件的方法，如 transferTo() 或者使用缓冲区的方式复制
    }
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/42c7b3b289c3b3f7ffc2044638060fea/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">书籍强烈推荐：“计算机界三大神书”之一 ——SICP</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/97f27e7ab953e6f1b6c4257e4dfe59e9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VUE3&#43;X6流程图实现数据双向绑定的方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
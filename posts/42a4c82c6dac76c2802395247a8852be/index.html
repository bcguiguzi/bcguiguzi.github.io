<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Google Play app signing 最终完美解决方式 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android Google Play app signing 最终完美解决方式" />
<meta property="og:description" content="转载请标明出处：http://blog.csdn.net/zhaoyanjun6/article/details/105561341
本文出自【赵彦军的博客】
在 GooglePlay 创建 App 的时候，一不小心勾选了 谷歌签名保护计划，就非常坑，为什么非常坑，因为这个一旦加入，就无法退出，后面的坑就后患无穷。
这里普及一下 谷歌签名保护计划：
简单来说，就是apk上传到 GooglePlay 后，GooglePlay 会替换你的签名，实际上用户下载的 APK 的签名并不是你最初上传的签名，而是 GooglePlay 自己的签名，这个签名存放在 Google 服务器，我们是不能下载的。
说到这里，大家就明白了，我前面说的坑是什么意思？
因为 线上版本 和 本地版本 的签名不一致，会导致 facebook 登录失败，google 登录失败、微信登录失败 。
那么怎么才能把 GooglePlay 的签名换成我们自己的签名呢？ 是有办法的。
解决方案 第一步：应用签名菜单下，请求升级密钥
第二步： 选择升级秘钥的原因，你可以选择第二个 &#34;我需要针对多个应用或此应用的预安装版本使用同一秘钥&#34;
第三步：下载工具（pepk.jar ）生成签名压缩包，并上传即可。注意，此签名一个应用只能更新一次，只有一次机会哦
点击下载 Pepk.jar 在终端中执行
java -jar pepk.jar --keystore=foo.keystore --alias=foo --output=output.zip --encryptionkey=eb10fe8f7c7c9df715022017b00c6471f8ba8170b13049a11e6c09ffe3056a104a3bbe4ac5a955f4ba4fe93fc8cef27558a3eb9d2a529a2092761fb833b656cd48b9de6a --signing-keystore=foo.keystore --signing-key-alias=foo 注意：要把 foo.keystore 换成你的签名，把 foo 换成你自己的 alias 。
执行完命令，会在本地生成 output.zip , 然后上传就可以了。
提交成功后可以看到谷歌的签名已经替换成想要的了。与上传签名一致。如图所示
总结 终于完美的解决了我们的问题，经过这一波操作，本地签名和 GooglePlay 签名已经保持一直了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/42a4c82c6dac76c2802395247a8852be/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-16T19:22:53+08:00" />
<meta property="article:modified_time" content="2020-04-16T19:22:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android Google Play app signing 最终完美解决方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>转载请标明出处：http://blog.csdn.net/zhaoyanjun6/article/details/105561341<br> 本文出自<a href="http://blog.csdn.net/zhaoyanjun6/">【赵彦军的博客】</a></p> 
</blockquote> 
<p>在 <code>GooglePlay</code> 创建 <code>App</code> 的时候，一不小心勾选了 <code>谷歌签名保护计划</code>，就非常坑，为什么非常坑，因为这个一旦加入，就无法退出，后面的坑就后患无穷。</p> 
<p>这里普及一下 <code>谷歌签名保护计划：</code></p> 
<p><code>简单来说，就是apk上传到 GooglePlay 后，GooglePlay 会替换你的签名，实际上用户下载的 APK 的签名并不是你最初上传的签名，而是 GooglePlay 自己的签名，这个签名存放在 Google 服务器，我们是不能下载的。</code></p> 
<p>说到这里，大家就明白了，我前面说的坑是什么意思？</p> 
<p><code>因为 线上版本 和 本地版本 的签名不一致，会导致 facebook 登录失败，google 登录失败、微信登录失败 。</code></p> 
<p>那么怎么才能把 GooglePlay 的<code>签名换成我们自己的签名</code>呢？ 是有办法的。</p> 
<h3><a id="_15"></a>解决方案</h3> 
<p>第一步：应用签名菜单下，请求升级密钥<br> <img src="https://images2.imgbox.com/4a/2b/iVP7Ik0A_o.png" alt="在这里插入图片描述"><br> 第二步： 选择升级秘钥的原因，你可以选择第二个 <code>"我需要针对多个应用或此应用的预安装版本使用同一秘钥"</code><br> <img src="https://images2.imgbox.com/a6/e6/WDHg6a3E_o.png" alt="在这里插入图片描述"><br> 第三步：下载工具（<code>pepk.jar</code> ）生成签名压缩包，并上传即可。注意，此签名一个应用只能更新一次，只有一次机会哦</p> 
<p><a href="https://download.csdn.net/download/zhaoyanjun6/12331926">点击下载 Pepk.jar </a><br> <img src="https://images2.imgbox.com/c1/2a/cZE4jEhN_o.png" alt="在这里插入图片描述"><br> 在终端中执行</p> 
<pre><code>java -jar pepk.jar --keystore=foo.keystore --alias=foo --output=output.zip --encryptionkey=eb10fe8f7c7c9df715022017b00c6471f8ba8170b13049a11e6c09ffe3056a104a3bbe4ac5a955f4ba4fe93fc8cef27558a3eb9d2a529a2092761fb833b656cd48b9de6a --signing-keystore=foo.keystore --signing-key-alias=foo

</code></pre> 
<p>注意：要把 foo.keystore 换成你的签名，把 foo 换成你自己的 alias 。</p> 
<p>执行完命令，会在本地生成 <code>output.zip</code> , 然后上传就可以了。</p> 
<p>提交成功后可以看到谷歌的签名已经替换成想要的了。与上传签名一致。如图所示<br> <img src="https://images2.imgbox.com/cd/0c/Ja0EazWA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_35"></a>总结</h3> 
<p>终于完美的解决了我们的问题，经过这一波操作，本地签名和 GooglePlay 签名已经保持一直了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c937c94bb20de95e1f6d14d9c9f2b8f2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mac卸载了xcode后，运行软件提示：xcode-select: error: invalid developer directory</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/77ff6ab375e4ed6ff0ce0e9e7766fa40/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python错误——cannot unpack non-iterable int object</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
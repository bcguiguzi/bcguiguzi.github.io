<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据结构】TrieTree（字典树、前缀树）—— C&#43;&#43;实现 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据结构】TrieTree（字典树、前缀树）—— C&#43;&#43;实现" />
<meta property="og:description" content="前言 TrieTree（字典树、前缀树、单词查找树）
字典树，看名字好像和字符串相关。
如果你能看到这一篇文章，那么肯定学过字符串串匹配算法，即BF和KMP的模式匹配。
字典树并不是来解决字符串匹配问题，而是用于以下场景：
大量的单词（串），实现单词的排序功能、快速检索功能、前缀搜索功能…
文章目录 前言基本性质一、TrieTree节点的设计二、添加单词串——add()三、查询单词——query()add()和query()的测试 四、前序遍历字典树前序遍历测试 五、前缀搜索功能——prefix()前缀搜索的测试 六、删除单词——remove()析构函数删除代码解析删除代码测试 应用场景字典树的常用优化（待补充。。）TrieTree完整代码 基本性质 根节点不包含字符，除根节点外每一个节点都只包含一个字符；从根节点到某一结点，路径上经过的字符连接起来，为该节点对应的字符串；每个节点的所有子节点包含的字符都不相同。 适用范围：
单词检索统计和排序字符串字符串前缀检索 算法核心
利用字符串的公共前缀来减少查询时间，最大限度的减少无畏的字符串比较。
时间复杂度
字典树查找效率很高，时间复杂度是O(m)，m是要查找的单词中包含的字母的个数。
图示：pool、prize、preview、prepare、produce、progress
在一些代码实现中，会在单词的结尾处设置一个类似于isend的标记。例如：hello和hel。
但是这样存储携带的信息太少，这样只知道树中有这个单词，但不知道该单词出现过几次，所以一般会在单词的最后一个字符节点，添加一个freqs标记，记录该单词出现过几次。
一、TrieTree节点的设计 需要的成员为：
存储字符的变量；存储单词频率的变量；存储孩子节点字符数据和节点指针的对应关系；因为要实现一个自动排序的前缀树，所以这里采用的是STL中的红黑树map&lt;&gt;。 #include &lt;iostream&gt; #include &lt;map&gt; using namespace std; class TrieTree { private: struct TrieNode { TrieNode(char ch, int freqs) : ch_(ch) , freqs_(freqs) {} // 节点存储的字符数据 char ch_; // 单词的末尾字符存储单词的数量（频率） int freqs_; // 存储孩子节点字符数据和节点指针的对应关系 map&lt;char, TrieNode*&gt; nodeMap_; }; private: TrieNode* root_;	// 根节点 }; 因为TrieTree的根节点不存放任何字符，所以这里实现一个构造函数：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5e441838d586f26c853fa51cc9658542/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-25T20:11:04+08:00" />
<meta property="article:modified_time" content="2022-10-25T20:11:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据结构】TrieTree（字典树、前缀树）—— C&#43;&#43;实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p>TrieTree（字典树、前缀树、单词查找树）</p> 
<p>字典树，看名字好像和字符串相关。<br> 如果你能看到这一篇文章，那么肯定学过字符串串匹配算法，即BF和KMP的模式匹配。<br> 字典树并不是来解决字符串匹配问题，而是用于以下场景：<br> 大量的单词（串），实现单词的排序功能、快速检索功能、前缀搜索功能…</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_0" rel="nofollow">前言</a></li><li><a href="#_12" rel="nofollow">基本性质</a></li><li><a href="#TrieTree_51" rel="nofollow">一、TrieTree节点的设计</a></li><li><a href="#add_98" rel="nofollow">二、添加单词串——add()</a></li><li><a href="#query_140" rel="nofollow">三、查询单词——query()</a></li><li><ul><li><a href="#addquery_168" rel="nofollow">add()和query()的测试</a></li></ul> 
  </li><li><a href="#_199" rel="nofollow">四、前序遍历字典树</a></li><li><ul><li><a href="#_249" rel="nofollow">前序遍历测试</a></li></ul> 
  </li><li><a href="#prefix_285" rel="nofollow">五、前缀搜索功能——prefix()</a></li><li><ul><li><a href="#_321" rel="nofollow">前缀搜索的测试</a></li></ul> 
  </li><li><a href="#remove_362" rel="nofollow">六、删除单词——remove()</a></li><li><ul><li><a href="#_364" rel="nofollow">析构函数</a></li><li><a href="#_387" rel="nofollow">删除代码解析</a></li><li><a href="#_461" rel="nofollow">删除代码测试</a></li></ul> 
  </li><li><a href="#_512" rel="nofollow">应用场景</a></li><li><a href="#_518" rel="nofollow">字典树的常用优化（待补充。。）</a></li><li><a href="#TrieTree_521" rel="nofollow">TrieTree完整代码</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_12"></a>基本性质</h2> 
<ol><li>根节点不包含字符，除根节点外每一个节点都只包含一个字符；</li><li>从根节点到某一结点，路径上经过的字符连接起来，为该节点对应的字符串；</li><li>每个节点的所有子节点包含的字符都不相同。</li></ol> 
<p><strong>适用范围：</strong></p> 
<ol><li>单词检索</li><li>统计和排序字符串</li><li>字符串前缀检索</li></ol> 
<p><strong>算法核心</strong><br> 利用字符串的公共前缀来减少查询时间，最大限度的减少无畏的字符串比较。</p> 
<p><strong>时间复杂度</strong><br> 字典树查找效率很高，时间复杂度是O(m)，m是要查找的单词中包含的字母的个数。</p> 
<p>图示：pool、prize、preview、prepare、produce、progress</p> 
<p><img src="https://images2.imgbox.com/e2/cb/DJZ5YiS7_o.png" alt="在这里插入图片描述"></p> 
<p>在一些代码实现中，会在单词的结尾处设置一个类似于isend的标记。例如：hello和hel。</p> 
<p><img src="https://images2.imgbox.com/ab/64/xuOI9y1N_o.png" alt="在这里插入图片描述"></p> 
<p>但是这样存储携带的信息太少，这样只知道树中有这个单词，但不知道该单词出现过几次，所以一般会在单词的最后一个字符节点，添加一个freqs标记，记录该单词出现过几次。</p> 
<h2><a id="TrieTree_51"></a>一、TrieTree节点的设计</h2> 
<p>需要的成员为：</p> 
<ol><li>存储字符的变量；</li><li>存储单词频率的变量；</li><li>存储孩子节点字符数据和节点指针的对应关系；因为要实现一个自动排序的前缀树，所以这里采用的是STL中的红黑树map&lt;&gt;。</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;map&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TrieTree</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">struct</span> <span class="token class-name">TrieNode</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">TrieNode</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">,</span> <span class="token keyword">int</span> freqs<span class="token punctuation">)</span>
			<span class="token operator">:</span> <span class="token function">ch_</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">freqs_</span><span class="token punctuation">(</span>freqs<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

		<span class="token comment">// 节点存储的字符数据</span>
		<span class="token keyword">char</span> ch_<span class="token punctuation">;</span>
		<span class="token comment">// 单词的末尾字符存储单词的数量（频率）</span>
		<span class="token keyword">int</span> freqs_<span class="token punctuation">;</span>
		<span class="token comment">// 存储孩子节点字符数据和节点指针的对应关系</span>
		map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> TrieNode<span class="token operator">*</span><span class="token operator">&gt;</span> nodeMap_<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	TrieNode<span class="token operator">*</span> root_<span class="token punctuation">;</span>	<span class="token comment">// 根节点</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>因为TrieTree的根节点不存放任何字符，所以这里实现一个构造函数：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">TrieTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		root_ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TrieNode</span><span class="token punctuation">(</span><span class="token char">'\0'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/1c/f2/ipsm14sF_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="add_98"></a>二、添加单词串——add()</h2> 
<p>思路：<br> 定义一个cur指针指向根节点；<br> 遍历当前单词的字符，如果孩子有当前字符数据的节点，则移动cur指向当前节点，遍历下一个字符；<br> 如果没有孩子节点，则创建相应的节点，移动cur指向当前节点，遍历下一个字符。</p> 
<pre><code class="prism language-cpp"><span class="token comment">// 添加单词</span>
<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> word<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>	<span class="token comment">// 1</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 2</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>			<span class="token comment">// 3</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 表示相应字符的节点没有，创建它</span>
			TrieNode<span class="token operator">*</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TrieNode</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
			cur <span class="token operator">=</span> child<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 相应的字符节点存在，移动cur指向对应的字符节点	// 4</span>
			cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// cur指向word单词的最后一个节点		// 5</span>
	cur<span class="token operator">-&gt;</span>freqs_<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol><li>定义一个指向根节点的指针；</li><li>遍历单词的每个字符，利用STL的find()查找当前字符，返回一个迭代器；</li><li>如果该迭代器指向end()，说明没找到当前字符，则创建新节点child，并将该新节点插入到cur的nodeMap_中。最后让cur指向child；</li><li>如果迭代器没有指向end()，说明相应的字符节点存在，则移动cur指向对应的字符节点，这里就是让cur指向迭代器的second (TrieNode类型的指针节点)；</li><li>退出循环后，cur就指向单词的最后一个字符节点，这时候对该节点的freqs加一。（这里不是直接置为1，因为之前这个位置可能已经存在单词）</li></ol> 
<h2><a id="query_140"></a>三、查询单词——query()</h2> 
<pre><code class="prism language-cpp"><span class="token comment">// 查询单词</span>
<span class="token keyword">int</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> word<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>	<span class="token comment">// 1</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token comment">// O(m)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 2</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 移动cur指向的下一个单词的字符节点上</span>
		cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>		<span class="token comment">// 3</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> cur<span class="token operator">-&gt;</span>freqs_<span class="token punctuation">;</span>	<span class="token comment">// 4</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol><li>定义一个指向根节点的指针；</li><li>遍历单词的字符，在当前节点cur的nodeMap_里查找，返回迭代器类型，如果没有找到，则直接返回0；</li><li>如果当前字符存在，则移动cur，将其指向下一个单词的字符节点上，这里就是让其指向迭代器的second（TrieNode类型的指针）；</li><li>如果整个单词都能遍历完，说明该单词确实存在，则返回这个单词出现的频率freqs_。</li></ol> 
<h3><a id="addquery_168"></a>add()和query()的测试</h3> 
<p>添加一些带有公共前缀的数据：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieTree trie<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"China"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"helloworld"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ab/6a/BGhH1V4A_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_199"></a>四、前序遍历字典树</h2> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token comment">// 前序遍历字典树</span>
<span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	string word<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> wordList<span class="token punctuation">;</span>
	<span class="token function">preOrder</span><span class="token punctuation">(</span>root_<span class="token punctuation">,</span> word<span class="token punctuation">,</span> wordList<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 1</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span>string word <span class="token operator">:</span> wordList<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> word <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
<span class="token comment">// 前序遍历字典树</span>
<span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>TrieNode<span class="token operator">*</span> cur<span class="token punctuation">,</span> string word<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> wordList<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 前序遍历 VLR</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> root_<span class="token punctuation">)</span>		<span class="token comment">// V		// 2</span>
	<span class="token punctuation">{<!-- --></span>
		word<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>ch_<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>freqs_ <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>		<span class="token comment">// 3</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 已经遍历到一个有效单词</span>
			wordList<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 递归处理孩子节点</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pair <span class="token operator">:</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">)</span>		<span class="token comment">// 4</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">preOrder</span><span class="token punctuation">(</span>pair<span class="token punctuation">.</span>second<span class="token punctuation">,</span> word<span class="token punctuation">,</span> wordList<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol><li>前序遍历，这里编写的是递归函数，首先定义两个输出参数word和wordList，一个存放当前单词，一个存放遍历到的单词；</li><li>进入递归函数，边界条件为：如果当前节点没有指向根节点，那么就可以把当前节点的字符添加到word字符串里；</li><li>如果遇到freqs_大于0，说明这各位置存在一个单词，则把当前word记录到wordList中；</li><li>递归处理孩子节点，这里遍历的是当前节点的nodeMap_，递归后又递归孩子的孩子节点，相当于做一个深度优先遍历。</li></ol> 
<h3><a id="_249"></a>前序遍历测试</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieTree trie<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"china"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"helloworld"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看出完全根据字典顺序输出单词，如果有比较多的公共前缀，那么处理起来效率会很高，而如果单词都不同，时间复杂度、特别是空间复杂度会很高。</p> 
<p><img src="https://images2.imgbox.com/41/58/vbtTsjsa_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="prefix_285"></a>五、前缀搜索功能——prefix()</h2> 
<pre><code class="prism language-cpp"><span class="token comment">// 串的前缀搜索</span>
vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token function">queryPrefix</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> prefix<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>		<span class="token comment">// 1</span>
	
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> prefix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>   <span class="token comment">// 2</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>prefix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 	<span class="token comment">// 3</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>		<span class="token comment">// 4</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 循环退出，cur就指向了前缀的最后一个字符节点了</span>
	vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> wordList<span class="token punctuation">;</span>
	<span class="token function">preOrder</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> prefix<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> prefix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wordList<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 5</span>
		
	<span class="token keyword">return</span> wordList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol><li>定义一个指向根节点的指针；</li><li>遍历前缀prefix的每个字符，在nodeMap_中查找，返回迭代器；</li><li>如果没找到当前字符，直接返回空的容器，这里返回的是一个空的初始化列表；</li><li>如果找到了，就让cur往下走；</li><li>循环退出后，cur指向了前缀的最后一个字符节点，这时候进行前序遍历，但第二个参数word此时是prefix，需要做出改变，因为前序遍历刚进去时候就把当前节点的字符添加到word里，如果直接把前缀传入，那么有这样的情况：前缀为pre，cur指向e这个字符，那么一进入前序遍历，就再次把e这个字符添加到word里，那么就会导致后续递归的时候返回的单词是pree…。所以传入前缀的时候需要减去前缀的最后一个字符比如pre只传入pr，使用substr()即可。</li></ol> 
<h3><a id="_321"></a>前缀搜索的测试</h3> 
<p>这里测试以he开头的</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieTree trie<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"china"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"helloworld"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> words <span class="token operator">=</span> trie<span class="token punctuation">.</span><span class="token function">queryPrefix</span><span class="token punctuation">(</span><span class="token string">"he"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>string word <span class="token operator">:</span> words<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> word <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>输出hel、hello、helloworld<br> <img src="https://images2.imgbox.com/c7/f2/tzj8u4HE_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="remove_362"></a>六、删除单词——remove()</h2> 
<h3><a id="_364"></a>析构函数</h3> 
<pre><code class="prism language-cpp"><span class="token operator">~</span><span class="token function">TrieTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	queue<span class="token operator">&lt;</span>TrieNode<span class="token operator">*</span><span class="token operator">&gt;</span> que<span class="token punctuation">;</span>
	que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root_<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		TrieNode<span class="token operator">*</span> front <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 把当前节点的孩子节点全部入队</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> pair <span class="token operator">:</span> front<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pair<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// 释放节点资源</span>
		<span class="token keyword">delete</span> front<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_387"></a>删除代码解析</h3> 
<pre><code class="prism language-cpp"><span class="token comment">// 串的删除</span>
<span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> word<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>						<span class="token comment">// 1</span>
	TrieNode<span class="token operator">*</span> del <span class="token operator">=</span> root_<span class="token punctuation">;</span>
	<span class="token keyword">char</span> delch <span class="token operator">=</span> word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>		<span class="token comment">// 2</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 	<span class="token comment">// 3</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 没找到相应字符</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 有一个独立的单词，移动del指针				// 4</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>freqs_ <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">||</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			del <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			delch <span class="token operator">=</span> word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// cur移动到子节点</span>
		cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>						<span class="token comment">// 5</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// cur指向了末尾字符节点，word单词是存在的，接下来删除</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>						<span class="token comment">// 6</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 删除</span>
		TrieNode<span class="token operator">*</span> child <span class="token operator">=</span> del<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">[</span>delch<span class="token punctuation">]</span><span class="token punctuation">;</span>
		del<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>delch<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// 释放相应的节点内存							// 7</span>
		queue<span class="token operator">&lt;</span>TrieNode<span class="token operator">*</span><span class="token operator">&gt;</span> que<span class="token punctuation">;</span>
		que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			TrieNode<span class="token operator">*</span> front <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 把当前节点的孩子节点入队列</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> pair <span class="token operator">:</span> front<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pair<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 释放节点资源</span>
			<span class="token keyword">delete</span> front<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 末尾字符还有字符节点，那么就不删除节点</span>
		<span class="token comment">// 只是把freqs变为0</span>
		cur<span class="token operator">-&gt;</span>freqs_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>						<span class="token comment">// 8</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol><li>定义两个TrieNode类型指针，一个cur指向当前节点，一个del指向待删除节点，再定义一个字符类型变量delch，指向待删除字符；</li><li>遍历这个待删除单词word，每次从当前节点的nodeMap_里找，返回迭代器类型；</li><li>如果没有当前字符找到，说明单词不存在，直接返回；</li><li>如果遍历过程中，发现当前节点对应的freqs_（单词出现次数）大于0，或者当前节点有多个孩子节点，说明遍历到这里，有一个独立的单词，那么就将删除指针del移动到当前节点位置，这里如果不理解，往下看，到释放内存的部分就可以理解了。同时也把删除字符delch指向当前字符；</li><li>常规操作，当前节点指针cur往下走，指向上面找到的字符节点；</li><li>退出循环后，表示当前想要删除的单词是存在的，cur也指向待删除单词的末尾结点，判断cur是否还有孩子节点（即判断cur的nodeMap_是否为nullptr），如果没有，这时候使用一个TrieNode类型的指针child保存del指针的nodeMap_[delch]，并让del删除这个字符的孩子节点；</li><li>这里的释放内存操作，类似于析构函数，使用一个队列，先把child指针入队，遍历nodeMap_把孩子节点入队，依次释放（delete）；</li><li>如果cur指向的节点的nodeMap_不为nullptr，说明末尾字符还有孩子节点，那么就不删除节点了，只把出现次数freqs_置为0。删除完成！</li></ol> 
<h3><a id="_461"></a>删除代码测试</h3> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieTree trie<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"china"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"helloworld"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> words <span class="token operator">=</span> trie<span class="token punctuation">.</span><span class="token function">queryPrefix</span><span class="token punctuation">(</span><span class="token string">"he"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>string word <span class="token operator">:</span> words<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> word <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	trie<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	trie<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如图</p> 
<p><img src="https://images2.imgbox.com/d8/b0/LIajROPw_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_512"></a>应用场景</h2> 
<ol><li><strong>串的快速检索</strong>：给出N各单词组成的熟词表，以及一篇全用小写英文书写的文章，请你按最早出现的顺序写成所有不在熟词表中的生词。</li><li><strong>单词自动完成</strong>：编辑代码时，输入字符，自动提示可能的关键字、变量或函数等信息。</li><li><strong>最长公共前缀</strong>：对所有串建立字典树，对于两个串的最长公共前缀的长度即他们所在的节点的公共祖先个数，问题就转化为最近公共祖先问题。</li><li><strong>串排序方面问题的应用</strong>：给定N各互不相同的仅由一个单词构成的英文名，将他们按照字典序从小到大输出。用字典树进行排序，这棵树的每个节点的所有儿子很明显地按照其字母大小排序。对这棵树进行前序遍历即可。</li></ol> 
<h2><a id="_518"></a>字典树的常用优化（待补充。。）</h2> 
<h2><a id="TrieTree_521"></a>TrieTree完整代码</h2> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;map&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;queue&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TrieTree</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">TrieTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		root_ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TrieNode</span><span class="token punctuation">(</span><span class="token char">'\0'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token operator">~</span><span class="token function">TrieTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		queue<span class="token operator">&lt;</span>TrieNode<span class="token operator">*</span><span class="token operator">&gt;</span> que<span class="token punctuation">;</span>
		que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root_<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			TrieNode<span class="token operator">*</span> front <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 把当前节点的孩子节点全部入队</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> pair <span class="token operator">:</span> front<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pair<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 释放节点资源</span>
			<span class="token keyword">delete</span> front<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 添加单词</span>
	<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> word<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 表示相应字符的节点没有，创建它</span>
				TrieNode<span class="token operator">*</span> child <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">TrieNode</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> child<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 相应的字符节点存在，移动cur指向对应的字符节点</span>
				cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// cur指向word单词的最后一个节点</span>
		cur<span class="token operator">-&gt;</span>freqs_<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 查询单词</span>
	<span class="token keyword">int</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> word<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token comment">// O(m)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 移动cur指向的下一个单词的字符节点上</span>
			cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> cur<span class="token operator">-&gt;</span>freqs_<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 前序遍历字典树</span>
	<span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		string word<span class="token punctuation">;</span>
		vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> wordList<span class="token punctuation">;</span>
		<span class="token function">preOrder</span><span class="token punctuation">(</span>root_<span class="token punctuation">,</span> word<span class="token punctuation">,</span> wordList<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span>string word <span class="token operator">:</span> wordList<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> word <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 串的前缀搜索</span>
	vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token function">queryPrefix</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> prefix<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>
		
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> prefix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>prefix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 循环退出，cur就指向了前缀的最后一个字符节点了</span>
		vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> wordList<span class="token punctuation">;</span>
		<span class="token function">preOrder</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> prefix<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> prefix<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wordList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">return</span> wordList<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// 串的删除</span>
	<span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> word<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		TrieNode<span class="token operator">*</span> cur <span class="token operator">=</span> root_<span class="token punctuation">;</span>
		TrieNode<span class="token operator">*</span> del <span class="token operator">=</span> root_<span class="token punctuation">;</span>
		<span class="token keyword">char</span> delch <span class="token operator">=</span> word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">auto</span> childIt <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>childIt <span class="token operator">==</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 没找到相应字符</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// 有一个独立的单词，移动del指针</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>freqs_ <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">||</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				del <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				delch <span class="token operator">=</span> word<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">// cur移动到子节点</span>
			cur <span class="token operator">=</span> childIt<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// cur指向了末尾字符节点，word单词是存在的，接下来删除</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 删除</span>
			TrieNode<span class="token operator">*</span> child <span class="token operator">=</span> del<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">[</span>delch<span class="token punctuation">]</span><span class="token punctuation">;</span>
			del<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>delch<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// 释放相应的节点内存</span>
			queue<span class="token operator">&lt;</span>TrieNode<span class="token operator">*</span><span class="token operator">&gt;</span> que<span class="token punctuation">;</span>
			que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				TrieNode<span class="token operator">*</span> front <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				que<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 把当前节点的孩子节点入队列</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> pair <span class="token operator">:</span> front<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					que<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>pair<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// 释放节点资源</span>
				<span class="token keyword">delete</span> front<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 末尾字符还有字符节点，那么就不删除节点</span>
			<span class="token comment">// 只是把freqs变为0</span>
			cur<span class="token operator">-&gt;</span>freqs_ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token keyword">struct</span> <span class="token class-name">TrieNode</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">TrieNode</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">,</span> <span class="token keyword">int</span> freqs<span class="token punctuation">)</span>
			<span class="token operator">:</span> <span class="token function">ch_</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">freqs_</span><span class="token punctuation">(</span>freqs<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

		<span class="token comment">// 节点存储的字符数据</span>
		<span class="token keyword">char</span> ch_<span class="token punctuation">;</span>
		<span class="token comment">// 单词的末尾字符存储单词的数量（频率）</span>
		<span class="token keyword">int</span> freqs_<span class="token punctuation">;</span>
		<span class="token comment">// 存储孩子节点字符数据和节点指针的对应关系</span>
		map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> TrieNode<span class="token operator">*</span><span class="token operator">&gt;</span> nodeMap_<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">// 前序遍历字典树</span>
	<span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>TrieNode<span class="token operator">*</span> cur<span class="token punctuation">,</span> string word<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> wordList<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 前序遍历 VLR</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> root_<span class="token punctuation">)</span>		<span class="token comment">// V</span>
		<span class="token punctuation">{<!-- --></span>
			word<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>ch_<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>freqs_ <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 已经遍历到一个有效单词</span>
				wordList<span class="token punctuation">.</span><span class="token function">emplace_back</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 递归处理孩子节点</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> pair <span class="token operator">:</span> cur<span class="token operator">-&gt;</span>nodeMap_<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">preOrder</span><span class="token punctuation">(</span>pair<span class="token punctuation">.</span>second<span class="token punctuation">,</span> word<span class="token punctuation">,</span> wordList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	TrieNode<span class="token operator">*</span> root_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TrieTree trie<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"china"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"helloworld"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> trie<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> words <span class="token operator">=</span> trie<span class="token punctuation">.</span><span class="token function">queryPrefix</span><span class="token punctuation">(</span><span class="token string">"he"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>string word <span class="token operator">:</span> words<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> word <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	trie<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"hel"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	trie<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"ch"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"==========================="</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	trie<span class="token punctuation">.</span><span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/929305a09969c9e2bc0df5442359e2e3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java中日志的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b89f071be5b0e95c33a046f08315e211/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python-Python错误“SyntaxWarning: “is“ with a literal. Did you mean “==“?”</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VLAN层次与特点概念性总结 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VLAN层次与特点概念性总结" />
<meta property="og:description" content="先解释两个词： 端口（port）：在通信设备中，一般指二层口，该口用于隔绝广播域，基于MAC地址转发，但本身不能设置任何地址； 接口（interface）：在通信设备中，用于区别二层的端口，指的是三层口，该口可以配置IP地址，基于IP路由转发。
在传统的局域网中，几个至几十个交换机连接一个大的局域网，一个局域网中的主机台数可能达到上千台，那么由于交换机只能隔绝冲突域，一个端口是一个冲突域，而不能隔绝广播域，会导致局域网内的ARP广播占用大量带宽影响性能，甚至影响网络的正常使用。此外成百上千的计算机在同一个局域网中也会影响网络安全性。 VLAN（Virtual Local Area Network，虚拟局域网）技术，在交换机不能隔绝广播域并且路由器转发性能过低且价格昂贵，需要交换机能够将这许多主机划区域管理的迫切需求下应运而生。
1、二层VLAN： VLAN技术本是二层技术，用来隔绝广播域，限制广播帧对于局域网带宽的影响。因为VLAN在二层，理论上VLAN不可以设置IP，不同VLAN之间不能直接通信，将某些端口加入到VLAN中，那么这些端口所连接的主机也就不能和其他VLAN中的主机进行通信。要想不同VLAN的主机能够通信，则必须借助路由器来进行路由转发。
2、三层VLAN： 既然有了路由器可以实现VLAN之间通信，为什么还要有三层VLAN和三层交换机？
①首先是因为路由器是一个网络层设备，其主要的功能并非转发报文，而是进行路由选择，其转发是基于CPU层面的软件转发，性能效率远远低于基于交换芯片的交换机硬件层面转发。三层交换机集合了二层交换机的VLAN技术和路由器的路由转发功能，其支持VLAN interface，即VLAN接口，也就是VLAN有了逻辑接口，也就有了接口所能配置IP的能力，三层VLAN由此产生。我们给VLAN的逻辑接口配置ip地址，该IP地址就相当于划入到VLAN的端口所连接设备的网关，以实现VLAN间路由。
②其次，路由器的物理接口数目是比较少的（太多的话，其路由转发处理效率跟不上，还是浪费资源），连接的VLAN个数也就是有限的。假设一个三层交换机有48个端口，使用二层VLAN，划分为24个VLAN，每个VLAN2台机器。有一个4个广域网口的路由器，则路由器最多只能连通4个VLAN，其余VLAN想要和其他VLAN通信，则必须再来几个甚至十几个路由器。 而三层交换机可以划分VLAN interface的个数理论上可达无限个，但实际限制为最多4096个，相比于寥寥数个路由接口也是优略很明显了。如此多的VLAN不仅满足可以随意划分VLAN interface，隔离需要隔离的设备机器，此外在隔离的同时，如果想和某一VLAN interface通信不需要添加任何其他设备，只需要给该VLAN interface和其他VLAN interface配置IP地址，就可以进行高效率的数据转发通信。（下面一幅草图很形象的描述了一台交换机上划分VLAN interface的“随意性”）。
总结：三层交换机因为其VLAN interface，拥有高性能的二层转发功能，且具备三层路由（还有一次路由多次转发等优点）功能。不仅隔绝广播域，抑制了广播风暴，也增加了网路安全性，还有很高性价比，可以说是在校园网、城域网等大型局域网中起到了中流砥柱的作用。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/ff6e567958cd3bd56fbb706b0c07989c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-18T00:28:01+08:00" />
<meta property="article:modified_time" content="2018-08-18T00:28:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VLAN层次与特点概念性总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>先解释两个词：</strong> <br> <strong>端口（port）</strong>：在通信设备中，一般指二层口，该口用于隔绝广播域，基于MAC地址转发，但本身不能设置任何地址； <br> <strong>接口（interface）</strong>：在通信设备中，用于区别二层的端口，指的是三层口，该口可以配置IP地址，基于IP路由转发。</p> 
<p>在传统的局域网中，几个至几十个交换机连接一个大的局域网，一个局域网中的主机台数可能达到上千台，那么由于交换机只能隔绝冲突域，一个端口是一个冲突域，而不能隔绝广播域，会导致局域网内的ARP广播占用大量带宽影响性能，甚至影响网络的正常使用。此外成百上千的计算机在同一个局域网中也会影响网络安全性。 <br> <img src="https://images2.imgbox.com/d8/65/9x9yANUf_o.png" alt="这里写图片描述" title=""></p> 
<p>VLAN（Virtual Local Area Network，虚拟局域网）技术，在交换机不能隔绝广播域并且路由器转发性能过低且价格昂贵，需要交换机能够将这许多主机划区域管理的迫切需求下应运而生。</p> 
<p><strong>1、二层VLAN：</strong> <br> VLAN技术本是二层技术，用来隔绝广播域，限制广播帧对于局域网带宽的影响。因为VLAN在二层，理论上VLAN不可以设置IP，不同VLAN之间不能直接通信，将某些端口加入到VLAN中，那么这些端口所连接的主机也就不能和其他VLAN中的主机进行通信。要想不同VLAN的主机能够通信，则必须借助路由器来进行路由转发。</p> 
<p><strong>2、三层VLAN：</strong> <br> 既然有了路由器可以实现VLAN之间通信，为什么还要有三层VLAN和三层交换机？</p> 
<p>①首先是因为路由器是一个网络层设备，其主要的功能并非转发报文，而是进行路由选择，其转发是基于CPU层面的软件转发，性能效率远远低于基于交换芯片的交换机硬件层面转发。三层交换机集合了二层交换机的VLAN技术和路由器的路由转发功能，其支持VLAN interface，即VLAN接口，也就是VLAN有了逻辑接口，也就有了接口所能配置IP的能力，三层VLAN由此产生。我们给VLAN的逻辑接口配置ip地址，该IP地址就相当于划入到VLAN的端口所连接设备的网关，以实现VLAN间路由。</p> 
<p>②其次，路由器的物理接口数目是比较少的（太多的话，其路由转发处理效率跟不上，还是浪费资源），连接的VLAN个数也就是有限的。假设一个三层交换机有48个端口，使用二层VLAN，划分为24个VLAN，每个VLAN2台机器。有一个4个广域网口的路由器，则路由器最多只能连通4个VLAN，其余VLAN想要和其他VLAN通信，则必须再来几个甚至十几个路由器。 <br> 而三层交换机可以划分VLAN interface的个数理论上可达无限个，但实际限制为最多4096个，相比于寥寥数个路由接口也是优略很明显了。如此多的VLAN不仅满足可以随意划分VLAN interface，隔离需要隔离的设备机器，此外在隔离的同时，如果想和某一VLAN interface通信不需要添加任何其他设备，只需要给该VLAN interface和其他VLAN interface配置IP地址，就可以进行高效率的数据转发通信。（下面一幅草图很形象的描述了一台交换机上划分VLAN interface的“随意性”）。</p> 
<p><img src="https://images2.imgbox.com/86/98/ObkfSolm_o.png" alt="这里写图片描述" title=""> <br> <strong>总结：</strong>三层交换机因为其VLAN interface，拥有高性能的二层转发功能，且具备三层路由（还有一次路由多次转发等优点）功能。不仅隔绝广播域，抑制了广播风暴，也增加了网路安全性，还有很高性价比，可以说是在校园网、城域网等大型局域网中起到了中流砥柱的作用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7a8b68e788077aa4f0f72af64c8c5d84/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python 字符串格式化输出的3种方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bce1bf5fc18d6cbb4021eea0ca94bbde/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">局域网文件传输（Qt&#43;服务器客户端&#43;多线程&#43;TCP）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>快速使用ABP&#43;Zorro - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="快速使用ABP&#43;Zorro" />
<meta property="og:description" content="ABP前台操作流程 下载 前往ASP.NET Boilerplate Startup Templates下载例子下载完成后按照流程Startup-Template-Angular操作，或直接用angular前端部分衔接已有的后台（以下操作衔接南海项目现有API） 配置 到项目目录下安装包npm i或者npm install或yarn add
cd XXX npm i 安装好后需更新NSwag生成的客户端调用代码
更新nswag的后台api地址nswag路径nswag/service.config.nswag（注意，这个与本地的.net core版本有关）
&#34;documentGenerator&#34;: { &#34;fromDocument&#34;: { &#34;url&#34;: &#34;http://salt1.gzwanlink.com.cn:8096/swagger/v1/swagger.json&#34;, &#34;output&#34;: null } }, 更新完配置后运行refresh.bat,可见src/shared/service-proxies/service-proxies.ts已经更新
更新配置中app运行的后台地址，位置src/assets/appconfig.json,
{ &#34;remoteServiceBaseUrl&#34;: &#34;http://salt1.gzwanlink.com.cn:8096&#34;, &#34;appBaseUrl&#34;: &#34;http://localhost:4200&#34;, &#34;localeMappings&#34;: [ { &#34;from&#34;: &#34;pt-BR&#34;, &#34;to&#34;: &#34;pt&#34; }, { &#34;from&#34;: &#34;zh-CN&#34;, &#34;to&#34;: &#34;zh&#34; }, { &#34;from&#34;: &#34;he-IL&#34;, &#34;to&#34;: &#34;he&#34; } ] } 运行npm start,可成功打开登录界面
添加ng-zorro 为了不破坏ABP前端框架，选择手动添加ng-zorro,执行npm install ng-zorro-antd --save,参考https://ng.ant.design/docs/getting-started/zh 在core.less中引入@import &#34;~ng-zorro-antd/ng-zorro-antd.min.css&#34;
新建模块文件ng-zorro-antd.module.ts
在需要用到zorro的组件所在的模块中引入DemoNgZorroAntdModule
@NgModule({ imports: [ DemoNgZorroAntdModule, ], 添加完成后如果报错Uncaught (in promise): ReferenceError: ImportNgZorroAntdModule is not defined,可重新npm start" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6f83aea4415e93000c6945d8265b9cb6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-30T01:21:57+08:00" />
<meta property="article:modified_time" content="2021-10-30T01:21:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">快速使用ABP&#43;Zorro</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="ABP_0"></a>ABP前台操作流程</h3> 
<h4><a id="_2"></a>下载</h4> 
<ol><li>前往<a href="https://aspnetboilerplate.com/Templates" rel="nofollow">ASP.NET Boilerplate Startup Templates</a>下载例子</li><li>下载完成后按照流程<a href="https://aspnetboilerplate.com/Pages/Documents/Zero/Startup-Template-Angular" rel="nofollow">Startup-Template-Angular</a>操作，或直接用angular前端部分衔接已有的后台（以下操作衔接南海项目现有API）</li></ol> 
<h4><a id="_6"></a>配置</h4> 
<ol><li> <p>到项目目录下安装包<code>npm i</code>或者<code>npm install</code>或<code>yarn add</code></p> <pre><code>cd XXX
npm i
</code></pre> </li><li> <p>安装好后需更新<code>NSwag</code>生成的客户端调用代码</p> 
  <ul><li> <p>更新nswag的后台api地址<code>nswag</code>路径<code>nswag/service.config.nswag</code>（注意，这个与本地的.net core版本有关）</p> <pre><code>"documentGenerator": {
"fromDocument": {
  "url": "http://salt1.gzwanlink.com.cn:8096/swagger/v1/swagger.json",
  "output": null
}
},
</code></pre> </li><li> <p>更新完配置后运行refresh.bat,可见<code>src/shared/service-proxies/service-proxies.ts</code>已经更新</p> </li></ul> </li><li> <p>更新配置中app运行的后台地址，位置<code>src/assets/appconfig.json,</code></p> <pre><code>{
  "remoteServiceBaseUrl": "http://salt1.gzwanlink.com.cn:8096",
  "appBaseUrl": "http://localhost:4200",
  "localeMappings": [
    {
      "from": "pt-BR",
      "to": "pt"
    },
    {
      "from": "zh-CN",
      "to": "zh"
    },
    {
      "from": "he-IL",
      "to": "he"
    }
  ]
}
</code></pre> </li><li> <p>运行<code>npm start</code>,可成功打开登录界面</p> </li></ol> 
<h4><a id="ngzorro_52"></a>添加ng-zorro</h4> 
<ol><li>为了不破坏ABP前端框架，选择手动添加<code>ng-zorro</code>,执行<code>npm install ng-zorro-antd --save</code>,参考<a href="https://ng.ant.design/docs/getting-started/zh" rel="nofollow">https://ng.ant.design/docs/getting-started/zh</a> 
  <ul><li> <p>在core.less中引入<code>@import "~ng-zorro-antd/ng-zorro-antd.min.css"</code></p> </li><li> <p>新建模块文件<a href="http://192.168.16.233/dcd/angular-training/blob/master/ng-zorro-antd.module.ts" rel="nofollow">ng-zorro-antd.module.ts</a></p> </li><li> <p>在需要用到zorro的组件所在的模块中引入<code>DemoNgZorroAntdModule</code></p> <pre><code>@NgModule({
	imports: [
	DemoNgZorroAntdModule,
	],
</code></pre> </li><li> <p>添加完成后如果报错<code>Uncaught (in promise): ReferenceError: ImportNgZorroAntdModule is not defined</code>,可重新<code>npm start</code></p> </li></ul> </li></ol> 
<h4><a id="_68"></a>创建组件和模块</h4> 
<ol><li> <p>从api中选取一个模块Player,在<code>src/shared/service-proxies/service-proxy.module.ts</code>中添加模块<code>ApiServiceProxies.PlayerServiceProxy,</code></p> </li><li> <p><code>ng g m player --routing</code>和到指定的模块目录下添加组件<code>ng g c player-list -m player</code>,模块中需要引进ng-zorro、PlayerServiceProxy</p> <pre><code>  imports: [
    CommonModule,
    PlayerRoutingModule, 
    SharedModule,
    FormsModule,   //表单
    ReactiveFormsModule, //表单
    ServiceProxyModule,  // 后端生成的前端服务
    ImportNgZorroAntdModule, //zorro组件模块
  ],
</code></pre> </li><li> <p>更新路由PlayerRoutingModule， 更新模块路由RootRoutingModule， 更新菜单</p> 
  <ul><li> <p>模块路由<code>player-routing.module.ts</code></p> <pre><code>const routes: Routes = [
  {
    path: '',
    component: AppComponent,
    children: [
        { path: 'list', component: PlayerListComponent, },
    ]
}
];
</code></pre> </li><li> <p>总路由<code>root-routing.module.ts</code></p> <pre><code>const routes: Routes = [
 {
    path: 'player',
    loadChildren: () =&gt;import('app/player/player.module').then(m =&gt; m.PlayerModule)
}]
</code></pre> </li><li> <p>添加进菜单<code>src/app/layout/sidebar-menu.component.ts</code>,添加<code>new MenuItem('player', '/player/list', 'fas fa-info-circle'),</code></p> </li></ul> </li><li> <p>运行，可以跳转到player-list页面</p> </li></ol> 
<h4><a id="_111"></a>业务</h4> 
<ol><li>参考role页面</li><li>页面继承抽象类<code>PagedListingComponentBase</code>，实现抽象方法</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/99cb22df8fcdb4e6580bced83ee797aa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">报错：io.minio.MinioClient.putObject(Ljava/lang/String；Ljava/lang/String；Ljava/io/InputStream；JLjava/la</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/579d4c122bde2f154475fc6373b312a8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">带https证书的blazorserver的docker部署</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
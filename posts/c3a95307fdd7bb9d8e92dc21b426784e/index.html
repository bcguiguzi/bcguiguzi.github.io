<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>dom4j的使用心得 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="dom4j的使用心得" />
<meta property="og:description" content="一、创建document对象
1.读取XML文件,获得document对象 SAXReader reader = new SAXReader(); Document document = reader.read(new File(&#34;csdn.xml&#34;)); 2.解析XML形式的文本,得到document对象. String text = &#34;&lt;csdn&gt;&lt;/csdn&gt;&#34;; Document document = DocumentHelper.parseText(text); 3.主动创建document对象. Document document = DocumentHelper.createDocument(); //创建根节点 Element root = document.addElement(&#34;csdn&#34;); 二、配置document的doctype
// 添加doctype DefaultDocumentType docType = new DefaultDocumentType(); docType.setName(&#34;mapper&#34;); docType.setPublicID(&#34;-//mybatis.org//DTD Mapper 3.0//EN\&#34; \&#34;http://mybatis.org/dtd/mybatis-3- mapper.dtd&#34;); document.setDocType(docType); 三、document对象操作节点
// 创建文档并写入磁盘中 Document document = getMyBatisDocument(); // 创建mapper节点 Element mapper = document.addElement(&#34;mapper&#34;); mapper.addAttribute(&#34;namespace&#34;, Config.getProperty(&#34;dao&#34;) &#43; &#34;.&#34; &#43; myTable.getBeanName() &#43; &#34;Dao&#34;); // 创建resultMap节点 Element resultMap = mapper." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/c3a95307fdd7bb9d8e92dc21b426784e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-06-22T09:19:13+08:00" />
<meta property="article:modified_time" content="2016-06-22T09:19:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">dom4j的使用心得</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>一、创建document对象</strong></p> 
<pre class="prettyprint"><code class=" hljs coffeescript"><span class="hljs-number">1.</span>读取XML文件,获得<span class="hljs-built_in">document</span>对象              
  SAXReader reader = <span class="hljs-keyword">new</span> SAXReader();                
  Document   <span class="hljs-built_in">document</span> = reader.read(<span class="hljs-keyword">new</span> File(<span class="hljs-string">"csdn.xml"</span>));  
<span class="hljs-number">2.</span>解析XML形式的文本,得到<span class="hljs-built_in">document</span>对象.  
  String text = <span class="hljs-string">"&lt;csdn&gt;&lt;/csdn&gt;"</span>;              
  Document <span class="hljs-built_in">document</span> = DocumentHelper.parseText(text);  
<span class="hljs-number">3.</span>主动创建<span class="hljs-built_in">document</span>对象.  
  Document <span class="hljs-built_in">document</span> = DocumentHelper.createDocument();             <span class="hljs-regexp">//</span>创建根节点  
  Element root = <span class="hljs-built_in">document</span>.addElement(<span class="hljs-string">"csdn"</span>);  </code></pre> 
<p><strong>二、配置document的doctype</strong></p> 
<pre class="prettyprint"><code class=" hljs avrasm">// 添加doctype
DefaultDocumentType docType = new DefaultDocumentType()<span class="hljs-comment">;</span>
docType<span class="hljs-preprocessor">.setName</span>(<span class="hljs-string">"mapper"</span>)<span class="hljs-comment">;</span>
docType<span class="hljs-preprocessor">.setPublicID</span>(<span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-         mapper.dtd"</span>)<span class="hljs-comment">;</span>
document<span class="hljs-preprocessor">.setDocType</span>(docType)<span class="hljs-comment">;</span></code></pre> 
<p><strong>三、document对象操作节点</strong></p> 
<pre class="prettyprint"><code class=" hljs avrasm">// 创建文档并写入磁盘中
        Document document = getMyBatisDocument()<span class="hljs-comment">;</span>

        // 创建mapper节点
        Element mapper = document<span class="hljs-preprocessor">.addElement</span>(<span class="hljs-string">"mapper"</span>)<span class="hljs-comment">;</span>
        mapper<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"namespace"</span>, Config<span class="hljs-preprocessor">.getProperty</span>(<span class="hljs-string">"dao"</span>) + <span class="hljs-string">"."</span> + myTable<span class="hljs-preprocessor">.getBeanName</span>() + <span class="hljs-string">"Dao"</span>)<span class="hljs-comment">;</span>

        // 创建resultMap节点
        Element resultMap = mapper<span class="hljs-preprocessor">.addElement</span>(<span class="hljs-string">"resultMap"</span>)<span class="hljs-comment">;</span>
        resultMap<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"id"</span>, myTable<span class="hljs-preprocessor">.getBeanName</span>() + <span class="hljs-string">"Map"</span>)<span class="hljs-comment">;</span>
        resultMap<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"type"</span>, Config<span class="hljs-preprocessor">.getProperty</span>(<span class="hljs-string">"beans"</span>) + <span class="hljs-string">"."</span> + myTable<span class="hljs-preprocessor">.getBeanName</span>())<span class="hljs-comment">;</span>

        // 创建insert节点
        Element insert = mapper<span class="hljs-preprocessor">.addElement</span>(<span class="hljs-string">"insert"</span>)<span class="hljs-comment">;</span>
        insert<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"id"</span>, <span class="hljs-string">"insert"</span>)<span class="hljs-comment">;</span>
        insert<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"parameterType"</span>, Config<span class="hljs-preprocessor">.getProperty</span>(<span class="hljs-string">"beans"</span>)+<span class="hljs-string">"."</span>+myTable<span class="hljs-preprocessor">.getBeanName</span>())<span class="hljs-comment">;</span>

        Element selectKey = insert<span class="hljs-preprocessor">.addElement</span>(<span class="hljs-string">"selectKey"</span>)<span class="hljs-comment">;</span>
        selectKey<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"resultType"</span>, <span class="hljs-string">"long"</span>)<span class="hljs-comment">;</span>
        selectKey<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"keyProperty"</span>, myTable<span class="hljs-preprocessor">.getPkProperty</span>())<span class="hljs-comment">;</span>
        selectKey<span class="hljs-preprocessor">.addAttribute</span>(<span class="hljs-string">"order"</span>, <span class="hljs-string">"BEFORE"</span>)<span class="hljs-comment">;</span>
        selectKey<span class="hljs-preprocessor">.addText</span>(<span class="hljs-string">"SELECT NEXTVAL('"</span>+myTable<span class="hljs-preprocessor">.getSerializeName</span>()+<span class="hljs-string">"')"</span>)<span class="hljs-comment">;</span></code></pre> 
<p><strong>四、写入document到磁盘文件中</strong></p> 
<pre class="prettyprint"><code class=" hljs cs">OutputFormat format = OutputFormat.createPrettyPrint(); <span class="hljs-comment">// 创建文件输出的时候，自动缩进的格</span>
        format.setEncoding(<span class="hljs-string">"UTF-8"</span>);<span class="hljs-comment">// 设置编码</span>
        format.setIndent(<span class="hljs-keyword">true</span>);
        format.setNewlines(<span class="hljs-keyword">true</span>);
        format.setTrimText(<span class="hljs-keyword">false</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 将文档对象写入新建的xml文件中</span>
            XMLWriter writer;
            writer = <span class="hljs-keyword">new</span> XMLWriter(<span class="hljs-keyword">new</span> FileWriter(fileName), format);
            writer.write(document);
            writer.close();
        } <span class="hljs-keyword">catch</span> (IOException e) {
            e.printStackTrace();
        }</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b66af03c43fd1ae31b11321cae70d47b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">WINDOWS中NEXUS的安装使用【ATCO整理】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/77edd55962a8ec1f938b4498ca9e4fb8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JDBC 读取数据库中的表信息和字段信息</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
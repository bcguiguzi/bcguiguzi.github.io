<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>旋转的骰子（二） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="旋转的骰子（二）" />
<meta property="og:description" content="1.动画——旋转的骰子 上一次我们做了一个旋转的骰子（参看第2讲），这次我们想要点击按钮，让骰子旋转到特定的点数停下来！
2.分析需求——庖丁解牛 a.立方体特定的朝向对应着特定的旋转角度
骰子显示特定点数，无非就是旋转骰子，让特定点数的面朝向屏幕外侧
b.通过自定义属性控制旋转角度
利用css属性选择器，将特定属性值和骰子旋转样式，建立一一对应关系
c.通过类进行动画控制
通过添加类，删除类，启动动画
d.添加控制按钮，触发动画
添加6个按钮，点击，触发筛子旋转，方便调试
3.旋转特定角度，露出特定平面 4.自定义属性的设置 与表达式
“与”表达式（&amp;&amp;），准确的说是“逻辑与”表达式，形式为： A &amp;&amp; B &amp;&amp; C。
其中A，B，C为子表达式，子表达式数目不限，只有所有的子表达式都为true，整个表达式的值才为true.
判断为true的常见类型：
布尔值true，非零数值，对象，字符串
判断为false的常见类型：
布尔值false，数值0，空对象（null)，未定义变量（undefine)
与表达式是可以赋值给给其他变量的，它的值的分两种情况：
• 如果整个表达式的值为 true ，则整个表达式的值，是 最后一个为 true 的，子表达式的值 ； • 如果表达式的值为 false ， 则整个表达式的值，为 第一个为 false 的子表达式的值 。 如下图所示
5.动画的开启/结束 6.测试按钮 7.更多思考 我们可以制作一个骰子，然后通过单一按钮，进行随机投掷，这样就变成了一个有趣的小游戏
8 代码 注意代码中引用jquery-1.12.4.js，可自行到官网下载
&lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34;/&gt; &lt;title&gt;Rotate Dice&lt;/title&gt; &lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;./styles.css&#34;/&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&#34;dice&#34;&gt; &lt;div class=&#34;vertical&#34;&gt; &lt;div class=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/668c98bc4349334390d43c284627b7cc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-25T10:33:00+08:00" />
<meta property="article:modified_time" content="2022-11-25T10:33:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">旋转的骰子（二）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:0in;text-align:left;"><span style="color:#404040;">1.</span><span style="color:#404040;">动画</span><span style="color:#404040;">——</span><span style="color:#404040;">旋转的骰子</span></h2> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">上一次我们做了一个旋转的骰子（参看第</span><span style="color:#404040;">2</span><span style="color:#404040;">讲），这次我们想要点击按钮，让骰子旋转到特定的点数停下来！</span></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="297" src="https://images2.imgbox.com/59/27/NftXIglA_o.png" width="271"></p> 
<h2 style="margin-left:0in;text-align:left;"><span style="color:#404040;">2.</span><span style="color:#404040;">分析需求</span><span style="color:#404040;">——</span><span style="color:#404040;">庖丁解牛</span></h2> 
<p></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">a.</span><span style="color:#404040;">立方体</span><span style="color:#c00000;">特定的朝向</span><span style="color:#404040;">对应着特定的</span><span style="color:#c00000;">旋转角度</span></p> 
<p style="margin-left:0in;text-align:left;">   <span style="color:#404040;">骰子显示特定点数，无非就是旋转骰子，让特定点数的面朝向屏幕</span><span style="color:#404040;">外侧</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">b.</span><span style="color:#404040;">通过</span><span style="color:#c00000;">自定义属性</span><span style="color:#404040;">控制旋转角度</span></p> 
<p style="margin-left:0in;text-align:left;">   <span style="color:#404040;">利用</span><span style="color:#404040;">css</span><span style="color:#404040;">属性选择器，将特定属性值和骰子旋转样式，建立一一对应关系</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">c.</span><span style="color:#404040;">通过</span><span style="color:#c00000;">类</span><span style="color:#404040;">进行动画控制</span></p> 
<p style="margin-left:0in;text-align:left;">   <span style="color:#404040;">通过添加类，删除类，启动动画</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">d.</span><span style="color:#404040;">添加控制按钮</span><span style="color:#404040;">，触发动画</span></p> 
<p style="margin-left:0in;text-align:left;">   <span style="color:#404040;">添加</span><span style="color:#404040;">6</span><span style="color:#404040;">个按钮，点击，触发筛子旋转，方便调试</span></p> 
<h2 style="margin-left:0in;text-align:left;"><span style="color:#404040;">3.</span><span style="color:#404040;">旋转特定角度，露出特定平面</span></h2> 
<p><img alt="" height="917" src="https://images2.imgbox.com/a0/31/Vgl8TBUp_o.png" width="1200"></p> 
<h2><span style="color:#404040;">4.</span><span style="color:#404040;">自定义属性的设置</span> </h2> 
<p><img alt="" height="917" src="https://images2.imgbox.com/09/37/9Ga3upB3_o.png" width="1200"></p> 
<p><span style="color:#404040;">与表达式</span></p> 
<p></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">“与”表达式（</span><span style="color:#404040;">&amp;&amp;</span><span style="color:#404040;">），准确的说是“逻辑与”表达式，形式为： </span><span style="color:#404040;">A &amp;&amp; B &amp;&amp; C</span><span style="color:#404040;">。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">其中</span><span style="color:#404040;">A</span><span style="color:#404040;">，</span><span style="color:#404040;">B</span><span style="color:#404040;">，</span><span style="color:#404040;">C</span><span style="color:#404040;">为子表达式，子表达式数目不限，只有所有的子表达式都为</span><span style="color:#404040;">true</span><span style="color:#404040;">，整个表达式的值才为</span><span style="color:#404040;">true.</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">判断为</span><span style="color:#404040;">true</span><span style="color:#404040;">的常见类型：</span></p> 
<p style="margin-left:0in;text-align:left;">  <span style="color:#404040;">布尔值</span><span style="color:#404040;">true</span><span style="color:#404040;">，非零数值，对象，字符串</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">判断</span><span style="color:#404040;">为</span><span style="color:#404040;">false</span><span style="color:#404040;">的常见类型：</span></p> 
<p style="margin-left:0in;text-align:left;">  <span style="color:#404040;">布尔值</span><span style="color:#404040;">false</span><span style="color:#404040;">，数值</span><span style="color:#404040;">0</span><span style="color:#404040;">，</span><span style="color:#404040;">空</span><span style="color:#404040;">对象（</span><span style="color:#404040;">null)</span><span style="color:#404040;">，未定义变量（</span><span style="color:#404040;">undefine</span><span style="color:#404040;">)</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">与表达式是可以赋值给给其他变量的，它的值的分两种情况：</span></p> 
<div style="margin-left:.31in;text-align:left;">
  • 
 <span style="color:#404040;">如果整个表达式的值为</span> 
 <span style="color:#404040;"><strong>true</strong></span> 
 <span style="color:#404040;">，则整个表达式的值，是</span> 
 <span style="color:#FF0000;">最后一个为</span> 
 <span style="color:#FF0000;"><strong>true</strong></span> 
 <span style="color:#FF0000;">的，子表达式的值</span> 
 <span style="color:#404040;">；</span> 
</div> 
<div style="margin-left:.31in;text-align:left;">
  • 
 <span style="color:#404040;">如果表达式的值为</span> 
 <span style="color:#404040;"><strong>false</strong></span> 
 <span style="color:#404040;">，</span> 
 <span style="color:#404040;">则整个表达式的值，为</span> 
 <span style="color:#FF0000;">第一个为</span> 
 <span style="color:#FF0000;"><strong>false</strong></span> 
 <span style="color:#FF0000;">的子表达式的值</span> 
 <span style="color:#404040;">。</span> 
</div> 
<p style="margin-left:0in;text-align:left;"><span style="color:#404040;">如下</span><span style="color:#404040;">图所示</span></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="620" src="https://images2.imgbox.com/35/4c/typuJmi3_o.png" width="978"></p> 
<h2> <span style="color:#404040;">5.</span><span style="color:#404040;">动画的开启</span><span style="color:#404040;">/</span><span style="color:#404040;">结束</span></h2> 
<p><img alt="" height="611" src="https://images2.imgbox.com/af/ec/O2iTfkph_o.png" width="1131"></p> 
<p> </p> 
<h2> <img alt="" height="692" src="https://images2.imgbox.com/d1/fb/cMjITZbO_o.png" width="1080"><span style="color:#404040;">6.</span><span style="color:#404040;">测试按钮</span></h2> 
<p> <img alt="" height="607" src="https://images2.imgbox.com/1d/9d/BabuYOWB_o.png" width="1179"></p> 
<p><img alt="" height="871" src="https://images2.imgbox.com/e0/6f/T5zuGKE9_o.png" width="1200"> </p> 
<h2><img alt="" height="565" src="https://images2.imgbox.com/f4/ba/Emkigflu_o.png" width="1200"> <span style="color:#404040;">7</span><span style="color:#404040;">.</span><span style="color:#404040;">更多思考</span></h2> 
<p><span style="color:#000000;">我们可以制作一个骰子，然后通过单一按钮，进行随机投掷，这样就变成了一个有趣的小游戏</span></p> 
<h2><span style="color:#000000;">8 代码</span></h2> 
<p><span style="color:#000000;">注意代码中引用</span><span style="color:#000000;">jquery-1.12.4.js，可自行到官网下载</span></p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
	&lt;head&gt;
		&lt;meta charset="UTF-8"/&gt;
		&lt;title&gt;Rotate Dice&lt;/title&gt;
		&lt;link rel="stylesheet" type="text/css" href="./styles.css"/&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;div class="dice"&gt;
			&lt;div class="vertical"&gt;
        &lt;div class="horizontal"&gt;
          &lt;div class="cube" point=""&gt;
            &lt;div class="face front one"&gt;
              &lt;span class="dot"&gt;&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="face back two"&gt;
              &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;span class="dot"&gt;&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="face up three"&gt;
              &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;span class="dot"&gt;&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class="face down four"&gt;
              &lt;div class="dot-row"&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;/div&gt;
              &lt;div class="dot-row"&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="face left five"&gt;
              &lt;div class="dot-row"&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;/div&gt;
              &lt;div class="dot-row"&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;/div&gt;
              &lt;div class="dot-row"&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="face right six"&gt;
              &lt;div class="dot-row"&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;/div&gt;
              &lt;div class="dot-row"&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
                &lt;span class="dot"&gt;&lt;/span&gt;
              &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="axis-face x"&gt;&lt;/div&gt;
            &lt;div class="axis-face y"&gt;&lt;/div&gt;
            &lt;div class="axis-face z"&gt;&lt;/div&gt;
          &lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div class="btn-group"&gt;
			&lt;button class="" point="1"&gt;1&lt;/button&gt;
			&lt;button class="" point="2"&gt;2&lt;/button&gt;
			&lt;button class="" point="3"&gt;3&lt;/button&gt;
			&lt;button class="" point="4"&gt;4&lt;/button&gt;
			&lt;button class="" point="5"&gt;5&lt;/button&gt;
			&lt;button class="" point="6"&gt;6&lt;/button&gt;
		&lt;/div&gt;
		&lt;script src="./jquery-1.12.4.js"&gt;&lt;/script&gt;
		&lt;script src="./think.js"&gt;&lt;/script&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p> </p> 
<p> </p> 
<pre><code class="language-css">html
{
	background-color: black;
	font-size:100px;
	padding: 1em;
	text-align: center;
}
.btn-group{
	display: inline-block;
}

/*骰子动画*/
.dice.ani .vertical{
	animation: jump 1s linear;
}
.dice.ani .horizontal{
	animation: rotateY 2s ease-out;
}
.dice.ani .cube{
	transition: transform 2.1s ;
}

@keyframes rotateY {
	from{transform:rotateY(0);}
	to{transform:rotateY(1800deg);}
}
/*@keyframes rotateX {
	from{transform:rotateX(0);}
	to{transform:rotateX(3600deg);}
}*/
@keyframes jump {
		from{transform: translateY(-3.6em);}
		30%{transform: translateY(-3em);}
		60%{transform: translateY(0);}
		70%{transform: translateY(-1.5em);}
		80%{transform: translateY(0);}
		90%{transform: translateY(-.6em);}
		to,10%{transform: translateY(0);}
}

/*转到对应点数的动画*/
.cube{
	transform: rotateX(-10deg) rotateY(10deg);
}
.cube[point=p1]{
  transform: rotateX(-10deg) rotateY(10deg);
}
.cube[point=p2]{
  transform: rotateX(-10deg) rotateY(190deg);
}
.cube[point=p3]{
  transform: rotateX(-100deg) rotateY(0) rotateZ(10deg);
}
.cube[point=p4]{
  transform: rotateX(80deg) rotateY(0) rotateZ(-10deg);
}
.cube[point=p5]{
  transform: rotateX(-10deg) rotateY(100deg);
}
.cube[point=p6]{
  transform: rotateX(-10deg) rotateY(-80deg);
}

/*面的样式*/
.dice,.vertical,.horizontal,.cube,.face{
	transform-style:preserve-3d;
}
.dice,.vertical,.horizontal,.cube,.face,.face::after,.axis-face{
	width:1em;
	height: 1em;
}
.dice{
	margin: auto;
}
.cube{
  position: relative;
}
.face,.face::after,.axis-face{
	position: absolute;
  top:0;
  left: 0;
}
.face{
	box-sizing: border-box;
  padding: .15em;
  background-color: white;
  border-radius: 40%;
  box-shadow: 0 0 .2em #ccc inset;
}
.face::after{
  content:"";
  display: block;
  border-radius: .2em;
  transform: translateZ(-.1px);
  background-color: #e0e0e0;
}
.axis-face{
  background:#e0e0e0;
}

/*点的样式*/
.dot{
  width:.2em;
  height: .2em;
  display: inline-block;
  background: #444;
  border-radius: 50%;
  box-shadow: inset .05em .05em .1em black;
}
/* 面的方位*/
.face.front{
  transform: translateZ(.5em);
}
.face.back{
  transform: translateZ(-.5em) rotateY(180deg);
}
.face.up{
  transform: translateY(-50%) rotateX(90deg);
}
.face.down{
  transform: translateY(50%) rotateX(-90deg);
}
.face.left{
  transform: translateX(-50%) rotateY(-90deg);
}
.face.right{
  transform: translateX(50%) rotateY(90deg);
}
.axis-face.x{
  transform:rotateY(90deg);
}
.axis-face.y{
  transform:rotateX(90deg);
}
.axis-face.z{
}

/* 点的排列布局*/
.face,.dot-row{
  display: flex;
}
.face.one{
  align-items: center;
  justify-content: center;
}
.face.two{
  justify-content: space-around;
}
.face.two .dot:nth-child(2){
  align-self: flex-end;
}
.face.three{
  justify-content: space-around;
}
.face.three .dot:nth-child(2){
  align-self:center;
}
.face.three .dot:nth-child(3){
  align-self: flex-end;
}
.face.four{
  flex-direction: column;
  justify-content: space-between;
}
.face.four .dot-row{
  justify-content: space-between;
}
.face.five{
  flex-direction: column;
  justify-content: space-between;
}
.face.five .dot-row{
  justify-content: space-between;
}
.face.five .dot-row:nth-child(2){
  justify-content:center;
}
.face.six{
  flex-direction: column;
  justify-content: space-around;
}
.face.six .dot-row{
  justify-content: space-between;
}
</code></pre> 
<pre><code class="language-javascript">jQuery(function($){
	var $btnGroup = $('.btn-group'),
			$cube = $('.cube'),
			$dice = $('.dice');
	$btnGroup.on('click',onclick_btn);
	$cube.on('transitionend',onAniEnd);

	function onclick_btn(e){
		var point,
				$btn;
		if(!$dice.hasClass('ani') &amp;&amp; e.target.tagName =="BUTTON"){
			$btn = $(e.target);
			point = parseInt($btn.attr('point'));
			if(setPoint(point)){
				$dice.addClass('ani');
			}
		}
	}
	function setPoint(point){
		var prePoint,
				pointStr,
				num;
		pointStr = $cube.attr('point').match(/\d/);
		num = pointStr &amp;&amp; pointStr.length&gt;0 &amp;&amp; pointStr[0];
		prePoint = parseInt(num);
		if(prePoint != point){
			$cube.attr("point","p"+point);
			return true;
		}else {
			return false;
		}
	}
	function onAniEnd(e){
		$dice.removeClass('ani');
	}

});
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/31b67b3741f1c0c644a90a1b0423efdc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HTML、CSS学习笔记小结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/74ede840ab99ef1dd742699da63a5198/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CSS3 动画</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
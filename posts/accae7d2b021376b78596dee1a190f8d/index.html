<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>最全 Linux 磁盘管理基础知识全汇总 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="最全 Linux 磁盘管理基础知识全汇总" />
<meta property="og:description" content="一、存储设备的挂载和卸载
存储设备的挂载和卸载常用操作命令：fdisk -l、df、du、mount、umount。
fdisk -l 命令
1.作用
查看所有硬盘的分区信息,包括没有挂上的分区和USB设备，挂载时需要用这条命令来查看分区或USB设备的名称，比如挂载U盘时。
注意：Linux中既然硬件是以文件形式存在，则也可以ls -l /dev/sda*查看第一块硬盘的分区信息
df 命令
1.作用
统计磁盘空间或文件系统使用情况，显示磁盘分区上的可使用的磁盘空间，默认显示单位为KB
2.格式
df [option]
3.[option]主要参数
-a或-all：显示全部的文件系统
-h或--human-readable：以可读性较高的方式来显示信息
-T或--print-type：显示文件系统的类型
4.应用举例
查看全部文件系统：
#df -a
du 命令
1.作用
查看文件或目录的磁盘使用的空间，和df命令有一些区别。注意：①du后若不加目录名或文件名，表示只显示当前目录下面的子目录的目录大小和当前目录的总的大小②可查看多个文件或目录用空格符隔开
2.格式
du [option] 目录名或文件名
3.[option]主要参数
-a或-all：显示目录中个别文件的大小
-h或--human-readable：以K，M，G为单位显示，提高信息可读性
-S或--separate-dirs：省略指定目录下的子目录，只显示该目录的总和（注意：该命令是大写S）
4.应用举例
以易读形式查看ahao目录的大小并忽略子目录：
#du -h -S ahao
以易读形式查看haha1文件和haha2文件的大小：
#du -h haha1 haha2
mount 命令
1.作用
①此命令后面不加任何参数表示查看已挂载的所有文件系统
②加参数表示将存储设备挂载到Linux的一个目录下，从而将分区和该目录联系起来，因此我们只要访问这个目录，就相当于访问该存储设备了。
注意：当一个目录之前有文件，设备挂载到这个目录后，目录不显示之前的文件
2.格式
mount [option] 设备名挂载点(必须已存在)
3.[option]主要参数
-t&lt;文件系统类型&gt;:文件系统类型vfat表示FAT32，iso9660表示光盘或光盘镜像，auto表示系统自动识别(一般选这个方便吧)
4.应用举例
将FAT32文件系统的分区/dev/sda5挂载到/ahao目录下：
#mount -t auto /dev/sda5 /ahao
将U盘/dev/sdb1挂载到/ahao目录下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/accae7d2b021376b78596dee1a190f8d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-19T11:06:52+08:00" />
<meta property="article:modified_time" content="2020-02-19T11:06:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">最全 Linux 磁盘管理基础知识全汇总</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一、存储设备的挂载和卸载</p> 
<p> </p> 
<p>存储设备的挂载和卸载常用操作命令：fdisk  -l、df、du、mount、umount。</p> 
<p> </p> 
<p><strong>fdisk  -l 命令</strong></p> 
<p> </p> 
<p>1.作用</p> 
<p>查看所有硬盘的分区信息,包括没有挂上的分区和USB设备，挂载时需要用这条命令来查看分区或USB设备的名称，比如挂载U盘时。</p> 
<p>注意：Linux中既然硬件是以文件形式存在，则也可以ls -l /dev/sda*查看第一块硬盘的分区信息</p> 
<p> </p> 
<p><strong>df 命令</strong></p> 
<p> </p> 
<p>1.作用</p> 
<p>统计磁盘空间或文件系统使用情况，显示磁盘分区上的可使用的磁盘空间，默认显示单位为KB</p> 
<p>2.格式</p> 
<p>df [option]</p> 
<p>3.[option]主要参数</p> 
<ul><li> <p>-a或-all：显示全部的文件系统</p> </li><li> <p>-h或--human-readable：以可读性较高的方式来显示信息</p> </li><li> <p>-T或--print-type：显示文件系统的类型</p> </li></ul> 
<p>4.应用举例</p> 
<p>查看全部文件系统：</p> 
<blockquote> 
 <p>#df -a</p> 
</blockquote> 
<p> </p> 
<p><strong>du 命令</strong></p> 
<p> </p> 
<p>1.作用</p> 
<p>查看文件或目录的磁盘使用的空间，和df命令有一些区别。注意：①du后若不加目录名或文件名，表示只显示当前目录下面的子目录的目录大小和当前目录的总的大小②可查看多个文件或目录用空格符隔开</p> 
<p>2.格式</p> 
<p>du [option] 目录名或文件名</p> 
<p>3.[option]主要参数</p> 
<ul><li> <p>-a或-all：显示目录中个别文件的大小</p> </li><li> <p>-h或--human-readable：以K，M，G为单位显示，提高信息可读性</p> </li><li> <p>-S或--separate-dirs：省略指定目录下的子目录，只显示该目录的总和（注意：该命令是大写S）</p> </li></ul> 
<p>4.应用举例</p> 
<p>以易读形式查看ahao目录的大小并忽略子目录：</p> 
<blockquote> 
 <p>#du -h -S ahao</p> 
</blockquote> 
<p>以易读形式查看haha1文件和haha2文件的大小：</p> 
<blockquote> 
 <p>#du -h haha1 haha2</p> 
</blockquote> 
<p> </p> 
<p><strong>mount 命令</strong></p> 
<p> </p> 
<p>1.作用</p> 
<p>①此命令后面不加任何参数表示查看已挂载的所有文件系统</p> 
<p>②加参数表示将存储设备挂载到Linux的一个目录下，从而将分区和该目录联系起来，因此我们只要访问这个目录，就相当于访问该存储设备了。</p> 
<p>注意：当一个目录之前有文件，设备挂载到这个目录后，目录不显示之前的文件</p> 
<p>2.格式</p> 
<p>mount  [option] 设备名挂载点(必须已存在)</p> 
<p>3.[option]主要参数</p> 
<ul><li> <p>-t&lt;文件系统类型&gt;:文件系统类型vfat表示FAT32，iso9660表示光盘或光盘镜像，auto表示系统自动识别(一般选这个方便吧)</p> </li></ul> 
<p>4.应用举例</p> 
<p>将FAT32文件系统的分区/dev/sda5挂载到/ahao目录下：</p> 
<blockquote> 
 <p>#mount -t auto /dev/sda5 /ahao</p> 
</blockquote> 
<p>将U盘/dev/sdb1挂载到/ahao目录下：</p> 
<blockquote> 
 <p>#mount -t auto /dev/sdb1 /ahao</p> 
</blockquote> 
<p>将光盘镜像文件xxx.iso的挂接到/peter目录下：</p> 
<blockquote> 
 <p>#mount -t iso9660 xxx.iso  /peter -o loop</p> 
</blockquote> 
<p> </p> 
<p><strong>umount 命令</strong></p> 
<p> </p> 
<p>1.作用</p> 
<p>卸载已经加载的文件系统。利用设备名或挂载点都能umount文件系统，不过最好还是通过挂载点卸载，当一个设备多个挂载点时容易产生混乱</p> 
<p>2.格式</p> 
<ul><li> <p>①umount 挂载点 (推荐此方式)</p> </li><li> <p>②umount 设备名</p> </li></ul> 
<p>3.应用举例</p> 
<p>在使用umount命令卸载文件系统时，必须保证文件系统不能处于busy状态，使文件系统处于busy状态的情况有：文件系统中有打开的文件，某个进程的工作目录在此系统中，文件系统的缓存文件正在被使用等。最常见的错误是在挂载点目录下进行卸载操作。</p> 
<p>卸载/ahao挂载点对应的挂载：</p> 
<blockquote> 
 <p>#umount /ahao</p> 
</blockquote> 
<p> </p> 
<p>二、自动挂载</p> 
<p> </p> 
<p><strong>自动挂载实现原理</strong></p> 
<p> </p> 
<p>实现开机自动挂载只需修改/etc/fstab配置文件即可，可用vi编辑器修改或图形界面下用gedit命令修改</p> 
<p> </p> 
<p><strong>/etc/fstab配置文件解读</strong></p> 
<p> </p> 
<p>打开/etc/fstab配置文件</p> 
<p>⑴第一列：①设备名/dev/sda1或②卷标label或③设备UUID(红帽6)（查看设备的UUID blkid/dev/sda1）</p> 
<p>⑵第二列：挂载点</p> 
<p>⑶第三列：文件系统类型</p> 
<p>⑷第四列：挂载选项，通常使用defaults就可以</p> 
<p>⑸第五列：是否进行备份，1表示备份，0表示不备份</p> 
<p>⑹第六列：是否检查文件系统，1表示检验，0表示不检验</p> 
<p> </p> 
<p><strong>应用举例</strong></p> 
<p> </p> 
<p>实现插U盘自动挂载U盘到/usb目录，不备份且不检查文件系统：</p> 
<blockquote> 
 <p>/dev/sdb1 /usb auto defaults   0     0</p> 
</blockquote> 
<p>将上述命令添加到/etc/fstab配置文件中即可完成插U盘自动挂载，为了避免可能的错误，使用mount -a 命令来检验编辑的内容是否有错</p> 
<p> </p> 
<p>三、磁盘分区</p> 
<p> </p> 
<p>用fdisk在Linux中进行分区的时候，最常用的参数分别是 d、l、m、n、p、q、t、w等。</p> 
<p>注意：</p> 
<p>①主分区和扩展分区的磁盘号位1-4，也就是说最多有4个主分区或者扩展分区，逻辑分区开始的磁盘号为5</p> 
<p>②如果硬盘上有扩展分区，就只能增加逻辑分区，不能增加扩展分区了</p> 
<p> </p> 
<p><strong>fdisk 命令</strong></p> 
<p> </p> 
<p>1.作用</p> 
<p>对硬盘进行分区，采用传统的问答式界面</p> 
<p>2.格式</p> 
<p>1)fidsk 磁盘名</p> 
<p>2)[option]</p> 
<p>第一步：fidsk /dev/sdb ：选择要进行操作的磁盘，这里是对sdb移动磁盘进行操作</p> 
<p>第二步：输入[option]进行操作</p> 
<p>3.[option]主要参数</p> 
<ul><li> <p>m:列出可以执行的命令（帮助）</p> </li><li> <p>p:查看磁盘目前的分区情况</p> </li><li> <p>n:建立新的磁盘分区</p> </li><li> <p>l:列出已知的分区类型</p> </li><li> <p>d:删除现有分区</p> </li><li> <p>t:改变分区类型</p> </li><li> <p>w;对分区操作进行保存并且退出</p> </li><li> <p>q:不保存退出</p> </li></ul> 
<p> </p> 
<p><strong>分区过程描述</strong></p> 
<p> </p> 
<p>①通过 p 参数来查看出硬盘分区表信息。根据信息确定将来的分区</p> 
<p>②通过 d 参数一个个删除存在的硬盘分区，如果想完全改变硬盘的分区格式</p> 
<p>③通过 n 参数来增加新的分区</p> 
<p>1）选择新建的分区类型。p为主分区，e为扩展分区（当有扩展分区存在时这里的e会    变成l，即逻辑分区）</p> 
<p>2）设置分区号。主分区或扩展分区为1-4，逻辑分区为5开始</p> 
<p>3）设置分区起始位置。（一般回车默认就好）</p> 
<p>4）设置分区结束位置。（100单位为扇区，+100M单位为M，+100K单位为K）</p> 
<p>④通过p参数确认分区建立成功</p> 
<p>⑤通过参数w或q退出（w为保存并退出，q为不保存退出）</p> 
<p>注意：在增加分区的时候，其类型都是默认的 Linux Native，如果需要把其中的某些分区改变为其它类型，可以通过命令 t来改变，当键入“t”改变分区类型的时候，系统会提示要改变哪个分区，改变为什么类型（键入l查看系统所支持的分区类型及其对应的分区类型号）。</p> 
<p> </p> 
<p>四、磁盘格式化</p> 
<p> </p> 
<p>对硬盘分区之后，需要对分区进行格式化才能使用，格式化分区的主要目的是在分区中创建文件系统，文件系统是OS用作明确存储设备或分区上的文件的方法和数据结构，即在存储设备上组织文件的方法。</p> 
<p> </p> 
<p><strong>mkfs 命令</strong></p> 
<p> </p> 
<p>1.作用</p> 
<p>格式化分区，在分区上创建文件系统</p> 
<p>2.格式</p> 
<p>①mkfs[options] 设备名</p> 
<p>②mkfs.&lt;文件系统类型&gt; [-v] 设备名</p> 
<p>3.[option]主要参数</p> 
<ul><li> <p>-t&lt;文件系统类型&gt;: 选择要创建的文件系统的类型，如ext3、ext4等，不同版本的Linux具有不同的默认文件系统</p> </li><li> <p>-V:显示更多输出，包括文件系统的相关信息(注意：-V必须放在-t前面)</p> </li></ul> 
<p>4.应用举例</p> 
<p>格式化/dev/sdb1分区，并显示具体信息：</p> 
<blockquote> 
 <p>#mkfs -V -t vfat /dev/sdb1</p> 
</blockquote> 
<blockquote> 
 <p>#mkfs.vfat -v /dev/sdb1</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5a9ee4521363c67c1c35a48d974c0225/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu18.04 向日葵软件被远程显示停止连接不上</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec66c2166ba4a9139d2a0077c5878df9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">图像梯度(Image  Gradient)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
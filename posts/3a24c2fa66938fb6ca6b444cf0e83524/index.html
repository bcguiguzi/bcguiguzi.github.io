<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>阿里云点播php上传,媒体上传 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="阿里云点播php上传,媒体上传" />
<meta property="og:description" content="初始化客户端
使用前请先初始化客户端，请参见
获取视频上传地址和凭证
调用CreateUploadVideo接口，完成获取视频上传地址和凭证功能。
接口参数和返回字段请参见/**
* 获取视频上传地址和凭证
* @param client 发送请求客户端
* @return CreateUploadVideoResponse 获取视频上传地址和凭证响应数据
*/
function createUploadVideo($client) {
$request = new vod\CreateUploadVideoRequest();
$request-&gt;setTitle(&#34;Sample Title&#34;);
$request-&gt;setFileName(&#34;videoFile.mov&#34;);
$request-&gt;setDescription(&#34;Video Description&#34;);
$request-&gt;setCoverURL(&#34;http://192.168.0.0/16/tps/TB1qnJ1PVXXXXXCXXXXXXXXXXXX-700-700.png&#34;);
$request-&gt;setTags(&#34;tag1,tag2&#34;);
$request-&gt;setAcceptFormat(&#39;JSON&#39;);
return $client-&gt;getAcsResponse($request);
}
try {
$client = initVodClient(&#39;&#39;, &#39;&#39;);
$uploadInfo = createUploadVideo($client);
var_dump($uploadInfo);
} catch (Exception $e) {
print $e-&gt;getMessage().&#34;\n&#34;;
}
刷新视频上传凭证
调用RefreshUploadVideo接口，完成刷新视频上传凭证功能。
接口参数和返回字段请参见/**
* 刷新视频上传凭证
* @param client 发送请求客户端
* @return RefreshUploadVideoResponse 刷新视频上传凭证响应数据
*/
function refreshUploadVideo($client, $videoId) {" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3a24c2fa66938fb6ca6b444cf0e83524/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-24T17:28:43+08:00" />
<meta property="article:modified_time" content="2021-03-24T17:28:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">阿里云点播php上传,媒体上传</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>初始化客户端</p> 
 <p>使用前请先初始化客户端，请参见</p> 
 <p>获取视频上传地址和凭证</p> 
 <p>调用CreateUploadVideo接口，完成获取视频上传地址和凭证功能。</p> 
 <p>接口参数和返回字段请参见/**</p> 
 <p>* 获取视频上传地址和凭证</p> 
 <p>* @param client 发送请求客户端</p> 
 <p>* @return CreateUploadVideoResponse 获取视频上传地址和凭证响应数据</p> 
 <p>*/</p> 
 <p>function createUploadVideo($client) {<!-- --></p> 
 <p>$request = new vod\CreateUploadVideoRequest();</p> 
 <p>$request-&gt;setTitle("Sample Title");</p> 
 <p>$request-&gt;setFileName("videoFile.mov");</p> 
 <p>$request-&gt;setDescription("Video Description");</p> 
 <p>$request-&gt;setCoverURL("http://192.168.0.0/16/tps/TB1qnJ1PVXXXXXCXXXXXXXXXXXX-700-700.png");</p> 
 <p>$request-&gt;setTags("tag1,tag2");</p> 
 <p>$request-&gt;setAcceptFormat('JSON');</p> 
 <p>return $client-&gt;getAcsResponse($request);</p> 
 <p>}</p> 
 <p>try {<!-- --></p> 
 <p>$client = initVodClient('', '');</p> 
 <p>$uploadInfo = createUploadVideo($client);</p> 
 <p>var_dump($uploadInfo);</p> 
 <p>} catch (Exception $e) {<!-- --></p> 
 <p>print $e-&gt;getMessage()."\n";</p> 
 <p>}</p> 
 <p>刷新视频上传凭证</p> 
 <p>调用RefreshUploadVideo接口，完成刷新视频上传凭证功能。</p> 
 <p>接口参数和返回字段请参见/**</p> 
 <p>* 刷新视频上传凭证</p> 
 <p>* @param client 发送请求客户端</p> 
 <p>* @return RefreshUploadVideoResponse 刷新视频上传凭证响应数据</p> 
 <p>*/</p> 
 <p>function refreshUploadVideo($client, $videoId) {<!-- --></p> 
 <p>$request = new vod\RefreshUploadVideoRequest();</p> 
 <p>$request-&gt;setVideoId($videoId);</p> 
 <p>$request-&gt;setAcceptFormat('JSON');</p> 
 <p>return $client-&gt;getAcsResponse($request);</p> 
 <p>}</p> 
 <p>try {<!-- --></p> 
 <p>$client = initVodClient('', '');</p> 
 <p>$refreshInfo = refreshUploadVideo($client, 'videoId');</p> 
 <p>var_dump($refreshInfo);</p> 
 <p>} catch (Exception $e) {<!-- --></p> 
 <p>print $e-&gt;getMessage()."\n";</p> 
 <p>}</p> 
 <p>获取图片上传地址和凭证</p> 
 <p>调用CreateUploadImage接口，完成获取图片上传地址和凭证功能。</p> 
 <p>接口参数和返回字段请参见/**</p> 
 <p>* 获取图片上传地址和凭证</p> 
 <p>* @param client 发送请求客户端</p> 
 <p>* @return CreateUploadImageResponse 获取图片上传地址和凭证响应数据</p> 
 <p>*/</p> 
 <p>function createUploadImage($client, $imageType, $imageExt) {<!-- --></p> 
 <p>$request = new vod\CreateUploadImageRequest();</p> 
 <p>$request-&gt;setImageType($imageType);</p> 
 <p>$request-&gt;setImageExt($imageExt);</p> 
 <p>$request-&gt;setAcceptFormat('JSON');</p> 
 <p>return $client-&gt;getAcsResponse($request);</p> 
 <p>}</p> 
 <p>try {<!-- --></p> 
 <p>$client = initVodClient('', '');</p> 
 <p>$imageInfo = createUploadImage($client, 'cover', 'jpg');</p> 
 <p>var_dump($imageInfo);</p> 
 <p>} catch (Exception $e) {<!-- --></p> 
 <p>print $e-&gt;getMessage()."\n";</p> 
 <p>}</p> 
 <p>获取辅助媒资上传地址和凭证</p> 
 <p>调用CreateUploadAttachedMedia接口，完成获取辅助媒资上传地址和凭证功能。/**</p> 
 <p>* 获取辅助媒资(水印、字幕等)上传地址和凭证</p> 
 <p>* @param client 发送请求客户端</p> 
 <p>* @return CreateUploadAttachedMediaResponse 获取辅助媒资上传地址和凭证响应数据</p> 
 <p>*/</p> 
 <p>function createUploadAttachedMedia($client) {<!-- --></p> 
 <p>$request = new vod\CreateUploadAttachedMediaRequest();</p> 
 <p>$request-&gt;setBusinessType("watermark");</p> 
 <p>$request-&gt;setMediaExt("gif");</p> 
 <p>$request-&gt;setTitle("this is a sample");</p> 
 <p>return $client-&gt;getAcsResponse($request);</p> 
 <p>}</p> 
 <p>try {<!-- --></p> 
 <p>$client = initVodClient('', '');</p> 
 <p>$result = createUploadAttachedMedia($client);</p> 
 <p>var_dump($result);</p> 
 <p>} catch (Exception $e) {<!-- --></p> 
 <p>print $e-&gt;getMessage()."\n";</p> 
 <p>}</p> 
 <p>URL批量拉取上传</p> 
 <p>调用UploadMediaByURL接口，完成URL批量拉取上传功能。</p> 
 <p>接口参数和返回字段请参见/**</p> 
 <p>* URL批量拉取上传</p> 
 <p>* @param client 发送请求客户端</p> 
 <p>* @return UploadMediaByURLResponse URL批量拉取上传响应数据</p> 
 <p>*/</p> 
 <p>function uploadMediaByURL($client) {<!-- --></p> 
 <p>$request = new vod\UploadMediaByURLRequest();</p> 
 <p>$url = "http://192.168.0.0/16/***.mp4";</p> 
 <p>$request-&gt;setUploadURLs($url);</p> 
 <p>$uploadMetadataList = array();</p> 
 <p>$uploadMetadata = array();</p> 
 <p>$uploadMetadata["SourceUrl"] = $url;</p> 
 <p>$uploadMetadata["Title"] = "upload by url sample";</p> 
 <p>$uploadMetadataList[] = $uploadMetadata;</p> 
 <p>$request-&gt;setUploadMetadatas(json_encode($uploadMetadataList));</p> 
 <p>return $client-&gt;getAcsResponse($request);</p> 
 <p>}</p> 
 <p>try {<!-- --></p> 
 <p>$client = initVodClient('', '');</p> 
 <p>$result = uploadMediaByURL($client);</p> 
 <p>var_dump($result);</p> 
 <p>} catch (Exception $e) {<!-- --></p> 
 <p>print $e-&gt;getMessage()."\n";</p> 
 <p>}</p> 
 <p>注册媒资信息</p> 
 <p>调用RegisterMedia接口，完成注册媒资信息功能。</p> 
 <p>接口参数和返回字段请参见/**</p> 
 <p>* 注册媒资信息</p> 
 <p>* @param client 发送请求客户端</p> 
 <p>* @return RegisterMediaResponse 注册媒资信息响应数据</p> 
 <p>*/</p> 
 <p>function registerMedia($client) {<!-- --></p> 
 <p>$request = new vod\RegisterMediaRequest();</p> 
 <p>$metaDataArray= array();</p> 
 <p>$metaData= array();</p> 
 <p>$metaData["Title"] = "registerMedia by url sample";</p> 
 <p>$metaData["FileURL"] = "https://192.168.0.0/16/vod_sample.mp4";</p> 
 <p>$metaDataArray[] = $metaData;</p> 
 <p>$request-&gt;setRegisterMetadatas(json_encode($metaDataArray));</p> 
 <p>return $client-&gt;getAcsResponse($request);</p> 
 <p>}</p> 
 <p>try {<!-- --></p> 
 <p>$client = initVodClient('', '');</p> 
 <p>$result = registerMedia($client);</p> 
 <p>var_dump($result);</p> 
 <p>} catch (Exception $e) {<!-- --></p> 
 <p>print $e-&gt;getMessage()."\n";</p> 
 <p>}</p> 
 <p>获取URL上传信息</p> 
 <p>调用GetURLUploadInfos接口，完成获取URL上传信息功能。</p> 
 <p>接口参数和返回字段请参见/**</p> 
 <p>* 获取URL上传信息</p> 
 <p>* @param client 发送请求客户端</p> 
 <p>* @return GetURLUploadInfosResponse 获取URL上传信息响应数据</p> 
 <p>*/</p> 
 <p>function getURLUploadInfos($client) {<!-- --></p> 
 <p>$request = new vod\GetURLUploadInfosRequest();</p> 
 <p>// URL列表</p> 
 <p>$urls = array();</p> 
 <p>$urls[] = "http://192.168.0.0/16/sample1.mp4";</p> 
 <p>$urls[] = "http://192.168.0.0/16/sample2.mp4";</p> 
 <p>// 对URL进行编码</p> 
 <p>$uploadURLs = array();</p> 
 <p>foreach ($urls as $url) {<!-- --></p> 
 <p>$uploadURLs[] = urlencode($url);</p> 
 <p>}</p> 
 <p>// 设置上传的URL列表，用逗号分隔</p> 
 <p>$request-&gt;setUploadURLs(implode(",", $uploadURLs));</p> 
 <p>// 也可以传入jobId查询</p> 
 <p>//$request-&gt;setJobIds("jobId1****,jobId2****")</p> 
 <p>return $client-&gt;getAcsResponse($request);</p> 
 <p>}</p> 
 <p>try {<!-- --></p> 
 <p>$client = initVodClient('', '');</p> 
 <p>$result = getURLUploadInfos($client);</p> 
 <p>var_dump($result);</p> 
 <p>} catch (Exception $e) {<!-- --></p> 
 <p>print $e-&gt;getMessage()."\n";</p> 
 <p>}</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9cbf2fc98cdc9a649cd85da1134f5c9e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">把废弃的Kindle改装成自己的Linux开发平台</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c833072d5fe4f74f42d2b861752d084/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">b/s测试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>搭建开放式与认证式个人网站 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="搭建开放式与认证式个人网站" />
<meta property="og:description" content="搭建开放式与认证式个人网站 （一）．设置个人用户主页 开启个人用户主页功能；
【vim /etc/httpd/conf.d/userdir.conf】
编辑/etc/httpd/conf.d/userdir.conf文件，在第17行的UserDir disabled参数前面加上井号（#），表示让httpd服务程序开启个人用户主页功能；同时再把第24行的UserDir public_html参数前面的井号（#）删除（UserDir参数表示网站数据在用户家目录中的保存目录的名称，即public_html目录）；最后，在修改完毕后记得保存，如图所示：
建立主页文件
【useradd linux-yhy】
【cd /home/linux-yhy】
【mkdir public_html】
【echo “This is linux-yhy’s website” &gt; public_html/index.html】
【chmod -Rf 755 /home/linux-yhy】
重启httpd服务程序与验证
【systemctl restart httpd】
修改SELinux安全策略
httpd服务程序在提供个人用户主页功能时，该用户的网站数据目录本身就应该是存放到与这位用户对应的家目录中的，所以不需要修改家目录的SELinux安全上下文。但是，Linux操作系统还有一个域的概念。Linux域可以确保服务程序不执行违规操作，只能本本分分地为用户提供服务。使用getsebool命令查询并过滤出所有与HTTP协议相关的安全策略。其中，off表示禁止状态，on表示允许状态。
【setsebool -P httpd_enable_homedirs=on】
一定要记得在setsebool命令后面加上-P参数，以使修改后的SELinux策略永久生效且立即生效。随后刷新网页。
（二）让通过身份验证的用户访问网页里面的内容 生产密码数据库
使用htpasswd命令生成密码数据库。-c参数表示第一次生成；后面再分别添加密码数据库的存放文件，以及验证要用到的用户名称（该用户不必是系统中已有的本地账户）。
【htpasswd -c /etc/httpd/passwd linux-yhy】
编辑个人用户主页功能的配置文件
【vim /etc/httpd/conf.d/userdir.conf】
33 authuserfile “/etc/httpd/passwd” #刚刚生成的密码验证文件保存路径
34 authname “My privately website” #当用户尝试访问个人用户网站时的提示信息
36 require user linux-yhy #用户进行账户密码登录时需要验证的用户名称
【systemctl retart httpd】
3.访问验证" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/fc8bc1353d3b5585412e476d9f0c2888/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-08T12:37:37+08:00" />
<meta property="article:modified_time" content="2022-11-08T12:37:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">搭建开放式与认证式个人网站</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>搭建开放式与认证式个人网站</h2> 
<h3><a id="_1"></a>（一）．设置个人用户主页</h3> 
<ol><li> <p>开启个人用户主页功能；<br> 【vim /etc/httpd/conf.d/userdir.conf】<br> 编辑/etc/httpd/conf.d/userdir.conf文件，在第17行的UserDir disabled参数前面加上井号（#），表示让httpd服务程序开启个人用户主页功能；同时再把第24行的UserDir public_html参数前面的井号（#）删除（UserDir参数表示网站数据在用户家目录中的保存目录的名称，即public_html目录）；最后，在修改完毕后记得保存，如图所示：<br> <img src="https://images2.imgbox.com/9f/28/8rrPzBDC_o.png" alt="在这里插入图片描述"></p> </li><li> <p>建立主页文件<br> 【useradd linux-yhy】<br> 【cd /home/linux-yhy】<br> 【mkdir public_html】<br> 【echo “This is linux-yhy’s website” &gt; public_html/index.html】<br> 【chmod -Rf 755 /home/linux-yhy】</p> </li><li> <p>重启httpd服务程序与验证<br> 【systemctl restart httpd】</p> </li></ol> 
<p><img src="https://images2.imgbox.com/7c/ac/tRBRs0vu_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>修改SELinux安全策略<br> httpd服务程序在提供个人用户主页功能时，该用户的网站数据目录本身就应该是存放到与这位用户对应的家目录中的，所以不需要修改家目录的SELinux安全上下文。但是，Linux操作系统还有一个域的概念。Linux域可以确保服务程序不执行违规操作，只能本本分分地为用户提供服务。使用getsebool命令查询并过滤出所有与HTTP协议相关的安全策略。其中，off表示禁止状态，on表示允许状态。<br> <img src="https://images2.imgbox.com/25/c8/OVbE6DaA_o.png" alt="在这里插入图片描述"></li></ol> 
<p>【setsebool -P httpd_enable_homedirs=on】<br> 一定要记得在setsebool命令后面加上-P参数，以使修改后的SELinux策略永久生效且立即生效。随后刷新网页。<br> <img src="https://images2.imgbox.com/da/0f/mGIgbRnU_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_34"></a>（二）让通过身份验证的用户访问网页里面的内容</h3> 
<ol><li> <p>生产密码数据库<br> 使用htpasswd命令生成密码数据库。-c参数表示第一次生成；后面再分别添加密码数据库的存放文件，以及验证要用到的用户名称（该用户不必是系统中已有的本地账户）。<br> 【htpasswd -c /etc/httpd/passwd linux-yhy】</p> </li><li> <p>编辑个人用户主页功能的配置文件<br> 【vim /etc/httpd/conf.d/userdir.conf】<br> <img src="https://images2.imgbox.com/c8/fb/nr7gSAwn_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<p>33 authuserfile “/etc/httpd/passwd” #刚刚生成的密码验证文件保存路径<br> 34 authname “My privately website” #当用户尝试访问个人用户网站时的提示信息<br> 36 require user linux-yhy #用户进行账户密码登录时需要验证的用户名称<br> <br></p> 
<p>【systemctl retart httpd】</p> 
<p>3.访问验证<br> <img src="https://images2.imgbox.com/98/18/JBVOARKT_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e1f9568de39eafe654d451c805386e5d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ts学习笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/508747e0d72b800f84052a3b4388ac37/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue3应用API——设置全局属性(app.provide与app.config.globalProperties的区别)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
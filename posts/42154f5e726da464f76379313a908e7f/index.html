<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库基础（面试常考SQL语句） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库基础（面试常考SQL语句）" />
<meta property="og:description" content="一、数据库级及SQL语言简介
1、目前主流数据库
微软：sql server、access
瑞典：mysql
ibm: db2
sybase:sybase
ibm: informix
oracle: oracle
2、SQL语言
DQL-------------数据查询语言
select … From … Where
DML-------------数据操纵语言
insert、update、delete
DDL-------------数据定义语言
create、alter、drop
DCL-------------数据控制语言
commit、rollback、savepoint
二、基本Sql语句
１、表设计 创建表：
create table 表名 (字段 字段类型); 复制表结构及数据：
create table 新表 as select * from 旧表 复制表结构不需要数据：
create table 新表 as select * from 旧表 where 2&lt;&gt;2 查看表结构：desc 表名.
复制表数据：
insert into 目标表 select * from 参考表 伪表：系统中保留的虚拟表，不能更改，也不能删除。
名称：dual 通过伪表显示当前系统时间：select sysdate from dual; 查看指定用户下所有的表" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/42154f5e726da464f76379313a908e7f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-27T21:02:27+08:00" />
<meta property="article:modified_time" content="2021-04-27T21:02:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库基础（面试常考SQL语句）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>一、数据库级及SQL语言简介<br> 1、目前主流数据库<br> 微软：sql server、access<br> 瑞典：mysql<br> ibm: db2<br> sybase:sybase<br> ibm: informix<br> oracle: oracle</p> 
<p>2、SQL语言<br> DQL-------------数据查询语言<br> select … From … Where<br> DML-------------数据操纵语言<br> insert、update、delete<br> DDL-------------数据定义语言<br> create、alter、drop<br> DCL-------------数据控制语言<br> commit、rollback、savepoint</p> 
<p>二、基本Sql语句</p> 
<h6><a id="_34"></a>１、表设计</h6> 
<ul><li> <p><strong>创建表：</strong></p> <pre><code> create table 表名 (字段 字段类型);
</code></pre> </li><li> <p><strong>复制表结构及数据：</strong></p> <pre><code> create table 新表 as select * from 旧表
</code></pre> </li><li> <p><strong>复制表结构不需要数据：</strong></p> <pre><code> create table 新表 as select * from 旧表 where 2&lt;&gt;2
</code></pre> </li><li> <p><strong>查看表结构：desc 表名.</strong></p> </li><li> <p><strong>复制表数据：</strong></p> <pre><code> insert into 目标表 select * from 参考表
</code></pre> </li><li> <p><strong>伪表</strong>：系统中保留的虚拟表，不能更改，也不能删除。</p> <pre><code> 名称：dual
 通过伪表显示当前系统时间：select sysdate from dual;
</code></pre> </li><li> <p><strong>查看指定用户下所有的表</strong></p> <pre><code> SELECT table_name FROM all_tables WHERE owner = upper('用户名');
 注意：用户名必须大写
</code></pre> </li></ul> 
<h6><a id="_65"></a>２、操作字段</h6> 
<ul><li> <p><strong>增加字段:</strong></p> <pre><code> alter table 表名 add (字段名称 字段类型)
</code></pre> </li><li> <p><strong>修改字段：</strong></p> <pre><code> alter table 表名 modify (字段名称 字段类型)
 注意：实际上大部分时间我们修改的是字段类型的大小，而不是类型本身，如果非在改成其它类型，则需要满足兼容性。或者把对应这列数据全部清除。
</code></pre> </li><li> <p><strong>删除字段：</strong></p> <pre><code> alter table 表名 drop column 字段名称
</code></pre> </li></ul> 
<h6><a id="_82"></a>３、表约束</h6> 
<ul><li> <p><strong>约束说明</strong></p> <p><strong>NOT NULL</strong> 指定字段不能包含空值<br> <strong>UNIQUE</strong> 指定字段的值（或字段组合的值）表中所有的行必须唯一<br> <strong>PRIMARY KEY</strong> 表的每行的唯一标识，即主键<br> <strong>FOREIGN KEY</strong> 在字段和引用表的一个字段之间建立并且强制外键关系，即外键<br> <strong>CHECK</strong> 指定一个必须为真的条件</p> </li><li> <p><strong>主键与唯一约束的区别:</strong></p> <p>1.主键只能有一个，而唯一约束可以有多个；<br> 2.主键可以由一列或多列充当，但唯一约束只能一列一列创建；<br> 3.主键不允许为空，而唯一约束在Oracle中可以多次为空，在SQL中唯一约束只能一次为空；</p> <p>NOT NULL:此约束为行级约束，不在能表级约束中定义。</p> </li><li> <p><strong>添加约束：</strong></p> <pre><code> ALTER TABLE 表名 ADD  [CONSTRAINT 约束标识名称]  约束类型(字段名称);
 例：ALTER TABLE stu ADD CONSTRAINT stuid_pk  PRIMARY KEY(stuid);
</code></pre> </li><li> <p><strong>删除约束：</strong></p> <pre><code> ALTER TABLE table
 DROP  PRIMARY KEY | UNIQUE(字段名) | CONSTRAINT 约束名 [CASCADE]
 例：ALTER TABLE stu DROP PRIMARY KEY;
</code></pre> </li></ul> 
<p>－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－-－－－－－－－－－－－－－－-－－－－－－－－－－－－－－－－－－</p> 
<p><strong>示例一：【创建表的同时指定约束】</strong><br> create table 表(<br> 字段 字段类型 CONSTRAINT 约束标识名称 约束类型;<br> );<br> <strong>示例二：【先创建表，后创建约束】</strong><br> ALTER TABLE 表名 ADD CONSTRAINT 约束标识名称 约束类型(字段);<br> 外键约束的创建：<br> alter table table_name add constraint cid_fk foreign key(cid) references classes(cid) 【on delete cascade】</p> 
<p><strong>（主-从）建表规则：</strong><br> 1.先create父表（要有pk或uk)，再create子表（FK)<br> 2.先insert父表，然后insert子表。<br> 3.先delete子表，在delete父表。<br> 4.先drop子表，在drop父表。<br> 父表先于子表存在，子表比父表先消亡。<br> －－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－</p> 
<h6><a id="_131"></a>４、表查询</h6> 
<ul><li> <p><strong>基本查询</strong></p> <pre><code> 语法格式：
 select [列名],... from 表名
</code></pre> </li><li> <p><strong>条件查询(where)</strong></p> <pre><code> 语法格式：
 select [列名],... from 表名  where 条件
</code></pre> </li><li> <p><strong>逻辑运算</strong></p> <pre><code> 操作符包括如下几种：
 	1、算术操作符：算术操作符包括加(+)、减(-)、乘(*)、除(/)
 	2、比较操作符：比较操作符包括 =、!=、&lt;、&gt;、&lt;=、&gt;=、BETWEEN…AND、IN、LIKE 和 IS NULL等
 	3、逻辑操作符：逻辑操作符包括与(AND)、或(OR)和非(NOT)。 
 	4、集合操作符：集合操作符包括冻并集(UNION)、交集(INTERSECT)、剪集(MINUS)
 	5、连接操作符：||   例：SELECT ename || ' is a ' || job FROM emp;
 	集合操作符：多用于数据量比较大的数据局库，运行速度快。
 	1). union
 		该操作符用于取得两个结果集的并集。当使用该操作符时，会自动去掉结果集中重复行。
 		SELECT ename, sal, job FROM emp WHERE sal &gt;3000
 		UNION
 		SELECT ename, sal, job FROM emp WHERE job = 'MANAGER';
</code><pre><code>2).union all
	该操作符与union 相似&amp;#xff0c;但是它不会取消重复行&amp;#xff0c;而且不会排序。
	SELECT ename, sal, job FROM emp WHERE sal &amp;gt;2500
	UNION ALL
	SELECT ename, sal, job FROM emp WHERE job &amp;#61; &amp;#39;MANAGER&amp;#39;;
	
3). intersect
	使用该操作符用于取得两个结果集的交集。
	SELECT ename, sal, job FROM emp WHERE sal &amp;gt;2500
	INTERSECT
	SELECT ename, sal, job FROM emp WHERE job &amp;#61; &amp;#39;MANAGER&amp;#39;;
	
4). minus
	使用改操作符用于取得两个结果集的差集&amp;#xff0c;他只会显示存在第一个集合中&amp;#xff0c;而不
	存在第二个集合中的数据。
	SELECT ename, sal, job FROM emp WHERE sal &amp;gt;2500
	MINUS
	SELECT ename, sal, job FROM emp WHERE job &amp;#61; &amp;#39;MANAGER&amp;#39;;
	&amp;#xff08;MINUS 就是减法的意思&amp;#xff09;
</code></pre>
</pre></li></ul> 
<p>注意： 集合运算中各个集合必须有相同的列数，且类型一致，集合运算的结<br> 果将采用第一个集合的表头作为最终的表头，order by<br> 必须放在每个集合后<br> </p> 
<ul><li> <p><strong>排序</strong></p> <pre><code> 语法格式：<br>
select [列名],… from 表名  where 条件 order by 字段 (desc | asc)<br>
说明：<br>
DESC:表示按降序排序(即：从大到小排序)<br>
ACS：表示按升序排序(即：从小到大排序)<br>
</code></pre> </li><li> <p><strong>函数</strong></p> <pre><code><br>
1、常用的系统函数<br>
1.1 日期函数：<br>
-ADD_MONTHS(d,f):指定时间d，推移f月，得到推移后的时间<br>
d:指定一个时间(需要使用to_date函数转换)<br>
f：在指定时间上推移多少个月<br>
例：在“2010-05-12”时间上推移3个月后的时间<br>
select ADD_MONTHS(to_date('2012-05-12','yyyy-mm-dd'),3) from dual;</code></pre></li><li><p></p> 
<pre><code>	-Months_between(d1,d2):显示两个时间相差的月份
		d1:第一个时间
		d2&amp;#xff1a;第二个时间
		
		注意&amp;#xff1a;必须注意的是&amp;#xff0c;d1与d2都为Date类型&amp;#xff0c;不然会出现错误。
		 须用to_date(&amp;#39;&amp;#39;,&amp;#39;&amp;#39;) 	来转换为日期格式&amp;#xff0c;才能参加计算。
		
		例&amp;#xff1a;计算 2012-12-12 与 2012-2-12 相差的月份。
		SELECT MONTHS_BETWEEN(to_date(&amp;#39;2012-12-12&amp;#39;,&amp;#39;yyyy-MM-dd&amp;#39;),to_date(&amp;#39;2012-2-12&amp;#39;,&amp;#39;yyyy-MM-dd&amp;#39;))
		FROM dual;
		
		
	-last_day(m):返回特定日期所在月份的最后一天
		m:时间
		
		例&amp;#xff1a;计算“2010-10-12”所在月份的最后一天
		SELECT last_day(to_date(&amp;#39;2010-10-12&amp;#39;,&amp;#39;yyyy-mm-dd&amp;#39;)) FROM dual;
	
	-next_day(x,y)用于计算x时间后第一个星期y的时间。
		例子&amp;#xff0c;当前时间是2014-08-15 
		select next_day(to_date(&amp;#39;2014-08-15&amp;#39;,&amp;#39;yyyy-mm-dd&amp;#39;),&amp;#39;星期二&amp;#39;&amp;#xff09;from dual;
		返回的结果是: 2014-08-19
	
	-trunc(date,[fmt])&amp;#xff1a;处理时间
		date:一个日期值
		fmt :日期格式&amp;#xff0c;该日期将由指定的元素格式所截去。忽略它则由最近的日期截去
		
		例&amp;#xff1a;
			trunc(sysdate,&amp;#39;yyyy&amp;#39;) --返回当年第一天.
			trunc(sysdate,&amp;#39;mm&amp;#39;) --返回当月第一天.
			trunc(sysdate,&amp;#39;d&amp;#39;) --返回当前星期的第一天.
			trunc(sysdate,&amp;#39;dd&amp;#39;)--返回当前年月日
			trunc(sysdate, &amp;#39;hh&amp;#39;)--返回当前小时
			trunc(sysdate, &amp;#39;mi&amp;#39;)--返回当前分钟
	
	-trunc&amp;#xff08;number,[decimals]&amp;#xff09;:处理数字
		number:	 待做截取处理的数值
		decimals:指明需保留小数点后面的位数。可选项&amp;#xff0c;忽略它则截去所有的小数部分
		例&amp;#xff1a;
			TRUNC&amp;#xff08;89.985&amp;#xff0c;2&amp;#xff09;&amp;#61;89.98
			TRUNC&amp;#xff08;89.985&amp;#xff09;&amp;#61;89
			TRUNC&amp;#xff08;89.985&amp;#xff0c;-1&amp;#xff09;&amp;#61;80
</code></pre> 
<p>２、常用的字符函数：<br> -lower（string）：转小写<br> 用法：比如将字符“ABC”转为小写<br> select lower('ABC') from dual;<br> 结果：abc</p> 
<pre><code>	-upper&amp;#xff1a;转大写
		用法&amp;#xff1a;比如将字符“abc”转为大写 
		select upper(&amp;#39;abc&amp;#39;) from dual;
		结果&amp;#xff1a;ABC
		
	-length&amp;#xff08;&amp;#xff09;:长度函数
		用法&amp;#xff1a;获取字符“abc”的长度
		select  length(&amp;#39;abc&amp;#39;) from dual;
		结果&amp;#xff1a;3
		注&amp;#xff1a;长度是指字符串的长度 如“中国”为2 “ab”也为2

	-substr&amp;#xff08;char&amp;#xff0c;m&amp;#xff0c;n&amp;#xff09;:截取字符串
		用法&amp;#xff1a;将字符“abcde”中的“cd”进行截取
		select substr(&amp;#39;abcde&amp;#39;, 3 ,2 ) from dual;
		结果&amp;#xff1a;cd
		
	-replace(s1,s2):替换
		用法&amp;#xff1a;将字符“abcde”中的“c”替换为“123”;
		select replace(&amp;#39;abcde&amp;#39;, &amp;#39;c&amp;#39; ,&amp;#39;123&amp;#39; ) from dual;
		结果&amp;#xff1a;ab123de
		
	-concat&amp;#xff08;s1,s2&amp;#xff09;&amp;#xff1a;拼接
		用法&amp;#xff1a;将字符“abc”与字符“de”拼接显示
		select concat(&amp;#39;abc&amp;#39;,&amp;#39;de&amp;#39;) from dual; 
		结果:abcde
		等价于&amp;#xff1a; &amp;#39;abc&amp;#39;||&amp;#39;de&amp;#39;

	lpad( string, padded_length, [ pad_string ] ):指定长度,不够则填充
		用法&amp;#xff1a;将字符“abcde”以10个长度显示&amp;#xff0c;左侧用“X”填充
		select lpad(&amp;#39;abcde&amp;#39;,10,&amp;#39;x&amp;#39;) from dual;
		结果&amp;#xff1a;xxxxxabcde
</code></pre> 
<p>３、数字函数：<br> ceil：往上取整,与小数位的大小无关<br> floor:往下取整，与小数位的大小无关.<br> mod:取余。求模。<br> round:四舍五入。<br> trunc(m,n):</p> 
<p>４、 转换函数：<br> -to_char:日期转化为字符串<br> 例：<br> select to_char(sysdate,'yyyy-mm-dd hh24:mi:ss') as nowTime from dual;<br> select to_char(sysdate,'yyyy') as nowYear from dual; //获取时间的年<br> select to_char(sysdate,'mm') as nowMonth from dual; //获取时间的月<br> select to_char(sysdate,'dd') as nowDay from dual; //获取时间的日<br> select to_char(sysdate,'hh24') as nowHour from dual; //获取时间的时<br> select to_char(sysdate,'mi') as nowMinute from dual; //获取时间的分<br> select to_char(sysdate,'ss') as nowSecond from dual; //获取时间的秒<br> select to_char(sysdate,'day') as nowSecond from dual; //获取时间的星期</p> 
<pre><code>	-to_date:把字符串类型日期转换为date类型日期。
	例&amp;#xff1a;
	select to_date(&amp;#39;2014-02-11&amp;#39;,&amp;#39;yyyy-mm-dd&amp;#39;) from dual
	
	sysdata当前日期

	-to_number:把某种类型转换为数字类型。
	注意&amp;#xff1a;如果字符类型的内容是数据&amp;#xff0c;则可以实现自动转换为数字类型
</code></pre> 
<p>５、 其它函数：<br> -NUL函数：把数字类型为null的值转换为0;<br> 结构：<br> nvl(字段名称,0);<br> nvl(comm,0);<br> 转换之后，可以实现算术运算。</p> 
<pre><code>		-decode函数:
			decode(参数一,参数二,参数三,....);
			参数一&amp;#xff1a;字段名称
			参数二&amp;#xff1a;参数一字段对应的内容。
			参数三&amp;#xff1a;把参数一字段对应的内容替换成其它的内容。
			示例&amp;#xff1a;select decode(JOB,&amp;#39;CLERK&amp;#39;,&amp;#39;业务员&amp;#39;) from emp;
</code></pre> 
<p>６、聚合函数：MAX、MIN、SUM、AVG、COUNT<br> -AVG :返回指定组中的平均值。<br> -COUNT:返回指定组中项目的数量。<br> -MAX:返回指定数据的最大值。<br> -MIN:返回指定数据的最小值。<br> -SUM:返回指定数据的和，只能用于数字列。<br> </p> 
<p>参考<br> <a href="https://blog.csdn.net/qq_41751237/article/details/102303643">https://blog.csdn.net/qq_41751237/article/details/102303643</a></p></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8c9f8305a5b27ed6bdb27e2d396e4539/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Quartz 任务延迟执行了为什么不算misfire</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce8e1478c4215dc28457a76ba08cb991/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java 基础编程练习1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
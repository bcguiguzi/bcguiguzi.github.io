<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>kali linux 通过粘贴板攻击对方服务器 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="kali linux 通过粘贴板攻击对方服务器" />
<meta property="og:description" content="目录
一、粘贴板中毒攻击原理
二、Pastejacker 攻击工具简介
三、安装Pastejacker
四、Pastejacker结合MSF拿到目标shell权限
一、粘贴板中毒攻击原理 该工具的主要目的是自动化攻击，将此攻击中使用的所有已知技巧收集在一个地方和一项自动化工作，因为在搜索后发现没有工具可以正确地完成这项工作方式现在因为这种攻击取决于用户将粘贴什么，将 Metasploit 网络交付模块的想法实现到工具中，所以当用户粘贴到终端时，你会在他的设备上获得 meterpreter 会话。
换句话说，当我们在自己电脑上的一个网站上复制一条看似正常的命令时，但事实上那个网站在背后偷偷的篡改了我们粘贴的内容，我以为我复制了一条正常的命令，但事实上我复制到粘贴板上的命令，却是一串恶意代码，这就是恶意的网站搭建者，他欺骗我们最终用户访问他的恶意网站，然后通过我们在他网站上的键盘和鼠标操作，将恶意的内容注入到我们本地的剪贴板当中，这种攻击方式，我们就成为粘贴劫持攻击。
二、Pastejacker 攻击工具简介 模拟剪贴板劫持对目标进行攻击。
https://github.com/D4Vinci/PasteJacker
简而言之，粘贴劫持是恶意网站用来控制您计算机的剪贴板并在您不知情的情况下将其内容更改为有害内容的一种方法。
所以在这里所做的是自动化原始攻击并添加另外两个技巧来欺骗用户，使用 HTML 和 CSS将讨论它然后添加 meterpreter 会话
三、安装Pastejacker 安装 Pastejacker 工具
git clone https://github.com/D4Vinci/PasteJacker.git 注意Kali Linux 默认安装了 Python 2.x 和 Python 3.x 版本，可以按照以下步骤在 Kali 中切换到 Python 3：
sudo update-alternatives --install /usr/bin/python python /usr/bin/python2*
sudo update-alternatives --install /usr/bin/python python /usr/bin/python3*
这将把 /usr/bin/python 链接到 Python 2.7 和 Python 3 之间进行切换。您可以使用以下命令来切换到 Python 3：
sudo update-alternatives --config python" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3127499bdfb19942d006e931d25a12dc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-12T22:36:16+08:00" />
<meta property="article:modified_time" content="2023-03-12T22:36:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">kali linux 通过粘贴板攻击对方服务器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%B2%98%E8%B4%B4%E6%9D%BF%E4%B8%AD%E6%AF%92%E6%94%BB%E5%87%BB%E5%8E%9F%E7%90%86-toc" style="margin-left:80px;"><a href="#%E4%B8%80%E3%80%81%E7%B2%98%E8%B4%B4%E6%9D%BF%E4%B8%AD%E6%AF%92%E6%94%BB%E5%87%BB%E5%8E%9F%E7%90%86" rel="nofollow">一、粘贴板中毒攻击原理</a></p> 
<p id="%E4%BA%8C%E3%80%81Pastejacker%20%E6%94%BB%E5%87%BB%E5%B7%A5%E5%85%B7%E7%AE%80%E4%BB%8B-toc" style="margin-left:80px;"><a href="#%E4%BA%8C%E3%80%81Pastejacker%20%E6%94%BB%E5%87%BB%E5%B7%A5%E5%85%B7%E7%AE%80%E4%BB%8B" rel="nofollow">二、Pastejacker 攻击工具简介</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85Pastejacker-toc" style="margin-left:80px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85Pastejacker" rel="nofollow">三、安装Pastejacker</a></p> 
<p id="%E5%9B%9B%E3%80%81Pastejacker%E7%BB%93%E5%90%88MSF%E6%8B%BF%E5%88%B0%E7%9B%AE%E6%A0%87shell%E6%9D%83%E9%99%90-toc" style="margin-left:80px;"><a href="#%E5%9B%9B%E3%80%81Pastejacker%E7%BB%93%E5%90%88MSF%E6%8B%BF%E5%88%B0%E7%9B%AE%E6%A0%87shell%E6%9D%83%E9%99%90" rel="nofollow">四、Pastejacker结合MSF拿到目标shell权限</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h4 style="margin-left:0px;text-align:justify;">一、粘贴板中毒攻击原理</h4> 
<p style="margin-left:0;text-align:justify;">该工具的主要目的是自动化攻击，将此攻击中使用的所有已知技巧收集在一个地方和一项自动化工作，因为在搜索后发现没有工具可以正确地完成这项工作方式现在因为这种攻击取决于用户将粘贴什么，将 Metasploit 网络交付模块的想法实现到工具中，所以当用户粘贴到终端时，你会在他的设备上获得 meterpreter 会话。</p> 
<p style="margin-left:0;text-align:justify;">换句话说，当我们在自己电脑上的一个网站上复制一条看似正常的命令时，但事实上那个网站在背后偷偷的篡改了我们粘贴的内容，我以为我复制了一条正常的命令，但事实上我复制到粘贴板上的命令，却是一串恶意代码，这就是恶意的网站搭建者，他欺骗我们最终用户访问他的恶意网站，然后通过我们在他网站上的键盘和鼠标操作，将恶意的内容注入到我们本地的剪贴板当中，这种攻击方式，我们就成为粘贴劫持攻击。</p> 
<h4 id="%E4%BA%8C%E3%80%81Pastejacker%20%E6%94%BB%E5%87%BB%E5%B7%A5%E5%85%B7%E7%AE%80%E4%BB%8B" style="margin-left:0px;text-align:justify;">二、Pastejacker 攻击工具简介</h4> 
<p style="margin-left:0;text-align:justify;">模拟剪贴板劫持对目标进行攻击。</p> 
<p style="margin-left:0;text-align:justify;">https://github.com/D4Vinci/PasteJacker</p> 
<p style="margin-left:0;text-align:justify;">简而言之，粘贴劫持是恶意网站用来控制您计算机的剪贴板并在您不知情的情况下将其内容更改为有害内容的一种方法。</p> 
<p style="margin-left:0;text-align:justify;">所以在这里所做的是自动化原始攻击并添加另外两个技巧来欺骗用户，使用 HTML 和 CSS将讨论它然后添加 meterpreter 会话</p> 
<h4 id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85Pastejacker" style="margin-left:0px;text-align:justify;">三、安装Pastejacker</h4> 
<p style="margin-left:0;text-align:justify;">安装 Pastejacker 工具</p> 
<pre><code>git clone https://github.com/D4Vinci/PasteJacker.git</code></pre> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="226" src="https://images2.imgbox.com/80/bb/TkmrhhlV_o.png" width="832"></p> 
<p style="margin-left:0;text-align:justify;">注意Kali Linux 默认安装了 Python 2.x 和 Python 3.x 版本，可以按照以下步骤在 Kali 中切换到 Python 3：</p> 
<p style="margin-left:0;text-align:justify;">sudo update-alternatives --install /usr/bin/python python /usr/bin/python2*<br> sudo update-alternatives --install /usr/bin/python python /usr/bin/python3*<br> 这将把 <code>/usr/bin/python</code> 链接到 Python 2.7 和 Python 3 之间进行切换。您可以使用以下命令来切换到 Python 3：</p> 
<p style="margin-left:0;text-align:justify;">sudo update-alternatives --config python</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="626" src="https://images2.imgbox.com/89/8b/urnQv4e2_o.png" width="1200"></p> 
<p> </p> 
<p></p> 
<p style="margin-left:0;text-align:justify;">安装pip</p> 
<pre><code>wget https://bootstrap.pypa.io/get-pip.py</code></pre> 
<pre><code>python3 get-pip.py</code></pre> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="470" src="https://images2.imgbox.com/0e/59/NznuUQxF_o.png" width="832"></p> 
<p style="margin-left:0;text-align:justify;">安装PasteJacker</p> 
<pre><code>python3 -m pip install ./PasteJacker</code></pre> 
<p><img alt="" height="558" src="https://images2.imgbox.com/63/0c/B1xUOnFN_o.png" width="832"></p> 
<h4 id="%E5%9B%9B%E3%80%81Pastejacker%E7%BB%93%E5%90%88MSF%E6%8B%BF%E5%88%B0%E7%9B%AE%E6%A0%87shell%E6%9D%83%E9%99%90" style="margin-left:0px;text-align:justify;">四、Pastejacker结合MSF拿到目标shell权限</h4> 
<p style="margin-left:0;text-align:justify;">进入Pastejacker安装路径：</p> 
<pre><code>cd /usr/local/lib/python3.9/dist-packages/PasteJacker/Core</code></pre> 
<p> <img alt="" height="340" src="https://images2.imgbox.com/7e/80/0eAkcc0H_o.png" width="832"></p> 
<pre><code>vim updater.py</code></pre> 
<p> <img alt="" height="502" src="https://images2.imgbox.com/14/8f/WPPIX7vz_o.png" width="832"></p> 
<p style="margin-left:0;text-align:justify;">按i进入编辑模式把选中的内容按D删除。按ESC-- ：wq保存退出</p> 
<p style="margin-left:0;text-align:justify;">运行工具 ：<strong>pastejacker</strong></p> 
<p> <img alt="" height="488" src="https://images2.imgbox.com/27/38/ilsVrL5P_o.png" width="832"></p> 
<p style="margin-left:0;text-align:justify;"><strong>选择：1（Windows）</strong></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="504" src="https://images2.imgbox.com/60/74/epCqjMqm_o.png" width="832"></p> 
<p><strong>选择：1</strong></p> 
<p><img alt="" height="364" src="https://images2.imgbox.com/35/71/2IfL4KYn_o.png" width="832"></p> 
<p style="margin-left:0;text-align:justify;">选择：1-- TCP协议的后渗透模块</p> 
<p style="margin-left:0;text-align:justify;">然后输入本地IP</p> 
<p><img alt="" height="232" src="https://images2.imgbox.com/a3/52/ZONPHlKy_o.png" width="832"> 端口自己设定或者默认回车就可以了 </p> 
<p><img alt="" height="272" src="https://images2.imgbox.com/8e/db/okQ7kyks_o.png" width="832"> 选择：2；服务端口默认80回车</p> 
<p><img alt="" height="262" src="https://images2.imgbox.com/f8/2f/BQLP65UA_o.png" width="832"></p> 
<p>输入一些文字内容访问攻击者IP时候会出现浏览器页面上</p> 
<p><img alt="" height="194" src="https://images2.imgbox.com/4f/3d/RNnKJBgY_o.png" width="832"> 这时候服务已开启……</p> 
<p style="margin-left:0;text-align:justify;">新建一个终端进入pastejacker文件夹</p> 
<pre><code>cd .pastejacker/</code></pre> 
<p> 利用MSF启动pastejacker 设置好的文件包（msf_handler.rc），该文件是在 pastejacker 程序设置而保存下来的操作，直接使用该文件即可，不需要去手动设置</p> 
<pre><code>msfconsole -r msf_handler.rc</code></pre> 
<p><img alt="" height="394" src="https://images2.imgbox.com/ae/c9/cXRW37Xu_o.png" width="832"> 到Windows受害者端访问kali攻击者的IP地址</p> 
<p><img alt="" height="388" src="https://images2.imgbox.com/b0/f6/Nr9q62di_o.png" width="832"></p> 
<p>复制内容粘贴到cmd命令窗口</p> 
<p><img alt="" height="502" src="https://images2.imgbox.com/d5/0c/0El6Djr2_o.png" width="832"> 查看目标列表</p> 
<pre><code>sessions</code></pre> 
<p><img alt="" height="276" src="https://images2.imgbox.com/9f/30/y8bPSanH_o.png" width="832"></p> 
<p>选中列表中的第一个，如果有多个粘贴运行了剪贴板可在列表中选其中一个进行后渗透 </p> 
<pre><code>sessions -i 1</code></pre> 
<p> <img alt="" height="118" src="https://images2.imgbox.com/78/c4/jKOET9mT_o.png" width="832"></p> 
<pre><code>shell  //获取shell
chcp 65001  //解决乱码</code></pre> 
<p> <img alt="" height="204" src="https://images2.imgbox.com/b0/e9/1RL2pTGi_o.png" width="832"></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7e658b2a361163c8f001d5d2eaaf2b85/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C/C&#43;&#43;专栏】cJSON的API介绍和使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e804b2203d1bb3065face5fff9813254/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序如何进行反编译详细教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
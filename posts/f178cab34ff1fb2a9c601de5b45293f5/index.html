<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JetsonNano国产套件成功部署YoloV5手把手图解教程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JetsonNano国产套件成功部署YoloV5手把手图解教程" />
<meta property="og:description" content="2022年是新冠疫情的第三个年头，各行各业都不太景气赚钱越来越难了。为了让自己别太消沉，我开始找些有兴趣的事情来搞一下。于是在笔记本上部署了YoloV5，训练了几个模型，本意就是做着玩，没想到其中有些功能被朋友看上了，要部署一套试用。这对我来说就有点麻烦了，直接给他放个工控机成本有点高而且不太专业，从网上查了一下，发现原来还有jetson-nano这个东西，价格不贵体积还小，感觉正适合我，就打算入手一个。结果一打听，Nvidia原厂的主板没货而且挺贵。国产jetson-nano套件有货，价格也相对便宜一些。我抱着尝试的想法买了一块，折腾两周后终于练成神功，成功部署、运行了YoloV5。这期间遇到不少困难，跟卖家有过多次沟通，人家很配合，但因为没有客户在他们这个板子上部署过YoloV5，所以无法提供详细的教程。为了感谢卖家的帮助，同时也为了让自己以后再搭建部署的时候能有个依据，本人以注册CSDN后最为认真的态度制作了以下教程，希望能帮助到有相同需求的朋友。
首先是准备工作，我的主板如下图：
产品名称：Jetson NX国产套件
型号/规格：P3668
买主板的时候只是一个裸板，风扇、电源适配器、Wifi模块都是单买的，卖家就有，建议一次采购好，要不后面很麻烦（跟老板套套磁也没准能他送给你，别说是我说的哟^_^）。我就忘记了电源适配器的事，结果老板很仗义，直接送个我了一个。电源适配器是12V，48W的，输入100V~240V 5A 50/60Hz，输出12V-4A，可能在市面上很常见，我不懂硬件所以没有自己去找，直接跟老板要的，老板很痛快直接送给我一个，但是快递进北京之前要统一消杀，结果耽误了好几天时间。
下图就是完整的jetson-nano套件三大件，有了这些就能开机、联网了。当然Wifi模块不是必须的，主要看你的网络环境。
这里我再补充个重要的事情，咱们这个主板的镜像是ubuntu18.4，不能装其他操作系统，主板自带的存储空间是16G，但是ubuntu系统镜像上去之后就已经占用14G&#43;了，留给咱们部署的空间只有1G&#43;。搭建YoloV5环境还要安装、更新很多包，1G&#43;空间肯定是不够的，所以建议大家提前采购个固态硬盘，一定要买M.2接口的，买错了用不了。我买的是金士顿250G SSD固态硬盘 M.2结口（NVMe协议），大概200元出头。咱们搭建环境之前得先把操作系统从主板自带的存储空间迁移到自己的固态硬盘上，这样才有足够的空间部署和运行YoloV5，我后面的教程里会详细的教你怎么迁移。另外这个Jetson NX国产套件还能插tf卡，但是tf卡不能用来迁移操作系统，只能作为扩展空间使用。由于我250G的固态硬盘已经够用了，所以就没有再插tf卡。下图就是我买的固态硬盘：
好了，书归正传，下面就要正式开始搭建环境了。拿到Jetson NX国产套件之后，老板给我发了一个《Jetson-Nano 国产套件使用手册》的PDF文档，里面介绍了怎么刷机和安装常用软件，介绍的挺详细，但是没有说怎么部署YoloV5，而且里面提供的刷机包还有问题，刷了之后进不去ubuntu系统，所以如果你只是想部署YoloV5，果断放弃这个文档吧，按照我的教程向下进行就可以了。我发现文档里面的刷机包有问题之后找老板反应，老板给我了一个新的刷机包，经过测试是正常的。我把百度网盘的地址放出来，如果下载不了啦，请大家给我留言。
链接：https://pan.baidu.com/s/1Yz7U7gr7yUSXSa4yGjj0vQ
提取码：59ks
现在要开始刷机了，Jetson-Nano 国产套件的快递盒子里除了主板之外，还有一个小塑料袋，装着一根杜邦线、一个跳线帽和一根刷机线。杜邦线我不知道是干嘛用的，跳线帽会用到，千万别弄丢了。下图就是随主板一起快递来的杜邦线和跳线帽：
刷机前，主板先不要通电，用跳线帽把主板上的FC REC和GND短接起来，如下图：
然后找一台安装了Ubuntu18.04系统的电脑（如果你没有ubuntu系统的电脑可以自己安装一下，非常方便，没弄做过的朋友参考这两篇文章https://blog.csdn.net/fu6543210/article/details/79722615，https://blog.csdn.net/syp_net/article/details/108738198，我就是第一次装ubuntu，很顺利就弄好了。除了直接安装外，还可以做虚拟机安装，我找了个旧电脑直接装上了就没做虚拟机，有兴趣的朋友可以研究一下怎么用虚机安装）。然后用刷机线把Jetson-Nano 国产套件和电脑连接起来，如下图：
现在用这台ubuntu系统的电脑去下载前面百度网盘的镜像包，我是在windows上下载完，用U盘传到ubuntu电脑上面的。下载地址这里再发一遍：
链接：https://pan.baidu.com/s/1Yz7U7gr7yUSXSa4yGjj0vQ
提取码：59ks
下载后会看到下面6个文件：
打开readme.txt参考，先将文件合并：
cat JetPack_4.6_Linux_JETSON_NANO_TARGETS.tar.gz* &gt; JetPack4.6_Linux_JETSON_NANO_TARGETS.tar.gz
文件合并后会多出来一个叫做JetPack4.6_Linux_JETSON_NANO_TARGETS.tar.gz的文件。如下图：
然后解压这个文件：
sudo tar -zxvf JetPack4.6_Linux_JETSON_NANO_TARGETS.tar.gz
执行完成后，会出现一个新的目录，如下图：
现在给Jetson-Nano 国产套件插上电源适配器，插上之后主板上会亮起绿的的小灯。如下图：
在Ubuntu18.04的电脑上打开一个终端，测试Jetson-Nano 国产套件与电脑的连接情况。
输入lsusb命令，如果出现Nvidia Corp.就说明已经连接成功，可以开始下一步了。如下图：
从终端进入前面创建的JetPack4.6_Linux_JETSON_NANO_TARGETS/ Linux_for_Tegra这个目录下面，执行脚本刷机：
sudo ./flash.sh -r jetson-nano-devkit-emmc mmcblk0p1
刷机的时间比较长，但是和后面要进行的操作比起来，就算是挺快的了。当终端显示
*** The target t210ref has been flashed successfully. ***
Reset the board to boot from internal eMMC." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f178cab34ff1fb2a9c601de5b45293f5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-10T15:50:26+08:00" />
<meta property="article:modified_time" content="2022-05-10T15:50:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JetsonNano国产套件成功部署YoloV5手把手图解教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;text-align:left;">2022年是新冠疫情的第三个年头，各行各业都不太景气赚钱越来越难了。为了让自己别太消沉，我开始找些有兴趣的事情来搞一下。于是在笔记本上部署了YoloV5，训练了几个模型，本意就是做着玩，没想到其中有些功能被朋友看上了，要部署一套试用。这对我来说就有点麻烦了，直接给他放个工控机成本有点高而且不太专业，从网上查了一下，发现原来还有jetson-nano这个东西，价格不贵体积还小，感觉正适合我，就打算入手一个。结果一打听，Nvidia原厂的主板没货而且挺贵。国产jetson-nano套件有货，价格也相对便宜一些。我抱着尝试的想法买了一块，折腾两周后终于练成神功，成功部署、运行了YoloV5。这期间遇到不少困难，跟卖家有过多次沟通，人家很配合，但因为没有客户在他们这个板子上部署过YoloV5，所以无法提供详细的教程。为了感谢卖家的帮助，同时也为了让自己以后再搭建部署的时候能有个依据，本人以注册CSDN后最为认真的态度制作了以下教程，希望能帮助到有相同需求的朋友。</p> 
<p style="margin-left:0;text-align:left;">首先是准备工作，我的主板如下图：</p> 
<p style="margin-left:0;text-align:left;">产品名称：Jetson NX国产套件</p> 
<p style="margin-left:0;text-align:left;">型号/规格：P3668</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="491" src="https://images2.imgbox.com/05/b9/Y5L6KWW6_o.png" width="1090"></p> 
<p style="margin-left:0;text-align:left;">买主板的时候只是一个裸板，风扇、电源适配器、Wifi模块都是单买的，卖家就有，建议一次采购好，要不后面很麻烦（跟老板套套磁也没准能他送给你，别说是我说的哟^_^）。我就忘记了电源适配器的事，结果老板很仗义，直接送个我了一个。电源适配器是12V，48W的，输入100V~240V 5A 50/60Hz，输出12V-4A，可能在市面上很常见，我不懂硬件所以没有自己去找，直接跟老板要的，老板很痛快直接送给我一个，但是快递进北京之前要统一消杀，结果耽误了好几天时间。</p> 
<p style="margin-left:0;text-align:left;">下图就是完整的jetson-nano套件三大件，有了这些就能开机、联网了。当然Wifi模块不是必须的，主要看你的网络环境。</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/8a/68/h7LmITgU_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ba/3d/pCdUpjAA_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">这里我再补充个重要的事情，咱们这个主板的镜像是ubuntu18.4，不能装其他操作系统，主板自带的存储空间是16G，但是ubuntu系统镜像上去之后就已经占用14G+了，留给咱们部署的空间只有1G+。搭建YoloV5环境还要安装、更新很多包，1G+空间肯定是不够的，所以建议大家提前采购个固态硬盘，一定要买M.2接口的，买错了用不了。我买的是金士顿250G SSD固态硬盘 M.2结口（NVMe协议），大概200元出头。咱们搭建环境之前得先把操作系统从主板自带的存储空间迁移到自己的固态硬盘上，这样才有足够的空间部署和运行YoloV5，我后面的教程里会详细的教你怎么迁移。另外这个Jetson NX国产套件还能插tf卡，但是tf卡不能用来迁移操作系统，只能作为扩展空间使用。由于我250G的固态硬盘已经够用了，所以就没有再插tf卡。下图就是我买的固态硬盘：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/e5/84/mfN07Z4L_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">好了，书归正传，下面就要正式开始搭建环境了。拿到Jetson NX国产套件之后，老板给我发了一个《Jetson-Nano 国产套件使用手册》的PDF文档，里面介绍了怎么刷机和安装常用软件，介绍的挺详细，但是没有说怎么部署YoloV5，而且里面提供的刷机包还有问题，刷了之后进不去ubuntu系统，所以如果你只是想部署YoloV5，果断放弃这个文档吧，按照我的教程向下进行就可以了。我发现文档里面的刷机包有问题之后找老板反应，老板给我了一个新的刷机包，经过测试是正常的。我把百度网盘的地址放出来，如果下载不了啦，请大家给我留言。</p> 
<p style="margin-left:0;text-align:left;">链接：https://pan.baidu.com/s/1Yz7U7gr7yUSXSa4yGjj0vQ</p> 
<p style="margin-left:0;text-align:left;">提取码：59ks</p> 
<p style="margin-left:0;text-align:left;">现在要开始刷机了，Jetson-Nano 国产套件的快递盒子里除了主板之外，还有一个小塑料袋，装着一根杜邦线、一个跳线帽和一根刷机线。杜邦线我不知道是干嘛用的，跳线帽会用到，千万别弄丢了。下图就是随主板一起快递来的杜邦线和跳线帽：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ae/12/XEKPJFmz_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">刷机前，主板先不要通电，用跳线帽把主板上的FC REC和GND短接起来，如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="723" src="https://images2.imgbox.com/af/e6/2hR2uQBI_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">然后找一台安装了Ubuntu18.04系统的电脑（如果你没有ubuntu系统的电脑可以自己安装一下，非常方便，没弄做过的朋友参考这两篇文章<a href="https://blog.csdn.net/fu6543210/article/details/79722615%EF%BC%8Chttps:/blog.csdn.net/syp_net/article/details/108738198" title="https://blog.csdn.net/fu6543210/article/details/79722615，https://blog.csdn.net/syp_net/article/details/108738198">https://blog.csdn.net/fu6543210/article/details/79722615，https://blog.csdn.net/syp_net/article/details/108738198</a>，我就是第一次装ubuntu，很顺利就弄好了。除了直接安装外，还可以做虚拟机安装，我找了个旧电脑直接装上了就没做虚拟机，有兴趣的朋友可以研究一下怎么用虚机安装）。然后用刷机线把Jetson-Nano 国产套件和电脑连接起来，如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/7c/f0/fZYsj7Nv_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在用这台ubuntu系统的电脑去下载前面百度网盘的镜像包，我是在windows上下载完，用U盘传到ubuntu电脑上面的。下载地址这里再发一遍：</p> 
<p style="margin-left:0;text-align:left;">链接：https://pan.baidu.com/s/1Yz7U7gr7yUSXSa4yGjj0vQ</p> 
<p style="margin-left:0;text-align:left;">提取码：59ks</p> 
<p style="margin-left:0;text-align:left;">下载后会看到下面6个文件：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ae/14/lXuatLIm_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">打开readme.txt参考，先将文件合并：</p> 
<p style="margin-left:0;text-align:left;">cat JetPack_4.6_Linux_JETSON_NANO_TARGETS.tar.gz* &gt; JetPack4.6_Linux_JETSON_NANO_TARGETS.tar.gz</p> 
<p style="margin-left:0;text-align:left;">文件合并后会多出来一个叫做JetPack4.6_Linux_JETSON_NANO_TARGETS.tar.gz的文件。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/52/e7/8N6TguEp_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">然后解压这个文件：</p> 
<p style="margin-left:0;text-align:left;">sudo tar -zxvf JetPack4.6_Linux_JETSON_NANO_TARGETS.tar.gz</p> 
<p style="margin-left:0;text-align:left;">执行完成后，会出现一个新的目录，如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ac/16/2i0Sxe7M_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在给Jetson-Nano 国产套件插上电源适配器，插上之后主板上会亮起绿的的小灯。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/d4/73/xEtESnyZ_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">在Ubuntu18.04的电脑上打开一个终端，测试Jetson-Nano 国产套件与电脑的连接情况。</p> 
<p style="margin-left:0;text-align:left;">输入lsusb命令，如果出现Nvidia Corp.就说明已经连接成功，可以开始下一步了。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ab/09/86f1muQt_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">从终端进入前面创建的JetPack4.6_Linux_JETSON_NANO_TARGETS/ Linux_for_Tegra这个目录下面，执行脚本刷机：</p> 
<p style="margin-left:0;text-align:left;">sudo ./flash.sh -r jetson-nano-devkit-emmc mmcblk0p1</p> 
<p style="margin-left:0px;text-align:center;"><img alt="" src="https://images2.imgbox.com/39/9c/Td4JAvdj_o.png"></p> 
<p>刷机的时间比较长，但是和后面要进行的操作比起来，就算是挺快的了。当终端显示</p> 
<p style="margin-left:0;text-align:left;">*** The target t210ref has been flashed successfully. ***</p> 
<p style="margin-left:0;text-align:left;">Reset the board to boot from internal eMMC.</p> 
<p style="margin-left:0;text-align:left;">就完成刷机了。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/de/15/sJgwcus8_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">把Jetson-Nano 国产套件的HDMI口连接到一台显示器上，能看到主板的系统已经刷好了。如下图：</p> 
<p style="margin-left:0px;text-align:center;"><img alt="" src="https://images2.imgbox.com/b1/76/iW6eHrtA_o.png"></p> 
<p>好了，如果你也看到这个界面就说明刷机成功了。现在给你的Jetson-Nano 国产套件插上鼠标、键盘和Wifi模块。然后关掉主板和刚才刷机用的Ubuntu电脑，注意是通过操作系统关机（power off），不是直接断电啊，关机完成后主板上面的绿灯会自己熄灭，此时测试拔掉主板的电源适配器。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/10/5b/Yqninvi9_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">到这里，你刷机用的Ubuntu18.04这台电脑就完成了他的历史使命，可以关机了。咱们后面的操作再也不会用到它了。关机后拔掉连接在Jetson-Nano 国产套件上的刷机线，再取掉主板上的连接FC REC和GND的短接帽。这个不太好取，用手基本上弄不下来，建议用镊子加下来，别把引脚弄坏了。然后把咱们采购的固态硬盘插在主板上，接口在主板的底下。插上之后就像下图这样：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/39/aa/iAPZeDQd_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在Jetson-Nano 国产套件已经准备就绪，可以开机啦。主板没有开关，把电源适配器插上就开机了。开机后主板上的绿灯会亮起来，屏幕也会进入登陆界面。可以看到主板用户是nvidia，点击一下输入密码。默认密码也是nvidia。输入完密码后按回车，主板进入操作系统。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/38/82/y8r3eJ1U_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">说实话，我还是挺喜欢nvidia这个绿色桌面背景的，很有冲击力，叫上帝之眼是吧？进入系统之后，我们先要让主板能够上网。点击右上角的箭头，从下拉菜单中找到自己的Wifi网络，然后输入密码，点击Connect建立连接。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="864" src="https://images2.imgbox.com/86/06/W1CNnVnq_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">正常的话，主板现在就应该可以联网了。咱们下面要开始挂载固态硬盘了。点击左上角的Search your computer，输入disks。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="723" src="https://images2.imgbox.com/86/c5/jN6kU5b8_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">点击搜索出来的Disks进入这个APP。可以看到最上面就是我250G的固态硬盘，下面那个SD Card Reader DG4016就是主板自带的16G存储空间。咱们选中新插入的这块250G硬盘（橙色表示选中状态，我这个默认就选中了，）。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/bd/9a/zoc7jVpg_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">在键盘上按组合键ctrl+f进入格式化界面。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ee/45/3Wu0leOn_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">不用改选项，直接点Format按钮就行了。格式化前先进行确认。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/c1/0c/OxWb2bDT_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">可以看到，选中的是250G的金士顿英硬盘。确定硬盘选择没问题，直接点击Format。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/19/e8/ltVAk6bh_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">输入nvidia用户的密码，然后点击authenticate。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/59/12/K5TSI4m6_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">这个格式化的过程非常快，一瞬间就执行完了。现在咱们250G的固态硬盘已经格式化好了，准备开始分区，点击volumes下面的+加号创建分区（Create partition unallocated space），点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/d1/f4/T9XM9mAd_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">这里创建分区，我只分了一个区，大小是250G，所以直接点击Next就可以了。如果要把固态硬盘分成多个区，根据自己的想法调整每个区的大小就可以了。分配好区的大小点击Next。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/8f/24/pWqCrriy_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">这里输入卷的名称，咱们就命名成为ssd吧。在Volumes Name里面输入ssd，然后点击Create。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/76/68/ifnz1hzI_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">这里输入nvidia用户的密码，按下authenticate再次进行确认。此时分区创建成功，准备进行挂载。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/37/e5/Ym6NWG3C_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">可以看到，这个界面volumes的下面有个小三角，类似播放器的play键（Mount selected partition），点击它挂载这个分区。点击后，小三角变成正方形，类似播放器的stop键。点击后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/f9/12/ifLODFIa_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在咱们250G的金士顿固态硬盘已经挂载到Jetson-Nano 国产套件上了。打开终端验证一下，输入命令</p> 
<p style="margin-left:0;text-align:left;">df -lh</p> 
<p style="margin-left:0;text-align:left;">显示如下：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/e2/e1/OE1dA5u9_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">可以看到我们250G的硬盘挂载到了/media/nvidia/ssd这个目录下，硬盘设备号是/dev/nvme0n1p1，总空间是229G，目前可用空间是217G。而咱们Jetson-Nano 国产套件上自带的存储空间，设备号是/dev/mmcblkop1，只有14G，镜像操作系统已经使用了12G，目前可用空间只有1.3G了。这点空间根本不足以搭建YoloV5的运行环境。所以下面咱们要开始迁移操作系统了。目的是把操作系统从主板自带存储空间迁移到咱们250G的固态硬盘上面。我们在终端进入到250G固态硬盘的挂载目录下，执行命令：</p> 
<p style="margin-left:0;text-align:left;">git clone <a href="https://github.com/jetsonhacks/rootOnNVMe.git" title="https://github.com/jetsonhacks/rootOnNVMe.git">https://github.com/jetsonhacks/rootOnNVMe.git</a></p> 
<p style="margin-left:0;text-align:left;">这个命令要主板能连接互联网才能执行，执行成功后会在/media/nvidia/ssd下面新增一个rootOnNVMe目录。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/63/38/x3OyE0na_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">进入新创建的rootOnNVMe目录，修改rootOnNVME 文件中的以下三个文件:</p> 
<p style="margin-left:0;text-align:left;">copy-rootfs-ssd.sh</p> 
<p style="margin-left:0;text-align:left;">data/setssdroot.sh</p> 
<p style="margin-left:0;text-align:left;">data/setssdroot.service</p> 
<p style="margin-left:0;text-align:left;">需要将以上三个文件中对应的设备号改成/dev/nvme0n1p1。改完之后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/30/72/4MAIeWUJ_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">上图是copy-rootfs-ssd.sh，下图是data/setssdroot.service</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/96/b1/marotRab_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">上图是data/setssdroot.service，下图是data/setssdroot.sh</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/dc/c6/Swzl9JQ5_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">准备就绪，下面执行copy-rootfs-ssd.sh命令：</p> 
<p style="margin-left:0;text-align:left;">./ copy-rootfs-ssd.sh</p> 
<p style="margin-left:0;text-align:left;">执行后需要输入nvidia用户的密码，然后开始复制操作。这个速度还是比较快的，我主板大概能执行到80到110MB/s，一会功夫就能执行完。执行完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/c1/e2/UxhJa72I_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">下面开始执行setup-service.sh命令：</p> 
<p style="margin-left:0;text-align:left;">./setup-service.sh</p> 
<p style="margin-left:0;text-align:left;">执行后，这里也需要输入nvidia用户的密码，但是这个输入密码的位置跟上面的的命令不太一样。不是在终端输入，而是在弹出窗口中输入。这个命令的执行速度非常快。执行完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/f9/fe/nQvflaRe_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在咱们【新硬盘的挂载】和【迁移操作系统到250G固态硬盘】的任务就完成了，执行reboot命令重启一下主板。重新输入密码进入操作系统后，打开终端，输入df -lh命令，设备号是/dev/nvme0n1p1的250G固态硬盘已经挂载到了操作系统根目录下。而主板自带的16G存储空间（设备号/dev/mmcblkop1）已经被挂载到了/media/nvidia/********-****-****-****-****的这个目录下了。请注意，虽然操作系统已经迁移，但是主板自带的16G存储空间的文件也不能删除，最好不要动。因为250G固态硬盘仅作为系统盘（rootfs 和用户区），系统的启动引导依然是通过主板自带的16G存储空间或EMMC，比如升级设备树dtb还是在主板自带的16G存储空间或EMMC 中。执行df -lh命令后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/98/25/iR58Cdii_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">接下来咱们开始更新系统包，执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get update</p> 
<p style="margin-left:0;text-align:left;">执行完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/68/e8/zOU5ylej_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">这个执行比较快，有人说可以换清华的镜像，速度会更快。我这网络还可以，就没有换。下面执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get upgrade</p> 
<p style="margin-left:0;text-align:left;">这个就比较慢了耐心等吧，执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/6a/69/970MrfdP_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行时间特别长，我这里执行大概用了一个小时。完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/5c/9b/KtPoMqNO_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">因为是国外的网站，执行过程中有可能会更新失败，所以要仔细看一下。如果更新失败了就再执行一次命令。确定执行完成了就开始下一步，安装pip3，执行下面命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install python3-pip python3-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/c8/77/amcaxhnB_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">由于咱们jetson-nano国产套件的镜像里已经安装了最新的pip，这里其实没有安装。姑且写在这里，避免朋友们因为这个坑受阻。</p> 
<p style="margin-left:0;text-align:left;">到现在为止咱们主板的操作系统还是英文的，接下来咱们把它改成中文的。点击左侧的系统设置（System  Settings），如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/82/65/VJEj9mT9_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">打开系统设置窗口后，点击Language Support（语言支持）图标。打开新的窗口，会提示“The Language Support is not installed completely”（支持语言尚未完全安装），这里点击Install进行安装就可以了。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/3f/87/QcV1XK6W_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">安装之前会要求输入nvidia用户的密码，输入后点击authenticate，正式开始安装。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ce/c3/qVXUEK7y_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">安装过程也比较长，等这就行。安装中有可能通讯失败，重新安装就可以了。访问国外的网站确实不太稳定。安装完成后，把Language菜单最下面的“汉语”选项拖动到菜单顶端，然后关闭Language Support窗口就可以了。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/d7/b8/ojLeZea2_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在在终端里执行命令：</p> 
<p style="margin-left:0;text-align:left;">Reboot</p> 
<p style="margin-left:0;text-align:left;">重启jetson-nano国产套件，重启后可以看到系统已经变成中文了。进入系统后会看到一个对话窗口，询问是否将标准文件夹更新到当前语言。这些目录名径长会在命令中出现，为了方便，我建议就别改了。勾选“不要再次询问我”，然后点击“保留旧的名称”。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/e9/5e/7P1d4Ad5_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">接下来安装jtop，用来在终端查看自己电脑cpu和gpu情况，其实咱们jetson-nano国产套件的镜像也已经安装了，我这里也记录一下。执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo -H pip3 install jetson-stats</p> 
<p style="margin-left:0;text-align:left;">sudo jtop</p> 
<p style="margin-left:0;text-align:left;">执行完成后，如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/5c/20/BpXKQGZ9_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">这个功能和windows的任务管理器差不多。按Q键就能退出这个界面了。</p> 
<p style="margin-left:0;text-align:left;">下面咱们开始修改jetson-nano国产套件的显存，在终端输入命令：</p> 
<p style="margin-left:0;text-align:left;">sudo gedit /etc/systemd/nvzramconfig.sh</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/e2/03/WixoTBAB_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">修改nvzramconfig.sh文件：</p> 
<p style="margin-left:0;text-align:left;">在打开的文档中找到mem值，修改mem的值，如下：</p> 
<p style="margin-left:0;text-align:left;">修改之前mem = $((("${totalmem}"/2/"${NRDEVICES}")*1024))</p> 
<p style="margin-left:0;text-align:left;">修改之后mem = $((("${totalmem}"*2/"${NRDEVICES}")*1024))</p> 
<p style="margin-left:0;text-align:left;">把 / 修改为 *</p> 
<p style="margin-left:0;text-align:left;">修改之后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/2b/ba/oB595ohe_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">保存退出，然后执行reboot重启jetson-nano国产套件。再次进入系统后打开终端，执行命令：</p> 
<p style="margin-left:0;text-align:left;">free -h</p> 
<p style="margin-left:0;text-align:left;">可以看到“交换”（swap）已经变为7.7G了。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/64/d7/UGlmUTXA_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">接下来咱们配置cuda。jetson-nano国产套件镜像是自带cuda的，而且环境变量都给配置好了，咱们需要稍微改一下环境变量。执行命令：</p> 
<p style="margin-left:0;text-align:left;">gedit ~/.bashrc</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/da/b5/RyecUaou_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">可以看到，在.bashrc文件的最后两行就是cuda的环境变量，咱们把这两行注释掉，然后把下面三行复制进去：</p> 
<p style="margin-left:0;text-align:left;">export PATH=/usr/local/cuda-10.2/bin${PATH:+:${PATH}}</p> 
<p style="margin-left:0;text-align:left;">export LD_LIBRARY_PATH=/usr/local/cuda-10.2/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}</p> 
<p style="margin-left:0;text-align:left;">export CUDA_ROOT=/usr/local/cuda</p> 
<p style="margin-left:0;text-align:left;">如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/5a/fe/OsewgaKC_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">保存退出，然后执行命令：</p> 
<p style="margin-left:0;text-align:left;">source ~/.bashrc</p> 
<p style="margin-left:0;text-align:left;">让环境变量修改生效。生效后可以再执行命令：</p> 
<p style="margin-left:0;text-align:left;">nvcc -V</p> 
<p style="margin-left:0;text-align:left;">查看自己的cuda版本。如下图：</p> 
<p></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/34/b7/LZii3Ce1_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">可以看到，咱们cuda的版本是10.2。看到这个就说明环境变量配置成功，可以开始配置所需的库了。执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install build-essential make cmake cmake-curses-gui -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/cd/48/cso2UWgD_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install git g++ pkg-config curl -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/99/7c/Huy2BT1p_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libatlas-base-dev gfortran libcanberra-gtk-module libcanberra-gtk3-module -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/a9/82/csounpGy_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libhdf5-serial-dev hdf5-tools -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/c4/c5/9WmUkPWL_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install nano locate screen -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/22/33/OmCJI6m3_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libfreetype6-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/de/5f/d00nTFPF_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install protobuf-compiler libprotobuf-dev openssl -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ab/62/0d1lo0Sk_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libssl-dev libcurl4-openssl-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/b6/b9/xVWw1n7L_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install cython3 -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/34/74/Zi6kcrtm_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install gfortran -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/08/b0/RwGwWv2G_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libjpeg-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/50/96/k01q56UN_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libopenmpi2 -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/c9/22/CKsTER7N_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libopenblas-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/80/b1/aJ4NLQBY_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libjpeg-dev zlib1g-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/7e/a5/ufENn2h6_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">到此为止，配置所需要的库就已经安装完了。如果网络正常，这个环节用时不会太久。</p> 
<p style="margin-left:0;text-align:left;">下满咱们开始安装opencv所需要的支持包。</p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install build-essential -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/a5/a3/yDZh7HTg_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/4a/a7/VZiuMiSB_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff5-dev libdc1394-22-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/65/f5/zoBukt1S_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev liblapacke-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/eb/ea/G2srRmCE_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libxvidcore-dev libx264-dev -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/79/b1/Em5o32q1_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libatlas-base-dev gfortran -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/49/ac/YXzvvScN_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install ffmpeg -y</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/31/f5/u6wA5mK0_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在安装opencv所需要的包都已经安装完了。接下来咱们开始安装cmke。先下载，执行命令：</p> 
<p style="margin-left:0;text-align:left;">wget http://www.cmake.org/files/v3.13/cmake-3.13.0.tar.gz</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ce/1b/OsvXg9E6_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行完成后，可以看到当前目录下多了个cmake-3.13.0.tar.gz的文件，下面对这个文件进行解压缩。执行命令：</p> 
<p style="margin-left:0;text-align:left;">tar xpvf cmake-3.13.0.tar.gz cmake-3.13.0/</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/28/e8/lP2kV1Bg_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">解压缩完成后，会出现一个新目录cmake-3.13.0，进入这个目录。执行命令：</p> 
<p style="margin-left:0;text-align:left;">cd cmake-3.13.0/</p> 
<p style="margin-left:0;text-align:left;">然后再执行命令：</p> 
<p style="margin-left:0;text-align:left;">./bootstrap --system-curl</p> 
<p style="margin-left:0;text-align:left;">执行这个命令的时间会很长，我感觉得有20分钟，耐心等待吧。可以下楼去抽根华子了，很有可能你抽完回来了，这边还没执行完。执行完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/e6/9e/XjHnoZes_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">下面开始编译，执行命令：</p> 
<p style="margin-left:0;text-align:left;">make -j4</p> 
<p style="margin-left:0;text-align:left;">这个执行时间也很长，不过终端会输出进度，可以根据这个时间再去抽根华子了。这里善意提醒一句：吸烟有害健康，保持社交距离。执行完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/bf/29/qVPjRrlP_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">编译完成后，再次修改环境变量。执行命令：</p> 
<p style="margin-left:0;text-align:left;">echo 'export PATH=~/cmake-3.13.0/bin/:$PATH' &gt;&gt; ~/.bashrc</p> 
<p style="margin-left:0;text-align:left;">执行完成后，系统会自己在.bashrc最后加上一句export PATH=~/cmake-3.13.0/bin/:$PATH</p> 
<p style="margin-left:0;text-align:left;">然后执行命令：</p> 
<p style="margin-left:0;text-align:left;">source ~/.bashrc</p> 
<p style="margin-left:0;text-align:left;">让修改的环境变量生效。</p> 
<p style="margin-left:0;text-align:left;">下面安装exfat-utils用来解决大容量U盘兼容的问题，执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install exfat-utils</p> 
<p style="margin-left:0;text-align:left;">执行完成后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/40/6e/1yptIOun_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">到此jetson-nano国产套件的系统环境已经配置好了，后面开始配置YoloV5所需要的环境。咱们使用的是torch 1.8和torchvision 0.9。这两个文件可以从百度网盘下载，下面是下载地址：</p> 
<p style="margin-left:0;text-align:left;">链接：https://pan.baidu.com/s/1cGS-gYdnEvT-9M0ve3hacg</p> 
<p style="margin-left:0;text-align:left;">提取码：01F6</p> 
<p style="margin-left:0;text-align:left;">如果这个地址失效了，请朋友们给我留言。</p> 
<p style="margin-left:0;text-align:left;">下载后把文件夹放到jetson-nano国产套件的桌面上就可以了，目录名叫pytorch-torchvision，里面有一个文件：torch-1.8.0-cp36-cp36m-linux_arrch64.whl</p> 
<p style="margin-left:0;text-align:left;">还有一个目录：torchvision</p> 
<p style="margin-left:0;text-align:left;">如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/0a/d9/Laj1toP3_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">在这个目录中按鼠标右键，选择“在终端中打开”，然后输入sudo pip3 install，再把文件torch-1.8.0-cp36-cp36m-linux_arrch64.whl拖入到终端里，并按回车执行。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/56/86/u8YA8Nx2_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">关于上面这个环节，为什么要拖入whl执行，我也不明白。但是之前尝试的时候直接输入命令执行，YoloV5运行有问题。但是按照拖动的方式执行，YoloV5执行成功了。所以我就迷信的这样做了，如果谁知道拖动跟直接输入命令的区别，希望不吝赐教。</p> 
<p style="margin-left:0;text-align:left;">下面再安装几个包，否则安装后面torchvision时会报错。执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get install libjpeg-dev</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/14/28/sbRvMEiK_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install pillow</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/24/d7/LnnpXHAa_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">接下来进入pytorch-torchvision这个目录。执行命令：</p> 
<p style="margin-left:0;text-align:left;">cd torchvision</p> 
<p style="margin-left:0;text-align:left;">然后执行命令：</p> 
<p style="margin-left:0;text-align:left;">export BUILD_VERSION=0.9.0</p> 
<p style="margin-left:0;text-align:left;">再执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo python3 setup.py install</p> 
<p style="margin-left:0;text-align:left;">这个执行又要很长时间，感觉20分钟起步吧。烟瘾大的朋友可以再去抽一根了。感觉咱们这个部署教程特别费烟。安装过程中可能会有一些具体代码的警告，类似下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/0e/9f/Fh8YPCYo_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">不用管它，耐心等着就行了。执行完成后，如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/a8/20/nPDANQqb_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">现在我们验证一下torch和torchvision有没有安装好。</p> 
<p style="margin-left:0;text-align:left;">先reboot重启jetson-nano国产套件，然后在终端执行命令：</p> 
<p style="margin-left:0;text-align:left;">python3</p> 
<p style="margin-left:0;text-align:left;">进入python3中，逐行输入：</p> 
<p style="margin-left:0;text-align:left;">import torch</p> 
<p style="margin-left:0;text-align:left;">import torchvision</p> 
<p style="margin-left:0;text-align:left;">print(torch.cuda.is_available())</p> 
<p style="margin-left:0;text-align:left;">如果输出True就说明安装成功了。如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/d1/c7/yxFTlzbF_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行quit()退出python3。</p> 
<p style="margin-left:0;text-align:left;">下面继续安装YoloV5所需要的包。先安装matplotlib 3.2.2。执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install matplotlib==3.2.2</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/63/80/TxlaiI3Y_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">更新Cython，执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install --upgrade Cython</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/d7/8b/atwlVEQC_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">卸载python-numpy，执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo apt-get remove python-numpy</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/0e/a2/wVmnS614_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">安装numpy 1.19.4，执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install numpy==1.19.4</p> 
<p style="margin-left:0;text-align:left;">numpy安装需要挺长时间。执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/35/a7/6XtBcoFA_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">安装scipy 1.4.1.，执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install scipy==1.4.1.</p> 
<p style="margin-left:0;text-align:left;">这个执行时间也特别长。执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/f2/bc/wkSmi6iZ_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install tqdm==4.61.2</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/5c/93/tpYngt10_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install seaborn==0.11.1</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/8d/e5/fUhimoZz_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install scikit-build==0.11.1</p> 
<p style="margin-left:0;text-align:left;">这个安装很慢，耐心等吧。执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/90/25/75YlKDXk_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install opencv-python==4.5.3.56</p> 
<p style="margin-left:0;text-align:left;">这个同样安装很慢，我这大概执行了一个小时，继续耐心等吧。执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/ac/79/LoQfq6Ez_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install tensorboard==2.5.0 -i https://pypi.tuna.tsinghua.edu.cn/simple</p> 
<p style="margin-left:0;text-align:left;">tensorboard依赖包很多，也得等挺长一阵。安装执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/f8/6c/7b9lFim2_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install PyYAML==5.4.1</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/88/ff/fGkVoE2h_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install thop</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/4f/c5/T1B8LCFA_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install pycocotools</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/99/f7/XkrfFaH0_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">执行命令：</p> 
<p style="margin-left:0;text-align:left;">sudo pip3 install future</p> 
<p style="margin-left:0;text-align:left;">执行后如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/c2/7e/goSGewRD_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">好了，至此咱们YoloV5的环境已经搭建完成了，把咱们Yolo工程copy到jetson-nano国产套件上面吧。我直接把工程放到了桌面。先打开你工程下的detect.py文件，看看里面有没有下面这句：</p> 
<p style="margin-left:0;text-align:left;">from anyio._core import _threads</p> 
<p style="margin-left:0;text-align:left;">如果有，就把这句注释掉。这句在windows下推理没有问题，在jetson-nano国产套件下就会报错。</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/b9/ee/7tdThau8_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">然后再进入下面python3.6d的目录：</p> 
<p style="margin-left:0;text-align:left;">cd /usr/local/lib/python3.6/dist-packages/torch/nn/modules/</p> 
<p style="margin-left:0;text-align:left;">打开activation.py文件</p> 
<p style="margin-left:0;text-align:left;">sudo vi activation.py</p> 
<p style="margin-left:0;text-align:left;">把self.inplace删除，我是注释掉了。</p> 
<p style="margin-left:0;text-align:left;">    def forward(self, input: Tensor) -&gt; Tensor:</p> 
<p style="margin-left:0;text-align:left;">        # return F.hardswish(input, self.inplace)</p> 
<p style="margin-left:0;text-align:left;">        return F.hardswish(input)</p> 
<p style="margin-left:0;text-align:left;">如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/07/9d/HkwJqkdg_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">回到Yolo工程所在的目录，在终端执行命令：</p> 
<p style="margin-left:0;text-align:left;">python3 detect.py --source inference/images --weights best.pt</p> 
<p style="margin-left:0;text-align:left;">图像推理成功，如下图：</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/61/61/aHO8l28z_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">换上USB摄像头，执行也没有问题。</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="720" src="https://images2.imgbox.com/19/65/rLR2qa1C_o.png" width="1200"></p> 
<p style="margin-left:0;text-align:left;">到此，部署大功告成。希望大家部署顺利。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e642a461c8d104ff549bed8bb377cabc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Python】openpyxl 复制带格式的Excel 表格</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a62c7388985034f26f120228740d597d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux系统目录结构与文件路径</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用.NET framework MVC编写简易的增删查 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用.NET framework MVC编写简易的增删查" />
<meta property="og:description" content="一，页面效果
二，前期准备
1，数据库创建好表
2，新建项目
3，添加数据实体模型 三，代码实现
一，页面效果 1,首页效果
2，新增页面
3.删除页面
4，查询页面
二， 前期准备 1，数据库创建好表
设置好主外键，主键,自动增长列
2，创建项目
打开visual studio 2019，选择项目模板 选择.NET Framework项目
点击“下一步”
3，添加数据实体模型
三，代码实现 1，在Controllers文件下添加一个.cs文件
获取表数据，左连接，使用Include链接数据
public class TestController : Controller { // GET: Test TestEntities1 dbContext=new TestEntities1(); public ActionResult Index() { //左链接，使用Include链接数据 var list = dbContext.Schedule.Include(&#34;Type&#34;); return View(list.ToList()); } 添加index视图添加表格数据代码
&lt;table border=&#34;1&#34;&gt; &lt;thead&gt; &lt;tr&gt; &lt;td&gt;日程编号&lt;/td&gt; &lt;td&gt;日程执行人&lt;/td&gt; &lt;td&gt;日程分类&lt;/td&gt; &lt;td&gt;计划开始时间&lt;/td&gt; &lt;td&gt;计划结束时间&lt;/td&gt; &lt;td&gt;日程内容&lt;/td&gt; &lt;td&gt;备注&lt;/td&gt; &lt;/tr&gt; @{ foreach (var item in Model) { &lt;tr&gt; &lt;td&gt;@item." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/12dd29f005ff1effab517d3800ec87d7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-20T17:02:35+08:00" />
<meta property="article:modified_time" content="2023-06-20T17:02:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用.NET framework MVC编写简易的增删查</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong><span style="color:#6eaad7;">一，页面效果</span></strong></p> 
<p><strong><span style="color:#6eaad7;">二，前期准备</span></strong></p> 
<p><strong><span style="color:#6eaad7;">           1，数据库创建好表</span></strong></p> 
<p><strong><span style="color:#6eaad7;">           2，新建项目</span></strong></p> 
<p><strong><span style="color:#6eaad7;">           3，添加数据实体模型 </span></strong></p> 
<p><strong><span style="color:#6eaad7;">三，代码实现</span></strong></p> 
<p></p> 
<p></p> 
<p></p> 
<h3>        一，页面效果</h3> 
<p>1,首页效果</p> 
<p><img alt="" src="https://images2.imgbox.com/3b/41/rIxiiXaj_o.png"></p> 
<p>2，新增页面</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/85/2a/UWXa9i4A_o.png"></p> 
<p>3.删除页面</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d9/a3/6p4edqGH_o.png"></p> 
<p>4，查询页面</p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/24/2e/nt8Zx8Sg_o.png"></p> 
<h3>二， 前期准备</h3> 
<p><span style="color:#0d0016;"><strong> 1，数据库创建好表</strong></span></p> 
<p><span style="color:#7b7f82;">设置好主外键，主键,自动增长列</span></p> 
<p style="text-align:center;"><span style="color:#7b7f82;"><strong><img alt="" src="https://images2.imgbox.com/94/f1/ENh1UU1O_o.png"></strong></span></p> 
<p><strong><span style="color:#0d0016;"> 2，创建项目</span></strong></p> 
<p>打开visual studio 2019，选择项目模板 选择.NET Framework项目<br><img alt="" src="https://images2.imgbox.com/54/23/SWKkWUfI_o.png"></p> 
<p>点击“下一步”<br><img alt="" src="https://images2.imgbox.com/d0/6d/ZU68EpO7_o.png"></p> 
<p></p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/31/6d/S9xu1Y4Y_o.png"></p> 
<p> <span style="color:#0d0016;"><strong> 3，添加数据实体模型</strong></span></p> 
<p style="text-align:center;"><span style="color:#0d0016;"><strong><img alt="" src="https://images2.imgbox.com/b1/58/4WCb0vL8_o.png"></strong></span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bf/c0/ungsoTeB_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2d/53/icTLhvRE_o.png"></p> 
<h2>三，代码实现</h2> 
<p>1，在Controllers文件下添加一个.cs文件</p> 
<p>获取表数据，左连接，使用Include链接数据</p> 
<p><img alt="" height="303" src="https://images2.imgbox.com/1b/c2/vtsrR8Wm_o.png" width="912"></p> 
<p></p> 
<pre><code class="language-cs">public class TestController : Controller
    {
        // GET: Test
        TestEntities1 dbContext=new TestEntities1();
        public ActionResult Index()
        {
            //左链接，使用Include链接数据
            var list = dbContext.Schedule.Include("Type");
            return View(list.ToList());
        }</code></pre> 
<p> 添加index视图添加表格数据代码</p> 
<p><img alt="" height="594" src="https://images2.imgbox.com/2f/10/JnM8aFvk_o.png" width="967"></p> 
<p></p> 
<pre><code class="language-cs">&lt;table border="1"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;td&gt;日程编号&lt;/td&gt;
            &lt;td&gt;日程执行人&lt;/td&gt;
            &lt;td&gt;日程分类&lt;/td&gt;
            &lt;td&gt;计划开始时间&lt;/td&gt;
            &lt;td&gt;计划结束时间&lt;/td&gt;
            &lt;td&gt;日程内容&lt;/td&gt;
            &lt;td&gt;备注&lt;/td&gt;
        &lt;/tr&gt;

        @{
            foreach (var item in Model)
            {
                &lt;tr&gt;
                    &lt;td&gt;@item.ID&lt;/td&gt;
                    &lt;td&gt;@item.Name&lt;/td&gt;
                    &lt;td&gt;@item.Type.Name&lt;/td&gt;
                    &lt;td&gt;@item.BeginTime&lt;/td&gt;
                    &lt;td&gt;@item.EndTime&lt;/td&gt;
                    &lt;td&gt;@item.Content&lt;/td&gt;
                    &lt;td&gt;@item.Remark&lt;/td&gt;
                    &lt;td&gt;&lt;a&gt;删除&lt;/a&gt;&lt;/td&gt;
                &lt;/tr&gt;
            }


        }
    &lt;/thead&gt;
&lt;/table&gt;</code></pre> 
<p>获得表格显示的效果</p> 
<p><img alt="" height="210" src="https://images2.imgbox.com/16/5d/0aeh8SYb_o.png" width="733"></p> 
<p>（1） 删除实现的代码</p> 
<p>返回到.cs文件编写方法</p> 
<p><img alt="" height="274" src="https://images2.imgbox.com/0a/84/aJxWGzJt_o.png" width="756"></p> 
<p></p> 
<pre><code class="language-cs">public ActionResult DoAdd(Schedule schedule)
        {
            dbContext.Schedule.Add(schedule);
            dbContext.SaveChanges();
            return Redirect("index");
                }</code></pre> 
<p>到视图添加路径</p> 
<p><img alt="" height="29" src="https://images2.imgbox.com/d2/50/9YisTgUT_o.png" width="1012"></p> 
<p></p> 
<pre><code class="language-cs">&lt;td&gt;&lt;a href="/test/Delete?id=@item.ID" onclick="return confirm('确认删除吗')"&gt;删除&lt;/a&gt;&lt;/td&gt;</code></pre> 
<p>（2）查询代码</p> 
<p>到.cs文件添加代码 </p> 
<p><img alt="" height="426" src="https://images2.imgbox.com/c0/4f/u3IzjGnr_o.png" width="1079"></p> 
<p></p> 
<pre><code class="language-cs"> public ActionResult Index(int? TypeID,string Name)
        {
            //左链接，使用Include链接数据
            var list = dbContext.Schedule.Include("Type");
            if(TypeID!=null)
            {
                list =(DbQuery&lt;Schedule&gt;)  list.Where(m =&gt; m.TypeID == TypeID);
            }
            if (!string.IsNullOrEmpty(Name))
                    {
                list = (DbQuery&lt;Schedule&gt;)list.Where(m =&gt; m.Name.Contains("Name"));
            }
            var list2 = dbContext.Type.ToList();
            ViewBag.TypeID = new SelectList(list2, "ID", "Name");
            return View(list.ToList());
        }</code></pre> 
<p>index视图代码</p> 
<p><img alt="" height="157" src="https://images2.imgbox.com/4e/46/NFnmQ7hV_o.png" width="659"></p> 
<pre><code class="language-cs">&lt;form&gt;
    @Html.DropDownList("TypeID","请选择")
    姓名：&lt;input  type="text" name="Name"/&gt;
    &lt;input  type="submit" value="查询"/&gt;
    &lt;a href="/test/add"&gt;添加&lt;/a&gt;
&lt;/form&gt;</code></pre> 
<p> （3）添加的方法</p> 
<p><img alt="" height="168" src="https://images2.imgbox.com/3f/f4/syONmr14_o.png" width="716"></p> 
<p></p> 
<pre><code class="language-cs"> public ActionResult Add()
        {
            var list2 = dbContext.Type.ToList();
            ViewBag.TypeID = new SelectList(list2, "ID", "Name");
            return View();
        }</code></pre> 
<p>然后添加一个新的视图</p> 
<p><img alt="" height="435" src="https://images2.imgbox.com/34/a8/no35jZAU_o.png" width="1071"></p> 
<p></p> 
<pre><code class="language-cs">&lt;form  action="/test/doadd"&gt;
    &lt;table&gt;
        &lt;tr&gt;&lt;td&gt;姓名&lt;/td&gt;&lt;td&gt;&lt;input type="text" name="Name" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;日常分类&lt;/td&gt;&lt;td&gt;@Html.DropDownList("TypeID")&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;计划开始时间&lt;/td&gt;&lt;td&gt;&lt;input type="date" name="BeginTime" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;计划结束时间&lt;/td&gt;&lt;td&gt;&lt;input type="date" name="EndTime" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;日程内容&lt;/td&gt;&lt;td&gt;&lt;input type="text" name="Content " /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;备注&lt;/td&gt;&lt;td&gt;&lt;input type="text" name="Remark" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;input type="submit" value="添加" /&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;</code></pre> 
<p>返回的方法</p> 
<p><img alt="" height="164" src="https://images2.imgbox.com/0c/1c/CBRIBi48_o.png" width="724"></p> 
<pre><code class="language-cs"> public ActionResult DoAdd(Schedule schedule)
        {
            dbContext.Schedule.Add(schedule);
            dbContext.SaveChanges();
            return Redirect("index");
                }</code></pre> 
<p> 然后到index视图添加添加的方法路径</p> 
<p><img alt="" height="31" src="https://images2.imgbox.com/a8/6e/KPERw5Ok_o.png" width="459"></p> 
<p>总的Controllers文件代码</p> 
<pre><code class="language-cs">using System;
using System.Collections.Generic;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace firm.Controllers
{
    public class TestController : Controller
    {
        // GET: Test
        TestEntities1 dbContext=new TestEntities1();
        public ActionResult Index(int? TypeID,string Name)
        {
            //左链接，使用Include链接数据
            var list = dbContext.Schedule.Include("Type");
            if(TypeID!=null)
            {
                list =(DbQuery&lt;Schedule&gt;)  list.Where(m =&gt; m.TypeID == TypeID);
            }
            if (!string.IsNullOrEmpty(Name))
                    {
                list = (DbQuery&lt;Schedule&gt;)list.Where(m =&gt; m.Name.Contains("Name"));
            }
            var list2 = dbContext.Type.ToList();
            ViewBag.TypeID = new SelectList(list2, "ID", "Name");
            return View(list.ToList());
        }

        public ActionResult Delete(int id)
        {   
            //获取要删的表ID
            var sche= dbContext.Schedule.Find(id);
            dbContext.Schedule.Remove(sche);
            //保存更改
            dbContext.SaveChanges();
            return Redirect("index");
        }


        public ActionResult Add()
        {
            var list2 = dbContext.Type.ToList();
            ViewBag.TypeID = new SelectList(list2, "ID", "Name");
            return View();
        }
        public ActionResult DoAdd(Schedule schedule)
        {
            dbContext.Schedule.Add(schedule);
            dbContext.SaveChanges();
            return Redirect("index");
                }

    }
}   </code></pre> 
<p>index视图代码</p> 
<pre><code class="language-cs">@{
    ViewBag.Title = "Index";
}
@model List&lt;Schedule&gt;
&lt;h2&gt;Index&lt;/h2&gt;
&lt;form&gt;
    @Html.DropDownList("TypeID","请选择")
    姓名：&lt;input  type="text" name="Name"/&gt;
    &lt;input  type="submit" value="查询"/&gt;
    &lt;a href="/test/add"&gt;添加&lt;/a&gt;
&lt;/form&gt;
&lt;table border="1"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;td&gt;日程编号&lt;/td&gt;
            &lt;td&gt;日程执行人&lt;/td&gt;
            &lt;td&gt;日程分类&lt;/td&gt;
            &lt;td&gt;计划开始时间&lt;/td&gt;
            &lt;td&gt;计划结束时间&lt;/td&gt;
            &lt;td&gt;日程内容&lt;/td&gt;
            &lt;td&gt;备注&lt;/td&gt;
        &lt;/tr&gt;

        @{
            foreach (var item in Model)
            {
                &lt;tr&gt;
                    &lt;td&gt;@item.ID&lt;/td&gt;
                    &lt;td&gt;@item.Name&lt;/td&gt;
                    &lt;td&gt;@item.Type.Name&lt;/td&gt;
                    &lt;td&gt;@item.BeginTime&lt;/td&gt;
                    &lt;td&gt;@item.EndTime&lt;/td&gt;
                    &lt;td&gt;@item.Content&lt;/td&gt;
                    &lt;td&gt;@item.Remark&lt;/td&gt;
                    &lt;td&gt;&lt;a href="/test/Delete?id=@item.ID" onclick="return confirm('确认删除吗')"&gt;删除&lt;/a&gt;&lt;/td&gt;
                &lt;/tr&gt;
            }


        }
    &lt;/thead&gt;
&lt;/table&gt;


</code></pre> 
<p>Add视图代码</p> 
<pre><code class="language-cs">@{
    ViewBag.Title = "Add";
}

&lt;h2&gt;Add&lt;/h2&gt;
&lt;form  action="/test/doadd"&gt;
    &lt;table&gt;
        &lt;tr&gt;&lt;td&gt;姓名&lt;/td&gt;&lt;td&gt;&lt;input type="text" name="Name" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;日常分类&lt;/td&gt;&lt;td&gt;@Html.DropDownList("TypeID")&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;计划开始时间&lt;/td&gt;&lt;td&gt;&lt;input type="date" name="BeginTime" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;计划结束时间&lt;/td&gt;&lt;td&gt;&lt;input type="date" name="EndTime" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;日程内容&lt;/td&gt;&lt;td&gt;&lt;input type="text" name="Content " /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;备注&lt;/td&gt;&lt;td&gt;&lt;input type="text" name="Remark" /&gt;&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;input type="submit" value="添加" /&gt;&lt;/td&gt;&lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5d4a81b46e60116630f83955a515bded/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最新大学计算机专业实习心得报告</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec947a8c3e2fc8777d96494fc4eab480/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Verilog学习笔记（2）：Modelsim 10.6安装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
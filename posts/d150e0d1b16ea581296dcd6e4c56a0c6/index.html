<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>开聊PTrade交易——从零到实盘16 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="开聊PTrade交易——从零到实盘16" />
<meta property="og:description" content=" 从本文开始，“从零到实盘”系列文章进入针对PTrade进行交易的相关介绍。
PTrade简介 PTrade专业交易系统，是一款面向高净值个人用户和主动管理型产品，集程序化交易（策略投研、回测、交易）、日内回转交易、快速交易、投机套利工具等功能，以及异常交易风控在内的一体化智能投资平台。
以上是湘财证券对PTrade的简单介绍，笔者目前只是把PTrade作为一个交易的接口，因此只探索了交易相关的功能。如果想了解更多PTrade的功能，还请读者自行探索。
下图为进入PTrade后的默认界面：
PTrade部署策略过程 PTrade不提供对外的接口，因此没有办法在PyCharm等IDE里进行策略的开发调试，我们只能在PTrade编写策略，策略会被上传到券商的服务器，也就是说策略最终是在券商的服务器上运行的，即使我们的PC关机了，策略依然能够保持运行状态。
下面介绍在PTrade中部署策略的过程：
入下图所示，界面最左侧一列分别为，“行情”、“交易”、“工具”、“量化”、“日内”，共5个标签，选择“量化”标签（默认打开就是“量化”标签）。在左上角位置，横向有“研究”、“回测”、“交易”、“帮助”，共4个标签，点击选择“回测”标签。 回测标签下一行的“策略”下的“&#43;”号，会弹出下面的菜单。 例如我们可以将名称设置为demo，业务类型选择为股票。
点击确定，ptrade就会创建出一个简单的策略，如下图所示，我们就可以在编辑窗口编写自己的策略了。 当策略编写完成后，保存策略（重要！！！）。下一步我们将进行策略的部署，点击进入“交易”标签，界面如下图所示： 在左侧“交易列表”窗口右侧有个“新增”按钮，点击后弹出如下窗口： 可以根据需要填写交易名称，例如我们还是命名为demo，策略方案选择刚才在“回测”标签中新建的策略“分钟-demo”（这里的“分钟”是自动添加的）。点击确定，就可以看到如下界面。
左侧“交易列表”里也显示“demo”策略正在运行，这样就完成了策略的部署，策略正运行在券商的服务器上，等到达交易时间会自动进行交易。
修改策略 在”交易“标签窗口下，我们无法对策略进行修改。如果我们想修改正在运行的策略，需要按以下步骤进行：
点击切换到“回测”标签窗口点击待修改的策略（例如demo），打开策略进行修改点击保存（重要！！！）点击切换到“交易”标签窗口在“交易列表”窗口下找到对应策略（例如demo），点击后面的“重启”，策略重启后即完成了部署在服务器端的策略修改。 我们也可以根据需要对特定的策略进行停止和删除，只需要勾选策略，然后点击对应按钮即可。
PTrade文档 在“帮助”标签窗口内，有PTrade的API文档，对PTrade的使用及API都有说明，读者可以自行查阅。
数据中心与PTrade的交互方式 在前面的文章中，我们创建了数据中心（data_center.py）程序，完成了每日候选股票的筛选功能。
下一步，我们需要完成数据中心与PTrade完成数据交互，才能实现真正的实盘交易。虽然，PTrade无法提供外部调用API，但是提供了“算法单”功能，来实现PTrade内外部数据的交互。简单来说，算法单就是通过输入、输出文件的形式，实现数据的交互。在实盘中，我们用到数据中心与PTrade的交互方式如下图所示：
从数据中心到PTrade 我们可以通过CSV文件将待交易数据传递给PTrade，PTrade提供对指定目录的扫描功能，读取目录下所有CSV文件。
从PTrade到数据中心 PTrade会定时向指定目录输出成交文件、资金文件等CSV格式文件，在目前的实盘交易中，我们会在每天收盘更新数据中心数据时，读取成交文件Deal_YYYYMMDD.csv的内容，来获取当日成交数据，更新数据中心中相关数据内容。
通过以上两个步骤，就实现了数据中心与PTrade的数据交互。
小结 本文简单介绍了PTrade的基本内容，后续文章将介绍数据中心与PTrade进行数据交互的具体实现方式及PTrade交易代码。
博客内容只用于交流学习，不构成投资建议，盈亏自负！
个人博客：http://coderx.com.cn/（优先更新）
项目最新代码：https://gitee.com/sl/quant_from_scratch
欢迎大家转发、留言。有微信群用于学习交流，感兴趣的读者请扫码加微信！
如果认为博客对您有帮助，可以扫码进行捐赠，感谢！
微信二维码微信捐赠二维码 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d150e0d1b16ea581296dcd6e4c56a0c6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-04T08:22:29+08:00" />
<meta property="article:modified_time" content="2023-10-04T08:22:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">开聊PTrade交易——从零到实盘16</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>从本文开始，“从零到实盘”系列文章进入针对PTrade进行交易的相关介绍。</p> 
<h2><a id="PTrade_2"></a>PTrade简介</h2> 
<p>PTrade专业交易系统，是一款面向高净值个人用户和主动管理型产品，集程序化交易（策略投研、回测、交易）、日内回转交易、快速交易、投机套利工具等功能，以及异常交易风控在内的一体化智能投资平台。</p> 
<p>以上是湘财证券对PTrade的简单介绍，笔者目前只是把PTrade作为一个交易的接口，因此只探索了交易相关的功能。如果想了解更多PTrade的功能，还请读者自行探索。</p> 
<p>下图为进入PTrade后的默认界面：</p> 
<p><img src="https://images2.imgbox.com/22/7d/9nLRzCQ0_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="PTrade_12"></a>PTrade部署策略过程</h2> 
<p>PTrade不提供对外的接口，因此没有办法在PyCharm等IDE里进行策略的开发调试，我们只能在PTrade编写策略，策略会被上传到券商的服务器，也就是说策略最终是在券商的服务器上运行的，即使我们的PC关机了，策略依然能够保持运行状态。</p> 
<p>下面介绍在PTrade中部署策略的过程：</p> 
<ol><li>入下图所示，界面最左侧一列分别为，“行情”、“交易”、“工具”、“量化”、“日内”，共5个标签，选择“量化”标签（默认打开就是“量化”标签）。在左上角位置，横向有“研究”、“回测”、“交易”、“帮助”，共4个标签，点击选择“回测”标签。</li></ol> 
<p><img src="https://images2.imgbox.com/98/c9/0en21xN5_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>回测标签下一行的“策略”下的“+”号，会弹出下面的菜单。</li></ol> 
<p><img src="https://images2.imgbox.com/47/53/59rZu1xJ_o.png" alt="在这里插入图片描述"></p> 
<p>例如我们可以将名称设置为demo，业务类型选择为股票。</p> 
<ol start="3"><li>点击确定，ptrade就会创建出一个简单的策略，如下图所示，我们就可以在编辑窗口编写自己的策略了。</li></ol> 
<p><img src="https://images2.imgbox.com/a0/24/8elkDfek_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>当策略编写完成后，保存策略（重要！！！）。下一步我们将进行策略的部署，点击进入“交易”标签，界面如下图所示：</li></ol> 
<p><img src="https://images2.imgbox.com/53/15/rgxaxv1K_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li>在左侧“交易列表”窗口右侧有个“新增”按钮，点击后弹出如下窗口：</li></ol> 
<p><img src="https://images2.imgbox.com/55/cf/o230bUqJ_o.png" alt="在这里插入图片描述"></p> 
<p>可以根据需要填写交易名称，例如我们还是命名为demo，策略方案选择刚才在“回测”标签中新建的策略“分钟-demo”（这里的“分钟”是自动添加的）。点击确定，就可以看到如下界面。</p> 
<p><img src="https://images2.imgbox.com/66/f8/I9vLUm8h_o.png" alt="在这里插入图片描述"></p> 
<p>左侧“交易列表”里也显示“demo”策略正在运行，这样就完成了策略的部署，策略正运行在券商的服务器上，等到达交易时间会自动进行交易。</p> 
<h2><a id="_50"></a>修改策略</h2> 
<p>在”交易“标签窗口下，我们无法对策略进行修改。如果我们想修改正在运行的策略，需要按以下步骤进行：</p> 
<ol><li>点击切换到“回测”标签窗口</li><li>点击待修改的策略（例如demo），打开策略进行修改</li><li>点击保存（重要！！！）</li><li>点击切换到“交易”标签窗口</li><li>在“交易列表”窗口下找到对应策略（例如demo），点击后面的“重启”，策略重启后即完成了部署在服务器端的策略修改。</li></ol> 
<p>我们也可以根据需要对特定的策略进行停止和删除，只需要勾选策略，然后点击对应按钮即可。</p> 
<h2><a id="PTrade_60"></a>PTrade文档</h2> 
<p>在“帮助”标签窗口内，有PTrade的API文档，对PTrade的使用及API都有说明，读者可以自行查阅。</p> 
<p><img src="https://images2.imgbox.com/80/ff/AhVCbPjl_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="PTrade_67"></a>数据中心与PTrade的交互方式</h2> 
<p>在前面的文章中，我们创建了数据中心（data_center.py）程序，完成了每日候选股票的筛选功能。<br> 下一步，我们需要完成数据中心与PTrade完成数据交互，才能实现真正的实盘交易。虽然，PTrade无法提供外部调用API，但是提供了“算法单”功能，来实现PTrade内外部数据的交互。简单来说，算法单就是通过输入、输出文件的形式，实现数据的交互。在实盘中，我们用到数据中心与PTrade的交互方式如下图所示：<br> <img src="https://images2.imgbox.com/1f/0d/KS1NaDTG_o.png" alt="在这里插入图片描述"></p> 
<ul><li>从数据中心到PTrade</li></ul> 
<p>我们可以通过CSV文件将待交易数据传递给PTrade，PTrade提供对指定目录的扫描功能，读取目录下所有CSV文件。</p> 
<ul><li>从PTrade到数据中心</li></ul> 
<p>PTrade会定时向指定目录输出成交文件、资金文件等CSV格式文件，在目前的实盘交易中，我们会在每天收盘更新数据中心数据时，读取成交文件Deal_YYYYMMDD.csv的内容，来获取当日成交数据，更新数据中心中相关数据内容。</p> 
<p>通过以上两个步骤，就实现了数据中心与PTrade的数据交互。</p> 
<h2><a id="_85"></a>小结</h2> 
<p>本文简单介绍了PTrade的基本内容，后续文章将介绍数据中心与PTrade进行数据交互的具体实现方式及PTrade交易代码。</p> 
<hr> 
<p><strong>博客内容只用于交流学习，不构成投资建议，盈亏自负！</strong></p> 
<p>个人博客：http://coderx.com.cn/（优先更新）<br> 项目最新代码：https://gitee.com/sl/quant_from_scratch<br> 欢迎大家转发、留言。有微信群用于学习交流，感兴趣的读者请扫码加微信！<br> 如果认为博客对您有帮助，可以扫码进行捐赠，感谢！</p> 
<table><thead><tr><th align="center">微信二维码</th><th align="center">微信捐赠二维码</th></tr></thead><tbody><tr><td align="center"></td><td align="center"></td></tr><tr><td align="center"><img src="https://images2.imgbox.com/b6/c3/XkFVNF5l_o.png" alt="在这里插入图片描述"></td><td align="center"><img src="https://images2.imgbox.com/85/0c/l7DWSSRm_o.png" alt="在这里插入图片描述"></td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/89b88495790cf30a0f973b8f378b996e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">安卓开发案例-手机商城</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5e0ab3d328b790e2fdf80a1c099940dd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">每日筛取候选股票——从零到实盘14</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
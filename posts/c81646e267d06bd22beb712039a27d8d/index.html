<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue&#43;axios&#43;bolb下载文件，获取文件流乱码解决方法， - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue&#43;axios&#43;bolb下载文件，获取文件流乱码解决方法，" />
<meta property="og:description" content="1.首先封装了下载文件get请求方式，其中用element-ui 的提示信息Message，文件引入
import axios from &#34;axios&#34;;
import {Message} from &#39;element-ui&#39;；
// 封装下载请求 返回文件流
export function dowLoadHTTP(url, params = {}) {
return new Promise((resolve, reject) =&gt; {
axios.get(url,params)
.then((response) =&gt; {
if (response) { // 判断请求
resolve(response);
} else {
Message.error(&#39;数据请求失败&#39;);
}
})
.catch((err) =&gt; {
reject(err);
Message.error(&#39;数据请求失败&#39; &#43; error);
});
});
}
2. 获取文件并下载文件 import {dowLoadHTTP} form &#39;url&#39;// 此url写第一步封装请求文件地址
dowLoadHTTPt(&#39;http://www.baidu.com&#39;,{
responseType: &#39;blob&#39;, // 表明返回服务器返回的数据类型, 没有会乱码
params: {}// 里面是请求参数
})" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/c81646e267d06bd22beb712039a27d8d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-12T17:20:29+08:00" />
<meta property="article:modified_time" content="2018-09-12T17:20:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue&#43;axios&#43;bolb下载文件，获取文件流乱码解决方法，</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1.首先封装了下载文件get请求方式，其中用element-ui 的提示信息Message，文件引入</p> 
<p>import axios from "axios";</p> 
<p>import {Message} from 'element-ui'；</p> 
<p>// 封装下载请求 返回文件流</p> 
<p>export function dowLoadHTTP(url, params = {}) {<!-- --></p> 
<p>return new Promise((resolve, reject) =&gt; {<!-- --></p> 
<p>axios.get(url,params)</p> 
<p>.then((response) =&gt; {<!-- --></p> 
<p>if (response) { // 判断请求</p> 
<p>resolve(response);</p> 
<p>} else {<!-- --></p> 
<p>Message.error('数据请求失败');</p> 
<p>}</p> 
<p>})</p> 
<p>.catch((err) =&gt; {<!-- --></p> 
<p>reject(err);</p> 
<p>Message.error('数据请求失败' + error);</p> 
<p>});</p> 
<p>});</p> 
<p>}</p> 
<p>2. 获取文件并下载文件  </p> 
<p>import {dowLoadHTTP} form 'url'// 此url写第一步封装请求文件地址</p> 
<p>dowLoadHTTPt('http://www.baidu.com',{<!-- --></p> 
<p><span style="color:#f33b45;">responseType: 'blob', </span>// 表明返回服务器返回的数据类型, 没有会乱码</p> 
<p>params: {}// 里面是请求参数</p> 
<p>})</p> 
<p>.then(data =&gt; {<!-- --></p> 
<p>let blob = new Blob([data], {<!-- --></p> 
<p>type: "application/vnd.ms-excel"</p> 
<p>});</p> 
<p>var link = document.createElement('a');</p> 
<p>link.href = window.URL.createObjectURL(blob);</p> 
<p>link.download = "修改文件名称.xls";</p> 
<p>link.click()</p> 
<p>})</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4c7ba238f55feba340775c3814155723/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android 界面加载卡顿严重，Skipped 56 frames! The application may be doing too much work on its main thread</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/abdce0e161ddcef91404930f8782f84e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue&#43;axios 开发环境与生产环境配置请求接口，本地开发和线上开发有多个请求地址怎么处理？上线后自动获取ip,不需改请求地址可运用多个项目中</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
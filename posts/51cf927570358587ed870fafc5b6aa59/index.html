<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux图形栈-从X到Wayland - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux图形栈-从X到Wayland" />
<meta property="og:description" content="Ars思考着Linux图形栈的演变，从最初的...
作者：EvanJenkins 2011年5月22日,下午12:30中央标准时间
原文名称：The Linux graphics stack from X to Wayland
1980年代初，麻省理工学院计算机科学系(以下简称MIT)的BobScheifler着手为新的窗口系统制定规则。他决定取名为X，因为此窗口系统是基于W窗口系统的一个改进，W窗口系统源于V系统。X窗口系统将掀起一场图形领域的革命。当时X确实成为了所有类UNIX窗口系统的标准图形服务器，因为它的特点和理念远远超越了竞争对手。短短几年时间，UNIX社区全部接纳了X窗口系统。
在这篇文章中，我们将一瞥Linux图形栈的发展历程，从最初的X客户端/服务器到现在的Wayland所做的一系列努力。
X变得如此特殊，不得不说，这简直是一个传奇。X是面向网络、基于分布式的第一个图形服务器。在分时系统上，一个X服务器可以同时为多个客户端服务。X的网络协议使本地窗口能够显示在远程机器上。实际上，X就是面向网络的，协议独立于硬件。通过网络协议发送显示请求，运行于某个类UNIX平台的X客户端可以在完全不同硬件平台的类UNIX系统上显示。
窗口外观独立于X服务器。X协议定义了显示设备和窗口原语信息，窗口的具体外观只与控件库、窗口管理器和桌面环境有关。
在BobScheifler的主导和MIT的管理下，更多的人开始对此萌发兴趣。为了X将来更好的发展，那时的企业翘楚，例如美国的数字电子公司(DEC)，可免费获取到源代码。同时，一批厂商询问MIT，是否有某种措施能够维持源代码的完整性，好让X能够造福于所有对此感兴趣的组织机构。MIT同意了，不久之后，MITX协会成立，同时发布了源码，包括DEC对X的改善部分。此次X源码的发布确实是一个值得关注的事件。厂商们意识到，X已经有很高的价值了，需要避免某个公司获得对X的控制，更好的保护大家的心血，而维持X源码的开放是最重要的原则，同时MITX协会一直对X源码拥有版权，避免了X被私人商业公司拥有。
1988年，协会招募了一个高级开放者KeithPackard，他将重新实现X服务器的核心。现在，Packard在Linux图形栈领域已经众人皆知了。
尽管X在UNIX和Linux图形栈领域占据统治地位，但由于X的流行，基于X的、产生大量绘制请求的软件和大量的软件最终拖累了X本身。90年代，Linux快速流行起来，对于运行于同一机器上的XServer/client，开始使用X配置文件，同时X开始捆绑在很多Linux发行版上。对于本地显示来说，X基于网络的设计毫无用处，这一曾经大肆吹嘘的优点现在反而成为视频绘制的瓶颈。
这段时间，个人电脑的销售激增，专业图形显卡的复杂特性开始超越X的处理能力，更多高性能的显卡持续不断的开发出来。
转换表映射（以下简称TTM）的出现
2004年左右，一些Linux开发者开始对X缓慢的发展逐渐感到失望。1992年，他们开始转向OpenGL,一种图像渲染API，最初是用来显示2D和3D图形的（源于硅谷图形公司开发的）。经过几年X在显卡上绘制3D图形的尝试，最终没有一个方案可行。
然后在2007年，ThomasHellstrom, Eric Anholt, 和DaveAirlie共同开发了一个内存管理模块，他们称做TTM。TTM用于显存和系统内存之间的缓冲拷贝。当时在Linux社区引起了很大反响。它为那些对3D性能有严格要求的图形应用带来了希望。这个方法就是将内存缓冲区作为第一个类对象传递给应用程序使用，同时允许应用程序分配和处理内存缓冲区中的图形信息。TTM可以管理主机上所有应用程序的缓冲区，并且提供GPU和CPU之间的同步，这个过程是通过一个特殊信号fence完成的。当GPU完成对某个缓冲区的显示处理后，通过fence信号将此缓冲区的控制权交给此缓冲区对应的应用程序，此时CPU重新接管缓冲区。
平心而论，应用程序对GPU访问方式的标准化，TTM确实做了一个勇敢的尝试，它是Linux上针对所有显卡驱动的内存管理器，简言之，TTM尝试提供所有图形应用程序可能需要的所有操作。不幸的是，TTM代码量和API过于庞大，而每一个独立的开源驱动仅仅只需要API集合中的一个小子集。大量的API容易使开发者迷惑，他们需要决定选择使用哪个API。最大的抱怨是TTM还有一些性能问题，可能是由于CPU和GPU之间的信号同步机制（fence)导致，或者是缓冲区对象的拷贝效率太低。TTM可能确实要处理很多事情，不过这不能成为它变得缓慢的借口。
2008年，ReenterKeithPackard宣布了一个TTM的替代方案。Keith到目前为止还在Intel工作。得益于Eric开发TTM的经验教训，同时在Eric的帮助下，他们重写了TTM。新的API叫图形执行管理器（以下简称GEM），一般开发者通过API就能大致猜到下一步要做什么，相对于TTM庞大的API，开发者不会迷失于GEM的API中。
相对于TTM，GEM有很多提升，其中一个计较有意义的提升就是API接口的设计很严谨，同时TTM中伤脑筋的fence信号概念也去掉了。Keith和Eric让应用程序接管API之上的内存部分，GEM则专心处理GPU可访问的内存部分，并处理显卡执行的上下文信息。应用与内核空间的交互访是通过ioctl()调用，不存在TTM那种不停的缓冲区拷贝。GEM更像是一个面向流的API，而不是内存管理器。
GEM允许应用程序共享内存缓冲区，GPU处理的内存空间就不需要重新装载。以下是原始的发行说明：
“Gem为Linux操作系统提供简单的机制来管理图形数据和控制执行流程。很多内核子系统实现了这种机制。”
随着GEM在2008年5月的出现，给Linux的图形栈带来了更多的希望。GEM并不处理所有事情。例如，GPU执行的命令由设备对应驱动提供。因为Keith和Eric在Intel工作，GEM对Intel驱动支持的开源代码编写工作理所当然落在了他们身上。同时希望GEM能够支持更多其他的驱动，例如三个最大的显卡制造商。
然而，采用GEM的非intel显卡驱动很慢。一些迹象表明AMD驱动选择了一个“类似GEM和TTM管理器”的方案，预示着AMD并不愿意加入到GEM的阵营，GEM面临单枪匹马的危险。
TTM和GEM尝试在X中整合对GPU的操作以解决Linux图形栈上的3D加速问题。两者都是为了更好的提升不同图形库的显示性能，例如OpenGL(依赖于X),Qt(依赖于X)和GTK&#43;（也是依赖于X)。问题是X处于所有图形库和内核之间，只有内核能够访问设备驱动，然后驱动才能访问到GPU。
X已经老掉牙了。X拥有数百万行代码，很多代码已经很陈旧，那是还没有GPU，没有专业的晶体管处理可编程着色技术或者旋转操作以及顶点翻转，既不知道高密度采样和用插值法减少反锯齿效果的概念，也不清楚如何创建极高精度的颜色空间。此时不同往日，X已经不能满足现在的需求了。
Wayland:一个新的显示管理器
2008年，一个叫KristianHøgsberg 的软件工程师在波士顿的市郊上开着车，可能是去往工作的路上，亦或是回家，软件工程师正深入的思考着，他们花费了大量时间解决复杂的问题，将问题打散并进行重构。经常，当他们工作疲劳休息时，会产生一些灵感，这种灵感往往能够为项目带来更大的突破。当人们在洗澡或者在厨房烹饪时，或者在驾驶途中，这种灵感更易产生。当Høgsberg驱车于马萨诸塞州Wayland一个很小的村庄时，他的大脑中迸出一个想法并渐渐成型，这个想法用他自己的话说：
“核心思想是所有窗口被重定向，我们可以让所有客户端自己去渲染自己，然后传递一个缓冲句柄给显示服务器，显示服务器中的混合器完成窗口显示工作。其中一个目标就是让X服务器运行于Wayland上，首先支持全屏窗口（例如Xnest)，然后支持父窗口等，直到X被最终淘汰。”
他的想法是写一个全新的显示管理器，管理器可绕过X直接向内核发送3D显示请求。X自己就是显示管理器的一个客户端，正如以上作者所说，新的显示管理器取名为“Wayland”，以此表达对这个小镇的敬意。
这仅仅只是一个想法。很多人每天都会产生大量聪明的想法，但最终都被生活中的杂事所磨灭。Høgsberg正从事于图形渲染库方面的工作，他大概觉得，如果应用程序都能直接访问GPU，没有X在中间搅局，那一切事情都变得简单了。他着手写代码解决这个问题。根据Intel的员工KeithPackard所说，两周后，Høgsber完成了雏形。
Wayland的一个关键特点是完成渲染工作的API完全不依赖X。为了保持兼容性，X服务器本身就是Wayland的客户端,所有X所做的渲染直接发给Wayland。像X一样，Wayland仅仅定义协议。Wayland的体系结构和X本身的特点，给X客户端的移植带来了很大便利，同时还兼容以前的X客户端程序。
Wayland显示管理器会使用内核中的GEM(图形执行管理器)、evdev(输入事件驱动)和kms(内核模式切换）。Wayland有自己的混合器，这与X形成鲜明的对比，X依赖外部的混合器处理显示相关的内存缓冲。
Wayland也会使用DRI2。Wayland混合器和Wayland客户端都能够访问屏幕显示相关的资源。当客户端更新了这个缓冲，混合器将更新桌面，并重绘屏幕。
Wayland确实解决了很多X无法解决的问题，大家对此项目感到兴奋，一群聪明的人正在实现它，并且Intel和redhat也在支持这个项目。
但是还有一些障碍需要克服。两个最大的障碍就是开发兼容NVIDIA和AMD的开源驱动。第三大显卡厂商Intel已经兼容了Wayland，因为GEM内核模块就是基于Intel驱动开发的。
谁会为Wayland更新AMD和NVIDIA的开源驱动？对开发者来说，Linux下开源显卡驱动的开发很折磨人，因为你没有完整的硬件规范手册，甚至什么资料都没有，只能通过枯燥的逆向工程获取显卡规范信息。
nouveau驱动就是一个很好的例子。当时，NVIDIA开发者放出话来，表示我们没有支持Wayland的计划。所有工作压向Linux社区，有时有一些厂商的支持，有时什么都没有。在nouveau项目中，开发者正通过逆向工程积极的开发NVIDIA驱动。一个叫做Renouveau(nouveau的逆向工程）的执行流程如下：
1.记录MMIO寄存器的内容；
2.绘制图形；
3.记录寄存器中的新值；
然后向Renouveau工程的ftp服务器发送绘制前后内存转储的文本格式差异信息，这些文件是为以后的显卡分析做准备。
相对于NVIDIA，AMD这方面的工作进展更顺利。过去几年中，新成立的团队正在开发AMD的开源驱动，根据开发团队周期性发布的规范说明，各地开发者皆可持续驱动的研发。驱动名称是fglx(FireGLand Radeon for X）,Linux社区每月都可以从AMD获得显卡的最新信息。
Wayland在Linux图形栈方面很有优势。最近，Ubuntu计划在Wayland上使用他们自己的窗口管理器Unity。为了确保硬件驱动能在新的图形架构上发挥最大性能，Intel强力支持协助开发GEM，雇佣了Wayland的开发者们。
除此以外，图形领域正在两极分化。AMD和NVIDIA正忙于争夺市场份额的激烈竞争，开源社区的开发需求还排不上他们的议程。
Linux社区是基于协作来完成开发。多年以来，通过合作和开放，Linux急速发展，而Linux图形栈似乎不为所动。图形硬件厂商可选择是否向开源社区贡献力量，而我对他们不情愿开源的态度感到吃惊。那些拥有高性能图形显卡的厂商难道不想让他们的用户拥有最好的用户体验？将产品信息隐藏起来，这些难道不会伤及他们的产品线？可以毫无疑问的说-他们违反了开源精神。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/51cf927570358587ed870fafc5b6aa59/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-01T21:13:12+08:00" />
<meta property="article:modified_time" content="2021-11-01T21:13:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux图形栈-从X到Wayland</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="cjk" style="background:transparent;border:none;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:12pt;">Ars</span></span></span></span></span><span style="color:#000000;">思考着</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:12pt;">Linux</span></span></span></span></span><span style="color:#000000;">图形栈的演变，从最初的</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:12pt;">...</span></span></span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;"><span style="color:#000000;">作者：</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:8pt;">EvanJenkins 2011</span></span></span></span></span><span style="color:#000000;">年</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:8pt;">5</span></span></span></span></span><span style="color:#000000;">月</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:8pt;">22</span></span></span></span></span><span style="color:#000000;">日</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:8pt;">,</span></span></span></span></span><span style="color:#000000;">下午</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:8pt;">12:30</span></span></span></span></span><span style="color:#000000;">中央标准时间</span></p> 
<p>原文名称：<span style="color:#263034;font-family:NoticiaBold, 'Times New Roman', serif;"><span style="font-size:14px;">The Linux graphics stack from X to Wayland</span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">1980</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年代初，麻省理工学院计算机科学系</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">(</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">以下简称</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">MIT)</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">BobScheifler</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">着手为新的窗口系统制定规则。他决定取名为</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，因为此窗口系统是基于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">W</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">窗口系统的一个改进，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">W</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">窗口系统源于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">V</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">系统。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">窗口系统将掀起一场图形领域的革命。</span></span></span><span style="color:#000000;">当时</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">确实</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">成为了所有类</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">UNIX</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">窗口系统的标准图形服务器，因为它的特点和理念远远超越了竞争对手。短短几年时间，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">UNIX</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">社区全部接纳了</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">窗口系统。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">在这篇文章中，我们将一瞥</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">图形栈的发展历程，从最初的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">客户端</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">/</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">服务器到现在的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">所做的一系列努力。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">变得如此特殊，不得不说，这简直是一个传奇。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">是面向网络、基于分布式的第一个图形服务器。在分时系统上，一个</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">服务器可以同时为多个客户端服务。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">的</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">网络协议使本地窗口能够显示在远程机器上。实际上，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">就是</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">面向网络的，协议独立于硬件。通过网络协议发送显示请求，运行于某个类</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">UNIX</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">平台的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">客户端可以在完全不同硬件平台的类</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">UNIX</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">系统上显示。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">窗口外观独立于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">服务器。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">协议定义了显示设备和窗口原语信息，窗口的具体外观只与控件库、窗口管理器和桌面环境有关。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">BobScheifler</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的主导和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">MIT</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的管理下，更多的人开始对此萌发兴趣。为了</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">将来更好的发展</span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，那时的企业翘楚，例如美国的数字电子公司</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">(DEC)</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，可免费获取到源代码。同时，一批厂商询问</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">MIT</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，是否有某种措施能够维持源代码的完整性，好让</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">能够造福于</span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">所有对此感兴趣的组织机构。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">MIT</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">同意了，不久之后，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">MITX</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">协会成立，同时发布了源码，包括</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">DEC</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">对</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的改善部分。此次</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">源码的发布确实是一个值得关注的事件。厂商们意识到，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">已经有很高的价值了，需要避免某个公司获得对</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的控制，更好的保护大家的心血，而维持</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">源码的开放是最重要的原则，同时</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">MITX</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">协会一直对</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">源码拥有版权，避免了</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">被私人商业公司拥有。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">1988</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年，协会招募了一个高级开放者</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">KeithPackard</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，他将重新实现</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">服务器的核心。现在，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Packard</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">图形栈领域已经众人皆知了。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">尽管</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">UNIX</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">图形栈领域占据统治地位，但由于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的流行，基于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">的、产生</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">大量绘制请求的软件和大量的软件最终拖累了</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">本身。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">90</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年代，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">快速流行起来，对于运行于同一机器上的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">XServer/client</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，开始使用</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">配置文件，同时</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">开始捆绑在很多</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">发行版上。对于本地显示来说，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">基于网络的设计毫无用处，这一曾经大肆吹嘘的优点现在反而成为视频绘制的瓶颈。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">这段时间，个人电脑的销售激增，专业图形显卡的复杂特性开始超越</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的处理能力，更多高性能的显卡持续不断的开发出来。</span></span></span></p> 
<p class="cjk"><strong style="font-weight:bold;"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:16pt;"><span style="font-weight:normal;">转换表映射（以下简称</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="font-size:16pt;"><span style="font-weight:normal;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:16pt;"><span style="font-weight:normal;">）的出现</span></span></span></span></strong></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">2004</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年左右，一些</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">开发者开始对</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">X</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">缓慢的发展逐渐感到失望。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">1992</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年，他们开始转向</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">OpenGL,</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">一种图像渲染</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，最初是用来显示</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">2D</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">3D</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">图形的（源于硅谷图形公司开发的）。经过几年</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">在显卡上绘制</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">3D</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">图形的尝试，最终没有一个方案可行。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">然后在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">2007</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">ThomasHellstrom, Eric Anholt, </span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">DaveAirlie</span></span></span></span></span><span style="color:#000000;">共同</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">开发了一个内存管理模块，他们称做</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">用于显存和系统内存之间的缓冲拷贝。当时在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">社区引起了很大反响。它为那些对</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">3D</span></span></span></span></span><span style="color:#000000;">性能</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">有严格要求的图形应用带来了希望。这个方法就是将内存缓冲区作为第一个类对象传递给应用程序使用，同时允许应用程序分配和处理内存缓冲区中的图形信息。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">可以管理主机上所有应用程序的缓冲区，并且提供</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">CPU</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">之间的同步，这个过程是通过一个特殊信号</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">fence</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">完成的。当</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">完成对某个缓冲区的显示处理后，通过</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">fence</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">信号将此缓冲区的控制权交给此缓冲区对应的应用程序，此时</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">CPU</span></span></span></span></span><span style="color:#000000;">重新接管缓冲区</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">平心而论，应用程序对</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;">访问方式</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的标准化，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">TTM</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">确实做了一个勇敢的尝试，它是</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">上针对所有显卡驱动的内存管理器，简言之，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">尝试提供所有图形应用程序可能需要的所有操作。不幸的是，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">代码量和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">过于庞大，而每一个独立的开源驱动仅仅只需要</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;">集合中</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的一个小子集。大量的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">容易使开发者迷惑，他们需要决定选择使用哪个</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">。最大的抱怨是</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;">还</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">有一些性能问题，可能是由于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">CPU</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">之间的信号同步机制（</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">fence)</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">导致，或者是缓冲区对象的拷贝效率太低。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">可能确实要处理很多事情，不过这不能成为它变得缓慢的借口。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">2008</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">ReenterKeithPackard</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">宣布了一个</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的替代方案。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Keith</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">到目前为止还在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">工作。得益于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Eric</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">开发</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的经验教训，同时在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Eric</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的帮助下，他们重写了</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">。新的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">叫图形执行管理器（以下简称</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">GEM</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">），一般开发者通过</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">就能大致猜到下一步要做什么，相对于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">TTM</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">庞大的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">API</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，开发者不会迷失于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">GEM</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">中。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">相对于</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">有很多提升，其中一个计较有意义的提升就是</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">接口的设计很严谨，同时</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">TTM</span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">中伤脑筋的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">fence</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">信号概念也去掉了。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Keith</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Eric</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">让应用程序接管</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">之上的内存部分，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">则专心处理</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;">可访问</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的内存部分，并处理显卡执行的上下文信息。应用与内核空间的交互访是通过</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">ioctl()</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">调用，不存在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">那种不停的缓冲区拷贝。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">更像是一个面向流的</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，而不是内存管理器。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">允许应用程序共享内存缓冲区，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;">处理的</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">内存空间就不需要重新装载。以下是原始的发行说明：</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">“Gem</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">为</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">操作系统提供简单的机制来管理图形数据和控制执行流程。很多内核子系统实现了这种机制。</span></span></span><span style="color:#000000;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span style="font-size:10pt;">”</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">随着</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">2008</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">年</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">5</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">月的出现，给</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">的图形栈带来了更多的希望。</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">并不处理所有事情。例如，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">执行的命令由设备对应驱动提供。因为</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Keith</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Eric</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">在</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">工作，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">对</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">驱动支持的开源代码编写工作理所当然落在了他们身上。同时希望</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">能够支持更多其他的驱动，例如三个最大的显卡制造商。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">然而，采用</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">的非</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">intel</span></span></span></span></span><span style="color:#000000;">显卡</span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">驱动很慢。一些迹象表明</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">驱动选择了一个</span></span></span><span style="color:#000000;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span style="font-size:10pt;">“</span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">类似</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">和</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">管理器</span></span></span><span style="color:#000000;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span style="font-size:10pt;">”</span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">的方案，预示着</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;">并</span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">不愿意加入到</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;">的</span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">阵营，</span></span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Helvetica, Arial, sans-serif;"><span style="font-size:10pt;">面临单枪匹马的危险。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">TTM</span></span></span></span></span><span style="color:#000000;">和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;">尝试在</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">中整合对</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;">的操作以解决</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;">图形栈上的</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">3D</span></span></span></span></span><span style="color:#000000;">加速问题。两者都是为了更好的提升不同图形库的显示性能，例如</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">OpenGL(</span></span></span></span></span><span style="color:#000000;">依赖于</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X),Qt(</span></span></span></span></span><span style="color:#000000;">依赖于</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X)</span></span></span></span></span><span style="color:#000000;">和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GTK+</span></span></span></span></span><span style="color:#000000;">（也是依赖于</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X)</span></span></span></span></span><span style="color:#000000;">。问题是</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">处于所有图形库和内核之间，只有内核能够访问设备驱动，然后驱动才能访问到</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;">。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">已经老掉牙了</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">。</span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">拥有数百万行代码，很多代码已经很陈旧，那是还没有</span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">，没有专业的晶体管处理可编程着色技术或者旋转操作以及顶点翻转，既不知道高密度采样和用插值法减少反锯齿效果的概念，也不清楚如何创建极高精度的颜色空间。此时不同往日，</span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">已经不能满足现在的需求了。</span></span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.58cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:NoticiaBold, 'Times New Roman';"><span style="font-size:16pt;">Wayland:</span></span></span></span></span><span style="color:#000000;"><span style="font-size:16pt;">一个新的显示管理器</span></span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">2008</span></span></span></span></span><span style="color:#000000;">年，一个叫</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Kristian</span></span></span><span style="color:#000080;"><span lang="zxx"><a href="http://en.wikipedia.org/wiki/Kristian_H%C3%B8gsberg" rel="nofollow"><span style="color:#000000;"><span style="text-decoration:none;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Høgsberg</span></span></span></span></a></span></span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;"> </span></span></span></span></span><span style="color:#000000;">的软件工程师在波士顿的市郊上开着车，可能是去往工作的路上，亦或是回家，软件工程师正深入的思考着，他们花费了大量时间解决复杂的问题，将问题打散并进行重构。经常，当他们工作疲劳休息时，会产生一些灵感，这种灵感往往能够为项目带来更大的突破。当人们在洗澡或者在厨房烹饪时，或者在驾驶途中，这种灵感更易产生。</span><span style="color:#000000;">当</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Høgsberg</span></span></span></span></span><span style="color:#000000;">驱车于马萨诸塞州</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">一个很小的村庄时，他的大脑中迸出一个想法并渐渐成型，这个想法用他自己的话说：</span></p> 
<blockquote style="border:none;"> 
 <p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="line-height:.53cm;">“</span><span style="background-color:transparent;line-height:.53cm;">核心思想是所有窗口被重定向，我们可以让所有客户端自己去渲染自己，然后传递一个缓冲句柄给显示服务器，显示服务器中的混合器完成窗口显示工作。其中一个目标就是让</span><span style="background-color:transparent;font-family:'Liberation Serif', 'Times New Roman', serif;line-height:.53cm;"><span lang="en-us"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span><span style="background-color:transparent;line-height:.53cm;">服务器运行于</span><span style="background-color:transparent;font-family:'Liberation Serif', 'Times New Roman', serif;line-height:.53cm;"><span lang="en-us"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span><span style="background-color:transparent;line-height:.53cm;">上，首先支持全屏窗口（例如</span><span style="background-color:transparent;font-family:'Liberation Serif', 'Times New Roman', serif;line-height:.53cm;"><span lang="en-us"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Xnest)</span></span></span></span><span style="background-color:transparent;line-height:.53cm;">，然后支持父窗口等，直到</span><span style="background-color:transparent;font-family:'Liberation Serif', 'Times New Roman', serif;line-height:.53cm;"><span lang="en-us"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span><span style="background-color:transparent;line-height:.53cm;">被最终淘汰。</span><span style="background-color:transparent;line-height:.53cm;"><span style="font-family:Arial, sans-serif;">”</span></span></p> 
</blockquote> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">他的想法是写一个全新的显示管理器，管理器可绕过</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">直接向内核发送</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">3D</span></span></span></span></span><span style="color:#000000;">显示请求。</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">自己就是显示管理器的一个客户端，正如以上作者所说，新的显示管理器取名为</span><span style="color:#000000;"><span style="font-family:Arial, sans-serif;">“</span></span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland”</span></span></span></span></span><span style="color:#000000;">，以此表达对这个小镇的敬意。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">这仅仅只是一个想法。很多人每天都会产生大量聪明的想法，但最终都被生活中的杂事所磨灭。</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Høgsberg</span></span></span></span></span><span style="color:#000000;">正从事于图形渲染库方面的工作，他大概觉得，如果应用程序都能直接访问</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GPU</span></span></span></span></span><span style="color:#000000;">，没有</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">在中间搅局，那一切事情都变得简单了。他着手写代码解决这个问题。根据</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;">的员工</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">KeithPackard</span></span></span></span></span><span style="color:#000000;">所说，两周后，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Høgsber</span></span></span></span></span><span style="color:#000000;">完成了雏形。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">的一个关键特点是完成渲染工作的</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">API</span></span></span></span></span><span style="color:#000000;">完全不依赖</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">。为了保持兼容性，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">服务器本身就是</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">的客户端</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">,</span></span></span></span></span><span style="color:#000000;">所有</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">所做的渲染直接发给</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">。像</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">一样，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">仅仅定义协议。</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">的体系结构和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">本身的特点，给</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">客户端的移植带来了很大便利，同时还兼容以前的</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">客户端程序。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">显示管理器会使用内核中的</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM(</span></span></span></span></span><span style="color:#000000;">图形执行管理器</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">)</span></span></span></span></span><span style="color:#000000;">、</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">evdev(</span></span></span></span></span><span style="color:#000000;">输入事件驱动</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">)</span></span></span></span></span><span style="color:#000000;">和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">kms(</span></span></span></span></span><span style="color:#000000;">内核模式切换）。</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">有自己的混合器，这与</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">形成鲜明的对比，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">依赖外部的混合器处理显示相关的内存缓冲。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">也会使用</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">DRI2</span></span></span></span></span><span style="color:#000000;">。</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">混合器和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">客户端都能够访问屏幕显示相关的资源。当客户端更新了这个缓冲，混合器将更新桌面，并重绘屏幕。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">确实解决了很多</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">X</span></span></span></span></span><span style="color:#000000;">无法解决的问题，大家对此项目感到兴奋，一群聪明的人正在实现它，并且</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;">和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">redhat</span></span></span></span></span><span style="color:#000000;">也在支持这个项目。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">但是还有一些障碍需要克服。两个最大的障碍就是开发兼容</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">NVIDIA</span></span></span></span></span><span style="color:#000000;">和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;">的开源驱动。第三大显卡厂商</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;">已经兼容了</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">，因为</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;">内核模块就是基于</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;">驱动开发的。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">谁会为</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">更新</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;">和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">NVIDIA</span></span></span></span></span><span style="color:#000000;">的开源驱动？对开发者来说，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;">下开源显卡驱动的开发很折磨人，因为你没有完整的硬件规范手册，甚至什么资料都没有，只能通过枯燥的逆向工程获取显卡规范信息。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">nouveau</span></span></span></span></span><span style="color:#000000;">驱动就是一个很好的例子。当时，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">NVIDIA</span></span></span></span></span><span style="color:#000000;">开发者放出话来，表示我们没有支持</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">的计划。所有工作压向</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;">社区，有时有一些厂商的支持，有时什么都没有。在</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">nouveau</span></span></span></span></span><span style="color:#000000;">项目中，开发者正通过逆向工程积极的开发</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">NVIDIA</span></span></span></span></span><span style="color:#000000;">驱动。一个叫做</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Renouveau(nouveau</span></span></span></span></span><span style="color:#000000;">的逆向工程）的执行流程如下：</span></p> 
<blockquote style="border:none;"> 
 <p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">1.</span></span></span></span></span><span style="color:#000000;">记录</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">MMIO</span></span></span></span></span><span style="color:#000000;">寄存器的内容；</span></p> 
 <p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">2.</span></span></span></span></span><span style="color:#000000;">绘制图形；</span></p> 
 <p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">3.</span></span></span></span></span><span style="color:#000000;">记录寄存器中的新值；</span></p> 
</blockquote> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">然后向</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Renouveau</span></span></span></span></span><span style="color:#000000;">工程的</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">ftp</span></span></span></span></span><span style="color:#000000;">服务器发送绘制前后内存转储的文本格式差异信息，这些文件是为以后的显卡分析做准备。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">相对于</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">NVIDIA</span></span></span></span></span><span style="color:#000000;">，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;">这方面的工作进展更顺利。过去几年中，新成立的团队正在开发</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;">的开源驱动，根据开发团队周期性发布的规范说明，各地开发者皆可持续驱动的研发。驱动名称是</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">fglx(FireGLand Radeon for X</span></span></span></span></span><span style="color:#000000;">）</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">,Linux</span></span></span></span></span><span style="color:#000000;">社区每月都可以从</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;">获得显卡的最新信息。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">在</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Linux</span></span></span></span></span><span style="color:#000000;">图形栈方面很有优势。最近，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Ubuntu</span></span></span></span></span><span style="color:#000000;">计划在</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">上使用他们自己的窗口管理器</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Unity</span></span></span></span></span><span style="color:#000000;">。为了确保硬件驱动能在新的图形架构上发挥最大性能，</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Intel</span></span></span></span></span><span style="color:#000000;">强力支持协助开发</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">GEM</span></span></span></span></span><span style="color:#000000;">，雇佣了</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">Wayland</span></span></span></span></span><span style="color:#000000;">的开发者们。</span></p> 
<p class="cjk" style="background:transparent;border:none;line-height:.53cm;"><span style="color:#000000;">除此以外，图形领域正在两极分化。</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">AMD</span></span></span></span></span><span style="color:#000000;">和</span><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us"><span style="color:#000000;"><span style="font-family:Arial, sans-serif;"><span style="font-size:10pt;">NVIDIA</span></span></span></span></span><span style="color:#000000;">正忙于争夺市场份额的激烈竞争，开源社区的开发需求还排不上他们的议程。</span></p> 
<p class="cjk" style="background:transparent;line-height:100%;"><span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">Linux</span></span><span style="color:#000000;">社区是基于协作来完成开发。多年以来，通过合作和开放，<span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">Linux</span></span></span><span style="color:#000000;">急速发展，而<span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">Linux</span></span></span><span style="color:#000000;">图形栈似乎不为所动。图形硬件厂商可选择是否向开源社区贡献力量，而我对他们不情愿开源的态度感到吃惊。那些拥有高性能图形显卡的厂商难道不想让他们的用户拥有最好的用户体验？将产品信息隐藏起来，这些难道不会伤及他们的产品线？可以毫无疑问的说<span style="font-family:'Liberation Serif', 'Times New Roman', serif;"><span lang="en-us">-</span></span></span><span style="color:#000000;">他们违反了开源精神。</span></p> 
<div></div> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e399f870a3ac9ddb372cd74fda66b5ba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用duet或spacedesk实现iPad作为电脑扩展屏幕</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2aac8cfed8d1f3fbc85af37cde986e12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DRM (Direct Rendering Manager) 的发展历史</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
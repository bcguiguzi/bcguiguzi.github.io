<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>目前使用较多的运维监控工具------zabbix监控 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="目前使用较多的运维监控工具------zabbix监控" />
<meta property="og:description" content="zabbix监控 一、zabbix介绍二、zabbix功能三、部署ansible1、安装nginx2、安装mariadb3、安装php4、部署zabbix server5、配置告警自动发布邮件6、关闭http服务7、关闭http和agent服务 一、zabbix介绍 服务器---&gt;健康状态（consul）[CPU、内存、磁盘空间、服务应用]---&gt;监控
cacti仙人掌------&gt;nagios------&gt;zabbix
1、SNMP简单网络管理协议是专门设计用于在IP网络协议网络节点（服务器、工作站、路由器、交换机及HUBS等）的一种标准协议，他是应用层协议。
2、GD库是php处理图形的扩展库，GD库提供了一系列用来处理图片的API，使用GD库可以处理图片，或者生成图片，也可以给图片加水印。
3、Nagios是一款开源的免费网络监视工具，能有效监控Windows、Linux、Unix的主机状态，加偶安吉路由器等网络设备，打印机等。在系统或服务状态异常时发出邮件或短信报警第一时间通知网站运维人员，在状态恢复后，发出正常邮件或短信通知。
4、Zabbix是一个基于WEB界面的提供分布式系统监视及网络监视功能的企业级的开源解决方案。
zabbix能监视各种网络参数，保证服务器系统的安全运营，并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。
zabbix由两部分构成：zabbix server和可选组件zabbix agent
zabbix server可以通过SNMP，zabbix agent，ping，端口监视等方法
二、zabbix功能 ● 数据采集
● 灵活的阈值定义
● 高度可配置化的告警
● 实时图形
● web监控功能
● 可视化选项繁多
● 配置简单
三、部署ansible 主机操作系统IP地址serverCentOS7.6192.168.238.10clientCentOS7.6192.168.238.20 1、安装nginx [root@localhost ~]# cd /etc/yum.repos.d/ [root@localhost yum.repos.d]# ls local.repo repos.bak [root@localhost yum.repos.d]# cp local.repo nginx.repo	[root@localhost yum.repos.d]# mv local.repo repos.bak/ [root@localhost yum.repos.d]# cd repos.bak/ [root@localhost repos.bak]# ls CentOS-Base.repo CentOS-Debuginfo.repo CentOS-Media.repo CentOS-Vault.repo CentOS-CR.repo CentOS-fasttrack.repo CentOS-Sources.repo local.repo [root@localhost repos." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/0e5fee0d9bf4d4122ea717c6fc621ee3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-06T09:45:32+08:00" />
<meta property="article:modified_time" content="2021-04-06T09:45:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">目前使用较多的运维监控工具------zabbix监控</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-kimbie-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>zabbix监控</h4> 
 <ul><li><a href="#zabbix_1" rel="nofollow">一、zabbix介绍</a></li><li><a href="#zabbix_12" rel="nofollow">二、zabbix功能</a></li><li><a href="#ansible_20" rel="nofollow">三、部署ansible</a></li><li><ul><li><a href="#1nginx_25" rel="nofollow">1、安装nginx</a></li><li><a href="#2mariadb_63" rel="nofollow">2、安装mariadb</a></li><li><a href="#3php_98" rel="nofollow">3、安装php</a></li><li><a href="#4zabbix_server_266" rel="nofollow">4、部署zabbix server</a></li><li><a href="#5_383" rel="nofollow">5、配置告警自动发布邮件</a></li><li><a href="#6http_433" rel="nofollow">6、关闭http服务</a></li><li><a href="#7httpagent_448" rel="nofollow">7、关闭http和agent服务</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="zabbix_1"></a>一、zabbix介绍</h2> 
<p><code>服务器---&gt;健康状态（consul）[CPU、内存、磁盘空间、服务应用]---&gt;监控</code><br> <code>cacti仙人掌------&gt;nagios------&gt;zabbix</code><br> 1、SNMP简单网络管理协议是专门设计用于在IP网络协议网络节点（服务器、工作站、路由器、交换机及HUBS等）的一种标准协议，他是应用层协议。<br> 2、GD库是php处理图形的扩展库，GD库提供了一系列用来处理图片的API，使用GD库可以处理图片，或者生成图片，也可以给图片加水印。<br> 3、Nagios是一款开源的免费网络监视工具，能有效监控Windows、Linux、Unix的主机状态，加偶安吉路由器等网络设备，打印机等。在系统或服务状态异常时发出邮件或短信报警第一时间通知网站运维人员，在状态恢复后，发出正常邮件或短信通知。<br> 4、Zabbix是一个基于WEB界面的提供分布式系统监视及网络监视功能的企业级的开源解决方案。<br> zabbix能监视各种网络参数，保证服务器系统的安全运营，并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。<br> zabbix由两部分构成：zabbix server和可选组件zabbix agent<br> zabbix server可以通过SNMP，zabbix agent，ping，端口监视等方法</p> 
<h2><a id="zabbix_12"></a>二、zabbix功能</h2> 
<p>● 数据采集<br> ● 灵活的阈值定义<br> ● 高度可配置化的告警<br> ● 实时图形<br> ● web监控功能<br> ● 可视化选项繁多<br> ● 配置简单</p> 
<h2><a id="ansible_20"></a>三、部署ansible</h2> 
<table><thead><tr><th>主机</th><th>操作系统</th><th>IP地址</th></tr></thead><tbody><tr><td>server</td><td>CentOS7.6</td><td>192.168.238.10</td></tr><tr><td>client</td><td>CentOS7.6</td><td>192.168.238.20</td></tr></tbody></table> 
<h3><a id="1nginx_25"></a>1、安装nginx</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /etc/yum.repos.d/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># ls</span>
local.repo  repos.bak
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cp local.repo nginx.repo		</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># mv local.repo repos.bak/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cd repos.bak/</span>
<span class="token punctuation">[</span>root@localhost repos.bak<span class="token punctuation">]</span><span class="token comment"># ls</span>
CentOS-Base.repo  CentOS-Debuginfo.repo  CentOS-Media.repo    CentOS-Vault.repo
CentOS-CR.repo    CentOS-fasttrack.repo  CentOS-Sources.repo  local.repo
<span class="token punctuation">[</span>root@localhost repos.bak<span class="token punctuation">]</span><span class="token comment"># mv CentOS-Base.repo /etc/yum.repos.d/		#配置yum在线源</span>
<span class="token punctuation">[</span>root@localhost repos.bak<span class="token punctuation">]</span><span class="token comment"># cd ../</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># ls</span>
CentOS-Base.repo  nginx.repo  repos.bak
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim nginx.repo 		配置nginx源，用于下载nginx</span>

<span class="token punctuation">[</span>nginx<span class="token punctuation">]</span>
name<span class="token operator">=</span>nginx
baseurl<span class="token operator">=</span>http://nginx.org/packages/centos/7/<span class="token variable">$basearch</span>/
enabled<span class="token operator">=</span>1
gpgcheck<span class="token operator">=</span>0
</code></pre> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum clean			#清除元数据缓存</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum list			#加载元数据列表</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum -y install nginx			#yum安装nginx</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl start nginx</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl enable nginx</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># firewall-cmd --permanent --add-service=http --zone=public </span>
success
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># firewall-cmd --reload </span>
success
</code></pre> 
<h3><a id="2mariadb_63"></a>2、安装mariadb</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum -y install mariadb mariadb-server			#安装mariadb，该服务是MySQL的分支，端口和MySQL一样</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl enable mariadb.service </span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl start mariadb.service </span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># mysql_secure_installation 		#mysql安全配置向导</span>

Enter current password <span class="token keyword">for</span> root <span class="token punctuation">(</span>enter <span class="token keyword">for</span> none<span class="token punctuation">)</span>: 		<span class="token comment">#回车</span>
OK, successfully used password, moving on<span class="token punctuation">..</span>.

Set root password? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> y		<span class="token comment">#是否设置root密码</span>
New password: 				<span class="token comment">#输入密码123123</span>
Re-enter new password: 		<span class="token comment">#确认密码123123</span>
Password updated successfully<span class="token operator">!</span>
Reloading privilege tables<span class="token punctuation">..</span>
 <span class="token punctuation">..</span>. Success<span class="token operator">!</span>

Remove anonymous users? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> n			<span class="token comment">#是否移除匿名用户</span>
 <span class="token punctuation">..</span>. skipping.

Disallow root login remotely? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> n		<span class="token comment">#是否禁止root远程登录</span>
 <span class="token punctuation">..</span>. skipping.

Remove <span class="token function">test</span> database and access to it? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> n			<span class="token comment">#是否移除test数据库和访问权限</span>
 <span class="token punctuation">..</span>. skipping.

Reload privilege tables now? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span> y			<span class="token comment">#是否重载权限表</span>
 <span class="token punctuation">..</span>. Success<span class="token operator">!</span>

Thanks <span class="token keyword">for</span> using MariaDB<span class="token operator">!</span>
</code></pre> 
<h3><a id="3php_98"></a>3、安装php</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum -y install epel-release.noarch 		#安装epel扩展源</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm			#创建yum仓库源</span>
获取https://mirror.webtatic.com/yum/el7/webtatic-release.rpm
警告：/var/tmp/rpm-tmp.Jfeeu2: 头V4 RSA/SHA1 Signature, 密钥 ID 62e74ca5: NOKEY
准备中<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span>
正在升级/安装<span class="token punctuation">..</span>.
   1:webtatic-release-7-3             <span class="token comment">################################# [100%]</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum -y install php72w php72w-devel php72w-fpm php72w-gd php72w-mbstring php72w-mysql			</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
php72w 						<span class="token comment">#安装php</span>
php72w-devel 				<span class="token comment">#语言和语言开发包</span>
php72w-fpm 					<span class="token comment">#处理动态请求包</span>
php72w-gd 					<span class="token comment">#支持图像化处理</span>
php72w-mbstring 			<span class="token comment">#可以处理多文本字符串</span>
php72w-mysql				<span class="token comment">#数据库中支持php语言的驱动</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep php72w</span>
php72w-gd-7.2.34-1.w7.x86_64
php72w-fpm-7.2.34-1.w7.x86_64
mod_php72w-7.2.34-1.w7.x86_64
php72w-cli-7.2.34-1.w7.x86_64
php72w-devel-7.2.34-1.w7.x86_64
php72w-mbstring-7.2.34-1.w7.x86_64
php72w-pdo-7.2.34-1.w7.x86_64
php72w-mysql-7.2.34-1.w7.x86_64
php72w-common-7.2.34-1.w7.x86_64

<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># php -v			#查看php版本</span>
PHP 7.2.34 <span class="token punctuation">(</span>cli<span class="token punctuation">)</span> <span class="token punctuation">(</span>built: Oct  1 2020 13:37:37<span class="token punctuation">)</span> <span class="token punctuation">(</span> NTS <span class="token punctuation">)</span>
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 1997-2018 The PHP Group
Zend Engine v3.2.0, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 1998-2018 Zend Technologies

</code></pre> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim /etc/php-fpm.d/www.conf 		#修改php-fpm配置文件</span>
  8 user <span class="token operator">=</span> nginx
 10 group <span class="token operator">=</span> nginx

<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim /etc/nginx/conf.d/default.conf 			#修改nginx主配置文件</span>
  8     location / <span class="token punctuation">{<!-- --></span>
  9         root   /usr/share/nginx/html<span class="token punctuation">;</span>
 10         index  index.php index.html index.htm<span class="token punctuation">;</span>			<span class="token comment">#增加首页文件index.php</span>
 11     <span class="token punctuation">}</span>
 30     location ~ \.php$ <span class="token punctuation">{<!-- --></span>
 31         root           /usr/share/nginx/html<span class="token punctuation">;</span>
 32         fastcgi_pass   127.0.0.1:9000<span class="token punctuation">;</span>
 33         fastcgi_index  index.php<span class="token punctuation">;</span>
 34         fastcgi_param  SCRIPT_FILENAME  <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>			<span class="token comment">#$document_root 站点变量，表示站点根目录</span>
 35         include        fastcgi_params<span class="token punctuation">;</span>
 36     <span class="token punctuation">}</span>



<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim /etc/php.ini </span>
 202 short_open_tag <span class="token operator">=</span> On			<span class="token comment">#支持php短标签</span>
 359 expose_php <span class="token operator">=</span> Off				<span class="token comment">#隐藏PHP版本号</span>
 368 max_execution_time <span class="token operator">=</span> 300		<span class="token comment">#修改执行时间为300s</span>
 378 max_input_time <span class="token operator">=</span> 300			<span class="token comment">#修改接收数据等待时间为300s</span>
 389 memory_limit <span class="token operator">=</span> 128M			<span class="token comment">#每个脚本占用内存</span>
 656 post_max_size <span class="token operator">=</span> 16M			<span class="token comment">#post数据大小</span>
 799 upload_max_filesize <span class="token operator">=</span> 2M		<span class="token comment">#上传文件大小为2M</span>
 800 always_populate_raw_post_data <span class="token operator">=</span> -1			<span class="token comment">#使原始数据可以直接被处理</span>
 877 date.timezone <span class="token operator">=</span> Asia/Shanghai				<span class="token comment">#修改时区</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl start php-fpm.service 			#开启php服务</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl enable php-fpm.service 			</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl restart nginx			#重启nginx</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7b/3e/apyA5YP8_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim /usr/share/nginx/html/info.php		#在首页根目录下写一个首页文件</span>

<span class="token operator">&lt;</span>?php
phpinfo<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
?<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/62/81/jb2HaHDA_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim /usr/share/nginx/html/info.php</span>

<span class="token operator">&lt;</span>?php
<span class="token variable">$link</span><span class="token operator">=</span>mysqli_connect<span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span>,<span class="token string">'root'</span>,<span class="token string">'123123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">#测试连接数据库</span>
if<span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">)</span> <span class="token keyword">echo</span> <span class="token string">"连接成功"</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token keyword">echo</span> <span class="token string">"连接失败"</span><span class="token punctuation">;</span>
?<span class="token operator">&gt;</span>

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop firewalld.service </span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># setenforce 0</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/33/76/oFBy1IgB_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># mysql -u root -p123123</span>
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> create database zabbix character <span class="token keyword">set</span> utf8 collate utf8_bin<span class="token punctuation">;</span>			<span class="token comment">#创建一个zabbix库，设置字符集为utf8</span>
Query OK, 1 row affected <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> grant all privileges on *.* to <span class="token string">'zabbix'</span>@<span class="token string">'%'</span> identified by <span class="token string">'admin123'</span><span class="token punctuation">;</span>			<span class="token comment">#授权给zabbix用户在所有的终端，所有库的所有表的所有权限，密码为admin123</span>
Query OK, 0 rows affected <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>			<span class="token comment">#刷新授权表</span>
Query OK, 0 rows affected <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>



<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim /usr/share/nginx/html/info.php</span>

<span class="token operator">&lt;</span>?php
<span class="token variable">$link</span><span class="token operator">=</span>mysqli_connect<span class="token punctuation">(</span><span class="token string">'127.0.0.1'</span>,<span class="token string">'zabbix'</span>,<span class="token string">'admin123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">#测试能否使用zabbix用户连接数据库</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">)</span> <span class="token keyword">echo</span> <span class="token string">"zabbix数据库连接成功"</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token keyword">echo</span> <span class="token string">"zabbix数据库连接失败"</span><span class="token punctuation">;</span>
?<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/96/99/kp1HbZJ9_o.png" alt="在这里插入图片描述"></p> 
<p><mark>连接失败的原因及解决方法</mark><br> 原因是用户冲突，有一个为空的用户</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># mysql -u root -p123123</span>
MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> user,host from mysql.user<span class="token punctuation">;</span>
+--------+-----------------------+
<span class="token operator">|</span> user   <span class="token operator">|</span> host                  <span class="token operator">|</span>
+--------+-----------------------+
<span class="token operator">|</span> zabbix <span class="token operator">|</span> %                     <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> 127.0.0.1             <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> ::1                   <span class="token operator">|</span>
<span class="token operator">|</span>        <span class="token operator">|</span> localhost             <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> localhost             <span class="token operator">|</span>
<span class="token operator">|</span>        <span class="token operator">|</span> localhost.localdomain <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> localhost.localdomain <span class="token operator">|</span>
+--------+-----------------------+
7 rows <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> drop user <span class="token string">''</span>@localhost<span class="token punctuation">;</span>
Query OK, 0 rows affected <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> drop user <span class="token string">''</span>@localhost.localdomain<span class="token punctuation">;</span>
Query OK, 0 rows affected <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> user,host from mysql.user<span class="token punctuation">;</span>
+--------+-----------------------+
<span class="token operator">|</span> user   <span class="token operator">|</span> host                  <span class="token operator">|</span>
+--------+-----------------------+
<span class="token operator">|</span> zabbix <span class="token operator">|</span> %                     <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> 127.0.0.1             <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> ::1                   <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> localhost             <span class="token operator">|</span>
<span class="token operator">|</span> root   <span class="token operator">|</span> localhost.localdomain <span class="token operator">|</span>
+--------+-----------------------+
5 rows <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>

MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>
Query OK, 0 rows affected <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/15/e1/CimVOW6Q_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4zabbix_server_266"></a>4、部署zabbix server</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># rpm -i https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm		#安装zabbix源</span>
警告：/var/tmp/rpm-tmp.nXDDWY: 头V4 RSA/SHA512 Signature, 密钥 ID a14fe591: NOKEY
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum -y install zabbix-server-mysql zabbix-web-mysql zabbix-agent			#安装server端和代理端当中的web界面，并且兼容MySQL数据组件</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix		#create.sql.gz包含zabbix必要的一些数据表，将该压缩包注入到zabbix数据库中</span>
Enter password: 			<span class="token comment">#输入密码</span>

<span class="token comment">#编辑zabbix服务端配置文件</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># grep -n '^'[a-Z] /etc/zabbix/zabbix_server.conf </span>
38:LogFile<span class="token operator">=</span>/var/log/zabbix/zabbix_server.log			<span class="token comment">#定义日志文件位置和名称</span>
49:LogFileSize<span class="token operator">=</span>0										<span class="token comment">#定义日志文件大小，0表示不限制大小</span>
72:PidFile<span class="token operator">=</span>/var/run/zabbix/zabbix_server.pid			<span class="token comment">#进程文件位置</span>
82:SocketDir<span class="token operator">=</span>/var/run/zabbix							<span class="token comment">#通信sock文件</span>
91:DBHost<span class="token operator">=</span>localhost										<span class="token comment">#数据库所在服务区，本地</span>
100:DBName<span class="token operator">=</span>zabbix										<span class="token comment">#数据库名称</span>
116:DBUser<span class="token operator">=</span>zabbix										<span class="token comment">#数据库用户</span>
124:DBPassword<span class="token operator">=</span>admin123									<span class="token comment">#数据库密码</span>
356:SNMPTrapperFile<span class="token operator">=</span>/var/log/snmptrap/snmptrap.log		<span class="token comment">#snmp协议日志位置</span>
473:Timeout<span class="token operator">=</span>4											<span class="token comment">#定义超时时间</span>
516:AlertScriptsPath<span class="token operator">=</span>/usr/lib/zabbix/alertscripts		<span class="token comment">#警告的脚本存放位置</span>
527:ExternalScripts<span class="token operator">=</span>/usr/lib/zabbix/externalscripts		<span class="token comment">#扩展性脚本存放位置</span>
563:LogSlowQueries<span class="token operator">=</span>3000									<span class="token comment">#定义慢查询时间</span>
</code></pre> 
<p>========================================================================</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># vim /usr/share/zabbix/include/defines.inc.php </span>
:%s /graphfont/kaiti/g    
define<span class="token punctuation">(</span><span class="token string">'ZBX_FONT_NAME'</span>, <span class="token string">'kaiti'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>========================================================================</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># setenforce 0</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cp -r /usr/share/zabbix/ /usr/share/nginx/html/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># chown -R zabbix:zabbix /etc/zabbix/		#将zabbix相关目录用户和组进行修改</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># chown -R zabbix:zabbix /usr/share/nginx/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># chown -R zabbix:zabbix /usr/lib/zabbix/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># chmod -R 755 /etc/zabbix/web/			#为zabbix web页面目录和php动态会话目录授权</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># chmod -R 777 /var/lib/php/session/</span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-server.service </span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl enable zabbix-server.service </span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl start zabbix-agent.service </span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl enable zabbix-agent.service </span>
Created symlink from /etc/systemd/system/multi-user.target.wants/zabbix-agent.service to /usr/lib/systemd/system/zabbix-agent.service.
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># netstat -anpt | grep 10050</span>
tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      45910/zabbix_agentd 
tcp6       0      0 :::10050                :::*                    LISTEN      45910/zabbix_agentd 

<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># netstat -anpl | grep 10051</span>
tcp        0      0 0.0.0.0:10051           0.0.0.0:*               LISTEN      45598/zabbix_server 
tcp6       0      0 :::10051                :::*                    LISTEN      45598/zabbix_server 
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl restart php-fpm.service </span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl restart nginx</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cb/f3/MOEvyx7z_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f7/d3/eIeXMuFQ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a2/e1/z1Pd0Rvc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/72/5d/d1ZUHt5Y_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/09/1b/fD5Gzc1i_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/03/2e/cBkZYS2i_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cd /etc/zabbix/</span>
<span class="token punctuation">[</span>root@localhost zabbix<span class="token punctuation">]</span><span class="token comment"># ls</span>
web  zabbix_agentd.conf  zabbix_agentd.d  zabbix_server.conf
<span class="token punctuation">[</span>root@localhost zabbix<span class="token punctuation">]</span><span class="token comment"># cd web/</span>
<span class="token punctuation">[</span>root@localhost web<span class="token punctuation">]</span><span class="token comment"># ls</span>
maintenance.inc.php
<span class="token punctuation">[</span>root@localhost web<span class="token punctuation">]</span><span class="token comment"># rz -E</span>
rz waiting to receive.
<span class="token punctuation">[</span>root@localhost web<span class="token punctuation">]</span><span class="token comment"># ls</span>
maintenance.inc.php  zabbix.conf.php
<span class="token punctuation">[</span>root@localhost web<span class="token punctuation">]</span><span class="token comment"># chmod +x zabbix.conf.php 				#赋予可执行权限</span>
<span class="token punctuation">[</span>root@localhost web<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-server.service </span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/3f/0iD0DsTG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/78/69/dWtvAAd5_o.png" alt="在这里插入图片描述"></p> 
<p><mark>被监控端：192.168.238.20</mark></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#rpm -i https://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm</span>
警告：/var/tmp/rpm-tmp.bbUg0T: 头V4 RSA/SHA512 Signature, 密钥 ID a14fe591: NOKEY
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#yum -y install zabbix-agent			#安装zabbix代理服务</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#vim /etc/zabbix/zabbix_agentd.conf 			#修改zabbix代理服务配置文件</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#grep -n '^'[a-Z] /etc/zabbix/zabbix_agentd.conf </span>
13:PidFile<span class="token operator">=</span>/var/run/zabbix/zabbix_agentd.pid
32:LogFile<span class="token operator">=</span>/var/log/zabbix/zabbix_agentd.log
43:LogFileSize<span class="token operator">=</span>0
98:Server<span class="token operator">=</span>192.168.238.10
139:ServerActive<span class="token operator">=</span>192.168.238.10			<span class="token comment">#指向监控服务器</span>
150:Hostname<span class="token operator">=</span>Zabbix server				<span class="token comment">#修改名称</span>
268:Include<span class="token operator">=</span>/etc/zabbix/zabbix_agentd.d/*.conf
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#service firewalld stop </span>
Redirecting to /bin/systemctl stop firewalld.service
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#setenforce 0</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#systemctl enable zabbix-agent.service </span>
Created symlink from /etc/systemd/system/multi-user.target.wants/zabbix-agent.service to /usr/lib/systemd/system/zabbix-agent.service.
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#systemctl restart zabbix-agent.service</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#netstat -natp | grep zabbix</span>
tcp        0      0 0.0.0.0:10050           0.0.0.0:*               LISTEN      42034/zabbix_agentd 
tcp6       0      0 :::10050                :::*                    LISTEN      42034/zabbix_agentd 
</code></pre> 
<p><img src="https://images2.imgbox.com/65/cb/it4PDTT2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d7/35/XZCFsgns_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/82/6f/U4oVtHSN_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ea/5d/dRxTYxVg_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_383"></a>5、配置告警自动发布邮件</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost .ssh<span class="token punctuation">]</span><span class="token comment"># yum install -y mailx			#安装收发邮件工具箱</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim  /etc/mail.rc 				#编辑配置文件</span>
<span class="token keyword">set</span> from<span class="token operator">=</span>xxxxxxxx@126.com
<span class="token keyword">set</span> smtp<span class="token operator">=</span>smtp.126.com
<span class="token keyword">set</span> smtp-auth-user<span class="token operator">=</span>xxxxxxxx@126.com
<span class="token keyword">set</span> smtp-auth-password<span class="token operator">=</span>HCOJNIFNxxxxxxxx			<span class="token comment">#这是邮箱的授权码，POP3/SMTP/IMAP获取</span>
<span class="token keyword">set</span> smtp-auth<span class="token operator">=</span>login
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># echo "hello xyw" | mail -s "testmail" xxxxxxxxx@126.com			#测试是否能正常发送</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/05/03/X0V9vrWB_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/lib/zabbix/alertscripts/			编写发送邮件的shell脚本你一定要在此目录下</span>
<span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># vim mailx.sh</span>

<span class="token comment">#!/bin/bash</span>
<span class="token comment">#send mail</span>
messages<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token keyword">echo</span> $3 <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">'\r\n'</span> <span class="token string">'\n'</span><span class="token variable">`</span></span>
subject<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token keyword">echo</span> $2 <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">'\r\n'</span> <span class="token string">'\n'</span><span class="token variable">`</span></span>
<span class="token keyword">echo</span> <span class="token string">"<span class="token variable">${messages}</span>"</span> <span class="token operator">|</span> mail -s <span class="token string">"<span class="token variable">${subject}</span>"</span> <span class="token variable">$1</span> <span class="token operator">&gt;&gt;</span> /tmp/mailx.log 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1

<span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># touch /tmp/mailx.log			#创建日志文件</span>
<span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># chown -R zabbix.zabbix /tmp/mailx.log 		#赋权</span>
<span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># chmod +x /usr/lib/zabbix/alertscripts/mailx.sh </span>
<span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># chown -R zabbix.zabbix /usr/lib/zabbix/</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># ./mailx.sh xxxxxxxx@126.com "Friday" "hey xyw"</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/07/31/XbZAcl61_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/00/48/d1YgdVvS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/33/a5/4A8gG5RT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c7/73/Ej0ONdKk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/74/70/rbYmcgfh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/33/d4/EcWefeNM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/55/36/v9D7C263_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/da/1a/k75jJSVg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/61/e4/dZOWssSJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/24/db/w0boNrXI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/38/5e/irmSVeLw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e6/95/iMQhulDx_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-server.service </span>
<span class="token punctuation">[</span>root@localhost alertscripts<span class="token punctuation">]</span><span class="token comment"># systemctl restart zabbix-agent.service </span>
</code></pre> 
<h3><a id="6http_433"></a>6、关闭http服务</h3> 
<pre><code class="prism language-bash">systemctl stop httpd.service 
</code></pre> 
<p><img src="https://images2.imgbox.com/94/61/09VtViHZ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/46/08/8tz3qyeY_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-bash">systemctl start httpd.service
</code></pre> 
<p><img src="https://images2.imgbox.com/aa/5f/MM63Ya77_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="7httpagent_448"></a>7、关闭http和agent服务</h3> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment">#systemctl stop httpd.service </span>
<span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment">#systemctl stop zabbix-agent.service </span>
</code></pre> 
<p><img src="https://images2.imgbox.com/00/52/VT8FQZqE_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/15/e0/8SevqPN6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/18/52/D2vHjlDc_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2fb7ccd91c3589b28a676402064b4438/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">前端与后端方向调查</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9eb34001ceb9cc9d6a6d4c2b63bf679e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PHP的面向对象你都了解哪些？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
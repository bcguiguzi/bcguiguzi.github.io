<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【经验帖】Ubuntu12.04安装cuda6.0以及配置Nsight开发环境教程 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【经验帖】Ubuntu12.04安装cuda6.0以及配置Nsight开发环境教程" />
<meta property="og:description" content="近期需要到Linux下进行CUDA相关的编程，历经装崩系统、各种版本不兼容等等重重困难后，终于写下了这篇博客，防止以后再次入坑。
1. 显卡
用的是台式机，显卡版本较老，是一块GT240，用独显的话，第一次安装Ubuntu系统会出现这样一个问题，当使用U盘启动之后，会出现屏幕花屏的现象，无法弹出安装界面，一开始我以为是Ubuntu版本的问题，发现试了各种版本都是这样，后面网上查了一下才知道，Ubuntu系统在安装显卡驱动之前，在普通模式下是不支持独显显示的，那只有换回集显，拔下独显了呗，果然顺利安装了Ubuntu 12.04。
重启之前，把独显重新插上，此时要注意在启动选项中选recover恢复模式，之后一路默认进入系统，否则普通模式还是花屏。进入系统后发现能正常显示了，只不过没有安装驱动界面丑了点。
如果接下来需要安装CUDA的话，建议不要急着装显卡驱动！！因为CUDA的.run安装程序会装显卡驱动的，如果这个时候装，到时候容易引起驱动版本的冲突，虽然可以在CUDA安装选项中选择无需安装，因为软件应该向下兼容才对，但是亲身经验告诉我，Ubuntu不会意识到本机已有驱动版本比CUDA提供的最低版本要高！
2. 网卡
这个比较容易，我用的无线网卡是TP-Link WDN6200，网上查了下芯片用的是rtl8812au，顺便查到了该芯片的开源驱动程序，github大法好，链接如下：https://github.com/gnab/rtl8812au 下载.zip文件后，解压到自己想要的文件夹下面，进入目录依次执行下面命令，等一会儿就可以看到无线网络图标点亮了
sudo make sudo make install sudo modprobe 8812au 3. CUDA下载
Ctrl&#43;Alt&#43;F1进入单用户模式，再运行如下命令关闭图形界面服务
sudo service lightdm stop 进入CUDA.run文件所在的目录就可以安装了 然而之前的一个问题是，CUDA现在已经更新到7.5了，是不是越新的版本越好呢？从易安装程度上来说，并不是这样的（各个CUDA版本下载）（高手可以无视这一段）。首先都进到每个版本下面看看Linux的Getting Started文件，这个文件里，一定要看系统版本最低要求的一个表格！！先从下面几个在日志文件中的错误说起
1) ERROR: Kernel configuration is invalid. include/generated/autoconf.h or include/config/auto.conf are missing. Run &#39;make oldconfig &amp;&amp; make prepare&#39; on kernel src to fix it.
错误原因：操作系统内核版本过高，而CUDA安装文件可能是针对老的内核版本而言的，所以会出现autoconf.h或者auto.conf缺失，因为在新的Linux内核版本中，这两个文件目录都已经被移除或者更改了，因此会出现找不到的情况，我试了make oldconfig &amp;&amp; make prepare有错，故放弃。去网上找到了CUDA 5.5的Getting Started文件发现，其内核版本建议是generic 2.6，而在我的Ubuntu下面输入
uname -r 查看内核版本是generic 3.13，故放弃CUDA 5.5，转向CUAD 6.0，这次建议的Ubuntu 12.04内核版本是generic 3.2，更近了一步，抱着不确定的形态试着再次安装，没有报错，成功了！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/005815eeb9862b5f4d92f2816846051f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-09-21T20:37:55+08:00" />
<meta property="article:modified_time" content="2015-09-21T20:37:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【经验帖】Ubuntu12.04安装cuda6.0以及配置Nsight开发环境教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:14px"><span style="white-space:pre"></span>近期需要到Linux下进行CUDA相关的编程，历经装崩系统、各种版本不兼容等等重重困难后，终于写下了这篇博客，防止以后再次入坑。</span></p> 
<p><strong><span style="font-size:24px">1. 显卡</span></strong></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span><span style="white-space:pre"></span>用的是台式机，显卡版本较老，是一块GT240，用独显的话，第一次安装Ubuntu系统会出现这样一个问题，当使用U盘启动之后，会出现屏幕花屏的现象，无法弹出安装界面，一开始我以为是Ubuntu版本的问题，发现试了各种版本都是这样，后面网上查了一下才知道，Ubuntu系统在安装显卡驱动之前，在普通模式下是不支持独显显示的，那只有换回集显，拔下独显了呗，果然顺利安装了Ubuntu 12.04。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span><span style="white-space:pre"></span>重启之前，把独显重新插上，此时要注意在启动选项中选recover恢复模式，之后一路默认进入系统，否则普通模式还是花屏。进入系统后发现能正常显示了，只不过没有安装驱动界面丑了点。</span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span><span style="white-space:pre"></span>如果接下来需要安装CUDA的话，建议不要急着装显卡驱动！！因为CUDA的.run安装程序会装显卡驱动的，如果这个时候装，到时候容易引起驱动版本的冲突，虽然可以在CUDA安装选项中选择无需安装，因为软件应该向下兼容才对，但是亲身经验告诉我，Ubuntu不会意识到本机已有驱动版本比CUDA提供的最低版本要高！</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><strong><span style="font-size:24px">2. 网卡</span></strong></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span><span style="white-space:pre"></span>这个比较容易，我用的无线网卡是TP-Link WDN6200，网上查了下芯片用的是rtl8812au，顺便查到了该芯片的开源驱动程序，github大法好，链接如下：https://github.com/gnab/rtl8812au  下载.zip文件后，解压到自己想要的文件夹下面，进入目录依次执行下面命令，等一会儿就可以看到无线网络图标点亮了</span></p> 
<p></p> 
<pre><code class="language-plain">sudo make
sudo make install
sudo modprobe 8812au</code></pre> 
<p></p> 
<p><strong><span style="font-size:24px">3. CUDA下载</span></strong></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span><span style="white-space:pre"></span>Ctrl+Alt+F1进入单用户模式，再运行如下命令关闭图形界面服务</span></p> 
<p></p> 
<pre><code class="language-plain">sudo service lightdm stop</code></pre> 
<p></p> 
<p><span style="font-size:14px">进入CUDA.run文件所在的目录就可以安装了    </span></p> 
<p><span style="font-size:14px"><span style="white-space:pre"></span><span style="white-space:pre"></span>然而之前的一个问题是，CUDA现在已经更新到7.5了，是不是越新的版本越好呢？从易安装程度上来说，并不是这样的（<a target="_blank" href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow noopener noreferrer">各个CUDA版本下载</a>）（高手可以无视这一段）。首先都进到每个版本下面看看Linux的Getting Started文件，这个文件里，一定要看系统版本最低要求的一个表格！！先从下面几个在日志文件中的错误说起</span></p> 
<p><span style="font-size:14px"><span style="color:#ff0000">1) <span style="font-family:Arial; line-height:26px">ERROR: Kernel configuration is invalid.</span><br style="font-family:Arial; line-height:26px"> <span style="font-family:Arial; line-height:26px">         include/generated/autoconf.h or include/config/auto.conf are missing.</span><br style="font-family:Arial; line-height:26px"> <span style="font-family:Arial; line-height:26px">         Run 'make oldconfig &amp;&amp; make prepare' on kernel src to fix it.</span></span></span></p> 
<p><span style="font-family:Arial; line-height:26px"><span style="font-size:14px">错误原因：操作系统内核版本过高，而CUDA安装文件可能是针对老的内核版本而言的，所以会出现autoconf.h或者auto.conf缺失，因为在新的Linux内核版本中，这两个文件目录都已经被移除或者更改了，因此会出现找不到的情况，我试了make oldconfig &amp;&amp; make prepare有错，故放弃。去网上找到了CUDA 5.5的Getting Started文件发现，其内核版本建议是generic 2.6，而在我的Ubuntu下面输入</span></span></p> 
<p><span style="font-family:Arial; line-height:26px"></span></p> 
<pre><code class="language-plain">uname -r</code></pre> 
<p></p> 
<p><span style="font-family:Arial; line-height:26px"><span style="font-size:14px">查看内核版本是generic 3.13，故放弃CUDA 5.5，转向CUAD 6.0，这次建议的Ubuntu 12.04内核版本是generic 3.2，更近了一步，抱着不确定的形态试着再次安装，没有报错，成功了！</span></span></p> 
<p><span style="font-family:Arial; line-height:26px"><span style="font-size:14px; color:#ff0000">2)Warning: 显卡驱动可能不会检测到你的GPU</span></span></p> 
<p><span style="font-family:Arial; line-height:26px"><span style="font-size:14px">错误的原因：CUDA安装的驱动比原版本的要高，可能是显卡版本太低的，因此考虑卸载原来的N卡驱动，下一个版本较低的CUDA</span></span></p> 
<p><span style="font-size:14px">         成功安装之后，我的显示信息如下：</span></p> 
<p><span style="font-size:14px">===========</span></p> 
<p><span style="font-size:14px">==Summary==</span></p> 
<p><span style="font-size:14px">===========</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><span style="font-size:14px">Driver:    Installed</span></p> 
<p><span style="font-size:14px">Tookit:    Installed in /usr/local/cuda-6.0</span></p> 
<p><span style="font-size:14px">Samples: Installed in /home/myname/NVIDIA_CUDA-6.0_Samples, but missing recommended libraries</span></p> 
<p><span style="font-size:14px"><br> </span></p> 
<p><span style="font-size:14px">之后输入命令：</span></p> 
<p></p> 
<pre><code class="language-plain">sudo lightdm service start</code></pre> 
<p></p> 
<p><span style="font-size:14px">回到图形界面，你会发现安装了驱动之后，界面变得很酷炫了。</span></p> 
<p><span style="font-size:14px">接着配置CUDA相关环境变量，如果是x86_64的系统，在/etc/environment输入</span></p> 
<p></p> 
<pre><code class="language-plain">export PATH=$PATH:/usr/local/cuda-6.0/bin
export LD_LIBRARY_PATH=/usr/local/cuda-6.0/lib64:/lib</code></pre> 
<p></p> 
<pre></pre> 
<p></p> 
<p><span style="font-size:14px">如果是32位的系统，则输入</span></p> 
<p></p> 
<pre><code class="language-plain">export PATH=$PATH:/usr/local/cuda-6.0/bin
export LD_LIBRARY_PATH=/usr/local/cuda-6.0/lib:/lib</code></pre> 
<p></p> 
<p><span style="font-size:14px">然后进入/home/myname/NVIDIA_CUDA-6.0_Samples，输入</span></p> 
<p></p> 
<pre><code class="language-plain">sudo make</code></pre> 
<p><span style="font-size:14px">编译成功完成后，到/home/myname/NVIDIA_CUDA-6.0_Samples/bin目录下</span></p> 
<p></p> 
<pre><code class="language-plain">./deviceQuery</code></pre> 
<p></p> 
<p><span style="font-size:14px">看到了CUDA和GPU信息，说明安装成功了</span></p> 
<p><strong><span style="font-size:24px">4. Nsight配置</span></strong></p> 
<p><span style="font-size:14px">        Nsight Eclipse Edition，Nvidia公司的Eclipse cuda集成开发环境，终端直接输入</span></p> 
<p></p> 
<pre><code class="language-plain">nsight</code></pre> 
<span style="font-size:14px">然后参考一篇国外的Nsight配置教程即可，<a target="_blank" href="http://www.codeproject.com/Articles/513265/GPU-Computing-Using-CUDA-Eclipse-and-Java-with-JCu%29" rel="nofollow noopener noreferrer">Nsight配置教程</a>，包括C++和后面要写的Java(JCuda)<br> </span> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c232956e7a2694e8046ba166d16da51b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android studio 获取 数字签名sha1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dccfbc642f9e7e49c38ede068522a512/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">笔试题总结归纳之 腾讯——基础研究</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
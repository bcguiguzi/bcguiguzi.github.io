<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Google Analytics Service account 认证指南 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Google Analytics Service account 认证指南" />
<meta property="og:description" content="GA官方文档：https://developers.google.com/analytics/devguides/reporting/core/v4/authorization
Service account 官方文档 https://developers.google.com/identity/protocols/oauth2/service-account
概述 Oauth2 Service account 认证分为以下步骤
新建 projectEnable Google Analytics Reporting API新建 service account在 service account 中创建 json key建立 service account 与 Google Analytics 账号的关联 1.新建 project project 控制台：https://console.cloud.google.com/cloud-resource-manager
2.Enable Google Analytics Reporting API 选择刚刚创建的 project
搜索 Google Analytics Reporting API 并 enable
Enable success
3.新建 service account 控制台地址：https://console.developers.google.com/apis/credentials
点击 Credentials 菜单，发起创建 service account 输入 service account 详细信息 完成 4.在 service account 中创建 json key 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/c5e71f49eaad642b0bfa0ea285acffa9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-05T14:40:39+08:00" />
<meta property="article:modified_time" content="2022-09-05T14:40:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Google Analytics Service account 认证指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:left;">GA官方文档：<a href="https://developers.google.com/analytics/devguides/reporting/core/v4/authorization" rel="nofollow" title="https://developers.google.com/analytics/devguides/reporting/core/v4/authorization">https://developers.google.com/analytics/devguides/reporting/core/v4/authorization</a></p> 
<p style="margin-left:.0001pt;text-align:left;">Service account 官方文档 https://developers.google.com/identity/protocols/oauth2/service-account</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>概述 </strong></p> 
<p style="margin-left:.0001pt;text-align:left;">Oauth2 Service account 认证分为以下步骤</p> 
<ol><li style="text-align:left;">新建 project</li><li style="text-align:left;">Enable Google Analytics Reporting API</li><li style="text-align:left;">新建 service account</li><li style="text-align:left;">在 service account 中创建 json key</li><li style="text-align:left;">建立 service account 与 Google Analytics 账号的关联</li></ol> 
<p style="text-align:left;"></p> 
<p style="text-align:left;"><strong>1.新建 project </strong></p> 
<p style="margin-left:.0001pt;text-align:left;">project 控制台：https://console.cloud.google.com/cloud-resource-manager</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="281" src="https://images2.imgbox.com/ff/32/JYHvEcDW_o.png" width="567"></p> 
<p> <img alt="" height="465" src="https://images2.imgbox.com/9e/a0/M4bvQT9W_o.png" width="744"></p> 
<p></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="text-align:left;"><strong>2.Enable Google Analytics Reporting API </strong></p> 
<p style="margin-left:.0001pt;text-align:left;">选择刚刚创建的 project</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="224" src="https://images2.imgbox.com/ee/3a/gBDzHUpE_o.png" width="567"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;">搜索 Google Analytics Reporting API 并 enable</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="560" src="https://images2.imgbox.com/37/c7/NWPbsNtN_o.png" width="994"></p> 
<p><img alt="" height="210" src="https://images2.imgbox.com/44/bd/U2wYj5mt_o.png" width="553"></p> 
<p> <img alt="" height="450" src="https://images2.imgbox.com/6a/57/GYOVgEH9_o.png" width="877"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;">Enable success</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="226" src="https://images2.imgbox.com/c4/e8/Atq3OdJD_o.png" width="567"></p> 
<p></p> 
<p style="text-align:left;"><strong>3.新建 service account </strong></p> 
<p style="margin-left:.0001pt;text-align:left;">控制台地址：https://console.developers.google.com/apis/credentials</p> 
<ul><li style="text-align:left;">点击 Credentials 菜单，发起创建 service account</li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="497" src="https://images2.imgbox.com/f4/f2/6DBMIMmB_o.png" width="922"></p> 
<ul><li style="text-align:left;">输入 service account 详细信息</li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="649" src="https://images2.imgbox.com/63/f4/Yz6edj9Q_o.png" width="987"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="570" src="https://images2.imgbox.com/66/c6/AYLO0oOD_o.png" width="840"></p> 
<p> <img alt="" height="532" src="https://images2.imgbox.com/e4/f3/35H8cleg_o.png" width="770"></p> 
<ul><li style="text-align:left;">完成</li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="575" src="https://images2.imgbox.com/8c/9d/7ZcJOfEZ_o.png" width="939"></p> 
<p></p> 
<p style="text-align:left;"><strong>4.在 service account 中创建 json key </strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="602" src="https://images2.imgbox.com/2b/62/Nzc6F8MP_o.png" width="985"></p> 
<p> <img alt="" height="303" src="https://images2.imgbox.com/54/e7/OdzGd66r_o.png" width="567"></p> 
<p><img alt="" height="358" src="https://images2.imgbox.com/af/b9/OSFkp281_o.png" width="567"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="820" src="https://images2.imgbox.com/12/5f/X5TlQqO8_o.png" width="1200"></p> 
<p> </p> 
<p style="text-align:left;"><strong>5.建立 service account 与 Google Analytics 账号的关联 </strong></p> 
<p style="margin-left:.0001pt;text-align:left;">控制台地址：https://analytics.google.com/analytics/web/#/a142750015w294314375p255868300/admin</p> 
<p style="margin-left:.0001pt;text-align:left;">关联需要上一步中 key json 文件中的 client_email 字段的值：ad-data-scraper-ga@xxxx-ad-ga.iam.gserviceaccount.com</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="290" src="https://images2.imgbox.com/53/8f/FZkiSk93_o.png" width="800"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>关联层级说明</strong>：</p> 
<ul><li style="text-align:left;">如果在账号级别建立关联，账号下面所有字媒体资源和数据视图都会自动建立关联</li></ul> 
<ul><li style="text-align:left;">如果在媒体资源级别建立关联，此媒体资源下面所有的数据视图都会自动建立关联</li></ul> 
<ul><li style="text-align:left;">你也可以单独为某个数据视图建立关联</li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><strong>账号级别建立关联示范</strong>（媒体资源级别与视图级别操作是一样的）：</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="359" src="https://images2.imgbox.com/61/b4/nJnDPxAc_o.png" width="567">        </p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="783" src="https://images2.imgbox.com/15/29/g5UhPXEQ_o.png" width="1079"></p> 
<p style="margin-left:.0001pt;text-align:left;">添加用户</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="225" src="https://images2.imgbox.com/52/5d/qZK08Gpy_o.png" width="1200"></p> 
<p> <img alt="" height="745" src="https://images2.imgbox.com/f6/8d/WgNuPqhD_o.png" width="1200"></p> 
<p style="margin-left:.0001pt;text-align:left;">关键建立完成</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="202" src="https://images2.imgbox.com/99/a0/QgXnxT9w_o.png" width="1200"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong>注意事项 </strong></p> 
<ul><li style="text-align:left;">如果在建立关联时，你在账号级别点开 “账号访问权限管理” 之后没有 “添加用户” 按钮 或者在媒体资源级别、视图级别找不到 “账号访问权限管理” 菜单，这是因为你没有管理员权限，你需要在账号级别点开 “账号访问权限管理” 申请管理员权限，等待对应账号管理者赋予你管理员权限</li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="168" src="https://images2.imgbox.com/95/41/vAdjGOFe_o.png" width="567"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="365" src="https://images2.imgbox.com/4d/9d/54pW7SY9_o.png" width="567"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/04891152e00bb61d406f2b5f58c42821/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Google Gmail Oauth Client ID 认证指南</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/05cd66987eef16435a599dbbbfd62640/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux用户管理：用户与用户组</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
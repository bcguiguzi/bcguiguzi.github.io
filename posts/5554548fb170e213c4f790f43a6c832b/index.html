<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>numpy中的argpartition用法 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="numpy中的argpartition用法" />
<meta property="og:description" content="一、np.argpartion()
Numpy的argpartion函数来源于快排算法中的一个典型操作partition，即根据一个数值x，把数组中的元素划分成两半，使得index前面的元素都不大于x，index后面的元素都不小于x。
np.argpartition不对原数组操作，只返回一个按照上述操作排序过后的index。通过这个函数可以高效地找到 N 个最大值的索引并返回 N 个值。在给出索引后，我们可以根据需要进行值排序。
import numpy as np array = np.array([10, 7, 4, 3, 2, 2, 5, 9, 0, 4, 6, 0]) #返回一个索引，比原数组第5大（从0开始）的数小的数在这个数之前，比这个数大的数在它之后。 index = np.argpartition(array, 4) #输出，新索引 print(index) #[ 4 11 8 5 3 2 9 6 1 10 7 0] #按这个新索引可以重新排列数组 print(array[index]) #[ 2 0 0 2 3 4 4 5 7 6 9 10] #第5大的数是3，比3小的在3之前，比3大的在3之后 二、输出top5 np.argpartition的一个重要应用就是高效输出最大的几个值(如top-5)，因为不用像np.sort对所有元素排序
#还是上边那个数组，输出top5 array = np.array([10, 7, 4, 3, 2, 2, 5, 9, 0, 4, 6, 0]) array[np." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5554548fb170e213c4f790f43a6c832b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-16T20:29:45+08:00" />
<meta property="article:modified_time" content="2023-05-16T20:29:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">numpy中的argpartition用法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一、np.argpartion()<br> Numpy的argpartion函数来源于快排算法中的一个典型操作partition，即根据一个数值x，把数组中的元素划分成两半，使得index前面的元素都不大于x，index后面的元素都不小于x。<br> np.argpartition不对原数组操作，只返回一个按照上述操作排序过后的index。通过这个函数可以高效地找到 N 个最大值的索引并返回 N 个值。在给出索引后，我们可以根据需要进行值排序。<br>  </p> 
<pre><code class="language-python">import numpy as np
array = np.array([10, 7, 4, 3, 2, 2, 5, 9, 0, 4, 6, 0])
#返回一个索引，比原数组第5大（从0开始）的数小的数在这个数之前，比这个数大的数在它之后。
index = np.argpartition(array, 4)
#输出，新索引
print(index)
#[ 4 11  8  5  3  2  9  6  1 10  7  0]
#按这个新索引可以重新排列数组
print(array[index])
#[ 2  0  0  2  3  4  4  5  7  6  9 10]
#第5大的数是3，比3小的在3之前，比3大的在3之后
</code></pre> 
<h3>二、输出top5</h3> 
<p>np.argpartition的一个重要应用就是高效输出最大的几个值(如top-5)，因为不用像np.sort对所有元素排序</p> 
<pre><code class="language-python">#还是上边那个数组，输出top5
array = np.array([10, 7, 4, 3, 2, 2, 5, 9, 0, 4, 6, 0])
array[np.argpartition(array, -5)[-5:]]
#输出：[ 5,  7,  6,  9, 10]
</code></pre> 
<pre><code class="language-python">import numpy as np

arr = np.array([66, 15, 27, 33, 19, 13, 10])

"""
np.partition(arr, n)
找出arr中第n + 1小的元素(将arr排序之后索引n的元素), 然后返回一个新数组
并将原来数组中第n + 1小的元素放在新数组索引为n的地方, 保证左边的元素比它小, 右边的元素比它大
"""
print(np.partition(arr, 3))  # [15 13 10 19 27 33 66]
# 第4小的元素(排完序之后索引为3)显然是19, 那么将19放在索引为3的位置, 然后左边的元素比它小, 右边的元素比它大
# 至于两边的顺序则没有要求

# 虽然我们可以使用sort, 但是sort是全局排序
# 如果数组非常大, 我们只希望选择最小的10个元素, 直接通过np.partition(arr, 9)即可
# 然后如果排序的话, 只对这选出来的10个元素排序即可, 而无需对整个大数组进行排序

# 同理还可以从后往前找, 比如:
# np.partition(arr, -2)表示找到第2大的元素(将arr排序之后索引-2的元素), 放在数组索引为-2的地方
# 然后左边元素比它小, 右边元素比它大
print(np.partition(arr, -2))  # [13 10 27 15 19 33 66]
# 第2大的元素显然是33, 那么排在索引为-2的位置, 左边元素比它小, 右边元素比它大


# 然后argpartition不用想, 肯定是获取排序之后的索引
print(np.argpartition(arr, 3))  # [1 5 6 4 2 3 0]
print(np.argpartition(arr, -2))  # [5 6 2 1 4 3 0]
</code></pre> 
<p>例子一：找到数组的最大最小值：</p> 
<pre><code class="language-python">&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; arr = np.array([46, 57, 23, 39, 1, 10, 0, 120])
&gt;&gt;&gt; np.argpartition(arr, len(arr)-1)
array([5, 3, 2, 6, 4, 0, 1, 7], dtype=int32)
&gt;&gt;&gt; arr[np.argpartition(arr, len(arr)-1)[len(arr)-1]]
120
&gt;&gt;&gt; arr[np.argpartition(arr, 0)[0]]
0</code></pre> 
<p>例子二：找到数组的第3小（index=2）的值和第2大（index=-2）的值。</p> 
<pre><code class="language-python">&gt;&gt;&gt; arr[np.argpartition(arr, 2)[2]]
10
&gt;&gt;&gt; arr[np.argpartition(arr, -2)[-2]]
57</code></pre> 
<p>例子三：同时找到第3和第4小的值。注意这里，用[2,3]同时将第3和第4小的排序好，然后可以分别通过下标[2]和[3]取得。</p> 
<pre><code class="language-python">&gt;&gt;&gt; arr[np.argpartition(arr, [2,3])[2]]
10
&gt;&gt;&gt; arr[np.argpartition(arr, [2,3])[3]]
23</code></pre> 
<p> </p> 
<p> </p> 
<p> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a9eac4adde81c8c957622ef7abb12d5a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python实现一个情人节必备表白神器——跳动的爱心，基于tkinter实现 | 提供源码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43bee9a8d23afde580629a48641c2cb9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android：你真的会用Toast吗（介绍安卓好看简约的Toast快速解锁方法）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
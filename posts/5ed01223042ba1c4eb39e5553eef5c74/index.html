<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>udp协议 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="udp协议" />
<meta property="og:description" content=" udp协议（user datagram protocol）
1. UDP协议简介 UDP（User Datagram Protocol），是基于IP协议的一种位于传输层的面向无连接的非可靠传输协议。udp协议虽然不可靠（unreliable）但是传输速度快，因此，通常被用于流媒体应用（因为对差错率要求低，但对传输速度要求高），udp还用于DNS和SNMP。
1.1 为什么需要udp协议? -----速度快 通信延迟低（无需建立连接）实现简单,无需维护连接状态头部开销少(8个字节)没有拥塞控制,应用可以更好地控制发送时间和速率 1.2 udp的应用场景 包总量较小的通信（DNS、SNMP等）对差错容忍度比较高的即时通信，如视频，音频等多媒体通信限定于LAN等特定网络的应用通信广播通信（广播，多播） 1.3 udp报文格式 1.2.1 udp报文长度(length) length字段记录了udp报文首部&#43;数据的字节长度。该字段最小值为8字节，即数据部分为空。
1.2.2 udp校验和（checksum） udp校验和（checksum）都校验了哪些内容？
校验的内容包括伪首部，首部，数据三部分，校验和在发送端和接收端分别需要计算一次。
校验和（checksum）的校验方式及计算方法
发送端 把伪首部添加到udp数据报上，构成一个包含完整端点信息的数据报将首部校验和字段的16个bit全部置为0将整个数据报以16-bit按二进制反码算数求和。如果总的字节数不是偶数，则添加一个全0字节作为填充来辅助求和。 接收端
1. 如果接收端对数据报校验失败，udp协议会怎么处理该数据报？
​ 有两种情况会导致数据报被丢弃，一是发送端没有对数据报计算校验和，也就是checksum字段为全0，而接收端又对该字段值做了验证。二是接收端校验失败，数据报在传输过程中存在差错。
校验和（checksum）字段对udp协议来说是必须的吗？
​ udp的校验和（checksum）字段是可选的。在局域网中，由于数据报不需要通过路由器，产生差错的概率较小，此时不使用这个字段是可以接受的，因为可以大大提高传输速率（比较适用于流媒体文件的传输）。但如果数据报通过路由器时，数据产生差错的概率会大大增加，这个时候为了保证数据报的可用性，checksum字段就变得比较重要了。
校验和（checksum）校验通过就说明数据报一定不存在传输差错吗？
不一定，校验和校验通过只能说明，接收端有很高的自信度认为该数据报不存在差错，但并不是百分之百的，思考这样一种情景：数据报中多个位置产生差错，但是这些个位置的差错结合起来又恰巧使得接收端计算的校验和等于发送端，这个时候，这种差错检测机制就失效了，也就说明，校验机制并不能百分百保证数据一致性。
1.2.3 填充字节（Padding bytes） 填充字节只是为了辅助计算校验和，计算完毕后即丢弃，并不会随数据发送给接收端。 3. 关于udp协议的一些常见问题 使用udp协议，发送端是如何确定数据报有没有被接收端接收的？
​ 不能确定，发送端只负责发送，至于接收端有没有成功接收到，发送端是不负责的。反之，当接收端成功接收到消息时，也不会反馈给发送端。
议，发送端是如何确定数据报有没有被接收端接收的？
​ 不能确定，发送端只负责发送，至于接收端有没有成功接收到，发送端是不负责的。反之，当接收端成功接收到消息时，也不会反馈给发送端。
既然udp提供的服务是非可靠的，那采用udp协议的应用要如何实现可靠数据传输？
在应用层增加可靠性机制应用特定错误恢复机制 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5ed01223042ba1c4eb39e5553eef5c74/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-13T00:06:14+08:00" />
<meta property="article:modified_time" content="2022-04-13T00:06:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">udp协议</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>udp协议（user datagram protocol）</p> 
<h4><a id="1_UDP_4"></a>1. UDP协议简介</h4> 
<p>UDP（User Datagram Protocol），是<strong>基于IP协议</strong>的一种<strong>位于传输层</strong>的<strong>面向无连接</strong>的<strong>非可靠</strong>传输协议。udp协议虽然不可靠（unreliable）但是传输速度快，因此，通常被用于<strong>流媒体应用</strong>（因为对差错率要求低，但对传输速度要求高），udp还用于DNS和SNMP。</p> 
<h5><a id="11_udp____8"></a>1.1 为什么需要udp协议? -----速度快</h5> 
<ul><li>通信延迟低（无需建立连接）</li><li>实现简单,无需维护连接状态</li><li>头部开销少(8个字节)</li><li>没有拥塞控制,应用可以更好地控制发送时间和速率</li></ul> 
<h5><a id="12_udp_14"></a>1.2 udp的应用场景</h5> 
<ul><li>包总量较小的通信（DNS、SNMP等）</li><li>对差错容忍度比较高的即时通信，如视频，音频等多媒体通信</li><li>限定于LAN等特定网络的应用通信</li><li>广播通信（广播，多播）</li></ul> 
<h5><a id="13__udp_20"></a>1.3 udp报文格式</h5> 
<p><img src="https://images2.imgbox.com/44/09/UgrSlVyB_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="121_udplength_22"></a>1.2.1 udp报文长度(length)</h6> 
<p>length字段记录了udp报文<strong>首部+数据</strong>的字节长度。该字段最小值为8字节，即数据部分为空。</p> 
<h6><a id="122_udpchecksum_26"></a>1.2.2 udp校验和（checksum）</h6> 
<blockquote> 
 <p>udp校验和（checksum）都校验了哪些内容？</p> 
</blockquote> 
<p>校验的内容包括<strong>伪首部，首部，数据</strong>三部分，校验和在发送端和接收端分别需要计算一次。</p> 
<blockquote> 
 <p>校验和（checksum）的校验方式及计算方法</p> 
</blockquote> 
<ul><li>发送端</li></ul> 
<ol><li>把伪首部添加到udp数据报上，构成一个包含完整端点信息的数据报</li><li>将首部校验和字段的16个bit全部置为0</li><li>将整个数据报以16-bit按二进制反码算数求和。如果总的字节数不是偶数，则添加一个全0字节作为填充来辅助求和。</li></ol> 
<ul><li>接收端<br> 1.</li></ul> 
<blockquote> 
 <p>如果接收端对数据报校验失败，udp协议会怎么处理该数据报？</p> 
</blockquote> 
<p>​ 有两种情况会导致数据报被<strong>丢弃</strong>，一是发送端没有对数据报计算校验和，也就是checksum字段为全0，而接收端又对该字段值做了验证。二是接收端校验失败，数据报在传输过程中存在差错。</p> 
<blockquote> 
 <p>校验和（checksum）字段对udp协议来说是必须的吗？</p> 
</blockquote> 
<p>​ udp的校验和（checksum）字段是可选的。在局域网中，由于数据报不需要通过路由器，产生差错的概率较小，此时不使用这个字段是可以接受的，因为可以大大提高传输速率（比较适用于流媒体文件的传输）。但如果数据报通过路由器时，数据产生差错的概率会大大增加，这个时候为了保证数据报的可用性，checksum字段就变得比较重要了。</p> 
<blockquote> 
 <p>校验和（checksum）校验通过就说明数据报一定不存在传输差错吗？</p> 
</blockquote> 
<p>不一定，校验和校验通过只能说明，接收端有很高的自信度认为该数据报不存在差错，但并不是百分之百的，思考这样一种情景：数据报中多个位置产生差错，但是这些个位置的差错结合起来又恰巧使得接收端计算的校验和等于发送端，这个时候，这种差错检测机制就失效了，也就说明，校验机制并不能百分百保证数据一致性。</p> 
<h6><a id="123__Padding_bytes_55"></a>1.2.3 填充字节（Padding bytes）</h6> 
<ul><li>填充字节只是为了辅助计算校验和，计算完毕后即丢弃，并不会随数据发送给接收端。</li></ul> 
<h4><a id="3_udp_59"></a>3. 关于udp协议的一些常见问题</h4> 
<blockquote> 
 <p>使用udp协议，发送端是如何确定数据报有没有被接收端接收的？</p> 
</blockquote> 
<p>​ 不能确定，发送端只负责发送，至于接收端有没有成功接收到，发送端是不负责的。反之，当接收端成功接收到消息时，也不会反馈给发送端。</p> 
<p>议，发送端是如何确定数据报有没有被接收端接收的？</p> 
<p>​ 不能确定，发送端只负责发送，至于接收端有没有成功接收到，发送端是不负责的。反之，当接收端成功接收到消息时，也不会反馈给发送端。</p> 
<blockquote> 
 <p>既然udp提供的服务是非可靠的，那采用udp协议的应用要如何实现可靠数据传输？</p> 
</blockquote> 
<ul><li>在应用层增加可靠性机制</li><li>应用特定错误恢复机制</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4798414f4782a3fa48c4924559fc4448/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PHP面向对象简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae0815b6b7fe60b7a2e3e69869f51084/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">红黑树的插入与删除</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
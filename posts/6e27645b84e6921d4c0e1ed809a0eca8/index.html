<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>5. 超炫酷的爬虫源代码-vip音乐下载器 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="5. 超炫酷的爬虫源代码-vip音乐下载器" />
<meta property="og:description" content="文章目录 1. 准备工作2. 安装第3方库2.1 os 库2.2 tkinter库2.3 webbrowser 库2.4 requests 库2.5 PySimpleGUI 库2.6 retrying库 3. 源代码4. 运行结果5. 音乐下载器的使用6. 去哪里找下载的音乐7. 部分代码解析8. 留言 1. 准备工作 在电脑D盘新建一个【安迪笔记】文件夹。
【安迪笔记】文件夹里新建【2.爬虫笔记】文件夹。
【2.爬虫笔记】文件夹里新建【5.vip音乐爬虫】文件夹。
【5.vip音乐爬虫】文件夹里新建【5.vip音乐下载器.py】文件。
我用vscode编辑器打开【安迪笔记】文件夹。
vscode打开的文件夹决定了相对路径，这一步要重点关注。
【备注】
我写笔记需要用到【安迪笔记】里的其他资料，为了笔记方便，我才建了这么多文件夹 。
因为有太多太多的同学找不到最终输出的文件，所以我对建文件夹和py文件做了详细说明。
如果你能掌握绝对路径的知识，能找到输出的文件，直接建py文件写即可。
2. 安装第3方库 【程序需要导入的所有库】
import os import tkinter as tk import webbrowser import requests import tkinter.messagebox as mes_box import PySimpleGUI as sg from tkinter import ttk from retrying import retry 2.1 os 库 os是Python的内置库，不需要额外安装。
os库提供了一系列与操作系统交互的函数。
包括文件操作、进程管理、环境变量等。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/6e27645b84e6921d4c0e1ed809a0eca8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-09T00:13:37+08:00" />
<meta property="article:modified_time" content="2023-06-09T00:13:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">5. 超炫酷的爬虫源代码-vip音乐下载器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#1__3" rel="nofollow">1. 准备工作</a></li><li><a href="#2_3_25" rel="nofollow">2. 安装第3方库</a></li><li><ul><li><a href="#21_os__39" rel="nofollow">2.1 os 库</a></li><li><a href="#22_tkinter_49" rel="nofollow">2.2 tkinter库</a></li><li><a href="#23_webbrowser__61" rel="nofollow">2.3 webbrowser 库</a></li><li><a href="#24_requests__121" rel="nofollow">2.4 requests 库</a></li><li><a href="#25_PySimpleGUI__176" rel="nofollow">2.5 PySimpleGUI 库</a></li><li><a href="#26_retrying_218" rel="nofollow">2.6 retrying库</a></li></ul> 
   </li><li><a href="#3__237" rel="nofollow">3. 源代码</a></li><li><a href="#4__482" rel="nofollow">4. 运行结果</a></li><li><a href="#5__491" rel="nofollow">5. 音乐下载器的使用</a></li><li><a href="#6__504" rel="nofollow">6. 去哪里找下载的音乐</a></li><li><a href="#7__525" rel="nofollow">7. 部分代码解析</a></li><li><a href="#8__596" rel="nofollow">8. 留言</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1__3"></a>1. 准备工作</h3> 
<ol><li> <p>在电脑D盘新建一个【安迪笔记】文件夹。</p> </li><li> <p>【安迪笔记】文件夹里新建【2.爬虫笔记】文件夹。</p> </li><li> <p>【2.爬虫笔记】文件夹里新建【5.vip音乐爬虫】文件夹。</p> </li><li> <p>【5.vip音乐爬虫】文件夹里新建【5.vip音乐下载器.py】文件。</p> </li><li> <p>我用vscode编辑器打开【安迪笔记】文件夹。</p> </li></ol> 
<p><font color="#FF000">vscode打开的文件夹决定了相对路径，这一步要重点关注。</font></p> 
<p>【备注】</p> 
<ol><li> <p>我写笔记需要用到【安迪笔记】里的其他资料，为了笔记方便，我才建了这么多文件夹 。</p> </li><li> <p>因为有太多太多的同学找不到最终输出的文件，所以我对建文件夹和py文件做了详细说明。</p> </li><li> <p>如果你能掌握绝对路径的知识，能找到输出的文件，直接建py文件写即可。</p> </li></ol> 
<h3><a id="2_3_25"></a>2. 安装第3方库</h3> 
<p>【程序需要导入的所有库】</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> tkinter <span class="token keyword">as</span> tk
<span class="token keyword">import</span> webbrowser
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token keyword">as</span> mes_box
<span class="token keyword">import</span> PySimpleGUI <span class="token keyword">as</span> sg
<span class="token keyword">from</span> tkinter <span class="token keyword">import</span> ttk
<span class="token keyword">from</span> retrying <span class="token keyword">import</span> retry
</code></pre> 
<h4><a id="21_os__39"></a>2.1 os 库</h4> 
<p>os是Python的内置库，不需要额外安装。</p> 
<p>os库提供了一系列与操作系统交互的函数。</p> 
<p>包括文件操作、进程管理、环境变量等。</p> 
<p>通过os库，可以实现对文件、目录、进程等的操作，方便程序的编写和管理。</p> 
<h4><a id="22_tkinter_49"></a>2.2 tkinter库</h4> 
<p>tkinter：图形界面。</p> 
<p>tkinter是Python的内置库，不需要额外安装。</p> 
<p>它是一个图形用户界面(GUI)工具包。</p> 
<p>可以用于创建窗口、按钮、标签、文本框等各种界面元素，以及实现用户与程序的交互。</p> 
<p>它是Python中最常用的GUI库之一，适用于开发桌面应用程序。</p> 
<h4><a id="23_webbrowser__61"></a>2.3 webbrowser 库</h4> 
<p>webbrowser：网页浏览器。</p> 
<p>webbrowser 是Python的内置库，不需要额外安装。</p> 
<p>webbrowser 库的作用是打开一个浏览器窗口，并在其中显示指定的URL地址。</p> 
<p>它提供了一种简单的方法来在Python程序中打开网页、查看文档、播放视频等。</p> 
<p>例如，可以使用 <code>webbrowser.open() </code>函数来打开一个指定的URL地址，如下所示：</p> 
<p>【代码示例】</p> 
<pre><code class="prism language-python"><span class="token comment"># 1. 导入webbrowser库</span>
<span class="token keyword">import</span> webbrowser

<span class="token comment"># 2. 定义一个url变量</span>
url <span class="token operator">=</span> <span class="token string">'https://www.baidu.com'</span>

<span class="token comment"># 3.打开百度网页</span>
webbrowser<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</code></pre> 
<p>【终端输出】</p> 
<pre><code>True
</code></pre> 
<p>【代码解析】</p> 
<ol><li> <p>webbrowser库名。</p> </li><li> <p>库名和函数之间有一个英文小圆点<code>.</code>。</p> </li><li> <p>open函数名。</p> </li><li> <p>url是参数，即要打开的网页。</p> </li></ol> 
<p>【返回值】</p> 
<p>True</p> 
<p>返回<code>True</code>表示打开网页成功。</p> 
<p>【效果】</p> 
<p>运行上面的代码，我的360浏览器会自动打开百度网站。如下图所示：</p> 
<p><img src="https://images2.imgbox.com/cf/56/ERvh0pMj_o.png" alt="在这里插入图片描述"></p> 
<p>【调用模块或库中的函数语法】</p> 
<p>调用模块或库的函数：<code>模块名.函数名()</code>，如 os.mkdir()</p> 
<h4><a id="24_requests__121"></a>2.4 requests 库</h4> 
<p>requests 是第三方库，需要安装。</p> 
<p>【pip安装requests库的方法】</p> 
<ol><li>打开命令行</li></ol> 
<p><img src="https://images2.imgbox.com/da/fe/bwsgljTA_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>在命令行中输入以下命令</li></ol> 
<pre><code class="prism language-python">pip install <span class="token operator">-</span>i https<span class="token punctuation">:</span><span class="token operator">//</span>pypi<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple<span class="token operator">/</span> requests
</code></pre> 
<p>【安装语法解析】</p> 
<ol><li> <p>关键字<code>pip</code></p> </li><li> <p>安装命令关键字<code>install</code></p> </li></ol> 
<p>install[ɪnˈstɔːl]：安装。</p> 
<ol start="3"><li> <p><code>-i</code>后面表示要接的是镜像源。</p> </li><li> <p>下面的链接是清华大学镜像源。</p> </li></ol> 
<pre><code class="prism language-python">https<span class="token punctuation">:</span><span class="token operator">//</span>pypi<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple<span class="token operator">/</span>
</code></pre> 
<ol start="5"><li>要安装的库名：<code>requests</code>。</li></ol> 
<p>【安装第3方库可参考下面的链接】</p> 
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI2MzE1NTg2OA==&amp;mid=2649776493&amp;idx=1&amp;sn=6270a130737ffddc404c7d26765ead6c&amp;chksm=f244f89ec5337188cdcbf2519c6c4a6090a126c5e0ccec4ae20d34d3684491f24021435a6ae9#rd" rel="nofollow">73. python第三方库安装教程（超详细）</a></p> 
<p>【备注】</p> 
<p>因为这个库我已经安装过了，这里不做图片展示。后面有安装的库图片展示，不懂的请参考后文。</p> 
<p>【requests库的作用】</p> 
<p>requests库的作用是发送HTTP请求，并处理响应。</p> 
<p>它可以发送GET、POST、PUT、DELETE等请求，支持HTTPS、Cookie、Session等功能。</p> 
<p>还可以处理JSON、XML等格式的数据。</p> 
<p>requests 库简化了HTTP请求的操作，使得Python程序可以更方便地与Web服务器进行交互。</p> 
<h4><a id="25_PySimpleGUI__176"></a>2.5 PySimpleGUI 库</h4> 
<p>PySimpleGUI 是第三方库，需要安装。</p> 
<p>【pip安装库的代码】</p> 
<pre><code class="prism language-python">pip install <span class="token operator">-</span>i https<span class="token punctuation">:</span><span class="token operator">//</span>pypi<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple<span class="token operator">/</span> PySimpleGUI
</code></pre> 
<p>安装过程如下图所示：</p> 
<p><img src="https://images2.imgbox.com/65/ac/WAgdtRZQ_o.png" alt="在这里插入图片描述"></p> 
<p>【GUI是什么】</p> 
<p>GUI是Graphical User Interface的缩写，中文翻译为图形用户界面。</p> 
<p>Graphical [ˈɡrafɪk(ə)l]：图形的。</p> 
<p>Interface [ˈɪntəfeɪs]：接口。</p> 
<p>它是一种通过图形化方式呈现计算机操作界面的技术，使得用户可以通过鼠标、键盘等输入设备与计算机进行交互。</p> 
<p>GUI的出现使得计算机操作更加直观、易用，用户可以通过图形化的界面进行操作，而不需要记忆复杂的命令行指令。</p> 
<p>常见的GUI包括Windows、Mac OS、Linux等操作系统的桌面界面。</p> 
<p>【PySimpleGUI的作用】</p> 
<p>PySimpleGUI是一个用于创建图形用户界面的 Python 库。</p> 
<p>它提供了一种简单易用的方式来创建跨平台的 GUI 应用程序。</p> 
<p>它的设计目标是让 GUI 开发变得简单、快速、易于理解和易于维护。</p> 
<p>PySimpleGUI 支持多种 GUI 工具包，包括 Tkinter、Qt、WxPython 和 Pygame。</p> 
<p>它可以用于创建各种类型的 GUI 应用程序，包括桌面应用程序、游戏、数据可视化工具等。</p> 
<h4><a id="26_retrying_218"></a>2.6 retrying库</h4> 
<p>retrying是第三方库，需要安装。</p> 
<p>【pip安装库的代码】</p> 
<pre><code class="prism language-python">pip install <span class="token operator">-</span>i https<span class="token punctuation">:</span><span class="token operator">//</span>pypi<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>simple<span class="token operator">/</span> retrying
</code></pre> 
<p>【retrying库的作用】</p> 
<p>retrying：正在重试。</p> 
<p>retrying库的作用是提供了一种简单的方式来添加重试逻辑，可以在函数执行失败时自动重试。</p> 
<p>它可以帮助我们处理一些不稳定的操作，比如网络请求、数据库连接等，提高程序的健壮性和可靠性。</p> 
<h3><a id="3__237"></a>3. 源代码</h3> 
<p>上面的所有库都安装完成以后，就可以把下面的代码直接复制到py文件中。</p> 
<p>然后点击运行。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> tkinter <span class="token keyword">as</span> tk
<span class="token keyword">import</span> webbrowser
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token keyword">as</span> mes_box
<span class="token keyword">import</span> PySimpleGUI <span class="token keyword">as</span> sg
<span class="token keyword">from</span> tkinter <span class="token keyword">import</span> ttk
<span class="token keyword">from</span> retrying <span class="token keyword">import</span> retry

<span class="token keyword">class</span> <span class="token class-name">SetUI</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    音乐弹框界面
    """</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> weight<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>ui_weight <span class="token operator">=</span> weight
        self<span class="token punctuation">.</span>ui_height <span class="token operator">=</span> height
        self<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">"好课优选·音乐破解软件"</span>
        self<span class="token punctuation">.</span>ui_root <span class="token operator">=</span> tk<span class="token punctuation">.</span>Tk<span class="token punctuation">(</span>className<span class="token operator">=</span>self<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui_url <span class="token operator">=</span> tk<span class="token punctuation">.</span>StringVar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui_var <span class="token operator">=</span> tk<span class="token punctuation">.</span>IntVar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui_var<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span>song_num <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span>response_data <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span>song_url <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span>song_name <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span>song_author <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">set_ui</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        设置简易UI界面
        :return:
        """</span>
        <span class="token comment"># Frame空间</span>
        frame_1 <span class="token operator">=</span> tk<span class="token punctuation">.</span>Frame<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_root<span class="token punctuation">)</span>
        frame_2 <span class="token operator">=</span> tk<span class="token punctuation">.</span>Frame<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_root<span class="token punctuation">)</span>
        frame_3 <span class="token operator">=</span> tk<span class="token punctuation">.</span>Frame<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_root<span class="token punctuation">)</span>
        frame_4 <span class="token operator">=</span> tk<span class="token punctuation">.</span>Frame<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_root<span class="token punctuation">)</span>

        <span class="token comment"># ui界面中菜单设计</span>
        ui_menu <span class="token operator">=</span> tk<span class="token punctuation">.</span>Menu<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_root<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui_root<span class="token punctuation">.</span>config<span class="token punctuation">(</span>menu<span class="token operator">=</span>ui_menu<span class="token punctuation">)</span>
        file_menu <span class="token operator">=</span> tk<span class="token punctuation">.</span>Menu<span class="token punctuation">(</span>ui_menu<span class="token punctuation">,</span> tearoff<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
        ui_menu<span class="token punctuation">.</span>add_cascade<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'菜单'</span><span class="token punctuation">,</span> menu<span class="token operator">=</span>file_menu<span class="token punctuation">)</span>
        <span class="token comment"># file_menu.add_command(label='使用说明', command=lambda: webbrowser.open('www.baidu.com'))</span>
        <span class="token comment"># file_menu.add_command(label='关于作者', command=lambda: webbrowser.open('www.baidu.com'))</span>
        file_menu<span class="token punctuation">.</span>add_command<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'退出'</span><span class="token punctuation">,</span> command<span class="token operator">=</span>self<span class="token punctuation">.</span>ui_root<span class="token punctuation">.</span>quit<span class="token punctuation">)</span>

        <span class="token comment"># 控件内容设置</span>
        choice_passageway <span class="token operator">=</span> tk<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>frame_1<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">'请选择音乐搜索通道：'</span><span class="token punctuation">,</span> padx<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> pady<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token comment"># passageway_button_1 = tk.Radiobutton(frame_1, text='酷我', variable=self.ui_var, value=1, width=10, height=3)</span>
        <span class="token comment"># passageway_button_2 = tk.Radiobutton(frame_1, text='网易云', variable=self.ui_var, value=2, width=10, height=3)</span>
        <span class="token comment"># passageway_button_3 = tk.Radiobutton(frame_1, text='QQ音乐', variable=self.ui_var, value=3, width=10, height=3)</span>
        <span class="token comment"># passageway_button_4 = tk.Radiobutton(frame_1, text='酷我', variable=self.ui_var, value=4, width=10, height=3)</span>
        input_link <span class="token operator">=</span> tk<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>frame_2<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"请输入歌曲名或歌手："</span><span class="token punctuation">)</span>
        entry_style <span class="token operator">=</span> tk<span class="token punctuation">.</span>Entry<span class="token punctuation">(</span>frame_2<span class="token punctuation">,</span> textvariable<span class="token operator">=</span>self<span class="token punctuation">.</span>ui_url<span class="token punctuation">,</span> highlightcolor<span class="token operator">=</span><span class="token string">'Fuchsia'</span><span class="token punctuation">,</span> highlightthickness<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
                               width<span class="token operator">=</span><span class="token number">35</span><span class="token punctuation">)</span>
        label2 <span class="token operator">=</span> tk<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>frame_2<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">)</span>
        play_button <span class="token operator">=</span> tk<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>frame_2<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"搜索"</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'楷体'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fg<span class="token operator">=</span><span class="token string">'Purple'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
                                command<span class="token operator">=</span>self<span class="token punctuation">.</span>get_KuWoMusic<span class="token punctuation">)</span>
        label3 <span class="token operator">=</span> tk<span class="token punctuation">.</span>Label<span class="token punctuation">(</span>frame_2<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">" "</span><span class="token punctuation">)</span>
        <span class="token comment"># 表格样式</span>
        columns <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"序号"</span><span class="token punctuation">,</span> <span class="token string">"歌手"</span><span class="token punctuation">,</span> <span class="token string">"歌曲"</span><span class="token punctuation">,</span> <span class="token string">"专辑"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result <span class="token operator">=</span> ttk<span class="token punctuation">.</span>Treeview<span class="token punctuation">(</span>frame_3<span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span> show<span class="token operator">=</span><span class="token string">"headings"</span><span class="token punctuation">,</span> columns<span class="token operator">=</span>columns<span class="token punctuation">)</span>
        <span class="token comment"># 下载</span>
        download_button <span class="token operator">=</span> tk<span class="token punctuation">.</span>Button<span class="token punctuation">(</span>frame_4<span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"下载"</span><span class="token punctuation">,</span> font<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'楷体'</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fg<span class="token operator">=</span><span class="token string">'Purple'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> padx<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>
                                    pady<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> command<span class="token operator">=</span>self<span class="token punctuation">.</span>download_music<span class="token punctuation">)</span>

        <span class="token comment"># 控件布局</span>
        frame_1<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>
        frame_2<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>
        frame_3<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>
        frame_4<span class="token punctuation">.</span>pack<span class="token punctuation">(</span><span class="token punctuation">)</span>
        choice_passageway<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token comment"># passageway_button_1.grid(row=0, column=1)</span>
        <span class="token comment"># passageway_button_2.grid(row=0, column=2)</span>
        <span class="token comment"># passageway_button_3.grid(row=0, column=3)</span>
        <span class="token comment"># passageway_button_4.grid(row=0, column=4)</span>
        input_link<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
        entry_style<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        label2<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
        play_button<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> ipadx<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> ipady<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
        label3<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
        download_button<span class="token punctuation">.</span>grid<span class="token punctuation">(</span>row<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> column<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>

        <span class="token comment"># 设置表头</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>heading<span class="token punctuation">(</span><span class="token string">"序号"</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"序号"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>heading<span class="token punctuation">(</span><span class="token string">"歌手"</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"歌手"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>heading<span class="token punctuation">(</span><span class="token string">"歌曲"</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"歌曲"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>heading<span class="token punctuation">(</span><span class="token string">"专辑"</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token string">"专辑"</span><span class="token punctuation">)</span>
        <span class="token comment"># 设置列</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>column<span class="token punctuation">(</span><span class="token string">"序号"</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> anchor<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>column<span class="token punctuation">(</span><span class="token string">"歌手"</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> anchor<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>column<span class="token punctuation">(</span><span class="token string">"歌曲"</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> anchor<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>column<span class="token punctuation">(</span><span class="token string">"专辑"</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">,</span> anchor<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>

        <span class="token comment"># 鼠标点击</span>
        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token string">'&lt;ButtonRelease-1&gt;'</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>get_song_url<span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@retry</span><span class="token punctuation">(</span>stop_max_attempt_number<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">get_KuWoMusic</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        获取酷我音乐
        :return:
        """</span>
        <span class="token comment"># 清空treeview表格数据</span>
        <span class="token keyword">for</span> item <span class="token keyword">in</span> self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>get_children<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'accept'</span><span class="token punctuation">:</span> <span class="token string">'application/json, text/plain, */*'</span><span class="token punctuation">,</span>
            <span class="token string">'accept - encoding'</span><span class="token punctuation">:</span> <span class="token string">'gzip, deflate'</span><span class="token punctuation">,</span>
            <span class="token string">'accept - language'</span><span class="token punctuation">:</span> <span class="token string">'zh - CN, zh;q = 0.9'</span><span class="token punctuation">,</span>
            <span class="token string">'cache - control'</span><span class="token punctuation">:</span> <span class="token string">'no - cache'</span><span class="token punctuation">,</span>
            <span class="token string">'Connection'</span><span class="token punctuation">:</span> <span class="token string">'keep-alive'</span><span class="token punctuation">,</span>
            <span class="token string">'csrf'</span><span class="token punctuation">:</span> <span class="token string">'HH3GHIQ0RYM'</span><span class="token punctuation">,</span>
            <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'http://www.kuwo.cn/search/list?key=%E5%91%A8%E6%9D%B0%E4%BC%A6'</span><span class="token punctuation">,</span>
            <span class="token string">'User-agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '</span>
                          <span class="token string">'Chrome/99.0.4844.51 Safari/537.36'</span><span class="token punctuation">,</span>
            <span class="token string">'Cookie'</span><span class="token punctuation">:</span> <span class="token string">'_ga=GA1.2.218753071.1648798611; _gid=GA1.2.144187149.1648798611; _gat=1; '</span>
                      <span class="token string">'Hm_lvt_cdb524f42f0ce19b169a8071123a4797=1648798611; '</span>
                      <span class="token string">'Hm_lpvt_cdb524f42f0ce19b169a8071123a4797=1648798611; kw_token=HH3GHIQ0RYM'</span>
        <span class="token punctuation">}</span>
        search_input <span class="token operator">=</span> self<span class="token punctuation">.</span>ui_url<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>search_input<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            search_url <span class="token operator">=</span> <span class="token string">'http://www.kuwo.cn/api/www/search/searchMusicBykeyWord?'</span>
            search_data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">'key'</span><span class="token punctuation">:</span> search_input<span class="token punctuation">,</span>
                <span class="token string">'pn'</span><span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
                <span class="token string">'rn'</span><span class="token punctuation">:</span> <span class="token string">'80'</span><span class="token punctuation">,</span>
                <span class="token string">'httpsStatus'</span><span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
                <span class="token string">'reqId'</span><span class="token punctuation">:</span> <span class="token string">'858597c1-b18e-11ec-83e4-9d53d2ff08ff'</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>response_data <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>search_url<span class="token punctuation">,</span> params<span class="token operator">=</span>search_data<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
                songs_data <span class="token operator">=</span> self<span class="token punctuation">.</span>response_data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'list'</span><span class="token punctuation">]</span>
                <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>response_data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'total'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                    mes_box<span class="token punctuation">.</span>showerror<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'错误'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'搜索: {} 不存在.'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>search_input<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>songs_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> values<span class="token operator">=</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> songs_data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'artist'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> songs_data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                               songs_data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">except</span> TimeoutError<span class="token punctuation">:</span>
                mes_box<span class="token punctuation">.</span>showerror<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'错误'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'搜索超时，请重新输入后再搜索！'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            mes_box<span class="token punctuation">.</span>showerror<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'错误'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'未输入需查询的歌曲或歌手，请输入后搜索！'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_song_url</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        获取下载歌曲的地址
        :return:
        """</span>
        <span class="token comment"># treeview中的左键单击</span>
        <span class="token keyword">for</span> item <span class="token keyword">in</span> self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>selection<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            item_text <span class="token operator">=</span> self<span class="token punctuation">.</span>show_result<span class="token punctuation">.</span>item<span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token string">"values"</span><span class="token punctuation">)</span>
            <span class="token comment"># 获取</span>
            self<span class="token punctuation">.</span>song_num <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>item_text<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment"># 获取下载歌曲的地址</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>song_num <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            songs_data <span class="token operator">=</span> self<span class="token punctuation">.</span>response_data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'list'</span><span class="token punctuation">]</span>
            songs_req_id <span class="token operator">=</span> self<span class="token punctuation">.</span>response_data<span class="token punctuation">[</span><span class="token string">'reqId'</span><span class="token punctuation">]</span>
            song_rid <span class="token operator">=</span> songs_data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>song_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'rid'</span><span class="token punctuation">]</span>
            music_url <span class="token operator">=</span> <span class="token string">'http://www.kuwo.cn/api/v1/www/music/playUrl?mid={}&amp;type=convert_url3'</span> \
                        <span class="token string">'&amp;httpsStatus=1&amp;reqId={}'</span> \
                <span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>song_rid<span class="token punctuation">,</span> songs_req_id<span class="token punctuation">)</span>
            response_data <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>music_url<span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>song_url <span class="token operator">=</span> response_data<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>song_name <span class="token operator">=</span> songs_data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>song_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>
            self<span class="token punctuation">.</span>song_author <span class="token operator">=</span> songs_data<span class="token punctuation">[</span>self<span class="token punctuation">.</span>song_num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'artist'</span><span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            mes_box<span class="token punctuation">.</span>showerror<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'错误'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'未选择要下载的歌曲，请选择'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">download_music</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        下载音乐
        :return:
        """</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">'./KuWoMusic'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span><span class="token string">"./KuWoMusic/"</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>song_num <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            song_name <span class="token operator">=</span> self<span class="token punctuation">.</span>song_name <span class="token operator">+</span> <span class="token string">'--'</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>song_author <span class="token operator">+</span> <span class="token string">".mp3"</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                save_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">'./KuWoMusic/{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>song_name<span class="token punctuation">)</span><span class="token punctuation">)</span> \
                    <span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\\'</span><span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
                true_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>save_path<span class="token punctuation">)</span>
                resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>song_url<span class="token punctuation">)</span>
                <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>save_path<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
                    <span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
                    mes_box<span class="token punctuation">.</span>showinfo<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'下载成功'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'歌曲：%s,保存地址为%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>song_name<span class="token punctuation">,</span> true_path<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">except</span> Exception<span class="token punctuation">:</span>
                mes_box<span class="token punctuation">.</span>showerror<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'错误'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'未找到存放歌曲的文件夹'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            mes_box<span class="token punctuation">.</span>showerror<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'错误'</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'未选择要下载的歌曲，请选择后下载'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">progress_bar</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> file_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        任务加载进度条
        :return:
        """</span>
        layout <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>sg<span class="token punctuation">.</span>Text<span class="token punctuation">(</span><span class="token string">'任务完成进度'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token punctuation">[</span>sg<span class="token punctuation">.</span>ProgressBar<span class="token punctuation">(</span>file_size<span class="token punctuation">,</span> orientation<span class="token operator">=</span><span class="token string">'h'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token string">'progressbar'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                  <span class="token punctuation">[</span>sg<span class="token punctuation">.</span>Cancel<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

        <span class="token comment"># window只需将自定义的布局加载出来即可 第一个参数是窗口标题。</span>
        window <span class="token operator">=</span> sg<span class="token punctuation">.</span>Window<span class="token punctuation">(</span><span class="token string">'机器人执行进度'</span><span class="token punctuation">,</span> layout<span class="token punctuation">)</span>
        <span class="token comment"># 根据key值获取到进度条</span>
        _progress_bar <span class="token operator">=</span> window<span class="token punctuation">[</span><span class="token string">'progressbar'</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>file_size<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 循环</span>
            event<span class="token punctuation">,</span> values <span class="token operator">=</span> window<span class="token punctuation">.</span>read<span class="token punctuation">(</span>timeout<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> event <span class="token operator">==</span> <span class="token string">'Cancel'</span> <span class="token keyword">or</span> event <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                <span class="token keyword">break</span>
            _progress_bar<span class="token punctuation">.</span>UpdateBar<span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">ui_center</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        UI界面窗口设置：居中
        """</span>
        ws <span class="token operator">=</span> self<span class="token punctuation">.</span>ui_root<span class="token punctuation">.</span>winfo_screenwidth<span class="token punctuation">(</span><span class="token punctuation">)</span>
        hs <span class="token operator">=</span> self<span class="token punctuation">.</span>ui_root<span class="token punctuation">.</span>winfo_screenheight<span class="token punctuation">(</span><span class="token punctuation">)</span>
        x <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ws <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_weight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        y <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>hs <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui_root<span class="token punctuation">.</span>geometry<span class="token punctuation">(</span><span class="token string">'{}x{}+{}+{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>ui_weight<span class="token punctuation">,</span> self<span class="token punctuation">.</span>ui_height<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">loop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        函数说明:loop等待用户事件
        """</span>
        self<span class="token punctuation">.</span>ui_root<span class="token punctuation">.</span>resizable<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment"># 禁止修改窗口大小</span>
        self<span class="token punctuation">.</span>ui_center<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 窗口居中</span>
        self<span class="token punctuation">.</span>set_ui<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ui_root<span class="token punctuation">.</span>mainloop<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> SetUI<span class="token punctuation">(</span><span class="token punctuation">)</span>
    a<span class="token punctuation">.</span>loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="4__482"></a>4. 运行结果</h3> 
<p>代码正常运行后，得到如下一个GUI：</p> 
<p><img src="https://images2.imgbox.com/3a/27/HG1izO02_o.png" alt="在这里插入图片描述"></p> 
<p>我把它称为vip音乐下载器。</p> 
<h3><a id="5__491"></a>5. 音乐下载器的使用</h3> 
<ol><li> <p>在【请输入歌曲名或歌手：】后面输入【张杰】。</p> </li><li> <p>点击【搜索】。</p> </li></ol> 
<p>和张杰有关的所有歌曲会呈现在GUI界面上，如下图所示：</p> 
<p><img src="https://images2.imgbox.com/72/da/XIcnm2dB_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>点击【下载】。</li></ol> 
<h3><a id="6__504"></a>6. 去哪里找下载的音乐</h3> 
<p>我用vscode编辑器打开的是【安迪笔记】文件夹。</p> 
<p>运行上面的代码后【安迪笔记】文件夹里多了一个【KuWoMusic】文件夹。</p> 
<p>下载的音乐在【KuWoMusic】文件夹里。</p> 
<p><img src="https://images2.imgbox.com/59/89/y5lqqgEb_o.png" alt="在这里插入图片描述"></p> 
<p><font color="#FF000">vscode打开的是【安迪笔记】文件夹，下载的音乐在【安迪笔记】文件夹里的【KuWoMusic】文件夹里。</font></p> 
<p>所以让大家重点关注下vscode打开的文件夹。</p> 
<p>我衷心希望大家有空没空多研究下相对路径的知识，这个问题问我回答的头疼，太浪费我的时间了。</p> 
<p>相对路径知识可参考如下链接。</p> 
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI2MzE1NTg2OA==&amp;mid=2649776335&amp;idx=1&amp;sn=c3ee678200bd51695358c5e0f1818168&amp;chksm=f244f93cc533702ad349b27669a303c57304fabefbd0a368b541a3d743891a45570b219b3dda#rd" rel="nofollow">68. Python的相对路径</a></p> 
<h3><a id="7__525"></a>7. 部分代码解析</h3> 
<p>【导入库语法】</p> 
<p><code>import+模块名</code></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> webbrowser
</code></pre> 
<p>【代码示例】</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> tkinter <span class="token keyword">as</span> tk
</code></pre> 
<p>【代码解析】</p> 
<p>import tkinter as tk的作用是导入tkinter模块并将简写为<code>tk</code>。</p> 
<p>import PySimpleGUI as sg的作用是导入PySimpleGUI模块并将简写为<code>sg</code>。</p> 
<p>【代码示例】</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> tkinter<span class="token punctuation">.</span>messagebox <span class="token keyword">as</span> mes_box
</code></pre> 
<p>【代码解析】</p> 
<p>这行代码的意思是将 <code>tkinter</code> 库中的 <code>messagebox </code>模块导入，并将其重命名为 mes_box。</p> 
<p>这样就可以使用 mes_box 来调用 messagebox 模块中的函数，例如 mes_box.showinfo() 来显示一个信息框。</p> 
<p>【代码示例】</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> tkinter <span class="token keyword">import</span> ttk
</code></pre> 
<p>【代码解析】</p> 
<p>这行代码的意思是从 tkinter 模块中导入 ttk 子模块。</p> 
<p>ttk 是 tkinter 的一个扩展模块，提供了一些额外的控件和样式选项。</p> 
<p>【代码示例】</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> retrying <span class="token keyword">import</span> retry
</code></pre> 
<p>【代码解析】</p> 
<p>从retrying库中导入retry函数。</p> 
<p>代码解析先写库这个部分的。</p> 
<p>其它代码后面有时间再解析吧。</p> 
<p>真是困到怀疑人生了，今天的笔记没有检查，如果有错误、错别字大家联系我修改。</p> 
<p>诶，一个不认真、不负责的博主！！！</p> 
<h3><a id="8__596"></a>8. 留言</h3> 
<p>源代码的作者是【湖南好课优选教育】的三更老师。</p> 
<p>源代码是我上直播课写完作业后的奖励。</p> 
<p>如涉侵权，请联系删除。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d91524739e0fa7729d717b16c92b5cd3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python Selenium WebDriver 如何设置请求头用户代理(User-Agent)参数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4331557e9e679c7dcb875710d9c31262/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">代码库 - git管理工具</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
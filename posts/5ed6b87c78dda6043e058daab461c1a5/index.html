<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>怎么用Q-Q图验证数据集的分布 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="怎么用Q-Q图验证数据集的分布" />
<meta property="og:description" content="样本数据集在构建机器学习模型的过程中具有重要的作用，样本数据集包括训练集、验证集、测试集，其中训练集和验证集的作用是对学习模型进行参数择优，测试集是测试该模型的泛化能力。
正负样本数据集符合独立同分布是构建机器学习模型的前提，从概率角度分析，样本数据独立同分布是正负样本数据是从某一特定的数据分布随机抽取得到的，且正负样本的分布是不一样的。举例来说，若我们用非洲的西瓜作为训练集，然后用中国的西瓜作为测试集，则数据集可能不满足同分布这一前提；抛硬币是最简单的独立同分布；用较专业的学术用语来举例，若训练数据集符合正态分布，测试集符合均匀分布，那么数据集不满足独立同分布这一前提。
本文用Q-Q可以分析不同数据集是否为同一分布，且可以用Q-Q图来验证数据集是否符合正态分布。
一、累积分布函数与分位数
累计分布函数（CDF，Cumulative Distribution Function），顾名思义，是概率累计的过程。对某一变量X取值为x，则x的累计分布函数是所有小于x值的概率相加，公式如下：
分位数（quantile）的概念与累计分布函数类似，也是一种概率累计过程，如第一四分位数是累积分布概率达到0.25时所对应的变量值，第二四分位数是累计分布概率达到0.5时多对应的值，第三四分位数是累计分布概率达到0.75时对应的值，公式如下：
α代表累计概率，分位数为Zα：
P(X&lt;=Zα) = α ；
二、Q-Q图定义
Q-Q是一种散点图，横坐标为某一样本的分位数，纵坐标为另一样本的分位数，横坐标与纵坐标组成的散点图代表同一个累计概率所对应的分位数。若散点图在直线y=x附近分布，则这两个样本是同等分布；若横坐标样本为标准正态分布且散点图是在直线y=x附近分布，则纵坐标样本符合正态分布，且直线斜率代表样本标准差，截距代表样本均值。
如上图左上角图为某一数据的累计概率分布函数，右上角为标准正态分布的累计概率分布函数，对上述两图取同一个累计概率值对应的分位数，绘制散点图，由图可知，数据符合正态分布，斜率和截距分别代表数据的标准差和均值。
QQ图中正态分布直线的推导：
若数据x是正态分布的，那么f(x)是一个正态分布的概率密度函数，根据正态分布的特性，数据x对应的标准正态分布函数的概率密度函数：
y =f((x-m)/std)，其中m为样本均值，std为样本标准差
横坐标的数据分布是标准正态分布，概率密度函数为f(n)，由QQ图定义可知两者是一一对应的，因此有：
(x-m)/std = n ;
即：x = n*std &#43; m；
所以直线的斜率代表标准差，截距代表均值。
三、构建普通QQ图
普通QQ图用于评估两个数据集的分布的相似程度，如上节所说的，若散点图在直线y=x附近，则两个数据集的分布类似。普通QQ图与正态QQ图的不同点在于普通QQ图的横坐标是未知数据集的分位数，正态QQ图的横坐标是标准正态分布的分位数，其他步骤都一样。
由上图可知，散点图没有接近一条直线，因此数据集1和数据集2来自不同的分布集。
上图是本人所从事项目数据的普通QQ图，散点图接近一条直线，因此可以认为数据集是来自同一分布。
参考：https://blog.csdn.net/hzwwpgmwy/article/details/79178485" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5ed6b87c78dda6043e058daab461c1a5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-11-08T19:21:15+08:00" />
<meta property="article:modified_time" content="2018-11-08T19:21:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">怎么用Q-Q图验证数据集的分布</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        样本数据集在构建机器学习模型的过程中具有重要的作用，样本数据集包括训练集、验证集、测试集，其中训练集和验证集的作用是对学习模型进行参数择优，测试集是测试该模型的泛化能力。</p> 
<p>                                                                    <img alt="" class="has" height="194" src="https://images2.imgbox.com/27/90/nz9gxSnT_o.png" width="267"></p> 
<p>        正负样本数据集符合独立同分布是构建机器学习模型的前提，从概率角度分析，样本数据独立同分布是正负样本数据是从某一特定的数据分布随机抽取得到的，且正负样本的分布是不一样的。举例来说，若我们用非洲的西瓜作为训练集，然后用中国的西瓜作为测试集，则数据集可能不满足同分布这一前提；抛硬币是最简单的独立同分布；用较专业的学术用语来举例，若训练数据集符合正态分布，测试集符合均匀分布，那么数据集不满足独立同分布这一前提。</p> 
<p>        本文用Q-Q可以分析不同数据集是否为同一分布，且可以用Q-Q图来验证数据集是否符合正态分布。</p> 
<p><strong>一、累积分布函数与分位数</strong></p> 
<p>        累计分布函数（CDF，Cumulative Distribution Function），顾名思义，是概率累计的过程。对某一变量X取值为x，则x的累计分布函数是所有小于x值的概率相加，公式如下：</p> 
<p>                                                                                 <img alt="" class="has" height="37" src="https://images2.imgbox.com/1b/11/J0OfuJ0W_o.png" width="108"></p> 
<p>        分位数（quantile）的概念与累计分布函数类似，也是一种概率累计过程，如第一四分位数是累积分布概率达到0.25时所对应的变量值，第二四分位数是累计分布概率达到0.5时多对应的值，第三四分位数是累计分布概率达到0.75时对应的值，公式如下：</p> 
<p>α代表累计概率，分位数为Zα：</p> 
<p>P(X&lt;=Zα) = α ；</p> 
<p><strong>二、Q-Q图定义</strong></p> 
<p>        Q-Q是一种散点图，横坐标为某一样本的分位数，纵坐标为另一样本的分位数，横坐标与纵坐标组成的散点图代表同一个累计概率所对应的分位数。若散点图在直线y=x附近分布，则这两个样本是同等分布；若横坐标样本为标准正态分布且散点图是在直线y=x附近分布，则纵坐标样本符合正态分布，且直线斜率代表样本标准差，截距代表样本均值。</p> 
<p>                                                               <img alt="" class="has" height="310" src="https://images2.imgbox.com/5b/d2/1fsbHsoX_o.png" width="390"></p> 
<p>        如上图左上角图为某一数据的累计概率分布函数，右上角为标准正态分布的累计概率分布函数，对上述两图取同一个累计概率值对应的分位数，绘制散点图，由图可知，数据符合正态分布，斜率和截距分别代表数据的标准差和均值。</p> 
<p>QQ图中正态分布直线的推导：</p> 
<p>        若数据x是正态分布的，那么f(x)是一个正态分布的概率密度函数，根据正态分布的特性，数据x对应的标准正态分布函数的概率密度函数：</p> 
<p>                            y =f((x-m)/std)，其中m为样本均值，std为样本标准差</p> 
<p>        横坐标的数据分布是标准正态分布，概率密度函数为f(n)，由QQ图定义可知两者是一一对应的，因此有：</p> 
<p>                            (x-m)/std = n ;</p> 
<p>                            即：x = n*std + m；</p> 
<p>所以直线的斜率代表标准差，截距代表均值。</p> 
<p> </p> 
<p><strong>三、构建普通QQ图</strong></p> 
<p>        普通QQ图用于评估两个数据集的分布的相似程度，如上节所说的，若散点图在直线y=x附近，则两个数据集的分布类似。普通QQ图与正态QQ图的不同点在于普通QQ图的横坐标是未知数据集的分位数，正态QQ图的横坐标是标准正态分布的分位数，其他步骤都一样。</p> 
<p>                                                         <img alt="" class="has" height="355" src="https://images2.imgbox.com/da/d4/W5O1BX1P_o.png" width="402"></p> 
<p>        由上图可知，散点图没有接近一条直线，因此数据集1和数据集2来自不同的分布集。</p> 
<p>                                                           <img alt="" class="has" height="300" src="https://images2.imgbox.com/42/2b/6xEjcoxW_o.png" width="373"></p> 
<p> </p> 
<p>上图是本人所从事项目数据的普通QQ图，散点图接近一条直线，因此可以认为数据集是来自同一分布。</p> 
<p><strong>参考</strong>：https://blog.csdn.net/hzwwpgmwy/article/details/79178485</p> 
<p>                                                          <img alt="" class="has" height="234" src="https://images2.imgbox.com/98/a5/v3GN44wv_o.png" width="424"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2a4730989ee254ad8ea6bdcc483dd2b8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">5.6.2 低通滤波器（理想低通&#43;巴特沃斯低通滤波器）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/174753c785bbc66158c7988f7227f3ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">int()是什么？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
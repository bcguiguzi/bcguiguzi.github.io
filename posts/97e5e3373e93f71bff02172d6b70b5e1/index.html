<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot&#43;mybatis-plus实现自动建表 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot&#43;mybatis-plus实现自动建表" />
<meta property="og:description" content="好长时间没输出了，最近工作上也是太多事，领导动不动就拍脑门，那叫一个酸爽~
工作能力的提现不但是技术或解决问题的能力上，还体现在要能立刻满足领导的各种需求，不管是哪方面的需求，这样才能够拍上马屁，步步高升。
言归正传，作为技术从业者，还是要多深耕技术。有小伙伴问，在springboot工程中，持久层采用的mybatis框架，如何能够自动建表，一个团队中各个小伙伴针对新增需求会添加或修改表，但各自调试时，数据库表更新又不及时，造成很大不便。下面记录一下springboot&#43;mybatis-plus实现自动建表。
1、环境 springboot2.x
mybatis-plus3.5.0
mybatis-enhance-actable1.1.1.RELEASE
mysql5.7.x
idea开发工具
2、新建springboot工程 2.1、pom依赖如下 &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.baomidou&lt;/groupId&gt; &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt; &lt;version&gt;3.5.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.gitee.sunchenbin.mybatis.actable&lt;/groupId&gt; &lt;artifactId&gt;mybatis-enhance-actable&lt;/artifactId&gt; &lt;version&gt;1.1.1.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 2.2、application配置 server: port: 9001 spring: #数据库配置 datasource: url: jdbc:mysql://localhost:3306/test?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false driver-class-name: com.mysql.cj.jdbc.Driver username: root password: root #自动建表设置 mybatis: table: #create系统启动后，会将所有的表删除掉，然后根据model中配置的结构重新建表，该操作会破坏原有数据; #update系统会自动判断哪些表是新建的．哪些字段要修改类型等，哪些字段要删除，哪些字段要新增，该操作不会破坏原有数据; #add新增表/新增字段/新增索引新增唯一约束的功能，不做做修改和删除(只在版本1.0.9.RELEASE及以上支持); #none系统不做任何处理; auto: update model: #扫描用于创建表的对象的包名 pack: com.*.*.model database: #数据库类型目前只支持mysql type: mysql #mybatis-plus mybatis-plus: #固定的 mapper-locations: classpath*:com/gitee/sunchenbin/mybatis/actable/mapping/*/*." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/97e5e3373e93f71bff02172d6b70b5e1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-18T20:43:21+08:00" />
<meta property="article:modified_time" content="2023-07-18T20:43:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot&#43;mybatis-plus实现自动建表</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>好长时间没输出了，最近工作上也是太多事，领导动不动就拍脑门，那叫一个酸爽~<br> 工作能力的提现不但是技术或解决问题的能力上，还体现在要能立刻满足领导的各种需求，不管是哪方面的需求，这样才能够拍上马屁，步步高升。<br> 言归正传，作为技术从业者，还是要多深耕技术。有小伙伴问，在springboot工程中，持久层采用的mybatis框架，如何能够自动建表，一个团队中各个小伙伴针对新增需求会添加或修改表，但各自调试时，数据库表更新又不及时，造成很大不便。下面记录一下springboot+mybatis-plus实现自动建表。</p> 
</blockquote> 
<h2><a id="1_5"></a>1、环境</h2> 
<p>springboot2.x<br> mybatis-plus3.5.0<br> mybatis-enhance-actable1.1.1.RELEASE<br> mysql5.7.x<br> idea开发工具</p> 
<h2><a id="2springboot_12"></a>2、新建springboot工程</h2> 
<h3><a id="21pom_13"></a>2.1、pom依赖如下</h3> 
<pre><code>	&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.5.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.gitee.sunchenbin.mybatis.actable&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-enhance-actable&lt;/artifactId&gt;
            &lt;version&gt;1.1.1.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
</code></pre> 
<h3><a id="22application_48"></a>2.2、application配置</h3> 
<pre><code>server:
  port: 9001

spring:
  #数据库配置
  datasource:
    url: jdbc:mysql://localhost:3306/test?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: root

#自动建表设置
mybatis:
  table:
    #create系统启动后，会将所有的表删除掉，然后根据model中配置的结构重新建表，该操作会破坏原有数据;
    #update系统会自动判断哪些表是新建的．哪些字段要修改类型等，哪些字段要删除，哪些字段要新增，该操作不会破坏原有数据;
    #add新增表/新增字段/新增索引新增唯一约束的功能，不做做修改和删除(只在版本1.0.9.RELEASE及以上支持);
    #none系统不做任何处理;
    auto: update
  model:
    #扫描用于创建表的对象的包名
    pack: com.*.*.model
  database:
    #数据库类型目前只支持mysql
    type: mysql

#mybatis-plus
mybatis-plus:
  #固定的
  mapper-locations: classpath*:com/gitee/sunchenbin/mybatis/actable/mapping/*/*.xml

</code></pre> 
<p>注意，mybatis-plus是固定的，采用的是mybatis-enhance-actable插件。</p> 
<h2><a id="3mybatisplus_85"></a>3、集成mybatis-plus</h2> 
<blockquote> 
 <p>启动类配置如下</p> 
</blockquote> 
<pre><code>@SpringBootApplication
@MapperScan("com.*.*.mapper")
@ComponentScan("com.*.*.*")
@MapperScan({"com.gitee.sunchenbin.mybatis.actable.dao.*"})//固定的
@ComponentScan("com.gitee.sunchenbin.mybatis.actable.manager.*")//固定的
public class SpringbootMybatisPlus2Application {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootMybatisPlus2Application.class, args);
    }

}
</code></pre> 
<p>注意，固定的是采用的是mybatis-enhance-actable插件。</p> 
<blockquote> 
 <p>实体类配置如下</p> 
</blockquote> 
<pre><code>@Data
@Table(name = "t_test")
@TableName(value = "t_test")
public class Test {

    @TableId(value = "id",type = IdType.AUTO)
    @IsKey
    @IsAutoIncrement
    @Column(name = "id",comment = "主键")
    private Long id;

    @TableField(value = "name")
    @Column(name = "",comment = "名称",isNull = false)
    private String name;

    @TableField(value = "create_time")
    @Column(name = "create_time",comment = "创建时间")
    private String creatTime;

    @Column(name = "update_time",comment = "修改时间")
    private String updateTime;

}
</code></pre> 
<p>注解分别为mybatisplus提供的、mybatis-enhance-actable提供的，前者的注解是用来进行持久层操作的（增删改查），后者的注解是用来进行自动建表的。</p> 
<h2><a id="4_134"></a>4、业务操作</h2> 
<blockquote> 
 <p>mapper类如下</p> 
</blockquote> 
<pre><code>@Mapper
public interface TestMapper extends BaseMapper&lt;Test&gt; {
}
</code></pre> 
<blockquote> 
 <p>service类如下</p> 
</blockquote> 
<pre><code>public interface TestService extends IService&lt;Test&gt; {
}

</code></pre> 
<pre><code>@Service
public class TestServiceImpl extends ServiceImpl&lt;TestMapper, Test&gt; implements TestService {
}
</code></pre> 
<blockquote> 
 <p>controller类如下</p> 
</blockquote> 
<pre><code>@RestController
@RequiredArgsConstructor
public class TestController {

    private final TestServiceImpl testService;

    @GetMapping("/hello")
    public Object hello() {
        return "hello";
    }

    @GetMapping("/save")
    public Object save() {
        Test test = new Test();
        test.setName("caocao");
        testService.save(test);
        return test;
    }

    @GetMapping("/list")
    public Object list() {
        List&lt;Test&gt; list = testService.list();
        return list;
    }
}
</code></pre> 
<h2><a id="5_187"></a>5、测试结果</h2> 
<p>启动服务，结果类似如下<br> <img src="https://images2.imgbox.com/c2/28/2r382r8X_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9d/e4/HhuWKsyr_o.png" alt="在这里插入图片描述"><br> 访问结果如下<br> <img src="https://images2.imgbox.com/ca/59/8QbRTEEP_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a2/e8/RaerIHmy_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e2/e5/avBX5Njh_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8a5f70287b423f5d1ccf3f3e77856a45/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">京东到家搜索查询接口API</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/850156c0867eaa05c43d94694b8c188f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数独小游戏——Python实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
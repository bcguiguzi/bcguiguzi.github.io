<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MYSQL的null(空值)，还有空字符串的坑 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MYSQL的null(空值)，还有空字符串的坑" />
<meta property="og:description" content="原文来源：数据运营与数据分析
1.先建立数据 # 创建表demo02 CREATE TABLE demo02 ( id int PRIMARY KEY AUTO_INCREMENT COMMENT &#34;编号&#34;, name CHAR(20) NOT NULL COMMENT &#34;名字&#34;, sex CHAR(5) DEFAULT &#34;未知&#34; COMMENT &#34;性别&#34;, age int(10) COMMENT &#34;年龄&#34;, qualifications CHAR(40) COMMENT &#34;学历&#34;, interests CHAR(40) COMMENT &#34;爱好&#34; ) ENGINE= INNODB character set utf8mb4; # 插入数据 INSERT INTO demo02 (id,name,sex,age,qualifications,interests) VALUES (1,&#34;xr&#34;,&#34;男&#34;,26,&#34;本科&#34;,&#34;篮球&#34;), (2,&#34;hw&#34;,&#34;男&#34;,27,&#34;硕士&#34;,&#34;游泳&#34;), (3,&#34;wp&#34;,&#34;男&#34;,26,&#34;本科&#34;,&#34;游戏&#34;), (4,&#34;ljl&#34;,&#34;男&#34;,26,&#34;本科&#34;,&#34;桌球&#34;), (5,&#34;cl&#34;,&#34;女&#34;,26,&#34;硕士&#34;,&#34;小说&#34;), (6,&#34;hl&#34;,&#34;女&#34;,25,&#34;专科&#34;,&#34;小吃&#34;), (7,&#34;cb&#34;,&#34;女&#34;,25,&#34;本科&#34;,null), (8,&#34;cy&#34;,&#34;男&#34;,26,&#34;专科&#34;,&#34;调酒&#34;), (9,&#34;cj&#34;,&#34;女&#34;,24,&#34;博士&#34;,&#34; &#34;), (10,&#34;fj&#34;,&#34;男&#34;,27,&#34;硕士&#34;,&#34;宅男&#34;), (11,&#34;jl&#34;,&#34;未知&#34;,27,&#34;本科&#34;,&#34;&#34;) ; # 查看数据 SELECT * FROM demo02; 从查询结果中我们可以看出空值null和空字符串的显示是不相同的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/95d0970f1c35c8886d17f2e9417fc087/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-26T11:27:58+08:00" />
<meta property="article:modified_time" content="2020-11-26T11:27:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MYSQL的null(空值)，还有空字符串的坑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>原文来源：<a href="https://mp.weixin.qq.com/s?__biz=MzI1NTEyODAxOA==&amp;mid=2247485674&amp;idx=1&amp;sn=69dd24f31bbd8e44e4f0e60b77c0f069&amp;chksm=ea3bf057dd4c7941cb4068aaffe78d4e3c235d65014bfecd1642b1917e3693512b30324a0896&amp;token=1968742982&amp;lang=zh_CN#rd" rel="nofollow">数据运营与数据分析</a></p> 
<h2><a id="1_1"></a>1.先建立数据</h2> 
<pre><code class="prism language-sql"><span class="token comment"># 创建表demo02</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> demo02 
<span class="token punctuation">(</span>
		id <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">"编号"</span><span class="token punctuation">,</span>
		name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">"名字"</span><span class="token punctuation">,</span>
		sex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">"未知"</span> <span class="token keyword">COMMENT</span> <span class="token string">"性别"</span><span class="token punctuation">,</span>
		age <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">"年龄"</span><span class="token punctuation">,</span>
		qualifications <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">"学历"</span><span class="token punctuation">,</span>
		interests <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token keyword">COMMENT</span> <span class="token string">"爱好"</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span> <span class="token keyword">INNODB</span> <span class="token keyword">character</span> <span class="token keyword">set</span> utf8mb4<span class="token punctuation">;</span>

<span class="token comment"># 插入数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> demo02
		<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>age<span class="token punctuation">,</span>qualifications<span class="token punctuation">,</span>interests<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
		<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"xr"</span><span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token string">"本科"</span><span class="token punctuation">,</span><span class="token string">"篮球"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"hw"</span><span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token string">"硕士"</span><span class="token punctuation">,</span><span class="token string">"游泳"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"wp"</span><span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token string">"本科"</span><span class="token punctuation">,</span><span class="token string">"游戏"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"ljl"</span><span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token string">"本科"</span><span class="token punctuation">,</span><span class="token string">"桌球"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"cl"</span><span class="token punctuation">,</span><span class="token string">"女"</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token string">"硕士"</span><span class="token punctuation">,</span><span class="token string">"小说"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">"hl"</span><span class="token punctuation">,</span><span class="token string">"女"</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token string">"专科"</span><span class="token punctuation">,</span><span class="token string">"小吃"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">"cb"</span><span class="token punctuation">,</span><span class="token string">"女"</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token string">"本科"</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"cy"</span><span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token number">26</span><span class="token punctuation">,</span><span class="token string">"专科"</span><span class="token punctuation">,</span><span class="token string">"调酒"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token string">"cj"</span><span class="token punctuation">,</span><span class="token string">"女"</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token string">"博士"</span><span class="token punctuation">,</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"fj"</span><span class="token punctuation">,</span><span class="token string">"男"</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token string">"硕士"</span><span class="token punctuation">,</span><span class="token string">"宅男"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">"jl"</span><span class="token punctuation">,</span><span class="token string">"未知"</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token string">"本科"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span>
<span class="token punctuation">;</span>
<span class="token comment"># 查看数据</span>
<span class="token keyword">SELECT</span> 
	<span class="token operator">*</span>
<span class="token keyword">FROM</span> 
	demo02<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/54/0f/VCSojRSv_o.png" alt=""><br> 从查询结果中我们可以看出空值null和空字符串的显示是不相同的</p> 
<h2><a id="2_38"></a>2.简单对比一下</h2> 
<ul><li>做count聚合的时候空字符串算在其中，而null则不计算；</li><li>做模糊查找的[not] like的时候null会被过滤掉，空字符串不会；</li><li>计算字符串长度的时候null等于null，空字符串等于0；</li><li>条件中使用&lt;&gt; “” 不但会剔除空字符串，同样null也会剔除；</li><li>条件中使用 = “” 只会出现有空字符串的内容，但null的会被剔除；</li></ul> 
<pre><code class="prism language-sql"><span class="token comment"># 做count聚合的时候空字符串算在其中，而null则不计算</span>
<span class="token keyword">SELECT</span>
	<span class="token function">count</span><span class="token punctuation">(</span> id <span class="token punctuation">)</span> <span class="token keyword">AS</span> 总行数<span class="token punctuation">,</span>
	<span class="token function">count</span><span class="token punctuation">(</span>interests<span class="token punctuation">)</span> <span class="token keyword">AS</span> 剔除<span class="token boolean">null</span>的行数
<span class="token keyword">FROM</span> demo02<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c2/b1/nmVjh2og_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">"%小%"</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d0/84/GOjTvUOt_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">LIKE</span> <span class="token string">"%"</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b4/f6/NYvGbtD7_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	LENGTH<span class="token punctuation">(</span>interests<span class="token punctuation">)</span> <span class="token keyword">as</span> 字符串长度
<span class="token keyword">FROM</span> demo02<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/08/01/D42p97Hw_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a7/b3/SnWCvtDX_o.png" alt=""></p> 
<pre><code class="prism language-sql"><span class="token comment"># 用&lt;&gt; "" 同样会过来掉null</span>
<span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">&lt;&gt;</span> <span class="token string">""</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/9e/wDukXGOn_o.png" alt=" "></p> 
<h2><a id="3NULL_96"></a>3.判断NULL</h2> 
<p>用IS NULL 或者is not null，SQL语句函数中可以使用ifnull()函数来进行处理</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/af/24/zMLWrYzx_o.png" alt=" "></p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/94/e7/dewFYxLk_o.png" alt=" "></p> 
<pre><code class="prism language-sql"><span class="token comment"># 统计 空值null和空字符串的数量</span>
<span class="token keyword">SELECT</span> 
	<span class="token function">count</span><span class="token punctuation">(</span>ifnull<span class="token punctuation">(</span>interests<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 数量
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> ifnull<span class="token punctuation">(</span>interests<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/98/66/XkYrzEZI_o.png" alt=" "></p> 
<h2><a id="4_125"></a>4.判断空字符串</h2> 
<p>= 或者&lt;&gt; 来进行处理空字符串</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f7/68/qeLIEBIr_o.png" alt=" "></p> 
<pre><code class="prism language-sql"><span class="token comment"># 用&lt;&gt; "" 同样会过来掉null</span>
<span class="token keyword">SELECT</span> 
	name<span class="token punctuation">,</span>
	interests
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> interests <span class="token operator">&lt;&gt;</span> <span class="token string">""</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c7/48/jfrdz1bx_o.png" alt=" "></p> 
<h2><a id="5_146"></a>5.综合案例</h2> 
<pre><code class="prism language-sql"><span class="token comment"># 统计interests字段中不包含“小”字的数量</span>
<span class="token keyword">SELECT</span> 
	<span class="token function">count</span><span class="token punctuation">(</span>ifnull<span class="token punctuation">(</span>interests<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 数量
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> 
ifnull<span class="token punctuation">(</span>interests<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">"%小%"</span> 
<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/31/23/UVNqvz8L_o.png" alt=" "></p> 
<pre><code class="prism language-sql"><span class="token comment"># 输出interests字段中不包含"小"字的结果</span>
<span class="token keyword">SELECT</span> 
	<span class="token operator">*</span>
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> 
	ifnull<span class="token punctuation">(</span>interests<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">"%小%"</span> <span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
<span class="token keyword">SELECT</span> 
	<span class="token operator">*</span>
<span class="token keyword">FROM</span> demo02
<span class="token keyword">WHERE</span> 
	interests <span class="token operator">NOT</span> <span class="token operator">LIKE</span> <span class="token string">"%小%"</span> 
<span class="token operator">or</span> interests <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/79/1d/ttRnFbtN_o.png" alt=" "></p> 
<h2><a id="6_175"></a>6.总结</h2> 
<ul><li>做count聚合的时候空字符串算在其中，而null则不计算；</li><li>做模糊查找的[not] like的时候null会被过滤掉，空字符串不会；</li><li>计算字符串长度的时候null等于null，空字符串等于0；</li><li>条件中使用&lt;&gt; “” 不但会剔除空字符串，同样null也会剔除；</li><li>条件中使用 = “” 只会出现有空字符串的内容，但null的会被剔除；</li><li>判断NULL。用IS NULL 或者is not null，SQL语句函数中可以使用ifnull()函数来进行处理；</li><li>判断空字符串。= 或者&lt;&gt; 来进行处理空字符串</li><li>做条件筛选和count聚合时一定要查验是否有null,然后用ifnull(字段名,"")将其转换为空字符串。<br> <img src="https://images2.imgbox.com/2a/0e/bzNV2b3E_o.png" alt="在这里插入图片描述"></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/91d8dcb35b67b4391957a9643a51b86a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">几分钟看懂Base64编码原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0611f19344a6649efe5b283c08ba6f1f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vscode统计代码行数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
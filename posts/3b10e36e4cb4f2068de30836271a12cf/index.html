<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux/Unix命令之ethtool - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux/Unix命令之ethtool" />
<meta property="og:description" content="description: ethtool - Display or change ethernet card settings（ethtool 是用来显示和更改网卡设置的工具 1 ethtool 显示网络端口设置功能； 这个功能比较好办。就是ethtool 后面直接接网絽接口就行；比如下面的例子； [root@localhost ~]# ethtool eth0
Settings for eth0:
Supported ports: [ TP MII ]
Supported link modes: 10baseT/Half 10baseT/Full
100baseT/Half 100baseT/Full
Supports auto-negotiation: Yes
Advertised link modes: 10baseT/Half 10baseT/Full
100baseT/Half 100baseT/Full
Advertised auto-negotiation: No 注：自动协商关闭
Speed: 100Mb/s 注：速度 100Mb
Duplex: Full 注：全双工
Port: MII
PHYAD: 32
Transceiver: internal
Auto-negotiation: off
Supports Wake-on: pumbg
Wake-on: d" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3b10e36e4cb4f2068de30836271a12cf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2008-11-17T22:22:00+08:00" />
<meta property="article:modified_time" content="2008-11-17T22:22:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux/Unix命令之ethtool</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="">
    
</div> 
<div class=""> 
 <div class="bluetext"> 
  <strong>description:</strong> 
 </div> 
 <div>
   ethtool - Display or change ethernet card settings（ethtool 是用来显示和更改网卡设置的工具 
 </div> 
 <div> 
  <br>1 ethtool 显示网络端口设置功能； 
 </div> 
 <p>这个功能比较好办。就是ethtool 后面直接接网絽接口就行；比如下面的例子； </p> 
 <p>[root@localhost ~]# ethtool eth0<br>Settings for eth0:<br>        Supported ports: [ TP MII ]<br>        Supported link modes: 10baseT/Half 10baseT/Full<br>                                100baseT/Half 100baseT/Full<br>        Supports auto-negotiation: Yes<br>        Advertised link modes: 10baseT/Half 10baseT/Full<br>                                100baseT/Half 100baseT/Full<br>        Advertised auto-negotiation: No 注：自动协商关闭<br>        Speed: 100Mb/s 注：速度 100Mb<br>        Duplex: Full 注：全双工<br>        Port: MII<br>        PHYAD: 32<br>        Transceiver: internal<br>        Auto-negotiation: off<br>        Supports Wake-on: pumbg<br>        Wake-on: d<br>        Current message level: 0x00000007 (7)<br>        Link detected: yes 注：eth0已经激活..</p> 
 <p> </p> 
 <p>2 ethtool 设置网卡的协商模式</p> 
 <p>  在ethtool -h查看帮助</p> 
 <p> </p> 
 <div id="hidden_content" style="MARGIN-TOP: -20px"> 
  <p>ethtool -s DEVNAME /<br>                [ speed 10|100|1000 ] /<br>                [ duplex half|full ] /<br>                [ port tp|aui|bnc|mii|fibre ] /<br>                [ autoneg on|off ] /<br>  </p> 
  <p>＊ 实例一： 把网卡eth0 速度改为10Mb/s，采用半双工； </p> 
  <p>[root@cuc03 beinan]# ethtool -s eth1 speed 10 duplex half<br>[root@cuc03 beinan]# ethtool eth1<br>Settings for eth1:<br>        Supported ports: [ TP MII ]<br>        Supported link modes:   10baseT/Half 10baseT/Full<br>                                100baseT/Half 100baseT/Full<br>        Supports auto-negotiation: Yes<br>        Advertised link modes:  10baseT/Half 10baseT/Full<br>                                100baseT/Half 100baseT/Full<br>        Advertised auto-negotiation: No<br>        Speed: 10Mb/s 注：速度 10M/s<br>        Duplex: Half  注：半双工<br>        Port: MII<br>        PHYAD: 32<br>        Transceiver: internal<br>        Auto-negotiation: off<br>        Supports Wake-on: pumbg<br>        Wake-on: d<br>        Current message level: 0x00000007 (7)<br>        Link detected: no 注：eth1没有激活； </p> 
  <p>＊ 实例二： 把网卡eth0 速度改为100Mb/s，采用全双工； </p> 
  <p>[root@cuc03 beinan]# ethtool -s eth1 speed 100 duplex full <br>[root@cuc03 beinan]# ethtool eth1<br>Settings for eth1:<br>        Supported ports: [ TP MII ]<br>        Supported link modes:   10baseT/Half 10baseT/Full<br>                                100baseT/Half 100baseT/Full<br>        Supports auto-negotiation: Yes<br>        Advertised link modes:  10baseT/Half 10baseT/Full<br>                                100baseT/Half 100baseT/Full<br>        Advertised auto-negotiation: No<br>        Speed: 100Mb/s  注：速度 100M/s<br>        Duplex: Full 注：全双工<br>        Port: MII<br>        PHYAD: 32<br>        Transceiver: internal<br>        Auto-negotiation: off<br>        Supports Wake-on: pumbg<br>        Wake-on: d<br>        Current message level: 0x00000007 (7)<br>        Link detected: no 注：eth1网卡没有激活；</p> 
  <p>//</p> 
  <p> </p> 
  <div class="articleContent" id="articleBody"> 
   <p><font face="Verdana">描述：<br>Ethtool是用于查询及设置网卡参数的命令。</font></p> 
   <p><font face="Verdana">概要：<br>ethtool ethX <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> //查询ethX网口基本设置<br>ethtool –h <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> //显示ethtool的命令帮助(help)<br>ethtool –i ethX <wbr></wbr> <wbr></wbr> <wbr></wbr> //查询ethX网口的相关信息<br>ethtool –d ethX <wbr></wbr> <wbr></wbr> <wbr></wbr> //查询ethX网口注册性信息<br>ethtool –r ethX <wbr></wbr> <wbr></wbr> <wbr></wbr> //重置ethX网口到自适应模式<br>ethtool –S ethX <wbr></wbr> <wbr></wbr> <wbr></wbr> //查询ethX网口收发包统计<br>ethtool –s ethX [speed 10|100|1000]/ <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> //设置网口速率10/100/1000M<br>[duplex half|full]/ <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> //设置网口半/全双工<br>[autoneg on|off]/ <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> //设置网口是否自协商<br>[port tp|aui|bnc|mii]/ <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> //设置网口类型<br>[phyad N]/ <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr><br>[xcvr internal|exteral]/<br>[wol p|u|m|b|a|g|s|d...]/<br>[sopass xx:yy:zz:aa:bb:cc]/<br>[msglvl N]</font></p> 
   <p><font face="Verdana">举例：<br>1）[root@linux /]# ethtool eth1<br> <wbr></wbr> <wbr></wbr> Settings for eth1:<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Supported ports: [ TP ]<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Supported link modes: <wbr></wbr> <wbr></wbr> 10baseT/Half 10baseT/Full<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> 100baseT/Half 100baseT/Full<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> 1000baseT/Full<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Supports auto-negotiation: Yes<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Advertised link modes: <wbr></wbr> 10baseT/Half 10baseT/Full<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> 100baseT/Half 100baseT/Full<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> 1000baseT/Full<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Advertised auto-negotiation: Yes<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Speed: 1000Mb/s<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Duplex: Full<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Port: Twisted Pair<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> PHYAD: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Transceiver: internal<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Auto-negotiation: on<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Supports Wake-on: umbg<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Wake-on: d<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> Link detected: yes<br>2）[root@linux /]# ethtool -i eth1<br> <wbr></wbr> <wbr></wbr> driver: e1000<br> <wbr></wbr> <wbr></wbr> version: 5.0.43-k1<br> <wbr></wbr> <wbr></wbr> firmware-version: N/A<br> <wbr></wbr> <wbr></wbr> bus-info: 06:08.1<br>3）[root@linux /]# ethtool -S eth1<br> <wbr></wbr> <wbr></wbr> NIC statistics:<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_packets: 58068300<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_packets: 87124083<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_bytes: 1589713008<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_bytes: 2165825901<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_dropped: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_dropped: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> multicast: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> collisions: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_length_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_over_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_crc_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_frame_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_fifo_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> rx_missed_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_aborted_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_carrier_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_fifo_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_heartbeat_errors: 0<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> <wbr></wbr> tx_window_errors: 0<br>4）[root@linux /]# ethtool -s eth1 autoneg off speed 100 duplex full</font></p> 
   <p><font face="Verdana">相关：<br>1）[root@linux /]# which ethtool<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> /sbin/ethtool<br>2）[root@linux /]# rpm -qf /sbin/ethtool<br> <wbr></wbr> <wbr></wbr> ethtool-1.6-5<br>3）怎样使ethtool设置永久保存在网络设备中？<br> <wbr></wbr> <wbr></wbr> 解决方法一:<br> <wbr></wbr> <wbr></wbr> <wbr></wbr> ethtool设置可通过/etc/sysconfig/network-scripts/ifcfg-ethX文件保存,从而在设备下次启动时激活选项。<br>例如：ethtool -s eth0 speed 100 duplex full autoneg off<br>此指令将eth0设备设置为全双工自适应，速度为100Mbs。若要eth0启动时设置这些参数, 修改文件/etc/sysconfig/network-scripts/ifcfg-eth0 ，添加如下一行:<br> <wbr></wbr>ETHTOOL_OPTS="speed 100 duplex full autoneg off"<br>解决方法二:<br>将ethtool设置写入/etc/rc.d/rc.local之中。</font></p> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/92623290e8ccf82f9d465cd0fc7989e8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一位Erlang程序员的自白</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c1be694d4609541e19940a4104f07288/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">.NET程序员要看的书</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
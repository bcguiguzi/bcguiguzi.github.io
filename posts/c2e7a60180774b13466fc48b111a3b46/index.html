<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库基本理解 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库基本理解" />
<meta property="og:description" content="数据库 基本操作 数据库操作 show databases ; create database 库名 ;
#查看一个数据库的编码格式 show create database py ;
#设置数据库的编码格式 alter database py default character set utf8mb4 ;
#删库 drop database py ;
表的操作 show databases ; use 数据库 ；
create table 表名 { 字段1 类型（）， 字段2 类型（）， …… }
#修改表名 将book表重命名为books alter table book rename books
#添加字段 alter table books add press varchar(20);
#查看表的字段信息 desc books;
#删除字段 删除books表中的press字段。 alter table books drop press" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/c2e7a60180774b13466fc48b111a3b46/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-05T18:30:00+08:00" />
<meta property="article:modified_time" content="2023-09-05T18:30:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库基本理解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>数据库</h2> 
<h3>基本操作</h3> 
<h4><strong>数据库操作</strong></h4> 
<blockquote> 
 <p>show databases ; create database 库名 ;</p> 
 <p>#查看一个数据库的编码格式 show create database py ;</p> 
 <p>#设置数据库的编码格式 alter database py default character set utf8mb4 ;</p> 
 <p>#删库 drop database py ;</p> 
</blockquote> 
<h4><strong>表的操作</strong></h4> 
<blockquote> 
 <p>show databases ; use 数据库 ；</p> 
 <p>create table 表名 { 字段1 类型（）， 字段2 类型（）， …… }</p> 
 <p>#修改表名 将book表重命名为books alter table book rename books</p> 
 <p>#添加字段 alter table books add press varchar(20);</p> 
 <p>#查看表的字段信息 desc books;</p> 
 <p>#删除字段 删除books表中的press字段。 alter table books drop press</p> 
 <p>#删除表 删除books表 drop table books</p> 
</blockquote> 
<h4><strong>记录的增删改查 </strong></h4> 
<p>（如果不添加条件判断默认的就是对所有的记录进行修改）</p> 
<blockquote> 
 <p>insert into table ( x , x , x , x) values ( v , v , v , v ) ; delete from table ; update table set 字段 = 字段值 ，字段2 = 字段值2 ； select * from table where 条件 ;</p> 
</blockquote> 
<h3><strong>where字句</strong></h3> 
<p>where子句就是进行判断过滤的条件限定；</p> 
<h4><strong>单条件</strong></h4> 
<p>select * from table where 条件 ;</p> 
<blockquote> 
 <table><thead><tr><th>判断条件</th><th></th></tr></thead><tbody><tr><td>控制判断</td><td>字段 is null</td></tr><tr><td>模糊匹配</td><td>字段 like "%瀚%" （%表示任意个数任意字符）</td></tr><tr><td></td><td></td></tr></tbody></table> 
</blockquote> 
<h4><strong>多条件</strong></h4> 
<blockquote> 
 <p>and &amp; or 可能会产生冲突，可以用（）包裹一个整体</p> 
 <p>in 操作符：用来过滤出符合范围内的记录</p> 
 <blockquote> 
  <p>select * from table where 字段 in ("值1"，"值2",…)</p> 
 </blockquote> 
</blockquote> 
<hr> 
<h3><strong>聚合函数</strong></h3> 
<table><thead><tr><th>聚合函数</th><th></th></tr></thead><tbody><tr><td>count（字段）</td><td>计数，用来计算相应记录的个数</td></tr><tr><td>sum（字段）</td><td>求和</td></tr><tr><td>max（字段）</td><td>最大值</td></tr><tr><td>mix（字段）</td><td>最小值</td></tr><tr><td>avg（字段）</td><td>平均值（默认六位小数）</td></tr><tr><td></td><td></td></tr></tbody></table> 
<hr> 
<h3><strong>排序</strong> 、分页</h3> 
<p>order by（字段）[ desc ] desc降序</p> 
<blockquote> 
 <p>select * from table order by (字段) desc ;</p> 
 <p>【注意】order by + where : where 要放在order by 前边</p> 
</blockquote> 
<p>limit 可以限制查询的数量, 有两个参数 n，m</p> 
<blockquote> 
 <p>select * from table limit n , m ;</p> 
 <p>【参数】n：前边的记录条数 m：页面显示的记录条数</p> 
</blockquote> 
<h3>多表关联</h3> 
<p>数据库表有三种关联关系，分别为：一对多，一对一，多对多。</p> 
<pre> 以学生表，老师表，班级表为例，学生与班级的关系就是多对一。 学生请了家教，一个学生对应一个老师，就是一对一。老师与班级之间是多对多的关系，一个班级有多个任课老师，每个任课老师带多个班级。
 ​
 新建两张表</pre> 
<pre> DROP TABLE IF EXISTS `classroom`;
 CREATE TABLE `classroom` (
   `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
   `name` varchar(255) DEFAULT NULL COMMENT '教室名',
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
 ​
 -- ----------------------------
 -- Records of classroom
 -- ----------------------------
 INSERT INTO `classroom` VALUES ('1', '鄱阳湖');
 INSERT INTO `classroom` VALUES ('2', '淀山湖');
 INSERT INTO `classroom` VALUES ('3', '老君山');
 INSERT INTO `classroom` VALUES ('4', '桐柏山');
 ​
 -- ----------------------------
 -- Table structure for student
 -- ----------------------------
 DROP TABLE IF EXISTS `student`;
 CREATE TABLE `student` (
   `id` int NOT NULL AUTO_INCREMENT COMMENT '学生id',
   `name` varchar(255) DEFAULT NULL COMMENT '学生姓名',
   `gender` varchar(255) DEFAULT NULL COMMENT '性别',
   `age` int DEFAULT NULL COMMENT '年龄',
   `score` int DEFAULT NULL COMMENT '成绩',
   `c_id` int DEFAULT NULL COMMENT '教室id',
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
 ​
 -- ----------------------------
 -- Records of student
 -- ----------------------------
 INSERT INTO `student` VALUES ('1', '吴用', '男', '20', '4', '1');
 INSERT INTO `student` VALUES ('2', '李逵', '男', '23', '22', '1');
 INSERT INTO `student` VALUES ('3', '孙二娘', '女', '26', '103', '1');
 INSERT INTO `student` VALUES ('4', '扈三娘', '女', '18', '59', '2');</pre> 
<p>在多的那一端添加一个字段，存储 一 那一端的id。 在上面的例子中，学生是多的一端，在student表添加一个字段，c_id 存储 教室 classroom表的id。</p> 
<h4>内连接</h4> 
<pre> #===格式1===
 SELECT xxxx                                  # 建议自定义字段 as
 FROM tableA as A
     INNER JOIN tableB as B ON 关联字段       # 关联字段  on A.xx = B.xx
 WHERE
     条件
 #===格式2===
 SELECT xxxx                                  # 建议自定义字段 as
 FROM tableA ,tableB      
 WHERE
     关联字段 and 条件                         # 关联字段   A.xx = B.xx</pre> 
<pre> 例子：
 #查询鄱阳湖的同学的信息。
 SELECT
     s.id 学生编号,
     s. NAME 学生姓名,
     c. NAME AS 教室
 FROM
 #我们可以为表添加别名。
     student s
 INNER JOIN classroom c ON c_id = c.id
 WHERE
     c. NAME = '鄱阳湖';
     
 #内连接 另外一种写法。
 SELECT
     s.id,
     s. NAME,
     c.`name` AS classname
 FROM
     student s,
     classroom c
 WHERE
     s.c_id = c.id</pre> 
<h4>外连接</h4> 
<p>外连接就是定义一种方式；规定了左边或者右边为基准，就算关联字段是null也会获取到</p> 
<h5>左外连接</h5> 
<pre> #查询所有同学的信息，包括所属的班级名。
 SELECT
     s.id,
     s. NAME,
     c.name AS classname
 FROM
     student s LEFT JOIN classroom c
     ON  s.c_id = c.id   #on后面跟两种表关联的条件     </pre> 
<h5>右外连接</h5> 
<pre> #查询所有教室的信息，包含它的学生信息。
 SELECT
     s.id,
     s. NAME,
     c.`name` AS classname
 FROM
     student s RIGHT JOIN classroom c
     ON  s.c_id = c.id
</pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0b66b34519f04a43b9a14bbb6ca68f2e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何将home目录空间扩充到根目录下</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/130ae3aabf89bbb31e73fb1083cf0af7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装opencv库成功后import cv2报错</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
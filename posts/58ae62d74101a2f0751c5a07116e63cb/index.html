<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>18、气象学中风场的绘制 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="18、气象学中风场的绘制" />
<meta property="og:description" content="文章目录 前言一、批量读取数据二、绘制2022年的平均风场三、绘制每个季节的平均风场四、绘制每个月的风场 前言 数据及代码下载链接➡️：如何绘制自定义颜色的风场图
一、批量读取数据 import os import xarray as xr folder_path = &#34;./&#34; file_pattern = os.path.join(folder_path, &#34;*.nc&#34;) try: ds = xr.open_mfdataset(file_pattern) u10 = ds[&#34;u10&#34;] v10 = ds[&#34;v10&#34;] ds.close() except Exception as e: print(f&#34;读取文件时出现错误：{str(e)}&#34;) 二、绘制2022年的平均风场 import xarray as xr import numpy as np import pandas as pd import matplotlib as mpl import matplotlib.pyplot as plt import cartopy.crs as ccrs import cartopy.feature as cfeature from matplotlib.offsetbox import AnchoredText from matplotlib.colors import ListedColormap import cmaps import matplotlib." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/58ae62d74101a2f0751c5a07116e63cb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-12T20:07:36+08:00" />
<meta property="article:modified_time" content="2023-07-12T20:07:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">18、气象学中风场的绘制</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#_4" rel="nofollow">一、批量读取数据</a></li><li><a href="#2022_23" rel="nofollow">二、绘制2022年的平均风场</a></li><li><a href="#_225" rel="nofollow">三、绘制每个季节的平均风场</a></li><li><a href="#_285" rel="nofollow">四、绘制每个月的风场</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p><strong>数据及代码下载链接➡️：<a href="https://www.heywhale.com/mw/project/62f0dc9e54f6ab98096bd489?run=" rel="nofollow">如何绘制自定义颜色的风场图</a></strong></p> 
<h2><a id="_4"></a>一、批量读取数据</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> xarray <span class="token keyword">as</span> xr

folder_path <span class="token operator">=</span> <span class="token string">"./"</span>
file_pattern <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>folder_path<span class="token punctuation">,</span> <span class="token string">"*.nc"</span><span class="token punctuation">)</span>

<span class="token keyword">try</span><span class="token punctuation">:</span>
    ds <span class="token operator">=</span> xr<span class="token punctuation">.</span>open_mfdataset<span class="token punctuation">(</span>file_pattern<span class="token punctuation">)</span>
    u10 <span class="token operator">=</span> ds<span class="token punctuation">[</span><span class="token string">"u10"</span><span class="token punctuation">]</span>
    v10 <span class="token operator">=</span> ds<span class="token punctuation">[</span><span class="token string">"v10"</span><span class="token punctuation">]</span>
    ds<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"读取文件时出现错误：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

</code></pre> 
<h2><a id="2022_23"></a>二、绘制2022年的平均风场</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> xarray <span class="token keyword">as</span> xr
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib <span class="token keyword">as</span> mpl
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>crs <span class="token keyword">as</span> ccrs
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>feature <span class="token keyword">as</span> cfeature
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>offsetbox <span class="token keyword">import</span> AnchoredText
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>colors <span class="token keyword">import</span> ListedColormap
<span class="token keyword">import</span> cmaps
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>ticker <span class="token keyword">as</span> ticker
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>gridspec <span class="token keyword">import</span> GridSpec
<span class="token keyword">from</span> cartopy<span class="token punctuation">.</span>mpl<span class="token punctuation">.</span>geoaxes <span class="token keyword">import</span> GeoAxes
<span class="token keyword">from</span> mpl_toolkits<span class="token punctuation">.</span>axes_grid1 <span class="token keyword">import</span> AxesGrid
<span class="token keyword">import</span> datetime <span class="token keyword">as</span> dt

</code></pre> 
<pre><code class="prism language-python"><span class="token comment"># 求解纬向风、经向风以及风速的年平均值</span>
u10_ana <span class="token operator">=</span> u10<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
v10_ana <span class="token operator">=</span> v10<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
windspeed_ana <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>u10_ana<span class="token operator">**</span><span class="token number">2</span><span class="token operator">+</span>v10_ana<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>ticker <span class="token keyword">as</span> ticker
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>crs <span class="token keyword">as</span> ccrs
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>feature <span class="token keyword">as</span> cfeature
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>gridspec <span class="token keyword">import</span> GridSpec

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
gs <span class="token operator">=</span> GridSpec<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> figure<span class="token operator">=</span>fig<span class="token punctuation">)</span>
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>gs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> projection<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span>central_longitude<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>  <span class="token comment"># 设置全球地图范围</span>
img_extent <span class="token operator">=</span> <span class="token punctuation">[</span>leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat<span class="token punctuation">]</span>
lon <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>longitude
lat <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>latitude

d <span class="token operator">=</span> ax<span class="token punctuation">.</span>quiver<span class="token punctuation">(</span>lon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lat<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> u10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> windspeed_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>quiverkey<span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'5 m/s'</span><span class="token punctuation">,</span> labelpos<span class="token operator">=</span><span class="token string">'S'</span><span class="token punctuation">,</span> coordinates<span class="token operator">=</span><span class="token string">'axes'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>BORDERS<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>COASTLINE<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_extent<span class="token punctuation">(</span>img_extent<span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置地图显示范围为全球</span>

ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"180°W"</span><span class="token punctuation">,</span> <span class="token string">"150°W"</span><span class="token punctuation">,</span> <span class="token string">"120°W"</span><span class="token punctuation">,</span> <span class="token string">"90°W"</span><span class="token punctuation">,</span> <span class="token string">"60°W"</span><span class="token punctuation">,</span> <span class="token string">"30°W"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°E"</span><span class="token punctuation">,</span> <span class="token string">"60°E"</span><span class="token punctuation">,</span> <span class="token string">"90°E"</span><span class="token punctuation">,</span> <span class="token string">"120°E"</span><span class="token punctuation">,</span> <span class="token string">"150°E"</span><span class="token punctuation">,</span> <span class="token string">"180°"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"90°S"</span><span class="token punctuation">,</span> <span class="token string">"60°S"</span><span class="token punctuation">,</span> <span class="token string">"30°S"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°N"</span><span class="token punctuation">,</span> <span class="token string">"60°N"</span><span class="token punctuation">,</span> <span class="token string">"90°N"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>minorticks_on<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/ec/15/Q3f16Ezl_o.png" alt="在这里插入图片描述"></p> 
<p><strong>可以看到虽然绘制出了风场的图像，但是由于数据本身分辨率过高导致风场的图像并不是很直观，且风场的图标颜色不是很合适。因此，下面对风场进行微调，绘制出更加规范的图像。</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>ticker <span class="token keyword">as</span> ticker
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>crs <span class="token keyword">as</span> ccrs
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>feature <span class="token keyword">as</span> cfeature
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>gridspec <span class="token keyword">import</span> GridSpec

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
gs <span class="token operator">=</span> GridSpec<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> figure<span class="token operator">=</span>fig<span class="token punctuation">)</span>
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>gs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> projection<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span>central_longitude<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>  <span class="token comment"># 设置全球地图范围</span>
img_extent <span class="token operator">=</span> <span class="token punctuation">[</span>leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat<span class="token punctuation">]</span>
lon <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>longitude
lat <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>latitude

ax<span class="token punctuation">.</span>quiver<span class="token punctuation">(</span>lon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lat<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> u10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> windspeed_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"black"</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>quiverkey<span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'5 m/s'</span><span class="token punctuation">,</span> labelpos<span class="token operator">=</span><span class="token string">'S'</span><span class="token punctuation">,</span> coordinates<span class="token operator">=</span><span class="token string">'axes'</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>BORDERS<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>COASTLINE<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_extent<span class="token punctuation">(</span>img_extent<span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置地图显示范围为全球</span>

ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"180°W"</span><span class="token punctuation">,</span> <span class="token string">"150°W"</span><span class="token punctuation">,</span> <span class="token string">"120°W"</span><span class="token punctuation">,</span> <span class="token string">"90°W"</span><span class="token punctuation">,</span> <span class="token string">"60°W"</span><span class="token punctuation">,</span> <span class="token string">"30°W"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°E"</span><span class="token punctuation">,</span> <span class="token string">"60°E"</span><span class="token punctuation">,</span> <span class="token string">"90°E"</span><span class="token punctuation">,</span> <span class="token string">"120°E"</span><span class="token punctuation">,</span> <span class="token string">"150°E"</span><span class="token punctuation">,</span> <span class="token string">"180°"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"90°S"</span><span class="token punctuation">,</span> <span class="token string">"60°S"</span><span class="token punctuation">,</span> <span class="token string">"30°S"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°N"</span><span class="token punctuation">,</span> <span class="token string">"60°N"</span><span class="token punctuation">,</span> <span class="token string">"90°N"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>minorticks_on<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/44/5f/IsnIsFMU_o.png" alt="在这里插入图片描述"></p> 
<p><strong>可以看到当我们调整了<code>ax.quiver(lon[::20], lat[::20], u10_ana[::20, ::20], v10_ana[::20, ::20], windspeed_ana[::20, ::20], color="black")</code>语句之后，图片变得更加规范了，但是风场的颜色依旧没有发生变化，这个又该怎么办呢？<br> 这里解释一下，虽然我们使用函数对箭头的颜色进行了设置，但是Matplotlib还是会根据风速的大小绘制不同颜色的箭头，而如果要绘制统一颜色或者自定义箭头的颜色就需要自定义色标，然后利用<code>cmap</code>这个参数了。下面，展示使用cmap参数将所有箭头设置为黑色。</strong></p> 
<p><strong>自定义色标</strong></p> 
<pre><code class="prism language-python">newcolors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.03921</span><span class="token punctuation">,</span> <span class="token number">0.03921</span><span class="token punctuation">,</span> <span class="token number">0.03529</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
newcmap_1 <span class="token operator">=</span> ListedColormap<span class="token punctuation">(</span>newcolors<span class="token punctuation">)</span>
newcmap_1
</code></pre> 
<p><img src="https://images2.imgbox.com/ed/d2/bwtZeLTs_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>ticker <span class="token keyword">as</span> ticker
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>crs <span class="token keyword">as</span> ccrs
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>feature <span class="token keyword">as</span> cfeature
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>gridspec <span class="token keyword">import</span> GridSpec

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
gs <span class="token operator">=</span> GridSpec<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> figure<span class="token operator">=</span>fig<span class="token punctuation">)</span>
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>gs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> projection<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span>central_longitude<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>  <span class="token comment"># 设置全球地图范围</span>
img_extent <span class="token operator">=</span> <span class="token punctuation">[</span>leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat<span class="token punctuation">]</span>
lon <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>longitude
lat <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>latitude

d <span class="token operator">=</span> ax<span class="token punctuation">.</span>quiver<span class="token punctuation">(</span>lon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lat<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> u10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> windspeed_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>newcmap_1<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>quiverkey<span class="token punctuation">(</span>d<span class="token punctuation">,</span><span class="token number">0.875</span><span class="token punctuation">,</span> <span class="token number">1.025</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'10 m/s'</span><span class="token punctuation">,</span> labelpos<span class="token operator">=</span><span class="token string">'E'</span><span class="token punctuation">,</span> coordinates<span class="token operator">=</span><span class="token string">'axes'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">)</span> <span class="token comment"># 设置箭头示例颜色</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>BORDERS<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>COASTLINE<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_extent<span class="token punctuation">(</span>img_extent<span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置地图显示范围为全球</span>

ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"180°W"</span><span class="token punctuation">,</span> <span class="token string">"150°W"</span><span class="token punctuation">,</span> <span class="token string">"120°W"</span><span class="token punctuation">,</span> <span class="token string">"90°W"</span><span class="token punctuation">,</span> <span class="token string">"60°W"</span><span class="token punctuation">,</span> <span class="token string">"30°W"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°E"</span><span class="token punctuation">,</span> <span class="token string">"60°E"</span><span class="token punctuation">,</span> <span class="token string">"90°E"</span><span class="token punctuation">,</span> <span class="token string">"120°E"</span><span class="token punctuation">,</span> <span class="token string">"150°E"</span><span class="token punctuation">,</span> <span class="token string">"180°"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"90°S"</span><span class="token punctuation">,</span> <span class="token string">"60°S"</span><span class="token punctuation">,</span> <span class="token string">"30°S"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°N"</span><span class="token punctuation">,</span> <span class="token string">"60°N"</span><span class="token punctuation">,</span> <span class="token string">"90°N"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>minorticks_on<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"自定义风场颜色（示例一）"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/fb/ec/BUVeptSs_o.png" alt="在这里插入图片描述"></p> 
<p><strong>将箭头更改为其他颜色</strong></p> 
<pre><code class="prism language-python">newcolors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.545098</span><span class="token punctuation">,</span> <span class="token number">0.941176</span><span class="token punctuation">,</span> <span class="token number">0.878431</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
newcmap_2 <span class="token operator">=</span> ListedColormap<span class="token punctuation">(</span>newcolors<span class="token punctuation">)</span>

newcmap_2
</code></pre> 
<p><img src="https://images2.imgbox.com/94/ac/FMYuITPH_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>ticker <span class="token keyword">as</span> ticker
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>crs <span class="token keyword">as</span> ccrs
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>feature <span class="token keyword">as</span> cfeature
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>gridspec <span class="token keyword">import</span> GridSpec

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
gs <span class="token operator">=</span> GridSpec<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> figure<span class="token operator">=</span>fig<span class="token punctuation">)</span>
ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>gs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> projection<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span>central_longitude<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>  <span class="token comment"># 设置全球地图范围</span>
img_extent <span class="token operator">=</span> <span class="token punctuation">[</span>leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat<span class="token punctuation">]</span>
lon <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>longitude
lat <span class="token operator">=</span> u10_ana<span class="token punctuation">.</span>latitude

d <span class="token operator">=</span> ax<span class="token punctuation">.</span>quiver<span class="token punctuation">(</span>lon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lat<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> u10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v10_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> windspeed_ana<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>newcmap_2<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>quiverkey<span class="token punctuation">(</span>d<span class="token punctuation">,</span><span class="token number">0.875</span><span class="token punctuation">,</span> <span class="token number">1.025</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'10 m/s'</span><span class="token punctuation">,</span> labelpos<span class="token operator">=</span><span class="token string">'E'</span><span class="token punctuation">,</span> coordinates<span class="token operator">=</span><span class="token string">'axes'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">)</span> <span class="token comment"># 设置箭头示例颜色</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>BORDERS<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>COASTLINE<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_extent<span class="token punctuation">(</span>img_extent<span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 设置地图显示范围为全球</span>

ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"180°W"</span><span class="token punctuation">,</span> <span class="token string">"150°W"</span><span class="token punctuation">,</span> <span class="token string">"120°W"</span><span class="token punctuation">,</span> <span class="token string">"90°W"</span><span class="token punctuation">,</span> <span class="token string">"60°W"</span><span class="token punctuation">,</span> <span class="token string">"30°W"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°E"</span><span class="token punctuation">,</span> <span class="token string">"60°E"</span><span class="token punctuation">,</span> <span class="token string">"90°E"</span><span class="token punctuation">,</span> <span class="token string">"120°E"</span><span class="token punctuation">,</span> <span class="token string">"150°E"</span><span class="token punctuation">,</span> <span class="token string">"180°"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"90°S"</span><span class="token punctuation">,</span> <span class="token string">"60°S"</span><span class="token punctuation">,</span> <span class="token string">"30°S"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°N"</span><span class="token punctuation">,</span> <span class="token string">"60°N"</span><span class="token punctuation">,</span> <span class="token string">"90°N"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>

ax<span class="token punctuation">.</span>minorticks_on<span class="token punctuation">(</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">"自定义风场颜色（示例二）"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/00/67/VB8Cdkyr_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_225"></a>三、绘制每个季节的平均风场</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> xarray <span class="token keyword">as</span> xr
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> matplotlib <span class="token keyword">as</span> mpl
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>crs <span class="token keyword">as</span> ccrs
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>feature <span class="token keyword">as</span> cfeature
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>offsetbox <span class="token keyword">import</span> AnchoredText
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>colors <span class="token keyword">import</span> ListedColormap
<span class="token keyword">import</span> cmaps
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>ticker <span class="token keyword">as</span> ticker
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>gridspec <span class="token keyword">import</span> GridSpec
<span class="token keyword">from</span> cartopy<span class="token punctuation">.</span>mpl<span class="token punctuation">.</span>geoaxes <span class="token keyword">import</span> GeoAxes
<span class="token keyword">from</span> mpl_toolkits<span class="token punctuation">.</span>axes_grid1 <span class="token keyword">import</span> AxesGrid
<span class="token keyword">import</span> datetime <span class="token keyword">as</span> dt

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>layout<span class="token operator">=</span><span class="token string">"constrained"</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
gs <span class="token operator">=</span> GridSpec<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> figure<span class="token operator">=</span>fig<span class="token punctuation">)</span>

proj <span class="token operator">=</span> ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span>central_longitude<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span>
leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>
img_extent <span class="token operator">=</span> <span class="token punctuation">[</span>leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat<span class="token punctuation">]</span>

lon <span class="token operator">=</span> u10<span class="token punctuation">.</span>longitude
lat <span class="token operator">=</span> u10<span class="token punctuation">.</span>latitude

seasons <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"DJF"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">"MAM"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"JJA"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"SON"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> title<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>seasons<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>gs<span class="token punctuation">[</span>i <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> i <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> projection<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    u10_sea <span class="token operator">=</span> u10<span class="token punctuation">[</span>start<span class="token punctuation">:</span>end<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    v10_sea <span class="token operator">=</span> v10<span class="token punctuation">[</span>start<span class="token punctuation">:</span>end<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    windspeed_sea <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>u10_sea<span class="token operator">**</span><span class="token number">2</span><span class="token operator">+</span>v10_sea<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>

    d <span class="token operator">=</span> ax<span class="token punctuation">.</span>quiver<span class="token punctuation">(</span>lon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lat<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> u10_sea<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v10_sea<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> windspeed_sea<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>newcmap_1<span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>quiverkey<span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0.875</span><span class="token punctuation">,</span> <span class="token number">1.025</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'10 m/s'</span><span class="token punctuation">,</span> labelpos<span class="token operator">=</span><span class="token string">'E'</span><span class="token punctuation">,</span> coordinates<span class="token operator">=</span><span class="token string">'axes'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>BORDERS<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>COASTLINE<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_extent<span class="token punctuation">(</span>img_extent<span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"180°W"</span><span class="token punctuation">,</span> <span class="token string">"150°W"</span><span class="token punctuation">,</span> <span class="token string">"120°W"</span><span class="token punctuation">,</span> <span class="token string">"90°W"</span><span class="token punctuation">,</span> <span class="token string">"60°W"</span><span class="token punctuation">,</span> <span class="token string">"30°W"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°E"</span><span class="token punctuation">,</span> <span class="token string">"60°E"</span><span class="token punctuation">,</span> <span class="token string">"90°E"</span><span class="token punctuation">,</span> <span class="token string">"120°E"</span><span class="token punctuation">,</span> <span class="token string">"150°E"</span><span class="token punctuation">,</span> <span class="token string">"180°"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                       rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"90°S"</span><span class="token punctuation">,</span> <span class="token string">"60°S"</span><span class="token punctuation">,</span> <span class="token string">"30°S"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°N"</span><span class="token punctuation">,</span> <span class="token string">"60°N"</span><span class="token punctuation">,</span> <span class="token string">"90°N"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>

    ax<span class="token punctuation">.</span>minorticks_on<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span>title<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/75/f6/4fJuD5jj_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_285"></a>四、绘制每个月的风场</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>ticker <span class="token keyword">as</span> ticker
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>crs <span class="token keyword">as</span> ccrs
<span class="token keyword">import</span> cartopy<span class="token punctuation">.</span>feature <span class="token keyword">as</span> cfeature
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>gridspec <span class="token keyword">import</span> GridSpec

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
gs <span class="token operator">=</span> GridSpec<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> figure<span class="token operator">=</span>fig<span class="token punctuation">)</span>

proj <span class="token operator">=</span> ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span>central_longitude<span class="token operator">=</span><span class="token number">180</span><span class="token punctuation">)</span>
leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>
img_extent <span class="token operator">=</span> <span class="token punctuation">[</span>leftlon<span class="token punctuation">,</span> rightlon<span class="token punctuation">,</span> lowerlat<span class="token punctuation">,</span> upperlat<span class="token punctuation">]</span>

lon <span class="token operator">=</span> u10<span class="token punctuation">.</span>longitude
lat <span class="token operator">=</span> u10<span class="token punctuation">.</span>latitude

months <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">zip</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Dec'</span><span class="token punctuation">,</span><span class="token string">'Jan'</span><span class="token punctuation">,</span> <span class="token string">'Feb'</span><span class="token punctuation">,</span> <span class="token string">'Mar'</span><span class="token punctuation">,</span> <span class="token string">'Apr'</span><span class="token punctuation">,</span> <span class="token string">'May'</span><span class="token punctuation">,</span> <span class="token string">'Jun'</span><span class="token punctuation">,</span> <span class="token string">'Jul'</span><span class="token punctuation">,</span> <span class="token string">'Aug'</span><span class="token punctuation">,</span> <span class="token string">'Sep'</span><span class="token punctuation">,</span> <span class="token string">'Oct'</span><span class="token punctuation">,</span> <span class="token string">'Nov'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token punctuation">(</span>month<span class="token punctuation">,</span> title<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>months<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span>gs<span class="token punctuation">[</span>i <span class="token operator">//</span> <span class="token number">3</span><span class="token punctuation">,</span> i <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> projection<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    u10_mon <span class="token operator">=</span> u10<span class="token punctuation">[</span>month<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    v10_mon <span class="token operator">=</span> v10<span class="token punctuation">[</span>month<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>
    windspeed_mon <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>u10_mon<span class="token operator">**</span><span class="token number">2</span><span class="token operator">+</span>v10_mon<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>

    d <span class="token operator">=</span> ax<span class="token punctuation">.</span>quiver<span class="token punctuation">(</span>lon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> lat<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> u10_mon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v10_mon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> windspeed_mon<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cmap<span class="token operator">=</span>newcmap_1<span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>quiverkey<span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'10 m/s'</span><span class="token punctuation">,</span> labelpos<span class="token operator">=</span><span class="token string">'E'</span><span class="token punctuation">,</span> coordinates<span class="token operator">=</span><span class="token string">'axes'</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">"k"</span><span class="token punctuation">,</span> fontproperties<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"size"</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>BORDERS<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>add_feature<span class="token punctuation">(</span>cfeature<span class="token punctuation">.</span>COASTLINE<span class="token punctuation">.</span>with_scale<span class="token punctuation">(</span><span class="token string">'10m'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_extent<span class="token punctuation">(</span>img_extent<span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">180</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_xticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"180°W"</span><span class="token punctuation">,</span> <span class="token string">"150°W"</span><span class="token punctuation">,</span> <span class="token string">"120°W"</span><span class="token punctuation">,</span> <span class="token string">"90°W"</span><span class="token punctuation">,</span> <span class="token string">"60°W"</span><span class="token punctuation">,</span> <span class="token string">"30°W"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°E"</span><span class="token punctuation">,</span> <span class="token string">"60°E"</span><span class="token punctuation">,</span> <span class="token string">"90°E"</span><span class="token punctuation">,</span> <span class="token string">"120°E"</span><span class="token punctuation">,</span> <span class="token string">"150°E"</span><span class="token punctuation">,</span> <span class="token string">"180°"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                       rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_yticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">]</span><span class="token punctuation">,</span> crs<span class="token operator">=</span>ccrs<span class="token punctuation">.</span>PlateCarree<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_yticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"90°S"</span><span class="token punctuation">,</span> <span class="token string">"60°S"</span><span class="token punctuation">,</span> <span class="token string">"30°S"</span><span class="token punctuation">,</span> <span class="token string">"0°"</span><span class="token punctuation">,</span> <span class="token string">"30°N"</span><span class="token punctuation">,</span> <span class="token string">"60°N"</span><span class="token punctuation">,</span> <span class="token string">"90°N"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>

    ax<span class="token punctuation">.</span>minorticks_on<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_minor_locator<span class="token punctuation">(</span>ticker<span class="token punctuation">.</span>MultipleLocator<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span>title<span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token comment"># plt.subplots_adjust(left=0.1, right=0.9, bottom=0.1, top=0.9)</span>
<span class="token comment"># plt.tight_layout(pad=1.5)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/b5/40/Ie2llmnE_o.png" alt="在这里插入图片描述"><br> <strong>数据及代码下载链接➡️：<a href="https://www.heywhale.com/mw/project/62f0dc9e54f6ab98096bd489?run=" rel="nofollow">如何绘制自定义颜色的风场图</a></strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/129ee25044cb0dfe9c582d265c3f0e60/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ES6~ES13新特性（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9752059cd980d4f7170c3715f4b076dc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Cesium加载各影像底图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何配置ssl 证书（腾讯云的 ubuntu系统 apache 服务器） - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何配置ssl 证书（腾讯云的 ubuntu系统 apache 服务器）" />
<meta property="og:description" content="如何配置ssl 证书（腾讯云的 ubuntu系统 apache 服务器） 第一步：开通服务器的443端口
第二步：下载ssl证书
第三步：创建443端口的配置文件default-ssl.conf
第四步：启动命令
第五步：修改80端口的配置文件000-default.conf
第一步：开通服务器的443端口 腾讯云服务器有网页支持很容易开通
只要打开 客户端管理-&gt;安全组-&gt;点击新建安全组-&gt;模版选择开通443端口
不需要填写任何内容。
**
第二步 下载ssl证书 腾讯云可以免费申请ssl证书
申请成功后点击云产品-&gt;在搜索框里输入“SSL 证书”-&gt;选择证书管理-&gt;下载证书
**
第三步：创建443端口的配置文件default-ssl.conf 假设我的网站域名是www.yahoo.cn，通过申请后得到的证书有三个文件1_root_bundle.crt，2_yahoo.cn.crt，3_yahoo.cn.key
上传证书到服务器，证书可以放到你选择的地方，不过大家一般会放到（/etc/httpd/ssl），我把证书上传到我的项目目录（/var/www/yahoo/ssl/）
在服务器端输入命令开启apache ssl模块
sudo a2enmod ssl
服务器就会在/etc/apache2/sites-available文件夹里生成一个模版文件default-ssl.conf
修改这个文件
&lt;VirtualHost 0.0.0.0:443&gt; DocumentRoot &#34;/var/www&#34; ServerName yahoo.cn ServerAlias www.yahoo.cn &lt;Directory /var/www&gt; AllowOverride All Require all granted &lt;/Directory&gt; SSLEngine on SSLCertificateFile /var/www/yahoo/ssl/2_yahoo.cn.crt SSLCertificateKeyFile /var/www/yahoo/ssl/3_yahoo.cn.key SSLCertificateChainFile /var/www/yahoo/ssl/1_root_bundle.crt &lt;/VirtualHost&gt; 第四步：启动命令 在服务器端输入 sudo a2ensite default-ssl 命令 （创建default-ssl.conf文件的软连接）
可以到目录（/etc/apache2/sites-enabled）看default-ssl.conf 是否存在，存在表示软连接成功。
也可以用命令 sudo a2dissite default-ssl 解除软链接启动 apache" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/2718dda917561832ca65835b69be2cf3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-15T22:48:01+08:00" />
<meta property="article:modified_time" content="2020-11-15T22:48:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何配置ssl 证书（腾讯云的 ubuntu系统 apache 服务器）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="ssl__ubuntu_apache__0"></a>如何配置ssl 证书（腾讯云的 ubuntu系统 apache 服务器）</h2> 
<p>第一步：开通服务器的443端口<br> 第二步：下载ssl证书<br> 第三步：创建443端口的配置文件default-ssl.conf<br> 第四步：启动命令<br> 第五步：修改80端口的配置文件000-default.conf</p> 
<h3><a id="443_8"></a>第一步：开通服务器的443端口</h3> 
<p>腾讯云服务器有网页支持很容易开通<br> 只要打开 客户端管理-&gt;安全组-&gt;点击新建安全组-&gt;模版选择开通443端口<br> 不需要填写任何内容。</p> 
<p><img src="https://images2.imgbox.com/22/50/3Ta7uDL9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7a/e7/s9oJFaWN_o.png" alt="在这里插入图片描述"></p> 
<p>**</p> 
<h3><a id="_ssl_19"></a>第二步 下载ssl证书</h3> 
<p>腾讯云可以<a href="https://cloud.tencent.com/act/pro/ssl?fromSource=gwzcw.3964925.3964925.3964925&amp;utm_medium=cpc&amp;utm_id=gwzcw.3964925.3964925.3964925" rel="nofollow">免费申请ssl证书</a><br> 申请成功后点击云产品-&gt;在搜索框里输入“SSL 证书”-&gt;选择证书管理-&gt;下载证书<br> <img src="https://images2.imgbox.com/29/c8/lycazIou_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8f/28/ymYDahCc_o.png" alt="在这里插入图片描述"></p> 
<p>**</p> 
<h3><a id="443defaultsslconf_27"></a>第三步：创建443端口的配置文件default-ssl.conf</h3> 
<ol><li> <p>假设我的网站域名是www.yahoo.cn，通过申请后得到的证书有三个文件1_root_bundle.crt，2_yahoo.cn.crt，3_yahoo.cn.key</p> </li><li> <p>上传证书到服务器，证书可以放到你选择的地方，不过大家一般会放到（/etc/httpd/ssl），我把证书上传到我的项目目录（/var/www/yahoo/ssl/）</p> </li><li> <p>在服务器端输入命令开启apache ssl模块<br> <strong>sudo a2enmod ssl</strong><br> 服务器就会在/etc/apache2/sites-available文件夹里生成一个模版文件default-ssl.conf<br> 修改这个文件</p> </li></ol> 
<pre><code class="prism language-powershell">&lt;VirtualHost 0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0<span class="token punctuation">.</span>0:443&gt;
    DocumentRoot <span class="token string">"/var/www"</span>
    ServerName yahoo<span class="token punctuation">.</span>cn
    ServerAlias www<span class="token punctuation">.</span>yahoo<span class="token punctuation">.</span>cn
    &lt;Directory <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www&gt;
            AllowOverride All
            Require all granted
        &lt;<span class="token operator">/</span>Directory&gt;
    SSLEngine on
    SSLCertificateFile <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>yahoo<span class="token operator">/</span>ssl<span class="token operator">/</span>2_yahoo<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>crt
    SSLCertificateKeyFile <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>yahoo<span class="token operator">/</span>ssl<span class="token operator">/</span>3_yahoo<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>key
    SSLCertificateChainFile <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www<span class="token operator">/</span>yahoo<span class="token operator">/</span>ssl<span class="token operator">/</span>1_root_bundle<span class="token punctuation">.</span>crt
&lt;<span class="token operator">/</span>VirtualHost&gt;
</code></pre> 
<h3><a id="_53"></a>第四步：启动命令</h3> 
<ol><li>在服务器端输入 <strong>sudo a2ensite default-ssl</strong> 命令 （创建default-ssl.conf文件的软连接）<br> 可以到目录（/etc/apache2/sites-enabled）看default-ssl.conf 是否存在，存在表示软连接成功。<br> 也可以用命令 <strong>sudo a2dissite default-ssl</strong> 解除软链接</li><li>启动 apache<br> sudo service apache2 restart</li><li>在浏览器输入地址<br> https://www.yahoo.cn 看看是否可以访问。如果能访问表示设置ssl成功</li></ol> 
<p>**</p> 
<h3><a id="80000defaultconf_65"></a>第五步：修改80端口的配置文件000-default.conf</h3> 
<p>如果想输入域名www.yahoo.cn 就能直接定位到https://www.yahoo.cn<br> 则需要修改80端口的配置文件，一般默认是000-default.conf，有可能改成别的名字的配置文件，可以查看目录（/etc/apache2/sites-enabled）。</p> 
<pre><code class="prism language-powershell">&lt;VirtualHost <span class="token operator">*</span>:80&gt;
      ServerName yahoo<span class="token punctuation">.</span>cn
      ServerAlias www<span class="token punctuation">.</span>yahoo<span class="token punctuation">.</span>cn
      ServerAdmin webmaster@localhost
      DocumentRoot <span class="token operator">/</span><span class="token keyword">var</span><span class="token operator">/</span>www
      ErrorLog $<span class="token punctuation">{<!-- --></span>APACHE_LOG_DIR<span class="token punctuation">}</span><span class="token operator">/</span>yahoo_error<span class="token punctuation">.</span>log
      CustomLog $<span class="token punctuation">{<!-- --></span>APACHE_LOG_DIR<span class="token punctuation">}</span><span class="token operator">/</span>yahoo_access<span class="token punctuation">.</span>log combined
      
      <span class="token comment">#主要是添加下面三句代码，表示所有的链接都定向到https</span>
      RewriteEngine on
      RewriteCond   <span class="token operator">%</span><span class="token punctuation">{<!-- --></span>HTTPS<span class="token punctuation">}</span> <span class="token operator">!</span>=on
      RewriteRule   ^<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">)</span>  https:<span class="token operator">/</span>/<span class="token operator">%</span><span class="token punctuation">{<!-- --></span>SERVER_NAME<span class="token punctuation">}</span><span class="token variable">$1</span> <span class="token namespace">[L,R]</span>
 
&lt;<span class="token operator">/</span>VirtualHost&gt;
</code></pre> 
<p>重新启动 apache<br> sudo service apache2 restart</p> 
<p>就可以快乐的访问了</p> 
<p>借鉴了：<br> https://www.cnblogs.com/idjl/p/9610563.html<br> https://www.cnblogs.com/bushuwei/p/11899789.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3b29b7f0076352c17262685920f42daf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">hd630 黑苹果_黑苹果（hackintosh）技术整合指南</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/48ffed70461bbfd199b82130adc2d9f7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">电脑主板接口_POWER SW、RESET SW、POWER LED、HDD LED电脑主板跳线怎么接？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
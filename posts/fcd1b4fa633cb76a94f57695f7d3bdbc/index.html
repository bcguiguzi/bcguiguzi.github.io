<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【LLM入门实践】简便快捷获取Hugging Face模型 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【LLM入门实践】简便快捷获取Hugging Face模型" />
<meta property="og:description" content="前言 好久没有更新博客了，由于AI 大模型技术经过2023年的狂飙，2024年迎来大量的应用的落地，作为一个技术人，我也对此有了浓厚的兴趣，买了很多本书，然后试图找到一个学习大模型的速成模式，遗憾的是，这个领域和基本的编程语言学习还有着一定的差异，首先在入门的一些基础概念理解上就有一定的壁垒，接下来对一些工具的使用以及原理，参数的一些实践和尝试。需要琢磨和理解才能进行。这其中对于transformer的使用，遇到了一些小的问题，比如从Hugging Face上下载模型特别慢，大大消耗了初学者的耐心。所以通过各种尝试，找到了目前感觉还算可以的hf镜像网站，今天给大家推荐一个镜像网站。不能让环境成为我们的拦路虎。
transformer和Hugging Face Hugging Face为transformer工具提供NLP工具和模型的共享平台， 为开发者提供了使用和部署预训练Transformer模型的便利性。使开发者能够轻松地使用和部署各种预训练的Transformer模型，如BERT、GPT、RoBERTa等。但是Hugging Face的地址位于国外，在国内访问速度简直太慢了。所以接来下我们就使用镜像网站。类似于pip的镜像源，我们一般使用国内的进行加速。
如何使用Hugging Face镜像站🌟 我们国内的公益组织提供了一个域名 hf-mirror.com，用于镜像 huggingface.co 域名。作为一个公益项目，致力于帮助国内AI开发者快速、稳定的下载模型、数据集。
再次感谢@padeoe
更多详细用法请看 《这篇教程》 。
方法一：网页下载 在本站搜索，并在模型主页的Files and Version中下载文件。
方法二：huggingface-cli huggingface-cli 是 Hugging Face 官方提供的命令行工具，自带完善的下载功能。
1. 安装依赖
pip install -U huggingface_hubCopy 2. 设置环境变量
Linux
export HF_ENDPOINT=https://hf-mirror.comCopy Windows Powershell
$env:HF_ENDPOINT = &#34;https://hf-mirror.com&#34;Copy 建议将上面这一行写入 ~/.bashrc。
3.1 下载模型
huggingface-cli download --resume-download gpt2 --local-dir gpt2Copy 3.2 下载数据集
huggingface-cli download --repo-type dataset --resume-download wikitext --local-dir wikitextCopy 可以添加 --local-dir-use-symlinks False 参数禁用文件软链接，这样下载路径下所见即所得，详细解释请见上面提到的教程。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/fcd1b4fa633cb76a94f57695f7d3bdbc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-24T13:09:26+08:00" />
<meta property="article:modified_time" content="2024-02-24T13:09:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【LLM入门实践】简便快捷获取Hugging Face模型</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_1"></a>前言</h2> 
<p>好久没有更新博客了，由于AI 大模型技术经过2023年的狂飙，2024年迎来大量的应用的落地，作为一个技术人，我也对此有了浓厚的兴趣，买了很多本书，然后试图找到一个学习大模型的速成模式，遗憾的是，这个领域和基本的编程语言学习还有着一定的差异，首先在入门的一些基础概念理解上就有一定的壁垒，接下来对一些工具的使用以及原理，参数的一些实践和尝试。需要琢磨和理解才能进行。这其中对于<code>transformer</code>的使用，遇到了一些小的问题，比如从<code>Hugging Face</code>上下载模型特别慢，大大消耗了初学者的耐心。所以通过各种尝试，找到了目前感觉还算可以的hf镜像网站，今天给大家推荐一个镜像网站。不能让环境成为我们的拦路虎。<br> <img src="https://images2.imgbox.com/0f/ba/CzwQa5bS_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="transformerHugging_Face_4"></a>transformer和Hugging Face</h2> 
<p>Hugging Face为transformer工具提供NLP工具和模型的共享平台， 为开发者提供了使用和部署预训练Transformer模型的便利性。使开发者能够轻松地使用和部署各种预训练的Transformer模型，如BERT、GPT、RoBERTa等。但是Hugging Face的地址位于国外，在国内访问速度简直太慢了。所以接来下我们就使用镜像网站。类似于pip的镜像源，我们一般使用国内的进行加速。</p> 
<h2><a id="Hugging_Face_7"></a>如何使用Hugging Face镜像站🌟</h2> 
<blockquote> 
 <p>我们国内的公益组织提供了一个域名 <a href="https://hf-mirror.com/" rel="nofollow">hf-mirror.com</a>，用于镜像 <a href="https://huggingface.co/" rel="nofollow">huggingface.co</a> 域名。作为一个公益项目，致力于帮助国内AI开发者快速、稳定的下载模型、数据集。<br> 再次感谢<a href="https://github.com/padeoe">@padeoe</a></p> 
</blockquote> 
<p>更多详细用法请看 <strong><a href="https://zhuanlan.zhihu.com/p/663712983" rel="nofollow">《这篇教程》</a></strong> 。</p> 
<h4><a id="_14"></a>方法一：网页下载</h4> 
<p>在本站搜索，并在模型主页的<code>Files and Version</code>中下载文件。</p> 
<h4><a id="huggingfacecli_18"></a>方法二：huggingface-cli</h4> 
<p><a href="https://hf-mirror.com/docs/huggingface_hub/guides/download#download-from-the-cli" rel="nofollow"><code>huggingface-cli</code> </a>是 Hugging Face 官方提供的命令行工具，自带完善的下载功能。</p> 
<p><strong>1. 安装依赖</strong></p> 
<pre><code class="prism language-shell">pip <span class="token function">install</span> <span class="token parameter variable">-U</span> huggingface_hubCopy
</code></pre> 
<p><strong>2. 设置环境变量</strong><br> <em>Linux</em></p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HF_ENDPOINT</span><span class="token operator">=</span>https://hf-mirror.comCopy
</code></pre> 
<p><em>Windows Powershell</em></p> 
<pre><code class="prism language-shell"><span class="token variable">$env</span>:HF_ENDPOINT <span class="token operator">=</span> <span class="token string">"https://hf-mirror.com"</span>Copy
</code></pre> 
<p>建议将上面这一行写入 <code>~/.bashrc</code>。<br> <strong>3.1 下载模型</strong></p> 
<pre><code class="prism language-shell">huggingface-cli download --resume-download gpt2 --local-dir gpt2Copy
</code></pre> 
<p><strong>3.2 下载数据集</strong></p> 
<pre><code class="prism language-shell">huggingface-cli download --repo-type dataset --resume-download wikitext --local-dir wikitextCopy
</code></pre> 
<p>可以添加 <code>--local-dir-use-symlinks False</code> 参数禁用文件软链接，这样下载路径下所见即所得，详细解释请见上面提到的教程。</p> 
<h4><a id="_hfd_57"></a>方法三：使用 hfd</h4> 
<p><strong><a href="https://gist.github.com/padeoe/697678ab8e528b85a2a7bddafea1fa4f" rel="nofollow">hfd</a></strong> 是本站开发的 huggingface 专用下载工具，基于成熟工具 <code>git+aria2</code>，可以做到稳定下载不断线。</p> 
<p><strong>1. 下载hfd</strong></p> 
<pre><code class="prism language-shell"><span class="token function">wget</span> https://hf-mirror.com/hfd/hfd.sh
<span class="token function">chmod</span> a+x hfd.shCopy
</code></pre> 
<p><strong>2. 设置环境变量</strong><br> <em>Linux</em></p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HF_ENDPOINT</span><span class="token operator">=</span>https://hf-mirror.comCopy
</code></pre> 
<p><em>Windows Powershell</em></p> 
<pre><code class="prism language-shell"><span class="token variable">$env</span>:HF_ENDPOINT <span class="token operator">=</span> <span class="token string">"https://hf-mirror.com"</span>Copy
</code></pre> 
<p><strong>3.1 下载模型</strong></p> 
<pre><code class="prism language-shell">./hfd.sh gpt2 <span class="token parameter variable">--tool</span> aria2c <span class="token parameter variable">-x</span> 4Copy
</code></pre> 
<p><strong>3.2 下载数据集</strong></p> 
<pre><code class="prism language-shell">./hfd.sh wikitext --repo-type dataset <span class="token parameter variable">--tool</span> aria2c <span class="token parameter variable">-x</span> 4Copy
</code></pre> 
<h4><a id="_93"></a>方法四：使用环境变量（非侵入式）</h4> 
<p>非侵入式，能解决大部分情况。huggingface 工具链会获取<code>HF_ENDPOINT</code>环境变量来确定下载文件所用的网址，所以可以使用通过设置变量来解决。</p> 
<pre><code class="prism language-shell"><span class="token assign-left variable">HF_ENDPOINT</span><span class="token operator">=</span>https://hf-mirror.com python your_script.pyCopy
</code></pre> 
<p>不过有些数据集有内置的下载脚本，那就需要手动改一下脚本内的地址来实现了。</p> 
<h3><a id="_103"></a>常见问题</h3> 
<h4><a id="Q__105"></a>Q: 有些项目需要登录，如何下载？</h4> 
<p><strong>A</strong>：部分 Gated Repo 需登录申请许可。为保障账号安全，本站不支持登录，需先前往 Hugging Face 官网登录、申请许可，在<a href="https://huggingface.co/settings/tokens" rel="nofollow">官网这里获取 Access Token</a> 后回镜像站用命令行下载。<br> 部分工具下载 Gated Repo 的方法：</p> 
<p><strong>huggingface-cli： 添加<code>--token</code>参数</strong></p> 
<pre><code class="prism language-shell">huggingface-cli download <span class="token parameter variable">--token</span> hf_*** --resume-download meta-llama/Llama-2-7b-hf --local-dir Llama-2-7b-hfCopy
</code></pre> 
<p><strong>hfd： 添加<code>--hf_username``--hf_token</code>参数</strong></p> 
<pre><code class="prism language-shell">hfd meta-llama/Llama-2-7b <span class="token parameter variable">--hf_username</span> YOUR_HF_USERNAME <span class="token parameter variable">--hf_token</span> hf_***Copy
</code></pre> 
<p>其余如<code>from_pretrained</code>、<code>wget</code>、<code>curl</code>如何设置认证 token，详见上面第一段提到的教程。</p> 
<h2><a id="_124"></a>总结</h2> 
<p>好了，今天的分享就到这里，希望大家有用，永远不要让环境和高墙成了我们获取知识，成长的拦路虎。后续我会把这几月学习到的关于LLM相关的知识，整理成《LLM入门与实践》专栏，供大家参考。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/288ef1dc3d603a62942790ff6f98d5a1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2024年了，如何从 0 搭建一个 Electron 应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c0064ab96acb74fcbbcda1fcc2af2cec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">电商行业网络安全——守护数字世界的交易安全与信任</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
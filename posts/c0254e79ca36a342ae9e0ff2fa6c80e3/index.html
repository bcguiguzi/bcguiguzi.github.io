<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于javaweb&#43;mysql的jsp&#43;servlet花店商城系统(java&#43;servlet&#43;jsp&#43;jdbc&#43;mysql) - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于javaweb&#43;mysql的jsp&#43;servlet花店商城系统(java&#43;servlet&#43;jsp&#43;jdbc&#43;mysql)" />
<meta property="og:description" content="基于javaweb&#43;mysql的jsp&#43;servlet花店商城系统(java&#43;servlet&#43;jsp&#43;jdbc&#43;mysql)
私信源码获取及调试交流
运行环境
Java≥8、MySQL≥5.7、Tomcat≥8
开发工具
eclipse/idea/myeclipse/sts等均可配置运行
适用
课程设计，大作业，毕业设计，项目练习，学习演示等
功能说明
基于javaweb&#43;mysql的JSP&#43;Servlet花店商城系统(java&#43;servlet&#43;jsp&#43;jdbc&#43;mysql)
项目介绍
网上花店销售系统采用JSP&#43;Servlet&#43;JavaBean的MVC模式，将数据对象、业务逻辑以及用户界面分离。该系统分为用户和管理员两个角色。 用户注册登录后可以浏览鲜花，浏览公告，购买鲜花，管理员登录后可以对系统进行管理和维护。
环境需要
1.运行环境：最好是java jdk 1.8，我们在这个平台上运行的。其他版本理论上也可以。 2.IDE环境：IDEA，Eclipse,Myeclipse都可以。推荐IDEA; 3.tomcat环境：Tomcat 8.x,9.x版本均可 4.硬件环境：windows 7/8/10 1G内存以上；或者 Mac OS； 5.数据库：MySql 5.7版本； 6.是否Maven项目: 否；
技术栈
Servlet、JSP、JDBC、MySQL5.7、Tomcat8
使用说明
使用Navicat或者其它工具，在mysql中创建对应名称的数据库，并导入项目的sql文件； 2. 使用IDEA/Eclipse/MyEclipse导入项目，然后运行； 3. 将项目中src/com/dao/DB.java配置文件中的数据库配置改为自己的配置; 4. 运行项目，在浏览器中输入地址； 前台地址：http://localhost:8080/flowerstore/ 普通社员账号：zhangsan 密码：123456 后台地址：http://localhost:8080/flowerstore/manage/login.jsp 管理员账号：admin 密码：123456
String sNowTime = dateFormatter.format(new java.util.Date()); imgpath = sNowTime&#43;&#34;.&#34;&#43; file.getFileExt(); file.saveAs(&#34;/uploadfile/&#34;&#43;imgpath); } } catch (SmartUploadException e) { e.printStackTrace(); } //通过ID获取对象 String id = request.getParameter(&#34;id&#34;); Product bean = productDao." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/c0254e79ca36a342ae9e0ff2fa6c80e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-28T21:53:04+08:00" />
<meta property="article:modified_time" content="2023-11-28T21:53:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于javaweb&#43;mysql的jsp&#43;servlet花店商城系统(java&#43;servlet&#43;jsp&#43;jdbc&#43;mysql)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>基于javaweb+mysql的jsp+servlet花店商城系统(java+servlet+jsp+jdbc+mysql)</p> 
<blockquote> 
 <p><strong>私信</strong>源码获取及调试交流</p> 
</blockquote> 
<p>运行环境</p> 
<p>Java≥8、MySQL≥5.7、Tomcat≥8</p> 
<p>开发工具</p> 
<p>eclipse/idea/myeclipse/sts等均可配置运行</p> 
<p>适用</p> 
<p>课程设计，大作业，毕业设计，项目练习，学习演示等</p> 
<p>功能说明</p> 
<p>基于javaweb+mysql的JSP+Servlet花店商城系统(java+servlet+jsp+jdbc+mysql)</p> 
<p>项目介绍</p> 
<p>网上花店销售系统采用JSP+Servlet+JavaBean的MVC模式，将数据对象、业务逻辑以及用户界面分离。该系统分为用户和管理员两个角色。 用户注册登录后可以浏览鲜花，浏览公告，购买鲜花，管理员登录后可以对系统进行管理和维护。</p> 
<p>环境需要</p> 
<p>1.运行环境：最好是java jdk 1.8，我们在这个平台上运行的。其他版本理论上也可以。 2.IDE环境：IDEA，Eclipse,Myeclipse都可以。推荐IDEA; 3.tomcat环境：Tomcat 8.x,9.x版本均可 4.硬件环境：windows 7/8/10 1G内存以上；或者 Mac OS； 5.数据库：MySql 5.7版本； 6.是否Maven项目: 否；</p> 
<p>技术栈</p> 
<p>Servlet、JSP、JDBC、MySQL5.7、Tomcat8</p> 
<p>使用说明</p> 
<ol><li>使用Navicat或者其它工具，在mysql中创建对应名称的数据库，并导入项目的sql文件； 2. 使用IDEA/Eclipse/MyEclipse导入项目，然后运行； 3. 将项目中src/com/dao/DB.java配置文件中的数据库配置改为自己的配置; 4. 运行项目，在浏览器中输入地址； 前台地址：http://localhost:8080/flowerstore/ 普通社员账号：zhangsan 密码：123456</li></ol> 
<p>后台地址：http://localhost:8080/flowerstore/manage/login.jsp 管理员账号：admin 密码：123456</p> 
<pre><code class="prism language-java">					<span class="token class-name">String</span> sNowTime <span class="token operator">=</span> dateFormatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					imgpath <span class="token operator">=</span> sNowTime<span class="token operator">+</span><span class="token string">"."</span><span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token function">getFileExt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					file<span class="token punctuation">.</span><span class="token function">saveAs</span><span class="token punctuation">(</span><span class="token string">"/uploadfile/"</span><span class="token operator">+</span>imgpath<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SmartUploadException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Product</span> bean <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新对象属性</span>
			bean<span class="token punctuation">.</span><span class="token function">setImgpath</span><span class="token punctuation">(</span>imgpath<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//更新操作</span>
			productDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
		<span class="token punctuation">}</span>
		
		<span class="token comment">//删除商品信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productdelete"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Product</span> bean <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//删除对象</span>
			productDao<span class="token punctuation">.</span><span class="token function">deleteBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
		
		<span class="token punctuation">}</span>
		
		<span class="token comment">//推荐商品信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productdelete2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Product</span> bean <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setTuijian</span><span class="token punctuation">(</span><span class="token string">"已推荐"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			productDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
</code></pre> 
<pre><code class="prism language-java">			<span class="token comment">//插入数据库</span>
			productDao<span class="token punctuation">.</span><span class="token function">insertBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//返回给JSP页面</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//跳转到更新商品信息页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productupdate"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Product</span> bean <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"fenleilist"</span><span class="token punctuation">,</span> fenleiDao<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把信息传给jsp页面</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">,</span> <span class="token string">"更新商品信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token string">"manageServlet/productupdate2?id="</span><span class="token operator">+</span>bean<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/manage/product/productupdate.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//更新商品信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productupdate2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> fenleiid <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"fenleiid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> imgpath <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"imgpath"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> jiage <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"jiage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> miaoshu <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"miaoshu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> pname <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Fenlei</span> fenlei <span class="token operator">=</span> fenleiDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>fenleiid<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Product</span> bean <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新对象属性</span>
			bean<span class="token punctuation">.</span><span class="token function">setFenleiid</span><span class="token punctuation">(</span>fenlei<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setFname</span><span class="token punctuation">(</span>fenlei<span class="token punctuation">.</span><span class="token function">getFname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setImgpath</span><span class="token punctuation">(</span>imgpath<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setJiage</span><span class="token punctuation">(</span><span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">parseDouble</span><span class="token punctuation">(</span>jiage<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setMiaoshu</span><span class="token punctuation">(</span>miaoshu<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setPname</span><span class="token punctuation">(</span>pname<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新操作</span>
			productDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//跳转到上传商品图片页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productupdate5"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//通过ID获取对象</span>
</code></pre> 
<pre><code class="prism language-java">		
		<span class="token comment">//初始化跳转的地址</span>
		<span class="token class-name">String</span> url <span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>
		
		<span class="token keyword">int</span> pagenum <span class="token operator">=</span>  <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//当前页</span>
		<span class="token keyword">int</span> pagesize <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span><span class="token comment">//每页显示的数量</span>
		
		
		<span class="token comment">//初始化调用的数据库操作对象</span>
		<span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">FenleiDao</span> fenleiDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FenleiDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">ProductDao</span> productDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">GonggaoDao</span> gonggaoDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GonggaoDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">DingdanDao</span> dingdanDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DingdanDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		
		<span class="token comment">//用户登录</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//从jsp页面获取用户名和密码</span>
			<span class="token class-name">String</span> username <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> password <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//查询用户名和密码是否匹配</span>
			<span class="token class-name">User</span> bean <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where username='"</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">"' and password ='"</span><span class="token operator">+</span>password<span class="token operator">+</span><span class="token string">"' and role=1 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>bean<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"manage"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
				
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//退出操作</span>
		 <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"loginout"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			 <span class="token class-name">HttpSession</span> session  <span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">			<span class="token keyword">if</span><span class="token punctuation">(</span>pname<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" pname like '%"</span><span class="token operator">+</span>pname<span class="token operator">+</span><span class="token string">"%' "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"pname"</span><span class="token punctuation">,</span> pname<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" 1=1 order by id desc "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> where <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//获取当前的页数</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pagenum"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				pagenum <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pagenum"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//从数据库查询列表信息，带分页功能</span>
			<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span>pagenum<span class="token punctuation">,</span>pagesize<span class="token punctuation">,</span>url<span class="token punctuation">,</span>where<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> pagerinfo <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>pagerinfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">//返回给jsp页面的信息</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"pagerinfo"</span><span class="token punctuation">,</span> pagerinfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">,</span> <span class="token string">"商品信息列表"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token string">"manageServlet/productlist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"url2"</span><span class="token punctuation">,</span> <span class="token string">"manageServlet/product"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//定义跳转的地址</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/manage/product/productlist.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//跳转操作</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//跳转到添加商品信息页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productadd"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">,</span> <span class="token string">"添加商品信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token string">"manageServlet/productadd2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"fenleilist"</span><span class="token punctuation">,</span> fenleiDao<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/manage/product/productadd.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//添加商品信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productadd2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

			
			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> fenleiid <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"fenleiid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-html">			bean.setUserid(Integer.parseInt(userid));
			bean.setXingming(xingming);
		
			
			//组装查询的SQL语句
			StringBuffer sb = new StringBuffer();
			sb.append(" where  ");
			
			HttpSession session = request.getSession();
			User user = (User) session.getAttribute("user");
			
			sb.append(" userid="+user.getId()+" order by id desc ");
			String where = sb.toString();

			//获取当前的页数
			if(request.getParameter("pagenum")!=null){
				pagenum = Integer.parseInt(request.getParameter("pagenum"));
			}

			//从数据库查询列表信息，带分页功能
			Map&lt;String,List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Gouwuche</span><span class="token punctuation">&gt;</span></span>&gt; map = gouwucheDao.getList(1,999,url,where);
			String pagerinfo = map.keySet().iterator().next();
			List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Gouwuche</span><span class="token punctuation">&gt;</span></span> list = map.get(pagerinfo);
			
			StringBuffer sbsb = new StringBuffer();
			double zongjia = 0;
			for(Gouwuche g:list){
				sbsb.append("商品名："+g.getPname()+",单价:"+g.getJiage()+",购买数量："+g.getShuliang()+",小计："+(g.getJiage()*g.getShuliang())+"<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>");
				zongjia = zongjia+(g.getJiage()*g.getShuliang());
				
				Product p  =productDao.selectBean(" where id= "+g.getPid());
				p.setXiaoliang(p.getXiaoliang()+g.getShuliang());
				productDao.updateBean(p);
				
				gouwucheDao.deleteBean(g);
				
				
			}
			bean.setZongjia(zongjia);
			bean.setXiangqing(sbsb.toString());
			
			
			dingdanDao.insertBean(bean);
			
			//返回给JSP页面
		}
		
		
		//我的订单列表
		else if("orderlist".equals(method)){
			
</code></pre> 
<pre><code class="prism language-html">			
			sb.append(" userid="+user.getId()+" order by id desc ");
			String where = sb.toString();

			//获取当前的页数
			if(request.getParameter("pagenum")!=null){
				pagenum = Integer.parseInt(request.getParameter("pagenum"));
			}

			//从数据库查询列表信息，带分页功能
			Map&lt;String,List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Gouwuche</span><span class="token punctuation">&gt;</span></span>&gt; map = gouwucheDao.getList(1,999,url,where);
			String pagerinfo = map.keySet().iterator().next();
			List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Gouwuche</span><span class="token punctuation">&gt;</span></span> list = map.get(pagerinfo);
			
			StringBuffer sbsb = new StringBuffer();
			double zongjia = 0;
			for(Gouwuche g:list){
				sbsb.append("商品名："+g.getPname()+",单价:"+g.getJiage()+",购买数量："+g.getShuliang()+",小计："+(g.getJiage()*g.getShuliang())+"<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>");
				zongjia = zongjia+(g.getJiage()*g.getShuliang());
				
				Product p  =productDao.selectBean(" where id= "+g.getPid());
				p.setXiaoliang(p.getXiaoliang()+g.getShuliang());
				productDao.updateBean(p);
				
				gouwucheDao.deleteBean(g);
				
				
			}
			bean.setZongjia(zongjia);
			bean.setXiangqing(sbsb.toString());
			
			
			dingdanDao.insertBean(bean);
			
			//返回给JSP页面
		}
		
		
		//我的订单列表
		else if("orderlist".equals(method)){
			
			//定义跳转的地址
			url = "indexServlet/orderlist";
			
			//获取查询的信息
			
			String orderid = request.getParameter("orderid");		
</code></pre> 
<pre><code class="prism language-java">		<span class="token punctuation">}</span>

				<span class="token comment">//修改密码操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"passwordupdate2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
					
					<span class="token comment">//从JSP获取信息</span>
					<span class="token class-name">String</span> password1 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">String</span> password2 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					
					<span class="token class-name">User</span> u <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where username='"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"' and password='"</span><span class="token operator">+</span>password1<span class="token operator">+</span><span class="token string">"'  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
						u<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password2<span class="token punctuation">)</span><span class="token punctuation">;</span>
						userDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
					<span class="token punctuation">}</span>
					
					
					
		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//跳转到修改个人信息页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"userupdate"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> bean <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把对象传给jsp页面</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token string">"indexServlet/userupdate2?id="</span><span class="token operator">+</span>bean<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/userupdate.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//修改个人信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"userupdate2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> xingming <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"xingming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> dianhua <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"dianhua"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> dizhi <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"dizhi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> bean <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新对象属性</span>
			bean<span class="token punctuation">.</span><span class="token function">setXingming</span><span class="token punctuation">(</span>xingming<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">			<span class="token comment">//返回给JSP页面</span>
		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//我的订单列表</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"orderlist"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//定义跳转的地址</span>
			url <span class="token operator">=</span> <span class="token string">"indexServlet/orderlist"</span><span class="token punctuation">;</span>
			
			<span class="token comment">//获取查询的信息</span>
			
			<span class="token class-name">String</span> orderid <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"orderid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
			<span class="token class-name">String</span> status <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
			
			<span class="token comment">//组装查询的SQL语句</span>
			<span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" where  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">if</span><span class="token punctuation">(</span>orderid<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>orderid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
							
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" orderid like '%"</span><span class="token operator">+</span>orderid<span class="token operator">+</span><span class="token string">"%' "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"orderid"</span><span class="token punctuation">,</span> orderid<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token keyword">if</span><span class="token punctuation">(</span>status<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" status like '%"</span><span class="token operator">+</span>status<span class="token operator">+</span><span class="token string">"%' "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
	
			
			<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" userid="</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" order by id desc "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> where <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//获取当前的页数</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pagenum"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
</code></pre> 
<pre><code class="prism language-java">		
		<span class="token comment">//跳转到修改个人信息页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"userupdate"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> bean <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把对象传给jsp页面</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token string">"indexServlet/userupdate2?id="</span><span class="token operator">+</span>bean<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/userupdate.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//修改个人信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"userupdate2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> xingming <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"xingming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> dianhua <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"dianhua"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> dizhi <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"dizhi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> bean <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新对象属性</span>
			bean<span class="token punctuation">.</span><span class="token function">setXingming</span><span class="token punctuation">(</span>xingming<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setDianhua</span><span class="token punctuation">(</span>dianhua<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setDizhi</span><span class="token punctuation">(</span>dizhi<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新操作</span>
			userDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
		<span class="token punctuation">}</span>
		
		<span class="token comment">//跳转到查看商品详情页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productupdate"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Product</span> bean <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把对象传给jsp页面</span>
			bean<span class="token punctuation">.</span><span class="token function">setDianjishu</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">getDianjishu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			productDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">			
			dingdanDao<span class="token punctuation">.</span><span class="token function">insertBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token comment">//返回给JSP页面</span>
		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//我的订单列表</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"orderlist"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//定义跳转的地址</span>
			url <span class="token operator">=</span> <span class="token string">"indexServlet/orderlist"</span><span class="token punctuation">;</span>
			
			<span class="token comment">//获取查询的信息</span>
			
			<span class="token class-name">String</span> orderid <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"orderid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
			<span class="token class-name">String</span> status <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
			
			<span class="token comment">//组装查询的SQL语句</span>
			<span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" where  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">if</span><span class="token punctuation">(</span>orderid<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>orderid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
							
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" orderid like '%"</span><span class="token operator">+</span>orderid<span class="token operator">+</span><span class="token string">"%' "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"orderid"</span><span class="token punctuation">,</span> orderid<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token keyword">if</span><span class="token punctuation">(</span>status<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" status like '%"</span><span class="token operator">+</span>status<span class="token operator">+</span><span class="token string">"%' "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				
				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"status"</span><span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
	
			
			<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" userid="</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" order by id desc "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Fenlei</span> bean <span class="token operator">=</span> fenleiDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新对象属性</span>
			bean<span class="token punctuation">.</span><span class="token function">setFname</span><span class="token punctuation">(</span>fname<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新操作</span>
			fenleiDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
		<span class="token punctuation">}</span>
		
		<span class="token comment">//删除分类信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"fenleidelete"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Fenlei</span> bean <span class="token operator">=</span> fenleiDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//删除对象</span>
			fenleiDao<span class="token punctuation">.</span><span class="token function">deleteBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
		
		<span class="token comment">//跳转到查看分类信息页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"fenleiupdate3"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">,</span> <span class="token string">"查看分类信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Fenlei</span> bean <span class="token operator">=</span> fenleiDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把对象传给jsp页面</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/manage/fenlei/fenleiupdate3.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//商品信息列表</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"productlist"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//定义跳转的地址</span>
			url <span class="token operator">=</span> <span class="token string">"manageServlet/productlist"</span><span class="token punctuation">;</span>
			
			<span class="token comment">//获取查询的信息</span>
			<span class="token class-name">String</span> fname <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"fname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
</code></pre> 
<pre><code class="prism language-java">		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//删除购买的商品操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gouwuchedelete"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token class-name">Gouwuche</span> bean <span class="token operator">=</span> gouwucheDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

			gouwucheDao<span class="token punctuation">.</span><span class="token function">deleteBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
		<span class="token punctuation">}</span>
		
		
		<span class="token comment">//跳转到生成订单页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"dingdanadd"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">User</span> bean <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/dingdanadd.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//生成订单操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"dingdanadd2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

			
			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> userid <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"userid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> xingming <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"xingming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> dianhua <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"dianhua"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> dizhi <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"dizhi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> beizhu <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"beizhu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">Dingdan</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dingdan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			bean<span class="token punctuation">.</span><span class="token function">setBeizhu</span><span class="token punctuation">(</span>beizhu<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setDianhua</span><span class="token punctuation">(</span>dianhua<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setDizhi</span><span class="token punctuation">(</span>dizhi<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setOrderid</span><span class="token punctuation">(</span><span class="token class-name">Util</span><span class="token punctuation">.</span><span class="token function">getTime2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-java">			<span class="token comment">//把对象传给jsp页面</span>
			bean<span class="token punctuation">.</span><span class="token function">setDianjishu</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">getDianjishu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			productDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/product.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//跳转到查看公告页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gonggaoupdate"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Gonggao</span> bean <span class="token operator">=</span> gonggaoDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把对象传给jsp页面</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/gonggao.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//添加商品到购物车操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gouwucheadd2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

			<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span>  <span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token class-name">Product</span> pro <span class="token operator">=</span> productDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pid"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token class-name">Gouwuche</span> bean <span class="token operator">=</span> gouwucheDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where userid="</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" and pid="</span><span class="token operator">+</span>pro<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>bean<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span>  <span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gouwuche</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setJiage</span><span class="token punctuation">(</span>pro<span class="token punctuation">.</span><span class="token function">getJiage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setPid</span><span class="token punctuation">(</span>pro<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setPname</span><span class="token punctuation">(</span>pro<span class="token punctuation">.</span><span class="token function">getPname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setShuliang</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setUserid</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			gouwucheDao<span class="token punctuation">.</span><span class="token function">insertBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
</code></pre> 
<pre><code class="prism language-java">
<span class="token comment">//后台servlet，用于处理后台的所有请求</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ManageServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{<!-- --></span>

	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		
		<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-java">	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
		
		<span class="token comment">//设置获取的参数的编码格式</span>
		request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">//分页页数定义</span>
		<span class="token keyword">int</span> pagenum <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//当前页</span>
		<span class="token keyword">int</span> pagesize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">//每页显示的数量</span>
		
		<span class="token class-name">ProductDao</span> <span class="token class-name">ProductDao</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	
		
		
		<span class="token class-name">String</span> pname <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pname"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
		<span class="token class-name">String</span> fenleiid <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"fenleiid"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
		<span class="token class-name">String</span> tuijian <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"tuijian"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> jiage1 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"jiage1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">String</span> jiage2 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"jiage2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"shouye"</span><span class="token punctuation">;</span>
		
		<span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pagenum"</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			pagenum <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"pagenum"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" where  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">if</span><span class="token punctuation">(</span>jiage1<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>jiage1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			
			sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" jiage &gt;= "</span><span class="token operator">+</span>jiage1<span class="token operator">+</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" and "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"jiage1"</span><span class="token punctuation">,</span> jiage1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java">		
		<span class="token comment">//添加公告信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gonggaoadd2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> biaoti <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> neirong <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"neirong"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//定义对象</span>
			<span class="token class-name">Gonggao</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gonggao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//设置对象的属性</span>
			bean<span class="token punctuation">.</span><span class="token function">setBiaoti</span><span class="token punctuation">(</span>biaoti<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setNeirong</span><span class="token punctuation">(</span>neirong<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setShijian</span><span class="token punctuation">(</span><span class="token class-name">Util</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//插入数据库</span>
			gonggaoDao<span class="token punctuation">.</span><span class="token function">insertBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//返回给JSP页面</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//跳转到更新公告信息页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gonggaoupdate"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Gonggao</span> bean <span class="token operator">=</span> gonggaoDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把对象传给jsp页面</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">,</span> <span class="token string">"更新公告信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">,</span> <span class="token string">"manageServlet/gonggaoupdate2?id="</span><span class="token operator">+</span>bean<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/manage/gonggao/gonggaoupdate.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//更新公告信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gonggaoupdate2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> biaoti <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> neirong <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"neirong"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//通过ID获取对象</span>
</code></pre> 
<pre><code class="prism language-java">
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
				
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//用户登录</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"login"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//从jsp页面获取用户名和密码</span>
			<span class="token class-name">String</span> username <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> password <span class="token operator">=</span>  request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//查询用户名和密码是否匹配</span>
			<span class="token class-name">User</span> bean <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where username='"</span><span class="token operator">+</span>username<span class="token operator">+</span><span class="token string">"' and password ='"</span><span class="token operator">+</span>password<span class="token operator">+</span><span class="token string">"' and role=0 "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>bean<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
				
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
				
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">//退出操作</span>
		 <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"loginout"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			 <span class="token class-name">HttpSession</span> session  <span class="token operator">=</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			 session<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>

				<span class="token comment">//修改密码操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"passwordupdate2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
					
					<span class="token comment">//从JSP获取信息</span>
					<span class="token class-name">String</span> password1 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">String</span> password2 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span>session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					
					<span class="token class-name">User</span> u <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where username='"</span><span class="token operator">+</span>user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"' and password='"</span><span class="token operator">+</span>password1<span class="token operator">+</span><span class="token string">"'  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>u<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
						u<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password2<span class="token punctuation">)</span><span class="token punctuation">;</span>
						userDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
					<span class="token punctuation">}</span>
					
					
</code></pre> 
<pre><code class="prism language-java">		
		<span class="token comment">//更新公告信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gonggaoupdate2"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//从JSP获取信息</span>
			<span class="token class-name">String</span> biaoti <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> neirong <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"neirong"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Gonggao</span> bean <span class="token operator">=</span> gonggaoDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新对象属性</span>
			bean<span class="token punctuation">.</span><span class="token function">setBiaoti</span><span class="token punctuation">(</span>biaoti<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bean<span class="token punctuation">.</span><span class="token function">setNeirong</span><span class="token punctuation">(</span>neirong<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//更新操作</span>
			gonggaoDao<span class="token punctuation">.</span><span class="token function">updateBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			
		<span class="token punctuation">}</span>
		
		<span class="token comment">//删除公告信息操作</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gonggaodelete"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Gonggao</span> bean <span class="token operator">=</span> gonggaoDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//删除对象</span>
			gonggaoDao<span class="token punctuation">.</span><span class="token function">deleteBean</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			
		
		<span class="token punctuation">}</span>
		
		<span class="token comment">//跳转到查看公告信息页面</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"gonggaoupdate3"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"biaoti"</span><span class="token punctuation">,</span> <span class="token string">"查看公告信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//通过ID获取对象</span>
			<span class="token class-name">String</span> id <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">Gonggao</span> bean <span class="token operator">=</span> gonggaoDao<span class="token punctuation">.</span><span class="token function">selectBean</span><span class="token punctuation">(</span><span class="token string">" where id= "</span><span class="token operator">+</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//把对象传给jsp页面</span>
			request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"bean"</span><span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/manage/gonggao/gonggaoupdate3.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		
		
		<span class="token comment">//订单信息列表</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"dingdanlist"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>method<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			
			<span class="token comment">//定义跳转的地址</span>
			url <span class="token operator">=</span> <span class="token string">"manageServlet/dingdanlist"</span><span class="token punctuation">;</span>
			
			<span class="token comment">//获取查询的信息</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7b/3a/ndGVJDDE_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/64/ad/X3GwvZL3_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/60/ef/qxwMqNLa_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/f8/de/sglh51cN_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/ea/b8/LXSkVJI6_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/9f/4f/HpIqBlVj_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/a3/9a/5WBBOMkF_o.jpg" alt="请添加图片描述"><br> <img src="https://images2.imgbox.com/76/45/Fpe7YjdX_o.jpg" alt="请添加图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b80a2e1f7205a07d9be0390d95e59576/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构算法--排序详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5c79feab5eb609e31d4c448b847cb5b4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用oxylabs代理国外ip请求openai接口报错记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
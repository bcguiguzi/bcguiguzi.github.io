<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用户验证FTP实验 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用户验证FTP实验" />
<meta property="og:description" content="匿名用户验证：
例：（前提配置，防火墙关闭，yum安装，同模式vmware11）
现有一台计算机huyanggw（视作服务端），IP地址为192.168.50.1，安装了vsftpd服务，并启动
另一台计算机hy02（视为客户端），IP地址为192.168.50.50，安装了ftp服务
1：使用hy02计算机操作：ftp 1920.168.50.1 可进入
Name=ftp passwd:enter（回车） exit退出
2：验证是否允许匿名用户上传文件
anon_upload_enable=[YES|NO]
操作：cd /etc/vsftpd---ll---vim vsftpd.conf
启动服务：systemctl start vsftpd
可以发现默认配置为关闭状态，打开，删除#
进入到/var/ftp，查看
为pub赋予其他人权限chmod 777 pub
匿名用户客户端建立文件aaa.txt
ftp 192.168.50.1
ftp 回车
cd pub -&gt;put aaa.txt-&gt;ls查看aaa.txt已经在目录下
3：验证是否允许匿名用户创建目录
anon_mkdir_write_enable=[YES|NO]
操作：设置anon_mkdir_write_enable=YES
wq保存退出，重启服务systemctl restart vsftpd
客户端进入ftp，可以建立a300文件夹
4：验证是否开放匿名用户的其他写入权限（删除、改名） anon_other_write_enable=[YES|NO]
操作： anon_other_write_enable=YES
wq保存退出，重启服务systemctl start vsftpd
客户端进入ftp，将1.txt删除
delete 1.txt 或者 del1.txt
本地用户验证： 例：（前提配置，防火墙关闭，yum安装，同模式vmware11）
现有一台计算机huyanggw（视作服务端），建立普通用户a1，a2，a3，IP地址为192.168.50.1，安装了vsftpd服务，并启动
另一台计算机hy02（视为客户端），IP地址为192.168.50.50，安装了ftp服务
可选配置项：
local_enable=[YES|NO] 是否允许本地用户登录FTP
local_umask=022 本地用户上传文件的umask值
local_root=/var/ftp 本地用户的FTP根目录
chroot_local_user=[YES|NO] 是否将用户权限禁锢在FTP目录，确保安全
allow_writeable_chroot=YES 是否允许写入
chroot_list_enable=YES|NO 是否启用chroot_list_file
在/etc/vsftpd/chroot_list文件中列出被不限制的用户的列表chroot_list_file=/etc/vsftpd/chroot_list" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/05ef0fe051060771c6b42ed2570a55dd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-15T12:09:03+08:00" />
<meta property="article:modified_time" content="2023-12-15T12:09:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用户验证FTP实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>匿名用户验证：</p> 
<p><img alt="" height="144" src="https://images2.imgbox.com/7b/64/bP7M2jql_o.png" width="441"></p> 
<p>例：（前提配置，防火墙关闭，yum安装，同模式vmware11）</p> 
<blockquote> 
 <p>现有一台计算机huyanggw（视作服务端），IP地址为192.168.50.1，安装了vsftpd服务，并启动</p> 
 <p>另一台计算机hy02（视为客户端），IP地址为192.168.50.50，安装了ftp服务</p> 
</blockquote> 
<p><strong>1：使用hy02计算机操作：ftp 1920.168.50.1 可进入</strong></p> 
<blockquote> 
 <p>Name=ftp  passwd:enter（回车）  exit退出</p> 
</blockquote> 
<p><img alt="" height="244" src="https://images2.imgbox.com/9c/37/pNTNz0l6_o.png" width="419"></p> 
<p><strong>2：验证是否允许匿名用户上传文件</strong></p> 
<p><strong>anon_upload_enable=[YES|NO]</strong></p> 
<blockquote> 
 <p>操作：cd /etc/vsftpd---ll---vim vsftpd.conf</p> 
 <p>启动服务：systemctl start vsftpd</p> 
</blockquote> 
<p><img alt="" height="129" src="https://images2.imgbox.com/6f/33/YhIVMJmp_o.png" width="468"></p> 
<p><strong>可以发现默认配置为关闭状态，打开，删除#</strong></p> 
<p><img alt="" height="138" src="https://images2.imgbox.com/c4/d1/96FSXUEK_o.png" width="513"></p> 
<p><strong>进入到/var/ftp，查看</strong></p> 
<p><img alt="" height="97" src="https://images2.imgbox.com/b1/3e/u6J1iSgZ_o.png" width="426"></p> 
<blockquote> 
 <p>为pub赋予其他人权限chmod 777 pub</p> 
</blockquote> 
<p><img alt="" height="104" src="https://images2.imgbox.com/62/d3/zBg18ONx_o.png" width="449"></p> 
<blockquote> 
 <p>匿名用户客户端建立文件aaa.txt</p> 
</blockquote> 
<p> <img alt="" height="204" src="https://images2.imgbox.com/48/d0/NG0DF953_o.png" width="438"></p> 
<blockquote> 
 <p>ftp 192.168.50.1</p> 
 <p>ftp  回车</p> 
 <p>cd pub -&gt;put aaa.txt-&gt;ls查看aaa.txt已经在目录下</p> 
</blockquote> 
<p><img alt="" height="371" src="https://images2.imgbox.com/85/06/rKibCrgt_o.png" width="468"></p> 
<p><strong>3：验证是否允许匿名用户创建目录</strong></p> 
<p><strong>anon_mkdir_write_enable=[YES|NO]</strong></p> 
<blockquote> 
 <p>操作：设置anon_mkdir_write_enable=YES</p> 
</blockquote> 
<p><img alt="" height="210" src="https://images2.imgbox.com/b9/ba/nhET6PIy_o.png" width="437"></p> 
<blockquote> 
 <p>wq保存退出，重启服务systemctl restart vsftpd</p> 
 <p>客户端进入ftp，可以建立a300文件夹</p> 
</blockquote> 
<p> <img alt="" height="319" src="https://images2.imgbox.com/76/15/H2LQJhA4_o.png" width="430"></p> 
<p><strong>4：验证是否开放匿名用户的其他写入权限（删除、改名） anon_other_write_enable=[YES|NO]</strong></p> 
<blockquote> 
 <p>操作： anon_other_write_enable=YES</p> 
</blockquote> 
<p><img alt="" height="210" src="https://images2.imgbox.com/61/9b/LwiruhQF_o.png" width="457"></p> 
<blockquote> 
 <p>wq保存退出，重启服务systemctl start vsftpd</p> 
 <p>客户端进入ftp，将1.txt删除</p> 
 <p>delete 1.txt   或者  del1.txt</p> 
</blockquote> 
<p><img alt="" height="301" src="https://images2.imgbox.com/61/ca/qE4CDING_o.png" width="455"></p> 
<h2>本地用户验证：</h2> 
<p><img alt="" height="368" src="https://images2.imgbox.com/d6/4d/YWmjmJhM_o.png" width="454"><br>  <br><strong>例：（前提配置，防火墙关闭，yum安装，同模式vmware11）</strong></p> 
<blockquote> 
 <p>现有一台计算机huyanggw（视作服务端），建立普通用户a1，a2，a3，IP地址为192.168.50.1，安装了vsftpd服务，并启动</p> 
</blockquote> 
<blockquote> 
 <p>另一台计算机hy02（视为客户端），IP地址为192.168.50.50，安装了ftp服务</p> 
</blockquote> 
<p><img alt="" height="123" src="https://images2.imgbox.com/b4/19/NSxdRs2S_o.png" width="409"></p> 
<p>可选配置项：</p> 
<blockquote> 
 <p>local_enable=[YES|NO] 是否允许本地用户登录FTP</p> 
 <p>local_umask=022 本地用户上传文件的umask值</p> 
 <p>local_root=/var/ftp 本地用户的FTP根目录</p> 
 <p>chroot_local_user=[YES|NO] 是否将用户权限禁锢在FTP目录，确保安全</p> 
 <p>allow_writeable_chroot=YES 是否允许写入</p> 
 <p>chroot_list_enable=YES|NO 是否启用chroot_list_file</p> 
 <p>在/etc/vsftpd/chroot_list文件中列出被不限制的用户的列表chroot_list_file=/etc/vsftpd/chroot_list</p> 
</blockquote> 
<p><strong>1：验证是否允许本地用户登录FTP</strong></p> 
<p><strong>local_enable=[YES|NO]</strong></p> 
<blockquote> 
 <p>操作：默认为YES，直接验证，可以登陆</p> 
 <p>ftp 192.168.50.1 name=a1  passwd=密码  回车</p> 
 <p>且umask=022</p> 
</blockquote> 
<p> <img alt="" height="240" src="https://images2.imgbox.com/12/9a/HJp9cuh8_o.png" width="500"></p> 
<p><strong>2：验证是否允许写入、删除</strong></p> 
<p><strong>allow_writeable_chroot=YES</strong></p> 
<blockquote> 
 <p>操作：添加allow_writeable_chroot=YES，wq保存退出，重启服务systemctl restart vsftpd</p> 
</blockquote> 
<p><img alt="" height="216" src="https://images2.imgbox.com/a6/dc/k2oLMXot_o.png" width="494"></p> 
<blockquote> 
 <p>删除文件，del 文件名</p> 
</blockquote> 
<p><img alt="" height="289" src="https://images2.imgbox.com/d3/51/TeTtCOhs_o.png" width="486"></p> 
<blockquote> 
 <p>删除目录，rmdir 文件名</p> 
</blockquote> 
<p><img alt="" height="247" src="https://images2.imgbox.com/9c/26/mYHDUwvA_o.png" width="470"></p> 
<p><strong>3：验证是否将用户权限禁锢在FTP目录，确保安全</strong></p> 
<p><strong>local_root=/var/ftp 本地用户的FTP根目录</strong></p> 
<p><strong>chroot_local_user=[YES|NO]</strong></p> 
<blockquote> 
 <p>操作：添加chroot_local_user=YES，</p> 
 <p>删除local_root=/var/ftp的#注释，wq保存退出，</p> 
 <p>重启服务systemctl restart vsftpd</p> 
</blockquote> 
<p><img alt="" height="227" src="https://images2.imgbox.com/13/d0/7V7Uc4Pj_o.png" width="494"></p> 
<p></p> 
<p><strong>设置后显示为“/”，不可以切换目录</strong></p> 
<p><img alt="" height="269" src="https://images2.imgbox.com/b2/1c/hwyaupzz_o.png" width="457"></p> 
<p><strong>设置前显示为“/var/ftp”，可以切换目录</strong></p> 
<p><img alt="" height="225" src="https://images2.imgbox.com/c7/12/ZsRBcFgi_o.png" width="486"></p> 
<p><strong>4：验证是否启用chroot_list_file以不限制用户列表</strong></p> 
<p><strong>chroot_list_enable=YES|NO  是否启用chroot_list_file</strong></p> 
<p><strong>在/etc/vsftpd/chroot_list文件中列出被不限制的用户的列表chroot_list_file=/etc/vsftpd/chroot_list</strong></p> 
<blockquote> 
 <p>操作：添加chroot_list_enable=YES，</p> 
 <p>在新建chroot_list目录</p> 
 <p>在chroot_list添加a1用户，验证是否a1是否可以切换，目录，若可以，验证成功，否则验证失败</p> 
 <p>重启服务systemctl restart vsftpd</p> 
</blockquote> 
<p><img alt="" height="107" src="https://images2.imgbox.com/6d/11/zKgqE4Kw_o.png" width="487"></p> 
<blockquote> 
 <p>ftp 192.168.50.1</p> 
 <p>a1  密码 回车  </p> 
 <p>pwd查看当前路径  </p> 
 <p>cd /etc 切换路径                  切换成功</p> 
</blockquote> 
<p><img alt="" height="206" src="https://images2.imgbox.com/b8/83/nUy9kbXt_o.png" width="480"></p> 
<blockquote> 
 <p>ftp 192.168.50.1 </p> 
 <p>a2  密码 回车  </p> 
 <p>pwd查看当前路径  </p> 
 <p>cd /etc 切换路径   切换失败       验证成功</p> 
</blockquote> 
<p><img alt="" height="268" src="https://images2.imgbox.com/1a/c1/1moYSoN7_o.png" width="482"></p> 
<h2>本地用户访问控制：</h2> 
<blockquote> 
 <p>userlist_enable=YES</p> 
 <p>userlist_deny=YES</p> 
 <p>不允许/etc/vsftpd/user_list</p> 
 <p>文件中出现的用户名登录FTP</p> 
 <p></p> 
 <p>userlist_enable=YES</p> 
 <p>userlist_deny=NO</p> 
 <p>仅允许/etc/vsftpd/user_list文件中出现的用户名登录FTP</p> 
 <p></p> 
 <p>ftpusers</p> 
 <p>不允许/etc/vsftpd/ftpusers文件中出现的用户名登录FTP，无论user_list如何设置</p> 
</blockquote> 
<p><strong>1：验证userlist_enable=YES、userlist_deny=YES</strong></p> 
<p><strong>不允许/etc/vsftpd/user_list文件中出现的用户名登录FTP</strong></p> 
<blockquote> 
 <p>操作：vim /etc/vsftp/vsftp.conf</p> 
 <p>添加userlist_enable=YES、userlist_deny=YES</p> 
 <p>vim  /etc/vsftp/vsftp.conf   输入a1   wq保存退出</p> 
 <p>重启服务systemctl restart vsftpd</p> 
</blockquote> 
<p><img alt="" height="196" src="https://images2.imgbox.com/fb/54/vZSUxusb_o.png" width="458"></p> 
<blockquote> 
 <p>验证a1用户是否可以登录ftp，若不可以，验证成功；</p> 
 <p>否则失败                                   验证成功</p> 
</blockquote> 
<p></p> 
<p><strong>2：验证userlist_enable=YES     userlist_deny=NO</strong></p> 
<p><strong>仅允许/etc/vsftpd/user_list文件中出现的用户名登录FTP</strong></p> 
<blockquote> 
 <p>操作：vim /etc/vsftp/vsftp.conf</p> 
 <p>添加userlist_enable=YES、userlist_deny=NO</p> 
</blockquote> 
<p><img alt="" height="133" src="https://images2.imgbox.com/20/c6/kyZ5ah2z_o.png" width="431"></p> 
<blockquote> 
 <p>wq保存退出   重启服务systemctl restart vsftpd</p> 
 <p>验证a1，a2用户是否可以登录ftp，若a1可以a2不可以，验证成功；若a2可以a1不可以，则验证失败   验证成功</p> 
</blockquote> 
<p><img alt="" height="354" src="https://images2.imgbox.com/14/81/7v1uKt8Z_o.png" width="475"></p> 
<p><strong>3：验证ftpusers</strong></p> 
<p><strong>userlist_enable=YES、userlist_deny=YES</strong></p> 
<p><strong>不允许/etc/vsftpd/ftpusers文件中出现的用户名登录FTP，无论user_list如何设置</strong></p> 
<blockquote> 
 <p>操作：vim ftpusers 输入a1</p> 
</blockquote> 
<p><img alt="" height="174" src="https://images2.imgbox.com/09/12/fL6bxaA8_o.png" width="439"></p> 
<blockquote> 
 <p>wq保存退出   重启服务systemctl restart vsftpd</p> 
 <p>验证a1，a2用户是否可以登录ftp，若a2可以a1不可以，验证成功；若a1可以a2不可以，则验证失败    验证成功</p> 
</blockquote> 
<p><img alt="" height="286" src="https://images2.imgbox.com/9c/85/V1cb9b14_o.png" width="462"></p> 
<p><strong>4：验证ftpusers  优先级是否高于userlist_deny=YES</strong></p> 
<blockquote> 
 <p>操作：vim ftpusers 输入a1</p> 
</blockquote> 
<p><img alt="" height="262" src="https://images2.imgbox.com/d1/ed/aeL2rcHx_o.png" width="447"></p> 
<blockquote> 
 <p>wq保存退出   重启服务systemctl restart vsftpd</p> 
 <p>验证a1，a2用户是否可以登录ftp，若a1，a2均不可以，验证成功；若a1仍然可以，则验证失败        验证成功</p> 
</blockquote> 
<p><img alt="" height="304" src="https://images2.imgbox.com/fc/0f/UFwUDni9_o.png" width="490"></p> 
<p><strong>本地用户使用被动模式传输：</strong></p> 
<p><strong>配置项</strong></p> 
<blockquote> 
 <p>pasv_enable=YES 启用被动模式</p> 
 <p>pasv_min_port=2001 被动模式使用的最小端口号</p> 
 <p>pasv_max_port=2005 被动模式使用的最大端口号</p> 
</blockquote> 
<p><strong>验证：</strong></p> 
<p><strong>服务器主配置文件添加上述3条记录</strong></p> 
<p><strong>客户端下载文件时，查看端口号</strong></p> 
<p>操作：</p> 
<blockquote> 
 <p>vim /etc/vsftpd/vsftpd.conf   </p> 
 <p>输入pasv_enable=YES</p> 
 <p>pasv_min_port=3001</p> 
 <p>pasv_max_port=3005</p> 
</blockquote> 
<p><img alt="" height="230" src="https://images2.imgbox.com/e6/8b/pKT95TA2_o.png" width="415"></p> 
<blockquote> 
 <p>wq保存退出   重启服务systemctl restart vsftpd</p> 
 <p>查看当前端口状态  netstat -anptl</p> 
</blockquote> 
<p><img alt="" height="188" src="https://images2.imgbox.com/c1/9f/fldN0bZR_o.png" width="516"></p> 
<p><strong>客户端操作：</strong></p> 
<blockquote> 
 <p>ftp 192.168.50.1</p> 
 <p>a1  密码 回车  </p> 
 <p>而后回到服务端 查看当前端口状态  netstat -anptl</p> 
</blockquote> 
<p><img alt="" height="181" src="https://images2.imgbox.com/45/d4/rtv53xM4_o.png" width="540"></p> 
<p><a href="https://blog.csdn.net/2302_77582029/article/details/130994970" title="用户验证FTP实验_vsftp 验证-CSDN博客">用户验证FTP实验_vsftp 验证-CSDN博客</a> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1ae9ddfe767ab88e6aaa7517fa24181c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux ftp 服务器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae88ea08ad698cd95a439c52658fdfde/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C#使用HtmlAgilityPack解析HTML结构</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
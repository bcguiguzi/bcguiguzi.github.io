<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【12】应用开发——Fragment的使用 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【12】应用开发——Fragment的使用" />
<meta property="og:description" content="提示：此文章仅作为本人记录日常学习使用，若有存在错误或者不严谨得地方欢迎指正。
文章目录 一、Fragment的使用1.1 Fragment的基础使用1.2 动态添加Fragment1.3 实现Fragment返回栈1.4 Fragment和Activity之间的交互 二、Fragment的使用2.1 Fragment的生命周期2.2 Android中常见的限定符2.3 使用限定符动态加载布局2.4 使用最小宽度限定符加载布局 一、Fragment的使用 Fragment是一种可以嵌入在Activity中的UI片段，在平板上应用非常广泛。我们可以在一个Activity中引入多个Fragment来显示更多的内容，因此Fragment可以很好的在大屏幕Android设备中发挥作用。
1.1 Fragment的基础使用 我们创建一个FragmentTest项目，并新建一个左侧Fragment布局文件left_fragment.xml：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:orientation=&#34;vertical&#34;&gt; &lt;Button android:id=&#34;@&#43;id/button&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:layout_gravity=&#34;center_horizontal&#34; android:text=&#34;Button&#34; /&gt; &lt;/LinearLayout&gt; 然后新建右侧Fragment布局文件right_fragment.xml：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:background=&#34;#00ff00&#34; android:orientation=&#34;vertical&#34;&gt; &lt;TextView android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:layout_gravity=&#34;center_horizontal&#34; android:text=&#34;This is right fragment!&#34; android:textSize=&#34;24sp&#34; /&gt; &lt;/LinearLayout&gt; 在使用Fragment时，除了创建Fragment布局文件。我们还需要创建相应的类文件来表示该Fragment。这是因为Fragment本身是一个独立的组件，它可以在Activity中运行，并且有自己的生命周期和UI。：
//注意是androidx中的fragment import androidx.fragment.app.Fragment · · · class LeftFragment : Fragment() { override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/f95804d2c838d401bae9704b80b1e4d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-01T15:29:18+08:00" />
<meta property="article:modified_time" content="2023-11-01T15:29:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【12】应用开发——Fragment的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>提示：此文章仅作为本人记录日常学习使用，若有存在错误或者不严谨得地方欢迎指正。</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Fragment_3" rel="nofollow">一、Fragment的使用</a></li><li><ul><li><a href="#11_Fragment_5" rel="nofollow">1.1 Fragment的基础使用</a></li><li><a href="#12_Fragment_85" rel="nofollow">1.2 动态添加Fragment</a></li><li><a href="#13_Fragment_180" rel="nofollow">1.3 实现Fragment返回栈</a></li><li><a href="#14_FragmentActivity_200" rel="nofollow">1.4 Fragment和Activity之间的交互</a></li></ul> 
  </li><li><a href="#Fragment_231" rel="nofollow">二、Fragment的使用</a></li><li><ul><li><a href="#21_Fragment_232" rel="nofollow">2.1 Fragment的生命周期</a></li><li><a href="#22_Android_317" rel="nofollow">2.2 Android中常见的限定符</a></li><li><a href="#23__339" rel="nofollow">2.3 使用限定符动态加载布局</a></li><li><a href="#24__389" rel="nofollow">2.4 使用最小宽度限定符加载布局</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Fragment_3"></a>一、Fragment的使用</h2> 
<p>Fragment是一种可以嵌入在Activity中的UI片段，在平板上应用非常广泛。我们可以在一个Activity中引入多个Fragment来显示更多的内容，因此Fragment可以很好的在大屏幕Android设备中发挥作用。</p> 
<h3><a id="11_Fragment_5"></a>1.1 Fragment的基础使用</h3> 
<p>我们创建一个FragmentTest项目，并新建一个左侧Fragment布局文件left_fragment.xml：</p> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"vertical"</span></span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/button"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"wrap_content"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"wrap_content"</span></span>
        android<span class="token operator">:</span>layout_gravity<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"center_horizontal"</span></span>
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"Button"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ed/fb/GmAPuYrd_o.png" alt="在这里插入图片描述"><br> 然后新建右侧Fragment布局文件right_fragment.xml：</p> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"#00ff00"</span></span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"vertical"</span></span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>TextView
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_gravity<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"center_horizontal"</span></span>
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"This is right fragment!"</span></span>
        android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"24sp"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/07/ca/3q8yuDik_o.png" alt="在这里插入图片描述"><br> 在<strong>使用Fragment时</strong>，除了<strong>创建Fragment布局文件</strong>。我们还需要<strong>创建相应的类文件来表示该Fragment</strong>。这是因为<strong>Fragment本身是一个独立的组件</strong>，它可以在Activity中运行，并且<strong>有自己的生命周期和UI</strong>。：</p> 
<pre><code class="prism language-kotlin"><span class="token comment">//注意是androidx中的fragment</span>
<span class="token keyword">import</span> androidx<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span>app<span class="token punctuation">.</span>Fragment
· · ·
<span class="token keyword">class</span> LeftFragment <span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span> container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span> savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>left_fragment<span class="token punctuation">,</span>container<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre> 
<p>新建一个RightFragment类，RightFragment类的代码和LeftFragment类基本一致，只是引用的fragment布局不同。接下来修改activity_main.xml中的代码：</p> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    xmlns<span class="token operator">:</span>app<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res-auto"</span></span>
    xmlns<span class="token operator">:</span>tools<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/tools"</span></span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"horizontal"</span></span>
    tools<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">".MainActivity"</span></span><span class="token operator">&gt;</span>

	<span class="token comment">//LeftFragment</span>
    <span class="token operator">&lt;</span>fragment
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/leftFrag"</span></span>
        android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"com.example.fragmenttest.LeftFragment"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"0dp"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>

	<span class="token comment">//RightFragment</span>
    <span class="token operator">&lt;</span>fragment
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/rightFrag"</span></span>
        android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"com.example.fragmenttest.RightFragment"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"0dp"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5a/19/WDktDFJM_o.png" alt="在这里插入图片描述"><br> 这次让我们运行程序，你可以看到我们的屏幕界面被两个Fragment平分，左边的LeftFragment中显示了一个Button，而右边的Fragment中显示了一个TextView。在上面的例子中我们直接在布局中添加了两个fragment，让其平分整块屏幕。这种方式过于简单了，在实际项目中很少会用到。<strong>Fragment真正的用途是在程序运行时动态的添加到Activity中</strong>。</p> 
<h3><a id="12_Fragment_85"></a>1.2 动态添加Fragment</h3> 
<p>我们接着在之前的项目上新建一个another_right_fragment.xml，它的布局和right_fragment布局基本一致，为了区分我们将another_right_fragment的背景颜色更改为黄色。：</p> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"#ffff00"</span></span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"vertical"</span></span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>TextView
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"wrap_content"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"wrap_content"</span></span>
        android<span class="token operator">:</span>layout_gravity<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"center_horizontal"</span></span>
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"This is another right fragment"</span></span>
        android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"24sp"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/2d/DeCYGzCC_o.png" alt="在这里插入图片描述"><br> 然后我们为another_right_fragment.xml创建类文件AnotherRightFragment：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">class</span> AnotherRightFragment <span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span> container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span> savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>another_right_fragment<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>现在我们已经创建了another_right_fragment的布局文件和它的类文件AnotherRightFragment，接下来就要开始动态的将它添加到Activity中了。首先我们修改activity_main.xml文件，它的代码如下：</p> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    xmlns<span class="token operator">:</span>app<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res-auto"</span></span>
    xmlns<span class="token operator">:</span>tools<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/tools"</span></span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"horizontal"</span></span>
    tools<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">".MainActivity"</span></span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>fragment
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/leftFrag"</span></span>
        android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"com.example.fragmenttest.LeftFragment"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"0dp"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        
	<span class="token comment">/*这里我们将右侧的Fragment替换成了一个Frameayout
	  由于我们只希望在布局中放入一个Fragment,而不需要任何定位
	  所以使用这种布局十分的合适*/</span>
    <span class="token operator">&lt;</span>FrameLayout
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/frameLayout"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"0dp"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p>接下来我们在代码中向FrameLayout中添加内容，从而实现动态添加Fragment的功能。修改MainActivity中的代码：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
        <span class="token comment">//设置LeftFragment按钮点击事件</span>
        button<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{<!-- --></span>
        	<span class="token comment">//点击按钮替换成AnotherRightFragment</span>
            <span class="token function">replaceFragment</span><span class="token punctuation">(</span><span class="token function">AnotherRightFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//默认显示RightFragment</span>
        <span class="token function">replaceFragment</span><span class="token punctuation">(</span><span class="token function">RightFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//替换Fragment</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">replaceFragment</span><span class="token punctuation">(</span>fragment<span class="token operator">:</span> Fragment<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//获得FragmentManager对象</span>
        <span class="token keyword">val</span> fragmentManager <span class="token operator">=</span> supportFragmentManager
        <span class="token comment">//开启一个事物</span>
        <span class="token keyword">val</span> transaction <span class="token operator">=</span> fragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">//通过replace()向容器内添加或替换Fragment</span>
        transaction<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>frameLayout<span class="token punctuation">,</span> fragment<span class="token punctuation">)</span>
        <span class="token comment">//提交事物</span>
        transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>若想要实现<strong>动态添加Fragment</strong>，需要经历以下步骤：<br> ①<strong>创建待添加的Fragment实例</strong>。<br> ②<strong>获取FragmentManager</strong>。可以在Activity中可以通过getsupportFragmentManager()方法获取。<br> ③通过FragmentManager的beginTransaction()方法<strong>开启一个事务</strong>。<br> ④使用replace()方法<strong>添加或替换Fragment</strong>。replace()方法需要传入以下参数：1.将要被替换的控件id(这里要替换的控件是FrameLayout)2.新Fragment的对象<br> ⑤通过调用commit()方法来<strong>提交事物</strong>。<br> 程序运行效果如下图所示：<br> <img src="https://images2.imgbox.com/1c/39/IKAEBscZ_o.png" alt="在这里插入图片描述"><br> 当我们点击左侧LeftFragment中的按钮后会将右侧的Fragment替换成新的Fragment。<br> <img src="https://images2.imgbox.com/33/01/YOBkpnGM_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13_Fragment_180"></a>1.3 实现Fragment返回栈</h3> 
<p>在上面的例子中，我们点击LeftFragment的按钮可以将右侧绿色RightFragment替换成黄色AnotherRightFragment，当我们按下Back返回键后程序就会退出。如果我们想<strong>实现类似于返回栈的效果</strong>，当我们按下Back返回键后可以从黄色AnotherRightFragment回到之前的绿色RightFragment该如何实现呢？<br> 在FragmentManager中可以<strong>通过addToBackStack( )方法将一个事物添加到返回栈</strong>，我们修改MainActivity中的代码：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    · · ·
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">replaceFragment</span><span class="token punctuation">(</span>fragment<span class="token operator">:</span> Fragment<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">val</span> fragmentManager <span class="token operator">=</span> supportFragmentManager
        <span class="token keyword">val</span> transaction <span class="token operator">=</span> fragmentManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        transaction<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>frameLayout<span class="token punctuation">,</span> fragment<span class="token punctuation">)</span>
        <span class="token comment">//将该事物添加到返回栈中</span>
        transaction<span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
        transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这样当我们按下Back返回键后就可以从黄色AnotherRightFragment回到之前的绿色RightFragment了。<strong>addToBackStack()方法的参数是事务的名称</strong>，这个名称可以用于在后续的操作中标识事务。</p> 
<blockquote> 
 <p>注意：<strong>在使用 addToBackStack() 方法时，应该在事务开始之前调用它</strong>，以确保事务被正确添加到回退堆栈中。</p> 
</blockquote> 
<h3><a id="14_FragmentActivity_200"></a>1.4 Fragment和Activity之间的交互</h3> 
<p>虽然Fragment是嵌入在Activity中的，但是他们是各自存在于一个独立的类当中的，所以它们之间的交互并不容易。为了方便Fragment和Activity之间进行交互，FragmentManager提供了一个较findFragmentById()的方法，该方法可以从布局文件中获取到Fragment的实例。例如以下代码就可以获取到activity_main.xml中名为leftFrag的fragment。</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">val</span> myFragment <span class="token operator">=</span> supportFragmentManager<span class="token punctuation">.</span><span class="token function">findFragmentById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>leftFrag<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    · · ·
    tools<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">".MainActivity"</span></span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>fragment
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/leftFrag"</span></span>
        android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"com.example.fragmenttest.LeftFragment"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"0dp"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        
    <span class="token operator">&lt;</span>FrameLayout
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/rightLayout"</span></span>
        · · ·<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p>在上面的例子中我们学习了如何在Activity中调用Fragment的方法，那么如何在Fragment中调用Activity呢？我们可以<strong>在Fragment中通过getActivity()方法来得到和当前Fragment相关联的Activity实例</strong>：</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">if</span><span class="token punctuation">(</span>activity <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">val</span> mainActivity <span class="token operator">=</span> activity <span class="token keyword">as</span> MainActivity
<span class="token punctuation">}</span>
</code></pre> 
<p>在这里我们通过getActivity()方法返回与当前Fragment关联的Activity实例。<strong>如果当前Fragment没有关联到任何Activity(例如：Fragment 还没有被添加到 Activity中）那么getActivity()会返回null</strong>。因此使用getActivity() 方法时，需要确保该Fragment 已经添加到了一个Activity中。<br> 如果我们想要<strong>实现Fragment之间的通信</strong>，那么我们可以在一个Fragment中得到与它相关联的Activity，然后再通过这个Activity去获取另一个Fragment实例。</p> 
<h2><a id="Fragment_231"></a>二、Fragment的使用</h2> 
<h3><a id="21_Fragment_232"></a>2.1 Fragment的生命周期</h3> 
<pre><code class="prism language-kotlin"><span class="token keyword">class</span> RightFragment <span class="token operator">:</span> <span class="token function">Fragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token keyword">val</span> TAG <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">"RightFragment"</span></span>
    <span class="token punctuation">}</span>

	<span class="token comment">//当Fragment和Activity建立关联的时候调用(只会调用一次)</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onAttach</span><span class="token punctuation">(</span>context<span class="token operator">:</span> Context<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onAttach</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onAttach()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onCreate()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//未Fragment创建view组件(加载布局)时调用</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateView</span><span class="token punctuation">(</span>
        inflater<span class="token operator">:</span> LayoutInflater<span class="token punctuation">,</span>
        container<span class="token operator">:</span> ViewGroup<span class="token operator">?</span><span class="token punctuation">,</span>
        savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span>
    <span class="token punctuation">)</span><span class="token operator">:</span> View<span class="token operator">?</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>right_fragment<span class="token punctuation">,</span> container<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//确保与Fragment相关联的Activity已经创建完毕时调用</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onActivityCreated</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityCreated</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onActivityCreated()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onStart()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onResume()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onPause()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onStop"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//当与Fragment关联的视图被移除时调用</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroyView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroyView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onDestroyView()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onDestroy()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//当Fragment和Activity解除关联时调用</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDetach</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDetach</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        Log<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"onDetach()"</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>点击运行后RightFragment第一次被加载到屏幕上</strong>：<br> <img src="https://images2.imgbox.com/13/7e/gAEkG7Br_o.png" alt="在这里插入图片描述"></p> 
<p><strong>点击LeftFragment中的Button按钮后，AnotherRightFragment替换了RightFragment</strong>：<br> <img src="https://images2.imgbox.com/fd/98/JcWp0UNs_o.png" alt="在这里插入图片描述"></p> 
<p><strong>按下返回键，RightFragment再次被显示出来：</strong><br> <img src="https://images2.imgbox.com/3f/13/6lHbMCpm_o.png" alt="在这里插入图片描述"></p> 
<p><strong>再次按下返回键退出程序：</strong><br> <img src="https://images2.imgbox.com/4f/af/Ic9gBNJ6_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Fragment中也是可以通过onSaveInstanceState() 方法来保存数据</strong>，因为进入停止状态的Fragment也可能在系统内存不足时被回收。保存下来的数据可以在<strong>onCreate()</strong>、<strong>onCreateView()</strong> 和 <strong>onActivityCreated()</strong> 这3个方法中重新恢复数据。它们都包含一个Bundle类型的saveInstanceState参数。具体如何使用可以参考第七章的“1.4.3 Activity被回收了怎么办”中的内容。</p> 
<h3><a id="22_Android_317"></a>2.2 Android中常见的限定符</h3> 
<pre><code>屏幕尺寸:
         layout-small    小屏幕设备
         layout-normal   基准屏幕设备
         layout-large    大屏幕设备
         layout-xlarge   超大屏幕设备
</code></pre> 
<hr> 
<pre><code>屏幕密度:
         layout-ldpi    &lt;=120dpi（低分辨率设备）
         layout-mdpi    &lt;= 160dpi（中分辨率设备）
         layout-hdpi    &lt;= 240dpi（高分辨率设备）
         layout-xhdpi   &lt;= 320dpi（超高分辨率设备）
         layout-xxhdpi  &lt;= 480dpi（超超高分辨率设备）
         layout-xxhdpi  &lt;= 640dpi（只用来存放icon）
         
         layout-nodpi   与屏幕密度无关的资源.系统不会针对屏幕密度对其中资源进行压缩或者拉伸
         layout-tvdpi   介于mdpi与hdpi之间,特定针对213dpi,专门为电视准备的,手机应用开发不需要关心这个密度值
</code></pre> 
<hr> 
<pre><code>屏幕方向:
         layout-land    横向屏幕设备
         layout-port    纵屏幕设备
</code></pre> 
<hr> 
<h3><a id="23__339"></a>2.3 使用限定符动态加载布局</h3> 
<p>平板由于屏幕大，所以通常将采用双页模式（左边和右边显示两页内容）。但手机的屏幕比较小，只能显示一页内容。为了<strong>在运行的时候让程序判断是应该采用双页模式还是单页模式</strong>，我们可以通过限定符来实现。修改activity_main.xml文件：</p> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"horizontal"</span></span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>fragment
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/leftFrag"</span></span>
        android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"com.example.fragmenttest.LeftFragment"</span></span>
        <span class="token comment">//只保留左侧Fragment并让其充满整个父布局</span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/af/a1/9MzQwf1q_o.png" alt="在这里插入图片描述"></p> 
<p>在res文件夹下新建layout-large文件夹，并在其中新建一个activity_main.xml布局：</p> 
<pre><code class="prism language-kotlin"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1.0"</span></span> encoding<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"utf-8"</span></span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>LinearLayout xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"http://schemas.android.com/apk/res/android"</span></span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"horizontal"</span></span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>fragment
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/leftFrag"</span></span>
        android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"com.example.fragmenttest.LeftFragment"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"0dp"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"1"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>fragment
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"@+id/rightFrag"</span></span>
        android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"com.example.fragmenttest.RightFragment"</span></span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"0dp"</span></span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"match_parent"</span></span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string-literal singleline"><span class="token string">"3"</span></span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/8e/qiLmh9ue_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到，在<strong>layout</strong>/activity_main.xml布局中只包含了一个Fragment，我们让其当作单页模式的布局。而<strong>layout-large</strong>/activity_main.xml布局中包含两个Fragment，作为双页模式的布局。这里面的<strong>large</strong>其实就是一个限定符，那些<strong>屏幕尺寸被系统认为是large的设备就会自动加载layout-large目录下的布局</strong>，而<strong>小屏幕设备则还是会加载layout目录下的布局。</strong><br> 我们将MainActivity中replaceFragment()有关的代码注释掉，重新运行充程序。这样我们的程序就可以在运行的时候根据设备屏幕的大小自动显示相应的布局文件了。</p> 
<h3><a id="24__389"></a>2.4 使用最小宽度限定符加载布局</h3> 
<p>在上一节中我们使用了large限定符来让程序自动选择双页模式还是单页模式。那么large到底是指有多大呢？有时候我们希望灵活的为不同设备加载布局，不管它是被系统认定为large还是small。<br> 这时我们就可以<strong>使用最小宽度限定符对屏幕宽度指定一个最小值</strong>(单位dp)。然后<strong>以这个最小值为临界点</strong>，<strong>屏幕宽度大于这个值的设备就加载A布局，屏幕宽度小于这个值就加载B布局</strong>。<br> 我们在res文件夹下新建一个<strong>layout-sw300dp</strong>文件夹，然后将large/activity_main.xml布局复制过来。这样<strong>当屏幕宽度大于300dp的设备上运行的时候就会加载layout-sw300dp文件夹中的布局</strong>，<strong>当屏幕宽度小于300dp时就会加载默认的layout/activity_main.xml布局文件</strong>。以下是在一款屏幕宽度为320dp的手机上运行后的效果：<br> <img src="https://images2.imgbox.com/af/15/ojq6VeSL_o.png" alt="在这里插入图片描述"><br> 可以看到，虽然这款手机的屏幕宽度并不符合large限定符的定义，但是我们通过最小宽度限定符让它使用了双叶模式。<strong>通过最小宽度限定符你就可以灵活的在不同设备上自动选择合适的布局</strong>了！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3bc714125c8a94686662414e936f249d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">php&#43;mysql基于微信的问卷调查小程序的设计与实现（附源码 论文 配置 讲解）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c8cdae0ceacbe85eb70a6c9bbaa66d8b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VSCode配置Fortran并运行国际参考电离层2020模型（IRI2020）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
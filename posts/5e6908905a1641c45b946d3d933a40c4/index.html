<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python通过字典来替代if..else - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python通过字典来替代if..else" />
<meta property="og:description" content="在应对多策略的场景下，大量使用if...else...不仅提高了后期的维护成本，还降低了运行效率。通过字典做映射就可以更好的优化代码。
比如这样一个模拟场景，根据用户的VIP等级，发放奖励。在大量使用if...else...时就会变成如下状态：
rank=&#34;VIP4&#34; if rank==&#34;VIP1&#34;: print(100) else: if rank==&#34;VIP2&#34;: print(150) else: if rank==&#34;VIP3&#34;: print(200) else: if rank==&#34;VIP4&#34;: print(300) 在改用为字典后，代码如下：
rank=&#34;VIP4&#34; message={ &#34;VIP1&#34;:100, &#34;VIP2&#34;:150, &#34;VIP3&#34;:200, &#34;VIP4&#34;:300, } a=message.get(rank,None) print(a) try: a=message[rank] except: a=None print(a) 打印结果：
这里，字典message拥有键(key)和值。可通过get(key,default=None)，setdefault(key, default=None)，以及message[key]来索引到值。
这三者的不同：
message.get(key,default=None):如果key不在字典中，则返回None
message.setdefault(key,default=None):如果key不在字典中，则返回None，并在字典中添加该key，其值为default的值。以本案例为例，若执行message.setdefault(&#34;VIP5&#34;,500)，字典message后就会增加一项&#34;VIP5&#34;:500，并返回值500。
message[key]:如果key不在字典中,就会直接报错。因此案例中采用了try..except..的格式。
我们在实际应用中不仅仅只是key对值的简单映射，而是更多会遇到需要映射函数的情况。这样的场景比如根据不同生产指令，去执行不同运动等。回到本案例，代码如下：
def vip1(): return 100 def vip2(): return 150 rank=&#34;VIP1&#34; message={ &#34;VIP1&#34;:vip1, &#34;VIP2&#34;:vip2, &#34;VIP3&#34;:200, &#34;VIP4&#34;:300, } a=message.get(rank,None) print(a) try: a=message[rank]() except: a=None print(a) 执行后结果如下：
我们可以看到第一个a返回的值不是100，这是因为第一个返回的是一个函数整体，即一个函数类，而不是return的值。而如果执行a=message[rank]，同样也是返回一个函数整体，而不会是return的值。只有在执行了a=message[rank]()后才会返回return的值。这里括号的作用就是执行函数的意思，同时括号里面还可以添加自定义函数需要的初始变量，最后这里a=message[&#34;VIP1&#34;]()等价于a=vip1()，还等价于
b=message[rank] a=b() 如果当字典中key映射的值不为函数，而为具体一个值时，此时执行a=message[rank]()就会报错。故优化后的框架如下：
def vip1(): return 100 def vip2(): return 150 rank=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/5e6908905a1641c45b946d3d933a40c4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-21T07:51:02+08:00" />
<meta property="article:modified_time" content="2022-12-21T07:51:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python通过字典来替代if..else</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在应对多策略的场景下，大量使用if...else...不仅提高了后期的维护成本，还降低了运行效率。通过字典做映射就可以更好的优化代码。</p> 
<p>比如这样一个模拟场景，根据用户的VIP等级，发放奖励。在大量使用if...else...时就会变成如下状态：</p> 
<pre><code class="language-python">rank="VIP4"
if rank=="VIP1":
    print(100)
else:
    if rank=="VIP2":
        print(150)
    else:
        if rank=="VIP3":
            print(200)
        else:
            if rank=="VIP4":
                print(300)
</code></pre> 
<p>在改用为字典后，代码如下：</p> 
<pre><code class="language-python">rank="VIP4"
message={
    "VIP1":100,
    "VIP2":150,
    "VIP3":200,
    "VIP4":300,
    } 
a=message.get(rank,None)
print(a)
try:
    a=message[rank]
except:
    a=None
print(a)
</code></pre> 
<p>打印结果：</p> 
<p><img alt="" height="105" src="https://images2.imgbox.com/7e/48/Ay8SwrHo_o.png" width="115"></p> 
<p>这里，字典message拥有键(key)和值。可通过<span style="color:#fe2c24;">get</span>(key,default=None)，<span style="color:#fe2c24;">setdefault</span>(key, default=None)，以及message[key]来索引到值。</p> 
<p>这三者的不同：</p> 
<p><strong>message.<span style="color:#fe2c24;">get</span>(key,default=None)</strong>:如果key不在字典中，则返回None</p> 
<p><strong>message.<span style="color:#fe2c24;">setdefault</span>(key,default=None)</strong>:如果key不在字典中，则返回None，并在字典中添加该key，其值为default的值。以本案例为例，若执行message.<span style="color:#fe2c24;">setdefault</span>("VIP5",500)，字典message后就会增加一项"VIP5":500，并返回值500。</p> 
<p><strong>message[key]</strong>:如果key不在字典中,就会直接报错。因此案例中采用了try..except..的格式。</p> 
<p>我们在实际应用中不仅仅只是key对值的简单映射，而是更多会遇到需要映射函数的情况。这样的场景比如根据不同生产指令，去执行不同运动等。回到本案例，代码如下：</p> 
<pre><code class="language-python">def vip1():
    return 100

def vip2():
    return 150

rank="VIP1"
message={
    "VIP1":vip1,
    "VIP2":vip2,
    "VIP3":200,
    "VIP4":300,
    } 
a=message.get(rank,None)
print(a)
try:
    a=message[rank]()
except:
    a=None
print(a)
</code></pre> 
<p>执行后结果如下：</p> 
<p><img alt="" height="103" src="https://images2.imgbox.com/31/32/9XzZJM6Z_o.png" width="349"></p> 
<p>我们可以看到第一个a返回的值不是100，这是因为第一个返回的是一个函数整体，即一个函数类，而不是return的值。而如果执行<strong>a=message[rank]</strong>，同样也是返回一个函数整体，而不会是return的值。只有在执行了<strong>a=message[rank]<span style="color:#fe2c24;">()</span></strong>后才会返回return的值。这里括号的作用就是执行函数的意思，同时括号里面还可以添加自定义函数需要的初始变量，最后这里<strong>a=message["VIP1"]<span style="color:#fe2c24;">()</span></strong>等价于<strong>a=vip1<span style="color:#fe2c24;">()</span></strong>，还等价于</p> 
<pre><code class="language-python">b=message[rank]
a=b()</code></pre> 
<p>如果当字典中key映射的值不为函数，而为具体一个值时，此时执行<strong>a=message[rank]<span style="color:#fe2c24;">()</span></strong>就会报错。故优化后的框架如下：</p> 
<pre><code class="language-python">def vip1():
    return 100

def vip2():
    return 150

rank="VIP1"
message={
    "VIP1":vip1,
    "VIP2":vip2,
    "VIP3":200,
    "VIP4":300,
    } 

try:a=message[rank]()
except:a=message.get(rank,None)
print(a)</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/985c3ab31ff84b9ea1a49d4cc1972c66/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">A White Paper on Neural Network Quantization--阅读笔记1</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e81121343f5f881d89f4545e901da6b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ModuleNotFoundError: No module named ‘tqdm.auto‘</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
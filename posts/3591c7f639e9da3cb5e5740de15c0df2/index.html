<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue-Quill富文本修改上传图片或粘贴图片到服务器方式以及汉化提示 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue-Quill富文本修改上传图片或粘贴图片到服务器方式以及汉化提示" />
<meta property="og:description" content="引用Quill组件 1.下载组件。在package中引入：
&#34;@vueup/vue-quill&#34;: &#34;^1.0.0-beta.8&#34;, &#34;vue-quill-editor&#34;: &#34;^3.0.6&#34;, &#34;quill-image-resize-module&#34;: &#34;^3.0.0&#34;, &#34;quill-image-drop-module&#34;: &#34;^1.0.3&#34;, &#34;quill-image-paste-module&#34;: &#34;^1.0.6&#34;, 2.在vue.config.js中添加以下代码，不然会报错。
chainWebpack: config =&gt; { config.plugin(&#39;provide&#39;).use(webpack.ProvidePlugin, [{ &#39;window.Quill&#39;: &#39;quill/dist/quill.js&#39;, &#39;Quill&#39;: &#39;quill/dist/quill.js&#39; }]) } 3.引用组件
import { QuillEditor, Quill } from &#39;@vueup/vue-quill&#39; import &#39;@vueup/vue-quill/dist/vue-quill.snow.css&#39; import { UPLOAD_IMAGE_PATH } from &#39;@/api/BASE_MODULE/upload&#39;//上传图片接口 import $ from &#39;jquery&#39; import ImageResize from &#39;quill-image-resize-module&#39; // 调整大小组件。 Quill.register(&#39;modules/ImageResize&#39;, ImageResize) import { ImageDrop } from &#39;quill-image-drop-module&#39; Quill.register(&#39;modules/imageDrop&#39;, ImageDrop) import { ImageExtend } from &#39;quill-image-paste-module&#39; Quill.register(&#39;modules/ImageExtend&#39;, ImageExtend) 自定义富文本 引用位置 &lt;div class=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/3591c7f639e9da3cb5e5740de15c0df2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-23T18:25:38+08:00" />
<meta property="article:modified_time" content="2022-06-23T18:25:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue-Quill富文本修改上传图片或粘贴图片到服务器方式以及汉化提示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Quill_0"></a>引用Quill组件</h2> 
<p>1.下载组件。在package中引入：</p> 
<pre><code class="prism language-xml">"@vueup/vue-quill": "^1.0.0-beta.8",
"vue-quill-editor": "^3.0.6",
"quill-image-resize-module": "^3.0.0",
"quill-image-drop-module": "^1.0.3",
"quill-image-paste-module": "^1.0.6",
</code></pre> 
<p>2.在vue.config.js中添加以下代码，不然会报错。</p> 
<pre><code class="prism language-javascript"><span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'provide'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>webpack<span class="token punctuation">.</span>ProvidePlugin<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">'window.Quill'</span><span class="token operator">:</span> <span class="token string">'quill/dist/quill.js'</span><span class="token punctuation">,</span>
      <span class="token string-property property">'Quill'</span><span class="token operator">:</span> <span class="token string">'quill/dist/quill.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>3.引用组件</p> 
<pre><code class="prism language-xml">import { QuillEditor, Quill } from '@vueup/vue-quill'
import '@vueup/vue-quill/dist/vue-quill.snow.css'
import { UPLOAD_IMAGE_PATH } from '@/api/BASE_MODULE/upload'//上传图片接口
import $ from 'jquery'
import ImageResize from 'quill-image-resize-module' // 调整大小组件。
Quill.register('modules/ImageResize', ImageResize)
import { ImageDrop } from 'quill-image-drop-module'
Quill.register('modules/imageDrop', ImageDrop)
import { ImageExtend } from 'quill-image-paste-module'
Quill.register('modules/ImageExtend', ImageExtend)
</code></pre> 
<h2><a id="_32"></a>自定义富文本</h2> 
<h3><a id="_33"></a>引用位置</h3> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editor-wrap<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editor-wrap<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>QuillEditor</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>editorWrap<span class="token punctuation">"</span></span> <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options<span class="token punctuation">"</span></span> <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>snow<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onEditorChange<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="_39"></a>添加工具栏</h3> 
<p>此处并不包含上传图片和汉化功能。使用时需要在此处引用：</p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   QuillEditor
<span class="token punctuation">}</span>
</code></pre> 
<p>引用工具栏：</p> 
<pre><code class="prism language-javascript"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">[</span><span class="token string">'bold'</span><span class="token punctuation">,</span> <span class="token string">'italic'</span><span class="token punctuation">,</span> <span class="token string">'underline'</span><span class="token punctuation">,</span> <span class="token string">'strike'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 加粗 斜体 下划线 删除线</span>
              <span class="token comment">//  ['blockquote', 'code-block'], // 引用  代码块</span>
              <span class="token comment">//[{ header: 1 }, { header: 2 }], // 1、2 级标题</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token string">'ordered'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token string">'bullet'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 有序、无序列表</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">'sub'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">'super'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 上标/下标</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token string">'-1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token string">'+1'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 缩进</span>
              <span class="token comment">//  [{ 'direction': 'rtl' }], // 文本方向</span>
              <span class="token comment">//[{ size: ['small', false, 'large', 'huge'] }], // 字体大小</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 标题</span>
              <span class="token comment">//  [{ color: [] }, { background: [] }], // 字体颜色、字体背景颜色</span>
              <span class="token comment">//  [{ font: [] }], // 字体种类</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 对齐方式</span>
              <span class="token punctuation">[</span><span class="token string">'clean'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 清除文本格式</span>
              <span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span> <span class="token comment">// 链接、图片、视频</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token comment">// 内容改变事件</span>
    <span class="token function">onEditorChange</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> contentText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>contentText <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>typeDescribe <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//console.log(this.$refs.editorWrap.getHTML())</span>
        <span class="token comment">//const str = this.$refs.editorWrap.getHTML()</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>typeDescribe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">//this.temp.content = str.replace(/"/g, '\"')</span>
        <span class="token comment">// console.log(this.$refs.editorWrap.getHTML())</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h2><a id="_90"></a>添加汉化功能，鼠标放在图标上会出现提示</h2> 
<p>1.把以下代码添加到options外，return内:</p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">tooltips</span><span class="token operator">:</span> <span class="token punctuation">[</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-bold'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'加粗'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-italic'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'斜体'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-size'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'字体大小'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-underline'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'下划线'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-strike'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'删除线'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-link'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'添加链接'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-image'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'添加图片'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-color'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'字体颜色'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-background'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'背景颜色'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-clean'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'清除格式'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'super'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'上标'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'sub'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'下标'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ordered'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'编号列表'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'bullet'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'项目列表'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'向左缩进'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'+1'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'向右缩进'</span> <span class="token punctuation">}</span>
 <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> 
<p>2.把以下代码放在mounted中：</p> 
<pre><code class="prism language-javascript">   <span class="token keyword">const</span> buttonList <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.ql-toolbar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'button[type="button"]'</span><span class="token punctuation">)</span>
   <span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
   buttonList<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">const</span> currentClass <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span>
     <span class="token keyword">const</span> currentValue <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>
     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> _this<span class="token punctuation">.</span>tooltips<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>choice <span class="token operator">===</span> currentClass<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>choice <span class="token operator">===</span> currentValue<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
         <span class="token keyword">continue</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'span.ql-align .ql-picker-label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'对齐方式'</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'span.ql-align .ql-picker-options .ql-picker-item'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     <span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
         <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'左对齐'</span><span class="token punctuation">)</span>
         <span class="token keyword">break</span>
       <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
         <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'居中对齐'</span><span class="token punctuation">)</span>
         <span class="token keyword">break</span>
       <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
         <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'右对齐'</span><span class="token punctuation">)</span>
         <span class="token keyword">break</span>
       <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
         <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'两端对齐'</span><span class="token punctuation">)</span>
         <span class="token keyword">break</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_149"></a>添加上传图片，支持粘贴</h2> 
<p>由于富文本在上传图片时，默认存储的为base64格式，这样会占用很大的内存空间，通过劫持上传按钮，我们可以自定义上传功能，把地址存储到数据库，并插入image标签，通过图片地址回显。<br> 1、添加上传按钮，并加以隐藏</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 上传图片组件 隐藏 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>el<span class="token operator">-</span>upload
<span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"avatar-uploader"</span>
<span class="token operator">:</span>action<span class="token operator">=</span><span class="token string">"upload.url"</span>
name<span class="token operator">=</span><span class="token string">'upfile'</span>
<span class="token operator">:</span>headers<span class="token operator">=</span><span class="token string">"headerObj"</span><span class="token comment">//可选</span>
<span class="token operator">:</span>show<span class="token operator">-</span>file<span class="token operator">-</span>list<span class="token operator">=</span><span class="token string">"false"</span>
<span class="token operator">:</span>on<span class="token operator">-</span>success<span class="token operator">=</span><span class="token string">"uploadSuccess"</span>
<span class="token operator">:</span>on<span class="token operator">-</span>error<span class="token operator">=</span><span class="token string">"uploadError"</span>
<span class="token operator">:</span>before<span class="token operator">-</span>upload<span class="token operator">=</span><span class="token string">"beforeUpload"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>upload<span class="token operator">&gt;</span>
</code></pre> 
<p>2、在modules中加入以下代码：</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 新增下面</span>
<span class="token literal-property property">imageDrop</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 拖动加载图片组件。</span>
<span class="token literal-property property">imageResize</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//调整大小组件。</span>
  <span class="token literal-property property">displayStyles</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'white'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Resize'</span><span class="token punctuation">,</span> <span class="token string">'DisplaySize'</span><span class="token punctuation">,</span> <span class="token string">'Toolbar'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">clipboard</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 粘贴版，处理粘贴时候带图片</span>
  <span class="token literal-property property">matchers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Node<span class="token punctuation">.</span><span class="token constant">ELEMENT_NODE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleCustomMatcher<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>劫持点击上传图标事件：</p> 
<pre><code class="prism language-javascript"><span class="token literal-property property">handlers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token string-property property">'image'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.avatar-uploader input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Quill<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>3、在mounted中添加以下代码：</p> 
<pre><code class="prism language-javascript"><span class="token comment">//  自定义粘贴图片功能</span>
    <span class="token keyword">const</span> quill <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getQuill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    quill<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
      <span class="token string">'paste'</span><span class="token punctuation">,</span>
      <span class="token parameter">evt</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
          evt<span class="token punctuation">.</span>clipboardData <span class="token operator">&amp;&amp;</span>
          evt<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files <span class="token operator">&amp;&amp;</span>
          evt<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length
        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          evt<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files<span class="token punctuation">,</span> <span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^image\/(gif|jpe?g|a?png|bmp)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">return</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'upfile'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span> <span class="token comment">//后台上传接口的参数名</span>
            <span class="token comment">// 实现上传</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token constant">UPLOAD_IMAGE_PATH</span><span class="token punctuation">,</span> <span class="token comment">// 上传的图片服务器地址</span>
              <span class="token literal-property property">data</span><span class="token operator">:</span> formData<span class="token punctuation">,</span>
              <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">processData</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//设置文件上传的type值，必须</span>
              <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
                  <span class="token comment">// 获取光标所在位置</span>
                  <span class="token keyword">const</span> length <span class="token operator">=</span> quill<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index
                  <span class="token comment">// 插入图片 dt.url为服务器返回的图片地址</span>
                  quill<span class="token punctuation">.</span><span class="token function">insertEmbed</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'image'</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_API_URL</span> <span class="token operator">+</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>filePath<span class="token punctuation">)</span>
                  <span class="token comment">// 调整光标到最后</span>
                  quill<span class="token punctuation">.</span><span class="token function">setSelection</span><span class="token punctuation">(</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'上传失败！'</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
</code></pre> 
<p>4、在methods中添加以下代码：</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 上传前校检格式和大小</span>
    <span class="token function">beforeUpload</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> regArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'.gif'</span><span class="token punctuation">,</span> <span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'.jpeg'</span><span class="token punctuation">,</span> <span class="token string">'.png'</span><span class="token punctuation">]</span>
      <span class="token keyword">const</span> lastName <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>regArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>lastName<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">仅支持.gif/.jpg/.jpeg/.png格式!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 校检文件大小</span>
      <span class="token keyword">const</span> isLt <span class="token operator">=</span> file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">&lt;</span> <span class="token number">5</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">上传文件大小不能超过5MB!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//上传成功或者失败</span>
    <span class="token function">uploadSuccess</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// console.log(res)</span>
      <span class="token comment">// console.log(res.data.filePath)</span>
      <span class="token keyword">const</span> quill <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getQuill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 如果上传成功</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">2000</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>filePath <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取光标所在位置</span>
        <span class="token keyword">const</span> length <span class="token operator">=</span> quill<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index
        <span class="token comment">// 插入图片 dt.url为服务器返回的图片地址</span>
        quill<span class="token punctuation">.</span><span class="token function">insertEmbed</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'image'</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_API_URL</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>filePath<span class="token punctuation">)</span>
        <span class="token comment">// 调整光标到最后</span>
        quill<span class="token punctuation">.</span><span class="token function">setSelection</span><span class="token punctuation">(</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'图片插入失败'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// loading加载隐藏</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>quillUpdateImg <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//上传失败</span>
    <span class="token function">uploadError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'图片插入失败'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleCustomMatcher</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> Delta</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 文字，从别处复制而来，清除自带样式，转为纯文本</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>src <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'data:image/png'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Delta<span class="token punctuation">.</span>ops <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> Delta
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> ops <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      Delta<span class="token punctuation">.</span>ops<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">op</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span>insert <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> op<span class="token punctuation">.</span>insert <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          ops<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">insert</span><span class="token operator">:</span> op<span class="token punctuation">.</span>insert
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span>insert <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> op<span class="token punctuation">.</span>insert<span class="token punctuation">.</span>image <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          ops<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">insert</span><span class="token operator">:</span> op<span class="token punctuation">.</span>insert
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      Delta<span class="token punctuation">.</span>ops <span class="token operator">=</span> ops
      <span class="token keyword">return</span> Delta
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 内容改变事件</span>
    <span class="token function">onEditorChange</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> contentText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>contentText <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>typeDescribe <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//console.log(this.$refs.editorWrap.getHTML())</span>
        <span class="token comment">//const str = this.$refs.editorWrap.getHTML()</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>typeDescribe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">//this.temp.content = str.replace(/"/g, '\"')</span>
        <span class="token comment">// console.log(this.$refs.editorWrap.getHTML())</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h2><a id="_317"></a>完整示例：</h2> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>el<span class="token operator">-</span>form
      <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"rules"</span>
      ref<span class="token operator">=</span><span class="token string">"dataForm"</span>
      <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"temp"</span>
      label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"100px"</span>
      style<span class="token operator">=</span><span class="token string">'width:100%;'</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"上级分类："</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>temp<span class="token punctuation">.</span>parentName<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"分类名称："</span> prop<span class="token operator">=</span><span class="token string">"softwareTypeName"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"temp.softwareTypeName"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入软件分类名称"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"分类说明："</span> prop<span class="token operator">=</span><span class="token string">"typeDescribe"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>textarea v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"temp.typeDescribe"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入分类说明"</span> style<span class="token operator">=</span><span class="token string">"height:80px;width:100%;"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"editor-wrap"</span> id<span class="token operator">=</span><span class="token string">"editor-wrap"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>QuillEditor ref<span class="token operator">=</span><span class="token string">"editorWrap"</span> <span class="token operator">:</span>options<span class="token operator">=</span><span class="token string">"options"</span> theme<span class="token operator">=</span><span class="token string">"snow"</span> @update<span class="token operator">:</span>content<span class="token operator">=</span><span class="token string">"onEditorChange"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 上传图片组件隐藏 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>upload
        <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"avatar-uploader"</span>
        <span class="token operator">:</span>action<span class="token operator">=</span><span class="token string">"upload.url"</span>
        name<span class="token operator">=</span><span class="token string">'upfile'</span>
        <span class="token operator">:</span>headers<span class="token operator">=</span><span class="token string">"headerObj"</span><span class="token comment">//可选</span>
        <span class="token operator">:</span>show<span class="token operator">-</span>file<span class="token operator">-</span>list<span class="token operator">=</span><span class="token string">"false"</span>
        <span class="token operator">:</span>on<span class="token operator">-</span>success<span class="token operator">=</span><span class="token string">"uploadSuccess"</span>
        <span class="token operator">:</span>on<span class="token operator">-</span>error<span class="token operator">=</span><span class="token string">"uploadError"</span>
        <span class="token operator">:</span>before<span class="token operator">-</span>upload<span class="token operator">=</span><span class="token string">"beforeUpload"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>upload<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> QuillEditor<span class="token punctuation">,</span> Quill <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueup/vue-quill'</span>
<span class="token keyword">import</span> <span class="token string">'@vueup/vue-quill/dist/vue-quill.snow.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> mapGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token comment">// import { toRaw } from 'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> <span class="token constant">UPLOAD_IMAGE_PATH</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/BASE_MODULE/upload'</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>
<span class="token keyword">import</span> ImageResize <span class="token keyword">from</span> <span class="token string">'quill-image-resize-module'</span> <span class="token comment">// 调整大小组件。</span>
Quill<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'modules/ImageResize'</span><span class="token punctuation">,</span> ImageResize<span class="token punctuation">)</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ImageDrop <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'quill-image-drop-module'</span>
Quill<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'modules/imageDrop'</span><span class="token punctuation">,</span> ImageDrop<span class="token punctuation">)</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ImageExtend <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'quill-image-paste-module'</span>
Quill<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'modules/ImageExtend'</span><span class="token punctuation">,</span> ImageExtend<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Create'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'drawerCurrent'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">drawerType</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>drawerCurrent<span class="token punctuation">.</span>drawerType
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    QuillEditor
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 用户导入参数</span>
      <span class="token literal-property property">upload</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 设置上传的请求头部</span>
        <span class="token comment">// headers: { Authorization: "Bearer " + getToken() },</span>
        <span class="token comment">// 上传的地址</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token constant">UPLOAD_IMAGE_PATH</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 新增下面</span>
          <span class="token literal-property property">imageDrop</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 拖动加载图片组件。</span>
          <span class="token literal-property property">imageResize</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//调整大小组件。</span>
            <span class="token literal-property property">displayStyles</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
              <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'white'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Resize'</span><span class="token punctuation">,</span> <span class="token string">'DisplaySize'</span><span class="token punctuation">,</span> <span class="token string">'Toolbar'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">clipboard</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 粘贴版，处理粘贴时候带图片</span>
            <span class="token literal-property property">matchers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Node<span class="token punctuation">.</span><span class="token constant">ELEMENT_NODE</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleCustomMatcher<span class="token punctuation">]</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">[</span><span class="token string">'bold'</span><span class="token punctuation">,</span> <span class="token string">'italic'</span><span class="token punctuation">,</span> <span class="token string">'underline'</span><span class="token punctuation">,</span> <span class="token string">'strike'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 加粗 斜体 下划线 删除线</span>
              <span class="token comment">//  ['blockquote', 'code-block'], // 引用  代码块</span>
              <span class="token comment">//[{ header: 1 }, { header: 2 }], // 1、2 级标题</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token string">'ordered'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token string">'bullet'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 有序、无序列表</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">'sub'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">script</span><span class="token operator">:</span> <span class="token string">'super'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 上标/下标</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token string">'-1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">indent</span><span class="token operator">:</span> <span class="token string">'+1'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 缩进</span>
              <span class="token comment">//  [{ 'direction': 'rtl' }], // 文本方向</span>
              <span class="token comment">//[{ size: ['small', false, 'large', 'huge'] }], // 字体大小</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 标题</span>
              <span class="token comment">//  [{ color: [] }, { background: [] }], // 字体颜色、字体背景颜色</span>
              <span class="token comment">//  [{ font: [] }], // 字体种类</span>
              <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 对齐方式</span>
              <span class="token punctuation">[</span><span class="token string">'clean'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 清除文本格式</span>
              <span class="token punctuation">[</span><span class="token string">'image'</span><span class="token punctuation">]</span> <span class="token comment">// 链接、图片、视频</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">handlers</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
              <span class="token string-property property">'image'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.avatar-uploader input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                  <span class="token keyword">this</span><span class="token punctuation">.</span>Quill<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tooltips</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-bold'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'加粗'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-italic'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'斜体'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-size'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'字体大小'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-underline'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'下划线'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-strike'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'删除线'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-link'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'添加链接'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-image'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'添加图片'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-color'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'字体颜色'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-background'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'背景颜色'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ql-clean'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'清除格式'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'super'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'上标'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'sub'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'下标'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'ordered'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'编号列表'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'bullet'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'项目列表'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'-1'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'向左缩进'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">choice</span><span class="token operator">:</span> <span class="token string">'+1'</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'向右缩进'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parentName</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">softwareTypeName</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入软件类型名称'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'名称最大长度50位'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">describe</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'请输入软件类型描述'</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">'change'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 表单内容体</span>
    <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//  自定义粘贴图片功能</span>
    <span class="token keyword">const</span> quill <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getQuill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    quill<span class="token punctuation">.</span>root<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
      <span class="token string">'paste'</span><span class="token punctuation">,</span>
      <span class="token parameter">evt</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>
          evt<span class="token punctuation">.</span>clipboardData <span class="token operator">&amp;&amp;</span>
          evt<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files <span class="token operator">&amp;&amp;</span>
          evt<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files<span class="token punctuation">.</span>length
        <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          evt<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>files<span class="token punctuation">,</span> <span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span>type<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^image\/(gif|jpe?g|a?png|bmp)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">return</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            formData<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'upfile'</span><span class="token punctuation">,</span> file<span class="token punctuation">)</span> <span class="token comment">//后台上传接口的参数名</span>
            <span class="token comment">// 实现上传</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token constant">UPLOAD_IMAGE_PATH</span><span class="token punctuation">,</span> <span class="token comment">// 上传的图片服务器地址</span>
              <span class="token literal-property property">data</span><span class="token operator">:</span> formData<span class="token punctuation">,</span>
              <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">processData</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//设置文件上传的type值，必须</span>
              <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
                  <span class="token comment">// 获取光标所在位置</span>
                  <span class="token keyword">const</span> length <span class="token operator">=</span> quill<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index
                  <span class="token comment">// 插入图片 dt.url为服务器返回的图片地址</span>
                  quill<span class="token punctuation">.</span><span class="token function">insertEmbed</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'image'</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_API_URL</span> <span class="token operator">+</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>filePath<span class="token punctuation">)</span>
                  <span class="token comment">// 调整光标到最后</span>
                  quill<span class="token punctuation">.</span><span class="token function">setSelection</span><span class="token punctuation">(</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'上传失败！'</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">const</span> temp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>drawerCurrent<span class="token punctuation">.</span>params
    <span class="token comment">// console.log(temp)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>drawerType <span class="token operator">===</span> <span class="token string">'CREATE_SECTION'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>temp <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">,</span> temp<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>parentId <span class="token operator">=</span> temp<span class="token punctuation">.</span>parentId
      <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>parentName <span class="token operator">=</span> temp<span class="token punctuation">.</span>parentName
      <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>softwareTypeName <span class="token operator">=</span> temp<span class="token punctuation">.</span>softwareTypeName
      <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>typeDescribe <span class="token operator">=</span> temp<span class="token punctuation">.</span>typeDescribe
      <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>id <span class="token operator">=</span> temp<span class="token punctuation">.</span>id
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">setHTML</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>typeDescribe<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> buttonList <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.ql-toolbar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'button[type="button"]'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
    buttonList<span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> currentClass <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> currentValue <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> _this<span class="token punctuation">.</span>tooltips<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>choice <span class="token operator">===</span> currentClass<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>choice <span class="token operator">===</span> currentValue<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> item<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">continue</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'span.ql-align .ql-picker-label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'对齐方式'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'span.ql-align .ql-picker-options .ql-picker-item'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'左对齐'</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'居中对齐'</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'右对齐'</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
          <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'两端对齐'</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 上传前校检格式和大小</span>
    <span class="token function">beforeUpload</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> regArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'.gif'</span><span class="token punctuation">,</span> <span class="token string">'.jpg'</span><span class="token punctuation">,</span> <span class="token string">'.jpeg'</span><span class="token punctuation">,</span> <span class="token string">'.png'</span><span class="token punctuation">]</span>
      <span class="token keyword">const</span> lastName <span class="token operator">=</span> file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>regArr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>lastName<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">仅支持.gif/.jpg/.jpeg/.png格式!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 校检文件大小</span>
      <span class="token keyword">const</span> isLt <span class="token operator">=</span> file<span class="token punctuation">.</span>size <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">/</span> <span class="token number">1024</span> <span class="token operator">&lt;</span> <span class="token number">5</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">上传文件大小不能超过5MB!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//上传成功或者失败</span>
    <span class="token function">uploadSuccess</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// console.log(res)</span>
      <span class="token comment">// console.log(res.data.filePath)</span>
      <span class="token keyword">const</span> quill <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getQuill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 如果上传成功</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">2000</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>filePath <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取光标所在位置</span>
        <span class="token keyword">const</span> length <span class="token operator">=</span> quill<span class="token punctuation">.</span><span class="token function">getSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index
        <span class="token comment">// 插入图片 dt.url为服务器返回的图片地址</span>
        quill<span class="token punctuation">.</span><span class="token function">insertEmbed</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> <span class="token string">'image'</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_API_URL</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>filePath<span class="token punctuation">)</span>
        <span class="token comment">// 调整光标到最后</span>
        quill<span class="token punctuation">.</span><span class="token function">setSelection</span><span class="token punctuation">(</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'图片插入失败'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// loading加载隐藏</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>quillUpdateImg <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//上传失败</span>
    <span class="token function">uploadError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'图片插入失败'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleCustomMatcher</span><span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span> Delta</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 文字，从别处复制而来，清除自带样式，转为纯文本</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>src <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'data:image/png'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Delta<span class="token punctuation">.</span>ops <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> Delta
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> ops <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      Delta<span class="token punctuation">.</span>ops<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">op</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span>insert <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> op<span class="token punctuation">.</span>insert <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          ops<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">insert</span><span class="token operator">:</span> op<span class="token punctuation">.</span>insert
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>op<span class="token punctuation">.</span>insert <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> op<span class="token punctuation">.</span>insert<span class="token punctuation">.</span>image <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          ops<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">insert</span><span class="token operator">:</span> op<span class="token punctuation">.</span>insert
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      Delta<span class="token punctuation">.</span>ops <span class="token operator">=</span> ops
      <span class="token keyword">return</span> Delta
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 内容改变事件</span>
    <span class="token function">onEditorChange</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> contentText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>contentText <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>typeDescribe <span class="token operator">=</span> <span class="token string">''</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//console.log(this.$refs.editorWrap.getHTML())</span>
        <span class="token comment">//const str = this.$refs.editorWrap.getHTML()</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>temp<span class="token punctuation">.</span>typeDescribe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>editorWrap<span class="token punctuation">.</span><span class="token function">getHTML</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">//this.temp.content = str.replace(/"/g, '\"')</span>
        <span class="token comment">// console.log(this.$refs.editorWrap.getHTML())</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 提交表单</span>
    <span class="token function">submitForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">'dataForm'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 获取表单数据</span>
    <span class="token function">getFormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// console.log(this.temp)</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>temp
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style rel<span class="token operator">=</span><span class="token string">"stylesheet/scss"</span> lang<span class="token operator">=</span><span class="token string">"scss"</span> scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>editor<span class="token operator">-</span>wrap <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> block<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 450px<span class="token punctuation">;</span>

  <span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>container <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">%</span> <span class="token operator">-</span> 80px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>label<span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>item<span class="token operator">:</span><span class="token operator">:</span>before <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'文本'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>label<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"1"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>item<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"1"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'标题1'</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>label<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"2"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>item<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"2"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'标题2'</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>label<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"3"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>item<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"3"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'标题3'</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>label<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"4"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>item<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"4"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'标题4'</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>label<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"5"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>item<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"5"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'标题5'</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>label<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"6"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before<span class="token punctuation">,</span>
<span class="token operator">:</span><span class="token operator">:</span>v<span class="token operator">-</span>deep <span class="token punctuation">.</span>ql<span class="token operator">-</span>snow <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token punctuation">.</span>ql<span class="token operator">-</span>header <span class="token punctuation">.</span>ql<span class="token operator">-</span>picker<span class="token operator">-</span>item<span class="token punctuation">[</span>data<span class="token operator">-</span>value<span class="token operator">=</span><span class="token string">"6"</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token operator">:</span>before <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'标题6'</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/82842c2defb189f629cdfa7db02aea9f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue-devtools浏览器工具打开编辑器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4e83df8e1569aa42a5b0ca4e2b0fffa1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Pycharm&#43;OpenCv的Python环境搭建 - Anaconda环境失败解决方案 - 实践</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
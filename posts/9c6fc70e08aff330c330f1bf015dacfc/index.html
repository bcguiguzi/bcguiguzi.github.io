<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Git回滚文件常用命令汇总 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Git回滚文件常用命令汇总" />
<meta property="og:description" content="1. 修改完，还未执行git add 缓存区没有任何文件时，使用
git checkout . 将暂存区的文件覆盖工作区
执行完 git add . 之后，再执行该命令是无效的，git checkout .和git add .是一对反义词
git checkout(覆盖) 1、只放弃工作区的改动，index 保持不变，其实就是从当前 index 恢复 工作区：
放弃工作区中全部的修改
git checkout . 放弃工作区中某个文件的修改：
git checkout -- filename 2、强制放弃 index 和 工作区 的改动：
git checkout -f 这是不可逆的操作，会直接覆盖，但是还是很有用的，有时候想放弃这些改动，使用svn的时候可以直接把文件删掉再update，但是使用git就不能这么操作，使用 git checkout 可以满足这一点。
git diff（查看差异） git diff 命令，默认查看的就是 工作区 和 暂存区之间文件的差异
2.使用git add 提交到暂存区，还未commit之前 撤销单个文件：
git reset HEAD file(文件名) 撤销多个文件：
git reset HEAD 3.已经git commit，还未git push git reset --hard origin/master 清空暂存区，执行此操作后要重新git add 后重新git commit" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/9c6fc70e08aff330c330f1bf015dacfc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-24T11:10:44+08:00" />
<meta property="article:modified_time" content="2023-02-24T11:10:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Git回滚文件常用命令汇总</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1. 修改完，还未执行git add </span></h4> 
 <p style="">缓存区没有任何文件时，使用</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git checkout . </code></pre> 
 <p style="">将暂存区的文件覆盖工作区</p> 
 <p style="">执行完 git add . 之后，再执行该命令是无效的，git checkout .和git add .是一对反义词</p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">git checkout(覆盖)</span></h4> 
 <p style="text-align:null;">1、只放弃工作区的改动，index 保持不变，其实就是从当前 index 恢复 工作区：</p> 
 <p style="text-align:null;">放弃工作区中全部的修改</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git checkout .</code></pre> 
 <p style="text-align:null;">放弃工作区中某个文件的修改：</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git checkout -- filename</code></pre> 
 <p style="text-align:null;">2、强制放弃 index 和 工作区 的改动：</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git checkout -f</code></pre> 
 <p style="text-align:null;">这是不可逆的操作，会直接覆盖，但是还是很有用的，有时候想放弃这些改动，使用svn的时候可以直接把文件删掉再update，但是使用git就不能这么操作，使用 git checkout 可以满足这一点。</p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">git diff（查看差异）</span></h4> 
 <p style="text-align:null;">git diff 命令，默认查看的就是 工作区 和 暂存区之间文件的差异</p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2.使用git add 提交到暂存区，还未commit之前</span></h4> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">撤销单个文件：</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git reset HEAD file(文件名)</code></pre> 
 <p style="text-align:null;"><span class="kdocs-bold" style="font-weight:bold;">撤销多个文件：</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git reset HEAD</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3.已经git commit，还未git push</span></h4> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git reset --hard origin/master</code></pre> 
 <p style="">清空暂存区，执行此操作后要重新git add 后重新git commit</p> 
 <p style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">撤销commit一般用git reset ，语法如下：</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git reset [ --mixed | --soft | --hard] [&lt;commit ID&gt;]</code></pre> 
 <p style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1.使用参数--mixed(默认参数)，如git reset --mixed &lt;commit ID&gt;或git reset &lt;commit ID&gt;</span></p> 
 <p style="text-align:left;">撤销git commit，撤销git add，保留编辑器改动代码</p> 
 <p style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2.使用参数--soft，如git reset --soft&lt;commit ID&gt;</span></p> 
 <p style="text-align:left;">撤销git commit，不撤销git add，保留编辑器改动代码</p> 
 <p style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">3.使用参数--hard，如git reset --hard &lt;commit ID&gt;——此方式非常暴力，全部撤销，慎用</span></p> 
 <p style="text-align:left;">撤销git commit，撤销git add，删除编辑器改动代码</p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">4.已经git push </span></h4> 
 <p style="">对于已经把代码push到线上仓库,你回退本地代码其实也想同时回退线上代码,<span class="kdocs-bold" style="font-weight:bold;">回滚到某个指定的版本</span>,线上,线下代码保持一致.你要用到下面的命令</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">revert 用于反转提交,执行evert命令时要求工作树必须是干净的.</span></p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git revert</code></pre> 
 <p style="">git revert用一个新提交来消除一个历史提交所做的任何修改.</p> 
 <p style="">revert 之后你的本地代码会回滚到指定的历史版本,这时你再 git push 既可以把线上的代码更新.(这里不会像reset造成冲突的问题)</p> 
 <p style="">revert 使用,需要先找到你想回滚版本唯一的commit标识代码,可以用 git log 或者在adgit搭建的web环境历史提交记录里查看.</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git revert c011eb3c20ba6fb38cc94fe5a8dda366a3990c61</code></pre> 
 <p style="">通常,前几位即可</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git revert c011eb3</code></pre> 
 <p style="">git revert是用一次新的commit来回滚之前的commit，git reset是直接删除指定的commit</p> 
 <p style="">看似达到的效果是一样的,其实完全不同.</p> 
 <p style="">第一:</p> 
 <p style="">上面我们说的如果你已经push到线上代码库, reset 删除指定commit以后,你git push可能导致一大堆冲突.但是revert 并不会.</p> 
 <p style="">第二:</p> 
 <p style="">如果在日后现有分支和历史分支需要合并的时候,reset 恢复部分的代码依然会出现在历史分支里.但是revert 方向提交的commit 并不会出现在历史分支里.</p> 
 <p style="">第三:</p> 
 <p style="">reset 是在正常的commit历史中,删除了指定的commit,这时 HEAD 是向后移动了,而 revert 是在正常的commit历史中再commit一次,只不过是反向提交,他的 HEAD 是一直向前的.</p> 
 <h4 style="">最后</h4> 
 <p style="">git push 发生冲突时，我们可以使用</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git stash</code></pre> 
 <p style="">保存自己修改的代码，然后使用</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git pull</code></pre> 
 <p style="">拉取最新的代码，接着</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">git stash pop</code></pre> 
 <p style="">把自己前面保存的代码拿回来</p> 
 <p style=""></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5d1e56364d2da0754834f535f3de60a8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VSCode安装教程（超详细）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9c6a0afdc2fa2e28a3349d89dce0abfc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt强大控件：Qt-Advanced-Docking-System介绍及使用教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Python] 自动扫雷 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[Python] 自动扫雷" />
<meta property="og:description" content="闲来无事，打开虚拟机上的扫雷玩了玩，觉得自己计算很浪费时间，还容易遗漏，就做了个自动扫雷。
简单模式下很容易通关，困难的就看脸了，感兴趣的可以拿去运行一下。
自动化处理核心代码段在 168~273行。
========================
次日，发现自动扫雷算法并不完整，上次的代码仅对单个数字周围进行判断。
但在一些情况下，单个数字无法判断，要综合一片小区域确定某些方块是否一定是炸弹，或者一定安全。
暂且称为高级算法。（并不是算法有多高级，本质上还是取集合(区域)，进行大量的判断，难在复杂判断的逻辑关系以及集合、字典的操作上）。
通过半天的归纳总结，找到规律后开始设计代码。
本次修改还优化了输出格式，使得在大区域下更容易确定方块的坐标。
【代码中一些重复的地方可以提取出来作为单独的方法，通过改变参数位置来实现相同的功能，让代码看上去更精简】
【但长时间的修改代码，随着变量、变量类型、数据结构嵌套和逻辑关系的不断增加，有点被搞得头晕了】
【所以既然运行上没有错误，多次试验也没有发现毛病，就不去管它了。说不定也是靠着什么bug运行起来了呢】
【事实上最初写出来的高级算法代码还多了一个子模块，这个模块在一次高级算法结束之后进行进一步处理】
【在设计算法的时候，考虑到这样能减少遍历游戏窗口的次数，加快运行速度，并且可以确定更多的更复杂的坐标及操作】
【虽然写好代码之后第一次运行全自动困难模式顺利通关，但在后来的几次测试中总会错把炸弹点开😭】
【而且计算出的坐标我实在是看不懂根据什么条件算出来的，修改多次无果，想着是不是算法最初处理的时候就是错误的】
【把这段代码注释掉之后，多次测试，没有任何错误，而且计算出来的坐标和操作都是正确的！计算不出来的时候，我看着也是无法确定哪个方块安全】
【这种情况下只能靠运气随机选择。所以上文说到，说不定是靠着什么bug运行起来的呢。】 教学时间：
咱都上榜一了，咋能不出个教学呢。
（绿色底为算法讲解，蓝色底为举例说明，无色底、算是旁白或设计算法的过程吧。）
首先介绍下扫雷的冷知识：
扫雷上面数字的意思是该方块周围八格方块中的雷的个数。
有时候点一下会开一大片。是因为点到了数字0。0周围没有方块，游戏会自动向四周扩散，直到有数字的方块停止。（0向四周扩散是不可能遇到雷的）
这段“点到0向四周扩散”的代码在141~150行，通过126-128行进入。通过非常简单的递归实现的，遍历一遍0方块周围的方块，是数字就显示数字，是0就再次调用该方法，传入该位置。这段代码可以优化，但重点是自动扫雷。
生成一局扫雷的方法：（对应代码43 ~ 63行）
先生成指定大小（m×n）的空间。我在这里用了二维数组表示，初始化全为0，程序中变量名为game_space， 然后随机k(k个雷)个不同坐标，用’‘表示雷，记录在数组中。
然后遍历一下每个雷的周围八个格子，如果不是字符’‘，则&#43;1。生成完成。（可以验证，数字与周围雷的数量都是匹配的）
可能有同学会质疑，既然game_space列表已经记录了雷的位置，那还有啥扫的？
实际上，扫雷游戏就是提前生成好的游戏棋盘数据，然后在每个格子上都盖上盖子而已。这里表示顶层盖子的列表是show_list。
所有的操作都在show_list列表上，game_space列表仅用于点击show_list列表时进行数据补充。相当于掀开了外层的盖子，露出了里面的内容。
自动扫雷：
自动扫雷就是一个模拟玩家扫雷的过程。你开一局扫雷，第一个肯定是要随便点的。如果运气爆棚，是可以直接点到雷结束该局游戏的。
点到数字一般也不会是8。一般都是从点到0开始才能判断哪里是雷，哪里是安全的。
这里开一局“简单”模式的扫雷，8*8大小，10个雷。用于举例说明。（顺带一提，我写的输出格式在pycharm里输出是整齐的。没有在IDLE里测试过。这里粘贴过来■就比数字宽些）
随机选择【4, 3】点开
Game Over!
1│ ■ ■ ■ ■ ■ ■ ■ ■
2│ ■ ■ ■ ■ ■ ■ ■ ■
3│ ■ ■ ■ ■ ■ ■ ■ ■" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/d00e375f9b13a8a99627a24419578df6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-03T09:42:52+08:00" />
<meta property="article:modified_time" content="2021-12-03T09:42:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Python] 自动扫雷</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>闲来无事，打开虚拟机上的扫雷玩了玩，觉得自己计算很浪费时间，还容易遗漏，就做了个自动扫雷。<br> 简单模式下很容易通关，困难的就看脸了，感兴趣的可以拿去运行一下。<br> 自动化处理核心代码段在 168~273行。</p> 
<h2><a id="%0A%0A%0A%0A%0A%0A%0A%0Abug%0A%0A%0A128557%0A%0A%0Abug_5"></a>========================<br> 次日，发现自动扫雷算法并不完整，上次的代码仅对单个数字周围进行判断。<br> 但在一些情况下，单个数字无法判断，要综合一片小区域确定某些方块是否一定是炸弹，或者一定安全。<br> 暂且称为高级算法。（并不是算法有多高级，本质上还是取集合(区域)，进行大量的判断，难在复杂判断的逻辑关系以及集合、字典的操作上）。<br> 通过半天的归纳总结，找到规律后开始设计代码。<br> <strong>本次修改还优化了输出格式，使得在大区域下更容易确定方块的坐标。</strong><br> 【代码中一些重复的地方可以提取出来作为单独的方法，通过改变参数位置来实现相同的功能，让代码看上去更精简】<br> 【但长时间的修改代码，随着变量、变量类型、数据结构嵌套和逻辑关系的不断增加，有点被搞得头晕了】<br> 【所以既然运行上没有错误，多次试验也没有发现毛病，就不去管它了。说不定也是靠着什么bug运行起来了呢】<br> 【事实上最初写出来的高级算法代码还多了一个子模块，这个模块在一次高级算法结束之后进行进一步处理】<br> 【在设计算法的时候，考虑到这样能减少遍历游戏窗口的次数，加快运行速度，并且可以确定更多的更复杂的坐标及操作】<br> 【虽然写好代码之后第一次运行全自动困难模式顺利通关，但在后来的几次测试中总会错把炸弹点开😭】<br> 【而且计算出的坐标我实在是看不懂根据什么条件算出来的，修改多次无果，想着是不是算法最初处理的时候就是错误的】<br> 【把这段代码注释掉之后，多次测试，没有任何错误，而且计算出来的坐标和操作都是正确的！计算不出来的时候，我看着也是无法确定哪个方块安全】<br> 【这种情况下只能靠运气随机选择。所以上文说到，说不定是靠着什么bug运行起来的呢。】</h2> 
<p>教学时间：<br> 咱都上榜一了，咋能不出个教学呢。<br> （绿色底为算法讲解，蓝色底为举例说明，无色底、算是旁白或设计算法的过程吧。）</p> 
<p>首先介绍下扫雷的冷知识：<br> 扫雷上面数字的意思是该方块周围八格方块中的雷的个数。<br> 有时候点一下会开一大片。是因为点到了数字0。0周围没有方块，游戏会自动向四周扩散，直到有数字的方块停止。（0向四周扩散是不可能遇到雷的）<br> 这段“点到0向四周扩散”的代码在141~150行，通过126-128行进入。通过非常简单的递归实现的，遍历一遍0方块周围的方块，是数字就显示数字，是0就再次调用该方法，传入该位置。这段代码可以优化，但重点是自动扫雷。</p> 
<p>生成一局扫雷的方法：（对应代码43 ~ 63行）<br> 先生成指定大小（m×n）的空间。我在这里用了二维数组表示，初始化全为0，程序中变量名为game_space， 然后随机k(k个雷)个不同坐标，用’<em>‘表示雷，记录在数组中。<br> 然后遍历一下每个雷的周围八个格子，如果不是字符’</em>‘，则+1。生成完成。（可以验证，数字与周围雷的数量都是匹配的）<br> 可能有同学会质疑，既然game_space列表已经记录了雷的位置，那还有啥扫的？<br> 实际上，扫雷游戏就是提前生成好的游戏棋盘数据，然后在每个格子上都盖上盖子而已。这里表示顶层盖子的列表是show_list。<br> 所有的操作都在show_list列表上，game_space列表仅用于点击show_list列表时进行数据补充。相当于掀开了外层的盖子，露出了里面的内容。</p> 
<p>自动扫雷：<br> 自动扫雷就是一个模拟玩家扫雷的过程。你开一局扫雷，第一个肯定是要随便点的。如果运气爆棚，是可以直接点到雷结束该局游戏的。<br> 点到数字一般也不会是8。一般都是从点到0开始才能判断哪里是雷，哪里是安全的。<br> 这里开一局“简单”模式的扫雷，8*8大小，10个雷。用于举例说明。（顺带一提，我写的输出格式在pycharm里输出是整齐的。没有在IDLE里测试过。这里粘贴过来■就比数字宽些）<br> 随机选择【4, 3】点开</p> 
<p>Game Over!<br> 1│ ■ ■ ■ ■ ■ ■ ■ ■<br> 2│ ■ ■ ■ ■ ■ ■ ■ ■<br> 3│ ■ ■ ■ ■ ■ ■ ■ ■<br> 4│ ■ ■ * ■ ■ ■ ■ ■<br> 5│ ■ ■ ■ ■ ■ ■ ■ ■<br> 6│ ■ ■ ■ ■ ■ ■ ■ ■<br> 7│ ■ ■ ■ ■ ■ ■ ■ ■<br> 8│ ■ ■ ■ ■ ■ ■ ■ ■<br> 运气爆棚，一发入魂。 再开一局。<br> 再开N局。<br> 无法确定位置，随机选择【2, 1】点开<br> 无法确定位置，随机选择【4, 8】点开</p> 
<p>1│ ■ ■ ■ ■ ■ ■ 1 0<br> 2│ 1 ■ ■ ■ ■ ■ 1 0<br> 3│ ■ ■ ■ ■ ■ 1 1 0<br> 4│ ■ ■ ■ ■ ■ 1 0 0<br> 5│ ■ ■ ■ ■ ■ 3 1 1<br> 6│ ■ ■ ■ ■ ■ ■ ■ ■<br> 7│ ■ ■ ■ ■ ■ ■ ■ ■<br> 8│ ■ ■ ■ ■ ■ ■ ■ ■<br> 这里我们可以通过【行3列7】（以下使用形如【3，7】表示）确定【2，6】是雷，因为【3，7】周围只有【2，6】没有点开，而【3，7】周围只有一个雷。<br> 给【2，6】插上旗子之后，又可以通过【1，7】判断【1，6】是安全的，可以点开；可以通过【3，6】判断【2，5】【3，5】【4，5】是安全的。<br> 【2，5】【3，5】【4，5】点开后 又可以通过【4，6】判断【5，5】是雷。</p> 
<p>自动算法说明：（该段代码在174-198行）。<br> 扫雷棋盘使用二维数组表示，首先通过两层循环遍历，找到一个大于0的数字，使用一个变量’z‘记录这个数字。<br> 再遍历一下该数字周围的八格格子，这里我又使用了两层循环实现。（代码在178-180行，要确保坐标不超界）。<br> 在遍历过程中，若发现插了旗子‘□’的格子，则让z - 1，表示z周围已经确定了1个雷，所以还剩z - 1个雷。<br> 如果发现了还没有点开过的格子’■‘，则记录该坐标。（代码中用类变量coordinate_list列表记录）<br> 八个格子遍历完成后，若 z 等于 0， 则说明coordinate_list列表中记录的’■‘格子都是安全的，可以点击，于是将coordinate_list列表中的每个坐标后记录可以点击（即操作1），返回。<br> 若z 等于 coordinate_list列表的长度，则可以确定coordinate_list列表中记录的’■‘格子都是雷 ，给这些坐标记录上插旗操作（即操作0），返回。<br> 剩下的情况就是coordinate_list列表长度 大于 z了，这种情况无法确定记录的格子是什么东西，则清空coordinate_list列表， 继续循环，寻找下个数字进行这套操作。<br> 注意到z = 0时，coordinate_list列表可能为空，所以要在返回前判断coordinate_list列表非空。（代码194行）<br> 返回的只是列表中的一个坐标及操作，若列表中有多个坐标，要全部进行相应操作。对应代码（168-172行）<br> （这段代码）</p> 
<p>还可以通过综合一个区域判断【6，5】【6，7】一定是雷，因为【5，6】周围有3个雷，【5，5】是1个，剩下两个在【6，5】【6，6】【6，7】中；<br> 而通过【5，7】可知【6，6】【6，7】【6，8】中只有1个雷，所以【6，5】一定是雷。又由【5，8】可知【6，7】【6，8】中有1个雷，<br> 所以【6，7】一定是雷，【6，6】【6，8】安全。若存在疑惑，可通过假设法假设【6，6】或【6，8】是雷，通过推导出雷周围的数字与数字周围的雷数不符合，得到验证。<br> 这里就是上面提到的“高级算法”，会在下文中详细介绍算法（就是一堆复杂的数据结构和逻辑判断）。</p> 
<p>这里只是说明了通过现在的局面可以判断到的格子，在自动扫雷程序中是按行先遍历的，不一定就是按我说的这些去依次点开，可能点开【1，6】后又能判断出【1，6】周围的格子是安全的了。<br> （顺带一提，有🚩图文字，但是宽度和方块、数字不一样，为了输出排版，就换成了白色方块□ 代替🚩。大家也可以修改代码，将所有字符、数字换成全角。）<br> 让我们继续游戏：（操作0是插旗的意思，操作1是点开的意思）</p> 
<h2><a id="2_6_0%0A1_6_1%0A1____________1___1___0__%0A2_1_______________1___0__%0A3____________1___1___0__%0A4____________1___0___0__%0A5____________3___1___1__%0A6_________________%0A7_________________%0A8_________________%0A1616261525%0A%0A2_5_1%0A1_5_1%0A%0A%0A1__0___0___1______2___1___1___0__%0A2__1___1___2___1___2______1___0__%0A3__2______2___0___1___1___1___0__%0A4__2______2___1___1___1___0___0__%0A5__2___2___1___2______3___1___1__%0A6_____1___0___3___________%0A7__2___2___1___2______3___1___1__%0A8__1______1___1___1___1___0___0__%0A%0A%0A________681%0A________661_93"></a>选定位置【2, 6】, 操作为：0<br> 选定位置【1, 6】, 操作为：1<br> 1│ ■ ■ ■ ■ ■ 1 1 0<br> 2│ 1 ■ ■ ■ ■ □ 1 0<br> 3│ ■ ■ ■ ■ ■ 1 1 0<br> 4│ ■ ■ ■ ■ ■ 1 0 0<br> 5│ ■ ■ ■ ■ ■ 3 1 1<br> 6│ ■ ■ ■ ■ ■ ■ ■ ■<br> 7│ ■ ■ ■ ■ ■ ■ ■ ■<br> 8│ ■ ■ ■ ■ ■ ■ ■ ■<br> 在这里插入扫雷列表，是因为点开【1，6】后可通过【1，6】【2，6】判断【1，5】【2，5】安全，已经和我上面所述的操作路径不同了。<br> 下面我不在详细展示，让我们直接快进到需要重要介绍的位置。<br> 选定位置【2, 5】, 操作为：1<br> 选定位置【1, 5】, 操作为：1<br> ……<br> ……<br> 1│ 0 0 1 □ 2 1 1 0<br> 2│ 1 1 2 1 2 □ 1 0<br> 3│ 2 □ 2 0 1 1 1 0<br> 4│ 2 □ 2 1 1 1 0 0<br> 5│ 2 2 1 2 □ 3 1 1<br> 6│ □ 1 0 3 □ ■ ■ ■<br> 7│ 2 2 1 2 □ 3 1 1<br> 8│ 1 □ 1 1 1 1 0 0<br> 调用高级计算处理，请等候…<br> 计算完成!生成操作:<br> 坐标【6，8】，操作：1<br> 坐标【6，6】，操作：1</h2> 
<p>选定位置【6, 6】, 操作为：1<br> 选定位置【6, 8】, 操作为：1<br> 选定位置【6, 7】, 操作为：0<br> 可以看到，通过上面简单的计算，已经快将游戏解完了。在简单模式下，多数情况根本用不上高级计算，这局游戏是开了许多局才调用到了高级算法代码，就算没有高级算法，也可以通过随机方法随机一个坐标点开，有2/3的概率是数字，只要点开一个是数字，就可以确定最后一个雷的位置了。</p> 
<p>可由【5，8】知道【6，7】【6，8】中有1个雷，由【5，7】知道 【6，6】【6，7】【6，8】中有1个雷，所以【6，6】一定是安全的，可以点开。<br> 可由【5，6】得知【6，6】【6，7】中有1个雷，综合【5，7】，可以确定【6，8】是安全的，可以点开。<br> 这就是需要通过综合一片区域才能确定的，用代码实现确实比较复杂。<br> 高级算法说明：（代码在228~273行，通过202行调用）<br> 要将这种思想转化为代码，就要先总结他们共有的特征，就是找规律。规律是：求差集。<br> 这里要用到python的 字典、集合、元组、列表。<br> 首先，我将游戏输出列表show_list做了一个处理，把所有&gt;0的数字减去他们周围已经插旗的个数，结果保存在了processed_list列表中。（代码229~247行）<br> 在处理之前 要先创建一个空的集合c（代码238行），在遍历数字周围八个方格时，如果遇到没有打开的方格’■‘，则在c中记录该方格坐标。这里，我们相当于得到了一个区域。<br> 遍历完八个方格之后，如果集合c非空，那么处理的数字一定还&gt;0，将集合c转变为元组，作为字典的键，处理后的数字做为该键对应的值。（字典名为set_dic）<br> 对上面的示例，该操作能得到：<br> 1│ 0 0 0 □ 0 0 0 0<br> 2│ 0 0 0 0 0 □ 0 0<br> 3│ 0 □ 0 0 0 0 0 0<br> 4│ 0 □ 0 0 0 0 0 0<br> 5│ 0 0 0 0 □ 1 1 1<br> 6│ □ 0 0 0 □ ■ ■ ■<br> 7│ 0 0 0 0 □ 1 1 1<br> 8│ 0 □ 0 0 0 0 0 0<br> 并得到字典set_dic = {((6, 6), (6, 7)) : 1, ((6, 6), (6, 7), (6, 8)) : 1, ((6, 7), (6, 8)) : 1} 【解释下为什么要将集合c转化为元组，因为集合是可变数据类型，属于非可哈希类型，无法作为字典的键。】<br> 之后就是对字典的两层循环：取其中一个键，（取完键之后首先转变为集合类型，通过集合类型自带的判断子集的方法），与其他键做判断是否为子集。<br> 如果是子集，即可求差集，并求这两个键对应值的差。如果值的差为0，说名求得的差集中的坐标是安全的，可以打开；如果值的差非零，如果值得差等于差集的长度，说明差集中的坐标一定是雷，需要插旗。（代码249~273）<br> 对应上面的示例，集合a = {(6, 6), (6, 7)} 是 集合b = {(6, 6), (6, 7), (6, 8)}的子集， 求差集 b - a 得到差集{(6, 8)}, 差值为0，说明坐标（6，8）的方格’■‘是安全的。<br> 之后就是将元组（6，8）转换为列表[6, 8]，加入操作码得到[6, 8, 1]，加入到操作列表 coordinate_list 中。</p> 
<p>讲解结束。这也不算难，也得益于python本身的优势。如果用其他语言，还要定义大量结构体，或无休止的取值赋值。</p> 
<h2><a id="bug%0A_coordinate_list__coordinate_list_%0Abug_1002003000bug_156"></a>这里顺便说个bug，代码中在得到差集和差值后，加入操作列表的时候没有判断要插入的数据是否已经存在。因为可能通过不同的集合判断得到同一个差集，如果是点击操作还好，点击过后该方块不能再进行其他操作，但如果是插旗，那么插旗之后再插旗就是取消插旗。<br> 而操作完成之后，下次高级判断可能还会得到两次相同坐标的插旗操作，那么程序将进入无线循环。所以可以将 coordinate_list 列表变成集合类型，集合本身不允许重复，或者在向 coordinate_list 列表加入数据前前进行一个重复判断。<br> 这个bug是在测试 行100，列200，雷3000的游戏中发现的bug。小规模一般不会遇到。</h2> 
<p>【可以将带有注释的time.sleep代码给打开，在括号内设置合适的时长，可以看到自动扫雷的过程】<br> 代码【】</p> 
<pre><code class="prism language-bash"><span class="token function">import</span> random
<span class="token function">import</span> <span class="token function">time</span>
 
 
class SaoLei:
    m: int
    n: int
    k: int
    mode: int
    coordinate_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    game_space: list<span class="token punctuation">[</span>list<span class="token punctuation">[</span>int or str<span class="token punctuation">]</span><span class="token punctuation">]</span>
 
    def __init__<span class="token punctuation">(</span>self, m: int, n: int, k: int, mode: int<span class="token punctuation">)</span>:
        <span class="token string">""</span>"
        初始化游戏
        :param m: m行, m <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">8</span>
        :param n: n列, n <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">8</span>
        :param k: k个雷, <span class="token number">10</span> <span class="token operator">&lt;</span><span class="token operator">=</span> k <span class="token operator">&lt;</span><span class="token operator">=</span> m*n*0.3
        :param mode: <span class="token number">0</span>：手动模式，1：全自动模式 <span class="token number">2</span>：半自动模式
        <span class="token string">""</span>"
        <span class="token keyword">if</span> m <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">8</span>:
            self.m <span class="token operator">=</span> m
        else:
            print<span class="token punctuation">(</span><span class="token string">"row Error!"</span><span class="token punctuation">)</span>
            exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> n <span class="token operator">&gt;</span><span class="token operator">=</span> <span class="token number">8</span>:
            self.n <span class="token operator">=</span> n
        else:
            print<span class="token punctuation">(</span><span class="token string">"col Error!"</span><span class="token punctuation">)</span>
            exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token number">10</span> <span class="token operator">&lt;</span><span class="token operator">=</span> k <span class="token operator">&lt;</span><span class="token operator">=</span> m * n * <span class="token number">0.3</span>:
            self.k <span class="token operator">=</span> k
            self.flag <span class="token operator">=</span> self.k
        else:
            print<span class="token punctuation">(</span><span class="token string">"k Error!"</span><span class="token punctuation">)</span>
            exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> mode <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">)</span>:
            self.mode <span class="token operator">=</span> mode
        else:
            print<span class="token punctuation">(</span><span class="token string">"Mode Error!"</span><span class="token punctuation">)</span>
            exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
 
        <span class="token comment"># 生成区域</span>
        self.game_space <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> <span class="token for-or-select variable">_</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> <span class="token for-or-select variable">_</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">]</span>
        print<span class="token punctuation">(</span><span class="token string">"game_space create success!"</span><span class="token punctuation">)</span>
 
        <span class="token comment"># 随机雷的位置</span>
        i <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">while</span> i <span class="token operator">&lt;</span> self.k:
            a <span class="token operator">=</span> random.randint<span class="token punctuation">(</span><span class="token number">0</span>, m - <span class="token number">1</span><span class="token punctuation">)</span>
            b <span class="token operator">=</span> random.randint<span class="token punctuation">(</span><span class="token number">0</span>, n - <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self.game_space<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'*'</span><span class="token builtin class-name">:</span>
                i <span class="token operator">+=</span> <span class="token number">1</span>
 
                <span class="token comment"># 产生数据</span>
                self.game_space<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'*'</span>
                c <span class="token operator">=</span> <span class="token punctuation">[</span>-1, <span class="token number">0</span>, <span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token keyword">for</span> <span class="token for-or-select variable">x</span> <span class="token keyword">in</span> c:
                    <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> a + x <span class="token operator">&lt;</span> m:
                        <span class="token keyword">for</span> <span class="token for-or-select variable">y</span> <span class="token keyword">in</span> c:
                            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> b + y <span class="token operator">&lt;</span> n:
                                <span class="token keyword">if</span> self.game_space<span class="token punctuation">[</span>a + x<span class="token punctuation">]</span><span class="token punctuation">[</span>b + y<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'*'</span><span class="token builtin class-name">:</span>
                                    self.game_space<span class="token punctuation">[</span>a + x<span class="token punctuation">]</span><span class="token punctuation">[</span>b + y<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
 
        <span class="token comment"># 调用游戏进程</span>
        self.game_window<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
    def game_window<span class="token punctuation">(</span>self<span class="token punctuation">)</span>:
        show_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'■'</span> <span class="token keyword">for</span> <span class="token for-or-select variable">_</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.n<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> <span class="token for-or-select variable">_</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.m<span class="token punctuation">)</span><span class="token punctuation">]</span>
        text <span class="token operator">=</span> <span class="token string">''</span>
        <span class="token keyword">while</span> True:
            <span class="token comment"># 输出画面</span>
            <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>:
                print<span class="token punctuation">(</span><span class="token punctuation">)</span>
            print<span class="token punctuation">(</span>text<span class="token punctuation">)</span>
            print<span class="token punctuation">(</span><span class="token string">"+++"</span> * self.n, <span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token string">'+<span class="token entity" title="\n">\n</span>'</span><span class="token punctuation">)</span>
            print<span class="token punctuation">(</span><span class="token string">' │ '</span>, <span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token for-or-select variable">k</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span>, self.n + <span class="token number">1</span><span class="token punctuation">)</span>:
                print<span class="token punctuation">(</span><span class="token string">'%d'</span> % <span class="token punctuation">(</span>k % <span class="token number">10</span><span class="token punctuation">)</span>, <span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token string">'  '</span><span class="token punctuation">)</span>
            print<span class="token punctuation">(</span><span class="token string">'<span class="token entity" title="\n">\n</span>─┼─'</span>, <span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
            print<span class="token punctuation">(</span><span class="token string">'───'</span> * <span class="token punctuation">(</span>self.n - <span class="token number">1</span><span class="token punctuation">)</span>, <span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token string">'─<span class="token entity" title="\n">\n</span>'</span><span class="token punctuation">)</span>
            k <span class="token operator">=</span> <span class="token number">1</span>
            <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.m<span class="token punctuation">)</span>:
                print<span class="token punctuation">(</span>k, <span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token string">'│ '</span><span class="token punctuation">)</span>
                <span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.n<span class="token punctuation">)</span>:
                    print<span class="token punctuation">(</span>show_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>, <span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token string">'  '</span><span class="token punctuation">)</span>
                print<span class="token punctuation">(</span><span class="token punctuation">)</span>
                k <span class="token operator">=</span> <span class="token punctuation">(</span>k + <span class="token number">1</span><span class="token punctuation">)</span> % <span class="token number">10</span>
            <span class="token keyword">if</span> text <span class="token operator">==</span> <span class="token string">'Game Over!'</span><span class="token builtin class-name">:</span>
                exit<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
            text <span class="token operator">=</span> <span class="token string">''</span>
 
            <span class="token comment"># 检测是否结束</span>
            row <span class="token operator">=</span> self.m
            <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> show_list:
                <span class="token keyword">if</span> <span class="token string">'■'</span> not <span class="token keyword">in</span> i:
                    row -<span class="token operator">=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> row <span class="token operator">==</span> <span class="token number">0</span>:
                print<span class="token punctuation">(</span><span class="token string">'Victory!'</span><span class="token punctuation">)</span>
                exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
 
            <span class="token comment"># 输入坐标及操作</span>
            <span class="token keyword">if</span> self.mode <span class="token operator">==</span> <span class="token number">0</span>:
                a, b, c <span class="token operator">=</span> self.input_set<span class="token punctuation">(</span><span class="token punctuation">)</span>
            else:
                a, b, c <span class="token operator">=</span> self.automatic_input<span class="token punctuation">(</span>show_list<span class="token punctuation">)</span>
 
            <span class="token comment"># 进行处理</span>
            <span class="token keyword">if</span> c <span class="token operator">==</span> <span class="token number">0</span>:
                <span class="token keyword">if</span> self.flag <span class="token operator">&gt;</span> <span class="token number">0</span>:
                    <span class="token keyword">if</span> show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'■'</span><span class="token builtin class-name">:</span>
                        show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'□'</span>
                        self.flag -<span class="token operator">=</span> <span class="token number">1</span>
                    <span class="token keyword">elif</span> show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'□'</span><span class="token builtin class-name">:</span>
                        show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'■'</span>
                        self.flag <span class="token operator">+=</span> <span class="token number">1</span>
                    else:
                        text <span class="token operator">=</span> <span class="token string">'Error! Is number'</span>
                else:
                    text <span class="token operator">=</span> <span class="token string">'Error! No flag'</span>
            <span class="token keyword">elif</span> c <span class="token operator">==</span> <span class="token number">1</span>:
                <span class="token keyword">if</span> show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'■'</span><span class="token builtin class-name">:</span>
                    <span class="token keyword">if</span> self.game_space<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'*'</span><span class="token builtin class-name">:</span>
                        show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'*'</span>
                        text <span class="token operator">=</span> <span class="token string">'Game Over!'</span>
                    <span class="token keyword">elif</span> self.game_space<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span>:
                        show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> self.game_space<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span>
                        self.look_zero<span class="token punctuation">(</span>a, b, show_list<span class="token punctuation">)</span>
                    else:
                        show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> self.game_space<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span>
                else:
                    text <span class="token operator">=</span> <span class="token string">'Error! No Click'</span>
            <span class="token keyword">elif</span> c <span class="token operator">==</span> <span class="token number">2</span>:
                <span class="token keyword">if</span> show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'■'</span><span class="token builtin class-name">:</span>
                    show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'?'</span>
                <span class="token keyword">elif</span> show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'?'</span><span class="token builtin class-name">:</span>
                    show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'■'</span>
                else:
                    text <span class="token operator">=</span> <span class="token string">'Error! Open'</span>
 
    def look_zero<span class="token punctuation">(</span>self, a: int, b: int, show_list<span class="token punctuation">)</span>:
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>a - <span class="token number">1</span>, a + <span class="token number">2</span><span class="token punctuation">)</span>:
            <span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>b - <span class="token number">1</span>, b + <span class="token number">2</span><span class="token punctuation">)</span>:
                <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> i <span class="token operator">&lt;</span> self.m and <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> j <span class="token operator">&lt;</span> self.n:
                    <span class="token keyword">if</span> show_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'■'</span><span class="token builtin class-name">:</span>
                        <span class="token keyword">if</span> self.game_space<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span>:
                            show_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
                            self.look_zero<span class="token punctuation">(</span>i, j, show_list<span class="token punctuation">)</span>
                        else:
                            show_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> self.game_space<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
 
    def input_set<span class="token punctuation">(</span>self<span class="token punctuation">)</span>:
        a <span class="token operator">=</span> int<span class="token punctuation">(</span>input<span class="token punctuation">(</span><span class="token string">"输入行："</span><span class="token punctuation">))</span>
        b <span class="token operator">=</span> int<span class="token punctuation">(</span>input<span class="token punctuation">(</span><span class="token string">"输入列："</span><span class="token punctuation">))</span>
        c <span class="token operator">=</span> int<span class="token punctuation">(</span>input<span class="token punctuation">(</span><span class="token string">"操作（0：插旗； 1：点击； 2：标记）："</span><span class="token punctuation">))</span>
        <span class="token keyword">if</span> not <span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">&lt;</span> a <span class="token operator">&lt;</span><span class="token operator">=</span> self.m and <span class="token number">0</span> <span class="token operator">&lt;</span> b <span class="token operator">&lt;</span><span class="token operator">=</span> self.n and c <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">0</span>, <span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">))</span>:
            a, b, c <span class="token operator">=</span> self.input_set<span class="token punctuation">(</span><span class="token punctuation">)</span>
            a <span class="token operator">+=</span> <span class="token number">1</span>
            b <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token builtin class-name">return</span> a - <span class="token number">1</span>, b - <span class="token number">1</span>, c
 
    def automatic_input<span class="token punctuation">(</span>self, show_list: list<span class="token punctuation">[</span>list<span class="token punctuation">]</span>
 
 
<span class="token punctuation">)</span>:
        <span class="token string">""</span>"
        自动化方法
        :param show_list:
        :return:a,b,c
        <span class="token string">""</span>"
        <span class="token keyword">if</span> self.coordinate_list:
            a <span class="token operator">=</span> self.coordinate_list.pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
            print<span class="token punctuation">(</span><span class="token string">"选定位置【%d, %d】, 操作为：%d"</span> % <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> + <span class="token number">1</span>, a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> + <span class="token number">1</span>, a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">))</span>
            <span class="token comment"># time.sleep(0.5)</span>
            <span class="token builtin class-name">return</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>, a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>, a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
 
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.m<span class="token punctuation">)</span>:
            <span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.n<span class="token punctuation">)</span>:
                <span class="token keyword">if</span> type<span class="token punctuation">(</span>show_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> is not str and show_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span>:
                    z <span class="token operator">=</span> show_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
                    <span class="token keyword">for</span> <span class="token for-or-select variable">x</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>i - <span class="token number">1</span>, i + <span class="token number">2</span><span class="token punctuation">)</span>:
                        <span class="token keyword">for</span> <span class="token for-or-select variable">y</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>j - <span class="token number">1</span>, j + <span class="token number">2</span><span class="token punctuation">)</span>:
                            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> x <span class="token operator">&lt;</span> self.m and <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> y <span class="token operator">&lt;</span> self.n:
                                <span class="token keyword">if</span> show_list<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'□'</span><span class="token builtin class-name">:</span>
                                    z -<span class="token operator">=</span> <span class="token number">1</span>
                                <span class="token keyword">elif</span> show_list<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'■'</span><span class="token builtin class-name">:</span>
                                    self.coordinate_list.append<span class="token punctuation">(</span><span class="token punctuation">[</span>x, y<span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token keyword">if</span> z <span class="token operator">==</span> <span class="token number">0</span>:
                        <span class="token keyword">for</span> <span class="token for-or-select variable">p</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>self.coordinate_list<span class="token punctuation">))</span>:
                            self.coordinate_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span>.append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> z <span class="token operator">==</span> len<span class="token punctuation">(</span>self.coordinate_list<span class="token punctuation">)</span>:
                        <span class="token keyword">for</span> <span class="token for-or-select variable">p</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>self.coordinate_list<span class="token punctuation">))</span>:
                            self.coordinate_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span>.append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                    else:
                        self.coordinate_list.clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
                    <span class="token keyword">if</span> self.coordinate_list:
                        a <span class="token operator">=</span> self.coordinate_list.pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
                        print<span class="token punctuation">(</span><span class="token string">"选定位置【%d, %d】, 操作为：%d"</span> % <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> + <span class="token number">1</span>, a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> + <span class="token number">1</span>, a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">))</span>
                        <span class="token comment"># time.sleep(0.5)</span>
                        <span class="token builtin class-name">return</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>, a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>, a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
 
        <span class="token comment"># 进入高级计算</span>
        print<span class="token punctuation">(</span><span class="token string">"调用高级计算处理，请等候..."</span><span class="token punctuation">)</span>
        self.advanced_automatic_input<span class="token punctuation">(</span>show_list<span class="token punctuation">)</span>
        <span class="token keyword">if</span> self.coordinate_list:
            print<span class="token punctuation">(</span><span class="token string">"计算完成!生成操作:"</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token for-or-select variable">mmm</span> <span class="token keyword">in</span> self.coordinate_list:
                print<span class="token punctuation">(</span><span class="token string">"<span class="token entity" title="\t">\t</span>坐标【%d，%d】，操作：%d"</span> % <span class="token punctuation">(</span>mmm<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> + <span class="token number">1</span>, mmm<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> + <span class="token number">1</span>, mmm<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">))</span>
            print<span class="token punctuation">(</span><span class="token string">"========================"</span><span class="token punctuation">)</span>
            a <span class="token operator">=</span> self.coordinate_list.pop<span class="token punctuation">(</span><span class="token punctuation">)</span>
            print<span class="token punctuation">(</span><span class="token string">"选定位置【%d, %d】, 操作为：%d"</span> % <span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> + <span class="token number">1</span>, a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> + <span class="token number">1</span>, a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">))</span>
            <span class="token comment"># time.sleep(0.5)</span>
            <span class="token builtin class-name">return</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>, a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>, a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
 
        <span class="token comment"># 无法确定，随机选择位置</span>
        <span class="token keyword">elif</span> self.mode <span class="token operator">==</span> <span class="token number">1</span>:
            a <span class="token operator">=</span> random.randint<span class="token punctuation">(</span><span class="token number">0</span>, self.m - <span class="token number">1</span><span class="token punctuation">)</span>
            b <span class="token operator">=</span> random.randint<span class="token punctuation">(</span><span class="token number">0</span>, self.n - <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">while</span> show_list<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">'■'</span><span class="token builtin class-name">:</span>
                a <span class="token operator">=</span> random.randint<span class="token punctuation">(</span><span class="token number">0</span>, self.m - <span class="token number">1</span><span class="token punctuation">)</span>
                b <span class="token operator">=</span> random.randint<span class="token punctuation">(</span><span class="token number">0</span>, self.n - <span class="token number">1</span><span class="token punctuation">)</span>
            else:
                print<span class="token punctuation">(</span><span class="token string">"无法确定位置，随机选择【%d, %d】点开"</span> % <span class="token punctuation">(</span>a + <span class="token number">1</span>, b + <span class="token number">1</span><span class="token punctuation">))</span>
                <span class="token comment"># time.sleep(2)</span>
                <span class="token builtin class-name">return</span> a, b, <span class="token number">1</span>
        else:
            print<span class="token punctuation">(</span><span class="token string">"无法确定位置，请手动输入。 提示：还有【%d】个&amp;#128163;"</span> % self.flag<span class="token punctuation">)</span>
            <span class="token builtin class-name">return</span> self.input_set<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
    def advanced_automatic_input<span class="token punctuation">(</span>self, show_list: list<span class="token punctuation">[</span>list<span class="token punctuation">]</span>
 
 
<span class="token punctuation">)</span>:
        processed_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        set_dic <span class="token operator">=</span> dict<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> show_list:
            processed_list.append<span class="token punctuation">(</span>i.copy<span class="token punctuation">(</span><span class="token punctuation">))</span>
 
        <span class="token comment"># 初步处理</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.m<span class="token punctuation">)</span>:
            <span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>self.n<span class="token punctuation">)</span>:
                <span class="token keyword">if</span> type<span class="token punctuation">(</span>processed_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> is int and processed_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span>:
                    c <span class="token operator">=</span> set<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">for</span> <span class="token for-or-select variable">p</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>i - <span class="token number">1</span>, i + <span class="token number">2</span><span class="token punctuation">)</span>:
                        <span class="token keyword">for</span> <span class="token for-or-select variable">q</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>j - <span class="token number">1</span>, j + <span class="token number">2</span><span class="token punctuation">)</span>:
                            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> p <span class="token operator">&lt;</span> self.m and <span class="token number">0</span> <span class="token operator">&lt;</span><span class="token operator">=</span> q <span class="token operator">&lt;</span> self.n:
                                <span class="token keyword">if</span> processed_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>q<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'□'</span><span class="token builtin class-name">:</span>
                                    processed_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> -<span class="token operator">=</span> <span class="token number">1</span>
                                <span class="token keyword">elif</span> processed_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">[</span>q<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'■'</span><span class="token builtin class-name">:</span>
                                    c.add<span class="token variable"><span class="token punctuation">((</span>p<span class="token punctuation">,</span> q<span class="token punctuation">))</span></span>
                    <span class="token keyword">if</span> c:
                        set_dic<span class="token punctuation">[</span>tuple<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> processed_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
 
        <span class="token comment"># 寻找子集</span>
        key_list <span class="token operator">=</span> list<span class="token punctuation">(</span>set_dic.keys<span class="token punctuation">(</span><span class="token punctuation">))</span>
        <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>key_list<span class="token punctuation">))</span>:
            <span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> range<span class="token punctuation">(</span>i + <span class="token number">1</span>, len<span class="token punctuation">(</span>key_list<span class="token punctuation">))</span>:
                <span class="token keyword">if</span> len<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> len<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>:
                    p <span class="token operator">=</span> i
                    q <span class="token operator">=</span> j
                <span class="token keyword">elif</span> len<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> len<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>:
                    p <span class="token operator">=</span> j
                    q <span class="token operator">=</span> i
                else:
                    <span class="token builtin class-name">continue</span>
 
                <span class="token keyword">if</span> set<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span>.issubset<span class="token punctuation">(</span>set<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">))</span>:
                    d <span class="token operator">=</span> list<span class="token punctuation">(</span>set<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span> - set<span class="token punctuation">(</span>key_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">))</span>
                    <span class="token keyword">if</span> set_dic<span class="token punctuation">[</span>key_list<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">]</span> - set_dic<span class="token punctuation">[</span>key_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span>:
                        <span class="token keyword">for</span> <span class="token for-or-select variable">k</span> <span class="token keyword">in</span> d:
                            e <span class="token operator">=</span> list<span class="token punctuation">(</span>k<span class="token punctuation">)</span>
                            e.append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                            self.coordinate_list.append<span class="token punctuation">(</span>e<span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> set_dic<span class="token punctuation">[</span>key_list<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">]</span> - set_dic<span class="token punctuation">[</span>key_list<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> len<span class="token punctuation">(</span>d<span class="token punctuation">)</span>:
                        <span class="token keyword">for</span> <span class="token for-or-select variable">k</span> <span class="token keyword">in</span> d:
                            e <span class="token operator">=</span> list<span class="token punctuation">(</span>k<span class="token punctuation">)</span>
                            e.append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                            self.coordinate_list.append<span class="token punctuation">(</span>e<span class="token punctuation">)</span>
 
 
<span class="token comment"># 传参【 m行，n列， k个雷， mode：0、手动； 1、全自动; 2、半自动】，可自定义</span>
<span class="token comment"># 简单 8 8 10</span>
<span class="token comment"># 一般 16 16 40</span>
<span class="token comment"># 困难 16 32 99</span>
game <span class="token operator">=</span> SaoLei<span class="token punctuation">(</span><span class="token number">16</span>, <span class="token number">32</span>, <span class="token number">99</span>, <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d4eb9290a1290dfc65ead79746165390/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Golang 的骚操作:linkname</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/78d661e86e8c7f5d893caed916e56865/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">sql报错 Out of range value for column ‘**‘ at row</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
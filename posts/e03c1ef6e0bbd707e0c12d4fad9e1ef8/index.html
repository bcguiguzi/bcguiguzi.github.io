<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt中停靠窗口的实现 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt中停靠窗口的实现" />
<meta property="og:description" content="停靠窗口作为主窗口的一部分，可以停靠、浮动、显示隐藏等。现在很多软件都具有可停靠窗口
可停靠位置：
//mydockwidget.h#ifndef MYDOCKWIDGETDEMO_H#define MYDOCKWIDGETDEMO_H#include &lt;QMainWindow&gt;class QAction;class QMenu;class QToolBar;class QStatusBar;class QDockWidget;class QTextEdit;class MyDockWidgetDemo : public QMainWindow{Q_OBJECTpublic:explicit MyDockWidgetDemo(QWidget *parent = 0);signals:public slots:private slots:void newSlot();void saveSlot();void aboutSlot();private:void createActions(); //创建动作void createMenus(); //创建菜单void createToolBars(); //创建工具条void createStatusBars(); //创建状态栏void createDockWidget(); //创建可停靠窗口QAction *newAct;QAction *saveAct;QAction *quitAct;QAction *aboutAct;QMenu *fileMenu;QMenu *viewMenu; //viewMenu主要控制QDockWidget控件的显示和隐藏QMenu *helpMenu;QToolBar *fileToolBar;QToolBar *viewToolBar; //viewToolBar主要控制QDockWidget控件的显示和隐藏QToolBar *helpToolBar;QTextEdit *textEdit;};#endif // MYDOCKWIDGETDEMO_H //mydockwidget." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/e03c1ef6e0bbd707e0c12d4fad9e1ef8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-07-24T18:29:21+08:00" />
<meta property="article:modified_time" content="2012-07-24T18:29:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt中停靠窗口的实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img src="https://images2.imgbox.com/8f/c1/6HxwJAyT_o.png" alt=""></p> 
<p> </p> 
<p><img src="https://images2.imgbox.com/fa/01/8HEFotZo_o.png" alt=""></p> 
<p> </p> 
<p><span style="color:#444444">    </span><span style="color:#444444">停靠窗口作为主窗口的一部分，可以停靠、浮动、显示隐藏等</span><span style="color:#444444">。现在很多软件都具有可停靠窗口</span></p> 
<p><span style="color:#444444">    可停靠位置：</span></p> 
<p><img src="https://images2.imgbox.com/18/a9/K8UnH7Uv_o.png" alt=""></p> 
<p> </p> 
<p><img src="https://images2.imgbox.com/4c/95/rtjnxYdA_o.png" alt=""></p> 
<p> </p> 
<pre><code class="language-cpp">//mydockwidget.h
#ifndef MYDOCKWIDGETDEMO_H
#define MYDOCKWIDGETDEMO_H
#include &lt;QMainWindow&gt;
class QAction;
class QMenu;
class QToolBar;
class QStatusBar;
class QDockWidget;
class QTextEdit;
class MyDockWidgetDemo : public QMainWindow
{
    Q_OBJECT
public:
    explicit MyDockWidgetDemo(QWidget *parent = 0);
signals:
public slots:
	
private slots:
    void newSlot();
    void saveSlot();
    void aboutSlot();

private:
    void createActions();        //创建动作
    void createMenus();          //创建菜单
    void createToolBars();      //创建工具条
    void createStatusBars();    //创建状态栏
    void createDockWidget();    //创建可停靠窗口

    QAction *newAct;
    QAction *saveAct;
    QAction *quitAct;
    QAction *aboutAct;

    QMenu *fileMenu;
    QMenu *viewMenu;            //viewMenu主要控制QDockWidget控件的显示和隐藏
    QMenu *helpMenu;

    QToolBar *fileToolBar;
    QToolBar *viewToolBar;      //viewToolBar主要控制QDockWidget控件的显示和隐藏
    QToolBar *helpToolBar;

    QTextEdit *textEdit;
};
#endif // MYDOCKWIDGETDEMO_H</code></pre> 
<p><br>  </p> 
<pre><code class="language-cpp">//mydockwidget.h
#include "mydockwidgetdemo.h"

#include &lt;QAction&gt;
#include &lt;QMenu&gt;
#include &lt;QMenuBar&gt;
#include &lt;QToolBar&gt;
#include &lt;QStatusBar&gt;
#include &lt;QDockWidget&gt;
#include &lt;QTextEdit&gt;
#include &lt;QMessageBox&gt;
#include &lt;QCalendarWidget&gt;

MyDockWidgetDemo::MyDockWidgetDemo(QWidget *parent) :
    QMainWindow(parent)
{
    //创建一个QTextEdit控件，作为主窗口
    textEdit = new QTextEdit;
    this-&gt;setCentralWidget(textEdit);

    createActions();
    createMenus();
    createToolBars();
    createStatusBars();
	createDockWidget();
	
	this-&gt;setWindowTitle(tr("停靠窗口"));
}

void MyDockWidgetDemo::newSlot()
{
    //清空QTextEdit控件中的内容
    textEdit-&gt;clear();
}

void MyDockWidgetDemo::saveSlot()
{
    QMessageBox::warning(this, tr("事件"), tr("你触发了保存文件事件"),
                         QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes);
}

void MyDockWidgetDemo::aboutSlot()
{
    QMessageBox::warning(this, tr("关于"), tr("欢迎交流。"),
                         QMessageBox::Yes | QMessageBox::No, QMessageBox::Yes);
}

void MyDockWidgetDemo::createActions()
{
    newAct = new QAction(tr("新建"), this);
    newAct-&gt;setShortcut(tr("Ctrl + N"));
    connect(newAct, SIGNAL(triggered()), this, SLOT(newSlot()));

    saveAct = new QAction(tr("保存"), this);
    saveAct-&gt;setShortcut(tr("Ctrl + S"));
    connect(saveAct, SIGNAL(triggered()), this, SLOT(saveSlot()));

    quitAct = new QAction(tr("退出"), this);
    quitAct-&gt;setShortcut(tr("Ctrl + Q"));
    connect(quitAct, SIGNAL(triggered()), this, SLOT(close()));

    aboutAct = new QAction(tr("关于"), this);
    aboutAct-&gt;setShortcut(tr("Ctrl + A"));
    connect(aboutAct, SIGNAL(triggered()), this, SLOT(aboutSlot()));
}

void MyDockWidgetDemo::createMenus()
{
    fileMenu = this-&gt;menuBar()-&gt;addMenu(tr("文件"));
    fileMenu-&gt;addAction(newAct);
    fileMenu-&gt;addAction(saveAct);
    fileMenu-&gt;addAction(quitAct);

    viewMenu = this-&gt;menuBar()-&gt;addMenu(tr("视图"));

    helpMenu = this-&gt;menuBar()-&gt;addMenu(tr("帮助"));
    helpMenu-&gt;addAction(aboutAct);
}

void MyDockWidgetDemo::createToolBars()
{
    //给应用程序添加工具条
    fileToolBar = this-&gt;addToolBar(tr("文件"));
    fileToolBar-&gt;addAction(newAct);
    fileToolBar-&gt;addAction(saveAct);
    fileToolBar-&gt;addAction(quitAct);

    viewToolBar = this-&gt;addToolBar(tr("视图"));

    helpToolBar = this-&gt;addToolBar(tr("帮助"));
    helpToolBar-&gt;addAction(aboutAct);
}

void MyDockWidgetDemo::createStatusBars()
{
    //设置应用程序的状态栏
    statusBar()-&gt;showMessage(tr("准备"));
}

void MyDockWidgetDemo::createDockWidget()
{
    //设置主窗体的第一个QDockWidget
    QDockWidget *firstDockWidget = new QDockWidget(this);
    //设置第一个QDockWidget的窗口名称
    firstDockWidget-&gt;setWindowTitle(tr("日期"));
    //设置第一个QDockWidget的可停靠区域,全部可停靠
    firstDockWidget-&gt;setAllowedAreas(Qt::AllDockWidgetAreas);
    //设置第一个QDockWidget内的控件并设置该控件的属性
    QCalendarWidget *calendar = new QCalendarWidget;
    calendar-&gt;setSizePolicy(QSizePolicy::Fixed, QSizePolicy::Fixed);
    calendar-&gt;setGridVisible(true);
    //将QCalendarWidget控件设置成QDockWidget的主控件 使其能随窗口大小改变而改变
    firstDockWidget-&gt;setWidget(calendar);
    //向主窗体中添加第一个QDockWidget控件 第一个参数表示初始显示的位置 第二个参数是要添加的QDockWidget控件
    this-&gt;addDockWidget(Qt::RightDockWidgetArea, firstDockWidget);
    //向菜单和工具栏中添加第一个QDockWidget的显示和隐藏动作
    viewMenu-&gt;addAction(firstDockWidget-&gt;toggleViewAction());
    viewToolBar-&gt;addAction(firstDockWidget-&gt;toggleViewAction());

    //设置第二个QDockWidget
    QDockWidget *secondDockWidget = new QDockWidget(this);
    secondDockWidget-&gt;setWindowTitle(tr("About Me"));
    secondDockWidget-&gt;setAllowedAreas(Qt::LeftDockWidgetArea | Qt::BottomDockWidgetArea);
    QTextEdit *myInfo = new QTextEdit(tr("&lt;br&gt;欢迎交流&lt;/br&gt;&lt;br&gt;博客地址:hhtp://blog.csdn.net/qiurisuixiang&lt;/br&gt;"));
    secondDockWidget-&gt;setWidget(myInfo);
    this-&gt;addDockWidget(Qt::BottomDockWidgetArea, secondDockWidget);
    //向菜单和工具栏中添加第一个QDockWidget的显示和隐藏动作
    viewMenu-&gt;addAction(secondDockWidget-&gt;toggleViewAction());
    viewToolBar-&gt;addAction(secondDockWidget-&gt;toggleViewAction());
}</code></pre> 
<p><br>  </p> 
<pre><code class="language-cpp">//main.cpp
#include &lt;QApplication&gt;
#include &lt;QTextCodec&gt;
#include "mydockwidgetdemo.h"

int main(int argc, char *argv[])
{
    QTextCodec::setCodecForTr(QTextCodec::codecForLocale());
    QApplication app(argc, argv);
    MyDockWidgetDemo dock;
    dock.show();
    return app.exec();
}</code></pre> 
<p><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5d58765cda46bbafde29b0dcf82c52c3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CentOS 5.4 发布地址</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/989369cde8d7d6383c674a642e2da550/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">android APK 中英文对比(转)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
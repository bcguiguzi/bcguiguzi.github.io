<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue2前端使用axios发起post请求，后端(springboot)拿不到值解决办法 - 编程鬼谷子的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue2前端使用axios发起post请求，后端(springboot)拿不到值解决办法" />
<meta property="og:description" content="一、错误回现（前后端错误演示） axios封装-我常用的请求头参数 application/json; charset=utf-8
页面登录请求-post
网络请求正常传入参数
后端代码，查看控制台发现都为null，没取到值。
二、解决 1.尝试将前端post请求改成get,其他都不用变 发现正常取到值，打印输出正常。前端页面正常跳转。
2.后端设置为post请求，前端axios要配置请求头参数 还要再对数据再进行一次格式化（qs）
然后再去验证
后端控制台正常输出。
三、结论 后来查阅资料发现，只要我们前端只要传入对象格式的参数时，axios就会对我们的数据进行JSON.stringify的操作。也就是说，将我们的 Content-Type 变成了 application/json;charset=utf-8。
axios 使用 post 发送数据时，默认是直接把 json 放到请求体中提交到后端的。
而后端接口使用@RequestParam注解就必须设置axios的请求头为 application/x-www-form-urlencoded
@RequestParam接收的参数是来自HTTP请求体( Content-Type必须为 &#39;application/x-www-form-urlencoded )
httpService.defaults.headers.post[&#39;Content-Type&#39;] = &#39;application/x-www-form-urlencoded&#39;;
列出以下其他的值
httpService.defaults.headers[&#39;Content-Type&#39;] = &#39;application/json; charset=utf-8&#39;;
上传图片最好是单独封装一个
export function fileUpload(url, params = {}) {
return new Promise((resolve, reject) =&gt; {
httpService({
url: url,
method: &#39;post&#39;,
data: params,
headers: {
&#39;Content-Type&#39;: &#39;multipart/form-data&#39;
}
}).then(response =&gt; {
resolve(response);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bcguiguzi.github.io/posts/060f89a3069f57bca948434ac7752ed8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-09T21:00:22+08:00" />
<meta property="article:modified_time" content="2023-11-09T21:00:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程鬼谷子的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程鬼谷子的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue2前端使用axios发起post请求，后端(springboot)拿不到值解决办法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>一、错误回现（前后端错误演示）</h3> 
<p>axios封装-我常用的请求头参数 <span style="color:#be191c;">application/json; charset=utf-8</span></p> 
<p><img alt="" height="444" src="https://images2.imgbox.com/b3/78/43BHbeeB_o.png" width="675"></p> 
<p>页面登录请求-post</p> 
<p><img alt="" height="383" src="https://images2.imgbox.com/1d/bf/H6mV9zII_o.png" width="906"></p> 
<p><img alt="" height="551" src="https://images2.imgbox.com/9c/81/IjY8VyiO_o.png" width="686"></p> 
<p>网络请求正常传入参数</p> 
<p>后端代码，查看控制台发现都为null，没取到值。</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/04/d8/GxuIPHB8_o.png" width="1200"></p> 
<h3>二、解决</h3> 
<h5><span style="color:#be191c;">1.尝试将前端post请求改成get,其他都不用变</span></h5> 
<p><img alt="" height="440" src="https://images2.imgbox.com/c1/54/RT5lNuiG_o.png" width="981"></p> 
<p><img alt="" height="650" src="https://images2.imgbox.com/4b/c8/Au7xWCCl_o.png" width="1200"></p> 
<p><img alt="" height="320" src="https://images2.imgbox.com/91/92/FYcKjeH5_o.png" width="1200"></p> 
<p>发现正常取到值，打印输出正常。前端页面正常跳转。</p> 
<h5><span style="color:#be191c;">2.后端设置为post请求，前端axios要配置请求头参数</span></h5> 
<p><img alt="" height="479" src="https://images2.imgbox.com/49/88/YxQhi1MZ_o.png" width="1200"></p> 
<p><span style="color:#be191c;">还要再对数据再进行一次格式化（qs）</span></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/80/23/dxtD1zzq_o.png" width="1200"></p> 
<p>然后再去验证</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/68/02/jugvp95L_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/1f/f3/RBXC4716_o.png" width="1200"></p> 
<p>后端控制台正常输出。</p> 
<h3>三、结论</h3> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/cd/b7/hZjyI8mm_o.png" width="1200"></p> 
<p><img alt="" height="960" src="https://images2.imgbox.com/ea/5f/dLyWRSXX_o.png" width="1200"></p> 
<p><span style="color:#be191c;">后来查阅资料发现，只要我们前端只要传入对象格式的参数时，axios就会对我们的数据进行JSON.stringify的操作。也就是说，将我们的 Content-Type 变成了 application/json;charset=utf-8。</span><br> axios 使用 post 发送数据时，默认是直接把 json 放到请求体中提交到后端的。</p> 
<p><span style="color:#be191c;">而后端接口使用@RequestParam注解就必须设置axios的请求头为 application/x-www-form-urlencoded</span></p> 
<p><img alt="" height="470" src="https://images2.imgbox.com/c7/fd/rd5rW1Yt_o.png" width="1200"></p> 
<p>@RequestParam接收的参数是来自HTTP请求体( <em><code>Content-Type必须为 'application/x-www-form-urlencoded</code></em> )</p> 
<p><img alt="" height="139" src="https://images2.imgbox.com/78/c4/E3RgKSgw_o.png" width="1200">httpService.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';</p> 
<p></p> 
<p>列出以下其他的值</p> 
<p>httpService.defaults.headers['Content-Type'] = 'application/json; charset=utf-8';</p> 
<p><span style="color:#1c7892;">上传图片最好是单独封装一个</span></p> 
<p><span style="color:#1c7892;">export function fileUpload(url, params = {}) {<!-- --><br>     return new Promise((resolve, reject) =&gt; {<!-- --><br>         httpService({<!-- --><br>             url: url,<br>             method: 'post',<br>             data: params,<br>             headers: {<!-- --><br>                 'Content-Type': 'multipart/form-data'<br>             }<br>         }).then(response =&gt; {<!-- --><br>             resolve(response);<br>         }).catch(error =&gt; {<!-- --><br>             reject(error);<br>         });<br>     });<br> }</span></p> 
<p>分享就到这里了~~~~</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/54147c77b3ec2ba0c1897ac26d7dfef0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">大数据环境生态搭建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ea711d6c931b098fa929315050696197/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【一】Lambda表达式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程鬼谷子的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>